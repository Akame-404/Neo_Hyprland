"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[14418],{45257:(e,t,n)=>{n.d(t,{Z:()=>a});n(667294);var i=n(800480),o=n(724405),r=n(542853),s=n(164921),l=n(785893);function a(e){const{icon:t,title:n,on:a,hasDiff:d,wrapStyle:u,innerStyle:m,hideChevron:p}=e,h=(0,o.Fg)(),g=(0,i.O7)();return(0,l.jsxs)("div",{style:{borderRadius:14,marginRight:6,display:"inline-flex",...d&&{position:"relative"},...u},children:[(0,l.jsxs)(s.Z,{disabled:e.disabled,style:c(Boolean(a),h,m,g.device.isMobile),hoveredStyle:a?{background:h.outlineBlueButtonHoveredBackground}:void 0,pressedStyle:a?{background:h.outlineBlueButtonPressedBackground}:void 0,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onClick:e.onClick,onDoubleClick:e.onDoubleClick,children:[t,n,!p&&(0,r.i)({width:10,marginLeft:4,marginTop:1,fill:a?h.blueColor:h.lightIconColor})]}),d&&(0,l.jsx)("div",{style:{position:"absolute",top:-2,right:-2,background:"dark"===h.mode?h.accentColors.orange[500]:h.accentColors.orange[300],border:`1px solid ${h.contentBackground}`,width:9,height:9,borderRadius:9}})]})}function c(e,t,n,i){return{fontSize:14,display:"inline-flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",borderRadius:32,height:i?28:24,lineHeight:i?"28px":"24px",padding:"0 8px",border:`1px solid ${t.outlineButtonBorder}`,color:t.mediumTextColor,...e&&{color:t.blueColor,border:`1px solid ${t.filterPillBorder}`,background:t.filterPillBackground},...n}}},500255:(e,t,n)=>{n.d(t,{Z:()=>l});n(667294);var i=n(800480),o=n(853465),r=n(573063),s=n(785893);const l=function(e){const t=(0,i.O7)(),n={removeFilterButton:{height:void 0,width:void 0},removeFilterButtonMobile:{marginRight:-12,marginTop:-12,marginBottom:-12,paddingRight:12,paddingTop:12,paddingBottom:12}},{onClick:l,disabled:a}=e,{device:c}=t,d=c.isMobile?{...n.removeFilterButton,...n.removeFilterButtonMobile}:n.removeFilterButton;return(0,s.jsx)(r.Z,{icon:o.X,onClick:l,disabled:a,disableBackground:!0,style:d})}},30676:(e,t,n)=>{n.d(t,{F:()=>l});n(667294);var i=n(886628),o=n(274016),r=n(552275),s=n(785893);function l(e){const{teamStore:t}=e,{name:n}=(0,i.VK)((()=>({name:t.getName()})),[t]);return(0,s.jsx)(r.Z,{...e,icon:(0,s.jsx)(o.p,{size:14,store:t,disabled:!0}),title:n})}},776619:(e,t,n)=>{n.d(t,{Z:()=>M});n(667294);var i=n(800480),o=n(886628),r=n(984619),s=n(90028),l=n(421202),a=n(709291),c=n(296994),d=n(433929),u=n(615447),m=n(80444),p=n(206258),h=n(731278),g=n(511470),f=n(776798),v=n(500255),S=n(685567),b=n(608319),x=n(785893);const k={token:{display:"flex",alignItems:"center"},icon:{marginRight:4}},C=(0,a.defineMessages)({searchPages:{defaultMessage:"Search pages",id:"searchPageFilter.searchTokenFilter.tokenInput.placeholder"},selectAPage:{defaultMessage:"Select a page",id:"searchPageFilter.searchTokenFilter.resultSection.title"}});const M=function(e){let{mode:t,title:n,blockIds:o,onChange:r,disabled:l,focused:p,onMenuDismiss:h,onMenuOpen:g,parentStore:f}=e;const v=(0,i.O7)();return(0,x.jsx)(b.Z,{mode:t,hasItemsSelected:(null==o?void 0:o.length)>0,title:n,icon:s.j,iconStyles:F(v).recordIcon,items:o,onChange:r,focused:p,renderFilter:(e,t)=>(0,x.jsx)(R,{item:e,args:t,parentStore:f}),renderToken:(e,t)=>(0,x.jsx)(T,{item:e,handlers:t,blockIds:o,parentStore:f}),renderItemForSummary:e=>(0,x.jsx)(y,{item:e,parentStore:f}),addItemLabel:(0,x.jsx)(a.FormattedMessage,{defaultMessage:"Add another page",id:"searchPageFilter.searchTokenFilter.addAPage.button"}),labelText:{title:n,tokenInputPlaceholder:d.default.formatMessage(C.searchPages),componentDebugName:"SearchPageFilter"},performRequest:e=>async function(e,t){let{query:n,current:i}=e;const{currentSpaceStore:o}=m.default.state;if(!o)return[];const r=await c.FF.searchActions.load(),s=n?(await r.searchPageIds({environment:t,query:n,limit:20,spaceId:o.id,requireEditPermissions:!1,excludeTemplates:!1,source:"ancestor_filter_page_search",boostRecentlyViewedPages:!0})).results:u.X4.state.map((e=>e.pageId)),l=new Set(i);return s.filter((e=>!l.has(e)))}(e,v),renderResultMenuItem:(e,t)=>(0,x.jsx)(j,{item:e,props:t,parentStore:f}),disabled:l,onMenuDismiss:h,onMenuOpen:g})};function I(e,t){return p.G.createChildStore(t,{table:l.iU,id:e})}function y(e){let{item:t,parentStore:n}=e;const i=I(t,n);return(0,x.jsx)(f.Z,{store:i,shouldWrap:!0,maxLength:50})}function T(e){let{item:t,handlers:n,blockIds:s,parentStore:l}=e;const a=(0,i.O7)(),c=k,d=1===s.length,u=I(t,l),m=(0,o.VK)((()=>u.getIcon()),[u]),p=(0,x.jsxs)("div",{style:c.token,children:[(0,x.jsx)(h.Z,{disabled:!0,icon:m,isEmptyPage:!1,size:20,style:c.icon}),(0,x.jsx)(f.Z,{store:u})]});return(0,x.jsx)(S.Z,{format:a.device.isMobile?r.lo.Large:r.lo.Small,value:p,showRemoveButton:!0,onClickRemove:n.onRemove,isSingle:d,shouldShrink:!0,backgroundColor:"transparent",shouldWrap:!1})}function j(e){let{item:t,props:n,parentStore:i}=e;const r=(0,o.VK)((()=>I(t,i)),[t,i]);return(0,x.jsx)(g.Z,{...n,store:r})}function F(e){return{menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},menuItemTitle:{width:"100%"},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginRight:12},recordIcon:{fill:"currentColor"}}}function R(e){let{item:t,args:n,parentStore:o}=e;const{disabled:r,onRemove:s,onClick:l}=n,a=F((0,i.O7)()),c=I(t,o),d=(0,x.jsx)(v.Z,{disabled:r,onClick:s});return(0,x.jsx)(g.Z,{disabled:r,focused:!1,store:c,right:d,style:a.menuItem,desktopTitleStyle:a.menuItemTitle,onClick:l})}},983890:(e,t,n)=>{n.d(t,{Z:()=>S});n(667294);var i=n(800480),o=n(886628),r=n(266897),s=n(222686),l=n(519889),a=n(307928),c=n(709291),d=n(296994),u=n(206258),m=n(992864),p=n(93044),h=n(500255),g=n(197680),f=n(608319),v=n(785893);const S=function(e){let{mode:t,title:n,userIds:o,onChange:r,disabled:l,focused:a,onMenuDismiss:u,onMenuOpen:m,parentStore:p}=e;const h=(0,i.O7)(),g=(0,c.useIntl)();return(0,v.jsx)(f.Z,{mode:t,title:n,icon:s.f,iconStyles:M(h).recordIcon,items:o,onChange:r,disabled:l,focused:a,renderFilter:(e,t)=>(0,v.jsx)(I,{item:e,args:t,parentStore:p}),renderToken:(e,t)=>(0,v.jsx)(k,{item:e,handlers:t,userIds:o,parentStore:p}),renderItemForSummary:e=>(0,v.jsx)(x,{item:e,parentStore:p}),addItemLabel:(0,v.jsx)(c.FormattedMessage,{defaultMessage:"Add a person",id:"search.filterMenu.addAPersonButton.label"}),labelText:{title:n,tokenInputPlaceholder:g.formatMessage({defaultMessage:"Search people",id:"search.filterMenu.searchPeople.placeholder"}),componentDebugName:"SearchPersonFilter"},performRequest:e=>async function(e,t){let{query:n,current:i}=e;const o=new Set(i),r=await d.FF.searchActions.load(),s=await r.searchVisibleSpaceUsers({environment:t,query:n,membersOnly:!1});return s.filter((e=>!o.has(e.id))).slice(0,20).map((e=>e.id))}(e,h),renderResultMenuItem:(e,t)=>(0,v.jsx)(C,{item:e,props:t,parentStore:p}),onMenuDismiss:u,onMenuOpen:m,hasItemsSelected:(null==o?void 0:o.length)>0})};function b(e,t){const n=function(e,t){return u.U6.createChildStore(t,{table:l.KJ,id:e})}(e,t);return n.getValue()}function x(e){let{item:t,parentStore:n}=e;const i=(0,c.useIntl)(),r=(0,o.VK)((()=>b(t,n)),[t,n]);return(0,v.jsx)(v.Fragment,{children:(0,a.Nz)(i,r)})}function k(e){let{item:t,handlers:n,userIds:s,parentStore:l}=e;const a=(0,i.O7)(),c=1===s.length,d=(0,o.VK)((()=>b(t,l)),[t,l]);return d?(0,v.jsx)(m.ZP,{format:a.device.isMobile?p.lP.Large:p.lP.Small,showRemoveButton:!0,isSingle:c,onClickRemove:n.onRemove,actor:(0,r.m3)(d),shouldShrink:!0,style:{background:"transparent"}},t):null}function C(e){let{item:t,props:n,parentStore:i}=e;const s=(0,o.VK)((()=>b(t,i)),[t,i]);return(0,v.jsx)(g.Z,{...n,actor:(0,r.m3)(s)})}function M(e){return{menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},menuItemTitle:{width:"100%"},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginRight:12},recordIcon:{marginRight:2,fill:"currentColor"}}}function I(e){let{item:t,args:n,parentStore:s}=e;const{disabled:l,onRemove:a,onClick:c}=n,d=M((0,i.O7)()),u=(0,o.VK)((()=>b(t,s)),[t,s]),m=(0,v.jsx)(h.Z,{disabled:l,onClick:a});return(0,v.jsx)(g.Z,{disabled:l,focused:!1,actor:(0,r.m3)(u),right:m,style:d.menuItem,desktopTitleStyle:d.menuItemTitle,onClick:c},t)}},813993:(e,t,n)=>{n.d(t,{Z:()=>k});var i=n(667294),o=n(800480),r=n(886628),s=n(788507),l=n(429369),a=n(492338),c=n(709291),d=n(296994),u=n(195697),m=n(80444),p=n(206258),h=n(30397),g=n(731278),f=n(93044),v=n(500255),S=n(30676),b=n(608319),x=n(785893);const k=function(e){let{mode:t,title:n,teamIds:i,onChange:r,disabled:l,focused:p,onMenuDismiss:g,onMenuOpen:f,parentStore:v}=e;const S=(0,o.O7)(),k=(0,c.useIntl)(),C=(0,a.iY)(i);return(0,x.jsx)(b.Z,{mode:t,title:n,icon:s.I,iconStyles:T(S).recordIcon,items:C||[],onChange:r,disabled:l,focused:p,renderFilter:(e,t)=>(0,x.jsx)(j,{item:e,args:t,parentStore:v}),renderToken:(e,t)=>(0,x.jsx)(y,{item:e,handlers:t,teamIds:i,parentStore:v}),renderItemForSummary:e=>(0,x.jsx)(M,{item:e,parentStore:v}),addItemLabel:(0,x.jsx)(c.FormattedMessage,{defaultMessage:"Add a teamspace",id:"search.filterMenu.addATeamButton.label"}),labelText:{title:n,tokenInputPlaceholder:k.formatMessage({defaultMessage:"Search teamspaces",id:"search.filterMenu.searchTeams.placeholder"}),componentDebugName:"SearchTeamFilter"},performRequest:e=>async function(e,t){var n;let{query:i,current:o}=e;const r=new Set(o),s=m.default.state.currentSpaceViewStore,l=m.default.state.currentSpaceStore,a=null===(n=m.default.state.currentUserStore)||void 0===n?void 0:n.id;if(!s||!l||!a)return[];if(!i){const e=new Set(s.getTeamsStores().map((e=>e.id)));if(h.Z.state.teams.map((e=>e.id)).forEach((t=>e.add(t))),e.size>0)return[...e]}const c=await(0,u.qX)({environment:t,spaceStore:l,currentUserId:a}),p=await d.FF.searchActions.load();return(await p.searchTeams({query:i,spaceViewStore:s,teamStores:c})).filter((e=>!r.has(e.id))).slice(0,20).map((e=>e.id))}(e,S),renderResultMenuItem:(e,t)=>(0,x.jsx)(I,{item:e,props:t,parentStore:v}),onMenuDismiss:g,onMenuOpen:f,hasItemsSelected:Boolean(C&&(null==C?void 0:C.length)>0)})};function C(e,t){return p.zX.createChildStore(t,{table:l.e0,id:e})}function M(e){let{item:t,parentStore:n}=e;return(0,x.jsx)(x.Fragment,{children:C(t,n).getName()})}function I(e){let{item:t,props:n,parentStore:o}=e;const r=C(t,o);return(0,i.createElement)(S.F,{...n,key:t,teamStore:r})}function y(e){let{item:t,handlers:n,teamIds:i,parentStore:s}=e;const l=(0,o.O7)(),c=(0,a.iY)(i),d=1===(null==c?void 0:c.length),u=(0,r.VK)((()=>C(t,s)),[t,s]),m=(0,r.VK)((()=>u.getName()),[u]),p=(0,r.VK)((()=>function(e){const t=e.getIcon();return function(e){return(0,x.jsx)(g.Z,{disabled:!0,icon:t,isEmptyPage:!1,size:e})}}(u)),[u]);return u?(0,x.jsx)(f.ZP,{format:l.device.isMobile?f.lP.Large:f.lP.Small,showRemoveButton:!0,isSingle:d,onClickRemove:n.onRemove,renderAvatar:p,title:m,style:{background:"transparent"}}):null}function T(e){return{menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},menuItemTitle:{width:"100%"},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginRight:12},recordIcon:{marginRight:6,fill:"currentColor"}}}function j(e){let{item:t,args:n,parentStore:i}=e;const{disabled:r,onRemove:s,onClick:l}=n,a=T((0,o.O7)()),c=C(t,i),d=(0,x.jsx)(v.Z,{disabled:r,onClick:s});return(0,x.jsx)(S.F,{disabled:r,focused:!1,teamStore:c,right:d,style:a.menuItem,desktopTitleStyle:a.menuItemTitle,onClick:l},t)}},608319:(e,t,n)=>{n.d(t,{z:()=>N,Z:()=>_});var i=n(667294),o=n(883355),r=n(800480),s=n(886628),l=n(747453),a=n(709291),c=n(653965),d=n(401898),u=n(45257),m=n(475024),p=n(223196),h=n(749085);class g extends h.default{getInitialState(){return{isMenuOpen:!1,inputTemporaryValue:"",indexToReplace:void 0,popupOriginRect:void 0}}}const f=g;var v=n(552275),S=n(489728),b=n(953437),x=n(158297),k=n(672495),C=n(975689),M=n(991642),I=n(568626),y=n(552629),T=n(823586),j=n(460709),F=n(229798),R=n(672087),O=n(478140),Z=n(632163),B=n(743765),P=n(840721),w=n(147082),V=n(785893);const z={input:{marginTop:8,marginLeft:8,marginRight:8,boxSizing:"border-box",width:"auto"},menu:{width:250,maxHeight:"40vh"},inputMenu:{maxHeight:"20vh"}};const L=function(e){let{labelText:t,value:n,renderResultMenuItem:o,onConfirm:l,items:a,performRequest:c,onDismiss:d,onChange:u,renderToken:m,onRemove:p,onClear:h,disabled:g}=e;const f=(0,r.O7)(),v=(0,s.qz)(void 0,F.Z),S=(0,s.qz)(void 0,R.Z),b=(0,i.useCallback)(((e,i,r)=>(0,V.jsx)(q,{error:e,data:i,ready:r,labelText:t,value:n,renderResultMenuItem:o,onConfirm:l,menuListStore:v})),[t,n,o,l,v]),x={query:n,current:a};return(0,V.jsx)(O.Z,{...H(f,d,t,n,a,u,m,p,h,g),children:(0,V.jsx)(T.Z,{debounce:100,requestStore:S,request:x,performRequest:c,render:b})})};function A(e){const{device:t}=e;return t.isMobile}function D(e){let{labelText:t,value:n,items:i,disabled:o,onChange:s,renderToken:l,onRemove:a,onClear:d}=e;const u=(0,r.O7)(),m=i.map((e=>l(e,{onRemove:()=>a(e)})));return(0,V.jsx)(w.ZP,{focus:!A(u)||void 0,focusAfterAnimation:!0,format:w.UR.FilterValue,tokens:m,placeholder:t.tokenInputPlaceholder,onRemoveLastToken:()=>function(e,t){const n=c.Z$(e);n&&t(n)}(i,a),onClearButtonClick:d,value:n,onChange:s,showClearButton:!0,disabled:Boolean(o),style:z.inputMenu})}function H(e,t,n,i,o,r,s,l,a,c){if(A(e)){return{menuType:j.og.Modal,title:n.title,right:(0,V.jsx)(P.DoneMenuText,{}),onClickRight:t,header:(0,V.jsx)(D,{labelText:n,value:i,items:o,disabled:c,onChange:r,renderToken:s,onRemove:l,onClear:a})}}return{menuType:j.og.Popup,onClickOutside:t,header:(0,V.jsx)(D,{labelText:n,value:i,items:o,disabled:c,onChange:r,renderToken:s,onRemove:l,onClear:a}),...z.menu}}function q(e){let{error:t,data:n,ready:o,labelText:r,value:l,renderResultMenuItem:c,onConfirm:d,menuListStore:u}=e;const m=(0,s.qz)(u,F.Z),p=(0,i.useCallback)((e=>(0,V.jsx)(k.Z,{...e,title:r.resultSectionTitle,loading:!o})),[r,o]);if(t)return I.log({level:"error",from:r.componentDebugName,type:"requestFailed",error:(0,y.Ui)(t),data:{miscDataToConvertToString:{query:l}}}),(0,V.jsx)(p,{children:(0,V.jsx)(B.Z,{title:(0,V.jsx)(a.FormattedMessage,{defaultMessage:"Something went wrong.",id:"search.inputMenu.errorMessage"})})});if(!n)return(0,V.jsx)(p,{children:(0,V.jsx)(B.Z,{title:(0,V.jsx)(a.FormattedMessage,{defaultMessage:"Loadingâ€¦",id:"search.inputMenu.loading.message"})})});if(n&&0===n.length)return(0,V.jsx)(p,{children:(0,V.jsx)(B.Z,{title:(0,V.jsx)(a.FormattedMessage,{defaultMessage:"No results found.",id:"search.inputMenu.noResults.message"})})});const h={key:"results",items:n.map((e=>function(e,t,n){return{key:e,action:()=>n(e),render:n=>t(e,n)}}(e,c,d))),render:p};return(0,V.jsx)(Z.Z,{type:Z.i.Vertical,store:m,initialFocus:0,sections:[h]})}let N=function(e){return e.Button="Button",e.Section="Section",e.Pill="Pill",e}({});class U extends o.Z{constructor(){super(...arguments),this.animationFrameRef={current:void 0},this.originRef=i.createRef(),this.storeTypes={componentStore:f},this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleMenuClose=e=>Q(this.stores.componentStore,this.props.onMenuDismiss,e),this.scheduleMeasurement=(e,t)=>{this.animationFrameRef.current=requestAnimationFrame(function(e,t,n){return i=>{if(!n)return;if(!n.current)return;const o=e?e(t.state):t.state;t.setState({...o,popupOriginRect:n.current.getBoundingClientRect()})}}(t,this.stores.componentStore,this.originRef))}}didMount(){window.addEventListener("resize",this.scheduleMeasurement)}willUnmount(){window.removeEventListener("resize",this.scheduleMeasurement),this.animationFrameRef.current&&(cancelAnimationFrame(this.animationFrameRef.current),this.animationFrameRef.current=void 0)}didUpdate(e){(e.items.length!==this.props.items.length||e.mode!==this.props.mode)&&this.scheduleMeasurement()}renderComponent(){const{device:e}=this.environment,{mode:t}=this.props;return e.isMobile?(0,V.jsx)(oe,{searchTokenFilterProps:this.props,componentStore:this.stores.componentStore}):this.renderDesktop(t)}renderDesktop(e){const{title:t,disabled:n}=this.props,{componentStore:{state:i}}=this.stores,o=n||i.isMenuOpen;let r;const s=(()=>e===N.Section?(r=t,this.renderSectionOrigin()):e===N.Button?this.renderButtonOrigin():e===N.Pill?this.renderPillOrigin():void(0,d.t1)(e))();return(0,V.jsxs)(M.Z,{title:r,marginAfter:e===N.Section,style:X(this.environment,this.props.mode).sectionMenuItem,children:[e!==N.Pill&&this.renderFilters({disableFilters:o,showLabel:!1}),s,(0,V.jsx)(b.ZP,{popupType:p.k.Popup,placementToOrigin:b.ZP.Placement.Bottom,alignmentToOrigin:b.ZP.Alignment.Start,open:G(this.stores.componentStore),originRect:i.popupOriginRect,render:()=>(0,V.jsx)(ie,{searchTokenFilterProps:this.props,componentStore:this.stores.componentStore}),onDismiss:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleMenuClose,keepFocus:!0,preventScaleTransition:!0})]})}renderButtonOrigin(){const{icon:e,title:t,disabled:n,focused:i}=this.props,o=X(this.environment,this.props.mode),r=W(this.theme),s={...o.menuItem,...r.buttonMenuItem};return(0,V.jsx)("div",{ref:this.originRef,style:o.menuItemWrapper,children:(0,V.jsx)(v.Z,{disabled:n||G(this.stores.componentStore),icon:e(o.icon),title:t,focused:i,onClick:e=>re(this.scheduleMeasurement,void 0,this.props.onMenuOpen),style:s})})}renderPillOrigin(){const{icon:e,title:t,disabled:n,iconStyles:i}=this.props,o=X(this.environment,this.props.mode),r=this.props.mode===N.Pill&&this.props.hasItemsSelected;return(0,V.jsx)("div",{ref:this.originRef,style:o.menuItemWrapper,children:(0,V.jsx)(u.Z,{on:r,icon:e({...o.icon,...i}),title:(0,V.jsx)("span",{children:t}),onClick:e=>re(this.scheduleMeasurement,void 0,this.props.onMenuOpen),wrapStyle:{opacity:n?.4:1}})})}renderSectionOrigin(){const{addItemLabel:e,disabled:t}=this.props,n=X(this.environment,this.props.mode),o=W(this.theme);return(0,V.jsxs)(i.Fragment,{children:[(0,V.jsx)("div",{ref:this.originRef,style:n.menuItemWrapper}),(0,V.jsx)(v.Z,{disabled:t||G(this.stores.componentStore),icon:(0,l.R)(n.iconSmall),title:e,focused:!1,onClick:e=>re(this.scheduleMeasurement,void 0,this.props.onMenuOpen),style:{...n.appendListItemButton,...o.appendListItemButton}})]})}renderFilters(e){const{items:t,renderFilter:n}=this.props,{device:i}=this.environment,o=t.map(((t,o)=>(0,V.jsx)("li",{children:n(t,{disabled:e.disableFilters,onRemove:()=>$(t,this.props.items,this.props.onChange),onClick:()=>i.isMobile?Y(this.stores.componentStore):re(this.scheduleMeasurement,o,this.props.onMenuOpen)})},`${t}_${o}`)));return(0,V.jsx)("ul",{style:m.mK,children:o})}}U.displayName="SearchTokenFilter";const _=U;function K(e,t,n){n(t.filter((t=>t!==e)))}function E(e){e([])}function W(e){return{buttonMenuItem:{color:e.mediumTextColor},appendListItemButton:{color:e.lightTextColor}}}function $(e,t,n){K(e,t,n)}function X(e,t){return{menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},menuItemWrapper:{display:"flex"},sectionMenuItem:{display:"flex"},appendListItemButton:{minHeight:void 0,paddingTop:4,paddingBottom:4,fontSize:m.yv(e,"UIRegular")},icon:{height:16,width:16,marginRight:"Pill"===t?6:-2,fill:"currentColor"},iconSmall:{height:12,width:12},summary:{display:"inline"},summaryItem:{display:"inline"}}}function Y(e){e.setState({...e.state,isMenuOpen:!0})}function G(e){return e.state.isMenuOpen}function J(e){e.setState({...e.state,inputTemporaryValue:"",indexToReplace:void 0})}function Q(e,t,n){J(e),e.setState({...e.state,isMenuOpen:!1,indexToReplace:void 0}),t&&t(n)}function ee(e,t,n,i,o){const{indexToReplace:r}=o.state;"number"==typeof r&&r<t.length?function(e,t,n,i){i(n.slice(0,e).concat(t,n.slice(e+1)))}(r,e,t,n):t.includes(e)&&N.Pill?K(e,t,n):function(e,t,n){const i=t.concat(e);n(c.jj(i))}(e,t,n),i||J(o)}function te(e){let{disableFilters:t,icon:n,title:i,mode:o,componentStore:s}=e;const l=X((0,r.O7)(),o);return(0,V.jsx)(v.Z,{disabled:t,focused:!1,icon:n({...l.icon}),title:i,onClick:e=>Y(s)})}function ne(e){let{disableFilters:t,title:n,items:o,renderItemForSummary:s,mode:l,onChange:a,componentStore:c}=e;const d=(0,r.O7)(),u=(0,i.useCallback)((()=>Y(c)),[c]),p=X(d,l),h={...m.mK,...p.summary},g=o.length-1,f=(0,V.jsx)("ul",{style:h,children:o.map(((e,t)=>(0,V.jsx)("li",{style:p.summaryItem,children:(0,V.jsxs)(i.Fragment,{children:[s(e),t!==g&&","," "]})},e)))});return(0,V.jsx)(C.Z,{disabled:t,onClick:u,onClickClear:()=>E(a),label:n,title:f})}function ie(e){let{searchTokenFilterProps:t,componentStore:n}=e;const{items:o,onChange:r,keepInputOnItemConfirm:l,onMenuDismiss:c,renderToken:d,renderFooter:u,allowApplyBatchSelection:m}=t,p=(0,i.useCallback)((e=>ee(e,o,r,l,n)),[o,r,l,n]),h=(0,i.useCallback)((e=>Q(n,c,e)),[n,c]),g=(0,i.useCallback)((e=>function(e,t){const{target:n}=e;t.setState({...t.state,inputTemporaryValue:String(n.value)})}(e,n)),[n]),f=(0,s.VK)((()=>n.state),[n]);return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(L,{...t,value:f.inputTemporaryValue,onChange:g,onDismiss:h,onConfirm:p,onClear:()=>{!function(e){e.setState({...e.state,inputTemporaryValue:""})}(n),E(r)},onRemove:e=>$(e,o,r),renderToken:d}),u&&(0,V.jsxs)(k.Z,{topBorder:!0,style:{padding:6,justifyContent:"space-between",display:"flex"},children:[(0,V.jsx)(S.Z,{onClick:()=>{E(r)},children:(0,V.jsx)(a.FormattedMessage,{id:"searchTokenFilter.clearButton",defaultMessage:"Clear"})}),m&&(0,V.jsx)(x.Z,{onClick:()=>{Q(n,c,"applyButton")},children:(0,V.jsx)(a.FormattedMessage,{id:"searchTokenFilter.applyButton",defaultMessage:"Apply"})})]})]})}function oe(e){let{searchTokenFilterProps:t,componentStore:n}=e;const{mode:o,onMenuDismiss:r,disabled:l,title:a,items:c,renderItemForSummary:d,onChange:u,icon:m}=t,h=(0,i.useCallback)((e=>Q(n,r,e)),[n,r]),g=(0,i.useCallback)((()=>(0,V.jsx)(ie,{searchTokenFilterProps:t,componentStore:n})),[t,n]),f=(0,s.VK)((()=>G(n)),[n]),v=l||f,S=o===N.Section?(0,V.jsx)(ne,{title:a,items:c,renderItemForSummary:d,mode:o,onChange:u,componentStore:n,disableFilters:v}):(0,V.jsx)(te,{icon:m,title:a,mode:o,componentStore:n,disableFilters:v});return(0,V.jsx)(b.ZP,{popupType:p.k.SlideUp,open:f,origin:S,render:g,onDismiss:h,keepFocus:!0})}function re(e,t,n){n&&n(),e(void 0,(e=>({...e,isMenuOpen:!0,indexToReplace:t})))}},975689:(e,t,n)=>{n.d(t,{Z:()=>d});n(667294);var i=n(800480),o=n(724405),r=n(137810),s=n(552275),l=n(824006),a=n(500255),c=n(785893);const d=function(e){const{disabled:t,label:n,title:r,onClick:l,isToggle:a,isToggleActive:d,onClickClear:p,...h}=e,g=(0,o.Fg)(),f=(0,i.O7)(),v=function(e){return{menuItemLabel:{color:e.lightTextColor}}}(g),S=u(f),b=(0,c.jsx)("span",{style:v.menuItemLabel,children:n});return(0,c.jsx)(s.Z,{focused:!1,...h,inline:a,disabled:t,icon:b,title:r,right:(0,c.jsx)(m,{disabled:!!t,isToggle:!!a,isToggleActive:!!d,onClick:l,onClickClear:p}),onClick:l,dontShrinkIcon:!0,dontShrinkRight:!0,shouldWrapTitle:!0,style:S.menuItem,desktopIconStyle:S.menuItemLabel})};function u(e){return{menuItem:{background:void 0,minHeight:void 0,fontSize:e.device.isMobile?r.Z.fontSize.UISmall.mobile:r.Z.fontSize.UIRegular.desktop,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginTop:0},rightWrapper:{display:"flex",alignItems:"center",marginTop:"-50%",marginBottom:"-50%",height:44}}}function m(e){let{disabled:t,isToggle:n,isToggleActive:o,onClick:r,onClickClear:s=(()=>{})}=e;const d=u((0,i.O7)()).rightWrapper;return n?(0,c.jsx)("div",{style:d,children:(0,c.jsx)(l.Z,{on:!!o,onClick:r})}):(0,c.jsx)(a.Z,{disabled:t,onClick:s})}},991642:(e,t,n)=>{n.d(t,{Z:()=>r});n(667294);var i=n(672495),o=n(785893);const r=function(e){const t={desktopTitleStyle:{marginBottom:4},marginAfter:{marginBottom:16}},{title:n,marginAfter:r,desktopStyle:s,desktopTitleStyle:l,...a}=e,c=(r||s)&&{...r&&t.marginAfter,...s},d=l?{...t.desktopTitleStyle,...l}:t.desktopTitleStyle;return(0,o.jsx)(i.Z,{isTitleUppercase:!0,disableDesktopPadding:!0,enableActionSheetTitle:!0,desktopStyle:c,desktopTitleStyle:d,shouldShowBottomDivider:!1,title:n,...a})}},788507:(e,t,n)=>{n.d(t,{I:()=>r});n(667294);var i=n(745238),o=n(785893);const r=(0,i.IU)("openTeamSearch",{viewBox:"0 0 16 14",svg:(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("path",{d:"M9.506 13.342h4.447c.348 0 .621-.11.82-.328.2-.22.3-.516.3-.891V4.852c0-.375-.1-.67-.3-.885-.199-.219-.472-.328-.82-.328H9.922v1.136h3.709c.101 0 .178.026.228.077.051.05.076.127.076.228v6.815c0 .101-.025.177-.076.228-.05.05-.127.076-.228.076H9.506v1.143zm2.28-6.358h.925c.129 0 .193-.064.193-.193v-.896c0-.133-.064-.2-.193-.2h-.926c-.125 0-.187.067-.187.2v.896c0 .129.062.193.187.193zm0 2.168h.925c.129 0 .193-.066.193-.199v-.896c0-.133-.064-.2-.193-.2h-.926c-.125 0-.187.067-.187.2v.896c0 .133.062.2.187.2zm0 2.163h.925c.129 0 .193-.067.193-.2v-.896c0-.13-.064-.194-.193-.194h-.926c-.125 0-.187.065-.187.194v.896c0 .133.062.2.187.2zm-10.864.808c0 .375.1.672.299.89.199.22.474.329.826.329H9.44c.348 0 .621-.11.82-.328.204-.22.305-.516.305-.891V1.928c0-.38-.101-.676-.304-.89-.2-.22-.473-.329-.82-.329H2.046c-.352 0-.627.11-.826.328-.2.215-.3.512-.3.89v10.196zm1.142-.228V2.162c0-.105.026-.183.077-.234.05-.051.127-.076.228-.076h6.75c.102 0 .178.025.229.076.05.05.076.129.076.234v9.733c0 .101-.026.177-.076.228-.051.05-.127.076-.229.076H2.37c-.101 0-.178-.025-.228-.076-.051-.05-.077-.127-.077-.228zm1.588.85h.891v-1.946c0-.117.06-.176.182-.176h2.039c.12 0 .181.059.181.176v1.945h.89V10.5c0-.25-.058-.435-.175-.557-.117-.125-.295-.187-.533-.187H4.36c-.238 0-.416.062-.533.187-.117.122-.176.307-.176.557v2.244zm.17-8.362h1.12c.156 0 .234-.078.234-.235v-1.09c0-.156-.078-.234-.235-.234H3.822c-.148 0-.222.078-.222.235v1.09c0 .156.074.234.222.234zm2.719 0h1.12c.152 0 .228-.078.228-.235v-1.09c0-.156-.077-.234-.229-.234H6.541c-.152 0-.229.078-.229.235v1.09c0 .156.077.234.229.234zM3.822 6.627h1.12c.156 0 .234-.078.234-.234V5.309c0-.157-.078-.235-.235-.235H3.822c-.148 0-.222.078-.222.235v1.084c0 .156.074.234.222.234zm2.719 0h1.12c.152 0 .228-.078.228-.234V5.309c0-.157-.077-.235-.229-.235H6.541c-.152 0-.229.078-.229.235v1.084c0 .156.077.234.229.234zm-2.719 2.25h1.12c.156 0 .234-.08.234-.24V7.553c0-.157-.078-.235-.235-.235H3.822c-.148 0-.222.078-.222.235v1.084c0 .16.074.24.222.24zm2.719 0h1.12c.152 0 .228-.08.228-.24V7.553c0-.157-.077-.235-.229-.235H6.541c-.152 0-.229.078-.229.235v1.084c0 .16.077.24.229.24z"})})})},90028:(e,t,n)=>{n.d(t,{j:()=>r});n(667294);var i=n(745238),o=n(785893);const r=(0,i.IU)("searchInPage",{viewBox:"0 0 12 14",svg:(0,o.jsx)("path",{d:"M2.877 13.365h6.24c.63 0 1.104-.164 1.424-.492.32-.324.48-.8.48-1.43V6.13c0-.274-.015-.504-.046-.691a1.531 1.531 0 00-.182-.522 2.185 2.185 0 00-.387-.498l-3.07-3.123a2.11 2.11 0 00-.48-.38 1.528 1.528 0 00-.51-.183A3.464 3.464 0 005.7.68H2.877c-.629 0-1.104.164-1.424.492-.32.324-.48.8-.48 1.43v8.841c0 .633.16 1.112.48 1.436.32.324.795.486 1.424.486zm.094-1.154c-.282 0-.492-.072-.633-.217-.14-.144-.211-.351-.211-.621V2.678c0-.27.07-.479.21-.627.142-.149.354-.223.64-.223h2.496V5.04c0 .418.101.73.304.938.207.207.52.31.938.31h3.158v5.086c0 .27-.07.477-.21.621-.142.145-.354.217-.64.217H2.971zm3.855-6.938c-.12 0-.209-.027-.263-.082-.051-.054-.077-.142-.077-.263V1.986l3.229 3.287H6.826z"})})}}]);