"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[23840,27994],{124697:(e,t,a)=>{a.d(t,{$f:()=>f,Iw:()=>o,KC:()=>i,Lb:()=>l,Z:()=>c,e2:()=>g,gE:()=>r,jM:()=>m,ky:()=>d,m0:()=>n,nK:()=>p,uS:()=>u,ye:()=>h});var s=a(730459);function n(e,t){s.K4(e,"overview_analytics_filter_change",t)}function i(e,t){s.K4(e,"user_analytics_engagement_timerange_filter_change",t)}function o(e,t){s.K4(e,"user_analytics_table_filter_change",t)}function r(e,t){s.K4(e,"user_analytics_table_sort_change",t)}function l(e,t){s.K4(e,"user_analytics_export_requested",t)}function d(e,t){s.K4(e,"content_analytics_engagement_timerange_filter_change",t)}function c(e,t){s.K4(e,"content_analytics_export_requested",t)}function u(e,t){s.K4(e,"content_analytics_table_filter_change",t)}function g(e,t){s.K4(e,"content_analytics_table_timerange_filter_change",t)}function m(e,t){s.K4(e,"content_analytics_table_sort_change",t)}function p(e,t){s.K4(e,"workspace_analytics_tab_click",t)}function h(e,t){s.K4(e,"search_analytics_table_timerange_filter_change",t)}function f(e,t){s.K4(e,"search_analytics_table_sort_change",t)}},783726:(e,t,a)=>{a.d(t,{D2:()=>l,Pr:()=>p,Uk:()=>f,qA:()=>h});var s=a(159730),n=a(519889),i=a(833954),o=a(206258),r=a(454642);const l="last_90_days",d={field:"last_active",direction:"desc"};async function c(e){const{environment:t,filter:a,spaceId:s,currentSpaceId:n,usersTabData:i}=e,o=null==i?void 0:i.dailyUsersData;return o&&a===(null==i?void 0:i.graphFilter)&&n===s?o:u({environment:t,spaceId:s,filter:a})}async function u(e){const{environment:t,spaceId:a,filter:s}=e,n=await r.getDailyUsersAnalytics(t,{spaceId:a,activeWindow:"all_time"===s?"last_90_days":s});return"failed"===n.type?n.body:n.data}async function g(e){const{environment:t,filter:a,sort:s,spaceStore:n,currentSpaceId:i,usersTabData:o}=e,r=null==o?void 0:o.tableFilter,l=null==o?void 0:o.userTableSort;return null!=o&&o.usersAndStats&&r===a&&l&&l.direction===s.direction&&l.field===s.field&&i===n.id?o.usersAndStats:m({environment:t,filter:a,sort:s,spaceStore:n})}async function m(e){const{environment:t,filter:a,sort:s,spaceStore:i}=e,l=await r.loadWorkspaceAnalyticsUsers(t,{spaceId:i.id,filters:{timeRange:a},sort:s});return"failed"===l.type?l.body:l.data.users.map((e=>({stats:e,userStore:o.U6.createChildStore(i,{table:n.KJ,id:e.userId})})))}async function p(e){const{environment:t,spaceStore:a,currentTab:n,currentSpaceId:i,usersTabData:o,setState:r,graphFilter:u,tableFilter:m}=e,p=await async function(e){const{environment:t,spaceStore:a,currentSpaceId:n,usersTabData:i,graphFilter:o,tableFilter:r}=e,u=o||(null==i?void 0:i.graphFilter)||l,m=r||(null==i?void 0:i.tableFilter)||l,p=(null==i?void 0:i.userTableSort)||d,[h,f]=await Promise.all([c({environment:t,filter:u,spaceId:a.id,currentSpaceId:n,usersTabData:i}),g({environment:t,filter:m,sort:p,spaceStore:a,currentSpaceId:n,usersTabData:i})]),v=(0,s.Rp)(h)||!h?[]:h,x=(0,s.Rp)(f)||!f?[]:f;return{graphFilter:u,tableFilter:m,userTableSort:p,dailyUsersError:(0,s.Rp)(h)?h:void 0,dailyUsersData:v,usersAndStatsError:(0,s.Rp)(f)?f:void 0,usersAndStats:x}}({environment:t,spaceStore:a,currentSpaceId:i,usersTabData:o,graphFilter:u,tableFilter:m});r({currentSpaceId:a.id,currentTab:n,usersTabData:p})}async function h(e){const{environment:t,spaceStore:a}=e,n=e.nextGraphFilter||l,i=e.nextTableFilter||l,o=e.nextSort||d,[r,c]=await Promise.all([u({environment:t,filter:n,spaceId:a.id}),m({environment:t,filter:i,sort:o,spaceStore:a})]),g=(0,s.Rp)(r)||!r?[]:r,p=(0,s.Rp)(c)||!c?[]:c;return{graphFilter:n,tableFilter:i,userTableSort:o,dailyUsersError:(0,s.Rp)(r)?r:void 0,dailyUsersData:g,usersAndStatsError:(0,s.Rp)(c)?c:void 0,usersAndStats:p}}function f(e,t){if((0,s.qC)(e)){const a=(0,i.nX)(t,e);if(a)return a}return t.formatMessage({defaultMessage:"Failed to retrieve analytics. Try refreshing and reopening the settings.",id:"workspaceAnalytics.usersTab.refershUserAnalytics.defaultFailed"})}},723399:(e,t,a)=>{a.d(t,{Z:()=>w});a(667294);var s=a(800480),n=a(886628),i=a(709291),o=a(547307),r=a(461652),l=a(552275),d=a(478140),c=a(632163),u=a(953437),g=a(158297),m=a(672495),p=a(526388),h=a(433929),f=a(460709),v=a(223196),x=a(749085);class y extends x.default{getInitialState(){return{open:!1}}}const b=new y;var _=a(785893);const M=(0,i.defineMessages)({30:{id:"auditLogCSV.menu.30days",defaultMessage:"Last 30 days"},60:{id:"auditLogCSV.menu.60days",defaultMessage:"Last 60 days"},90:{id:"auditLogCSV.menu.90days",defaultMessage:"Last 90 days"},365:{id:"auditLogCSV.menu.365days",defaultMessage:"Last 1 year"},Export:{id:"auditLogCSV.menu.export",defaultMessage:"Export"}});function w(e){let{parentStore:t}=e;const a=(0,i.useIntl)(),s=(0,n.VK)((()=>b.state),[]);return(0,_.jsx)(u.ZP,{popupType:v.k.Popup,open:s.open,placementToOrigin:u.ZP.Placement.Bottom,alignmentToOrigin:u.ZP.Alignment.End,originGap:4,disableMouseCapture:!0,disableContentScroll:!0,keepFocus:!1,render:()=>(0,_.jsx)(k,{parentStore:t}),onDismiss:j,enableOutsideClickDismiss:!0,origin:(0,_.jsx)(p.Z,{renderTooltip:()=>(0,_.jsx)(i.FormattedMessage,{id:"auditLogCSV.popup.tooltip",defaultMessage:"Click for options to export the Audit Log in CSV form"}),render:e=>(0,_.jsx)(g.Z,{isLarge:!0,onClick:()=>{return e=!s.open,void b.setState({open:e});var e},...e,children:a.formatMessage(M.Export)})})})}function C(e,t,a){r.PN(e,{targetPointer:a.pointer,exportOptions:{duration:t}})}function j(){b.setState({open:!1})}function S(e,t,a){return{key:e,render:()=>(0,_.jsx)(l.Z,{focused:!1,title:h.default.formatMessage(M[e]),onClick:()=>{j(),C(t,e,a)}}),action:()=>{}}}function T(e,t,a){return{key:e,render:()=>(0,_.jsx)(l.Z,{focused:!1,title:h.default.formatMessage(M[e]),onClick:()=>{o.showDialog({message:(0,_.jsx)(i.FormattedMessage,{id:"auditLogCSV.menu.365days.prompt",defaultMessage:"Are you sure you want to export a one year CSV? You can't repeat this action while this is processing in the background."}),showCancel:!0,keepFocus:!0,items:[{label:(0,_.jsx)(i.FormattedMessage,{id:"AuditLogCSV.exportConfirmationDialog.label",defaultMessage:"Export"}),color:"blue",onAccept:()=>{j(),C(t,e,a)}}]})}}),action:()=>{}}}function k(e){let{parentStore:t}=e;const a=(0,s.O7)(),n=[S(30,a,t),S(60,a,t),S(90,a,t),T(365,a,t)];return(0,_.jsx)(d.Z,{menuType:f.og.Popup,children:(0,_.jsx)(c.Z,{type:c.i.Vertical,sections:[{key:"results",render:e=>(0,_.jsx)(m.Z,{...e}),items:n}],initialFocus:0})})}},119044:(e,t,a)=>{a.d(t,{t:()=>u});a(667294);var s=a(313991),n=a(724405),i=a(407057),o=a(709291),r=a(526388),l=a(164369),d=a(825464),c=a(785893);function u(e){const{auditLogEntry:t,id:a}=e,u=(0,n.yK)((()=>({container:{display:"block",width:"100%"}})),[]);return(0,c.jsx)(r.Z,{renderTooltip:()=>(0,c.jsx)("div",{style:{display:"flex",flexDirection:"column",fontVariantNumeric:"tabular-nums"},children:(0,c.jsx)("div",{children:(0,c.jsx)(o.FormattedMessage,{id:"auditLogSettings.timeTooltip.utcTime",defaultMessage:"UTC: {time}",values:{time:(0,i.$I)(t.serverTimestamp)}})})}),render:e=>(0,c.jsx)("div",{id:a,style:u.container,children:(0,c.jsx)(l.Z,{isSecondaryColor:!0,...e,children:(0,i.Yx)(t.serverTimestamp,"medium_with_time",s.SP)})}),placement:d.u.Bottom})}},433581:(e,t,a)=>{a.d(t,{p:()=>de});var s=a(667294),n=a(709291),i=a(653965),o=a(401898),r=a(44317),l=a(955588),d=a(568626),c=a(186517),u=a(980085),g=a(421202),m=a(419639),p=a(815047),h=a(429369),f=a(573123),v=a(228971),x=a(785893);function y(e){return"workspace"!==e}const b=(0,n.defineMessages)({password_cleared:{id:"auditlog.actionNames.eventColumn.password_cleared",defaultMessage:"Cleared login password"},password_set:{id:"auditlog.actionNames.eventColumn.password_set",defaultMessage:"Created a login password"},password_changed:{id:"auditlog.actionNames.eventColumn.password_changed",defaultMessage:"Changed login password"},logout:{id:"auditlog.actionNames.eventColumn.logout",defaultMessage:"Logged out"},user_deleted:{id:"auditlog.actionNames.eventColumn.user_deleted",defaultMessage:"User was deleted"},member_joined:{id:"auditlog.actionNames.eventColumn.member_joined",defaultMessage:"Joined the workspace"},file_uploaded:{id:"auditlog.actionNames.eventColumn.file_uploaded",defaultMessage:"Uploaded a file"},invite_link_reset:{id:"auditlog.actionNames.eventColumn.invite_link_reset",defaultMessage:"Reset invite link"},workspace_exported:{id:"auditlog.actionNames.eventColumn.workspace_exported",defaultMessage:"Exported all workspace content"},audit_log_exported:{id:"auditlogEventFilter.eventColumn.audit_log_exported",defaultMessage:"Exported audit log for last {duration} days"},user_analytics_exported:{id:"auditlogEventFilter.eventColumn.user_analytics_exported",defaultMessage:"Exported user analytics for {daysFilterString}"},content_analytics_exported:{id:"auditlogEventFilter.eventColumn.content_analytics_exported",defaultMessage:"Exported content analytics for {daysFilterString}"},workspace_icon_changed:{id:"auditlog.actionNames.eventColumn.workspace_icon_changed",defaultMessage:"Changed workspace icon"},public_page_cleared:{id:"auditlogEventFilter.actionNames.public_page_cleared",defaultMessage:"Public home page link cleared"},scim_token_generated:{id:"auditlog.actionNames.scim_token_generated",defaultMessage:"Generated API SCIM token"},scim_token_revoked:{id:"auditlog.actionNames.scim_token_revoked",defaultMessage:"Revoked API SCIM token"},"workspace.members_exported":{id:"auditlog.actionName.eventColumn.workspace.members_exported",defaultMessage:"Exported workspace members CSV"},page_access_requests_toggled:{id:"auditlog.actionNames.eventColumn.page_access_requests_toggled",defaultMessage:"page access requests from non-members"},public_page_sharing_toggled:{id:"auditlog.actionNames.eventColumn.public_page_sharing_toggled",defaultMessage:"members sharing pages publicly"},workspace_sidebar_editing_toggled:{id:"auditlog.actionNames.eventColumn.workspace_sidebar_editing_toggled",defaultMessage:"members changing the Workspace section"},disable_team_guests_toggled:{id:"auditlog.actionNames.eventColumn.disable_team_guests_toggled",defaultMessage:"teamspace guests"},disable_guests_toggled:{id:"auditlog.actionNames.eventColumn.disable_guests_toggled",defaultMessage:"guests"},pages_to_other_workspaces_toggled:{id:"auditlog.actionNames.eventColumn.pages_to_other_workspaces_toggled",defaultMessage:"moving or duplicating pages to other workspaces"},export_toggled:{id:"auditlog.actionNames.eventColumn.export_toggled",defaultMessage:"export"},idp_metadata_xml_updated:{id:"auditlog.actionNames.eventColumn.idp_metadata_xml_updated",defaultMessage:"Updated IDP metadata XML"},idp_metadata_xml_removed:{id:"auditlog.actionNames.eventColumn.idp_metadata_xml_removed",defaultMessage:"Removed IDP metadata XML"},saml_enabled:{id:"auditlog.actionNames.saml_enabled",defaultMessage:"Enabled SAML"},saml_disabled:{id:"auditlog.actionNames.saml_disabled",defaultMessage:"Disabled SAML"},saml_enforced:{id:"auditlog.actionNames.saml_enforced",defaultMessage:"Enabled enforcing SAML"},saml_unenforced:{id:"auditlog.actionNames.saml_unenforced",defaultMessage:"Disabled enforcing SAML"},automatic_account_creation_enabled:{id:"auditlog.actionNames.automatic_account_creation_enabled",defaultMessage:"Enabled automatically creating accounts on sign-in"},automatic_account_creation_disabled:{id:"auditlog.actionNames.automatic_account_creation_disabled",defaultMessage:"Disabled automatically creating accounts on sign-in"},workspace_analytics_enabled:{id:"auditlog.actionNames.workspace_analytics_enabled",defaultMessage:"Enabled page view tracking for workspace analytics"},workspace_analytics_disabled:{id:"auditlog.actionNames.workspace_analytics_disabled",defaultMessage:"Disabled page view tracking for workspace analytics"},enabled:{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumnPrefix.enabled"},disabled:{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled.disabled"},a_private_page:{defaultMessage:"a private page",id:"auditlog.actionNames.eventColumn.private_page"},an_untitled_page:{defaultMessage:"an untitled page",id:"auditlog.actionNames.eventColumn.untitled_page"},thisWorkspace:{defaultMessage:"this workspace",id:"auditlog.actionNames.eventColumn.thisWorkspace"},otherWorkspace:{defaultMessage:"another workspace",id:"auditlog.actionNames.eventColumn.otherWorkspace"},workspaceLevel:{defaultMessage:"the workspace level",id:"auditlog.actionNames.eventColumn.workspaceLevel"},private:{defaultMessage:"private",id:"auditlog.actionNames.eventColumn.private"},a_file:{defaultMessage:"a file",id:"auditlog.actionNames.eventColumn.a_file"},a_file_with_extension:{defaultMessage:"a {extension} file",id:"auditlog.actionNames.eventColumn.a_file_with_extension"},team:{defaultMessage:"teamspace",id:"auditlog.actionNames.eventColumn.team"},for_a_private_team:{defaultMessage:"for a private teamspace",id:"auditlog.actionNames.eventColumn.for_private_team"},a_private_team:{defaultMessage:"a private teamspace",id:"auditlog.actionNames.eventColumn.private_team"},a_team_and_page:{defaultMessage:"a teamspace and page",id:"auditlog.actionNames.eventColumn.team_and_page"},team_member:{defaultMessage:"teamspace member",id:"auditlog.actionNames.eventColumn.team_member"},team_owner:{defaultMessage:"teamspace owner",id:"auditlog.actionNames.eventColumn.team_owner"},team_level_guest:{defaultMessage:"teamspace guest",id:"auditlog.actionNames.eventColumn.team_level_guest"},group:{defaultMessage:"group",id:"auditlog.actionNames.eventColumn.group"},user:{defaultMessage:"user",id:"auditLogEntry.user.noName"},bot:{defaultMessage:"integration",id:"auditLogEntry.bot.noName"},externalIntegration:{defaultMessage:"connection",id:"auditLogEntry.externalIntegration.noName"},guestIntegration:{defaultMessage:"integration",id:"auditLogEntry.guestIntegration.noName"},adminContentSearchQuery:{defaultMessage:"query=“{query}“",id:"auditLogEntry.adminContentSearch.query"},adminContentSearchAudience:{defaultMessage:"audience=“{audience}“",id:"auditLogEntry.adminContentSearch.audience"},adminContentSearchCreatedBy:{defaultMessage:"created by=“{createdBy}“",id:"auditLogEntry.adminContentSearch.createdBy"},adminContentSearchSharedWith:{defaultMessage:"shared with=“{sharedWith}“",id:"auditLogEntry.adminContentSearch.sharedWith"},adminContentSearchTeamspaces:{defaultMessage:"{teamspaceCount, plural, one {teamspace=“{teamspaces}“} other {teamspaces=“{teamspaces}“}}",id:"auditLogEntry.adminContentSearch.teamspace"},adminContentSearchCreatedTime:{defaultMessage:"created time=“{createdTime}“",id:"auditLogEntry.adminContentSearch.createdTime"},adminContentSearchLastEditedTime:{defaultMessage:"last edited time=“{lastEditedTime}“",id:"auditLogEntry.adminContentSearch.lastEditedTime"},adminContentSearchDeletionStatus:{defaultMessage:"{deletionStatusesCount, plural, one {page status=“{deletionStatuses}“} other {page statuses=“{deletionStatuses}“}}",id:"auditLogEntry.adminContentSearch.deletionStatus"},adminContentSearchPredicateSplit:{defaultMessage:", ",id:"auditLogEntry.adminContentSearch.predicateSplit"},from:{defaultMessage:"from",id:"auditLogEntry.spaceContentDuplication.from"},into:{defaultMessage:"into",id:"auditLogEntry.spaceContentDuplication.into"},"organization.created":{id:"auditlog.actionNames.eventColumn.organization.created",defaultMessage:"Organization created"},unset:{id:"auditlog.organization.unset",defaultMessage:"Unset"}});function _(e,t){if(t.target)return"user"in t.target&&t.target.user?M(e,t.target.user):"bot"in t.target&&t.target.bot?w(e,t.target.bot):"group"in t.target&&t.target.group?t.target.group.name?`“${t.target.group.name}“`:"group":void 0}function M(e,t){return t?t.name&&t.email?`“${t.name}“ (${t.email})`:t.name?`“${t.name}“`:t.email?`“${t.email}“`:e.formatMessage(b.user):e.formatMessage(b.user)}function w(e,t){return t.name?`“${t.name}“`:e.formatMessage(b.bot)}function C(e){var t,a,s,n,i,o,r;const l={read_content:null===(t=e.capabilities)||void 0===t?void 0:t.read_content,update_content:null===(a=e.capabilities)||void 0===a?void 0:a.update_content,insert_content:null===(s=e.capabilities)||void 0===s?void 0:s.insert_content,read_comment:null===(n=e.capabilities)||void 0===n?void 0:n.read_comment,insert_comment:null===(i=e.capabilities)||void 0===i?void 0:i.insert_comment,user_capabilities:null!==(o=e.capabilities)&&void 0!==o&&o.read_user_with_email?"read_user_including_email":null!==(r=e.capabilities)&&void 0!==r&&r.read_user_with_email?"read_user_excluding_email":"none"};return JSON.stringify(l)}const j=(0,n.defineMessages)({started:{id:"space.spaceContentDuplicationStatus.started",defaultMessage:"Started"},completed:{id:"space.spaceContentDuplicationStatus.completed",defaultMessage:"Completed"},failed:{id:"space.spaceContentDuplicationStatus.failed",defaultMessage:"Failed"}}),S=(0,n.defineMessages)({equallyRestrictive:{defaultMessage:". This is the same as the current workspace setting",id:"auditlog.actionNames.eventColumn.team_guests_toggled.team_space_equal"},moreRestrictive:{defaultMessage:". This is more restrictive than the current workspace setting",id:"auditlog.actionNames.eventColumn.team_guests_toggled.team_space_more_restrictive"},lessRestrictive:{defaultMessage:". This is less restrictive than the current workspace setting",id:"auditlog.actionNames.eventColumn.team_guests_toggled.team_space_less_restrictive"}});function T(e,t){if(void 0!==e&&void 0!==t)return e===t?(0,x.jsx)(n.FormattedMessage,{...S.equallyRestrictive}):!e&&t?(0,x.jsx)(n.FormattedMessage,{...S.moreRestrictive}):e&&!t?(0,x.jsx)(n.FormattedMessage,{...S.lessRestrictive}):void 0}function k(e){return e.name?`“${e.name}“ group`:(0,x.jsx)(n.FormattedMessage,{...b.group})}function F(e){return e.changes.name.oldValue&&e.changes.name.newValue?(0,x.jsx)(n.FormattedMessage,{defaultMessage:"from “{oldTeamName}“ to “{newTeamName}“",id:"auditlog.actionNames.eventColumn.from_old_team_name_to_new_team_name",values:{oldTeamName:e.changes.name.oldValue,newTeamName:e.changes.name.newValue}}):!e.changes.name.oldValue&&e.changes.name.newValue?(0,x.jsx)(n.FormattedMessage,{defaultMessage:"from some teamspace name to “{newTeamName}“",id:"auditlog.actionNames.eventColumn.from_unknown_team_name_to_new_team_name",values:{newTeamName:e.changes.name.newValue}}):(0,x.jsx)(n.FormattedMessage,{defaultMessage:"for {teamName}",id:"auditlog.actionNames.eventColumn.for_team_name",values:{teamName:N(e)}})}function N(e){return"team"in e.target?I(e.target.team):(0,x.jsx)(n.FormattedMessage,{...b.team})}function I(e){return e.name?`“${e.name}“ teamspace`:(0,x.jsx)(n.FormattedMessage,{...b.team})}function A(e){if(e)switch(e){case"owner":return(0,x.jsx)(n.FormattedMessage,{...b.team_owner});case"member":return(0,x.jsx)(n.FormattedMessage,{...b.team_member});case"team_level_guest":return(0,x.jsx)(n.FormattedMessage,{...b.team_level_guest})}return(0,x.jsx)(n.FormattedMessage,{...b.team_member})}function E(e){return(0,x.jsx)(n.FormattedMessage,{...P(e)})}function P(e){if(!e)return c.mq.noAccessLabel;switch(e){case"editor":return c.mq.fullAccessLabel;case"membership_admin":case"read_and_write":return c.mq.canEditLabel;case"content_only_editor":return c.mq.canEditContentLabel;case"reader":return c.mq.canReadLabel;case"comment_only":return c.mq.canCommentLabel;case"none":return c.mq.noAccessLabel;default:(0,o.t1)(e)}}function R(e){var t,a;return{oldRole:(0,x.jsx)(n.FormattedMessage,{...D(null===(t=e.changes)||void 0===t||null===(t=t.permission)||void 0===t?void 0:t.oldValue)}),newRole:(0,x.jsx)(n.FormattedMessage,{...D(null===(a=e.changes)||void 0===a||null===(a=a.permission)||void 0===a?void 0:a.newValue)})}}function D(e){if(!e)return c.mq.noAccessLabel;switch(e){case"editor":return c.mq.workspaceOwnerLabel;case"membership_admin":return c.mq.membershipAdminLabel;case"read_and_write":return c.mq.memberLabel;default:return c.mq.noAccessLabel}}function V(e){return Z(e.target.page)}function Z(e){return e.title?`“${e.title}“`:(0,x.jsx)(n.FormattedMessage,{...b.an_untitled_page})}function L(e){var t,a;return null!==(t=e.target)&&void 0!==t&&null!==(t=t.page)&&void 0!==t&&null!==(t=t.meta)&&void 0!==t&&t.parent&&"title"in(null===(a=e.target)||void 0===a||null===(a=a.page)||void 0===a||null===(a=a.meta)||void 0===a?void 0:a.parent)?`“${e.target.page.meta.parent.title}“`:(0,x.jsx)(n.FormattedMessage,{...b.an_untitled_page})}function B(e){var t;return null!==(t=e.actor.meta)&&void 0!==t&&t.platform?(0,x.jsx)(n.FormattedMessage,{defaultMessage:"on {platform}",id:"auditlog.actionNames.eventColumn.logged_in_platform",values:{platform:e.actor.meta.platform}}):""}function U(e){switch(e){case"google":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Google",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.google"});case"email":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"temporary passcode",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.email"});case"admin":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"admin mode",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.admin"});case"saml":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"SAML SSO",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.saml"});case"apple":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Apple ID",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.apple"});case"password":case"password-no-mfa":case"password-sms":case"password-totp":case"password-backup-code":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"password",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.password"});default:(0,o.t1)(e)}}function O(e){return e.changes.name.oldValue?(0,x.jsx)(n.FormattedMessage,{defaultMessage:"from “{oldDomain}“",id:"auditlog.actionNames.eventColumn.old_domain",values:{oldDomain:e.changes.name.oldValue}}):""}function z(e,t){return"block"===e.table?(0,x.jsx)(n.FormattedMessage,{defaultMessage:"{teamName} page {parentPage}",id:"auditlog.actionNames.eventColumn.team_parent_page",values:{teamName:I(t),parentPage:q(e)}}):"team"===e.table?I(t):void 0}function q(e){return"title"in e?`“${e.title}“`:(0,x.jsx)(n.FormattedMessage,{...b.an_untitled_page})}function K(e,t){if(!t)return(0,x.jsx)(n.FormattedMessage,{...b.an_untitled_page});const a=t.table;return"space"===a?t.id!==e?(0,x.jsx)(n.FormattedMessage,{...b.otherWorkspace}):y(t.permissionLevel)?(0,x.jsx)(n.FormattedMessage,{...b.private}):(0,x.jsx)(n.FormattedMessage,{...b.thisWorkspace}):"team"===a?I(t):"block"===a?t.title?`“${t.title}“`:(0,x.jsx)(n.FormattedMessage,{...b.an_untitled_page}):void 0}const W=(0,n.defineMessages)({open:{defaultMessage:"Open",id:"auditlog.actionNames.eventColumn.team_privacy_types.open"},closed:{defaultMessage:"Closed",id:"auditlog.actionNames.eventColumn.team_privacy_types.closed"},private:{defaultMessage:"Private",id:"auditlog.actionNames.eventColumn.team_privacy_types.private"},default:{defaultMessage:"Default",id:"auditlog.actionNames.eventColumn.team_privacy_types.default"},unknown:{defaultMessage:"an unknown privacy state",id:"auditlog.actionNames.eventColumn.team_privacy_types.unknown"}});function H(e){return e?(0,x.jsx)(n.FormattedMessage,{...W[e]}):(0,x.jsx)(n.FormattedMessage,{...W.unknown})}function G(e){return e.changes.enabled.newValue?(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.membership_requests_toggled.disabled"}):(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.membership_requests_toggled.enabled"})}function $(e){return e.changes.enabled.newValue?(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.external_membership_requests_toggled.disabled"}):(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.external_membership_requests_toggled.enabled"})}function Q(e){return"approved"===e.changes.requestStatus.newValue?(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Approved",id:"auditlog.actionNames.eventColumn.membership_request_resolved.approved"}):(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Declined",id:"auditlog.actionNames.eventColumn.membership_request_resolved.declined"})}function Y(e){return e.changes.enabled.newValue?(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled.disabled"}):(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled.enabled"})}function J(e){return e.changes.enabled.newValue?(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.ai_admin_legal_acceptance_toggled.disabled"}):(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.ai_admin_legal_acceptance_toggled.enabled"})}function X(e,t){return t?e.formatMessage(b.enabled):e.formatMessage(b.disabled)}const ee=(0,n.defineMessages)({team_members:{defaultMessage:"any teamspace member",id:"auditlog.actionNames.eventColumn.team_access_level_types.team_members"},team_owners:{defaultMessage:"only teamspace owners",id:"auditlog.actionNames.eventColumn.team_access_level_types.team_owners"},unknown:{defaultMessage:"unknown",id:"auditlog.actionNames.eventColumn.team_access_level_types.unknown"}});function te(e){return"recurrence"===e?(0,x.jsx)(n.FormattedMessage,{id:"auditlog.actionNames.eventColumn.automation_type.recurrence",defaultMessage:"a repeating automation"}):(0,x.jsx)(n.FormattedMessage,{id:"auditlog.actionNames.eventColumn.automation_type.automation",defaultMessage:"an automation"})}function ae(e){return!!e.meta&&("inSudoMode"in e.meta&&e.meta.inSudoMode)}function se(e,t,a){var s,c,S,P,D,q,W,se,oe,re,le,de,ce,ue,ge,me,pe,he,fe,ve,xe,ye,be,_e,Me,we,Ce,je,Se,Te,ke,Fe,Ne,Ie,Ae,Ee,Pe,Re,De,Ve,Ze,Le;switch(e.actionName){case"page.properties_edited":{const ht=e.meta.propertiesUpdated,ft=e.meta.propertiesUpdated.map((e=>`“${e.propertyName}“`)).join(", ");return 1===ht.length?(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Edited property {properties} on {pageName}",id:"auditlog.actionNames.eventColumn.page_properties_edited.single_property",values:{properties:ft,pageName:V(e)}}):(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Edited properties {properties} on {pageName}",id:"auditlog.actionNames.eventColumn.page_properties_edited.multiple_properties",values:{properties:ft,pageName:V(e)}})}case"page.suggestion.created":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Suggested on {pageName}",id:"auditlog.actionNames.eventColumn.page.suggestion.created",values:{pageName:V(e)}});case"page.suggestion.accepted":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Accepted a suggestion on {pageName}",id:"auditlog.actionNames.eventColumn.page.suggestion.accepted",values:{pageName:V(e)}});case"page.suggestion.rejected":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Rejected a suggestion on {pageName}",id:"auditlog.actionNames.eventColumn.page.suggestion.rejected",values:{pageName:V(e)}});case"page.suggestion.comment.created":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Commented on suggestion on {pageName}",id:"auditlog.actionNames.eventColumn.page.suggestion.comment.created",values:{pageName:V(e)}});case"page.suggestion.comment.deleted":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Deleted comment on suggestion on {pageName}",id:"auditlog.actionNames.eventColumn.page.suggestion.comment.deleted",values:{pageName:V(e)}});case"page.suggestion.comment.updated":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Edited comment on suggestion on {pageName}",id:"auditlog.actionNames.eventColumn.page.suggestion.comment.updated",values:{pageName:V(e)}});case"page.discussion.comment.created":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Commented on {pageName}",id:"auditlog.actionNames.eventColumn.page.discussion.comment.created",values:{pageName:V(e)}});case"page.discussion.comment.deleted":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Deleted comment on {pageName}",id:"auditlog.actionNames.eventColumn.page.discussion.comment.deleted",values:{pageName:V(e)}});case"page.discussion.comment.updated":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Edited comment on {pageName}",id:"auditlog.actionNames.eventColumn.page.discussion.comment.updated",values:{pageName:V(e)}});case"page_edited":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Edited {pageName}",id:"auditlog.actionNames.eventColumn.page_edited",values:{pageName:V(e)}});case"page_viewed":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Viewed {pageName}",id:"auditlog.actionNames.eventColumn.page_viewed_under",values:{pageName:V(e)}});case"page_deleted":return e.target.page.meta.permanentDeletion?(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Deleted {pageName} from trash",id:"auditlog.actionNames.eventColumn.page_permanently_deleted",values:{pageName:V(e)}}):(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Moved {pageName} to trash",id:"auditlog.actionNames.eventColumn.page_deleted",values:{pageName:V(e)}});case"page.permanently_deleted":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Deleted {pageName} from trash",id:"auditlog.actionNames.eventColumn.page.permanently_deleted",values:{pageName:V(e)}});case"page_restored":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Restored {pageName}",id:"auditlog.actionNames.eventColumn.page_restored",values:{pageName:V(e)}});case"page_exported":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Exported {pageName}",id:"auditlog.actionNames.eventColumn.page_exported",values:{pageName:V(e)}});case"page_moved":{var Be,Ue,Oe;const vt=null===(Be=e.changes)||void 0===Be?void 0:Be.team,xt=e.changes.parent.oldValue,yt=e.changes.parent.newValue;let bt=K(e.spaceId,e.changes.parent.oldValue),_t=K(e.spaceId,e.changes.parent.newValue);null!=vt&&vt.oldValue&&null!=vt&&vt.newValue&&xt&&yt&&("block"===xt.table||"block"===yt.table)?(bt=z(xt,null==vt?void 0:vt.oldValue),_t=z(yt,null==vt?void 0:vt.newValue)):"space"===(null===(Ue=e.changes.parent.oldValue)||void 0===Ue?void 0:Ue.table)&&"space"===(null===(Oe=e.changes.parent.newValue)||void 0===Oe?void 0:Oe.table)&&e.changes.parent.oldValue.id===e.changes.parent.newValue.id&&(y(e.changes.parent.oldValue.permissionLevel)||y(e.changes.parent.newValue.permissionLevel))&&(bt=y(e.changes.parent.oldValue.permissionLevel)?(0,x.jsx)(n.FormattedMessage,{...b.private}):(0,x.jsx)(n.FormattedMessage,{...b.workspaceLevel}),_t=y(e.changes.parent.newValue.permissionLevel)?(0,x.jsx)(n.FormattedMessage,{...b.private}):(0,x.jsx)(n.FormattedMessage,{...b.workspaceLevel}));const Mt=bt?a.formatMessage({id:"auditLogEntry.changes.page_moved.old_parent",defaultMessage:" from {oldParentName}"},{oldParentName:bt}):"",wt=_t?a.formatMessage({id:"auditLogEntry.changes.page_moved.new_parent",defaultMessage:" to {newParentName}"},{newParentName:_t}):"";return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Moved {pageName}{oldParentMessage}{newParentMessage}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_moved",values:{pageName:V(e),oldParentMessage:Mt,newParentMessage:wt,inSudoMode:ae(e)}})}case"page_permission_updated":return function(e,t){var a,s,i;const o="bot"in t.target,r="space"in t.target,l="team"in t.target,d="group"in t.target,c="user"in t.target&&"guest"===(null===(a=t.target.user.meta)||void 0===a?void 0:a.spaceRole);var u,g;if(o)return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Updated permissions of {pageName} for bot {botName} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_bot",values:{botName:_(e,t),oldRole:E(null===(u=t.changes)||void 0===u||null===(u=u.permission)||void 0===u?void 0:u.oldValue),newRole:E(null===(g=t.changes)||void 0===g||null===(g=g.permission)||void 0===g?void 0:g.newValue),pageName:V(t),inSudoMode:ae(t)}});var m,p,h,f,v,y;if(r)return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Updated permissions of {pageName} for everyone in the workspace from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_space",values:{oldRole:E(null===(m=t.changes)||void 0===m||null===(m=m.permission)||void 0===m?void 0:m.oldValue),newRole:E(null===(p=t.changes)||void 0===p||null===(p=p.permission)||void 0===p?void 0:p.newValue),pageName:V(t),inSudoMode:ae(t)}});if(l)return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Updated permissions of {pageName} for {teamName} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_team",values:{oldRole:E(null===(h=t.changes)||void 0===h||null===(h=h.permission)||void 0===h?void 0:h.oldValue),newRole:E(null===(f=t.changes)||void 0===f||null===(f=f.permission)||void 0===f?void 0:f.newValue),pageName:V(t),teamName:N(t),inSudoMode:ae(t)}});if(c)return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Updated permissions of {pageName} for guest {guestNameAndEmail} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_guest",values:{guestNameAndEmail:_(e,t),oldRole:E(null===(v=t.changes)||void 0===v||null===(v=v.permission)||void 0===v?void 0:v.oldValue),newRole:E(null===(y=t.changes)||void 0===y||null===(y=y.permission)||void 0===y?void 0:y.newValue),pageName:V(t),inSudoMode:ae(t)}});if(d){var b,M;return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Updated permissions of {pageName} for group {groupName} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_group",values:{groupName:_(e,t),oldRole:E(null===(b=t.changes)||void 0===b||null===(b=b.permission)||void 0===b?void 0:b.oldValue),newRole:E(null===(M=t.changes)||void 0===M||null===(M=M.permission)||void 0===M?void 0:M.newValue),pageName:V(t),inSudoMode:ae(t)}})}return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Updated permissions of {pageName} for {memberNameAndEmail} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_default",values:{memberNameAndEmail:_(e,t),oldRole:E(null===(s=t.changes)||void 0===s||null===(s=s.permission)||void 0===s?void 0:s.oldValue),newRole:E(null===(i=t.changes)||void 0===i||null===(i=i.permission)||void 0===i?void 0:i.newValue),pageName:V(t),inSudoMode:ae(t)}})}(a,e);case"page_created":const He=(0,u.zV)(e);if(null!=He&&null!==(s=He.meta)&&void 0!==s&&s.parent){var ze,qe,Ke,We;if(He.meta.parent.table===p.bx)return"private"===(null===(Ke=He.meta)||void 0===Ke?void 0:Ke.permissionLevel)||"private"===(null===(We=He.meta)||void 0===We?void 0:We.pageAudience)?(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Created a private page",id:"auditlog.actionNames.eventColumn.page_created_private"}):(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Created a page in the workspace",id:"auditlog.actionNames.eventColumn.page_created_workspace"});if((null===(ze=He.meta)||void 0===ze?void 0:ze.parent.table)===h.e0)return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Created a page under {teamName}",id:"auditlog.actionNames.eventColumn.page_created_team",values:{teamName:I(He.meta.parent)}});if((null===(qe=He.meta)||void 0===qe?void 0:qe.parent.table)===g.iU)return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Created a page under {parentPageName}",id:"auditlog.actionNames.eventColumn.page_created_under",values:{parentPageName:L(e)}})}return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Created a page",id:"auditlog.actionNames.eventColumn.page_created_general"});case"page_shared_to_web":return function(e){var t;if(void 0===e.changes.permission.newValue||"none"===e.changes.permission.newValue)return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Disabled sharing {pageName} to web{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_shared_to_web.disabled",values:{pageName:V(e),inSudoMode:ae(e)}});return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Enabled sharing {pageName} to web{inSudoMode, select, true { using administrator privileges} other {}} with permissions {newRole}",id:"auditlog.actionNames.eventColumn.page_shared_to_web.enabled",values:{pageName:V(e),inSudoMode:ae(e),newRole:E(null===(t=e.changes)||void 0===t||null===(t=t.permission)||void 0===t?void 0:t.newValue)}})}(e);case"login":return function(e,t){var a,s,i;const o=null===(a=e.meta)||void 0===a?void 0:a.authType;return null!==(s=e.actor.meta)&&void 0!==s&&s.countryCode&&o?(0,x.jsx)(n.FormattedMessage,{id:"auditLog.actionNames.eventColumn.loginWithCityStateAndCountry.withAuthType",defaultMessage:"Logged in {platform} via {loginMethod} in {geolocation}",values:{platform:B(e),geolocation:(0,v.xk)(e,t),loginMethod:U(o)}}):null!==(i=e.actor.meta)&&void 0!==i&&i.countryCode&&!o?(0,x.jsx)(n.FormattedMessage,{id:"auditLog.actionNames.eventColumn.loginWithCityStateAndCountry",defaultMessage:"Logged in {platform} in {geolocation}",values:{platform:B(e),geolocation:(0,v.xk)(e,t)}}):o?(0,x.jsx)(n.FormattedMessage,{id:"auditLog.actionNames.eventColumn.loginWithPlatform.withAuthType",defaultMessage:"Logged in {platform} via {loginMethod}",values:{platform:B(e),loginMethod:U(o)}}):(0,x.jsx)(n.FormattedMessage,{id:"auditLog.actionNames.eventColumn.loginWithPlatform",defaultMessage:"Logged in {platform}",values:{platform:B(e)}})}(e,a);case"allowed_support_access":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Granted support access for {name} until {date}",id:"auditlog.actionNames.allowed_support_access",values:{date:a.formatDate(e.changes.expiresAt),name:e.target.user.name}});case"revoked_support_access":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Revoked support access for {name}",id:"auditlog.actionNames.revoked_support_access",values:{name:e.target.user.name}});case"preferred_name_changed":return function(e,t){var a;const s=!!e.target&&e.actor.actorId!==(null===(a=e.target)||void 0===a?void 0:a.user.id),i=e.changes.name.oldValue,o=e.changes.name.newValue;if(s){if(i&&o)return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Changed {memberNameAndEmail} name from “{oldValue}“ to “{newValue}“",id:"auditlog.actionNames.eventColumn.external_preferred_name_changed",values:{memberNameAndEmail:_(t,e),oldValue:i,newValue:o}});if(!i&&o)return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Set {memberNameAndEmail} name to “{newValue}“",id:"auditlog.actionNames.eventColumn.external_preferred_name_changed_to_value",values:{memberNameAndEmail:_(t,e),newValue:o}});if(i&&!o)return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Removed {memberNameAndEmail} name “{oldValue}“",id:"auditlog.actionNames.eventColumn.external_preferred_name_changed_from_value",values:{memberNameAndEmail:_(t,e),oldValue:i}})}if(i&&o)return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Changed name from “{oldValue}“ to “{newValue}“",id:"auditlog.actionNames.eventColumn.preferred_name_changed",values:{oldValue:i,newValue:o}});if(!i&&o)return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Set name to “{newValue}“",id:"auditlog.actionNames.eventColumn.preferred_name_changed_to_value",values:{newValue:o}});if(i&&!o)return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Removed name “{oldValue}“",id:"auditlog.actionNames.eventColumn.preferred_name_changed_from_value",values:{oldValue:i}});return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Name was changed",id:"auditlog.actionNames.eventColumn.preferred_name_changed_generic"})}(e,a);case"email_changed":return function(e,t){var a;const s=!!e.target&&e.actor.actorId!==(null===(a=e.target)||void 0===a?void 0:a.user.id);return s?(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Changed {memberNameAndEmail} email from {oldEmail} to {newEmail}",id:"auditlog.actionNames.eventColumn.external_email_changed",values:{memberNameAndEmail:_(t,e),oldEmail:e.changes.email.oldValue,newEmail:e.changes.email.newValue}}):(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Changed email from {oldEmail} to {newEmail}",id:"auditlog.actionNames.eventColumn.email_changed",values:{oldEmail:e.changes.email.oldValue,newEmail:e.changes.email.newValue}})}(e,a);case"picture_changed":return function(e,t){var a;const s=!!e.target&&e.actor.actorId!==(null===(a=e.target)||void 0===a?void 0:a.user.id);return s?(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Changed {memberNameAndEmail} profile picture",id:"auditlog.actionNames.eventColumn.external_picture_changed",values:{memberNameAndEmail:_(t,e)}}):(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Changed profile picture",id:"auditlog.actionNames.eventColumn.picture_changed"})}(e,a);case"member_invited":{const Ct=R(e);return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Invited {memberNameAndEmail} to the workspace as {newRole}",id:"auditlog.actionNames.eventColumn.member_invited",values:{memberNameAndEmail:_(a,e),newRole:Ct.newRole}})}case"member_role_updated":{const jt=R(e);return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Updated {memberNameAndEmail} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.member_role_updated",values:{memberNameAndEmail:_(a,e),oldRole:jt.oldRole,newRole:jt.newRole}})}case"member_removed":return e.actor.actorId===e.target.user.id?(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Left the workspace",id:"auditlog.actionNames.eventColumn.member_left"}):(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Removed {memberNameAndEmail} from the workspace",id:"auditlog.actionNames.eventColumn.member_removed",values:{memberNameAndEmail:_(a,e)}});case"guest_removed":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Removed guest {guestNameAndEmail} from the workspace",id:"auditlog.actionNames.eventColumn.guest_removed",values:{guestNameAndEmail:_(a,e)}});case"file_uploaded":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Uploaded a file to {pageName}",id:"auditlog.actionNames.eventColumn.file_uploaded_public",values:{pageName:V(e)}});case"file_downloaded":return function(e){return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Downloaded {fileName} from {pageName}",id:"auditlog.actionNames.eventColumn.file_downloaded",values:{fileName:ie(e),pageName:V(e)}})}(e);case"invite_link_toggled":return e.changes.enabled.newValue?(0,x.jsx)(n.FormattedMessage,{id:"auditlog.actionNames.eventColumn.inviteLink.enabled",defaultMessage:"Enabled invite link"}):(0,x.jsx)(n.FormattedMessage,{id:"auditlog.actionNames.eventColumn.inviteLink.disabled",defaultMessage:"Disabled invite link"});case"public_page_sharing_toggled":case"workspace_sidebar_editing_toggled":case"disable_team_guests_toggled":case"disable_guests_toggled":case"pages_to_other_workspaces_toggled":case"export_toggled":case"page_access_requests_toggled":return e.changes.enabled.newValue?(0,x.jsx)(n.FormattedMessage,{id:"auditlog.actionNames.eventColumn.toggleEvent.disabled",defaultMessage:"Disabled {workspaceSetting}",values:{workspaceSetting:a.formatMessage(b[e.actionName])}}):(0,x.jsx)(n.FormattedMessage,{id:"auditlog.actionNames.eventColumn.toggleEvent.enabled",defaultMessage:"Enabled {workspaceSetting}",values:{workspaceSetting:a.formatMessage(b[e.actionName])}});case"workspace_name_changed":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Changed workspace name from “{oldValue}“ to “{newValue}“",id:"auditlog.actionNames.eventColumn.workspace_name_changed",values:{oldValue:e.changes.name.oldValue,newValue:e.changes.name.newValue}});case"workspace_domain_changed":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Changed workspace domain {oldValue} to “{newValue}“",id:"auditlog.actionNames.eventColumn.workspace_domain_changed",values:{oldValue:O(e),newValue:e.changes.name.newValue}});case"workspace_integration_restriction_changed":return function(e){const t=void 0,{oldValue:a,newValue:s}=e.changes.integration_restrictions;if(s===t)return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Enabled members installing integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.no_restrictions"});if(a===t&&"approved_only"===s)return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Disabled members installing integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.approved_only"});if("approved_or_built_by_notion"===a&&"approved_only"===s)return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Disabled auto approval for built-by-Notion integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.disabled_built_by_notion.from_approved_or_built_by_notion"});if("approved_only"===a&&"approved_or_built_by_notion"===s)return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Enabled auto approval for built-by-Notion integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.enabled_built_by_notion"});return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Changed workspace integration restriction",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.fallback_message"})}(e);case"allowed_email_domain_added":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Added “{addedValue}“ into allowable email domains",id:"auditlog.actionNames.eventColumn.allowed_email_domain_added",values:{addedValue:e.changes.domain}});case"allowed_email_domain_removed":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Removed “{removedValue}“ from allowable email domains",id:"auditlog.actionNames.eventColumn.allowed_email_domain_removed",values:{removedValue:e.changes.domain}});case"public_page_set":return e.changes.name.oldValue?(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Changed public home page from “{oldPage}“ to “{newPage}“",id:"auditlog.actionNames.eventColumn.public_page_changed",values:{oldPage:e.changes.name.oldValue,newPage:e.changes.name.newValue}}):(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Set “{newPage}“ as public home page",id:"auditlog.actionNames.eventColumn.public_page_set",values:{newPage:e.changes.name.newValue}});case"idp_metadata_url_updated":case"organization.saml.idp_metadata_url_updated":return e.changes.url.oldValue?(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Changed IDP metadata URL from “{oldValue}“ to “{newValue}“",id:"auditlog.actionNames.eventColumn.idp_metadata_url_updated",values:{oldValue:e.changes.url.oldValue,newValue:e.changes.url.newValue}}):(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Set IDP metadata URL to “{newValue}“",id:"auditlog.actionNames.eventColumn.idp_metadata_url_set",values:{newValue:e.changes.url.newValue}});case"saml_toggled":case"organization.saml.toggled":return e.changes.enabled.newValue?(0,x.jsx)(n.FormattedMessage,{...b.saml_enabled}):(0,x.jsx)(n.FormattedMessage,{...b.saml_disabled});case"saml_enforce_toggled":case"organization.saml.enforce_toggled":return e.changes.enabled.newValue?(0,x.jsx)(n.FormattedMessage,{...b.saml_enforced}):(0,x.jsx)(n.FormattedMessage,{...b.saml_unenforced});case"automatic_account_creation_toggled":case"organization.saml.automatic_account_creation_toggled":return e.changes.enabled.newValue?(0,x.jsx)(n.FormattedMessage,{...b.automatic_account_creation_enabled}):(0,x.jsx)(n.FormattedMessage,{...b.automatic_account_creation_disabled});case"workspace_analytics_toggled":return e.changes.enabled.newValue?(0,x.jsx)(n.FormattedMessage,{...b.workspace_analytics_enabled}):(0,x.jsx)(n.FormattedMessage,{...b.workspace_analytics_disabled});case"workspace_creation_set_for_email_domain":case"organization.managed_user_settings.workspace_creation_enum_updated":return function(e,t){const{oldValue:a,newValue:s}=e.changes.workspace_creation;if(!a&&!s)return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Changed workspace creation setting",id:"auditlog.actionNames.eventColumn.workspace_creation_set_for_email_domain.fallback_message"});const i=e.changes.workspace_creation.oldValue?t.formatMessage({id:"auditLogEntry.changes.workspaceCreation.beforeSetting",defaultMessage:" from {prevWorkspaceCreationSetting}"},{prevWorkspaceCreationSetting:(0,m.nJ)(e.changes.workspace_creation.oldValue,t)}):"",o=e.changes.workspace_creation.newValue?t.formatMessage({id:"auditLogEntry.changes.workspaceCreation.afterSetting",defaultMessage:" to {afterWorkspaceCreationSetting}"},{afterWorkspaceCreationSetting:(0,m.nJ)(e.changes.workspace_creation.newValue,t)}):"";return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Changed workspace creation setting{before}{after}.",id:"auditlog.actionNames.eventColumn.workspace_creation_set_for_email_domain",values:{before:i,after:o}})}(e,a);case"member_added_to_group":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Added {memberNameAndEmail} to {groupName}",id:"auditlog.actionNames.eventColumn.member_added_to_group",values:{memberNameAndEmail:_(a,e),groupName:k(e.target.group)}});case"member_removed_from_group":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Removed {memberNameAndEmail} from {groupName}",id:"auditlog.actionNames.eventColumn.member_removed_from_group",values:{memberNameAndEmail:_(a,e),groupName:k(e.target.group)}});case"space_transfer_status_changed":return function(e,t){const{oldValue:a,newValue:s}=e.changes.spaceTransferStatus,i=e.target.space.name?t.formatMessage({id:"auditLogEntry.changes.space_transfer_status_changed.space_name",defaultMessage:" for {spaceName}"},{spaceName:e.target.space.name}):"";if(!a&&!s)return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Workspace transfer status changed{spaceNameMessage}",id:"auditlog.actionNames.eventColumn.space_transfer_status_changed.fallback_message",values:{spaceNameMessage:i}});if(!s)return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Workspace transfer request cleared{spaceNameMessage} from prior status of {oldStatus}",id:"auditlog.actionNames.eventColumn.space_transfer_status_cleared",values:{spaceNameMessage:i,oldStatus:a}});return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"{newStatus, select, requested {Workspace transfer request initiated{spaceNameMessage}.} started {Workspace transfer started{spaceNameMessage}} completed {Workspace transfer completed{spaceNameMessage}} other {Workspace transfer status change to {newStatus}{spaceNameMessage}}}",id:"auditlog.actionNames.eventColumn.space_transfer_status_changed.newStatus",values:{spaceNameMessage:i,newStatus:s}})}(e,a);case"space_claim_and_upgrade_status_changed":return function(e){const{oldValue:t,newValue:a}=e.changes.claimAndUpgradeStatus,s=(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Status changed for workspace claim of {workspaceName}",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_status_changed.fallback_message",values:{workspaceName:e.target.space.name}});if(!t&&!a)return s;if(!a&&"completed"!==t)return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Pending workspace claim for {workspaceName} has been cleared from {oldStatus}",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_status_cleared",values:{workspaceName:e.target.space.name,oldStatus:t}});if("completed"===a)return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"{workspaceName} has been claimed and upgraded to the Enterprise plan",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_status_completed",values:{workspaceName:e.target.space.name}});if("requested"===a)return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Request to claim and upgrade {workspaceName} has been sent.",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_requested",values:{workspaceName:e.target.space.name}});return s}(e);case"space_claim_deletion_status_changed":return function(e){const{oldValue:t,newValue:a}=e.changes.claimDeletionStatus,s=(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Claimable workspace deletion status change for {spaceName}",id:"auditlog.actionNames.eventColumn.space_claim_deletion_status_changed.fallback_message",values:{spaceName:e.target.space.name}});if(!t&&!a)return s;if(!a||"canceled"===a)return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Recovered workspace {spaceName} using Domain Management",id:"auditlog.actionNames.eventColumn.space_claim_deletion.status_cleared",values:{spaceName:e.target.space.name}});return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Deleted workspace {spaceName} using Domain Management",id:"auditlog.actionNames.eventColumn.space_claim_deletion.deleted",values:{spaceName:e.target.space.name}})}(e);case"organization.domain_claim.claim_and_upgrade_status_updated":return function(e){const{oldValue:t,newValue:a}=e.changes.claimAndUpgradeStatus,s=(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Status changed for organization's workspace claim of {workspaceName}",id:"auditlog.actionNames.eventColumn.organization_space_claim_upgrade_status_changed.fallback_message",values:{workspaceName:e.target.space.name}});if(!t&&!a)return s;if(!a&&"completed"!==t)return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Pending workspace claim by organization for {workspaceName} has been cleared from {oldStatus}",id:"auditlog.actionNames.eventColumn.organization_space_claim_upgrade_status_cleared",values:{workspaceName:e.target.space.name,oldStatus:t}});if("completed"===a)return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"{workspaceName} has been successfully claimed by organization.",id:"auditlog.actionNames.eventColumn.organization_space_claim_upgrade_status_completed",values:{workspaceName:e.target.space.name}});if("requested"===a)return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Request sent to claim workspace: {workspaceName} for organization.",id:"auditlog.actionNames.eventColumn.organization_space_claim_upgrade_requested",values:{workspaceName:e.target.space.name}});return s}(e);case"membership_requests_toggled":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"{enabled} allowing members to request adding new members",id:"auditlog.actionNames.eventColumn.membership_requests_toggled",values:{enabled:G(e)}});case"external_membership_requests_toggled":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"{enabled} allowing external users to request to be added to the workspace as members",id:"auditlog.actionNames.eventColumn.external_membership_requests_toggled",values:{enabled:$(e)}});case"membership_request_resolved":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"{status} request to add {email} to the workspace as a member",id:"auditlog.actionNames.eventColumn.membership_request_resolved",values:{status:Q(e),email:_(a,e)}});case"guest_membership_requests_toggled":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"{enabled} allowing page guests to request to be added to the workspace as members",id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled",values:{enabled:Y(e)}});case"team_created":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Created {teamName}",id:"auditlog.actionNames.eventColumn.team_created",values:{teamName:N(e)}});case"team_archived":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Archived {teamName}",id:"auditlog.actionNames.eventColumn.team_archived",values:{teamName:N(e)}});case"team_restored":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Restored {teamName}",id:"auditlog.actionNames.eventColumn.team_restored",values:{teamName:N(e)}});case"team_default_toggled":return e.changes.enabled.newValue?(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Added {teamName} to the default teamspace list. Workspace members will automatically be added to the teamspace",id:"auditlog.actionNames.eventColumn.team_default_enabled",values:{teamName:N(e)}}):(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Removed {teamName} from the default teamspace list. Workspace members will no longer be automatically added to the teamspace",id:"auditlog.actionNames.eventColumn.team_default_disabled",values:{teamName:N(e)}});case"team_public_page_sharing_toggled":return e.changes.enabled.newValue?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Disabled members sharing pages under {teamName} publicly",id:"auditlog.actionNames.eventColumn.team_public_page_sharing_disabled",values:{teamName:N(e)}}),T((null===(c=e.meta)||void 0===c?void 0:c.spacePublicPageSharingDisabled)??(null==e?void 0:e.spacePublicPageSharingDisabled),e.changes.enabled.newValue)]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Enabled members sharing pages under {teamName} publicly",id:"auditlog.actionNames.eventColumn.team_public_page_sharing_enabled",values:{teamName:N(e)}}),T((null===(S=e.meta)||void 0===S?void 0:S.spacePublicPageSharingDisabled)??(null==e?void 0:e.spacePublicPageSharingDisabled),e.changes.enabled.newValue)]});case"team_export_toggled":return e.changes.enabled.newValue?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Disabled export for {teamName}",id:"auditlog.actionNames.eventColumn.team_export_disabled",values:{teamName:N(e)}}),T((null===(P=e.meta)||void 0===P?void 0:P.spaceExportDisabled)??(null==e?void 0:e.spaceExportDisabled),e.changes.enabled.newValue)]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Enabled export for {teamName}",id:"auditlog.actionNames.eventColumn.team_export_enabled",values:{teamName:N(e)}}),T((null===(D=e.meta)||void 0===D?void 0:D.spaceExportDisabled)??(null==e?void 0:e.spaceExportDisabled),e.changes.enabled.newValue)]});case"team_sidebar_editing_toggled":return e.changes.enabled.newValue?(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Disabled members changing the sidebar section for {teamName}",id:"auditlog.actionNames.eventColumn.team_sidebar_editing_disabled",values:{teamName:N(e)}}):(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Enabled members changing the sidebar section for {teamName}",id:"auditlog.actionNames.eventColumn.team_sidebar_editing_enabled",values:{teamName:N(e)}});case"team_creation_admins_setting_toggled":return e.changes.enabled.newValue?(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Disabled members creating teamspaces",id:"auditlog.actionNames.eventColumn.team_creation_admins_setting_disabled",values:{teamName:N(e)}}):(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Enabled members creating teamspaces",id:"auditlog.actionNames.eventColumn.team_creation_admins_setting_enabled",values:{teamName:N(e)}});case"team_guests_toggled":return e.changes.enabled.newValue?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Disabled guests for {teamName}",id:"auditlog.actionNames.eventColumn.team_guests_toggled_disabled",values:{teamName:N(e)}}),T((null===(q=e.meta)||void 0===q?void 0:q.spaceDisableGuests)??e.spaceDisableGuests,e.changes.enabled.newValue)]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Enabled guests for {teamName}",id:"auditlog.actionNames.eventColumn.team_guests_toggled_enabled",values:{teamName:N(e)}}),T((null===(W=e.meta)||void 0===W?void 0:W.spaceDisableGuests)??e.spaceDisableGuests,e.changes.enabled.newValue)]});case"team_name_changed":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Changed teamspace name {oldTeamNameToNewTeamName}",id:"auditlog.actionNames.eventColumn.team_name_changed",values:{oldTeamNameToNewTeamName:F(e)}});case"team_description_changed":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Changed description of {teamName}",id:"auditlog.actionNames.eventColumn.team_description_changed",values:{teamName:N(e)}});case"team_icon_changed":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Changed icon of {teamName}",id:"auditlog.actionNames.eventColumn.team_icon_changed",values:{teamName:N(e)}});case"member_added_to_team":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Invited {memberNameAndEmail} to {teamName} as {teamRole}",id:"auditlog.actionNames.eventColumn.member_added_to_team",values:{memberNameAndEmail:_(a,e),teamName:N(e),teamRole:A(e.changes.teamRole.newValue)}});case"group_added_to_team":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Invited {groupName} to {teamName} as teamspace member",id:"auditlog.actionNames.eventColumn.group_added_to_team",values:{groupName:k(e.target.group),teamName:N(e)}});case"member_removed_from_team":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Removed {memberNameAndEmail} from {teamName}",id:"auditlog.actionNames.eventColumn.member_removed_from_team",values:{memberNameAndEmail:_(a,e),teamName:N(e)}});case"group_removed_from_team":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Removed {groupName} from {teamName}",id:"auditlog.actionNames.eventColumn.group_removed_from_team",values:{groupName:k(e.target.group),teamName:N(e)}});case"member_joined_team":const Ge=N(e),$e=A(e.changes.teamRole.newValue);return ae(e)?(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Joined {teamName} as {teamRole} using administrator privileges",id:"auditlog.actionNames.eventColumn.member_joined_team_privileged",values:{teamName:Ge,teamRole:$e}}):(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Joined {teamName} as {teamRole}",id:"auditlog.actionNames.eventColumn.member_joined_team",values:{teamName:Ge,teamRole:$e}});case"member_left_team":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Left {teamName}",id:"auditlog.actionNames.eventColumn.member_left_team",values:{teamName:N(e)}});case"member_team_role_updated":const Qe=_(a,e),Ye=A(e.changes.teamRole.oldValue),Je=A(e.changes.teamRole.newValue),Xe=N(e);return ae(e)?(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Updated {memberNameAndEmail} from {oldTeamRole} to {newTeamRole} in {teamName} using administrator privileges",id:"auditlog.actionNames.eventColumn.member_team_role_updated_privileged",values:{memberNameAndEmail:Qe,oldTeamRole:Ye,newTeamRole:Je,teamName:Xe}}):(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Updated {memberNameAndEmail} from {oldTeamRole} to {newTeamRole} in {teamName}",id:"auditlog.actionNames.eventColumn.member_team_role_updated",values:{memberNameAndEmail:Qe,oldTeamRole:Ye,newTeamRole:Je,teamName:Xe}});case"team_user_permission_updated":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Updated {userNameOrEmail}’s custom permissions in {teamName} from {oldPermission} to {newPermission}.",id:"auditlog.actionNames.eventColumn.team_user_permission_updated",values:{userNameOrEmail:_(a,e),oldPermission:E(e.changes.permission.oldValue),newPermission:E(e.changes.permission.newValue),teamName:N(e)}});case"team_group_permission_updated":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Updated {groupName}’s custom permissions in {teamName} from {oldPermission} to {newPermission}.",id:"auditlog.actionNames.eventColumn.team_group_permission_updated",values:{groupName:k(e.target.group),oldPermission:E(e.changes.permission.oldValue),newPermission:E(e.changes.permission.newValue),teamName:N(e)}});case"team_member_default_permission_updated":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Updated default page permissions for teamspace members in {teamName} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.team_member_default_permission_updated",values:{teamName:N(e),oldRole:E(null===(se=e.changes)||void 0===se||null===(se=se.permission)||void 0===se?void 0:se.oldValue),newRole:E(null===(oe=e.changes)||void 0===oe||null===(oe=oe.permission)||void 0===oe?void 0:oe.newValue)}});case"team_guest_default_permission_updated":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Updated default page permissions for teamspace guests in {teamName} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.team_guest_default_permission_updated",values:{teamName:N(e),oldRole:E(null===(re=e.changes)||void 0===re||null===(re=re.permission)||void 0===re?void 0:re.oldValue),newRole:E(null===(le=e.changes)||void 0===le||null===(le=le.permission)||void 0===le?void 0:le.newValue)}});case"team_workspace_default_permission_updated":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Updated default page permissions for everyone else in the workspace for {teamName} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.team_workspace_default_permission_updated",values:{teamName:N(e),oldRole:E(null===(de=e.changes)||void 0===de||null===(de=de.permission)||void 0===de?void 0:de.oldValue),newRole:E(null===(ce=e.changes)||void 0===ce||null===(ce=ce.permission)||void 0===ce?void 0:ce.newValue)}});case"team_privacy_type_changed":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Changed the teamspace privacy type for {teamName} from {oldType} to {newType}",id:"auditlog.actionNames.eventColumn.team_privacy_type_changed",values:{teamName:N(e),oldType:H(null===(ue=e.changes)||void 0===ue?void 0:ue.teamAccessLevel.oldValue),newType:H(null===(ge=e.changes)||void 0===ge?void 0:ge.teamAccessLevel.newValue)}});case"team_invite_access_changed":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Changed who can invite teamspace members to {newType} for {teamName}",id:"auditlog.actionNames.eventColumn.team_invite_access_changed",values:{teamName:N(e),newType:(Le=null===(me=e.changes)||void 0===me||null===(me=me.teamInviteAccess)||void 0===me?void 0:me.newValue,Le?(0,x.jsx)(n.FormattedMessage,{...ee[Le]}):(0,x.jsx)(n.FormattedMessage,{...ee.unknown}))}});case"teams_enabled_for_space":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Enabled teamspaces for {workspaceName}",id:"auditlog.actionNames.eventColumn.teams_enabled_for_space",values:{workspaceName:e.target.space.name}});case"private_content_transferred":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Transferred private content from {fromUserName} to {toUserName}",id:"auditLog.actionNames.eventColumn.private_content_transferred",values:{fromUserName:M(a,e.changes.userPermission.oldValue),toUserName:M(a,e.changes.userPermission.newValue)}});case"audit_log_exported":return(0,x.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.audit_log_exported",defaultMessage:"Exported audit log for last {duration} days",values:{duration:e.meta.duration}});case"user_analytics_exported":return(0,x.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.user_analytics_exported",defaultMessage:"Exported user analytics for {daysFilterString}",values:{daysFilterString:a.formatMessage(f.Rh[(null===(pe=e.meta)||void 0===pe?void 0:pe.daysFilter)||"last_90_days"]).toLowerCase()}});case"content_analytics_exported":return(0,x.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.content_analytics_exported",defaultMessage:"Exported content analytics for {daysFilterString}",values:{daysFilterString:a.formatMessage(f.Rh[(null===(he=e.meta)||void 0===he?void 0:he.daysFilter)||"last_90_days"]).toLowerCase()}});case"admin_content_search_queried":case"admin_content_search_exported":function et(e){return e.join(a.formatMessage(b.adminContentSearchPredicateSplit))}function tt(e){return"starting"in e&&"ending"in e?`${e.starting} - ${e.ending}`:"starting"in e?`${e.starting} - `:"ending"in e?` - ${e.ending}`:void 0}const at=e.searchParameters.query&&a.formatMessage(b.adminContentSearchQuery,{query:e.searchParameters.query}),st=e.searchParameters.teamspaces&&e.searchParameters.teamspaces.length>0&&a.formatMessage(b.adminContentSearchTeamspaces,{teamspaceCount:e.searchParameters.teamspaces.length,teamspaces:et(e.searchParameters.teamspaces)}),nt=e.searchParameters.createdBy&&e.searchParameters.createdBy.length>0&&a.formatMessage(b.adminContentSearchCreatedBy,{createdBy:et(e.searchParameters.createdBy)}),it=e.searchParameters.sharedWith&&e.searchParameters.sharedWith.length>0&&a.formatMessage(b.adminContentSearchSharedWith,{sharedWith:et(e.searchParameters.sharedWith)}),ot=e.searchParameters.audience&&e.searchParameters.audience.length>0&&a.formatMessage(b.adminContentSearchAudience,{audience:et(e.searchParameters.audience)}),rt=e.searchParameters.createdTime&&a.formatMessage(b.adminContentSearchCreatedTime,{createdTime:tt(e.searchParameters.createdTime)}),lt=e.searchParameters.lastEditedTime&&a.formatMessage(b.adminContentSearchLastEditedTime,{lastEditedTime:tt(e.searchParameters.lastEditedTime)}),dt=e.searchParameters.deletionStatuses&&e.searchParameters.deletionStatuses.length>0&&a.formatMessage(b.adminContentSearchDeletionStatus,{deletionStatuses:et(e.searchParameters.deletionStatuses.map((e=>a.formatMessage((0,l.yL)(e))))),deletionStatusesCount:e.searchParameters.deletionStatuses.length}),ct=i.oA([at,st,nt,it,ot,rt,lt,dt]);if("admin_content_search_queried"===e.actionName){if(0===ct.length)return(0,x.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.admin_content_search_queried.no_filters",defaultMessage:"Ran a content search with no filters"});{const St=et(ct);return(0,x.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.admin_content_search_queried",defaultMessage:"Ran a content search with the following criteria: {searchCriteria}",values:{searchCriteria:St}})}}if(0===ct.length)return(0,x.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.admin_content_search_exported.no_filters",defaultMessage:"Exported a content search result with no filters"});{const Tt=et(ct);return(0,x.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.admin_content_search_exported",defaultMessage:"Exported a content search result with the following criteria: {searchCriteria}",values:{searchCriteria:Tt}})}case"admin_managed_users_log_out_all":case"organization.managed_users.log_out":{const kt=a.formatList(e.meta.emailDomains,{type:"conjunction"});return(0,x.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.admin_managed_users_log_out_all",defaultMessage:"Logged out all managed users with the email domains {emailDomains}",values:{emailDomains:kt}})}case"admin_managed_users_log_out_one":case"organization.managed_users.log_out_one":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Logged out {guestNameAndEmail} from all of their active sessions",id:"auditlog.actionNames.eventColumn.admin_managed_users_log_out_one",values:{guestNameAndEmail:_(a,e)}});case"admin_managed_users_password_cleared_one":case"organization.managed_users.password_cleared_one":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Reset the password and MFA settings for {guestNameAndEmail} and logged them out of their active sessions",id:"auditlog.actionNames.eventColumn.admin_managed_users_password_cleared_one",values:{guestNameAndEmail:_(a,e)}});case"admin_managed_users_password_cleared":case"organization.managed_users.password_cleared":{const Ft=a.formatList(e.meta.emailDomains,{type:"conjunction"});return(0,x.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.admin_managed_users_password_cleared",defaultMessage:"Cleared passwords for all users with the email domains {emailDomains}",values:{emailDomains:Ft}})}case"automation_created":return(0,x.jsx)(n.FormattedMessage,{id:"auditlog.actionNames.eventColumn.automation_created",defaultMessage:"Created {automationType} on {pageTitle}",values:{automationType:te(e.meta.automationType),pageTitle:V(e)}});case"automation_edited":return(0,x.jsx)(n.FormattedMessage,{id:"auditlog.actionNames.eventColumn.automation_edited",defaultMessage:"Edited {automationType} on {pageTitle}",values:{automationType:te(e.meta.automationType),pageTitle:V(e)}});case"ai_admin_legal_acceptance_toggled":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"{enabled} Notion AI for the workspace.",id:"auditlog.actionNames.eventColumn.ai_admin_legal_acceptance_toggled",values:{enabled:J(e)}});case"space_consolidation_started":case"space_consolidation_completed":case"space_consolidation_failed":const ut=e.spaceId===e.meta.spaceConsolidationMetadata.source_space_id,gt=e.meta.spaceConsolidationMetadata.source_space_name??e.meta.spaceConsolidationMetadata.source_space_id,mt=e.meta.spaceConsolidationMetadata.target_space_name??e.meta.spaceConsolidationMetadata.target_space_id,pt=e.changes.spaceContentDuplicationStatus.newValue;return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"{status} workspace consolidation {direction} {spaceName}.",id:"auditlog.actionNames.eventColumn.space_consolidation_status_changed",values:{status:pt?(0,x.jsx)(n.FormattedMessage,{...j[pt]}):"",spaceName:ut?mt:gt,direction:(0,x.jsx)(n.FormattedMessage,{...ut?b.into:b.from})}});case"mfa_sms_toggled":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"{enabled} SMS MFA on “{value}“",id:"auditlog.actionNames.eventColumn.mfa_sms_toggled",values:{value:null!==(fe=e.changes)&&void 0!==fe&&fe.maskedPhoneNumber.oldValue?null===(ve=e.changes)||void 0===ve?void 0:ve.maskedPhoneNumber.oldValue:null===(xe=e.changes)||void 0===xe?void 0:xe.maskedPhoneNumber.newValue,enabled:null!==(ye=e.changes)&&void 0!==ye&&ye.enabled.newValue?"Enabled":"Disabled"}});case"mfa_totp_toggled":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"{enabled} TOTP MFA",id:"auditlog.actionNames.eventColumn.mfa_totp_toggled",values:{enabled:null!==(be=e.changes)&&void 0!==be&&be.enabled.newValue?"Enabled":"Disabled"}});case"mfa_backup_code_toggled":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"{enabled} backup codes for MFA",id:"auditlog.actionNames.eventColumn.mfa_backup_code_toggled",values:{enabled:null!==(_e=e.changes)&&void 0!==_e&&_e.enabled.newValue?"Enabled":"Disabled"}});case"user_suspended":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Suspended {userNameAndEmail}",id:"auditLogEntry.user_suspended",values:{userNameAndEmail:_(a,e)}});case"user_unsuspended":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Reactivated {userNameAndEmail}",id:"auditLogEntry.user_unsuspended",values:{userNameAndEmail:_(a,e)}});case"user_deleted":return e.target?(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Deleted {userNameAndEmail}",id:"auditLogEntry.user_deleted",values:{userNameAndEmail:M(a,e.target.user)}}):(0,x.jsx)(n.FormattedMessage,{...b.user_deleted});case"workspace.settings.prevent_granting_support_access_updated":case"organization.managed_user_settings.prevent_granting_support_access_updated":return e.changes.enabled.newValue?(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Disabled managed user members' ability to grant support access for their account.",id:"auditLogEntry.workspace_domain_settings_prevent_granting_support_access_updated.enabled"}):(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Enabled managed user members' ability to grant support access for their account.",id:"auditLogEntry.workspace_domain_settings_prevent_granting_support_access_updated.disabled"});case"workspace.settings.prevent_profile_edits_updated":case"organization.managed_user_settings.prevent_profile_edits_updated":return e.changes.enabled.newValue?(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Disabled managed user members' ability to edit their profile information.",id:"auditLogEntry.workspace_domain_settings_prevent_profile_edits_updated.enabled"}):(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Enabled managed user members' ability to edit their profile information.",id:"auditLogEntry.workspace_domain_settings_prevent_profile_edits_updated.disabled"});case"workspace.settings.external_workspace_access_updated":case"organization.managed_user_settings.external_workspace_access_updated":return e.changes.enabled.newValue?(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Disabled managed user members' ability to join external workspaces.",id:"auditLogEntry.workspace_domain_settings_external_workspace_access_updated.enabled"}):(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Enabled managed user members' ability to join external workspaces.",id:"auditLogEntry.workspace_domain_settings_external_workspace_access_updated.disabled"});case"workspace.settings.custom_session_duration_updated":case"organization.managed_user_settings.custom_session_duration_updated":return void 0!==e.changes.valueMs.oldValue&&void 0!==e.changes.valueMs.newValue?(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Changed the session duration for all managed users from {oldDuration} to {newDuration}.",id:"auditLogEntry.workspace_domain_settings_session_duration_updated",values:{oldDuration:(0,r.Ct)(e.changes.valueMs.oldValue,a),newDuration:(0,r.Ct)(e.changes.valueMs.newValue,a)}}):(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Changed the session duration for all managed users.",id:"auditLogEntry.workspace_domain_settings_session_duration_updated.disabled"});case"workspace.public_domain.created":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Public domain “{name}“ created",id:"auditLogEntry.workspace_public_domain_created",values:{name:e.target.publicDomain.domainName}});case"workspace.public_domain.updated":return void 0!==(null===(Me=e.changes.name)||void 0===Me?void 0:Me.oldValue)&&void 0!==(null===(we=e.changes.name)||void 0===we?void 0:we.newValue)?(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Changed public domain name from “{oldValue}“ to “{newValue}“",id:"auditLogEntry.workspace_public_domain_updated.domain_name",values:{oldValue:e.changes.name.oldValue,newValue:e.changes.name.newValue}}):void 0===(null===(Ce=e.changes.publicHomePage)||void 0===Ce?void 0:Ce.oldValue)&&void 0!==(null===(je=e.changes.publicHomePage)||void 0===je?void 0:je.newValue)?(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Changed public domain add home page “{newValue}“",id:"auditLogEntry.workspace_public_domain_updated.public_home_page.add",values:{newValue:e.changes.publicHomePage.newValue}}):void 0!==(null===(Se=e.changes.publicHomePage)||void 0===Se?void 0:Se.oldValue)&&void 0!==(null===(Te=e.changes.publicHomePage)||void 0===Te?void 0:Te.newValue)?(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Changed public domain home page from “{oldValue}“ to “{newValue}“",id:"auditLogEntry.workspace_public_domain_updated.public_home_page.update",values:{oldValue:e.changes.publicHomePage.oldValue,newValue:e.changes.publicHomePage.newValue}}):(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Changed public domain",id:"auditLogEntry.workspace_public_domain_updated.unknown"});case"workspace.public_domain.deleted":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Public domain “{name}“ deleted",id:"auditLogEntry.workspace_public_domain_deleted",values:{name:e.target.publicDomain.domainName}});case"integration.created":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Added {botName} to the workspace",id:"auditLogEntry.integration.created",values:{botName:w(a,e.meta.bot)}});case"integration.deleted":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Removed {botName} from workspace",id:"auditLogEntry.integration.deleted",values:{botName:w(a,e.meta.bot)}});case"page.automation_deleted":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Deleted automation {automationType} from {pageTitle}",id:"auditLogEntry.page.automation_deleted",values:{automationType:te(e.meta.automationType),pageTitle:V(e)}});case"page.file_deleted":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Deleted file {fileName} from {pageTitle}",id:"auditLogEntry.page.file_deleted",values:{fileName:ie(e),pageTitle:V(e)}});case"integration.secret_reset":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Reset authentication secret of {botName}",id:"auditLogEntry.integration.secret_reset",values:{botName:w(a,e.meta.bot)}});case"integration.settings.updated":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Updated settings of {botName}",id:"auditLogEntry.integration.settings.update",values:{botName:w(a,e.meta.bot)}});case"integration.permission.updated":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Updated capabilities of {botName}: {botCapabilities}",id:"auditLogEntry.integration.permission.update",values:{botName:w(a,e.meta.bot),botCapabilities:C(e.meta.bot)}});case"workspace.external_account_connected":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Connected external/public integration {integrationName}",id:"auditLogEntry.workspace.external_account_connected",values:{integrationName:w(a,e.meta.bot)}});case"workspace.external_account_disconnected":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Disconnected external/public integration {integrationName}",id:"auditLogEntry.workspace.external_account_disconnected",values:{integrationName:w(a,e.meta.bot)}});case"workspace.integration_added":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Added {integrationName} to the workspace",id:"auditLogEntry.workspace.workspace.integration_added",values:{integrationName:w(a,e.meta.bot)}});case"workspace.integration_removed":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Removed {integrationName} from workspace",id:"auditLogEntry.workspace.workspace.integration_removed",values:{integrationName:w(a,e.meta.bot)}});case"workspace.integration_webhook_inactivated":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Webhook events for {integrationName} failing",id:"auditLogEntry.workspace.integration_webhook_inactivated",values:{integrationName:w(a,e.meta.bot)}});case"workspace.integration_webhook_reactivated":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Webhook events for {integrationName} restored",id:"auditLogEntry.workspace.integration_webhook_reactivated",values:{integrationName:w(a,e.meta.bot)}});case"user.settings.analytics_tracking_setting_updated":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"{enabledOrDisabled} page view tracking on their user account",id:"auditLogEntry.user.settings.analytics_tracking_setting_updated",values:{enabledOrDisabled:X(a,Boolean(null===(ke=e.changes)||void 0===ke||null===(ke=ke.enabled)||void 0===ke?void 0:ke.newValue))}});case"workspace.settings.guest_invite_request_setting_updated":return function(e,t){var a;return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"{enabledOrDisabled} allowing members to request inviting guests",id:"auditLogEntry.workspace.settings.guest_invite_request_setting_updated",values:{enabledOrDisabled:X(t,Boolean(null===(a=e.changes)||void 0===a||null===(a=a.enabled)||void 0===a?void 0:a.newValue))}})}(e,a);case"workspace.settings.ai_leap_toggled":return function(e,t){var a;return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"{enabledOrDisabled} Notion AI LEAP (Learning & Early Access Program)",id:"auditLogEntry.workspace.settings.ai_leap_toggled",values:{enabledOrDisabled:X(t,Boolean(null===(a=e.changes)||void 0===a||null===(a=a.enabled)||void 0===a?void 0:a.newValue))}})}(e,a);case"workspace.guest_invite_request_resolved":return function(e,t){const a=e.changes.requestStatus.newValue;return"approved"===a?(0,x.jsx)(n.FormattedMessage,{id:"auditLog.actionNames.eventColumn.workspace.guest_invite_request_resolved.approved",defaultMessage:"Approved {requestorNameAndEmail}'s request to add guest {guestNameAndEmail} to {pageTitle}",values:{requestorNameAndEmail:M(t,e.target.user),guestNameAndEmail:M(t,e.meta.targetGuest),pageTitle:Z(e.meta.pagesAndRoles[0].page)}}):"rejected"===a?(0,x.jsx)(n.FormattedMessage,{id:"auditLog.actionNames.eventColumn.workspace.guest_invite_request_resolved.rejected",defaultMessage:"Declined request to add guest {guestNameAndEmail} to {pageTitle}",values:{guestNameAndEmail:M(t,e.meta.targetGuest),pageTitle:Z(e.meta.pagesAndRoles[0].page)}}):(0,x.jsx)(x.Fragment,{})}(e,a);case"workspace_exported":case"workspace_icon_changed":case"public_page_cleared":case"logout":case"password_changed":case"password_cleared":case"password_set":case"revoked_support_access":case"user_suspended":case"user_unsuspended":case"member_joined":case"invite_link_toggled":case"scim_token_generated":case"scim_token_revoked":case"invite_link_reset":case"idp_metadata_xml_removed":case"idp_metadata_xml_updated":case"workspace.members_exported":case"organization.created":return(0,x.jsx)(n.FormattedMessage,{...b[e.actionName]});case"organization.saml.idp_metadata_xml_removed":return(0,x.jsx)(n.FormattedMessage,{...b.idp_metadata_xml_removed});case"organization.saml.idp_metadata_xml_updated":return(0,x.jsx)(n.FormattedMessage,{...b.idp_metadata_xml_updated});case"organization.owner.added":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Added {ownerNameAndEmail} as an organization owner",id:"auditlogEventFilter.eventColumn.organization.owner.added",values:{ownerNameAndEmail:_(a,e)}});case"organization.owner.removed":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Removed {ownerNameAndEmail} as an organization owner",id:"auditlogEventFilter.eventColumn.organization.owner.removed",values:{ownerNameAndEmail:_(a,e)}});case"organization.audit_log_exported":return(0,x.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.organization.audit_log_exported",defaultMessage:"Exported the organization audit log for last {duration} days",values:{duration:e.meta.duration}});case"organization.settings.name_changed":return(0,x.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.organization.settings.name_changed",defaultMessage:"Changed the organization name from “{oldValue}“ to “{newValue}“",values:{oldValue:e.changes.name.oldValue,newValue:e.changes.name.newValue}});case"organization.workspace.added":return(0,x.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.organization.workspace.added",defaultMessage:"Added workspace “{workspaceName}“ to the organization",values:{workspaceName:e.target.space.name}});case"organization.workspace.removed":return(0,x.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.organization.workspace.removed",defaultMessage:"Removed workspace “{workspaceName}“ from the organization",values:{workspaceName:e.target.space.name}});case"organization.email_domain.verified":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Added a verified email domain “{emailDomain}“ to the organization",id:"auditlog.actionNames.eventColumn.organization.email_domain.verified",values:{emailDomain:e.changes.domain}});case"organization.email_domain.unverified":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"Removed a verified email domain “{emailDomain}“ from the organization",id:"auditlog.actionNames.eventColumn.organization.email_domain.unverified",values:{emailDomain:e.changes.domain}});case"organization.default_space_settings.disable_guests_toggled":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for guests",id:"auditlog.actionNames.eventColumn.organization.default_space_settings.disable_guests_toggled",values:{unsetOrEnabledOrDisabled:ne({intl:a,value:null===(Fe=e.changes)||void 0===Fe||null===(Fe=Fe.enabled)||void 0===Fe?void 0:Fe.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.enable_ai_feature_toggled":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for AI feature",id:"auditlog.actionNames.eventColumn.organization.enable_ai_feature_toggled",values:{unsetOrEnabledOrDisabled:ne({intl:a,value:null===(Ne=e.changes)||void 0===Ne||null===(Ne=Ne.enabled)||void 0===Ne?void 0:Ne.newValue,shouldInvertBoolean:!1})}});case"organization.default_space_settings.disable_page_analytics_toggled":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for page view tracking for workspace analytics",id:"auditlog.actionNames.eventColumn.organization.disable_page_analytics_toggled",values:{unsetOrEnabledOrDisabled:ne({intl:a,value:null===(Ie=e.changes)||void 0===Ie||null===(Ie=Ie.enabled)||void 0===Ie?void 0:Ie.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.disable_public_access_toggled":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for members sharing pages publicly",id:"auditlog.actionNames.eventColumn.organization.disable_public_access_toggled",values:{unsetOrEnabledOrDisabled:ne({intl:a,value:null===(Ae=e.changes)||void 0===Ae||null===(Ae=Ae.enabled)||void 0===Ae?void 0:Ae.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.disable_move_to_space_toggled":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for moving or duplicating pages to other workspaces",id:"auditlog.actionNames.eventColumn.organization.disable_move_to_space_toggled",values:{unsetOrEnabledOrDisabled:ne({intl:a,value:null===(Ee=e.changes)||void 0===Ee||null===(Ee=Ee.enabled)||void 0===Ee?void 0:Ee.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.disable_export_toggled":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for exporting pages",id:"auditlog.actionNames.eventColumn.organization.disable_export_toggled",values:{unsetOrEnabledOrDisabled:ne({intl:a,value:null===(Pe=e.changes)||void 0===Pe||null===(Pe=Pe.enabled)||void 0===Pe?void 0:Pe.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.disable_membership_requests_toggled":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for allowing members to request adding new members",id:"auditlog.actionNames.eventColumn.organization.disable_membership_requests_toggled",values:{unsetOrEnabledOrDisabled:ne({intl:a,value:null===(Re=e.changes)||void 0===Re||null===(Re=Re.enabled)||void 0===Re?void 0:Re.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.disable_guest_membership_requests_toggled":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for allowing page guests to request to be added to the workspace as members",id:"auditlog.actionNames.eventColumn.organization.disable_guest_membership_requests_toggled",values:{unsetOrEnabledOrDisabled:ne({intl:a,value:null===(De=e.changes)||void 0===De||null===(De=De.enabled)||void 0===De?void 0:De.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.enable_guest_invite_requests_toggled":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for allowing members to request inviting guests",id:"auditlog.actionNames.eventColumn.organization.enable_guest_invite_requests_toggled",values:{unsetOrEnabledOrDisabled:ne({intl:a,value:null===(Ve=e.changes)||void 0===Ve||null===(Ve=Ve.enabled)||void 0===Ve?void 0:Ve.newValue,shouldInvertBoolean:!1})}});case"organization.default_space_settings.disable_external_membership_requests_toggled":return(0,x.jsx)(n.FormattedMessage,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for allowing external users to request to be added to the workspace as members",id:"auditlog.actionNames.eventColumn.organization.disable_external_membership_requests_toggled",values:{unsetOrEnabledOrDisabled:ne({intl:a,value:null===(Ze=e.changes)||void 0===Ze||null===(Ze=Ze.enabled)||void 0===Ze?void 0:Ze.newValue,shouldInvertBoolean:!0})}});default:if("local"!==t)return d.log({level:"error",from:"auditLogEvent",type:"AuditLogEvent",data:{miscDataToConvertToString:{data:e}}}),(0,x.jsx)(x.Fragment,{});(0,o.t1)(e)}}function ne(e){let{intl:t,value:a,shouldInvertBoolean:s}=e;return void 0===a?t.formatMessage(b.unset):X(t,s?!a:a)}function ie(e){const{name:t,extension:a}=e.target.file;return t?`“${t}“`:a?(0,x.jsx)(n.FormattedMessage,{...b.a_file_with_extension,values:{extension:a}}):(0,x.jsx)(n.FormattedMessage,{...b.a_file})}var oe=a(137810),re=a(526388),le=(a(95477),a(825464));function de(e){const{auditLogEntry:t,id:a}=e,[i,o]=(0,s.useState)(""),r=(0,n.useIntl)();return(0,s.useEffect)((()=>{const e=document.getElementById(a);o((null==e?void 0:e.textContent)||"")}),[a]),(0,x.jsx)(re.Z,{style:{whiteSpace:"normal"},delayThreshold:80,renderTooltip:()=>(0,x.jsx)(ue,{text:i,auditLogEntry:t}),placement:le.u.Bottom,render:e=>(0,x.jsx)("div",{...e,style:{fontSize:14,...oe.Z.textOverflowStyle},id:a,children:(0,x.jsx)(ce,{auditLogEntry:t,env:"production",intl:r})})})}function ce(e){const{auditLogEntry:t,env:a,intl:s}=e;return se(t,a,s)}function ue(e){var t,a;const{auditLogEntry:s,text:i}=e,o=(0,n.useIntl)(),r=(0,v.q6)({auditLogEntry:s,intl:o});return(0,x.jsxs)("div",{children:[i,(null===(t=s.actor.meta)||void 0===t?void 0:t.ipAddress)&&(0,x.jsx)("div",{children:(0,x.jsx)(n.FormattedMessage,{defaultMessage:"IP address: {ip}",values:{ip:null===(a=s.actor.meta)||void 0===a?void 0:a.ipAddress},id:"auditLogSettings.metadata.ipAddress"})}),(0,x.jsx)("div",{children:(0,v.xk)(s,o)}),r&&(0,x.jsx)(n.FormattedMessage,{id:"auditLogColumnEvent.tooltip.audienceMessage",defaultMessage:"Page audience: {audience}",values:{audience:r}})]})}},78931:(e,t,a)=>{a.d(t,{Z:()=>D});a(757658);var s=a(667294),n=a(886628),i=a(724405),o=a(111378),r=a(228971),l=a(158573),d=a(967220),c=a(709291),u=a(531701),g=a(653965),m=a(401898),p=a(45257),h=a(552275),f=a(260458),v=a(374194),x=a(478140),y=a(632163),b=a(489728),_=a(953437),M=a(158297),w=a(672495),C=a(164369),j=a(991642),S=a(304708),T=a(460709),k=a(195697),F=a(223196),N=a(319385),I=a(229798),A=a(605210),E=a(785893);const P={page:(0,E.jsx)(c.FormattedMessage,{id:"auditlogEventFilter.categoryName.page",defaultMessage:"Page"}),space:(0,E.jsx)(c.FormattedMessage,{id:"auditlogEventFilter.categoryName.workspace",defaultMessage:"Workspace"}),team:(0,E.jsx)(c.FormattedMessage,{id:"auditlogEventFilter.categoryName.team",defaultMessage:"Teamspace"}),account:(0,E.jsx)(c.FormattedMessage,{id:"auditlogEventFilter.categoryName.account",defaultMessage:"Account"}),organization:(0,E.jsx)(c.FormattedMessage,{id:"auditlogEventFilter.categoryName.organization",defaultMessage:"Organization"})};function R(e){let{totalNumEventsForCategory:t,numSelectedForCategory:a,category:s,categoryOpen:n,shouldShowCount:o,onCategoryClick:r,onCategoryToggleClick:l,...d}=e;const u=(0,i.yK)((e=>({textWrapperStyle:{margin:0},title:{margin:0,display:"flex",alignItems:"center"},categoryText:{marginLeft:8,fontWeight:600},categorySubHeader:{marginLeft:6},toggleButton:{marginLeft:2,marginRight:2}})),[]);let g,m;return g=o?t===a?(0,E.jsx)(c.FormattedMessage,{id:"auditlogEventFilter.allEventsSelected",defaultMessage:"({totalNum} events)",values:{totalNum:t}}):(0,E.jsx)(c.FormattedMessage,{id:"auditlogEventFilter.numEventsSelected",defaultMessage:"({numSelected} of {totalNum} events selected)",values:{numSelected:a,totalNum:t}}):null,m=t===a||0!==a&&"partial",(0,E.jsx)(h.Z,{...d,className:"notranslate",textWrapperStyle:u.textWrapperStyle,focused:!1,title:(0,E.jsxs)("div",{style:u.title,children:[(0,E.jsx)(A.Z,{style:u.toggleButton,open:n,onClick:l,isSidebar:!1,fill:!1,icon:"chevron"}),(0,E.jsx)(f.Z,{checked:m,size:14,checkSize:8,onClick:r}),(0,E.jsx)(C.Z,{style:u.categoryText,children:P[s]}),(0,E.jsx)(C.Z,{isSecondaryColor:!0,style:u.categorySubHeader,children:g})]})})}const D=function(e){let{onChange:t,lastSelectionStore:a,componentStore:o}=e;const r=(0,i.Fg)(),l=(0,n.qz)(void 0,I.Z),d=(0,n.VK)((()=>o.state.isMenuOpen),[o]),u=(0,s.useCallback)((()=>(0,E.jsx)(q,{onChange:t,componentStore:o,lastSelectionStore:a,menuListStore:l})),[t,o,a,l]),g=(0,s.useCallback)((()=>function(e,t){e.setState({...e.state,actionSelections:{...t.state.actionSelections}}),O(!1,e)}(o,a)),[o,a]),m=L(r),p=(0,E.jsx)(c.FormattedMessage,{id:"auditlogEventFilter.title",defaultMessage:"Event"}),h=(0,E.jsx)(z,{componentStore:o,title:p});return(0,E.jsx)(j.Z,{marginAfter:!1,children:(0,E.jsx)(_.ZP,{popupType:F.k.Popup,placementToOrigin:_.ZP.Placement.Bottom,alignmentToOrigin:_.ZP.Alignment.Start,open:d,render:u,onDismiss:g,keepFocus:!0,origin:h,preventScaleTransition:!0,style:m.popup})})};function V(e){var t;return g.oA([e.key,null===(t=e.localizedActionName)||void 0===t?void 0:t.toLowerCase()]).join(" ")}function Z(e){let{totalNumSelected:t,totalNumEvents:a}=e;const s=(0,i.yK)((e=>({container:{background:u.ZP.diffBackground,color:u.ZP.diffTextColor,paddingInline:6,margin:8,marginBottom:0,borderRadius:4,fontWeight:510,width:"fit-content"},textWrapperStyle:{marginLeft:8}})),[]);return(0,E.jsx)(C.Z,{style:s.container,children:(0,E.jsx)(c.FormattedMessage,{id:"auditLogEventFilter.selectedPill",defaultMessage:"{totalNumSelected} of {totalNumEvents} selected",values:{totalNumSelected:t,totalNumEvents:a}})})}function L(e){return{container:{minWidth:460},searchInput:{padding:8,borderBottomLeftRadius:0,borderBottomRightRadius:0,boxShadow:"none",borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:e.lightDividerColor},popup:{paddingBottom:8}}}function B(e){const{renderGroup:t,shouldShowCount:a,totalNumEventsForCategory:s,numSelectedForCategory:n,componentStore:i}=e,o=t.category,r=()=>{i.toggleCategorySelection(t)},l=()=>{i.selectCategorySelection(t)};return{key:o,action:r,render:e=>(0,E.jsx)(R,{totalNumEventsForCategory:s,numSelectedForCategory:n,category:o,categoryOpen:i.state.categoryToggleOpen[o],shouldShowCount:a,onCategoryToggleClick:r,onCategoryClick:l,...e}),localizedActionName:null,actionName:null}}function U(e){const{actionName:t,renderGroup:a,componentStore:s,intl:n}=e,i=()=>{s.selectActionName(t,a)},o=n.formatMessage(r.TE[t]);return{key:t,action:i,render:e=>(0,E.jsx)(h.Z,{...e,icon:(0,E.jsx)(f.Z,{checked:s.state.actionSelections[t],size:14,checkSize:8,onClick:i}),focused:!1,title:o,className:"notranslate",style:{paddingLeft:32},textWrapperStyle:{marginLeft:4}}),actionName:t,localizedActionName:o}}function O(e,t){t.setState({...t.state,isMenuOpen:e})}function z(e){let{title:t,componentStore:a}=e;const s=(0,n.VK)((()=>a.hasActionNameSelected()),[a]);return(0,E.jsx)(p.Z,{on:s,icon:(0,d.S)({width:16,marginRight:6,fill:"currentColor"}),title:(0,E.jsx)("span",{children:t}),onClick:()=>{O(!0,a)}})}function q(e){let{onChange:t,componentStore:a,lastSelectionStore:r,menuListStore:d}=e;const u=(0,i.Fg)(),g=(0,c.useIntl)(),p=(0,s.useCallback)((e=>function(e,t){t.updateSearchQuery(e.target.value)}(e,a)),[a]),h=L(u),f=(0,n.VK)((()=>[...(0,m.qP)(o.lo).reduce(((e,t)=>{let[a,s]=t;return N.default.checkGate({gateName:a})?e:[...e,...s]}),[]),...(0,S.F$)()?[]:["team_guest_default_permission_updated"],...(0,S.Ye)()?[]:["guest_membership_requests_toggled"]]),[]),{actionSelections:_,categoryToggleOpen:C,renderOrder:j,searchQuery:F}=(0,n.VK)((()=>{const{actionSelections:e,categoryToggleOpen:t,renderOrder:s,searchQuery:n}=a.state;return{actionSelections:e,categoryToggleOpen:t,renderOrder:s,searchQuery:n}}),[a]),I=(0,n.VK)((()=>(0,k.bq)()),[]),A=[];let P=0,R=0;for(const s of j){const e=s.category;if("team"===e&&!I)continue;const t=[];let n=0;for(const i of s.orderedActions)f.includes(i)||(t.push(U({actionName:i,renderGroup:s,intl:g,componentStore:a})),_[i]&&n++);if(P+=n,R+=t.length,A.push(B({renderGroup:s,shouldShowCount:!Boolean(F),totalNumEventsForCategory:t.length,numSelectedForCategory:n,componentStore:a})),C[e])if(F){const e=(0,l.ZP)(F,t,V);A.push(...e)}else A.push(...t)}const D={key:"results",items:A,render:e=>(0,E.jsx)(w.Z,{...e,title:null,loading:!1})};return(0,E.jsxs)("div",{style:h.container,children:[(0,E.jsx)(v.Z,{style:h.searchInput,placeholder:g.formatMessage({id:"auditlogEventFilter.searchPlaceholder",defaultMessage:"Search for an event"}),onChange:p,value:F,showClearButton:!0}),F&&(0,E.jsx)(Z,{totalNumSelected:P,totalNumEvents:R}),(0,E.jsx)(x.Z,{menuType:T.og.Popup,header:null,maxHeight:356,children:(0,E.jsx)(y.Z,{type:y.i.Vertical,store:d,initialFocus:0,sections:[D]})}),(0,E.jsxs)(w.Z,{topBorder:!0,style:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex"},children:[(0,E.jsx)(b.Z,{onClick:()=>{!function(e){e.clearAllSelections()}(a)},children:(0,E.jsx)(c.FormattedMessage,{id:"auditlogEventFilter.clearButton",defaultMessage:"Clear"})}),(0,E.jsx)(M.Z,{onClick:()=>{!function(e,t,a){const s=t.getAllActionNames(),n=t.getSelectedActionNames();e(s.length===n.length?[]:n),0===n.length&&t.reset(),a.setState({...a.state,actionSelections:{...t.state.actionSelections}}),O(!1,t)}(t,a,r)},children:(0,E.jsx)(c.FormattedMessage,{id:"auditlogEventFilter.applyButton",defaultMessage:"Apply"})})]})]})}},881549:(e,t,a)=>{a.d(t,{Z:()=>i});a(667294);var s=a(343568),n=a(785893);const i=function(){return(0,n.jsx)("div",{style:{},children:(0,n.jsx)(s.Z,{paragraphs:[{lineHeight:45,lineMargin:20,sectionWidths:[100],repeat:1,sectionMargin:15},{lineHeight:40,lineMargin:5,sectionWidths:[100],repeat:8,sectionMargin:10}]})})}},858015:(e,t,a)=>{a.d(t,{v:()=>i});a(667294);var s=a(489728),n=a(785893);function i(e){const{children:t,disabled:a,onClick:i}=e;return(0,n.jsx)(s.Z,{onClick:i,disabled:a,style:{justifyContent:"center",marginLeft:6},isBlue:!a,isLightGray:a,children:t})}},847466:(e,t,a)=>{a.d(t,{e:()=>o,j:()=>i});var s=a(749085),n=a(401898);let i=function(e){return e.All="All",e.Partial="Partial",e.None="None",e}({});class o extends s.default{getAllActionNames(){return(0,n.Yd)(this.state.actionSelections)}getSelectedActionNames(){return this.getAllActionNames().filter((e=>this.state.actionSelections[e]))}hasActionNameSelected(){const e=this.getAllActionNames(),t=this.getSelectedActionNames();return t.length>0&&t.length!==e.length}updateSearchQuery(e){this.setState({...this.state,searchQuery:e})}toggleCategorySelection(e){const t=e.category;this.setState({...this.state,categoryToggleOpen:{...this.state.categoryToggleOpen,[t]:!this.state.categoryToggleOpen[t]}})}selectCategorySelection(e){const t=e.category,a=this.state.categorySelections[t],s=a===i.None||a===i.Partial?i.All:i.None,n=s===i.All,o={...this.state.actionSelections},r=this.state.renderOrder.find((e=>e.category===t));r&&(r.orderedActions.forEach((e=>{o[e]=n})),this.setState({...this.state,actionSelections:o,categorySelections:{...this.state.categorySelections,[r.category]:s}}))}selectActionName(e,t){const a=this.state.actionSelections[e],s={...this.state.actionSelections,[e]:!a},n=t.orderedActions.filter((e=>s[e])).length,o=0===n?i.None:n===t.orderedActions.length?i.All:i.Partial;this.setState({...this.state,actionSelections:s,categorySelections:{...this.state.categorySelections,[t.category]:o}})}clearAllSelections(){const e=this.getBulkUpdateNextActionSelectionState((0,n.Yd)(this.state.actionSelections),!1),t=this.getBulkUpdateNextCategorySelectionState((0,n.Yd)(this.state.categorySelections),i.None);this.setState({...this.state,actionSelections:e,categorySelections:t})}getBulkUpdateNextCategorySelectionState(e,t){const a={...this.state.categorySelections};return e.forEach((e=>{a[e]=t})),a}getBulkUpdateNextActionSelectionState(e,t){const a={...this.state.actionSelections};return e.forEach((e=>{a[e]=t})),a}}},922326:(e,t,a)=>{a.d(t,{Z:()=>l,r:()=>d});var s=a(749085),n=a(253877),i=a(980085),o=a(227617);class r extends s.default{getInitialState(){return{pageNum:1,pageSize:10,timeRange:{},actors:[],actions:[],sortOrder:i.NQ.CreatedNewest}}}const l=new r;function d(e){const{timeRange:t,actors:a,actions:s,sortOrder:r}=e,l=new URLSearchParams;return t.starting&&l.append("starting",`${n.OQ.toUnixMs(t.starting)}`),t.ending&&l.append("ending",`${n.OQ.toUnixMs(t.ending)}`),(null==a?void 0:a.length)>0&&l.append("actors",a.map(o.eW).join(",")),(null==s?void 0:s.length)>0&&l.append("actions",s.join(",")),l.append("sort",`${r||i.NQ.CreatedNewest}`),l.toString()}},444763:(e,t,a)=>{a.d(t,{X:()=>o});var s=a(980085),n=a(401898),i=a(847466);class o extends i.e{getInitialState(){return{categorySelections:{page:i.j.All,space:i.j.All,team:i.j.All,account:i.j.All},categoryToggleOpen:{page:!0,space:!0,team:!0,account:!0},searchQuery:void 0,actionSelections:(0,n.Xc)(s.yv,(()=>!0)),isMenuOpen:!1,renderOrder:[{category:"page",orderedActions:s.dq.page},{category:"space",orderedActions:s.dq.space},{category:"account",orderedActions:s.dq.account},{category:"team",orderedActions:s.dq.team}]}}}},423096:(e,t,a)=>{a.d(t,{Z:()=>me});var s=a(667294),n=a(800480),i=a(886628),o=a(724405),r=a(569651),l=a(709291),d=a(401898),c=a(227617),u=a(45257),g=a(897638),m=a(223196),p=a(876150),h=a(213854),f=a(41558),v=a(552275),x=a(203386),y=a(489728),b=a(953437),_=a(158297),M=a(672495),w=a(184747),C=a(253877),j=a(842875),S=a(433929),T=a(460709),k=a(967950),F=a(478140),N=a(840721),I=a(886825),A=a(646945),E=a(484795),P=a(825464),R=a(749085);const D={INVALID_DATE:"Invalid date",INVALID_RANGE:"Invalid range"};class V extends R.default{getInitialState(){return{dateEdited:!1,timeEdited:!1,temporaryValue:{date:void 0,time:void 0},error:void 0}}}const Z=V;var L=a(374194),B=a(526388),U=a(785893);const O=function(e){const t=(0,l.useIntl)(),a=(0,i.qz)(void 0,Z),{value:n}=e;(0,s.useEffect)((()=>{a.reset()}),[n,a]);const o=(0,s.useCallback)((()=>(0,U.jsx)(Q,{dateTimeInputMenuItemProps:e,store:a})),[e,a]),r=(0,i.VK)((()=>q(t,a)),[t,a]);return r?(0,U.jsx)(B.Z,{renderTooltip:()=>r,forceVisibleState:!0,placement:P.u.Left,render:o,originGap:-8}):(0,U.jsx)(Q,{dateTimeInputMenuItemProps:e,store:a})};function z(e,t){const{device:a}=e;return!!a.isMobile||!t}function q(e,t){if(t.state.error)switch(t.state.error){case D.INVALID_DATE:return e.formatMessage({id:"dateInputError.invalidDateError.tooltip",defaultMessage:"Invalid date"});case D.INVALID_RANGE:return e.formatMessage({id:"dateInputError.invalidDateRangeError.tooltip",defaultMessage:"Invalid range"});default:(0,d.t1)(t.state.error)}}function K(e,t,a,s,n,i){const o=function(e,t,a,s,n){if(!a.state.dateEdited&&!a.state.timeEdited)return;if(!a.state.temporaryValue.date&&!a.state.temporaryValue.time)return{value:void 0};const i=(0,E.uy)(a.state.temporaryValue.date||"",t);if(i){let t="";return t=s?(null==e?void 0:e.start_time)||"00:00":n?"23:59":"00:00",{value:{type:"datetime",start_date:i,time_zone:(null==e?void 0:e.time_zone)||(0,j.r)(),start_time:t}}}const o=(0,E.wk)(a.state.temporaryValue.time||"",t);return(null!=e&&e.start_date||i)&&o?{value:{type:"datetime",start_date:(null==e?void 0:e.start_date)||i,start_time:o,time_zone:(null==e?void 0:e.time_zone)||(0,j.r)()}}:{error:D.INVALID_DATE}}(e,t,a,n,i);if(o)return s?s(o):o}function W(e,t,a,s,n){const i=function(e){return{inputDefault:{background:e.inputBackground,boxShadow:e.inputBoxShadow},inputFocused:{boxShadow:e.outlineBlueInputBoxShadow},inputError:{boxShadow:e.outlineRedInputBoxShadow},placeholder:{color:e.lightTextColor}}}(e),o=q(s,n);if(!t)return o?i.inputError:a?i.inputFocused:i.inputDefault}function H(e,t,a,s,n,i,o,r,l,d){const{device:c}=e,u=function(e,t){return{menuItem:{marginBottom:e.device.isMobile?1:12},inputWrapper:{borderRadius:4,height:28,paddingRight:z(e,t)?6:0,position:"relative"},inputEditRegion:{width:z(e,t)?"calc(100% - 14px)":"100%"},inputEditRegionMobile:{padding:"2px 6px",position:"relative"}}}(e,d);return{style:{...u.menuItem,...n},inputOuterStyle:{...u.inputWrapper,...s,...W(t,i,o,r,l)},inputStyle:{...u.inputEditRegion,...c.isMobile&&u.inputEditRegionMobile,...a}}}function G(e,t,a,s,n,i,o,r,l,d){let c;(!r||"date"===t&&null!=n&&n.start_time||"time"===t&&null!=n&&n.start_date)&&(c=K(n,i,o,l,r,d),c&&(a(c),c.error?o.setState({...o.state,dateEdited:!1,error:c.error}):o.reset())),s&&s(e,c)}function $(e,t,a,s,n,i,o,r,l){const d=K(t,a,s,i,o,r);d?(e(d),d.error?s.setState({...s.state,dateEdited:!1,timeEdited:!1,error:d.error}):s.reset()):s.setState({...s.state,dateEdited:!1,timeEdited:!1}),l&&n&&n(l)}function Q(e){let{dateTimeInputMenuItemProps:t,store:a}=e;const{store:r,hideClearButton:d,focus:u,showTime:g,placeholder:m,...p}=t,{onBlur:h,onClear:f,onDateFocus:v,onSubmit:x,onTimeFocus:y,onUpdate:b,isEndingDate:_,inputStyle:M,inputOuterStyle:w,style:C,disabled:j,validate:T,value:k}=t,F=(0,l.useIntl)(),N=(0,o.Fg)(),I=(0,n.O7)(),A=(0,s.useCallback)((e=>function(e,t,a,s,n,i,o,r,l,d){const{device:c}=t;i.setState({...i.state,timeEdited:!0,temporaryValue:{...i.state.temporaryValue,time:e.target.value||""}}),c.isAndroid&&$(a,s,n,i,o,r,l,d)}(e,I,b,k,F,a,h,T,g,_)),[I,b,k,F,a,h,T,g,_]),E=(0,s.useCallback)((e=>function(e,t,a){t.setState({...t.state,timeEdited:!1}),a&&a(e)}(e,a,y)),[a,y]),P=(0,s.useCallback)((()=>function(e,t,a,s,n,i,o,r){s.setState({...s.state,dateEdited:!0,timeEdited:!0,temporaryValue:{date:void 0,time:void 0},error:void 0});const l=K(t,a,s,i,o,r);l&&e(l),s.setState({...s.state,dateEdited:!1,timeEdited:!1}),n&&n()}(b,k,F,a,f,T,g,_)),[b,k,F,a,f,T,g,_]),R=(0,s.useCallback)((e=>$(b,k,F,a,h,T,g,_)),[b,k,F,a,h,T,g,_]),D=(0,s.useCallback)((e=>function(e,t,a,s,n,i,o,r,l,d){const{device:c}=t;i.setState({...i.state,dateEdited:!0,temporaryValue:{...i.state.temporaryValue,date:e.target.value||""}}),c.isAndroid&&$(a,s,n,i,o,r,l,d)}(e,I,b,k,F,a,h,T,g,_)),[I,b,k,F,a,h,T,g,_]),V=(0,s.useCallback)((e=>function(e,t,a){t.setState({...t.state,dateEdited:!1}),a&&a(e)}(e,a,v)),[a,v]),{device:Z}=I,B=Z.isMobile?"date":"text",O=Z.isMobile?"time":"text",q=L.B.Transparent,W=Z.isMobile?void 0:u,Q=(0,i.VK)((()=>H(I,N,M,w,C,j,W,F,a,d)),[I,N,M,w,C,j,W,F,a,d]),J={display:"flex",alignItems:"center",lineHeight:2,background:N.inputBackground,paddingLeft:8,flexBasis:"50%",...Q.inputOuterStyle},X=(0,i.VK)((()=>function(e,t,a,s){const{device:n}=e;return n.isMobile?t?c.dd(t,a):"":s.state.temporaryValue.date?s.state.temporaryValue.date:s.state.dateEdited?s.state.temporaryValue.date||"":t?c.dd(t,a):""}(I,k,F,a)),[I,k,F,a]),ee=(0,i.VK)((()=>function(e,t,a,s){const{device:n}=e;return n.isMobile?t?c.KN(t,a):"":s.state.temporaryValue.time?s.state.temporaryValue.time:s.state.timeEdited?s.state.temporaryValue.time||"":t?c.KN(t,a):""}(I,k,F,a)),[I,k,F,a]);return(0,U.jsxs)("div",{style:J,children:[(0,U.jsx)(L.Z,{...p,type:B,format:q,placeholder:m,focus:"date"===W,onFocus:V,onChange:D,onSubmit:e=>G(e,"date",b,x,k,F,a,g,T,_),onBlur:R,value:X,size:1,style:{fontSize:Z.isMobile?16:14},showClearButton:!g&&z(I,d),onClearButtonClick:P}),g&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("div",{style:{height:14,width:1,background:N.regularDividerColor,marginLeft:6,marginRight:12,flexShrink:0}}),(0,U.jsx)(L.Z,{...p,placeholder:S.default.formatMessage(Y.timePlaceholder),type:O,format:q,focus:"time"===W,onFocus:E,onChange:A,onSubmit:e=>G(e,"time",b,x,k,F,a,g,T,_),onBlur:R,value:ee,size:1,style:{fontSize:Z.isMobile?16:14},showClearButton:z(I,d),onClearButtonClick:P})]})]})}const Y=(0,l.defineMessages)({startingDateMessage:{defaultMessage:"Starting",id:"auditLog.dateTimeRangeMenu.startingDatePlaceholder"},endingDateMessage:{defaultMessage:"Ending",id:"auditLog.dateTimeRangeMenu.endingDatePlaceholder"},timePlaceholder:{defaultMessage:"12:00 AM",id:"auditLog.dateTimeRangeMenu.timePlaceholderInNumber"}});const J=function(e){let{title:t,value:a,onUpdate:s,onDismiss:o,disabled:r,footer:l,header:d,hideTime:c,showTime:u,store:g,dayRangeStore:m}=e;const p=(0,n.O7)(),v=(0,i.qz)(m,f.Z),x=(0,i.qz)(g,h.ZP);(0,w.Z)((()=>{void 0!==u&&x.setState({...x.state,showTime:u})}));const{device:y}=p;return(0,U.jsx)(F.Z,{...le(p,t,a,s,x,v,o,r,l),children:(0,U.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,U.jsxs)("div",{children:[d,!y.isMobile&&(0,U.jsx)(re,{value:a,disabled:r,onUpdate:s,store:x,dayRangeStore:v}),(0,U.jsx)(ae,{value:a,onUpdate:s,store:x,dayRangeStore:v})]}),(0,U.jsx)(oe,{onUpdate:s,value:a,hideTime:c,store:x,dayRangeStore:v})]})})};function X(e,t,a){return t.error?t:function(e){if(e.starting&&e.ending){const t=C.OQ.notionDateTimeToLuxon(e.starting);return C.OQ.notionDateTimeToLuxon(e.ending)>=t?{value:e}:{error:k.B.INVALID_RANGE}}return{value:e}}({...a,[e]:t.value})}function ee(e,t,a){if(t.error)return t;return function(e){if(e.starting&&e.ending){const t=C.OQ.notionDateToLuxon(e.starting);return C.OQ.notionDateToLuxon(e.ending)>=t?{value:e}:{error:k.B.INVALID_RANGE}}return{value:e}}({...c.Zy(a),[e]:t.value})}function te(e,t){return{pickerSection:{paddingLeft:16,paddingRight:16},pickerSectionMobile:{paddingTop:16,paddingBottom:8},sidebar:{paddingTop:12,paddingBottom:24,overflowY:"auto",overflowX:"hidden",flex:"0 0 220px",backgroundColor:t.sidebarSecondaryBackground,borderLeft:`1px solid ${t.regularDividerColor}`,maxWidth:"fit-content"},menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4,color:t.mediumTextColor}}}function ae(e){let{value:t,onUpdate:a,store:s,dayRangeStore:r}=e;const l=(0,o.Fg)(),d=(0,n.O7)(),u=(0,i.qz)(r,f.Z),g=(0,i.qz)(s,h.ZP),{device:m}=d,p=te(d,l),v=function(e){return{pickerSectionMobile:{background:e.popoverBackground,boxShadow:`0 1px 0 ${e.regularDividerColor}`,marginBottom:1}}}(l),x={...p.pickerSection,...m.isMobile&&p.pickerSectionMobile,...m.isMobile&&v.pickerSectionMobile};return(0,U.jsx)(M.Z,{children:(0,U.jsx)("div",{style:x,children:(0,U.jsx)(A.Z,{value:c.Zy(t),dateTimeStore:g,store:u,onUpdate:e=>{if(e.error)return null;const s=c.PM(t,e.value);return a({error:e.error,value:s})},validate:(e,a)=>ee(e,a,t)})})})}function se(e,t,a){t.setState({...t.state,focus:e});const s=h.QJ[e];a.setState({...a.state,focus:s})}function ne(e,t){t.setState({...t.state,focus:e})}function ie(e,t,a){e.ending&&se(p.Hv.EndDate,t,a),t.setState({...t.state,temporaryDateRange:e}),a.setState({...a.state,displayMonth:e.starting||e.ending?C.Sy(e.starting||e.ending):void 0,temporaryDateRange:{starting:c.Qb(e.starting),ending:c.Qb(e.ending)}})}function oe(e){let{onUpdate:t,value:a,hideTime:s,store:r,dayRangeStore:d}=e;const c=(0,o.Fg)(),u=(0,n.O7)(),g=(0,i.VK)((()=>r.state.showTime),[r]);return(0,U.jsxs)("aside",{style:te(u,c).sidebar,children:[s?null:(0,U.jsx)(I.Z,{title:(0,U.jsx)(l.FormattedMessage,{id:"auditlogDateFilter.timeToggle",defaultMessage:"Use time"}),on:g,onClick:()=>{if(r.toggleShowTime(),r.state.showTime){const e=a;e.starting&&(e.starting.start_time="00:00"),e.ending&&(e.ending.start_time="23:59"),t({value:e})}},focused:!1}),(0,U.jsx)(v.Z,{focused:!1,title:(0,U.jsx)(l.FormattedMessage,{id:"auditlogDateFilter.quickFilters.today",defaultMessage:"Today"}),onClick:()=>{const e=Date.now(),t=C.CQ(e,(0,j.r)());ie({starting:{...t,start_time:"00:00"},ending:t},r,d)},style:te(u,c).menuItem}),(0,U.jsx)(v.Z,{focused:!1,title:(0,U.jsx)(l.FormattedMessage,{id:"auditlogDateFilter.quickFilters.yesterday",defaultMessage:"Yesterday"}),onClick:()=>{const e=C.Cv((0,j.r)());ie({starting:{type:"datetime",start_date:e.start_date,start_time:"00:00",time_zone:(0,j.r)()},ending:{type:"datetime",start_date:e.start_date,start_time:"23:59",time_zone:(0,j.r)()}},r,d)},style:te(u,c).menuItem}),(0,U.jsx)(v.Z,{focused:!1,title:(0,U.jsx)(l.FormattedMessage,{id:"auditlogDateFilter.quickFilters.lastWeek",defaultMessage:"Last 7 days"}),onClick:()=>{const e=C.Oo((0,j.r)()),t=C.CQ(Date.now(),(0,j.r)());ie({starting:{type:"datetime",start_date:e.start_date,start_time:"00:00",time_zone:(0,j.r)()},ending:t},r,d)},style:te(u,c).menuItem}),(0,U.jsx)(v.Z,{focused:!1,title:(0,U.jsx)(l.FormattedMessage,{id:"auditlogDateFilter.quickFilters.lastMonth",defaultMessage:"Last 30 days"}),onClick:()=>{const e=C.dj((0,j.r)()),t=C.CQ(Date.now(),(0,j.r)());ie({starting:{type:"datetime",start_date:e.start_date,start_time:"00:00",time_zone:(0,j.r)()},ending:t},r,d)},style:te(u,c).menuItem})]})}function re(e){let{value:t,disabled:a,onUpdate:s,store:r,dayRangeStore:d}=e;const u=(0,l.useIntl)(),g=(0,o.Fg)(),m=(0,n.O7)(),{device:h,WindowSizeStore:f}=m,v=(0,i.VK)((()=>r.getFocus()),[r]);let x="date";v!==p.Hv.StartTime&&v!==p.Hv.EndTime||(x="time");const y=function(e,t){return{earliestValidEnding:e.starting&&c.o0(e.starting,t),latestValidStarting:e.ending&&c.o0(e.ending,t)}}(t,u),b=(0,i.VK)((()=>r.state.showTime),[r]),_=(0,i.VK)((()=>f.getSafePaddingLeftCSS(16)),[f]);return(0,U.jsxs)("div",{style:{paddingTop:h.isMobile?16:12,paddingBottom:h.isMobile?16:8,paddingLeft:h.isMobile?_:14,paddingRight:h.isMobile?_:14,display:b?"block":"flex",...h.isMobile&&{boxShadow:`\n                        0 1px 0 ${g.regularDividerColor}\n                    `,position:"relative",zIndex:2},background:h.isMobile?g.popoverBackground:void 0},children:[(0,U.jsx)(O,{disabled:a,placeholder:S.default.formatMessage(Y.startingDateMessage),focus:v===p.Hv.StartDate||v===p.Hv.StartTime?x:void 0,value:t.starting,validate:e=>function(e,t){const a=X("starting",e,t);return a.error?a:{value:a.value.starting}}(e,t),onUpdate:e=>function(e,t,a){e.error||t({value:{...a,starting:e.value}})}(e,s,t),onDateFocus:()=>se(p.Hv.StartDate,r,d),onTimeFocus:()=>ne(p.Hv.StartTime,r),onSubmit:(e,t)=>function(e,t,a,s,n){t&&t.error||(a===p.Hv.StartDate&&s.state.showTime?s.setState({...s.state,focus:p.Hv.StartTime}):(s.setState({...s.state,focus:p.Hv.EndDate}),n.setState({...n.state,focus:"ending"})))}(0,t,v,r,d),inputElementAttributes:{max:y.latestValidStarting},showTime:b}),(0,U.jsx)("div",{style:{width:12,height:8}}),(0,U.jsx)(O,{disabled:a,placeholder:S.default.formatMessage(Y.endingDateMessage),focus:v===p.Hv.EndDate||v===p.Hv.EndTime?x:void 0,value:t.ending,validate:e=>function(e,t){const a=X("ending",e,t);return a.error?a:{value:a.value.ending}}(e,t),onUpdate:e=>function(e,t,a){e.error||t({value:{...a,ending:e.value}})}(e,s,t),onDateFocus:()=>se(p.Hv.EndDate,r,d),onTimeFocus:()=>ne(p.Hv.EndTime,r),onSubmit:(e,t)=>function(e,t,a,s){t&&t.error||a===p.Hv.EndDate&&s.state.showTime&&s.setState({...s.state,focus:p.Hv.EndTime})}(0,t,v,r),inputElementAttributes:{min:y.earliestValidEnding},showTime:b})]})}function le(e,t,a,s,n,i,o,r,l){const{device:d}=e;if(d.isMobile){return{menuType:T.og.Modal,title:t,right:(0,U.jsx)(N.DoneMenuText,{}),onClickRight:o,header:(0,U.jsx)(re,{value:a,disabled:r,onUpdate:s,store:n,dayRangeStore:i})}}return{menuType:T.og.Popup,onClickOutside:o,footer:l}}var de=a(500255),ce=a(608319),ue=a(975689),ge=a(991642);const me=(0,l.injectIntl)((function(e){let{onChange:t,onMenuDismiss:a,showButtons:o,title:r,header:l,sidebar:d,hideTime:c,value:u,disabled:g,icon:m,mode:p,focused:v,pillTitle:x}=e;const y=(0,n.O7)(),b=(0,i.qz)(void 0,f.Z),_=(0,i.qz)(void 0,h.ZP);(0,s.useEffect)((()=>{_e({value:u},_,b)}),[u,_,b]);const{device:M}=y;return M.isMobile?(0,U.jsx)(Ne,{onChange:t,onMenuDismiss:a,showButtons:o,title:r,header:l,sidebar:d,hideTime:c,value:u,disabled:g,icon:m,store:_,dayRangeStore:b,mode:p}):(0,U.jsx)(Fe,{onChange:t,onMenuDismiss:a,showButtons:o,title:r,header:l,sidebar:d,hideTime:c,value:u,disabled:g,focused:v,icon:m,mode:p,pillTitle:x,store:_,dayRangeStore:b})}));function pe(e){const{device:t}=e;return t.isMobile?m.k.SlideUp:m.k.Popup}function he(e){return{buttonMenuItem:{color:e.mediumTextColor},activeMenuItem:{color:e.regularTextColor}}}function fe(e){e.preventDefault&&e.preventDefault()}function ve(e){e({starting:void 0,ending:void 0})}function xe(e){return{menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},icon:{height:16,width:16,marginRight:6},iconActiveDesktop:{height:14,width:14,fill:"currentColor",alignSelf:"flex-start",marginTop:2,marginRight:2},iconActiveDesktopWrapper:{marginTop:0},iconActiveMobile:{height:14,width:14,fill:"currentColor",marginTop:1,marginRight:6},popup:{paddingTop:0,paddingBottom:8},popupWithSidebar:{display:"flex"},menuItemTitleDesktop:{width:"100%"},summary:{display:"inline-flex"}}}function ye(e,t,a){a||(e.setState({...e.state,isOpen:!0,focus:p.Hv.StartDate}),t.setState({...t.state,isOpen:!0,focus:"starting"}))}function be(e,t,a,s,n,i){const{temporaryDateRange:o}=a.state;g.zD(e)||(i||t(o),a.setState({...a.state,isOpen:!1,temporaryDateRange:{starting:void 0,ending:void 0}}),s.setState({...s.state,isOpen:!1,temporaryDateRange:{starting:void 0,ending:void 0}}),n&&n())}function _e(e,t,a){if(e.error)return;const s={starting:(0,c.Qb)(e.value.starting),ending:(0,c.Qb)(e.value.ending)};return a.setState({...a.state,temporaryDateRange:{...a.state.temporaryDateRange,...s}}),t.setState({...t.state,temporaryDateRange:{...t.state.temporaryDateRange,...e.value}})}function Me(e){let{disabled:t,icon:a,title:i,store:o,dayRangeStore:r}=e;const l=(0,n.O7)(),d=(0,s.useCallback)((()=>ye(o,r,t)),[o,r,t]),c=xe(l);return(0,U.jsx)(v.Z,{disabled:t,focused:!1,icon:a(c.icon),title:i,onClick:d})}function we(e){let{disabled:t,title:a,value:i,intl:o,onChange:l,store:d,dayRangeStore:c}=e;const u=(0,n.O7)(),m=(0,s.useCallback)((()=>ye(d,c,t)),[d,c,t]),p=xe(u),h=(0,U.jsxs)("div",{style:p.summary,children:[(0,r.C)(p.iconActiveMobile),g._Q(i,o)]});return(0,U.jsx)(ue.Z,{disabled:t,onClick:m,onClickClear:()=>ve(l),label:a,title:h})}function Ce(e){let{disabled:t,value:a,focused:i,intl:l,onChange:d,store:c,dayRangeStore:u}=e;const m=(0,o.Fg)(),p=(0,n.O7)(),h=(0,s.useCallback)((()=>ye(c,u,t)),[c,u,t]),f=xe(p),x=he(m),y={...f.menuItem,...x.activeMenuItem},b=g._Q(a,l),_=(0,U.jsx)(de.Z,{onClick:()=>ve(d),disabled:t});return(0,U.jsx)(v.Z,{focused:i,disabled:t,icon:(0,r.C)(f.iconActiveDesktop),title:b,right:_,isTokenTitle:!0,alignIconTop:!0,onClick:h,desktopTitleStyle:f.menuItemTitleDesktop,desktopIconStyle:f.iconActiveDesktopWrapper,style:y})}function je(e){let{disabled:t,title:a,icon:i,focused:r,mode:l,store:d,dayRangeStore:c}=e;const u=(0,o.Fg)(),g=(0,n.O7)(),m=(0,s.useCallback)((()=>ye(d,c,t)),[d,c,t]),p=xe(g),h=he(u),f={...p.menuItem,...h.buttonMenuItem,...l===ce.z.Pill?{width:"fit-content",border:"solid 1px",paddingLeft:0,paddingRight:0,borderRadius:20,fontSize:12}:{}};return(0,U.jsx)(v.Z,{focused:r,disabled:t,icon:i(p.icon),title:a,onClick:m,style:f})}function Se(e){let{disabled:t,value:a,pillTitle:n,store:i,dayRangeStore:o}=e;const d=(0,s.useCallback)((()=>ye(i,o,t)),[i,o,t]),c=(0,U.jsx)(l.FormattedMessage,{id:"searchDateFilter.shortTitle",defaultMessage:"Date"});return(0,U.jsx)(u.Z,{on:Boolean(a.starting||a.ending),icon:(0,r.C)({width:16,marginRight:6,fill:"currentColor"}),title:(0,U.jsx)("span",{children:n||c}),onClick:d})}function Te(e){let{onChange:t,onMenuDismiss:a,showButtons:s,store:n,dayRangeStore:i}=e;return(0,U.jsxs)(M.Z,{topBorder:!0,style:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex"},children:[(0,U.jsx)(y.Z,{onClick:()=>{n.clearTemporaryDateRange(),i.clearTemporaryDateRange(),t({starting:void 0,ending:void 0})},children:(0,U.jsx)(l.FormattedMessage,{id:"searchDateFilter.clearButton",defaultMessage:"Clear"})}),(0,U.jsx)(_.Z,{onClick:e=>{t(n.state.temporaryDateRange),be(e,t,n,i,a,s)},children:(0,U.jsx)(l.FormattedMessage,{id:"searchDateFilter.applyButton",defaultMessage:"Apply"})})]})}function ke(e){let{onChange:t,onMenuDismiss:a,showButtons:n,title:o,header:r,sidebar:d,hideTime:c,value:u,store:g,dayRangeStore:m}=e;const p=(0,s.useCallback)((e=>be(e,t,g,m,a,n)),[t,g,m,a,n]),h=(0,s.useCallback)((e=>_e(e,g,m)),[g,m]),f=(0,i.VK)((()=>function(e,t){const{temporaryDateRange:a}=t.state;return{...e,...a}}(u,g)),[u,g]);return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(J,{title:o,value:f,onUpdate:h,store:g,dayRangeStore:m,onDismiss:p,footer:"footer"===n&&(0,U.jsx)(Te,{onChange:t,onMenuDismiss:a,showButtons:n,store:g,dayRangeStore:m}),sidebar:d,hideTime:c,header:r}),"side"===n&&(0,U.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",padding:"0px 10px"},children:[(0,U.jsx)(y.Z,{isGray:!0,style:{marginLeft:"auto",marginRight:8},onClick:p,children:(0,U.jsx)(l.FormattedMessage,{defaultMessage:"Cancel",id:"searchDateFilter.cancelButton.label"})}),(0,U.jsx)(_.Z,{onClick:()=>t(g.state.temporaryDateRange),children:(0,U.jsx)(l.FormattedMessage,{defaultMessage:"Accept",id:"searchDateFilter.acceptButton.label"})})]})]})}function Fe(e){let{mode:t,onChange:a,onMenuDismiss:o,showButtons:r,title:c,header:u,sidebar:g,hideTime:m,value:p,disabled:h,focused:f,icon:v,pillTitle:y,store:_,dayRangeStore:M}=e;const w=(0,n.O7)(),C=(0,l.useIntl)(),j=(0,s.useCallback)((e=>be(e,a,_,M,o,r)),[a,_,M,o,r]),S=(0,s.useCallback)((()=>(0,U.jsx)(ke,{onChange:a,onMenuDismiss:o,showButtons:r,title:c,header:u,sidebar:g,hideTime:m,value:p,store:_,dayRangeStore:M})),[a,o,r,c,u,g,m,p,_,M]),T=xe(w),k=t===ce.z.Section,F=k?c:void 0,N=t===ce.z.Section?(0,U.jsx)(Ce,{disabled:h,value:p,focused:f,intl:C,onChange:a,store:_,dayRangeStore:M}):t===ce.z.Button?(0,U.jsx)(je,{disabled:h,title:c,icon:v,focused:f,mode:t,store:_,dayRangeStore:M}):t===ce.z.Pill?(0,U.jsx)(Se,{disabled:h,value:p,pillTitle:y,store:_,dayRangeStore:M}):void(0,d.t1)(t),I=(0,i.VK)((()=>_.state.isOpen),[_]);return(0,U.jsx)(ge.Z,{title:F,marginAfter:k,children:(0,U.jsx)(x.Z,{debugName:"DateTimeFilter",capture:I,onUp:fe,onDown:fe,onEnter:fe,children:(0,U.jsx)(b.ZP,{popupType:pe(w),open:I,origin:N,render:S,onDismiss:j,placementToOrigin:b.ZP.Placement.Bottom,alignmentToOrigin:b.ZP.Alignment.Start,style:g?T.popupWithSidebar:T.popup})})})}function Ne(e){let{mode:t,onChange:a,onMenuDismiss:n,showButtons:o,title:r,header:d,sidebar:c,hideTime:u,value:g,disabled:p,icon:h,store:f,dayRangeStore:v}=e;const x=(0,l.useIntl)(),y=(0,s.useCallback)((e=>be(e,a,f,v,n,o)),[a,f,v,n,o]),_=(0,s.useCallback)((()=>(0,U.jsx)(ke,{onChange:a,onMenuDismiss:n,showButtons:o,title:r,header:d,sidebar:c,hideTime:u,value:g,store:f,dayRangeStore:v})),[a,n,o,r,d,c,u,g,f,v]),M=(0,i.VK)((()=>f.state.isOpen),[f]),w=t===ce.z.Section?(0,U.jsx)(we,{disabled:p,title:r,value:g,intl:x,onChange:a,store:f,dayRangeStore:v}):(0,U.jsx)(Me,{disabled:p,icon:h,title:r,store:f,dayRangeStore:v});return(0,U.jsx)(b.ZP,{popupType:m.k.SlideUp,open:M,origin:w,render:_,onDismiss:y,preventScaleTransition:!0})}},166661:(e,t,a)=>{a.d(t,{e:()=>l});a(667294);var s=a(924211),n=a(709291),i=a(825464),o=a(526388),r=a(785893);function l(e){let{num:t,abbreviateNumber:a}=e;const l=(0,n.useIntl)(),d=(0,s.E2)(l),c=t.toLocaleString(d),u=Intl.NumberFormat(d,{notation:"compact",maximumFractionDigits:1}).format(t);return a?(0,r.jsx)(o.Z,{placement:i.u.Bottom,render:e=>(0,r.jsx)("span",{...e,children:u}),renderTooltip:()=>c}):(0,r.jsx)("span",{children:c})}},340400:(e,t,a)=>{a.d(t,{k:()=>U,Z:()=>G});var s=a(667294),n=a(800480),i=a(184747),o=a(886628),r=a(724405),l=a(994044),d=a(709291),c=a(531701),u=a(653965),g=a(891219),m=a(195209),p=a(843250),h=a(460709),f=a(75472),v=a(165598),x=a(918514),y=a(548779),b=a(195697),_=a(305971),M=a(318245),w=a(785834),C=a(429677),j=a(206258),S=a(897630),T=a(535057),k=a(478140),F=a(840721),N=a(672495),I=a(483182),A=a(207567),E=a(544385),P=a(883355),R=a(401903),D=a(424145),V=a(943579),Z=a(785893);class L extends P.Z{constructor(){super(...arguments),this.renderInShareMenuStore=this.createComputedStore((()=>Boolean(this.props.renderInShareMenu&&!this.environment.device.isMobile))),this.inviteOriginStore=this.createComputedStore((()=>this.props.inviteOrigin?this.props.inviteOrigin:this.props.store instanceof j.G?"page_share_modal":"space_share_modal")),this.defaultRoleForSpaceBotStore=this.createComputedStore((()=>"editor")),this.defaultRoleForNonBotStore=this.createComputedStore((()=>{const{store:e,isSubscribed:t}=this.props;return f.xT({environment:this.environment,store:e,isSubscribed:t})})),this.inputDebounce=void 0,this.storeTypes={permissionsInviteStore:R.Z,contextualInviteStore:w.ZP},this.handleModalDismiss=async()=>{await m.kL({environment:this.environment,permissionsInviteStore:this.stores.permissionsInviteStore,from:"share_menu"})},this.handleInputChange=async e=>{var t;null===(t=this.inputDebounce)||void 0===t||t.cancel(),this.inputDebounce=u.Ds((()=>{g.UW(this.environment,{invite_flow_id:this.stores.permissionsInviteStore.state.flowId,subscription_tier:(0,T.zt)(),invite_origin:this.inviteOriginStore.state})}),1e3),this.inputDebounce(),await m.jC({environment:this.environment,event:e,permissionsInviteStore:this.stores.permissionsInviteStore})},this.handleClickRemoveToken=e=>{m.PV({targetToRemove:e,permissionsInviteStore:this.stores.permissionsInviteStore,defaultRoleForNonBot:this.defaultRoleForNonBotStore.state})}}async UNSAFE_willMount(){await S.bi(this.environment)}willUnmount(){var e;null===(e=this.inputDebounce)||void 0===e||e.flush()}renderComponent(){if(this.renderInShareMenuStore.state)return this.renderComponentInShareMenu();const e=this.renderHeader(),t=this.renderSearchRequest();return this.renderComponentOriginal(e,t)}renderHeader(){const{permissionsInviteStore:e}=this.stores,{device:t}=this.environment;return(0,Z.jsx)(D.Z,{permissionsInviteStore:e,store:this.props.store,handleClickRemoveToken:e=>{this.handleClickRemoveToken(e)},handleInputChange:async e=>{await this.handleInputChange(e)},handleInputSubmit:async()=>{await this.handleInviteInputSubmit()},origin:Boolean(this.renderInShareMenuStore.state)?"share_menu":"share_modal",defaultRoleForNonBot:this.defaultRoleForNonBotStore.state,isTeamsEnabled:(0,b.bq)(),right:!t.isMobile&&this.renderDesktopInputRightInner(),focus:"invitee"===e.state.inputFocus||"invitee-popup-closed"===e.state.inputFocus,handleFocus:()=>{t.isMobile||e.setState({...e.state,inputFocus:"invitee"})}})}renderSearchRequest(){const{permissionsInviteStore:e}=this.stores,t=(0,v.OY)(this.props.store),a=(0,v.OY)(this.props.store),s=this.props.store instanceof j.G&&(0,y.Q6)(this.props.store.getSpaceStore());return(0,Z.jsx)(V.Z,{permissionsInviteStore:e,store:this.props.store,defaultRoleForSpaceBot:this.defaultRoleForSpaceBotStore.state,shouldShowBots:t,shouldShowGroups:a,sectionRenderLimit:this.renderInShareMenuStore.state?5:10,membersOnly:this.props.membersOnly,guestsMustBeRequested:s})}renderComponentOriginal(e,t){const{device:a}=this.environment;let s;return s=a.isMobile?{menuType:h.og.Modal,title:(0,v.Mm)(this.props.store)?(0,Z.jsx)(d.FormattedMessage,{id:"inviteUserModal.addMemberMenu.title",defaultMessage:"Add members"}):(0,Z.jsx)(d.FormattedMessage,{id:"inviteUserModal.invitePersonMenu.title",defaultMessage:"Invite a person"}),right:(0,Z.jsx)("div",{style:{color:c.ZP.blue},children:(0,Z.jsx)(d.FormattedMessage,{id:"inviteUserModal.mobile.inviteButton.label",defaultMessage:"Invite"})}),left:(0,Z.jsx)(F.CancelMenuText,{}),onClickLeft:this.handleModalDismiss,onClickRight:async()=>{await this.handleInviteClick()},header:e}:{menuType:h.og.Popup,width:480,height:"60vh",header:e,tokenInputHeader:!0,footer:this.renderHelpButton(),disableScroller:!1},(0,Z.jsxs)(k.Z,{...s,className:p.FJA,children:[a.isMobile&&(0,Z.jsx)(N.Z,{title:(0,Z.jsx)(d.FormattedMessage,{id:"inviteUserModal.permissionLevel.title",defaultMessage:"Permission level"}),children:this.renderDesktopInputRightInnerSelect()}),(0,Z.jsx)("div",{children:t}),a.isMobile&&this.renderHelpButton()]})}renderHelpButton(){return this.renderInShareMenuStore.state?null:(0,Z.jsx)(N.Z,{topBorder:!0,disableDesktopPadding:!0,children:(0,Z.jsx)(I.Z,{title:(0,Z.jsx)(d.FormattedMessage,{id:"inviteUserModal.helpButton.caption",defaultMessage:"Learn how to invite people and set permissions"}),href:(0,x.UY)("guides.invitePerson"),analyticsFrom:"invite_person"})})}renderDesktopInputRightInner(){return(0,Z.jsxs)("div",{style:{marginLeft:l.p_,display:"flex",alignItems:"center"},children:[this.renderDesktopInputRightInnerSelect(),!this.renderInShareMenuStore.state&&this.renderDesktopInputRightInnerButton({isLarge:!0})]})}renderDesktopInputRightInnerButton(e){const{isLarge:t}=e;return(0,Z.jsx)(E.Z,{store:this.props.store,permissionsInviteStore:this.stores.permissionsInviteStore,handleUpgradeClick:()=>{return e=this.props.upgradeButtonName,t=this.environment,a=this.props.onUpgradeButtonClick,void m.Vu({environment:t,upgradeButtonName:e,onUpgradeButtonClick:a});var e,t,a},handleInviteClick:()=>this.handleInviteClick(),disabled:this.props.disabled,isLarge:t})}renderDesktopInputRightInnerSelect(){const{device:e}=this.environment,{store:t}=this.props,{permissionsInviteStore:a}=this.stores;if(a.state.isInviteTargetsEmpty||!(0,C.ow)(a.state))return(0,Z.jsx)(A.ZP,{disabled:(0,v.Mm)(t)&&!t.canAdmin(),role:a.state.inviteRole,table:a.state.table,type:"user_permission",blockType:(0,v.OY)(t)?t.getType():void 0,isInvite:!0,onUpgradeButtonClick:this.props.onUpgradeButtonClick,upgradeButtonName:this.props.upgradeButtonName,buttonStyle:{display:"flex",whiteSpace:"nowrap",height:26,color:c.ZP.uiGray,...this.renderInShareMenuStore.state&&{marginTop:e.isMobile?4:a.state.isInviteTargetsEmpty?1:6,marginBottom:e.isMobile?4:a.state.isInviteTargetsEmpty?1:6,marginRight:0}},isMenuItem:e.isMobile,onChange:e=>{m.XC({environment:this.environment,newRole:e,permissionsInviteStore:this.stores.permissionsInviteStore})}})}renderComponentInShareMenu(){const e={menuType:h.og.Popup,header:(0,Z.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"top",marginLeft:12,marginRight:12,gap:10},children:[this.renderHeader(),this.renderDesktopInputRightInnerButton({isLarge:!0})]}),footer:this.renderHelpButton(),disableScroller:!1};return(0,Z.jsx)("div",{style:{paddingTop:14,paddingBottom:14,paddingLeft:2,paddingRight:2},children:(0,Z.jsx)(k.Z,{...e,children:this.renderSearchRequest()})})}async handleInviteInputSubmit(){await this.handleInviteClick()}async handleInviteClick(){const e=M.default.mark("share_menu.invite_user_lag");await m.qg({environment:this.environment,store:this.props.store,sudoModeStore:this.props.sudoModeStore,permissionsInviteStore:this.stores.permissionsInviteStore,contextualInviteStore:this.stores.contextualInviteStore,onInviteClick:this.props.onInviteClick,onInviteComplete:this.props.onInviteComplete,inviteOrigin:this.inviteOriginStore.state,intl:this.props.intl}),M.default.measure(e,{environment:this.environment})}}L.displayName="PermissionsInviteBase";const B=(0,d.injectIntl)(L);const U="60vh";function O(e){const{store:t,permissionsInviteStore:a,membersOnly:l,onUpgradeButtonClick:u,upgradeButtonName:g}=e,f=(0,n.O7)(),{isMobile:x}=(0,n.Fy)(),y=(0,d.useIntl)();(0,i.Z)((async()=>{await S.bi(f)}));const b=(0,o.VK)((()=>(0,v.Mm)(t)),[t]),C=(0,o.qz)(void 0,w.ZP),T=(0,o.VK)((()=>e.inviteOrigin??(t instanceof j.G?"page_share_modal":"space_share_modal")),[e.inviteOrigin,t]),I=(0,s.useCallback)((async()=>{const t=M.default.mark("share_menu.invite_user_lag");await m.qg({environment:f,store:e.store,sudoModeStore:e.sudoModeStore,permissionsInviteStore:e.permissionsInviteStore,contextualInviteStore:C,onInviteClick:e.onInviteClick,onInviteComplete:e.onInviteComplete,inviteOrigin:T,intl:y}),M.default.measure(t,{environment:f})}),[f,e,C,T,y]),A=(0,s.useCallback)((async()=>{await m.kL({environment:f,permissionsInviteStore:a,from:"share_menu"})}),[f,a]),E=(0,r.yK)((()=>({right:{color:c.ZP.blue}})),[]);return(0,_.E)("functional_permissions_invite")?(0,Z.jsx)(B,{...e}):x?(0,Z.jsxs)(k.Z,{menuType:h.og.Modal,title:b?(0,Z.jsx)(d.FormattedMessage,{id:"inviteUserModal.addMemberMenu.title",defaultMessage:"Add members"}):(0,Z.jsx)(d.FormattedMessage,{id:"inviteUserModal.invitePersonMenu.title",defaultMessage:"Invite a person"}),right:(0,Z.jsx)("div",{style:E.right,children:(0,Z.jsx)(d.FormattedMessage,{id:"inviteUserModal.mobile.inviteButton.label",defaultMessage:"Invite"})}),left:(0,Z.jsx)(F.CancelMenuText,{}),onClickLeft:A,onClickRight:I,header:(0,Z.jsx)(z,{...e,inviteOrigin:T,onInviteClick:I}),className:p.FJA,children:[(0,Z.jsx)(N.Z,{title:(0,Z.jsx)(d.FormattedMessage,{id:"inviteUserModal.permissionLevel.title",defaultMessage:"Permission level"}),children:(0,Z.jsx)(H,{store:t,onUpgradeButtonClick:u,upgradeButtonName:g,permissionsInviteStore:a})}),(0,Z.jsx)("div",{children:(0,Z.jsx)(q,{store:t,permissionsInviteStore:a,membersOnly:l})}),(0,Z.jsx)(K,{})]}):(0,Z.jsx)(k.Z,{menuType:h.og.Popup,width:480,height:U,header:(0,Z.jsx)(z,{...e,inviteOrigin:T,onInviteClick:I}),tokenInputHeader:!0,footer:(0,Z.jsx)(K,{}),disableScroller:!1,className:p.FJA,children:(0,Z.jsx)("div",{children:(0,Z.jsx)(q,{store:t,permissionsInviteStore:a,membersOnly:l})})})}function z(e){const{store:t,isSubscribed:a,disabled:i,onUpgradeButtonClick:d,upgradeButtonName:c,onInviteClick:p,permissionsInviteStore:h,inviteOrigin:v}=e,x=(0,n.O7)(),{isMobile:y}=(0,n.Fy)(),_=(0,b.Gc)(),M=(0,o.VK)((()=>f.xT({environment:x,store:t,isSubscribed:a})),[x,t,a]),w=(0,o.VK)((()=>{const e=h.state.inputFocus;return"invitee"===e||"invitee-popup-closed"===e}),[h]),C=(0,s.useMemo)((()=>u.Ds((()=>{g.UW(x,{invite_flow_id:h.state.flowId,subscription_tier:(0,T.zt)(),invite_origin:v})}),1e3)),[x,h,v]),j=(0,s.useCallback)((async e=>{C(),await m.jC({environment:x,event:e,permissionsInviteStore:h})}),[C,x,h]),S=(0,s.useCallback)((e=>{m.PV({targetToRemove:e,permissionsInviteStore:h,defaultRoleForNonBot:M})}),[M,h]),k=(0,s.useCallback)((()=>{y||h.setState({...h.state,inputFocus:"invitee"})}),[y,h]),F=(0,r.yK)((()=>({right:{marginLeft:l.p_,display:"flex",alignItems:"center"}})),[]);return(0,Z.jsx)(D.Z,{permissionsInviteStore:h,store:t,handleClickRemoveToken:S,handleInputChange:j,handleInputSubmit:p,origin:"share_modal",defaultRoleForNonBot:M,isTeamsEnabled:_,right:!y&&(0,Z.jsxs)("div",{style:F.right,children:[(0,Z.jsx)(H,{store:t,onUpgradeButtonClick:d,upgradeButtonName:c,permissionsInviteStore:h}),(0,Z.jsx)(W,{store:t,disabled:i,onUpgradeButtonClick:d,upgradeButtonName:c,onInviteClick:p,permissionsInviteStore:h})]}),focus:w,handleFocus:k})}function q(e){const{store:t,permissionsInviteStore:a,membersOnly:s}=e,n=(0,o.VK)((()=>(0,v.OY)(t)),[t]),i=(0,o.VK)((()=>t instanceof j.G&&(0,y.Q6)(t.getSpaceStore())),[t]);return(0,Z.jsx)(V.Z,{permissionsInviteStore:a,store:t,defaultRoleForSpaceBot:"editor",shouldShowBots:n,shouldShowGroups:n,sectionRenderLimit:10,membersOnly:s,guestsMustBeRequested:i})}function K(){return(0,Z.jsx)(N.Z,{topBorder:!0,disableDesktopPadding:!0,children:(0,Z.jsx)(I.Z,{title:(0,Z.jsx)(d.FormattedMessage,{id:"inviteUserModal.helpButton.caption",defaultMessage:"Learn how to invite people and set permissions"}),href:(0,x.UY)("guides.invitePerson"),analyticsFrom:"invite_person"})})}function W(e){const{store:t,disabled:a,onUpgradeButtonClick:i,upgradeButtonName:o,onInviteClick:r,permissionsInviteStore:l}=e,d=(0,n.O7)(),c=(0,s.useCallback)((()=>{m.Vu({environment:d,upgradeButtonName:o,onUpgradeButtonClick:i})}),[o,d,i]);return(0,Z.jsx)(E.Z,{store:t,permissionsInviteStore:l,handleUpgradeClick:c,handleInviteClick:r,disabled:a,isLarge:!0})}function H(e){const t=(0,n.O7)(),{isMobile:a}=(0,n.Fy)(),{store:i,onUpgradeButtonClick:l,upgradeButtonName:d,permissionsInviteStore:u}=e,{inviteRole:g,table:p}=(0,o.VK)((()=>u.state),[u]),h=(0,o.VK)((()=>(0,C.ow)(u.state)),[u]),f=(0,o.VK)((()=>(0,v.OY)(i)?i.getType():void 0),[i]),x=(0,o.VK)((()=>(0,v.Mm)(i)&&!i.canAdmin()),[i]),y=(0,s.useCallback)((e=>{m.XC({environment:t,newRole:e,permissionsInviteStore:u})}),[t,u]),b=(0,r.yK)((()=>({button:{display:"flex",whiteSpace:"nowrap",height:26,color:c.ZP.uiGray}})),[]);return h||!g?null:(0,Z.jsx)(A.ZP,{disabled:x,role:g,table:p,type:"user_permission",blockType:f,isInvite:!0,onUpgradeButtonClick:l,upgradeButtonName:d,buttonStyle:b.button,isMenuItem:a,onChange:y})}const G=s.memo(O)},544385:(e,t,a)=>{a.d(t,{Z:()=>v,e:()=>f});a(667294);var s=a(886628),n=a(994044),i=a(709291),o=a(367669),r=a(75472),l=a(165598),d=a(26781),c=a(825464),u=a(535057),g=a(288280),m=a(158297),p=a(526388),h=a(785893);function f(e){let{featureAvailability:t}=e;const a=(0,s.VK)((()=>(0,u.c4)(g.subscriptionDataStoreInstance.state)),[])??0,n={type:"upsell",limit:{type:"cumulative",total:a,current:a},upsell:{type:"product",product:"plus",limit:{type:"cumulative",current:a,total:"unlimited"}}};t??=n;const o=t.limit.total,r=t.upsell;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{children:(0,h.jsx)(i.FormattedMessage,{id:"inviteUserButton.modalTooltip.guestLimitLine1",defaultMessage:"Your plan allows up to {currentLimit, plural, one {{currentLimit} unique guest} other {{currentLimit} unique guests}}.",values:{currentLimit:o}})}),"product"===r.type?(0,h.jsx)("div",{children:(0,h.jsx)(i.FormattedMessage,{id:"inviteUserButton.modalTooltip.guestLimitLine2upgrade",defaultMessage:"Upgrade to get up to {upsellLimit, plural, one {{upsellLimit} guest} other {{upsellLimit} guests}}",values:{upsellLimit:r.limit.total}})}):(0,h.jsx)(i.FormattedMessage,{id:"inviteUserButton.modalTooltip.guestLimitLine2contactSales",defaultMessage:"Contact sales to get more guests"})]})}const v=function(e){const{store:t,permissionsInviteStore:a,handleUpgradeClick:u,handleInviteClick:v,isLarge:x,disabled:y}=e,[b]=(0,s.AF)(a),_=(0,s.VK)((()=>b.inviteTargets.some((e=>r.OA(e)))),[b]),M=(0,d.S)(t),w=(0,s.VK)((()=>{const e=b.inviteTargets,a=e.filter((e=>{let{type:t}=e;return"newUser"===t})).map((e=>{let{value:t}=e;return t.email})),s=e.filter((e=>{let{type:t}=e;return"existingUser"===t})).map((e=>{let{value:t}=e;return t.id}));return!(0,l.Mm)(t)&&!(0,l.R$)(t)&&o.Xu({subscriptionData:g.subscriptionDataStoreInstance.state,newGuestIds:[...a,...s]})}),[b,t]),C=_?M:void 0;return(0,h.jsx)(p.Z,{alignment:c.v.Center,disableTooltip:!(w||C),renderTooltip:()=>w?(0,h.jsx)(f,{}):C,render:e=>(0,h.jsx)(m.Z,{isLarge:x,style:{minWidth:n.UF},disabled:y??Boolean(C),onClick:w?u:v,...e,children:w?(0,h.jsx)(i.FormattedMessage,{id:"inviteUserModal.inviteButton.upgradeLabel",defaultMessage:"Upgrade"}):(0,h.jsx)(i.FormattedMessage,{id:"inviteUserModal.inviteButton.label",defaultMessage:"Invite"})})})}},73075:(e,t,a)=>{a.d(t,{q:()=>d});a(667294);var s=a(724405),n=a(880750),i=a(709291),o=a(137810),r=(a(95477),a(863296)),l=a(785893);function d(e){let{runNewSearch:t,error:a}=e;const d=(0,s.yK)((e=>({container:{marginTop:48,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},headerIcon:{width:28,height:28,color:e.redBadgeBackground,fill:"currentColor"},title:{margin:"8px auto",fontWeight:o.Z.fontWeight.medium,fontSize:16},description:{fontWeight:o.Z.fontWeight.regular,fontSize:14,lineHeight:1.3,color:e.lightTextColor,textAlign:"center",width:328,margin:"0 auto 16px"},errorMessage:{borderRadius:4,background:e.cardBackground,fontFamily:o.Z.baseFontFamily.mono,fontSize:12,color:e.lightTextColor,padding:"18px 24px",margin:"0 auto 12px"},errorButton:{width:195,margin:"8px auto 0",textAlign:"center"}})),[]);return(0,l.jsxs)("div",{style:d.container,children:[(0,n.l)(d.headerIcon),(0,l.jsx)("h1",{style:d.title,children:(0,l.jsx)(i.FormattedMessage,{id:"adminContentSearchTab.pagesTable.error.title",defaultMessage:"Something went wrong"})}),(0,l.jsx)("p",{style:d.description,children:(0,l.jsx)(i.FormattedMessage,{id:"adminContentSearchTab.pagesTable.error.description",defaultMessage:"Something went wrong when we were loading the results. Try to run your search again."})}),null,(0,l.jsx)(r.Z,{style:d.errorButton,onClick:()=>t(!0),children:(0,l.jsx)(i.FormattedMessage,{id:"adminContentSearchTab.pagesTable.error.confirm",defaultMessage:"Retry"})})]})}},153855:(e,t,a)=>{a.d(t,{A:()=>h,e:()=>f});var s=a(667294),n=a(886628),i=a(959753),o=a(186517),r=a(429369),l=a(709291),d=a(401898),c=a(798165),u=a(80444),g=a(206258),m=a(969219),p=a(785893);function h(e){let{blockStore:t}=e;const[a,l]=(0,s.useState)(),d=(0,n.VK)((()=>u.default.state.currentSpaceStore),[]),h=(0,n.VK)((()=>{const e=c.fJ(t);return o.Wo(e)}),[t]);(0,s.useEffect)((()=>{!async function(){if(!d)return;const e=await o.pA({spaceId:d.getSpaceId(),inheritedPermissionItemsForPage:h,loadSpaceUsersFn:i.s8.fromGetRecordModelFn(d.getRecordModel),hasTeamLevelGuests:function(e){return!!d&&g.zX.createChildStore(d,{table:r.e0,id:e}).getRawMembership().some((e=>"team_level_guest"===e.type))}});l(e)}()}),[d,h]);const v=(0,s.useMemo)((()=>{if(a)return f(a)}),[a]);return(0,p.jsx)(m.iP,{useThinTitle:!0,title:v})}function f(e){switch(e){case"private":return(0,p.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.audienceCell.private",defaultMessage:"Private"});case"shared_internally":return(0,p.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.audienceCell.sharedInternally",defaultMessage:"Shared internally"});case"shared_externally":return(0,p.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.audienceCell.sharedExternally",defaultMessage:"Shared externally"});case"shared_to_web":return(0,p.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.audienceCell.publishedToWeb",defaultMessage:"Published to web"});default:(0,d.t1)(e)}}},936550:(e,t,a)=>{a.d(t,{y:()=>l});var s=a(667294),n=a(709291),i=a(889665),o=a(957702),r=a(785893);function l(e){let{spaceStore:t,createdByFilterIds:a,setCreatedByFilter:l,runNewSearch:d,includeGuests:c}=e;const u=(0,i.R)({spaceStore:t}),g=(0,s.useMemo)((()=>u.loading?[]:c?[...u.members,...u.guests]:u.members),[u,c]),m=(0,s.useMemo)((()=>u.loading?new Set:new Set(u.guests.map((e=>e.id)))),[u]);const p=(0,s.useMemo)((()=>a.map((e=>({id:e,type:"user"})))),[a]);return(0,r.jsx)(o.B,{userStores:g,title:(0,r.jsx)(n.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.createdBy.title",defaultMessage:"Created by"}),selectedItems:p,setSelectedItems:function(e){const t=e.map((e=>{let{id:t}=e;return t}));l(t)},onMenuClose:d,isMultiSelect:!0,guestUserIdSet:m})}},679782:(e,t,a)=>{a.d(t,{f:()=>y});var s=a(667294),n=a(886628),i=a(724405),o=a(640506),r=a(569651),l=a(542853),d=a(709291),c=a(401898),u=a(227617),g=a(897638),m=a(164921),p=a(552275),h=a(814871),f=a(423096),v=a(608319),x=a(785893);function y(e){let{lastEditedTime:t,createdTime:a,setLastEditedTime:i,setCreatedOnTime:l}=e;const m=(0,d.useIntl)(),[p,h]=(0,s.useState)("createdTime"),y=(0,s.useMemo)((()=>{switch(p){case"createdTime":return a;case"lastEditedTime":return t;default:(0,c.t1)(p)}}),[t,a,p]),_=(0,s.useMemo)((()=>{switch(p){case"createdTime":return l;case"lastEditedTime":return i;default:(0,c.t1)(p)}}),[i,l,p]);const M=(0,n.VK)((()=>{if((0,u.mK)(y))switch(p){case"createdTime":return(0,x.jsx)(d.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.createdOn.title",defaultMessage:"Created on"});case"lastEditedTime":return(0,x.jsx)(d.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.lastEditedOn.title",defaultMessage:"Last edited on"});default:(0,c.t1)(p)}const e=(0,u.Hq)(y),t=g._Q(e,m,o.sF);switch(p){case"createdTime":return(0,x.jsx)(d.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.createdOn.titleWithDateRange",defaultMessage:"Created on: {dateRangeString}",values:{dateRangeString:t}});case"lastEditedTime":return(0,x.jsx)(d.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.lastEditedOn.titleWithDateRange",defaultMessage:"Last edited on: {dateRangeString}",values:{dateRangeString:t}});default:(0,c.t1)(p)}}),[y,p,m]);return(0,x.jsx)(f.Z,{header:(0,x.jsx)(b,{selectedItem:p,setSelectedItem:function(e){h(e)}}),mode:v.z.Pill,focused:!1,hideTime:!0,pillTitle:M,title:M,icon:r.C,value:y,showButtons:"footer",onChange:e=>{_(e)}})}function b(e){let{selectedItem:t,setSelectedItem:a}=e;const s=(0,i.yK)((e=>({button:{margin:"14px 12px 4px",padding:"2px 8px",width:"fit-content",borderRadius:4},text:{display:"flex",alignItems:"center",color:e.mediumTextColor,fill:e.lightIconColor,fontWeight:500,fontSize:13},icon:{height:10,width:10,marginLeft:4}})),[]),n={width:190,items:["createdTime","lastEditedTime"],selectedItem:t,getKey:e=>e,onSelect:e=>a(e),renderItem:e=>(0,x.jsx)(p.Z,{title:_(e.value),...e}),renderOrigin:e=>(0,x.jsx)(m.Z,{...e,style:s.button,children:(0,x.jsxs)("div",{style:s.text,children:[_(t),(0,l.i)(s.icon)]})})};return(0,x.jsx)(h.Z,{...n,mobileActionSheet:!0})}function _(e){return{lastEditedTime:(0,x.jsx)(d.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.lastEditedOn.option",defaultMessage:"Last edited on"}),createdTime:(0,x.jsx)(d.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.createdOn.option",defaultMessage:"Created on"})}[e]}},166994:(e,t,a)=>{a.d(t,{O:()=>p,p:()=>g});var s=a(667294),n=a(724405),i=a(849019),o=a(709291),r=a(653965),l=a(433929),d=a(374194),c=a(158297),u=a(785893);let g=function(e){return e.OnChange="on-change",e.Button="button",e}({});const m=(0,o.defineMessages)({placeholder:{id:"adminContentSearchTab.pagesTable.filters.query.placeholder",defaultMessage:"Search by page ID, title or content"}});function p(e){let{mode:t,query:a,setQueryFilter:p,placeholderText:h,disabled:f}=e;const[v,x]=(0,s.useState)(a??""),y=function(e){return(0,n.yK)((t=>({searchIcon:{color:t.lightIconColor,width:14},input:{padding:"4px 4px 4px 10px",margin:"0 auto 8px",width:"100%",background:t.modalBackground,opacity:e?.5:1},button:{opacity:e?.5:1}})),[e])}(f),b=(0,s.useMemo)((()=>(0,r.Ds)(p,500)),[p]),_=(0,s.useCallback)((e=>{x(e.target.value),t===g.OnChange&&b(e.target.value)}),[b,t]);return(0,u.jsx)(d.Z,{value:v,style:y.input,left:(0,i.e)(y.searchIcon),placeholder:h||l.default.formatMessage(m.placeholder),focus:!f&&void 0,onChange:_,onSubmit:()=>p(v),disabled:f,right:t===g.Button?(0,u.jsx)(c.Z,{onClick:()=>p(v),disabled:f,style:y.button,children:(0,u.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.query.searchButton",defaultMessage:"Search"})}):null})}},235389:(e,t,a)=>{a.d(t,{p:()=>I});a(757658);var s=a(667294),n=a(886628),i=a(724405),o=a(984619),r=a(526774),l=a(709291),d=a(401898),c=a(45257),u=a(433929),g=a(460709),m=a(195697),p=a(223196),h=a(229798),f=a(274016),v=a(552275),x=a(478140),y=a(632163),b=a(489728),_=a(953437),M=a(158297),w=a(672495),C=a(164369),j=a(346978),S=a(991642),T=a(685567),k=a(100719),F=a(785893);const N=(0,l.defineMessages)({placeholder:{id:"adminContentSearchTab.pagesTable.filters.teams.placeholder",defaultMessage:"Search for teamspaces..."}});function I(e){let{selectedTeamIds:t,setSelectedTeamIds:a,onMenuClose:I,teamStores:E}=e;const P=(0,n.qz)(void 0,h.Z),R=(0,i.yK)((e=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center"},optionAvatar:{marginRight:4},pillContainer:{margin:"0px 6px 6px 0px",background:e.legacyDefaultSelectColor,height:20},pillContents:{display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:4},pillText:{marginLeft:4},container:{padding:"6px 0 6px"},input:{margin:"4px auto",width:"95%"},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex"},icon:{width:16,marginRight:4,fill:"currentColor"},teamIcon:{marginRight:8},optionTitle:{display:"block"},noResultsMessage:{width:"100%",margin:"8px 12px"},optionCaption:{display:"block",color:e.mediumTextColor,fontSize:12,lineHeight:"15px"}})),[]),[D,V]=(0,s.useState)(!1),[Z,L]=(0,s.useState)(""),B=(0,n.VK)((()=>[...E].sort(m.KP)),[E]),U=(0,n.VK)((()=>t.map((e=>E.find((t=>t.id===e)))).filter(d.$K)),[E,t]);function O(){V(!1),L(""),I()}function z(){L(""),a([])}function q(e){const s=t.includes(e)?[]:[e];a(s),L("")}const K=(0,s.useCallback)((e=>{L(e.target.value)}),[]),W=(0,n.VK)((()=>U.map((e=>{const s=e.getName();return(0,F.jsx)(T.Z,{isSingle:!0,format:o.lo.Inline,showRemoveButton:!0,onClickRemove:()=>{const s=t.filter((t=>t!==e.id));a(s)},style:R.pillContainer,value:(0,F.jsxs)("div",{style:R.pillContents,children:[(0,F.jsx)(f.p,{disabled:!0,store:e,size:16}),(0,F.jsx)(C.Z,{style:R.pillText,children:s})]})},e.id)}))),[U,t,a,R]);const H=(0,F.jsx)(c.Z,{on:t.length>0,icon:(0,r.O)(R.icon),title:(0,F.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.title",defaultMessage:"Teamspace"}),onClick:()=>V(!0)});return(0,F.jsx)(S.Z,{children:(0,F.jsx)(_.ZP,{popupType:p.k.Popup,placementToOrigin:_.ZP.Placement.Bottom,alignmentToOrigin:_.ZP.Alignment.Start,open:D,render:function(){const e=[];for(const n of B){const a=n.getName(),s=n.getTeamAccessLevel(),i=n.isDefault();a&&a.toLocaleLowerCase().includes(Z)&&e.push({key:n.id,action:()=>q(n.id),render:e=>(0,F.jsx)(v.Z,{...e,icon:(0,F.jsx)(j.Z,{isSelected:t.includes(n.id)}),focused:!1,title:(0,F.jsxs)("div",{style:R.optionContainer,children:[(0,F.jsx)(f.p,{disabled:!0,store:n,size:24,style:R.teamIcon}),(0,F.jsxs)("div",{style:{paddingTop:4,paddingBottom:4},children:[(0,F.jsx)(C.Z,{style:R.optionTitle,children:a}),(0,F.jsx)(C.Z,{style:R.optionCaption,children:A(s,i)})]})]})})})}const a={key:"no-results",action:()=>{},render:e=>(0,F.jsx)(C.Z,{isSecondaryColor:!0,style:R.noResultsMessage,...e,children:(0,F.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.noResultsMessage",defaultMessage:"No results found."})})},s={key:"teamOptions",items:e.length>0?e:[a],render:e=>(0,F.jsx)(w.Z,{...e,title:null,loading:!1})};return(0,F.jsxs)("div",{style:R.container,children:[(0,F.jsx)(k.Z,{focus:!0,value:Z,style:R.input,placeholder:u.default.formatMessage(N.placeholder),onChange:K,onRemoveLastToken:z,tokens:W}),(0,F.jsx)(x.Z,{menuType:g.og.Popup,header:null,maxHeight:250,width:300,children:(0,F.jsx)(y.Z,{type:y.i.Vertical,store:P,initialFocus:0,sections:[s]})}),(0,F.jsxs)(w.Z,{topBorder:!0,style:R.footer,children:[(0,F.jsx)(b.Z,{onClick:z,children:(0,F.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.clearButton",defaultMessage:"Clear"})}),(0,F.jsx)(M.Z,{onClick:O,children:(0,F.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.doneButton",defaultMessage:"Done"})})]})]})},onDismiss:O,keepFocus:!0,origin:H,preventScaleTransition:!0})})}function A(e,t){if(t)return(0,F.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.default",defaultMessage:"Default"});switch(e){case"private":return(0,F.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.private",defaultMessage:"Private"});case"closed":return(0,F.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.closed",defaultMessage:"Closed"});case"open":return(0,F.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.open",defaultMessage:"Open"});default:(0,d.t1)(e)}}},957702:(e,t,a)=>{a.d(t,{B:()=>L});a(757658);var s=a(667294),n=a(886628),i=a(724405),o=a(984619),r=a(40462),l=a(222686),d=a(526774),c=a(307928),u=a(709291),g=a(401898),m=a(45257),p=a(433929),h=a(460709),f=a(516639),v=a(223196),x=a(80444),y=a(229798),b=a(552275),_=a(260458),M=a(478140),w=a(632163),C=a(489728),j=a(953437),S=a(158297),T=a(731278),k=a(543145),F=a(672495),N=a(164369),I=a(45653),A=a(346978),E=a(991642),P=a(685567),R=a(100719),D=a(785893);const V=(0,u.defineMessages)({usersPlaceholder:{id:"adminContentSearchTab.pagesTable.filters.users.usersPlaceholder",defaultMessage:"Search for users..."},usersAndGroupsPlaceholder:{id:"adminContentSearchTab.pagesTable.filters.users.usersAndGroupsPlaceholder",defaultMessage:"Search for users and groups..."}}),Z=10;function L(e){let{userStores:t,title:a,selectedItems:L,setSelectedItems:B,onMenuClose:U,isMultiSelect:O,includePermissionGroups:z,guestUserIdSet:q}=e;const K=(0,u.useIntl)(),W=(0,n.qz)(void 0,y.Z),H=(0,i.yK)((e=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center"},optionAvatar:{marginRight:8},container:{padding:"6px 0 6px"},input:{margin:"4px auto",width:"95%",maxHeight:200,overflowY:"auto"},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex"},icon:{width:16,marginRight:4,fill:"currentColor"},defaultGroupIcon:{height:22,width:22,color:e.mediumTextColor,fill:"currentColor"},defaultGroupIconPill:{height:14,width:14,color:e.mediumTextColor,fill:"currentColor"},groupIconSpacing:{marginRight:8},pillContainer:{margin:"0px 6px 6px 0px",background:e.legacyDefaultSelectColor,height:20},guestPillContainer:{margin:"0px 6px 6px 0px",background:e.guestTokenBackground,height:20},guestIcon:{height:16,width:16,color:e.guestIconColor},pillContents:{display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},pillText:{marginLeft:4},noResultsMessage:{width:"100%",margin:"8px 12px"},optionTitle:{display:"block"},optionCaption:{display:"block",color:e.mediumTextColor,fontSize:12,lineHeight:"15px"}})),[]),[G,$]=(0,s.useState)(Z),[Q,Y]=(0,s.useState)(!1),[J,X]=(0,s.useState)(""),ee=t.length,te=(0,n.VK)((()=>x.default.state.currentSpaceStore),[]),ae=(0,s.useMemo)((()=>L.map((e=>{let{id:t}=e;return t}))),[L]),se=(0,n.VK)((()=>{const e=x.default.state.currentSpaceStore;return z&&e?e.getPermissionGroups():[]}),[z]),ne=(0,n.VK)((()=>ae.map((e=>t.find((t=>t.id===e)))).filter(g.$K)),[ae,t]),ie=(0,n.VK)((()=>ae.map((e=>se.find((t=>t.id===e)))).filter(g.$K)),[ae,se]);function oe(){$(Z),Y(!1),X(""),U()}function re(){X(""),B([])}function le(e){e<5&&G<ee&&$(G+Z)}function de(e){if(O){return ae.includes(e.id)?[...L.filter((t=>{let{id:a}=t;return a!==e.id}))]:[...L,e]}return ae.includes(e.id)?[]:[e]}function ce(e){const t=de({id:e,type:"user"});B(t),X("")}function ue(e){const t=de({id:e,type:"permission_group"});B(t),X("")}const ge=(0,s.useCallback)((e=>{X(e.target.value)}),[]),me=(0,n.VK)((()=>ne.map((e=>{const t=(0,c.Nz)(K,e.getModel()),a=!!q&&q.has(e.id);return(0,D.jsx)(P.Z,{isSingle:!0,format:o.lo.Inline,showRemoveButton:!0,onClickRemove:()=>{const t=ae.filter((t=>t!==e.id)).map((e=>({id:e,type:"user"})));B(t)},style:a?H.guestPillContainer:H.pillContainer,value:(0,D.jsxs)("div",{style:H.pillContents,children:[a?(0,r.o)(H.guestIcon):(0,D.jsx)(I.Z,{userStore:e,size:16}),(0,D.jsx)(N.Z,{style:H.pillText,children:t})]})},e.id)}))),[ae,ne,B,q,H,K]),pe=(0,n.VK)((()=>ie.map((e=>{const t=f.kF({intl:K,group:e});return(0,D.jsx)(P.Z,{isSingle:!0,format:o.lo.Inline,showRemoveButton:!0,onClickRemove:()=>{const t=ae.filter((t=>t!==e.id)).map((e=>({id:e,type:"permission_group"})));B(t)},style:H.pillContainer,value:(0,D.jsxs)("div",{style:H.pillContents,children:[(0,D.jsx)(T.Z,{disabled:!0,icon:e.icon&&te?{pointer:te.pointer,icon:e.icon}:void 0,size:14,isEmptyPage:!1,title:t,defaultIcon:(0,d.O)(H.defaultGroupIconPill),style:H.groupIconSpacing}),(0,D.jsx)(N.Z,{style:H.pillText,children:t})]})},e.id)}))),[ae,ie,B,H,te,K]);const he=(0,D.jsx)(m.Z,{on:ae.length>0,icon:(0,l.f)(H.icon),title:a,onClick:()=>Y(!0)});return(0,D.jsx)(E.Z,{children:(0,D.jsx)(j.ZP,{popupType:v.k.Popup,placementToOrigin:j.ZP.Placement.Bottom,alignmentToOrigin:j.ZP.Alignment.Start,open:Q,render:function(){const e=[];for(const r of t){var a;const t=(0,c.Nz)(K,r.getModel()),s=!!q&&q.has(r.id);(t.toLocaleLowerCase().includes(J)||null!==(a=r.getEmail())&&void 0!==a&&a.toLocaleLowerCase().includes(J))&&e.push({key:r.id,action:()=>ce(r.id),render:e=>(0,D.jsx)(b.Z,{...e,icon:O?(0,D.jsx)(_.Z,{checked:ae.includes(r.id),onClick:()=>ce(r.id),size:16}):(0,D.jsx)(A.Z,{isSelected:ae.includes(r.id)}),focused:!1,title:(0,D.jsxs)("div",{style:H.optionContainer,children:[(0,D.jsx)(I.Z,{userStore:r,size:24,style:H.optionAvatar}),(0,D.jsxs)("div",{style:{paddingTop:4,paddingBottom:4},children:[(0,D.jsx)(N.Z,{style:H.optionTitle,children:t}),(0,D.jsx)(N.Z,{style:H.optionCaption,children:s?(0,D.jsx)(u.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.users.guestCaption",defaultMessage:"Guest"}):(0,D.jsx)(u.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.users.memberCaption",defaultMessage:"Member"})})]})]})})})}const s=[];for(const t of se){const e=f.kF({intl:K,group:t});e.toLocaleLowerCase().includes(J)&&s.push({key:t.id,action:()=>ue(t.id),render:a=>(0,D.jsx)(b.Z,{...a,icon:O?(0,D.jsx)(_.Z,{checked:ae.includes(t.id),onClick:()=>ue(t.id),size:16}):(0,D.jsx)(A.Z,{isSelected:ae.includes(t.id)}),focused:!1,title:(0,D.jsxs)("div",{style:H.optionContainer,children:[(0,D.jsx)(T.Z,{disabled:!0,icon:t.icon&&te?{pointer:te.pointer,icon:t.icon}:void 0,size:22,isEmptyPage:!1,title:e,defaultIcon:(0,d.O)(H.defaultGroupIcon),style:H.groupIconSpacing}),(0,D.jsxs)("div",{style:{paddingTop:4,paddingBottom:4},children:[(0,D.jsx)(N.Z,{style:H.optionTitle,children:e}),(0,D.jsx)(N.Z,{style:H.optionCaption,children:(0,D.jsx)(u.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.users.groupCaption",defaultMessage:"Group"})})]})]})})})}const n={key:"no-results",action:()=>{},render:e=>(0,D.jsx)(N.Z,{isSecondaryColor:!0,style:H.noResultsMessage,...e,children:(0,D.jsx)(u.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.users.noResultsMessage",defaultMessage:"No results found."})})},i=[...e,...s],o={key:"userOptions",items:i.length>0?i.slice(0,G):[n],render:e=>(0,D.jsx)(F.Z,{...e,title:null,loading:!1})};return(0,D.jsxs)("div",{style:H.container,children:[(0,D.jsx)(R.Z,{focus:!0,value:J,style:H.input,placeholder:p.default.formatMessage(z?V.usersAndGroupsPlaceholder:V.usersPlaceholder),onChange:ge,onRemoveLastToken:()=>{const e=L.slice(0,-1);B(e)},tokens:[...me,...pe]}),(0,D.jsxs)(M.Z,{menuType:h.og.Popup,header:null,maxHeight:250,width:300,children:[(0,D.jsx)(w.Z,{type:w.i.Vertical,store:W,initialFocus:0,sections:[o]}),(0,D.jsx)(k.Z,{onChange:le})]}),(0,D.jsxs)(F.Z,{topBorder:!0,style:H.footer,children:[(0,D.jsx)(C.Z,{onClick:re,children:(0,D.jsx)(u.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.users.clearButton",defaultMessage:"Clear"})}),(0,D.jsx)(S.Z,{onClick:oe,children:(0,D.jsx)(u.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.users.doneButton",defaultMessage:"Done"})})]})]})},onDismiss:oe,keepFocus:!0,origin:he,preventScaleTransition:!0})})}},134690:(e,t,a)=>{a.d(t,{N:()=>h});a(667294);var s=a(886628),n=a(724405),i=a(16184),o=a(526774),r=a(186517),l=a(772141),d=a(709291),c=a(798165),u=a(969219),g=a(236409),m=a(785893),p=function(e){return e.Shared="shared",e.Private="private",e.Hidden="hidden",e}(p||{});function h(e){let{blockStore:t,teamStore:a}=e;const h=(0,n.yK)((e=>({icon:{height:18,width:18,color:e.lightIconColor,fill:"currentColor"}})),[]),f=(0,s.VK)((()=>{const e=(0,c.fJ)(t),a=(0,r.Wo)(e),s=a.filter((e=>!(0,l.Le)(e)));return 1===s.length&&(0,l.jg)(s[0])?p.Private:a.length>0?p.Shared:p.Hidden}),[t]);return a?(0,m.jsx)(g.r,{useThinTitle:!0,teamStore:a}):function(){switch(f){case p.Shared:return(0,m.jsx)(u.iP,{useThinTitle:!0,icon:(0,o.O)(h.icon),title:(0,m.jsx)(d.FormattedMessage,{id:"adminContentSearchTab.pagesTable.locationCell.shared",defaultMessage:"Shared"})});case p.Hidden:case p.Private:return(0,m.jsx)(u.iP,{useThinTitle:!0,icon:(0,i.Q)(h.icon),title:(0,m.jsx)(d.FormattedMessage,{id:"adminContentSearchTab.pagesTable.locationCell.private",defaultMessage:"Private"})})}}()}},577883:(e,t,a)=>{a.d(t,{t:()=>l});a(667294);var s=a(886628),n=a(519889),i=a(206258),o=a(717290),r=a(785893);function l(e){let{blockStore:t,userIds:a,isClickable:l}=e;const d=(0,s.VK)((()=>a.map((e=>i.U6.createChildStore(t,{table:n.KJ,id:e})))),[t,a]);return(0,r.jsx)(o.G,{userStores:d,isClickable:l})}},62944:(e,t,a)=>{a.d(t,{a:()=>Ct,Z:()=>jt});var s=a(667294),n=a(800480),i=a(886628),o=a(709291),r=a(788632),l=a(319385),d=a(992083),c=a(164369),u=a(942402),g=a(427386),m=a(723189),p=a(724405),h=a(436610),f=a(461652),v=a(863296),x=a(785893);function y(e){let{spaceId:t,filters:a,disabled:i}=e;const[r,l]=(0,s.useState)(!1),d=(0,n.O7)(),c=i||r,u=(0,p.yK)((e=>({button:{opacity:c?.5:1}})),[c]);return(0,x.jsx)(v.Z,{style:u.button,disabled:c,onClick:async function(){l(!0),h.j_(d,{filters:a}),await f.gJ(d,{spaceId:t,filters:a}),l(!1)},children:(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.export",defaultMessage:"Export results"})})}var b=a(798165),_=a(674451),M=a(80444),w=a(288280),C=a(740394),j=a(568785),S=a(271291),T=a(844678),k=a(844495),F=a(16184),N=a(137810),I=a(412714),A=a(310259),E=a(918514),P=a(489728),R=a(158297);function D(e){const t=(0,n.O7)(),a=(0,p.yK)((e=>({container:{marginTop:48,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},headerIcon:{width:36,height:36,color:e.lightTextColor,fill:"currentColor"},disclaimerTitle:{margin:"12px auto",fontWeight:N.Z.fontWeight.medium,fontSize:16},disclaimer:{fontWeight:N.Z.fontWeight.regular,fontSize:14,color:e.lightTextColor,textAlign:"center",width:432,margin:"0 auto 16px"},acknowledgeButton:{width:195,margin:"8px auto 0"},learnMoreButton:{width:195,margin:"8px auto 0",justifyContent:"center",color:e.lightTextColor},learnMoreButtonIcon:{width:12,height:12,marginRight:4}})),[]),i=(0,s.useCallback)((()=>{h.vN(t),A.NY(t)}),[t]);return(0,x.jsxs)("div",{style:a.container,children:[(0,F.Q)(a.headerIcon),(0,x.jsx)("h1",{style:a.disclaimerTitle,children:(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.acknowledgement.disclaimerTitle",defaultMessage:"Before using this feature"})}),(0,x.jsx)("p",{style:a.disclaimer,children:(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.acknowledgement.disclaimer",defaultMessage:"As a workspace owner, you can use content search to find pages that you don't have access to, including the private pages of other workspace members. Consult with your organization's legal department on how to use this feature. Actions taken here will be recorded in the audit log."})}),(0,x.jsx)(R.Z,{style:a.acknowledgeButton,onClick:i,children:(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.acknowledgement.confirm",defaultMessage:"Acknowledge"})}),(0,x.jsxs)(P.Z,{style:a.learnMoreButton,onClick:()=>{const e=(0,E.UY)("adminContentSearch");I.D({environment:t,url:e})},children:[(0,k.D)(a.learnMoreButtonIcon),(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.acknowledgement.learnMore",defaultMessage:"Learn more"})]})]})}var V=a(73075),Z=a(80721),L=a(526774),B=a(401898),U=a(45257),O=a(460709),z=a(223196),q=a(229798),K=a(552275),W=a(260458),H=a(478140),G=a(632163),$=a(953437),Q=a(672495),Y=a(991642);function J(e){let{allOptions:t,selectedOptions:a,setSelectedOption:n,onMenuClose:r,pillIcon:l,setPillTitleStringToActiveSelection:d,getFormattedStringTitle:c,getFormattedStringCaption:u,getPillTitle:g}=e;const m=(0,i.qz)(void 0,q.Z),h=(0,p.yK)((e=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center"},optionAvatar:{marginRight:4},container:{padding:"6px 0 6px"},input:{margin:"4px auto",width:"95%"},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex"},icon:{width:16,marginRight:4,fill:"currentColor"},teamIcon:{marginRight:8}})),[]),[f,v]=(0,s.useState)(!1);function y(){v(!1),r&&r()}function b(){n&&n([])}function _(e){const t=a.includes(e)?[...a.filter((t=>t!==e))]:[...a,e];n&&n(t)}const M=(0,x.jsx)(U.Z,{on:a.length>0,icon:l(h.icon),title:d&&a[0]?g(a):g([]),onClick:()=>v(!0),disabled:!n,hideChevron:!n});return n?(0,x.jsx)(Y.Z,{children:(0,x.jsx)($.ZP,{popupType:z.k.Popup,placementToOrigin:$.ZP.Placement.Bottom,alignmentToOrigin:$.ZP.Alignment.Start,open:f,render:function(){const e={key:"menuOptions",items:Array.from(t).map((e=>({key:e,action:()=>_(e),render:t=>(0,x.jsx)(K.Z,{...t,icon:(0,x.jsx)(W.Z,{checked:a.includes(e),onClick:()=>_(e),size:16}),focused:!1,title:c(e),caption:u(e),shouldWrapCaption:!0})}))),render:e=>(0,x.jsx)(Q.Z,{...e,title:null,loading:!1})};return(0,x.jsxs)("div",{style:h.container,children:[(0,x.jsx)(H.Z,{menuType:O.og.Popup,header:null,maxHeight:250,width:300,children:(0,x.jsx)(G.Z,{type:G.i.Vertical,store:m,initialFocus:0,sections:[e]})}),(0,x.jsxs)(Q.Z,{topBorder:!0,style:h.footer,children:[(0,x.jsx)(P.Z,{onClick:b,children:(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.clearButton",defaultMessage:"Clear"})}),(0,x.jsx)(R.Z,{onClick:y,children:(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.doneButton",defaultMessage:"Done"})})]})]})},onDismiss:y,keepFocus:!0,origin:M,preventScaleTransition:!0})}):M}function X(e){let{selectedAudience:t,setSelectedAudience:a,onMenuClose:s,setPillTitleStringToActiveSelection:n}=e;const i=new Set(["private","shared_internally","shared_externally","shared_to_web"]);return(0,x.jsx)(J,{allOptions:i,getFormattedStringCaption:ae,getFormattedStringTitle:te,getPillTitle:ee,selectedOptions:t,setSelectedOption:a,pillIcon:L.O,onMenuClose:s,setPillTitleStringToActiveSelection:n})}function ee(e){return e[0]?te(e[0]):(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.title",defaultMessage:"Audience"})}function te(e){switch(e){case"private":return(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.label.private",defaultMessage:"Private"});case"shared_externally":return(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.label.external",defaultMessage:"Shared externally"});case"shared_internally":return(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.label.internal",defaultMessage:"Shared internally"});case"shared_to_web":return(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.label.publishedToWeb",defaultMessage:"Shared to web"});default:(0,B.t1)(e)}}function ae(e){switch(e){case"private":return(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.private",defaultMessage:"Pages that only a single workspace member has access to."});case"shared_externally":return(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.external",defaultMessage:"Pages that are shared with guests or connections."});case"shared_internally":return(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.internal",defaultMessage:"Pages that are shared with other workspace members."});case"shared_to_web":return(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.publishedToWeb",defaultMessage:"Pages that are available for anyone to see on the web."});default:(0,B.t1)(e)}}function se(e){let{filters:t,setFilters:a}=e;const s=(0,p.yK)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},title:{margin:"12px auto",fontWeight:N.Z.fontWeight.medium,fontSize:16},description:{fontWeight:N.Z.fontWeight.regular,fontSize:14,color:e.lightTextColor,textAlign:"center",width:386,margin:"0 auto 16px"},suggestion:{position:"relative",height:38,width:440,margin:"12px auto 0",justifyContent:"center",color:e.darkTextColor,boxShadow:e.borderBoxShadow},filterContainer:{margin:"0 8px",display:"flex",alignItems:"center",justifyContent:"center"},arrowIconContainer:{position:"absolute",right:12,transform:"rotate(180deg)"},arrowIcon:{width:18,height:18,opacity:.5,color:e.lightTextColor,fill:"currentColor"}})),[]);return(0,x.jsxs)("div",{style:s.container,children:[(0,x.jsx)("h1",{style:s.title,children:(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.suggestions.title",defaultMessage:"Search pages in your workspace"})}),(0,x.jsx)("p",{style:s.description,children:(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.suggestions.description",defaultMessage:"Use filters to find pages with specific sharing and permissions settings, such as:"})}),(0,x.jsxs)(P.Z,{style:s.suggestion,onClick:function(){a({query:"",lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},audience:["shared_externally"],teamIds:[]},{runSearchAfter:!0})},children:[(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.suggestions.sharedToWeb",defaultMessage:"Search for pages <filter></filter>",values:{filter:()=>(0,x.jsx)("div",{style:s.filterContainer,children:(0,x.jsx)(X,{setPillTitleStringToActiveSelection:!0,selectedAudience:["shared_externally"]})})}}),(0,x.jsx)("div",{style:s.arrowIconContainer,children:(0,Z.W)(s.arrowIcon)})]}),(0,x.jsxs)(P.Z,{style:s.suggestion,onClick:function(){a({query:"",lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},audience:["shared_to_web"],teamIds:[]},{runSearchAfter:!0})},children:[(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.suggestions.sharedToWeb",defaultMessage:"Search for pages <filter></filter>",values:{filter:()=>(0,x.jsx)("div",{style:s.filterContainer,children:(0,x.jsx)(X,{setPillTitleStringToActiveSelection:!0,selectedAudience:["shared_to_web"]})})}}),(0,x.jsx)("div",{style:s.arrowIconContainer,children:(0,Z.W)(s.arrowIcon)})]})]})}var ne=a(153855),ie=a(969219);function oe(e){let{deletedFromTrashTime:t,movedToTrashTime:a}=e;const s=t||a;return(0,B.$K)(s)?(0,x.jsx)(S.T,{dateTs:s}):(0,x.jsx)(ie.iP,{useThinTitle:!0,title:(0,x.jsx)(o.FormattedMessage,{defaultMessage:"N/A",id:"adminContentSearchTab.pagesTable.deletedTimeCell.notAvailable"})})}var re=a(134690),le=a(356666),de=a(296994),ce=a(28578),ue=a(61766),ge=a(655899),me=a(8675),pe=a(231945),he=a(573063),fe=a(640833),ve=a(743261),xe=a(705540);function ye(e){const{pageStatus:t,blockStore:a}=e;switch(t){case"alive":case"in_trash":return(0,x.jsx)(be,{pageStatus:t,blockStore:a});case"deleted_from_trash":return(0,x.jsx)(_e,{pageStatus:t,blockStore:a,getValidDeletedPermissions:e.getValidDeletedPermissions});default:(0,B.t1)(t)}}function be(e){let{blockStore:t,pageStatus:a}=e;const o=(0,i.qz)(void 0,ue.Z),r=(0,n.O7)(),l=(0,i.qz)(void 0,me.Z),d=(0,i.qz)(void 0,ge.ZP),c=(0,xe.T)(),[u,g]=(0,s.useState)(!1);(0,s.useEffect)((()=>{l.setState({...l.state,privatePageStore:t,changePermissionsEnabled:!0,loading:!1,error:void 0})}),[t,l]);const m=(0,ve.e)({environment:r,blockStore:t,pageStatus:a,popupStore:o,handleOpenPermissionsMenu:()=>g(!0)});return(0,x.jsx)(pe.ZP,{popupType:$.kQ.Popup,alignmentToOrigin:$.ZP.Alignment.Center,placementToOrigin:$.ZP.Placement.Right,style:u?c.popupShareModal:c.popupMenu,render:()=>u?(0,x.jsx)(de._e,{store:t,sudoModeStore:l,inviteTargetsStore:d,location:"admin_content_search"}):(0,x.jsx)(H.Z,{menuType:O.og.Popup,width:248,children:(0,x.jsx)(G.Z,{type:G.i.Vertical,initialFocus:void 0,sections:m})}),onClose:()=>{g(!1),ce.ZP.reset()},buttonPopupStore:o,renderOrigin:e=>(0,x.jsx)(he.Z,{ariaLabel:"3 dot menu for actions to apply to a page",icon:le.o,...e})})}function _e(e){let{blockStore:t,getValidDeletedPermissions:a}=e;const i=(0,s.useCallback)((e=>(0,x.jsx)(he.Z,{ariaLabel:"3 dot menu for actions to apply to a deleted from trash page",icon:le.o,...e})),[]),o=(0,n.O7)();return(0,x.jsx)(fe.L,{environment:o,renderPopupOrigin:i,blockStore:t,placementToOrigin:$.ZP.Placement.Right,includeNonRestoreActions:!0,getValidDeletedPermissions:a})}var Me=a(378168),we=a(937612),Ce=a(619584),je=a(825464),Se=a(690403),Te=a(526388);function ke(e){let{pageStatus:t,blockStore:a}=e;const s=(0,p.yK)((e=>({grayBadge:{width:"fit-content",whiteSpace:"nowrap",display:"flex",flexDirection:"row"},trashIcon:{marginRight:2,height:12,width:12}})),[]),{deleteFromTrashDelayMs:n,purgeDelayMs:r}=(0,i.VK)((()=>{const e=a.getSpaceStore();return{deleteFromTrashDelayMs:((null==e?void 0:e.getSettings().delete_from_trash_delay_seconds)??Me.A7)*Ce.C0,purgeDelayMs:((null==e?void 0:e.getSettings().purge_delay_seconds)??Me.vF)*Ce.C0}}),[a]),l=(0,i.VK)((()=>{if("in_trash"===t){const e=(0,b.fJ)(a);return(0,Me.xR)(e)}}),[a,t]),d=(0,i.VK)((()=>{if("deleted_from_trash"===t){const e=(0,b.fJ)(a);return(0,Me.A1)(e)}}),[a,t]);switch(t){case"alive":return null;case"in_trash":return Date.now()>=(l??Me.iv)+n?(0,x.jsx)(Fe,{}):(0,x.jsx)(Se.Z,{style:s.grayBadge,content:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{children:(0,we.y)(s.trashIcon)}),(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearch.pageStatusBadge.trash",defaultMessage:"In Trash"})]})});case"deleted_from_trash":return Date.now()>=(d??Me.iv)+r?(0,x.jsx)(Fe,{}):(0,x.jsx)(Se.Z,{style:s.grayBadge,content:(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearch.pageStatusBadge.retained",defaultMessage:"Retained"})});default:(0,B.t1)(t)}}function Fe(){const e=(0,p.yK)((e=>({redBadge:{color:e.text.uiRedPrimary,backgroundColor:e.fill.red,width:"fit-content",whiteSpace:"nowrap"},secondaryTooltip:{color:e.mediumInvertedTextColor}})),[]);return(0,x.jsx)(Te.Z,{renderTooltip:()=>(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearch.pageStatusBadge.deletionPending.tooltip",defaultMessage:"<primary>This page will be deleted soon </primary> <secondary>Pages in the Trash are automatically deleted after 30 days</secondary>",values:{primary:e=>(0,x.jsx)("div",{children:e}),secondary:t=>(0,x.jsx)("div",{style:e.secondaryTooltip,children:t})}}),placement:je.u.Bottom,render:t=>(0,x.jsx)("div",{...t,children:(0,x.jsx)(Se.Z,{style:e.redBadge,content:(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearch.pageStatusBadge.deletionPending",defaultMessage:"Deletion in progress"})})})})}function Ne(e){let{pageStatus:t}=e;return(0,x.jsx)(ie.iP,{useThinTitle:!0,title:Ie(t)})}function Ie(e){switch(e){case"alive":return(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.pageStatusCell.active",defaultMessage:"Active"});case"in_trash":return(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.pageStatusCell.trash",defaultMessage:"In Trash"});case"deleted_from_trash":return(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.pageStatusCell.retained",defaultMessage:"Retained"});default:(0,B.t1)(e)}}var Ae=a(173587),Ee=a(577883);const Pe={id:"page",headerTitle:(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.page.name",defaultMessage:"Page"}),renderCell:e=>(0,x.jsx)(T.o,{blockStore:e.pageStore,rightIcon:(0,x.jsx)(ye,{blockStore:e.pageStore,pageStatus:e.pageStatus,getValidDeletedPermissions:e.filterDeletedPermissions}),inlineTitleContent:(0,x.jsx)(ke,{pageStatus:e.pageStatus,blockStore:e.pageStore})}),widthData:{width:320,maxWidth:320},sortable:!1},Re={id:"location",headerTitle:(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.location.name",defaultMessage:"Location"}),renderCell:e=>(0,x.jsx)(re.N,{blockStore:e.pageStore,teamStore:e.teamStore}),widthData:{width:140},sortable:!1},De={id:"createdTime",headerTitle:(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.createdTime.name",defaultMessage:"Created on"}),renderCell:e=>(0,x.jsx)(S.T,{dateTs:e.createdTime}),widthData:{width:140},sortable:!1},Ve={id:"lastEditedTime",headerTitle:(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.lastEditedTime.name",defaultMessage:"Last edited on"}),renderCell:e=>(0,x.jsx)(S.T,{dateTs:e.lastEditedTime}),widthData:{width:140},sortable:!1},Ze={id:"createdBy",headerTitle:(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.createdBy.name",defaultMessage:"Created by"}),renderCell:e=>e.createdById?(0,x.jsx)(Ee.t,{blockStore:e.pageStore,userIds:[e.createdById]}):null,widthData:{width:140},sortable:!1},Le={id:"lastEditedBy",headerTitle:(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.lastEditedBy.name",defaultMessage:"Last edited by"}),renderCell:e=>e.lastEditedById?(0,x.jsx)(Ee.t,{blockStore:e.pageStore,userIds:[e.lastEditedById]}):null,widthData:{width:140},sortable:!1},Be={id:"audience",headerTitle:(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.audience.name",defaultMessage:"Audience"}),renderCell:e=>(0,x.jsx)(ne.A,{blockStore:e.pageStore}),widthData:{width:140},sortable:!1},Ue={id:"sharedWith",headerTitle:(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWith.name",defaultMessage:"Shared with"}),renderCell:e=>(0,x.jsx)(Ae.v,{blockStore:e.pageStore}),widthData:{width:140},sortable:!1},Oe={id:"deletedTime",headerTitle:(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.deletedOn.name",defaultMessage:"Deleted on"}),renderCell:e=>(0,x.jsx)(oe,{movedToTrashTime:"alive"===e.pageStatus?void 0:e.lastEditedTime,deletedFromTrashTime:e.deletedFromTrashTime}),widthData:{width:140},sortable:!1},ze={id:"pageStatus",headerTitle:(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.pageStatus.name",defaultMessage:"Page status"}),renderCell:e=>(0,x.jsx)(Ne,{pageStatus:e.pageStatus}),widthData:{width:140},sortable:!1},qe=[Pe,Re,Be,Ue,Le,Ve,Ze,De],Ke=[Pe,Re,ze,Oe,Be,Ue,Le,Ve,Ze,De];function We(e){let{loading:t,error:a,loadNextPage:n,filters:r,setFilters:d,pageStores:u,showSuggestions:g,runNewSearch:m,hasUserConfirmedAcknowledgement:h}=e;const f=h&&!t&&!g,v=h&&!g,y=(0,i.VK)((()=>l.default.checkGate({gateName:"cdrr_admin_content_search"})),[]),S=(0,i.VK)((()=>w.subscriptionDataStoreInstance.state),[]),T=(0,i.VK)((()=>M.default.state.currentSpaceStore),[]),k=(0,_.$)({spaceStore:T,subscriptionData:S}),F=(0,s.useMemo)((()=>y&&(r.pageStatus.includes("deleted_from_trash")||r.pageStatus.includes("in_trash")||0===r.pageStatus.length)),[y,r.pageStatus]),N=F?Ke:qe,I=(0,i.VK)((()=>u.map((e=>{const t=F&&e.pathIsDead()?e.pathHasDeletedPermission()?"deleted_from_trash":"in_trash":"alive";return{id:e.id,isClickable:!1,pageStore:e,teamStore:(0,b.VP)(e),createdTime:e.getCreatedTime(),lastEditedTime:e.getLastEditedTime(),createdById:e.getCreatedById(),lastEditedById:e.getLastEditedById(),pageStatus:t,deletedFromTrashTime:"deleted_from_trash"===t?e.getDeletedFromTrashAt():void 0,filterDeletedPermissions:"deleted_from_trash"===t?k:void 0}}))),[u,F,k]),A=(0,p.yK)((e=>(0,C.b)({columnRenderInfo:N,theme:e,containerMarginTop:0})),[N]);return a?(0,x.jsx)(V.q,{runNewSearch:m,error:a}):h?g&&0===I.length?(0,x.jsx)(se,{filters:r,setFilters:d}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(C.D,{hideHeaderRowPadding:!0,allowHorizontalScroll:!0,setStickyHeaderRow:!0,maxHeight:400,columnRenderInfo:N,rows:I,onLoadMore:v?n:void 0,renderNoRowsComponent:()=>(0,x.jsx)(c.Z,{isSmall:!0,style:{marginTop:15,marginBottom:40,textAlign:"center"},children:f&&(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.empty",defaultMessage:"No pages found with your query."})}),styles:A}),t?(0,x.jsx)(j.Z,{style:{margin:"24px auto 24px"}}):null]}):(0,x.jsx)(D,{})}var He=a(421697),Ge=a(936550),$e=a(679782),Qe=a(954851);function Ye(e){let{selectedPageStatus:t,setSelectedPageStatus:a,onMenuClose:s}=e;const n=new Set(["alive","in_trash","deleted_from_trash"]);return(0,x.jsx)(J,{pillIcon:Qe.S,allOptions:n,selectedOptions:t,setSelectedOption:a,setPillTitleStringToActiveSelection:!0,onMenuClose:s,getFormattedStringTitle:Je,getFormattedStringCaption:Xe,getPillTitle:et})}function Je(e){switch(e){case"alive":return(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.label.active",defaultMessage:"Active pages"});case"in_trash":return(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.label.inTrash",defaultMessage:"In Trash"});case"deleted_from_trash":return(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.label.retainedPages",defaultMessage:"Retained pages"});default:(0,B.t1)(e)}}function Xe(e){switch(e){case"alive":case"in_trash":return null;case"deleted_from_trash":return(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.caption.internal",defaultMessage:"Pages deleted from Trash are retained for 30 days"});default:(0,B.t1)(e)}}function et(e){if(0===e.length)return(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.default",defaultMessage:"Page status"});const t=e.includes("alive"),a=e.includes("in_trash"),s=e.includes("deleted_from_trash");return t?a&&s?(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.allStatusSelected",defaultMessage:"Include Trash, retained pages"}):a||s?(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.inactiveStatusWithActive",defaultMessage:"Include {trashSelected, select, true {Trash} other {retained pages}}",values:{trashSelected:a}}):(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.activeOnly",defaultMessage:"Active pages"}):a&&s?(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.inactiveOnly",defaultMessage:"Inactive pages"}):(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.singleInactiveStatus",defaultMessage:"{trashSelected, select, true {Trash} other {Retained pages}} only",values:{trashSelected:a}})}var tt=a(166994),at=a(889665),st=a(957702);function nt(e){let{spaceStore:t,sharedWithFilterItems:a,setSharedWithFilter:n,runNewSearch:i,includeGroups:r,includeGuests:l}=e;const d=(0,at.R)({spaceStore:t}),c=(0,s.useMemo)((()=>d.loading?[]:l?[...d.members,...d.guests]:d.members),[d,l]),u=(0,s.useMemo)((()=>d.loading?new Set:new Set(d.guests.map((e=>e.id)))),[d]);return(0,x.jsx)(st.B,{isMultiSelect:!0,includePermissionGroups:r,userStores:c,title:(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.sharedWith.title",defaultMessage:"Shared with"}),selectedItems:a??[],setSelectedItems:function(e){const t=e.map((e=>{let{id:t,type:a}=e;return{type:a,id:t}}));n(t.length>0?t:void 0)},onMenuClose:i,guestUserIdSet:u})}var it=a(235389);function ot(e){let{spaceStore:t,filters:a,runNewSearch:s,setFilters:n,hasUserConfirmedAcknowledgement:o}=e;const r=(0,He.x)(),d=(0,p.yK)((e=>({container:{margin:"0 auto 14px"},filterPillsContainer:{width:"100%",display:"flex",flexWrap:"wrap",rowGap:4,flexDirectionRow:"row",alignItemsCenter:"center"}})),[]),c=(0,i.VK)((()=>l.default.checkGate({gateName:"cdrr_admin_content_search"})),[]);return(0,x.jsxs)("div",{style:d.container,children:[(0,x.jsx)(tt.O,{mode:tt.p.Button,query:a.query,setQueryFilter:function(e){n({query:e},{runSearchAfter:!0})},disabled:!o}),o?(0,x.jsxs)("div",{style:d.filterPillsContainer,children:[c?(0,x.jsx)(Ye,{selectedPageStatus:a.pageStatus,setSelectedPageStatus:function(e){n({pageStatus:e})},onMenuClose:s}):null,(0,x.jsx)($e.f,{lastEditedTime:a.lastEditedTime,createdTime:a.createdTime,setLastEditedTime:function(e){n({lastEditedTime:e,createdTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})},setCreatedOnTime:function(e){n({createdTime:e,lastEditedTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})}}),(0,x.jsx)(it.p,{selectedTeamIds:a.teamIds,setSelectedTeamIds:function(e){n({teamIds:e})},onMenuClose:s,teamStores:r}),(0,x.jsx)(nt,{spaceStore:t,sharedWithFilterItems:a.sharedWith,setSharedWithFilter:function(e){n({sharedWith:e})},runNewSearch:s,includeGroups:!0,includeGuests:!0}),(0,x.jsx)(X,{selectedAudience:a.audience,setSelectedAudience:function(e){n({audience:e})},onMenuClose:s}),(0,x.jsx)(Ge.y,{spaceStore:t,createdByFilterIds:a.createdBy,setCreatedByFilter:function(e){n({createdBy:e})},runNewSearch:s,includeGuests:!0})]}):null]})}a(757658);var rt=a(126263),lt=a(165958),dt=a(959753),ct=a(145953),ut=a(421202),gt=a(766504),mt=a(657347),pt=a(653965),ht=a(454642),ft=a(227617),vt=a(206258);const xt=20,yt={query:"",createdBy:[],sharedWith:void 0,audience:[],lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},teamIds:[],pageStatus:["alive"]},bt={...yt,audience:["shared_externally","shared_internally","shared_to_web"]},_t={filters:yt,pageStores:[],numPagesLoaded:0,hasNextPage:!0,paginationToken:void 0,loading:!1,error:void 0,shouldReRunSearch:!1,showSuggestions:!0},Mt={..._t,filters:bt};function wt(e){let{spaceStore:t,userStore:a,hasUserConfirmedAcknowledgement:o}=e;const r=(0,i.VK)((()=>l.default.checkGate({gateName:"enabled_bev_default_audience_filter"})),[])?Mt:_t,d=(0,n.O7)(),[c,u]=(0,s.useState)(r),g=(0,s.useRef)(r.filters),m=(0,s.useCallback)((async e=>{let{restartSearch:s,ignoreFilterComparison:n}=e;if(!o)return;if(!n&&pt.Xy(c.filters,g.current))return;g.current=c.filters;let i=c.loading,r=c.error,l=c.hasNextPage,m=c.numPagesLoaded,p=c.paginationToken;if(s&&(u((e=>({..._t,showSuggestions:e.showSuggestions,filters:e.filters}))),i=_t.loading,r=_t.error,l=_t.hasNextPage,m=_t.numPagesLoaded,p=_t.paginationToken),l&&!i&&!r){u((e=>({...e,showSuggestions:!1,loading:!0})));try{const e=await ht.adminContentSearch(d,{spaceId:t.id,sort:{field:"relevance",direction:"desc"},limit:xt,paginationToken:p,query:c.filters.query,audience:c.filters.audience,lastEditedTime:(0,ft.Hq)(c.filters.lastEditedTime),createdTime:(0,ft.Hq)(c.filters.createdTime),createdBy:c.filters.createdBy,sharedWith:c.filters.sharedWith,teamspaceIds:c.filters.teamIds,deletionStatuses:c.filters.pageStatus});if("failed"===e.type)throw e.error;h.jd(d,{filters:c.filters,pageNumber:m});const s=e.data.paginationToken,n=e.data.recordIds,i=function(e){const{recordMapWithRoleJson:t}=e,a=ct.PF.create(t),s=ct.PF.create();for(const{pointer:n,model:i}of a)if(i){const e=dt.kk.fromValue(n.table,pt.Xh(i.__IM_SORRY__getValue()));s.setModelAndRole(n,e,"editor")}return s}({recordMapWithRoleJson:e.data.recordMap}),o=new rt.Z({name:lt.bv,data:new gt.o({[a.id]:i})});o.addCacheFallback(d.defaultRecordCache.inMemoryRecordCache),u((e=>{const t=[],a=new Set(e.pageStores.map((e=>e.id)));for(const s of n)if(!a.has(s)){const e=new vt.G(d,{table:ut.iU,id:s},{inMemoryRecordCache:o});t.push(e)}const i=[...e.pageStores,...t];return{...e,pageStores:i,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:s,hasNextPage:Boolean(s)}}))}catch(f){const e=(0,mt.t)(f);u((t=>({...t,loading:!1,error:e})))}}}),[d,t,a,o,c.filters,c.loading,c.error,c.hasNextPage,c.numPagesLoaded,c.paginationToken]);(0,s.useEffect)((()=>{c.shouldReRunSearch&&(u((e=>({...e,shouldReRunSearch:!1}))),m({restartSearch:!0,ignoreFilterComparison:!1}))}),[c.shouldReRunSearch,m]);const p=(0,s.useCallback)((async()=>{c.shouldReRunSearch||await m({restartSearch:!1,ignoreFilterComparison:!0})}),[c.shouldReRunSearch,m]),f=(0,s.useCallback)((async e=>{await m({restartSearch:!0,ignoreFilterComparison:e||!1})}),[m]),v=(0,s.useCallback)(((e,t)=>{h.gL(d,{newFilters:e}),u((a=>({...a,filters:{...a.filters,...e},...null!=t&&t.runSearchAfter?{shouldReRunSearch:null==t?void 0:t.runSearchAfter}:void 0})))}),[d]);return{showSuggestions:c.showSuggestions,filters:c.filters,pageStores:c.pageStores,loading:c.loading,error:c.error,hasNextPage:c.hasNextPage,loadNextPage:p,runNewSearch:f,setFilters:v}}function Ct(e){let{spaceStore:t,userStore:a,isOrganizationOwner:s}=e;const n=(0,i.VK)((()=>{const e=M.default.state.currentSpaceViewStore,t=null==e?void 0:e.getSettings();return(null==t?void 0:t.admin_content_search_acknowledgement)??!1}),[]),r=s||n,{showSuggestions:g,loadNextPage:m,pageStores:p,loading:h,error:f,runNewSearch:v,filters:b,setFilters:_}=wt({spaceStore:t,userStore:a,hasUserConfirmedAcknowledgement:r}),w=(0,i.VK)((()=>l.default.checkGate({gateName:"cdrr_admin_content_search"})),[]),C=(0,i.VK)((()=>t.getName()),[t]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:24},children:[(0,x.jsx)(c.Z,{isMultiline:!0,style:{marginBottom:20},isSecondaryColor:!0,children:w?(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.description.dataRetentionPolicy",defaultMessage:"Use filters to search for any page in the workspace, including private pages and deleted pages retained per <b>{workspaceName}</b>'s <link>data retention policy</link><br>Only workspace owners can use content search </br>",values:{workspaceName:C,br:e=>(0,x.jsx)("div",{style:{marginTop:15},children:e}),b:e=>(0,x.jsx)("b",{children:e}),link:e=>(0,x.jsx)(u.Z,{onClick:()=>d.Z.setState({openedFrom:"content_search",open:!0,currentTab:"security",highlightedSetting:void 0,defaultSubtab:"data_retention"}),children:e})}}):(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.description",defaultMessage:"Search and filter for any page in the workspace, including private pages. Only workspace owners can use content search."})}),(0,x.jsx)(y,{spaceId:t.id,disabled:0===p.length||!r,filters:b})]}),(0,x.jsx)(ot,{spaceStore:t,runNewSearch:v,setFilters:_,filters:b,hasUserConfirmedAcknowledgement:r}),(0,x.jsx)(We,{loading:h,error:f,pageStores:p,loadNextPage:m,filters:b,setFilters:_,showSuggestions:g,runNewSearch:v,hasUserConfirmedAcknowledgement:r})]})}const jt=function(e){const t=(0,n.O7)();return(0,i.VK)((()=>r.Z.state.online),[])?(0,x.jsxs)(g.ZP,{children:[(0,x.jsx)(m.Z,{large:!t.device.isMobile||void 0,divider:t.device.isMobile?void 0:"full",children:(0,x.jsx)(o.FormattedMessage,{id:"adminContentSearchTab.title",defaultMessage:"Content Search"})}),(0,x.jsx)(Ct,{...e})]}):(0,x.jsx)(g.ZP,{children:(0,x.jsx)(c.Z,{isSmall:!0,isMultiline:!0,style:{textAlign:"center"},children:(0,x.jsx)(o.FormattedMessage,{defaultMessage:"Please go online to access content search.",id:"adminContentSearchTab.offline.message"})})})}},421697:(e,t,a)=>{a.d(t,{x:()=>l});var s=a(667294),n=a(800480),i=a(886628),o=a(195697),r=a(80444);function l(e){const[t,a]=(0,s.useState)([]),l=(0,n.O7)(),d=(0,i.VK)((()=>(null==e?void 0:e.spaceStore)??r.default.state.currentSpaceStore),[null==e?void 0:e.spaceStore]),c=(0,i.VK)((()=>{var e;return null===(e=r.default.state.currentUserStore)||void 0===e?void 0:e.id}),[]);return(0,s.useEffect)((()=>{!async function(){const e=await(0,o.sj)({spaceStore:d,currentUserId:c,includeArchived:!1,minRoleOnTeamStores:"editor",environment:l});a(e)}()}),[d,c,l]),t}},155255:(e,t,a)=>{a.d(t,{B:()=>l});a(667294);var s=a(724405),n=a(709291),i=a(271291),o=a(164369),r=a(785893);function l(e){let{lastActiveAt:t,containerStyle:a,isNoActivitySecondaryColor:l}=e;const d=(0,s.yK)((e=>({container:{...a}})),[a]);return(0,r.jsx)("div",{style:d.container,children:t?(0,r.jsx)(i.T,{dateTs:t}):(0,r.jsx)(o.Z,{isSecondaryColor:l,children:(0,r.jsx)(n.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.lastActive.unknown",defaultMessage:"No activity"})})})}},233602:(e,t,a)=>{a.d(t,{V:()=>r});a(667294);var s=a(933679),n=a(709291),i=a(994273),o=a(785893);function r(e){let{selectedMfaMethod:t,setSelectedMfaMethod:a}=e;return(0,o.jsx)(i.u,{pillTitle:(0,o.jsx)(n.FormattedMessage,{id:"managedUsersTab.table.filters.mfaMethod.title",defaultMessage:"2-step verification method"}),pillIcon:s.j,selectedItem:t,setSelectedItem:a,items:l})}const l=[{key:"totp",value:"totp",title:(0,o.jsx)(n.FormattedMessage,{id:"managedUsersTab.table.filters.mfaMethod.totp",defaultMessage:"Authenticator"}),caption:(0,o.jsx)(n.FormattedMessage,{id:"managedUsersTab.table.filters.mfaMethod.totp.caption",defaultMessage:"Users who have enabled 2-step verification through an authenticator app"}),wrapCaption:!0},{key:"sms",value:"sms",title:(0,o.jsx)(n.FormattedMessage,{id:"managedUsersTab.table.filters.mfaMethod.sms",defaultMessage:"Phone number"}),caption:(0,o.jsx)(n.FormattedMessage,{id:"managedUsersTab.table.filters.mfaMethod.sms.caption",defaultMessage:"Users who have enabled 2-step verification through their phone number"}),wrapCaption:!0},{key:"backup_code",value:"backup_code",title:(0,o.jsx)(n.FormattedMessage,{id:"managedUsersTab.table.filters.mfaMethod.backupCode",defaultMessage:"Backup code"}),caption:(0,o.jsx)(n.FormattedMessage,{id:"managedUsersTab.table.filters.mfaMethod.backup_code.caption",defaultMessage:"Users who have enabled 2-step verification with active backup codes."}),wrapCaption:!0}]},218261:(e,t,a)=>{a.d(t,{W:()=>B,z:()=>U});var s=a(667294),n=a(800480),i=a(886628),o=a(724405),r=a(407057),l=a(584169),d=a(924211),c=a(519889),u=a(709291),g=a(171119),m=a(816402),p=a(825464),h=a(788632),f=a(206258),v=a(623063),x=a(661519),y=a(374194),b=a(550506),_=a(863296),M=a(158297),w=a(526388),C=a(365252),j=a(164369),S=a(13490),T=a(964392),k=(a(757658),a(781918)),F=a(454642),N=a(547307),I=a(164964),A=a(353471),E=a(833954),P=a(80444),R=a(785893);const D=(0,u.defineMessages)({uploadFailed:{defaultMessage:"Upload failed.",id:"identityAndProvisioning.managedUsers.modal.failedUpload"}});var V=a(119927),Z=a(679131);const L=(0,u.defineMessages)({namePlaceholder:{defaultMessage:"Display name",id:"identityAndProvisioning.managedUsers.table.userAccess.namePlaceholder"},emailPlaceholder:{defaultMessage:"Email",id:"identityAndProvisioning.managedUsers.table.userAccess.emailPlaceholder"},supportAccessFailed:{defaultMessage:"Failed to load user's support access status.",id:"identityAndProvisioning.managedUsers.table.userAccess.supportAccessFailed"}});function B(e){let{spaceStore:t,managedUser:a,onClose:s,removeWorkspaceFromUser:n}=e;const i=Boolean(a),{isAccessGranted:o,toggleDataAccessConsent:r,loading:l}=(0,V.d)({userId:null==a?void 0:a.userId,spaceId:t.id});return(0,R.jsx)(b.Z,{open:i,onDismiss:s,preventHideChildrenWhileOpening:!0,render:()=>a?(0,R.jsx)(U,{managedUser:a,isAccessGranted:o,toggleDataAccessConsent:r,loadingSupportAccess:l,renderWorkspacesOverview:()=>(0,R.jsx)(Z.g,{spaceStore:t,userId:a.userId,workspaces:a.workspaces,removeWorkspaceFromUser:n})}):null})}function U(e){let{managedUser:t,renderWorkspacesOverview:a,isAccessGranted:b,toggleDataAccessConsent:V,loadingSupportAccess:Z}=e;const B=(0,u.useIntl)(),U=(0,n.O7)(),O=(0,i.VK)((()=>new f.U6(U,{id:t.userId,table:c.KJ})),[t,U]),{hasStagedChanges:z,resetState:q,saveChanges:K,loading:W,profilePhoto:H,name:G,email:$}=function(e){const{userStore:t}=e,a=(0,u.useIntl)(),o=(0,n.O7)(),{userProfilePhoto:r,userName:l,userEmail:d,isSuspended:c}=(0,i.VK)((()=>({userProfilePhoto:t.getProfilePhoto(),userName:t.getFullName(a),userEmail:t.getEmail(),isSuspended:t.getIsSuspended()})),[t,a]),[g,m]=(0,s.useState)({loading:!1,error:void 0}),[p,h]=(0,s.useState)({value:r,loading:!1}),[f,v]=(0,s.useState)(l),[x,y]=(0,s.useState)(d);return{hasStagedChanges:p.value!==r||f!==l||x!==d,saveChanges:async function(){var e;const s=null===(e=P.default.state.currentSpaceStore)||void 0===e?void 0:e.id,n=[];p.value!==r&&n.push("profile_photo"),f!==l&&n.push("name"),x!==d&&n.push("email"),k.am(o,{user_status:c?"suspended":"notSuspended",edited_fields:n});const{accept:i}=await N.confirmUserActionV2({message:(0,R.jsx)(j.Z,{style:N.dialogStyles.title,children:(0,R.jsx)(u.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.message",defaultMessage:"Confirm changes"})}),description:(0,R.jsxs)(j.Z,{isMultiline:!0,isSecondaryColor:!0,children:[(0,R.jsx)(u.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.description",defaultMessage:"Changes made to this user's account will be reflected across all workspaces they have access to."}),(0,R.jsx)("br",{}),(0,R.jsx)("br",{}),(0,R.jsx)(u.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.descriptionForScim",defaultMessage:"If this user is being provisioned through SCIM, your changes be later overwritten by the next SCIM sync."})]}),acceptLabel:(0,R.jsx)(u.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.acceptLabel",defaultMessage:"Save changes"}),cancelLabel:(0,R.jsx)(u.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.cancelLabel",defaultMessage:"Go back"})});if(!i)return;m({loading:!0,error:void 0});const g=await F.updateUserProfile(o,{userId:t.id,spaceId:s,name:f,email:x,profilePhoto:p.value});if(k.$B(o,{user_status:c?"suspended":"notSuspended",edited_fields:n}),"failed"===g.type)return N.showErrorMessage((0,E.wf)(a,g)),void m({loading:!1,error:g.error});I.oV({label:(0,R.jsx)(u.FormattedMessage,{id:"managedUsers.toastMessage.updateProfileData.success",defaultMessage:"Successfully updated user's profile"})}),setTimeout((()=>{m({loading:!1,error:void 0})}),500)},resetState:function(){h({value:r,loading:!1}),v(l),y(d)},loading:g.loading,error:g.error,profilePhoto:{value:p.value,loading:p.loading,set:function(){A.cR({environment:o,onStart:()=>{h((e=>({...e,loading:!0})))},bucket:"public",onError:()=>{h((e=>({...e,loading:!1}))),N.showErrorMessage(a.formatMessage(D.uploadFailed))},onComplete:e=>{const t=e[0];h({value:t,loading:!1})},accept:"image/*"})},remove:function(){h({value:"",loading:!1})}},name:{value:f,set:v},email:{value:x,set:y}}}({userStore:O}),Q=(0,i.VK)((()=>O.getIsSuspended()?{type:"suspended"}:(0,C.os)({profilePhoto:H.value,name:G.value,email:$.value})),[O,H.value,G.value,$.value]),Y=function(e){const{loadingSupportAccess:t}=e;return(0,o.yK)((e=>({container:{position:"relative",display:"flex",flexDirection:"column",background:e.popoverBackground,width:420,maxHeight:520,overflow:"hidden",borderRadius:8},innerContainer:{position:"relative",display:"flex",flexDirection:"column",width:"100%",height:"100%",overflowY:"auto",padding:"36px 24px",gap:16},label:{color:e.mediumTextColor},horizontalLabel:{color:e.mediumTextColor,display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",gap:4},value:{color:e.regularTextColor},input:{padding:"4px 4px 4px 10px",margin:"0 auto 8px",width:"100%",background:e.modalBackground},avatarContainer:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},iconStyle:{border:`1px solid ${e.tableDividerColor}`,color:e.lightTextColor,fontWeight:500},inputContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",width:"100%",gap:8},inputRow:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",width:"100%"},icon:{color:e.lightIconColor,fill:"currentColor",width:14,height:14},supportAccessRow:{position:"relative",width:"100%",opacity:t?.5:1},infoContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%"},infoRow:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%"},footer:{position:"absolute",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end",paddingInline:4,boxShadow:e.borderBoxShadow,background:e.popoverBackground,left:0,right:0,bottom:0,height:48},button:{height:30,marginInline:4}})),[t])}({loadingSupportAccess:Z}),J=(0,d.E2)(B),X=(0,i.VK)((()=>!h.Z.state.online),[]),ee=t.mfaMethods.filter((e=>"backup_code"!==e)),te=B.formatList(ee.map((e=>(0,g.cR)(e))),{type:"conjunction"});return(0,R.jsxs)("div",{style:Y.container,children:[(0,R.jsxs)("div",{style:Y.innerContainer,children:[(0,R.jsx)("div",{style:Y.avatarContainer,children:(0,R.jsx)(C.ZP,{size:56,avatarType:Q,isOffline:X,loading:H.loading,onUploadProfilePhoto:H.set,onRemoveProfilePhoto:H.remove})}),(0,R.jsxs)("div",{style:Y.inputContainer,children:[(0,R.jsxs)("div",{style:Y.inputRow,children:[(0,R.jsx)(S.Z,{children:(0,R.jsx)(u.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.nameLabel",defaultMessage:"Name"})}),(0,R.jsx)(y.Z,{style:Y.input,disabled:W,value:G.value,placeholder:B.formatMessage(L.namePlaceholder),onChange:e=>{G.set(e.target.value)}})]}),(0,R.jsxs)("div",{style:Y.inputRow,children:[(0,R.jsx)(S.Z,{children:(0,R.jsx)(u.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.emailLabel",defaultMessage:"Email"})}),(0,R.jsx)(y.Z,{style:Y.input,disabled:W,value:$.value,placeholder:B.formatMessage(L.emailPlaceholder),onChange:e=>{$.set(e.target.value)}})]})]}),(0,R.jsxs)("div",{style:Y.infoContainer,children:[(0,R.jsxs)("div",{style:Y.infoRow,children:[(0,R.jsx)(j.Z,{style:Y.label,isSmall:!0,children:(0,R.jsx)(u.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.accountCreatedLabel",defaultMessage:"Account created"})}),t.accountCreatedAt?(0,R.jsx)(j.Z,{isSmall:!0,style:Y.value,children:(0,r.Yx)(t.accountCreatedAt,"medium",J)}):(0,R.jsx)(j.Z,{isSecondaryColor:!0,isSmall:!0,children:(0,R.jsx)(u.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.emptyAccountCreated",defaultMessage:"Incomplete"})})]}),(0,R.jsx)(x.Z,{size:16}),(0,R.jsxs)("div",{style:Y.infoRow,children:[(0,R.jsx)(j.Z,{style:Y.label,isSmall:!0,children:(0,R.jsx)(u.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.lastActiveLabel",defaultMessage:"Last active"})}),t.lastActiveAt?(0,R.jsx)(j.Z,{isSmall:!0,style:Y.value,children:(0,m.gs)(t.lastActiveAt)}):(0,R.jsx)(j.Z,{isSecondaryColor:!0,isSmall:!0,children:(0,R.jsx)(u.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.emptyLastActive",defaultMessage:"No activity"})})]}),(0,R.jsx)(x.Z,{size:16}),(0,R.jsxs)("div",{style:Y.infoRow,children:[(0,R.jsx)(j.Z,{style:Y.label,isSmall:!0,children:(0,R.jsx)(u.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.mfaLabel",defaultMessage:"2-step verification method"})}),ee.length>0?(0,R.jsx)(j.Z,{isSmall:!0,style:Y.value,children:te}):(0,R.jsx)(j.Z,{isSecondaryColor:!0,isSmall:!0,children:(0,R.jsx)(u.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.emptyMfa",defaultMessage:"Not configured"})})]}),(0,R.jsx)(x.Z,{size:16}),(0,R.jsx)("div",{style:Y.supportAccessRow,children:(0,R.jsx)(T.w,{title:(0,R.jsxs)(j.Z,{style:Y.horizontalLabel,isSmall:!0,children:[(0,R.jsx)(u.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.supportAccessToggleMessage",defaultMessage:"Support access"}),(0,R.jsx)(w.Z,{placement:p.u.Bottom,render:e=>(0,R.jsx)("div",{...e,children:(0,l.m)(Y.icon)}),renderTooltip:()=>(0,R.jsx)(u.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.supportAccessToggleMessage.tooltip",defaultMessage:"Grant Notion support temporary access to this account so we can troubleshoot problems or recover content on its behalf"})})]}),byline:null,isOn:b,onToggle:V,disabled:Z})})]}),(0,R.jsx)("div",{children:t.workspaces.length>0?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(S.Z,{children:(0,R.jsx)(u.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.workspacesLabel",defaultMessage:"Workspaces"})}),a()]}):null})]}),(0,R.jsx)(v.Z,{isVisible:z||W,enterAnimationStyle:{translateY:48,opacity:0},animationStyle:{opacity:1,translateY:0},exitAnimationStyle:{translateY:48,opacity:0},render:()=>(0,R.jsxs)("div",{style:Y.footer,children:[(0,R.jsx)(_.Z,{isRed:!0,disabled:W,style:Y.button,onClick:q,children:(0,R.jsx)(u.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.cancelButton",defaultMessage:"Cancel"})}),(0,R.jsx)(M.Z,{disabled:W,style:Y.button,onClick:K,children:(0,R.jsx)(u.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.saveButton",defaultMessage:"Save changes"})})]})})]})}},679131:(e,t,a)=>{a.d(t,{U:()=>M,g:()=>_});var s=a(667294),n=a(800480),i=a(724405),o=a(815047),r=a(709291),l=a(781918),d=a(454642),c=a(547307),u=a(164964),g=a(825464),m=a(88893),p=a(661519),h=a(489728),f=a(731278),v=a(526388),x=a(164369),y=a(30836),b=a(785893);function _(e){const{userId:t,workspaces:a,spaceStore:n,removeWorkspaceFromUser:o}=e,r=(0,i.yK)((()=>({container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",gap:8,marginTop:12}})),[]);return(0,b.jsx)("div",{style:r.container,children:a.map(((e,i)=>(0,b.jsxs)(s.Fragment,{children:[(0,b.jsx)(M,{userId:t,spaceId:n.id,workspace:e,removeWorkspaceFromUser:o}),i<a.length-1?(0,b.jsx)(p.Z,{size:8}):null]},e.id)))})}function M(e){const{userId:t,spaceId:a,workspace:s,removeWorkspaceFromUser:m}=e,p=(0,r.useIntl)(),_=(0,n.O7)(),M=w(s),j=(0,i.yK)((()=>({container:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%",gap:12,overflow:"hidden"},workspaceContainer:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",width:"100%",gap:12,overflow:"hidden"},iconContainer:{alignSelf:"center"},textContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",width:"100%"},name:{fontSize:14,fontWeight:500},nameUntitled:{fontSize:14,fontWeight:500,opacity:.25},byline:{lineHeight:1.3,fontSize:12,opacity:.5}})),[]);async function S(){l.wV(_,{external_space_id:s.id});const{accept:e}=await c.confirmUserActionV2({message:(0,b.jsx)(x.Z,{style:c.dialogStyles.title,children:(0,b.jsx)(r.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.removeFromWorkspace.confirmation.message",defaultMessage:"Remove user from workspace?"})}),description:(0,b.jsx)(x.Z,{isMultiline:!0,isSecondaryColor:!0,children:(0,b.jsx)(r.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.removeFromWorkspace.confirmation.description",defaultMessage:"This user will no longer have access to the workspace you are removing them from. This action is not reversible."})}),acceptLabel:(0,b.jsx)(r.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.removeFromWorkspace.confirmation.acceptLabel",defaultMessage:"Remove"}),cancelLabel:(0,b.jsx)(r.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.removeFromWorkspace.confirmation.cancelLabel",defaultMessage:"Go back"})});if(!e)return;const n=await d.removeManagedUserFromSpace(_,{userId:t,targetSpaceId:s.id,requestingSpaceId:a});l.dw(_,{external_space_id:s.id}),"success"===n.type?(m(t,s.id),u.oV({label:(0,b.jsx)(r.FormattedMessage,{defaultMessage:"Successfully removed user from {workspaceName}",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspaceConfirmation",values:{workspaceName:s.name}})})):u.oV({label:(0,b.jsx)(r.FormattedMessage,{defaultMessage:"Failed to remove user from {workspaceName}",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspaceFailure",values:{workspaceName:s.name}})})}const T=s.icon?{pointer:{table:o.bx,id:s.id,spaceId:s.id},icon:s.icon}:void 0;return(0,b.jsx)("div",{style:j.container,children:(0,b.jsxs)("div",{style:j.workspaceContainer,children:[(0,b.jsx)("div",{style:j.iconContainer,children:(0,b.jsx)(f.Z,{disabled:!0,icon:T,isEmptyPage:!1,size:28,title:s.name,isLarge:!0,emojiSize:24,isRaw:!1})}),(0,b.jsxs)("div",{style:j.textContainer,children:[(0,b.jsx)(x.Z,{style:j.name,isMultiline:!0,children:(0,b.jsx)(y.J,{workspace:s})}),(0,b.jsx)(x.Z,{style:j.byline,children:(0,b.jsx)(C,{workspace:s,intl:p})})]}),(0,b.jsx)("div",{children:(0,b.jsx)(v.Z,{render:e=>(0,b.jsx)(h.Z,{isRed:!0,onClick:S,disabled:M,disabledFeedback:M,...e,children:(0,b.jsx)(r.FormattedMessage,{defaultMessage:"Remove",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspace"})}),renderTooltip:()=>(0,b.jsx)(r.FormattedMessage,{defaultMessage:"You cannot remove this user from the workspace because they are the only user in the workspace. To remove this user, delete the workspace instead.",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspace.disableTooltip"}),disableTooltip:!M,placement:g.u.Bottom})})]})})}function w(e){const t=e.membersCount;return"number"==typeof t?1===t:1===t.length&&1===t[0]}function C(e){const{workspace:t,intl:a}=e;return w(t)?(0,b.jsx)(r.FormattedMessage,{defaultMessage:"{plan} · 1 member",id:"identityAndProvisioning.managedUsers.table.userAccess.oneMemberWorkspace",values:{plan:(0,m.v$)(t.plan,a)}}):Array.isArray(t.membersCount)?1===t.membersCount.length?(0,b.jsx)(r.FormattedMessage,{defaultMessage:"{plan} · {lowerEnd}+ members",id:"identityAndProvisioning.managedUsers.table.userAccess.numMembersLowerEndRange",values:{plan:(0,m.v$)(t.plan,a),lowerEnd:t.membersCount[0]}}):(0,b.jsx)(r.FormattedMessage,{defaultMessage:"{plan} · {lowerEnd} - {higherEnd} members",id:"identityAndProvisioning.managedUsers.table.userAccess.numMembersRange",values:{plan:(0,m.v$)(t.plan,a),lowerEnd:t.membersCount[0],higherEnd:t.membersCount[1]}}):(0,b.jsx)(r.FormattedMessage,{defaultMessage:"{plan} · {numMembers} {numMembers, plural, one {member} other {members}}",id:"identityAndProvisioning.managedUsers.table.userAccess.numMembers",values:{plan:(0,m.v$)(t.plan,a),numMembers:t.membersCount}})}},119927:(e,t,a)=>{a.d(t,{d:()=>g});var s=a(667294),n=a(800480),i=a(250501),o=a(709291),r=a(781918),l=a(454642),d=a(547307),c=a(164964);const u=(0,o.defineMessages)({getSupportAccessFailed:{defaultMessage:"Failed to load user's support access status.",id:"identityAndProvisioning.managedUsers.table.userAccess.getSupportAccessFailed"},setSupportAccessFailed:{defaultMessage:"Failed to update user's support access status.",id:"identityAndProvisioning.managedUsers.table.userAccess.setSupportAccessFailed"},toastDisabled:{id:"managedUsers.toastMessage.supportAccessDisabled",defaultMessage:"Successfully disabled user's support access status"},toastEnabled:{id:"managedUsers.toastMessage.supportAccessEnabled",defaultMessage:"Successfully enabled user's support access status"}});function g(e){const{spaceId:t,userId:a}=e,g=(0,o.useIntl)(),m=(0,n.O7)(),[p,h]=(0,s.useState)({loading:!1,error:void 0}),[f,v]=(0,s.useState)(void 0);(0,s.useEffect)((()=>{!async function(){const e=await async function(){if(!a)return;h({loading:!0,error:void 0});const e=await l.getDataAccessConsentForManagedUser(m,{spaceId:t,userId:a});return"failed"===e.type?(h({loading:!1,error:e.error}),void d.deprecatedShowErrorMessage(g.formatMessage(u.getSupportAccessFailed))):(h({loading:!1,error:void 0}),e.data.expiryTime)}();v(e)}()}),[m,g,t,a]);const x=(0,s.useMemo)((()=>Boolean(f&&Number(f)>Date.now())),[f]),y=(0,s.useCallback)((async()=>{if(!a)return;h({loading:!0,error:void 0});const e=x?void 0:Date.now()+i.g,s=await l.setDataAccessConsentForManagedUser(m,{spaceId:t,userId:a,expiryTime:e});if(r.Ef(m,{new_value:Boolean(e)}),"failed"===s.type)return h({loading:!1,error:s.error}),void d.deprecatedShowErrorMessage(g.formatMessage(u.setSupportAccessFailed));v(e),e?c.oV({label:g.formatMessage(u.toastEnabled)}):c.oV({label:g.formatMessage(u.toastDisabled)}),h({loading:!1,error:void 0})}),[m,g,t,a,x]);return{isAccessGranted:x,toggleDataAccessConsent:y,loading:p.loading,error:p.error}}},58720:(e,t,a)=>{a.d(t,{m:()=>d});a(667294);var s=a(724405),n=a(709291),i=a(858698),o=a(164369),r=a(30836),l=a(785893);function d(e){let{workspaceSummaries:t}=e;const a=(0,n.useIntl)(),d=(0,s.yK)((e=>({title:{marginRight:8},noWorkspaces:{paddingInline:8,opacity:.5},workspaceName:{maxWidth:"80%"},plusMore:{opacity:.5,marginLeft:4},titleContainer:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",width:"100%",marginLeft:4}})),[]);if(t.length<=0)return(0,l.jsx)(o.Z,{style:d.noWorkspaces,children:(0,l.jsx)(n.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.userAccess.noWorkspaces",defaultMessage:"No workspaces"})});const c=t.find((e=>e.name)),u=c?c.name:(0,i.o)(a),g=t.length-1;return(0,l.jsxs)("div",{style:d.titleContainer,children:[(0,l.jsx)(o.Z,{isInline:!0,style:d.workspaceName,children:u}),!c||c.isExternal?(0,l.jsx)(r.g,{}):null,g>0?(0,l.jsxs)(o.Z,{isInline:!0,style:d.plusMore,children:[(0,l.jsx)(n.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.userAccess.additionalCount",defaultMessage:"+{numRemainingWorkspaces}",values:{numRemainingWorkspaces:g}}),""]}):null]})}},252498:(e,t,a)=>{a.d(t,{G:()=>_});a(757658),a(667294);var s=a(886628),n=a(724405),i=a(356666),o=a(709291),r=a(531701),l=a(460709),d=a(918514),c=a(61766),u=a(693405),g=a(231945),m=a(573063),p=a(478140),h=a(632163),f=a(953437),v=a(672495),x=a(483182),y=a(785893);const b=(0,o.defineMessages)({menuAriaLabel:{defaultMessage:"Open action menu for this user.",id:"identityAndProvisioning.managedUsers.table.menu.ariaLabel"}});function _(e){let{managedUser:t,managedUserActionSections:a}=e;const r=(0,s.qz)(void 0,c.Z),l=(0,o.useIntl)(),d=(0,n.yK)((()=>({container:{minWidth:265}})),[]);return(0,y.jsx)(g.ZP,{popupType:f.kQ.Popup,style:d.container,buttonPopupStore:r,renderOrigin:e=>(0,y.jsx)(m.Z,{ariaLabel:l.formatMessage(b.menuAriaLabel),icon:i.o,...e}),render:()=>(0,y.jsx)(M,{managedUser:t,popupStore:r,managedUserActionSections:a})})}function M(e){let{managedUser:t,popupStore:a,managedUserActionSections:s}=e;const i=[],c=(0,n.yK)((()=>({destructiveIcon:{fill:r.ZP.red,color:r.ZP.red}})),[]);for(const[n,o]of s.entries()){const e=o.map(((e,a)=>({key:a,render:a=>{var s,n;return(0,y.jsx)(u.Z,{...a,shouldWrapCaption:!0,svg:t=>e.icon(e.isDestructive?{...t,...c.destructiveIcon}:t),title:e.title,style:{paddingTop:8,paddingBottom:8,...e.isDestructive?c.destructiveIcon:{}},disabled:null===(s=e.getDisabledState)||void 0===s?void 0:s.call(e,t),disabledFeedback:null===(n=e.getDisabledState)||void 0===n?void 0:n.call(e,t)})},action:()=>e.onClick(t)}))),a={key:`section-${n}`,render:e=>(0,y.jsx)(v.Z,{topBorder:n>0,...e}),items:e};i.push(a)}return(0,y.jsxs)(p.Z,{menuType:l.og.Popup,children:[(0,y.jsx)(h.Z,{type:h.i.Vertical,initialFocus:void 0,sections:i,onAccept:()=>{a.setState({open:!1})}}),(0,y.jsx)(v.Z,{topBorder:!0,children:(0,y.jsx)(x.Z,{title:(0,y.jsx)(o.FormattedMessage,{defaultMessage:"Learn about user suspension",id:"managedUsersDashboard.userActionsMenu.helpButton"}),href:(0,d.UY)("guides.managedUsers"),analyticsFrom:"managed_users_dashboard_user_actions_menu"})})]})}},582162:(e,t,a)=>{a.d(t,{L:()=>m,S:()=>g});a(667294);var s=a(886628),n=a(724405),i=a(519889),o=a(709291),r=a(80444),l=a(206258),d=a(969219),c=a(45653),u=a(785893);function g(e){let{userId:t}=e;const a=(0,o.useIntl)(),g=(0,n.yK)((e=>({iconStyle:{color:e.lightTextColor,fontWeight:500}})),[]),p=(0,s.VK)((()=>{const e=r.default.state.currentSpaceStore;if(!e)return;const s=l.U6.createChildStore(e,{table:i.KJ,id:t});return{userStore:s,isReady:s.isReady(),userName:s.getDisplayName(a),userEmail:s.getEmail()}}),[t,a]);return null!=p&&p.isReady?(0,u.jsx)(d.iP,{useThinTitle:!0,title:p.userName,byline:p.userEmail,icon:(0,u.jsx)(c.Z,{size:28,userStore:p.userStore,iconStyle:g.iconStyle})}):(0,u.jsx)(m,{})}function m(e){const t=(0,n.yK)((()=>({icon:{borderRadius:"100%",height:e.iconSize??28,width:e.iconSize??28,marginLeft:-4}})),[e.iconSize]);return(0,u.jsx)(d.HD,{includeByline:!0,includeIcon:!0,iconStyles:t.icon})}},30836:(e,t,a)=>{a.d(t,{J:()=>d,g:()=>c});a(667294);var s=a(724405),n=a(844495),i=a(709291),o=a(858698),r=a(526388),l=a(785893);function d(e){let{workspace:t}=e;const a=(0,i.useIntl)(),n=(0,s.yK)((e=>({container:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"}})),[]);return(0,l.jsxs)("div",{style:n.container,children:[t.name??(0,o.o)(a),t.isExternal?(0,l.jsx)(c,{}):null]})}function c(){const e=(0,s.yK)((e=>({icon:{marginLeft:4,height:14,width:14,opacity:.5}})),[]);return(0,l.jsx)(r.Z,{render:t=>(0,l.jsx)("div",{...t,children:(0,n.D)(e.icon)}),renderTooltip:()=>(0,l.jsx)(i.FormattedMessage,{id:"identityAndProvisioning.managedUsers.userAccess.externalSpaceNameTooltipText",defaultMessage:"This is an external workspace that does not belong to this user."})})}},728608:(e,t,a)=>{a.d(t,{$:()=>p,O:()=>m});a(667294);var s=a(886628),n=a(724405),i=a(373039),o=a(815047),r=a(709291),l=a(88893),d=a(994273),c=a(731278),u=a(164369),g=a(785893);function m(e){let{selectedSpaceId:t,setSelectedSpaceId:a,spaceData:s}=e;const n=p(s,(0,r.useIntl)());return(0,g.jsx)(d.u,{pillTitle:(0,g.jsx)(r.FormattedMessage,{id:"managedUsersTab.table.filters.workspaces.title",defaultMessage:"Workspace"}),pillIcon:i.K,selectedItem:t,setSelectedItem:a,items:n})}function p(e,t){const a=(0,n.yK)((e=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center",gap:8},optionTitle:{display:"block"},optionCaption:{display:"block",color:e.mediumTextColor,fontSize:12,lineHeight:"15px"},container:{padding:"6px 0 6px"},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex"},icon:{width:16,marginRight:6,fill:"currentColor"}})),[]);return(0,s.VK)((()=>e.map((e=>{const s=e.name,n=e.icon?{pointer:{table:o.bx,id:e.id,spaceId:e.id},icon:e.icon}:void 0;return{key:e.id,value:e.id,title:(0,g.jsxs)("div",{style:a.optionContainer,children:[(0,g.jsx)(c.Z,{disabled:!0,icon:n,isEmptyPage:!1,size:24,title:s,isLarge:!0,emojiSize:24,isRaw:!1}),(0,g.jsxs)("div",{style:{paddingTop:4,paddingBottom:4},children:[(0,g.jsx)(u.Z,{style:a.optionTitle,children:s}),(0,g.jsx)(u.Z,{style:a.optionCaption,children:(0,l.v$)(e.subscriptionTier,t)})]})]})}}))),[e,t,a])}},980422:(e,t,a)=>{a.d(t,{N:()=>l});a(667294);var s=a(724405),n=a(137810),i=a(164369),o=a(723189),r=a(785893);function l(e){let{title:t,byline:a,settingItem:l,style:d}=e;const c=(0,s.yK)((e=>({settingContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",...d||{}},settingLeft:{width:"60%"},settingTitle:{fontWeight:n.Z.fontWeight.regular},settingByline:{marginBottom:4}})),[d]);return(0,r.jsxs)("div",{style:c.settingContainer,children:[(0,r.jsxs)("div",{style:c.settingLeft,children:[(0,r.jsx)(o.Z,{smallMarginBottom:!0,style:c.settingTitle,children:t}),(0,r.jsx)(i.Z,{isSmall:!0,isMultiline:!0,style:c.settingByline,children:a})]}),l]})}},964392:(e,t,a)=>{a.d(t,{w:()=>l});a(667294);var s=a(825464),n=a(824006),i=a(526388),o=a(980422),r=a(785893);function l(e){let{title:t,byline:a,isOn:l,onToggle:d,disabled:c,tooltipForDisabled:u}=e;function g(){c||d()}return(0,r.jsx)(i.Z,{placement:s.u.Top,alignment:s.v.End,disableTooltip:!u||!c,renderTooltip:()=>u,render:e=>(0,r.jsx)("div",{...e,children:(0,r.jsx)(o.N,{title:t,byline:a,settingItem:(0,r.jsx)(n.Z,{on:l,disabled:c,onClick:g})})})})}},568117:(e,t,a)=>{a.d(t,{L:()=>c,V:()=>d});var s=a(667294),n=a(126263),i=a(800480),o=a(145953),r=a(80444),l=a(785893);const d=(0,s.createContext)({organizationOwnerRecordCache:void 0,updateCacheWithRecordMap:e=>{}});function c(e){let{children:t}=e;const a=(0,i.O7)(),[n,c]=(0,s.useState)(void 0);(0,s.useEffect)((()=>{const e=u(a);c(e)}),[a]);const g=(0,s.useCallback)((e=>{var t;const s=null===(t=r.default.state.currentUserStore)||void 0===t?void 0:t.id;if(!s||!e.data.organizationOwnerRecordMap)return;if(!e.data.organizationOwnerRecordMap)return;const n=o.Ak.create(e.data.organizationOwnerRecordMap);c((e=>{if(!e)return u(a);for(const{pointer:t,model:a}of n)e.setModelAndRole({pointer:t,userId:s},a,"editor");return u(a,e.data)}))}),[a]);return n?(0,l.jsx)(d.Provider,{value:{organizationOwnerRecordCache:n,updateCacheWithRecordMap:g},children:t}):null}function u(e,t){const a=new n.Z({name:"organizationSettingsConsoleCache",data:t});return a.addCacheFallback(e.defaultRecordCache.inMemoryRecordCache),a}d.displayName="OrganizationCacheContext"},835238:(e,t,a)=>{a.d(t,{Z:()=>Pe});var s=a(667294),n=a(886628),i=a(724405),o=a(966673),r=a(573123),l=a(709291),d=a(137810),c=a(227617),u=a(433929),g=a(918514),m=a(825464),p=a(124026),h=a(526388),f=a(164369),v=a(474523),x=a(408840),y=a(242485),b=a(800480),_=a(755964),M=a(90028),w=a(124697),C=a(135314),j=a(23124),S=a(166661),T=a(297706),k=a(167579),F=a(785893);const N=640;function I(e){let{data:t,loading:a,error:n,daysFilter:o,setDaysFilter:c}=e;const[p,x]=(0,C.e)(),y=(0,i.yK)((e=>({title:{fontWeight:d.Z.fontWeight.medium,fontSize:16,marginBlock:"8px 4px",display:"flex",alignItems:"center",justifyContent:"center"},infoIcon:{marginLeft:4},container:{display:"flex",flexDirection:"column",gap:16},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16},cardContainer:{justifyContent:"flex-start",gap:18},cardTextContainer:{alignItems:"flex-start"}})),[]),{pageViews:I,uniquePageViews:A,pagesCreated:E,pageEdits:P}=t,R=(0,b.O7)(),D=(0,s.useCallback)((e=>{w.ky(R,{daysFilter:e}),c(e)}),[R,c]);return(0,F.jsxs)("div",{style:y.container,ref:p,children:[(0,F.jsxs)("div",{style:y.titleContainer,children:[(0,F.jsxs)(f.Z,{style:y.title,children:[(0,F.jsx)(l.FormattedMessage,{id:"workspaceAnalytics.content.contentEngagement.title",defaultMessage:"Content engagement"}),(0,F.jsx)(h.Z,{placement:m.u.Bottom,render:e=>(0,F.jsx)(v.Z,{...e,href:(0,g.UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:y.infoIcon}),renderTooltip:()=>"all_time"!==o?(0,F.jsx)(l.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.contentEngagement.tooltip.lastDays",defaultMessage:"Activity on all workspace pages (includes private and shared) over the {dateRange}",values:{dateRange:u.default.formatMessage(r.xX[o])}}):(0,F.jsx)(l.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.contentEngagement.tooltip.allTime",defaultMessage:"All time activity on all pages in the workspace (includes private and shared)"})})]}),(0,F.jsx)(k.f,{currentFilter:o,onChangeFilter:D})]}),(0,F.jsxs)(j.rj,{gap:16,children:[(0,F.jsx)(j.r8,{row:1,col:1,children:(0,F.jsx)(T.q,{style:y.cardContainer,textStyles:y.cardTextContainer,loading:a,error:n,icon:_.N,iconStyles:{height:48,width:48},title:(0,F.jsx)(l.FormattedMessage,{id:"workspaceAnalytics.content.contentEngagement.totalViews",defaultMessage:"{pageViews} total views",values:{pageViews:(0,F.jsx)(S.e,{abbreviateNumber:x<N,num:I})}}),byline:(0,F.jsx)(f.Z,{isSecondaryColor:!0,children:(0,F.jsx)(l.FormattedMessage,{id:"workspaceAnalytics.content.contentEngagement.uniqueViews",defaultMessage:"{uniquePageViews} unique page views",values:{uniquePageViews:(0,F.jsx)(S.e,{abbreviateNumber:x<N,num:A})}})})})}),(0,F.jsx)(j.r8,{row:1,col:2,children:(0,F.jsx)(T.q,{style:y.cardContainer,textStyles:y.cardTextContainer,loading:a,error:n,icon:M.j,iconStyles:{height:36,width:36},title:(0,F.jsx)(l.FormattedMessage,{id:"workspaceAnalytics.content.contentEngagement.pagesCreated",defaultMessage:"{pagesCreated} pages created",values:{pagesCreated:(0,F.jsx)(S.e,{abbreviateNumber:x<N,num:E})}}),byline:(0,F.jsx)(f.Z,{isSecondaryColor:!0,children:(0,F.jsx)(l.FormattedMessage,{id:"workspaceAnalytics.content.contentEngagement.pageEdits.byline",defaultMessage:"{pageEdits} edits",values:{pageEdits:(0,F.jsx)(S.e,{abbreviateNumber:x<N,num:P})}})})})})]})]})}var A=a(798165),E=a(73075),P=a(153855),R=a(134690),D=a(577883),V=a(740394),Z=a(568785),L=a(271291),B=a(844678),U=a(498569),O=a(815145),z=a(733907),q=a(356666),K=a(727714),W=a(800893),H=a(412714),G=a(484210),$=a(460709),Q=a(61766),Y=a(552275),J=a(231945),X=a(573063),ee=a(478140),te=a(632163),ae=a(953437),se=a(672495);function ne(e){let{blockStore:t}=e;const a=(0,b.O7)(),s=(0,n.qz)(void 0,Q.Z),o=(0,i.yK)((e=>({changePermissionsIcon:{height:18,width:18,color:e.regularIconColor,fill:"currentColor"},copyLinkIcon:{height:15,width:15,color:e.regularIconColor,fill:"currentColor"},openLinkIcon:{height:15,width:15,color:e.regularIconColor,fill:"currentColor",transform:"rotate(-45deg)"}})),[]);const r={key:"actions",render:e=>(0,F.jsx)(se.Z,{...e}),items:[{key:"copy-link",render:e=>(0,F.jsx)(Y.Z,{...e,icon:(0,K.N)(o.copyLinkIcon),title:(0,F.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.page.actions.copyLink",defaultMessage:"Copy link to page"})}),action:async function(){const e=(0,G.ZP)({store:t,pageVisitSource:O.tY.CopyLink});await W.RD({environment:a,stringValue:e,copiedMessage:W.tq.copiedLinkToClipboard}),s.setState({open:!1})}},{key:"open-page-in-new-tab",render:e=>(0,F.jsx)(Y.Z,{...e,icon:(0,z.n)(o.openLinkIcon),title:(0,F.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.page.actions.openLink",defaultMessage:"Open in new tab"})}),action:function(){const e=(0,G.ZP)({store:t,pageVisitSource:O.tY.LinkInPage});H.D({environment:a,url:e}),s.setState({open:!1})}}]};return(0,F.jsx)(J.ZP,{popupType:ae.kQ.Popup,alignmentToOrigin:ae.ZP.Alignment.Center,placementToOrigin:ae.ZP.Placement.Right,style:{width:248},render:()=>(0,F.jsx)(ee.Z,{menuType:$.og.Popup,width:248,children:(0,F.jsx)(te.Z,{type:te.i.Vertical,initialFocus:void 0,sections:[r]})}),buttonPopupStore:s,renderOrigin:e=>(0,F.jsx)(X.Z,{icon:q.o,...e})})}const ie=(0,l.defineMessages)({views:{id:"workspaceAnalytics.contentTab.contentTable.viewsColumn.tooltip",defaultMessage:"Number of times users have viewed the page"},uniqueViews:{id:"workspaceAnalytics.contentTab.contentTable.uniqueViewsColumn.tooltip",defaultMessage:"Total number of users that have viewed page in the selected period"}}),oe={id:"page",headerTitle:(0,F.jsx)(he,{message:r.y3.page}),renderCell:e=>(0,F.jsx)(B.o,{blockStore:e.navigableBlockStore,rightIcon:(0,F.jsx)(ne,{blockStore:e.navigableBlockStore})}),widthData:{width:320,maxWidth:320},sortable:!1},re={id:"location",headerTitle:(0,F.jsx)(l.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.allPages.table.location.name",defaultMessage:"Location"}),renderCell:e=>(0,F.jsx)(R.N,{blockStore:e.navigableBlockStore,teamStore:e.teamStore}),widthData:{width:140},sortable:!1},le={id:"audience",headerTitle:(0,F.jsx)(he,{message:r.y3.audience}),renderCell:e=>(0,F.jsx)(f.Z,{children:(0,P.e)(e.audience)}),widthData:{width:140},sortable:!1},de={id:"views",headerTitle:(0,F.jsx)(U.r,{tooltipMessageDescriptor:ie.views,columnHeader:r.y3.allViews}),renderCell:e=>(0,F.jsx)(f.Z,{children:e.views.toLocaleString()}),widthData:{width:100},sortable:!0},ce={id:"uniqueViews",headerTitle:(0,F.jsx)(U.r,{tooltipMessageDescriptor:ie.uniqueViews,columnHeader:r.y3.uniqueViews}),renderCell:e=>(0,F.jsx)(f.Z,{children:e.uniqueViews.toLocaleString()}),widthData:{width:100},sortable:!0},ue={id:"createdBy",headerTitle:(0,F.jsx)(he,{message:r.y3.createdBy}),renderCell:e=>e.createdById?(0,F.jsx)(D.t,{blockStore:e.navigableBlockStore,userIds:[e.createdById]}):null,widthData:{width:140},sortable:!1},ge={id:"createdTime",headerTitle:(0,F.jsx)(he,{message:r.y3.createdAt}),renderCell:e=>(0,F.jsx)(L.T,{dateTs:e.createdTime}),widthData:{width:100},sortable:!1},me=[oe,de,ce,re,le,{id:"lastEditedBy",headerTitle:(0,F.jsx)(he,{message:r.y3.lastEditedBy}),renderCell:e=>e.lastEditedById?(0,F.jsx)(D.t,{blockStore:e.navigableBlockStore,userIds:[e.lastEditedById]}):null,widthData:{width:140},sortable:!1},{id:"lastEditedTime",headerTitle:(0,F.jsx)(he,{message:r.y3.lastEditedAt}),renderCell:e=>(0,F.jsx)(L.T,{dateTs:e.lastEditedTime}),widthData:{width:100},sortable:!1},ue,ge];function pe(e){let{navigableBlockStores:t,analyticsByPageId:a,runNewSearch:o,sort:r,setSort:d,loadNextPage:c,loading:u,error:g}=e;const m=(0,n.VK)((()=>t.map((e=>{var t,s,n;return{id:e.id,isClickable:!1,navigableBlockStore:e,teamStore:(0,A.VP)(e),views:(null===(t=a.get(e.id))||void 0===t?void 0:t.pageViews)||0,uniqueViews:(null===(s=a.get(e.id))||void 0===s?void 0:s.uniquePageViews)||0,createdTime:e.getCreatedTime(),lastEditedTime:e.getLastEditedTime(),createdById:e.getCreatedById(),lastEditedById:e.getLastEditedById(),audience:(null===(n=a.get(e.id))||void 0===n?void 0:n.audience)||"private"}}))),[t,a]),p=(0,s.useMemo)((()=>function(e){const t=me.find((t=>"pageViews"===e.field&&"views"===t.id||"uniquePageViews"===e.field&&"uniqueViews"===t.id)),a=t?{column:t,sortAscending:"asc"===e.direction}:void 0;return a}(r)),[r]),h=(0,i.yK)((e=>(0,V.b)({columnRenderInfo:me,theme:e,containerMarginTop:0})),[]),v=(0,i.yK)((e=>({emptyQuery:{marginTop:15,marginBottom:40,textAlign:"center"},loadingSpinner:{margin:"24px auto 24px"}})),[]);return g?(0,F.jsx)(E.q,{error:g,runNewSearch:o}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(V.D,{hideHeaderRowPadding:!0,allowHorizontalScroll:!0,setStickyHeaderRow:!0,maxHeight:500,columnRenderInfo:me,rows:m,sortState:p,onSortStateChanged:e=>{d(function(e){const t="views"===e.column.id?"pageViews":"uniquePageViews",a=e.sortAscending?"asc":"desc";return{field:t,direction:a}}(e))},onLoadMore:c,renderNoRowsComponent:()=>(0,F.jsx)(f.Z,{isSmall:!0,style:v.emptyQuery,children:!u&&0===t.length&&(0,F.jsx)(l.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.allPages.table.empty",defaultMessage:"No pages found with your query."})}),styles:h}),u?(0,F.jsx)(Z.Z,{style:v.loadingSpinner}):null]})}function he(e){let{message:t}=e;const a=(0,l.useIntl)();return(0,F.jsx)(F.Fragment,{children:a.formatMessage(t)})}a(757658);var fe=a(421202),ve=a(653965),xe=a(401898),ye=a(454642),be=a(783726),_e=a(206258),Me=a(568117);const we={query:"",createdBy:[],lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},teamIds:[]},Ce={field:"pageViews",direction:"desc"},je=be.D2,Se={filters:we,sort:Ce,timeRange:je,navigableBlockIds:[],analyticsByPageId:new Map,numPagesLoaded:0,paginationToken:void 0,hasNextPage:!0,loading:!1,error:void 0,shouldReRunSearch:!1};var Te=a(30397),ke=a(936550),Fe=a(679782),Ne=a(166994),Ie=a(235389);const Ae=(0,l.defineMessages)({placeholder:{id:"settings.workspaceAnalytics.contentTab.placeholder",defaultMessage:"Search by title"}});function Ee(e){let{spaceStore:t,teamStores:a,timeRange:s,filters:o,runNewSearch:r,setFilters:d,setTimeRange:c}=e;const g=(0,n.VK)((()=>a??Te.Z.state.teams),[a]),m=(0,i.yK)((e=>({container:{width:"100%",margin:"0 auto 14px"},filterPillsContainer:{width:"100%",display:"flex",flexWrap:"wrap",rowGap:4,flexDirectionRow:"row",alignItems:"center"},timeRangeContainer:{display:"flex",flexDirectionRow:"row",alignItems:"center",justifyContent:"center",gap:4,borderRight:`1px solid ${e.tableDividerColor}`,marginRight:12,paddingRight:6}})),[]);return(0,F.jsxs)("div",{style:m.container,children:[(0,F.jsx)(Ne.O,{mode:Ne.p.OnChange,query:o.query,setQueryFilter:function(e){d({query:e},{runSearchAfter:!0})},placeholderText:u.default.formatMessage(Ae.placeholder)}),(0,F.jsxs)("div",{style:m.filterPillsContainer,children:[(0,F.jsxs)("div",{style:m.timeRangeContainer,children:[(0,F.jsx)(f.Z,{isSecondaryColor:!0,children:(0,F.jsx)(l.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.timeRange",defaultMessage:"Views from"})}),(0,F.jsx)(k.f,{currentFilter:s,onChangeFilter:c})]}),(0,F.jsx)(Ie.p,{selectedTeamIds:o.teamIds,setSelectedTeamIds:function(e){d({teamIds:e})},onMenuClose:r,teamStores:g}),(0,F.jsx)(ke.y,{spaceStore:t,createdByFilterIds:o.createdBy,setCreatedByFilter:function(e){d({createdBy:e})},runNewSearch:r,includeGuests:!1}),(0,F.jsx)(Fe.f,{lastEditedTime:o.lastEditedTime,createdTime:o.createdTime,setLastEditedTime:function(e){d({lastEditedTime:e,createdTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})},setCreatedOnTime:function(e){d({createdTime:e,lastEditedTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})}})]})]})}function Pe(e){var t;let{spaceStore:a,teamStores:r,contentEngagement:l}=e;const d=(0,o.D9)(a.id),u=(0,s.useRef)(!1),{loadNextPage:g,navigableBlockStores:m,analyticsByPageId:p,runNewSearch:h,setFilters:f,setTimeRange:v,timeRange:x,filters:_,sort:M,setSort:C,loading:j,error:S}=function(e){let{spaceStore:t}=e;const a=(0,b.O7)(),[n,i]=(0,s.useState)(Se),o=(0,s.useRef)(we),r=(0,s.useRef)(Ce),l=(0,s.useRef)(je),{organizationOwnerRecordCache:d,updateCacheWithRecordMap:u}=(0,s.useContext)(Me.V),g=(0,s.useCallback)((async e=>{let{fetchFromFirstPage:s,ignoreSearchInputComparison:d}=e;const g=!ve.Xy(n.filters,o.current)||!ve.Xy(n.sort,r.current)||!ve.Xy(n.timeRange,l.current);if(!d&&!g)return;o.current=n.filters,r.current=n.sort,l.current=n.timeRange;let m=n.loading,p=n.error,h=n.hasNextPage,f=n.paginationToken;if(s&&(i((e=>({...Se,filters:e.filters,timeRange:e.timeRange,sort:e.sort}))),m=Se.loading,p=Se.error,h=Se.hasNextPage,f=Se.paginationToken),!h||m)return;if(p)return;i((e=>({...e,loading:!0})));const v=await ye.loadContentAnalytics(a,{spaceId:t.id,sort:n.sort,titleQuery:n.filters.query,filters:{inTeams:n.filters.teamIds,lastEditedTime:(0,c.Hq)(n.filters.lastEditedTime),createdTime:(0,c.Hq)(n.filters.createdTime),createdBy:n.filters.createdBy},timeRange:n.timeRange,startCursor:f});if("failed"===v.type)return void i((e=>({...e,loading:!1,error:v.error})));u(v);const x=v.data.results;i((e=>{const t=[],a=new Set(e.navigableBlockIds),s=new Map(e.analyticsByPageId);for(const i of x){const e=i.id,n=i.analytics;a.has(e)||(t.push(e),s.set(e,n))}const n=[...e.navigableBlockIds,...t];return{...e,navigableBlockIds:n,analyticsByPageId:s,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:v.data.nextCursor,hasNextPage:Boolean(v.data.nextCursor)}}))}),[a,t,n.filters,n.sort,n.timeRange,n.loading,n.error,n.hasNextPage,n.paginationToken,u]),m=(0,s.useMemo)((()=>n.navigableBlockIds.map((e=>new _e.G(a,{id:e,table:fe.iU},{inMemoryRecordCache:d})))),[n.navigableBlockIds,d,a]);(0,s.useEffect)((()=>{n.shouldReRunSearch&&(i((e=>({...e,shouldReRunSearch:!1}))),g({fetchFromFirstPage:!0,ignoreSearchInputComparison:!1}))}),[n.shouldReRunSearch,g]);const p=(0,s.useCallback)((async()=>{n.shouldReRunSearch||await g({fetchFromFirstPage:!1,ignoreSearchInputComparison:!0})}),[n.shouldReRunSearch,g]),h=(0,s.useCallback)((async e=>{await g({fetchFromFirstPage:!0,ignoreSearchInputComparison:e||!1})}),[g]),f=(0,s.useCallback)(((e,t)=>{i((a=>({...a,filters:{...a.filters,...e},...null!=t&&t.runSearchAfter?{shouldReRunSearch:null==t?void 0:t.runSearchAfter}:void 0})));for(const s of(0,xe.Yd)(e))ve.Xy(e[s],we[s])||w.uS(a,{filter:s,value:"createdBy"===s||"teamIds"===s?e[s]:void 0})}),[a]),v=(0,s.useCallback)((e=>{i((t=>({...t,timeRange:e,shouldReRunSearch:!0}))),w.e2(a,{daysFilter:e})}),[a]),x=(0,s.useCallback)((e=>{i((t=>({...t,sort:e,shouldReRunSearch:!0}))),w.jM(a,{column:e.field,isAscending:"asc"===e.direction})}),[a]);return{filters:n.filters,sort:n.sort,timeRange:n.timeRange,analyticsByPageId:n.analyticsByPageId,loading:n.loading,error:n.error,navigableBlockStores:m,loadNextPage:p,runNewSearch:h,setFilters:f,setTimeRange:v,setSort:x}}({spaceStore:a}),T=(0,i.yK)((e=>({container:{display:"flex",flexDirection:"column",gap:16}})),[]),k=(0,n.VK)((()=>Boolean(a.canAdmin())),[a]),N=(0,s.useMemo)((()=>void 0!==d&&a.id!==d),[a.id,d]);(0,s.useEffect)((()=>{u.current&&!N||(h(!0),u.current=!0)}),[h,N]);const A=(0,n.VK)((()=>a.getName()),[a]);if("NotFoundError"===(null==l||null===(t=l.error)||void 0===t?void 0:t.name))return(0,F.jsx)(y.y,{type:"empty",spaceName:A});const E={..._,daysFilter:x,lastEditedTime:(0,c.Hq)(_.lastEditedTime),createdTime:(0,c.Hq)(_.createdTime)};return(0,F.jsxs)("div",{style:T.container,children:[(0,F.jsx)(I,{data:l.data,loading:l.loading,error:l.error,daysFilter:l.daysFilter,setDaysFilter:l.setDaysFilter}),(0,F.jsx)(Re,{canAdmin:k,filters:E}),(0,F.jsx)(Ee,{spaceStore:a,teamStores:r,runNewSearch:h,setFilters:f,filters:_,timeRange:x,setTimeRange:v}),(0,F.jsx)(pe,{navigableBlockStores:m,analyticsByPageId:p,runNewSearch:h,sort:M,setSort:C,loadNextPage:g,loading:j,error:S})]})}function Re(e){const t=(0,i.yK)((()=>({sectionTitle:{fontWeight:d.Z.fontWeight.semibold,fontSize:16},sectionTitleSection:{display:"flex",flexFlow:"row",alignItems:"center"},helpInfo:{marginLeft:4},wrapper:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginTop:12},exportButton:{marginLeft:5}})),[]),{canAdmin:a,filters:s}=e,{daysFilter:n}=s,o=(0,F.jsxs)("div",{style:t.sectionTitleSection,children:[(0,F.jsx)(f.Z,{style:t.sectionTitle,children:(0,F.jsx)(l.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.allPages.title",defaultMessage:"Pages"})}),(0,F.jsx)(h.Z,{placement:m.u.Bottom,render:e=>(0,F.jsx)(v.Z,{...e,href:(0,g.UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:t.helpInfo}),renderTooltip:()=>"all_time"!==n?(0,F.jsx)(l.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.pages.tooltip.lastDays",defaultMessage:"Activity from the {dateRange} on pages you have access to",values:{dateRange:u.default.formatMessage(r.xX[n])}}):(0,F.jsx)(l.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.pages.tooltip.allTime",defaultMessage:"All time activity on pages you have access to in the workspace"})})]});return(0,F.jsxs)("div",{style:t.wrapper,children:[o,a&&(0,F.jsx)(x.f,{style:t.exportButton,analyticsType:p.x.Content,filters:s})]})}},242485:(e,t,a)=>{a.d(t,{y:()=>h});a(667294);var s=a(800480),n=a(724405),i=a(883176),o=a(584169),r=a(709291),l=a(412714),d=a(433929),c=a(918514),u=a(489728),g=a(164369),m=a(785893);const p=(0,r.defineMessages)({emptyAnalyticsHeading:{id:"workspaceAnalyticsTabs.empty.heading",defaultMessage:"No workspace analytics yet"},emptyAnalyticsDescription:{id:"workspaceAnalyticsTabs.empty.description",defaultMessage:"It may take some time for workspace analytics information to appear."},disabledAnalyticsHeading:{id:"workspaceAnalyticsTabs.disabled.heading",defaultMessage:"Analytics are disabled"},disabledAnalyticsDescription:{id:"workspaceAnalyticsTabs.disabled.description",defaultMessage:"A workspace owner has turned off page view recording for {name}.{br}This information will not be available in your workspace settings or on individual pages."},disabledAnalyticsDescriptionNoSpaceName:{id:"workspaceAnalyticsTabs.disabled.description.unnamed",defaultMessage:"A workspace owner has turned off page view recording for this space.{br}This information will not be available in your workspace settings or on individual pages."}});function h(e){const t=(0,n.yK)((e=>({outerDiv:{display:"flex",flexDirection:"column",justifyContent:"center",height:"80%",gap:24},innerDiv:{display:"flex",flexDirection:"column",textAlign:"center",alignItems:"center",gap:4},header:{fontSize:16,fontWeight:500},analyticsIcon:{fill:e.mediumTextColor,padding:20,height:150,width:150},learnMoreIcon:{width:14,height:14},learnMore:{gap:4}})),[]),a=(0,s.O7)(),{type:h,spaceName:f}=e,v=function(e,t){switch(e){case"empty":return{heading:d.default.formatMessage(p.emptyAnalyticsHeading),description:d.default.formatMessage(p.emptyAnalyticsDescription)};case"disabled":const e=t?(0,m.jsx)(r.FormattedMessage,{...p.disabledAnalyticsDescription,values:{name:t,br:(0,m.jsx)("br",{})}}):(0,m.jsx)(r.FormattedMessage,{...p.disabledAnalyticsDescriptionNoSpaceName,values:{br:(0,m.jsx)("br",{})}});return{heading:d.default.formatMessage(p.disabledAnalyticsHeading),description:e}}}(h,f);return(0,m.jsx)("div",{style:t.outerDiv,children:(0,m.jsxs)("div",{style:t.innerDiv,children:[(0,i.z)(t.analyticsIcon),(0,m.jsx)(g.Z,{isSecondaryColor:!0,style:t.header,children:v.heading}),(0,m.jsx)(g.Z,{isSecondaryColor:!0,children:v.description}),(0,m.jsxs)(u.Z,{onClick:()=>l.D({environment:a,url:(0,c.UY)("guides.workspaceAnalytics")}),style:t.learnMore,children:[(0,o.m)(t.learnMoreIcon),(0,m.jsx)(g.Z,{isSmall:!0,children:(0,m.jsx)(r.FormattedMessage,{id:"workspaceAnalyticsTabs.disabled.learnMore",defaultMessage:"Learn more"})})]})]})})}},589426:(e,t,a)=>{a.d(t,{Z:()=>P});var s=a(667294),n=a(886628),i=a(724405),o=a(242485),r=a(800480),l=a(950780),d=a(755964),c=a(128495),u=a(421202),g=a(573123),m=a(709291),p=a(137810),h=a(124697),f=a(433929),v=a(918514),x=a(135314),y=a(825464),b=a(206258),_=a(23124),M=a(526388),w=a(164369),C=a(474523),j=a(166661),S=a(568117),T=a(55360),k=a(297706),F=a(167579),N=a(785893);const I=640;function A(e){let{data:t,loading:a,error:o,daysFilter:A,setDaysFilter:E}=e;const P=(0,r.O7)(),{organizationOwnerRecordCache:R}=(0,s.useContext)(S.V),D=(0,i.yK)((e=>({title:{fontWeight:p.Z.fontWeight.medium,fontSize:16,marginBlock:"9px 4px",display:"flex",alignItems:"center"},helpInfo:{marginLeft:4},container:{display:"flex",flexDirection:"column",gap:16},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16},overviewCard:{width:"fit-content"}})),[]),[V,Z]=(0,x.e)(),{pageViews:L,uniquePageViews:B,pageEdits:U,topPages:O}=t,z=(0,n.VK)((()=>O.map((e=>{let{pageId:t,pageViews:a}=e;return{store:new b.G(P,{id:t,table:u.iU},{inMemoryRecordCache:R}),caption:(0,N.jsx)(m.FormattedMessage,{id:"workspaceAnalytics.overview.contentEngagement.caption.pageView",defaultMessage:"{pageViews} views",values:{pageViews:(0,N.jsx)(j.e,{abbreviateNumber:!1,num:a})}})}}))),[P,O,R]),q=(0,s.useCallback)((e=>{E(e),h.m0(P,{filter:"content_engagement",daysFilter:e})}),[P,E]);return(0,N.jsxs)("div",{style:D.container,ref:V,children:[(0,N.jsxs)("div",{style:D.titleContainer,children:[(0,N.jsxs)(w.Z,{style:D.title,children:[(0,N.jsx)(m.FormattedMessage,{id:"workspaceAnalytics.overview.contentEngagement.title",defaultMessage:"Content engagement"}),(0,N.jsx)(M.Z,{placement:y.u.Bottom,render:e=>(0,N.jsx)(C.Z,{...e,href:(0,v.UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:D.helpInfo}),renderTooltip:()=>"all_time"!==A?(0,N.jsx)(m.FormattedMessage,{id:"settings.workspaceAnalytics.overviewTab.contentEngagement.tooltip.lastDays",defaultMessage:"Activity on all pages in the workspace over the {dateRange}",values:{dateRange:f.default.formatMessage(g.xX[A])}}):(0,N.jsx)(m.FormattedMessage,{id:"settings.workspaceAnalytics.overviewTab.contentEngagement.tooltip.allTime",defaultMessage:"All time activity on all pages in the workspace"})})]}),(0,N.jsx)(F.f,{currentFilter:A,onChangeFilter:q})]}),(0,N.jsxs)(_.rj,{gap:16,children:[(0,N.jsx)(_.r8,{row:1,col:1,colEnd:3,children:(0,N.jsx)(k.q,{loading:a,error:o,icon:d.N,textStyles:D.overviewCard,title:(0,N.jsx)(m.FormattedMessage,{id:"workspaceAnalytics.overview.contentEngagement.views",defaultMessage:"{pageViews} total views",values:{pageViews:(0,N.jsx)(j.e,{abbreviateNumber:Z<I,num:L})}})})}),(0,N.jsx)(_.r8,{row:2,col:1,colEnd:3,children:(0,N.jsx)(k.q,{loading:a,error:o,icon:c.v,textStyles:D.overviewCard,iconStyles:{height:18,width:18},title:(0,N.jsx)(m.FormattedMessage,{id:"workspaceAnalytics.overview.contentEngagement.uniqueViews",defaultMessage:"{uniquePageViews} unique page views",values:{uniquePageViews:(0,N.jsx)(j.e,{abbreviateNumber:Z<I,num:B})}})})}),(0,N.jsx)(_.r8,{row:3,col:1,colEnd:3,children:(0,N.jsx)(k.q,{loading:a,error:o,icon:l.E,textStyles:D.overviewCard,iconStyles:{height:18,width:18},title:(0,N.jsx)(m.FormattedMessage,{id:"workspaceAnalytics.overview.contentEngagement.pageEdits",defaultMessage:"{pageEdits} edits",values:{pageEdits:(0,N.jsx)(j.e,{abbreviateNumber:Z<I,num:U})}})})}),(0,N.jsx)(_.r8,{row:1,rowEnd:4,col:3,colEnd:5,children:(0,N.jsx)(T.$,{loading:a,error:o,title:(0,N.jsx)(m.FormattedMessage,{id:"workspaceAnalytics.overview.contentEngagement.popularPages",defaultMessage:"Most popular pages"}),items:z})})]})]})}var E=a(881653);function P(e){var t,a;let{onUserTabFilterChange:s,spaceStore:r,contentEngagement:l,userEngagement:d}=e;const c=(0,i.yK)((e=>({container:{display:"flex",flexDirection:"column",gap:24}})),[]),u=(0,n.VK)((()=>r.getName()),[r]);if("NotFoundError"===(null===(t=l.error)||void 0===t?void 0:t.name)||"NotFoundError"===(null===(a=d.error)||void 0===a?void 0:a.name))return(0,N.jsx)(o.y,{type:"empty",spaceName:u});return(0,N.jsxs)("div",{style:c.container,children:[(0,N.jsx)(E.D,{data:d.data,loading:d.loading,error:d.error,daysFilter:d.daysFilter,setDaysFilter:function(e){s({graphFilter:"all_time"===e?"last_90_days":e}),d.setDaysFilter(e)}}),(0,N.jsx)(A,{data:l.data,loading:l.loading,error:l.error,daysFilter:l.daysFilter,setDaysFilter:l.setDaysFilter})]})}},881653:(e,t,a)=>{a.d(t,{D:()=>I,c:()=>A});var s=a(667294),n=a(800480),i=a(886628),o=a(724405),r=a(509999),l=a(429369),d=a(519889),c=a(573123),u=a(709291),g=a(401898),m=a(137810),p=a(124697),h=a(433929),f=a(918514),v=a(135314),x=a(825464),y=a(206258),b=a(23124),_=a(526388),M=a(164369),w=a(474523),C=a(166661),j=a(568117),S=a(55360),T=a(297706),k=a(167579),F=a(785893);const N=640;function I(e){let{data:t,loading:a,error:r,daysFilter:g,setDaysFilter:I}=e;const E=(0,n.O7)(),{activeMembersCount:P,previousActiveMembersCount:R,activeGuestsCount:D,previousActiveGuestsCount:V,topTeamspaces:Z,topViewers:L,topEditors:B}=t,U=(0,o.yK)((e=>({title:{fontWeight:m.Z.fontWeight.medium,fontSize:16,marginBlock:"8px 4px",display:"flex",alignItems:"center"},helpInfo:{marginLeft:4},container:{display:"flex",flexDirection:"column",gap:16},summaryCard:{height:70},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16}})),[]),[O,z]=(0,v.e)(),{organizationOwnerRecordCache:q}=(0,s.useContext)(j.V),K=(0,s.useCallback)((e=>{p.m0(E,{filter:"user_engagement",daysFilter:e}),I(e)}),[E,I]),W=(0,i.VK)((()=>Z.map((e=>{let{teamspaceId:t,pageViews:a}=e;return{store:new y.zX(E,{id:t,table:l.e0},{inMemoryRecordCache:q}),caption:(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.caption.pageViews",defaultMessage:"{pageViews} views",values:{pageViews:(0,F.jsx)(C.e,{abbreviateNumber:!0,num:a})}})}})).filter((e=>e.store.canRead())).slice(0,5)),[E,Z,q]),H=(0,i.VK)((()=>L.map((e=>{let{userId:t,pageViews:a}=e;return{store:new y.U6(E,{id:t,table:d.KJ}),caption:(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.caption.pageView",defaultMessage:"{pageViews} views",values:{pageViews:(0,F.jsx)(C.e,{abbreviateNumber:!0,num:a})}})}})).slice(0,5)),[E,L]),G=(0,i.VK)((()=>B.map((e=>{let{userId:t,pageEdits:a}=e;return{store:new y.U6(E,{id:t,table:d.KJ}),caption:(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.caption.pageEdits",defaultMessage:"{pageEdits} edits",values:{pageEdits:(0,F.jsx)(C.e,{abbreviateNumber:!0,num:a})}})}})).slice(0,5)),[E,B]);return(0,F.jsxs)("div",{style:U.container,ref:O,children:[(0,F.jsxs)("div",{style:U.titleContainer,children:[(0,F.jsxs)(M.Z,{style:U.title,children:[(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.title",defaultMessage:"User engagement"}),(0,F.jsx)(_.Z,{placement:x.u.Bottom,render:e=>(0,F.jsx)(w.Z,{...e,href:(0,f.UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:U.helpInfo}),renderTooltip:()=>"all_time"!==g?(0,F.jsx)(u.FormattedMessage,{id:"settings.workspaceAnalytics.overviewTab.userEngagement.tooltip.lastDays",defaultMessage:"Active members and guests have viewed at least one page within the {dateRange}",values:{dateRange:h.default.formatMessage(c.xX[g])}}):(0,F.jsx)(u.FormattedMessage,{id:"settings.workspaceAnalytics.overviewTab.userEngagement.tooltip.allTime",defaultMessage:"Active members and guests have viewed at least one page in the workspace"})})]}),(0,F.jsx)(k.f,{currentFilter:g,onChangeFilter:K})]}),(0,F.jsxs)(b.rj,{gap:16,children:[(0,F.jsx)(b.r8,{row:1,col:1,children:(0,F.jsx)(T.q,{style:U.summaryCard,loading:a,error:r,title:(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.activeMembersCount",defaultMessage:"{activeMembersCount} active members",values:{activeMembersCount:(0,F.jsx)(C.e,{abbreviateNumber:z<N,num:P})}}),byline:void 0!==R?(0,F.jsx)(A,{userType:"members",daysFilter:g,count:P,previousCount:R}):null})}),(0,F.jsx)(b.r8,{row:1,col:2,children:(0,F.jsx)(T.q,{style:U.summaryCard,loading:a,error:r,title:(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.activeGuestsCount",defaultMessage:"{activeGuestsCount} active guests",values:{activeGuestsCount:(0,F.jsx)(C.e,{abbreviateNumber:z<N,num:D})}}),byline:void 0!==V?(0,F.jsx)(A,{userType:"guests",daysFilter:g,count:D,previousCount:V}):null})})]}),(0,F.jsxs)(b.rj,{gap:16,children:[(0,F.jsx)(b.r8,{row:1,col:1,children:(0,F.jsx)(S.$,{loading:a,error:r,title:(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.activeTeamspaces",defaultMessage:"Most active teamspaces"}),items:W})}),(0,F.jsx)(b.r8,{row:1,col:2,children:(0,F.jsx)(S.$,{loading:a,error:r,title:(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.activeViewers",defaultMessage:"Most active viewers"}),items:H})}),(0,F.jsx)(b.r8,{row:1,col:3,children:(0,F.jsx)(S.$,{loading:a,error:r,title:(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.activeEditors",defaultMessage:"Most active editors"}),items:G})})]})]})}function A(e){let{userType:t,daysFilter:a,count:s,previousCount:n}=e;const i=0===s&&0===n?0:Math.round((s-n)/n*100);let l;l=i===1/0?function(e,t,a){if("all_time"===a)return(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.none",defaultMessage:"No changes yet"});return"guests"===e?(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.changeFromZero.summaryByline.guests.positive",defaultMessage:"{changeValue} more guests than previous {numberOfDays} days",values:{changeValue:t.toLocaleString(),numberOfDays:c.ez[a].toLocaleString()}}):(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.changeFromZero.summaryByline.members.positive",defaultMessage:"{changeValue} more members than previous {numberOfDays} days",values:{changeValue:t.toLocaleString(),numberOfDays:c.ez[a].toLocaleString()}})}(t,s,a):function(e,t){switch(t){case"all_time":return 0===e?(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.none",defaultMessage:"No changes yet"}):e>0?(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.positive",defaultMessage:"{changeInPercentage}% more since the start",values:{changeInPercentage:Math.abs(e)}}):(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.negative",defaultMessage:"{changeInPercentage}% less since the start",values:{changeInPercentage:Math.abs(e)}});case"last_90_days":return 0===e?(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_90_days.none",defaultMessage:"No changes in previous 90 days"}):e>0?(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_90_days.positive",defaultMessage:"{changeInPercentage}% more than previous 90 days",values:{changeInPercentage:Math.abs(e)}}):(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_90_days.negative",defaultMessage:"{changeInPercentage}% less than previous 90 days",values:{changeInPercentage:Math.abs(e)}});case"last_28_days":return 0===e?(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_28_days.none",defaultMessage:"No changes in previous 28 days"}):e>0?(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_28_days.positive",defaultMessage:"{changeInPercentage}% more than previous 28 days",values:{changeInPercentage:Math.abs(e)}}):(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_28_days.negative",defaultMessage:"{changeInPercentage}% less than previous 28 days",values:{changeInPercentage:Math.abs(e)}});case"last_7_days":return 0===e?(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_7_days.none",defaultMessage:"No changes in previous 7 days"}):e>0?(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_7_days.positive",defaultMessage:"{changeInPercentage}% more than previous 7 days",values:{changeInPercentage:Math.abs(e)}}):(0,F.jsx)(u.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_7_days.negative",defaultMessage:"{changeInPercentage}% less than previous 7 days",values:{changeInPercentage:Math.abs(e)}});default:(0,g.t1)(t)}}(i,a);const d=i>0?(0,r.J)({height:12,width:12,fill:"currentColor"}):i<0?(0,r.J)({height:12,width:12,transform:"rotate(90deg)",fill:"currentColor"}):void 0,m=(0,o.yK)((e=>({text:{color:i>0?e.accentColors.green[500]:i<0?e.accentColors.red[500]:e.lightTextColor,display:"flex",alignItems:"center",gap:4}})),[i]);return(0,F.jsxs)("span",{style:m.text,children:[d,l]})}},588149:(e,t,a)=>{a.d(t,{Z:()=>B});var s=a(667294),n=a(886628),i=a(724405),o=a(966673),r=a(573123),l=a(709291),d=a(137810),c=a(433929),u=a(918514),g=a(825464),m=a(526388),p=a(164369),h=a(474523),f=a(167579),v=a(242485),x=(a(757658),a(21703),a(800480)),y=a(159730),b=a(653965),_=a(124697),M=a(454642),w=a(783726),C=a(833954);const j={field:"num_searches",direction:"desc"},S=w.D2,T={sort:j,timeRange:S,searchAnalyticsDataList:[],numPagesLoaded:0,paginationToken:void 0,hasNextPage:!0,loading:!1,error:void 0,shouldReRunSearch:!1};var k=a(401898),F=a(73075),N=a(740394),I=a(568785),A=a(498569),E=a(785893);const P=(0,l.defineMessages)({numSearches:{id:"workspaceAnalytics.searchTab.searchTable.searches.tooltip",defaultMessage:"Number of times users in the workspace have searched the query"},numUniqueUsers:{id:"workspaceAnalytics.searchTab.searchTable.uniqueSearches.tooltip",defaultMessage:"Total number of users that have searched the query"},ctr:{id:"workspaceAnalytics.searchTab.searchTable.ctr.tooltip",defaultMessage:"Percentage of times users have opened page from results of this query"}}),R=(0,l.defineMessages)({queryText:{id:"spaceAnalyticsSearchTable.column.query",defaultMessage:"Query"},numSearches:{id:"spaceAnalyticsSearchTable.column.searches",defaultMessage:"Searches"},numUniqueUsers:{id:"spaceAnalyticsSearchTable.column.uniqueSearches",defaultMessage:"Unique searches"},ctr:{id:"spaceAnalyticsSearchTable.column.ctr",defaultMessage:"Click-through rate"}}),D={queryText:{id:"queryText",headerTitle:c.default.formatMessage(R.queryText),renderCell:e=>(0,E.jsx)(p.Z,{children:e.queryText}),widthData:{width:200,maxWidth:300},sortable:!1},numSearches:{id:"numSearches",headerTitle:(0,E.jsx)(A.r,{tooltipMessageDescriptor:P.numSearches,columnHeader:R.numSearches}),renderCell:e=>(0,E.jsx)(L,{value:e.numSearches}),widthData:{width:120,maxWidth:120},sortable:!0},numUniqueUsers:{id:"numUniqueUsers",headerTitle:(0,E.jsx)(A.r,{tooltipMessageDescriptor:P.numUniqueUsers,columnHeader:R.numUniqueUsers}),renderCell:e=>(0,E.jsx)(L,{value:e.numUniqueUsers}),widthData:{width:120,maxWidth:120},sortable:!0},ctr:{id:"ctr",headerTitle:(0,E.jsx)(A.r,{tooltipMessageDescriptor:P.ctr,columnHeader:R.ctr}),renderCell:e=>(0,E.jsx)(L,{value:Math.round(1e3*e.ctr)/1e3,isPercentage:!0}),widthData:{width:120,maxWidth:120},sortable:!0}},V=(0,k.Yd)(D).map((e=>D[e]));function Z(e){let{searchAnalyticsDataList:t,runNewSearch:a,sort:o,setSort:d,loadNextPage:c,loading:u,error:g}=e;const m=(0,n.VK)((()=>t.map((e=>({id:e.queryText,isClickable:!1,...e})))),[t]),h=(0,s.useMemo)((()=>function(e){const t=r.Fi[e.field];if(!t)return;return{column:D[t],sortAscending:"asc"===e.direction}}(o)),[o]),f=(0,i.yK)((e=>(0,N.b)({columnRenderInfo:V,theme:e,containerMarginTop:0})),[]),v=(0,i.yK)((e=>({emptyQuery:{marginTop:15,marginBottom:40,textAlign:"center"},loadingSpinner:{margin:"24px auto 24px"}})),[]);return g?(0,E.jsx)(F.q,{error:g,runNewSearch:a}):(0,E.jsxs)("div",{children:[(0,E.jsx)(N.D,{hideHeaderRowPadding:!0,allowHorizontalScroll:!0,setStickyHeaderRow:!0,maxHeight:500,columnRenderInfo:V,rows:m,sortState:h,onSortStateChanged:e=>{d(function(e){const t=r.hx[e.column.id],a=e.sortAscending?"asc":"desc";if(!t)return{field:"num_searches",direction:a};return{field:t,direction:a}}(e))},onLoadMore:c,renderNoRowsComponent:()=>(0,E.jsx)(p.Z,{isSmall:!0,style:v.emptyQuery,children:!u&&0===t.length&&(0,E.jsx)(l.FormattedMessage,{id:"settings.workspaceAnalytics.searchTable.table.empty",defaultMessage:"No search query analytics to display."})}),styles:f}),u?(0,E.jsx)(I.Z,{style:v.loadingSpinner}):null]})}function L(e){let{value:t,isPercentage:a}=e;const s=(0,i.yK)((e=>({centered:{width:"100%",textAlign:"center"}})),[]),n=a?`${t}%`:t;return(0,E.jsx)(p.Z,{style:s.centered,children:n})}function B(e){const{spaceStore:t}=e,a=(0,i.yK)((()=>({header:{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",marginBottom:16},sectionTitle:{fontWeight:d.Z.fontWeight.semibold,fontSize:16,display:"flex",alignItems:"center"},helpInfo:{marginLeft:4}})),[]),w=(0,s.useRef)(!1),{searchAnalyticsDataList:k,timeRange:F,sort:N,loading:I,error:A,loadNextPage:P,runNewSearch:R,setTimeRange:D,setSort:V}=function(e){let{spaceStore:t}=e;const a=(0,x.O7)(),[n,i]=(0,s.useState)(T),o=(0,s.useRef)(j),r=(0,s.useRef)(S),d=(0,l.useIntl)(),c=(0,s.useCallback)((async e=>{let{fetchFromFirstPage:s,ignoreSearchInputComparison:l}=e;const d=!b.Xy(n.sort,o.current)||!b.Xy(n.timeRange,r.current);if(!l&&!d)return;o.current=n.sort,r.current=n.timeRange;let c=n.loading,u=n.error,g=n.hasNextPage,m=n.paginationToken;if(s&&(i((e=>({...T,timeRange:e.timeRange,sort:e.sort}))),c=T.loading,u=T.error,g=T.hasNextPage,m=T.paginationToken),!g||c)return;if(u)return;i((e=>({...e,loading:!0})));const p=await M.loadSearchAnalytics(a,{spaceId:t.id,sort:n.sort,timeRange:n.timeRange,startCursor:m});if("failed"===p.type)return void i((e=>({...e,loading:!1,error:p})));const h=p.data.results;i((e=>{const t=[],a=new Set(e.searchAnalyticsDataList.map((e=>e.queryText)));for(const n of h){const e=n.queryText;a.has(e)||(t.push(n),a.add(e))}const s=[...e.searchAnalyticsDataList,...t];return{...e,searchAnalyticsDataList:s,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:p.data.nextCursor,hasNextPage:Boolean(p.data.nextCursor)}}))}),[a,t,n.sort,n.timeRange,n.loading,n.error,n.hasNextPage,n.paginationToken]);(0,s.useEffect)((()=>{n.shouldReRunSearch&&(i((e=>({...e,shouldReRunSearch:!1}))),c({fetchFromFirstPage:!0,ignoreSearchInputComparison:!1}))}),[n.shouldReRunSearch,c]);const u=(0,s.useCallback)((async()=>{n.shouldReRunSearch||await c({fetchFromFirstPage:!1,ignoreSearchInputComparison:!0})}),[n.shouldReRunSearch,c]),g=(0,s.useCallback)((async e=>{await c({fetchFromFirstPage:!0,ignoreSearchInputComparison:e||!1})}),[c]),m=(0,s.useCallback)((e=>{"all_time"!==e&&(i((t=>({...t,timeRange:e,shouldReRunSearch:!0}))),_.ye(a,{daysFilter:e}))}),[a]),p=(0,s.useCallback)((e=>{i((t=>({...t,sort:e,shouldReRunSearch:!0}))),_.$f(a,{column:e.field,isAscending:"asc"===e.direction})}),[a]),h=(0,s.useMemo)((()=>{if(n.error)return 404===n.error.status?new y.dR({message:(0,C.wf)(d,n.error)}):new Error((0,C.wf)(d,n.error))}),[n.error,d]);return{...n,error:h,loadNextPage:u,runNewSearch:g,setTimeRange:m,setSort:p}}({spaceStore:t}),L=(0,o.D9)(t.id),B=(0,s.useMemo)((()=>void 0!==L&&t.id!==L),[t.id,L]);(0,s.useEffect)((()=>{w.current&&!B||(R(!0),w.current=!0)}),[R,B]);const U=(0,n.VK)((()=>t.getName()),[t]);return"NotFoundError"===(null==A?void 0:A.name)?(0,E.jsx)(v.y,{type:"empty",spaceName:U}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("div",{style:a.header,children:[(0,E.jsxs)(p.Z,{style:a.sectionTitle,children:[(0,E.jsx)(l.FormattedMessage,{id:"settings.workspaceAnalytics.searchTab.searchQueries.title",defaultMessage:"Search queries"}),(0,E.jsx)(m.Z,{placement:g.u.Bottom,render:e=>(0,E.jsx)(h.Z,{...e,href:(0,u.UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:a.helpInfo}),renderTooltip:()=>(0,E.jsx)(l.FormattedMessage,{id:"settings.workspaceAnalytics.searchTab.searchQueries.tooltip",defaultMessage:"Displays popular search queries in the workspace from the {dateRange}",values:{dateRange:c.default.formatMessage(r.xX[F])}})})]}),(0,E.jsx)(f.f,{currentFilter:F,onChangeFilter:D,hideAllTime:!0})]}),(0,E.jsx)(Z,{searchAnalyticsDataList:k,runNewSearch:R,sort:N,setSort:V,loadNextPage:P,loading:I,error:A})]})}},365552:(e,t,a)=>{a.d(t,{Z:()=>Y});var s=a(667294),n=a(330251),i=a(800480),o=a(886628),r=a(724405),l=a(573123),d=a(709291),c=a(531701),u=a(137810),g=a(124697),m=a(783726),p=a(296994),h=a(433929),f=a(918514),v=a(135314),x=a(825464),y=a(124026),b=a(343568),_=a(526388),M=a(164369),w=a(474523),C=a(408840),j=a(242485),S=a(23124),T=a(166661),k=a(297706),F=a(167579),N=a(881653),I=a(785893);const A=640;function E(e){let{data:t,loading:a,error:s,daysFilter:n,setDaysFilter:i}=e;const[o,c]=(0,v.e)(),g=(0,r.yK)((e=>({title:{fontWeight:u.Z.fontWeight.medium,fontSize:16,marginBlock:"8px 4px",display:"flex",alignItems:"center"},container:{display:"flex",flexDirection:"column",gap:16},helpInfo:{marginLeft:4},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16},summaryCard:{height:70},cardContainer:{justifyContent:"flex-start",gap:18},cardTextContainer:{alignItems:"flex-start"}})),[]),{activeMembersCount:m,previousActiveMembersCount:p,activeGuestsCount:y,previousActiveGuestsCount:b}=t;return(0,I.jsxs)("div",{style:g.container,ref:o,children:[(0,I.jsxs)("div",{style:g.titleContainer,children:[(0,I.jsxs)(M.Z,{style:g.title,children:[(0,I.jsx)(d.FormattedMessage,{id:"settings.workspaceAnalytics.usersTab.userEngagement.title",defaultMessage:"User engagement"}),(0,I.jsx)(_.Z,{placement:x.u.Bottom,render:e=>(0,I.jsx)(w.Z,{...e,href:(0,f.UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:g.helpInfo}),renderTooltip:()=>"all_time"!==n?(0,I.jsx)(d.FormattedMessage,{id:"settings.workspaceAnalytics.usersTab.userEngagement.tooltip.lastDays",defaultMessage:"Active members and guests have viewed at least one page within the {dateRange}",values:{dateRange:h.default.formatMessage(l.xX[n])}}):(0,I.jsx)(d.FormattedMessage,{id:"settings.workspaceAnalytics.usersTab.userEngagement.tooltip.allTime",defaultMessage:"Active members and guests have viewed at least one page in the workspace"})})]}),(0,I.jsx)(F.f,{currentFilter:n,onChangeFilter:i})]}),(0,I.jsxs)(S.rj,{gap:16,children:[(0,I.jsx)(S.r8,{row:1,col:1,children:(0,I.jsx)(k.q,{style:g.summaryCard,loading:a,error:s,title:(0,I.jsx)(d.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.activeMembersCount",defaultMessage:"{activeMembersCount} active members",values:{activeMembersCount:(0,I.jsx)(T.e,{abbreviateNumber:c<A,num:m})}}),byline:void 0!==p?(0,I.jsx)(N.c,{userType:"members",daysFilter:n,count:m,previousCount:p}):null})}),(0,I.jsx)(S.r8,{row:1,col:2,children:(0,I.jsx)(k.q,{style:g.summaryCard,loading:a,error:s,title:(0,I.jsx)(d.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.activeGuestsCount",defaultMessage:"{activeGuestsCount} active guests",values:{activeGuestsCount:(0,I.jsx)(T.e,{abbreviateNumber:c<A,num:y})}}),byline:void 0!==b?(0,I.jsx)(N.c,{userType:"guests",daysFilter:n,count:y,previousCount:b}):null})})]})]})}var P=a(44643),R=a(947969),D=a(401898),V=a(883165),Z=a(80444),L=a(621752),B=a(740394),U=a(271291),O=a(582162),z=a(588775),q=a(498569);const K=(0,d.defineMessages)({page_views:{id:"workspaceAnalytics.usersTab.usersTable.pageViews.tooltip",defaultMessage:"Total number of page views for the user across all pages in the workspace"},page_edits:{id:"workspaceAnalytics.usersTab.usersTable.pageEdits.tooltip",defaultMessage:"Total number of page edits for the user across all pages in the workspace"}}),W=(0,d.defineMessages)({user:{id:"spaceAnalyticsUsersTab.column.user",defaultMessage:"User"},page_views:{id:"spaceAnalyticsUsersTab.column.pageViews",defaultMessage:"Page views"},page_edits:{id:"spaceAnalyticsUsersTab.column.pageEdits",defaultMessage:"Page edits"},last_active:{id:"spaceAnalyticsUsersTab.column.lastActive",defaultMessage:"Last active"},teams:{id:"spaceAnalyticsUsersTab.column.teams",defaultMessage:"Teamspaces"}}),H={user:{id:"user",renderCell:function(e){const{userStore:t,role:a}=e,n=(0,r.yK)((e=>({container:{height:52}})),[]);(0,s.useEffect)((()=>{t.load()}),[t]);return(0,o.VK)((()=>t.isReady()),[t])?(0,I.jsx)(L.Z,{containerStyle:n.container,actorStore:t,spaceRole:a&&(0,L.K)(a)}):(0,I.jsx)(O.L,{})},headerTitle:h.default.formatMessage(W.user),widthData:{width:100},sortable:!1},page_views:{id:"page_views",renderCell:function(e){const{page_views:t}=e,a=(0,r.yK)((e=>({eyeHideIcon:{width:20,height:20,color:e.lightIconColor},cell:{marginLeft:10}})),[]);if(void 0===t)return(0,I.jsx)(_.Z,{placement:x.u.Bottom,render:e=>(0,I.jsx)("div",{...e,children:(0,P.L)(a.eyeHideIcon)}),renderTooltip:e=>(0,I.jsx)(d.FormattedMessage,{id:"spaceAnalyticsUsersTab.optedOutUser.icon.tooltip",defaultMessage:"User has disabled page view tracking"})});return(0,I.jsx)(M.Z,{children:t})},headerTitle:(0,I.jsx)(q.r,{tooltipMessageDescriptor:K.page_views,columnHeader:W.page_views}),widthData:{width:80},sortable:!0},page_edits:{id:"page_edits",renderCell:function(e){const{page_edits:t}=e;return(0,I.jsx)(M.Z,{children:t})},headerTitle:(0,I.jsx)(q.r,{tooltipMessageDescriptor:K.page_edits,columnHeader:W.page_edits}),widthData:{width:80},sortable:!0},last_active:{id:"last_active",renderCell:function(e){const t=e.last_active;let a;a=t?(0,I.jsx)(U.T,{dateTs:t}):(0,I.jsx)(M.Z,{isSecondaryColor:!0,children:(0,I.jsx)(d.FormattedMessage,{id:"settings.workspaceAnalytics.usersTab.userTable.lastActiveTimestamp.noLastActive",defaultMessage:"No activity"})});return(0,I.jsx)("div",{children:a})},headerTitle:h.default.formatMessage(W.last_active),widthData:{width:50},sortable:!0},teams:{id:"teams",renderCell:function(e){const{teamStores:t,userStore:a,role:s}=e;if(!s)return(0,I.jsx)(M.Z,{children:(0,I.jsx)(d.FormattedMessage,{id:"settings.workspaceAnalytics.usersTab.teamsColumn.guest",defaultMessage:"None"})});return(0,I.jsx)(z.ZP,{teamStores:t,member:{userId:a.id,role:s}})},headerTitle:h.default.formatMessage(W.teams),widthData:{width:50},sortable:!1}};const G=(0,D.Yd)(H).map((e=>H[e])),$=25;function Q(e){const t=(0,i.O7)(),[a,n]=(0,s.useState)($),{teamStores:u,usersAndStats:m,filter:p,onUserTabFilterChange:h,usersAndStatsError:f}=e,v=(0,o.VK)((()=>{const{currentSpaceStore:e}=Z.default.state,t=m.map((e=>e.userStore.id)),a={};for(const s of t){const t=(0,V._P)(e,s),n=null==t?void 0:t.getMembershipType();if(n&&"none"!==n){const e=(0,R.qF)(n);a[s]=e}}return a}),[m]),[x,y]=(0,s.useState)({column:H.last_active,sortAscending:!1}),b=(0,s.useCallback)((e=>{g.gE(t,{column:e.column.id,isAscending:e.sortAscending}),y(e)}),[y,t]),_=m.map((e=>{let{userStore:t,stats:a}=e;return{id:a.userId,userStore:t,teamStores:u,isClickable:!1,last_active:a.lastActive,page_views:a.numPageViews,page_edits:a.numPageEdits,role:v[a.userId]}})).sort(function(e){switch(e.column.id){case"last_active":return(t,a)=>(0,l.Zj)(t.last_active,a.last_active,e.sortAscending);case"page_views":return(t,a)=>(0,l.yM)(t.page_views,a.page_views,e.sortAscending);case"page_edits":return(t,a)=>e.sortAscending?t.page_edits-a.page_edits:a.page_edits-t.page_edits;default:return(e,t)=>0}}(x)),w=(0,s.useMemo)((()=>_.slice(0,a)),[_,a]),C=(0,r.yK)((e=>({error:{color:c.ZP.red},dateFilterPill:{display:"flex",marginTop:10,marginBottom:15,flexFlow:"row",alignItems:"center"},timeFilterDescription:{marginRight:5}})),[]);const j=(0,s.useCallback)((e=>{g.Iw(t,{daysFilter:e}),h({tableFilter:e})}),[t,h]),S=(0,r.yK)((e=>(0,B.b)({columnRenderInfo:G,theme:e,containerMarginTop:0})),[]);return(0,I.jsxs)(I.Fragment,{children:[f&&(0,I.jsx)(M.Z,{isMultiline:!1,style:C.error,children:f}),(0,I.jsxs)("div",{style:C.dateFilterPill,children:[(0,I.jsx)(M.Z,{isSecondaryColor:!0,style:C.timeFilterDescription,children:(0,I.jsx)(d.FormattedMessage,{id:"workspaceAnalytics.timeFilter.description",defaultMessage:"Views and edits from"})}),(0,I.jsx)(F.f,{currentFilter:p,onChangeFilter:j})]}),(0,I.jsx)(B.D,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,setStickyHeaderRow:!0,maxHeight:500,sortState:x,onSortStateChanged:b,columnRenderInfo:G,rows:w,renderNoRowsComponent:()=>(0,I.jsx)("div",{children:"N/A"}),styles:S,onLoadMore:function(){a<m.length&&n(a+$)}})]})}function Y(e){var t,a;let{spaceStore:n,teamStores:p,usersTabData:b,onUserTabFilterChange:S,userEngagement:T}=e;const[k,F]=(0,v.e)(),N=(0,r.yK)((e=>({container:{display:"flex",flexDirection:"column",gap:16},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16},sectionTitle:{fontWeight:u.Z.fontWeight.medium,fontSize:16},sectionTitleLeft:{marginBlock:"8px 4px",marginBottom:5,display:"flex",alignItems:"center"},helpInfo:{marginLeft:4},wrapper:{display:"flex",flexDirection:"row",justifyContent:"space-around"},numUsersCaption:{display:"flex"},overviewText:{textAlign:"center"},error:{color:c.ZP.red},tableHeader:{marginTop:20,flexDirection:"row",display:"flex",justifyContent:"space-between",alignItems:"end"},tooltip:{marginLeft:3},infoIcon:{height:14,width:14,color:e.mediumTextColor}})),[]),A=(0,i.O7)(),P=(0,d.useIntl)(),R=(0,s.useCallback)((e=>{g.KC(A,{daysFilter:e});S({graphFilter:"all_time"===e?"last_90_days":e}),T.setDaysFilter(e)}),[S,T,A]),D=(0,o.VK)((()=>n.getName()),[n]);if("NotFoundError"===(null==b||null===(t=b.usersAndStatsError)||void 0===t?void 0:t.name)||"NotFoundError"===(null===(a=T.error)||void 0===a?void 0:a.name))return(0,I.jsx)(j.y,{type:"empty",spaceName:D});const V=Math.floor(F-8);return(0,I.jsxs)("div",{style:N.container,children:[(0,I.jsx)(E,{data:T.data,loading:T.loading,error:T.error,daysFilter:T.daysFilter,setDaysFilter:R}),(0,I.jsx)(J,{children:(0,I.jsx)("div",{ref:k,children:b?(0,I.jsx)(X,{width:V,dailyUsersData:b.dailyUsersData,userEngagementDaysFilter:T.daysFilter,daysFilter:b.graphFilter,dailyUsersError:b.dailyUsersError&&m.Uk(b.dailyUsersError,P)}):(0,I.jsx)(ee,{})})}),(0,I.jsxs)("div",{style:N.tableHeader,children:[(0,I.jsxs)("div",{style:N.sectionTitleLeft,children:[(0,I.jsx)(M.Z,{style:N.sectionTitle,children:(0,I.jsx)(d.FormattedMessage,{id:"settings.workspaceAnalytics.usersTab.allUsers.title",defaultMessage:"All members in Notion"})}),(0,I.jsx)(_.Z,{placement:x.u.Bottom,render:e=>(0,I.jsx)(w.Z,{...e,href:(0,f.UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:N.helpInfo}),renderTooltip:()=>b&&"all_time"!==b.tableFilter?(0,I.jsx)(d.FormattedMessage,{id:"settings.workspaceAnalytics.allMembers.tooltip.lastDays",defaultMessage:"Per member workspace activity over the {dateRange}",values:{dateRange:h.default.formatMessage(l.xX[b.tableFilter])}}):(0,I.jsx)(d.FormattedMessage,{id:"settings.workspaceAnalytics.allMembers.tooltip.allTime",defaultMessage:"All time per member workspace activity"})})]}),b?(0,I.jsx)(C.f,{analyticsType:y.x.Users,filters:{daysFilter:b.tableFilter}}):null]}),b?(0,I.jsx)(Q,{teamStores:p,filter:b.tableFilter,usersAndStats:b.usersAndStats,onUserTabFilterChange:S,usersAndStatsError:b.usersAndStatsError&&m.Uk(b.usersAndStatsError,P)}):null]})}function J(e){const t=(0,r.yK)((e=>({border:{borderRadius:4,overflow:"hidden",border:`1px solid ${e.regularDividerColor}`,backgroundColor:e.contentBackground,color:e.regularTextColor,padding:20}})),[]);return(0,I.jsx)("div",{style:t.border,children:e.children})}function X(e){const{width:t,dailyUsersData:a,userEngagementDaysFilter:s,daysFilter:i,dailyUsersError:g}=e,m=(0,r.yK)((e=>({graphHeader:{marginBottom:10,display:"flex",justifyContent:"space-between"},graphTitle:{fontSize:u.Z.fontSize.UIRegular.desktop,fontWeight:"bolder",display:"flex",alignItems:"center",height:24},graphCaption:{fontSize:u.Z.fontSize.UISmall.desktop},graphTooltip:{marginLeft:5,width:14,height:14},helpInfo:{marginLeft:4},emptyGraphBody:{textAlign:"center",paddingTop:50,paddingBottom:50},error:{color:c.ZP.red},graphSubLabel:{paddingTop:4,color:"grey"}})),[]),{blueLayer:v}=(0,n.useTimeSeriesPalette)(),y=(0,o.VK)((()=>{if(0===a.length)return;return{startDate:a[0].ds,endDate:a[a.length-1].ds}}),[a]),b=(0,o.VK)((()=>a.map((e=>({ds:e.ds,values:{active_members:e.active_members||0}})))),[a]);let C;return C=!y||a.length<3?(0,I.jsx)("div",{style:m.emptyGraphBody,children:(0,I.jsx)(M.Z,{isSecondaryColor:!0,children:(0,I.jsx)(d.FormattedMessage,{id:"workspaceAnalytics.usersOverTime.emptyGraph",defaultMessage:"Not enough data to display graph"})})}):(0,I.jsx)(p.J3,{startDate:y.startDate,endDate:y.endDate,width:t,data:b,height:300,layers:[{key:"active_members",...v,renderLabel:e=>(0,I.jsx)(d.FormattedMessage,{id:"workspaceAnalytics.usersOverTime.activeMembers",defaultMessage:"{activeMembers, plural, one {1 active member} other {{activeMembers} active members}}",values:{activeMembers:e}})}],renderTooltipSubLabel:()=>(0,I.jsx)("div",{style:m.graphSubLabel,children:(0,I.jsx)(d.FormattedMessage,{id:"workspaceAnalytics.usersOverTime.activeMembers.sublabel",defaultMessage:"Viewed a page in the {dateRange}",values:{dateRange:h.default.formatMessage(l.xX[i])}})})}),(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("div",{style:m.graphHeader,children:(0,I.jsxs)(M.Z,{style:m.graphTitle,children:[(0,I.jsx)(d.FormattedMessage,{id:"workspaceAnalytics.membersOverTime.title",defaultMessage:"Active members over time"}),"all_time"===s&&(0,I.jsx)(_.Z,{placement:x.u.Bottom,render:e=>(0,I.jsx)(w.Z,{...e,href:(0,f.UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:m.helpInfo}),renderTooltip:()=>(0,I.jsx)(d.FormattedMessage,{id:"settings.workspaceAnalytics.membersOverTime.allTimeTooltip",defaultMessage:"All Time selection shows members who have viewed a page in the last 90 days."})})]})}),g&&(0,I.jsx)(M.Z,{isMultiline:!1,style:m.error,children:g}),C]})}function ee(){return(0,I.jsxs)("div",{children:[(0,I.jsx)(b.Z,{paragraphs:[{lineHeight:18,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:0}]}),(0,I.jsx)(b.Z,{paragraphs:[{lineHeight:300,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:12}]})]})}},498569:(e,t,a)=>{a.d(t,{r:()=>l});a(667294);var s=a(709291),n=a(433929),i=a(825464),o=a(526388),r=a(785893);function l(e){const{tooltipMessageDescriptor:t,columnHeader:a}=e;return(0,r.jsx)(o.Z,{placement:i.u.Top,renderTooltip:e=>(0,r.jsx)("div",{...e,children:(0,r.jsx)(s.FormattedMessage,{...t})}),render:e=>(0,r.jsx)("div",{...e,children:n.default.formatMessage(a)})})}},55360:(e,t,a)=>{a.d(t,{$:()=>f});a(667294);var s=a(886628),n=a(724405),i=a(709291),o=a(531701),r=a(401898),l=a(137810),d=a(274016),c=a(343568),u=a(731278),g=a(776798),m=a(164369),p=a(45653),h=a(785893);function f(e){let{title:t,items:a,loading:s,error:i}=e;const o=(0,n.yK)((e=>({title:{fontWeight:l.Z.fontWeight.semibold,marginBottom:8},container:{flex:1,display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",height:"100%",border:`1px solid ${e.outlineButtonBorder}`,borderRadius:4,padding:12}})),[]);return(0,h.jsxs)("div",{style:o.container,children:[(0,h.jsx)(m.Z,{style:o.title,children:t}),s?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(x,{}),(0,h.jsx)(x,{}),(0,h.jsx)(x,{}),(0,h.jsx)(x,{}),(0,h.jsx)(x,{})]}):i?(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(y,{})}):a.map(((e,t)=>(0,h.jsx)(v,{item:e},t)))]})}function v(e){let{item:t}=e;const{store:a,caption:n}=t,o=(0,i.useIntl)(),l=b(),c=(0,s.VK)((()=>{switch(a.table){case"block":return(0,h.jsxs)("div",{style:l.nameAndIconContainer,children:[(0,h.jsx)(u.Z,{icon:a.getIcon(),size:18,isEmptyPage:!1,disabled:!0}),(0,h.jsx)(g.Z,{store:a})]});case"notion_user":return(0,h.jsxs)("div",{style:l.nameAndIconContainer,children:[(0,h.jsx)(p.Z,{userStore:a,size:18}),(0,h.jsx)(m.Z,{children:a.getDisplayName(o)})]});case"team":const e=a.getName();return(0,h.jsxs)("div",{style:l.nameAndIconContainer,children:[(0,h.jsx)(d.p,{disabled:!0,store:a,size:20}),(0,h.jsx)(m.Z,{children:e})]});default:(0,r.t1)(a)}}),[a,l.nameAndIconContainer,o]);return(0,h.jsxs)("div",{style:l.container,children:[(0,h.jsx)(m.Z,{style:l.label,children:c}),(0,h.jsx)("div",{style:l.caption,children:(0,h.jsx)(m.Z,{isSecondaryColor:!0,isSmall:!0,children:n})})]})}function x(){const e=b();return(0,h.jsxs)("div",{style:e.container,children:[(0,h.jsx)(m.Z,{style:e.label,children:(0,h.jsx)(c.Z,{paragraphs:[{lineHeight:14,lineMargin:3,sectionWidths:[80],repeat:0,sectionMargin:2}]})}),(0,h.jsx)("div",{style:e.loadingCaption,children:(0,h.jsx)(c.Z,{paragraphs:[{lineHeight:14,lineMargin:3,sectionWidths:[80],repeat:0,sectionMargin:2}]})})]})}function y(){const e=b();return(0,h.jsx)("div",{style:e.container,children:(0,h.jsx)(m.Z,{style:e.errorLabel,children:(0,h.jsx)(i.FormattedMessage,{id:"spaceAnalytics.basicErrorMessage",defaultMessage:"Something went wrong.{br}Try refreshing the page.",values:{br:(0,h.jsx)("br",{})}})})})}function b(){return(0,n.yK)((e=>({container:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingBlock:4,gap:4},nameAndIconContainer:{display:"flex",flexDirection:"row",justifyContent:"flex-start",gap:8,alignItems:"center",width:"100%"},label:{width:"100%"},caption:{display:"flex",justifyContent:"center",alignItems:"center"},loadingCaption:{display:"block",width:"50%"},errorLabel:{width:"100%",textAlign:"center",color:o.ZP.red}})),[])}},297706:(e,t,a)=>{a.d(t,{q:()=>u});a(667294);var s=a(724405),n=a(159730),i=a(709291),o=a(531701),r=a(137810),l=a(343568),d=a(164369),c=a(785893);function u(e){let{icon:t,iconStyles:a,textStyles:u,style:g,title:m,byline:p,loading:h,error:f}=e;const v=function(e,t,a){return(0,s.yK)((s=>({title:{fontWeight:r.Z.fontWeight.medium,fontSize:16},byline:{fontSize:r.Z.fontSize.UISmall.desktop,marginTop:4},textContainer:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",...t},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:8},icon:{height:28,width:28,color:s.lightTextColor,fill:"currentcolor",...e},container:{height:"100%",flex:1,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",border:`1px solid ${s.outlineButtonBorder}`,borderRadius:4,padding:12,gap:8,...a},loadingTitle:{display:"block",width:"40%"},loadingByline:{display:"block",width:"60%",marginTop:8,marginBottom:8},errorTitle:{textAlign:"center",color:o.ZP.red}})),[e,t,a])}(a,u,g);return h?(0,c.jsx)("div",{style:v.container,children:(0,c.jsxs)("div",{style:v.textContainer,children:[(0,c.jsx)("div",{style:v.loadingTitle,children:(0,c.jsx)(l.Z,{paragraphs:[{lineHeight:18,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:0}]})}),p?(0,c.jsx)("div",{style:v.loadingByline,children:(0,c.jsx)(l.Z,{paragraphs:[{lineHeight:14,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:0}]})}):null]})}):f?(0,c.jsx)("div",{style:v.container,children:(0,c.jsx)("div",{style:v.titleContainer,children:(0,c.jsx)(d.Z,{style:v.errorTitle,children:(0,n.Jx)(f)?f.message:(0,c.jsx)(i.FormattedMessage,{id:"spaceAnalytics.basicErrorMessage",defaultMessage:"Something went wrong.{br}Try refreshing the page.",values:{br:(0,c.jsx)("br",{})}})})})}):(0,c.jsxs)("div",{style:v.container,children:[t?t(v.icon):null,(0,c.jsxs)("div",{style:v.textContainer,children:[(0,c.jsx)(d.Z,{style:v.title,children:m}),p?(0,c.jsx)(d.Z,{style:v.byline,children:p}):null]})]})}},167579:(e,t,a)=>{a.d(t,{f:()=>x});var s=a(667294),n=a(724405),i=a(569651),o=a(573123),r=a(45257),l=a(433929),d=a(460709),c=a(223196),u=a(552275),g=a(478140),m=a(632163),p=a(953437),h=a(672495),f=a(991642),v=a(785893);function x(e){const t=(0,n.yK)((e=>({popup:{width:125,marginLeft:5},pillStyle:{display:"flex",alignItems:"center"}})),[]),{currentFilter:a,hideAllTime:x}=e,[y,b]=(0,s.useState)(!1),_=o.Hz.filter((e=>!x||"all_time"!==e)).map((t=>{const a=()=>{e.onChangeFilter(t),b(!1)};return{key:t,action:()=>{},render:()=>(0,v.jsx)(u.Z,{focused:!1,onClick:a,title:l.default.formatMessage(o.Rh[t])})}})),M=(0,v.jsx)(r.Z,{on:Boolean(a),wrapStyle:t.pillStyle,icon:(0,i.C)({width:16,marginRight:6,fill:"currentColor"}),title:l.default.formatMessage(o.Rh[a]),onClick:()=>{b(!0)}}),w=[{key:"filters",items:_,render:e=>(0,v.jsx)(h.Z,{...e,title:null,loading:!1})}],C=(0,v.jsx)(g.Z,{menuType:d.og.Popup,header:null,children:(0,v.jsx)(m.Z,{type:m.i.Vertical,initialFocus:0,sections:w})});return(0,v.jsx)(f.Z,{marginAfter:!1,children:(0,v.jsx)(p.ZP,{popupType:c.k.Popup,placementToOrigin:p.ZP.Placement.Bottom,alignmentToOrigin:p.ZP.Alignment.Start,open:y,render:()=>C,onDismiss:()=>b(!1),keepFocus:!0,origin:M,preventScaleTransition:!0,style:t.popup})})}},408840:(e,t,a)=>{a.d(t,{f:()=>p});var s=a(667294),n=a(800480),i=a(886628),o=a(709291),r=a(401898),l=a(124697),d=a(461652),c=a(80444),u=a(124026),g=a(863296),m=a(785893);function p(e){const{style:t,analyticsType:a,filters:p,disabled:h}=e,f=(0,n.O7)(),[v,x]=(0,s.useState)(!1),y=(0,i.VK)((()=>{var e;return null===(e=c.default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),b=h||v;return(0,m.jsx)(g.Z,{style:t,disabled:b,onClick:async function(){if(x(!0),y){switch(a){case u.x.Users:l.Lb(f,{daysFilter:p.daysFilter}),await d.Tp(f,{spaceId:y,daysFilter:p.daysFilter});break;case u.x.Content:l.Z(f,{filters:p}),await d.hN(f,{spaceId:y,filters:p});break;default:(0,r.t1)(a)}x(!1)}},children:(0,m.jsx)(o.FormattedMessage,{id:"spaceAnalytics.usersTab.export",defaultMessage:"Export as CSV"})})}},93502:(e,t,a)=>{a.d(t,{U:()=>d});var s=a(667294),n=a(800480),i=a(559054),o=a(401898),r=a(454642);const l={pageViews:0,uniquePageViews:0,pagesCreated:0,pageEdits:0,topPages:[]};function d(e){let{spaceId:t}=e;const a=(0,n.O7)(),[d,c]=(0,s.useState)("last_90_days"),[{status:u,value:g,error:m}]=(0,i.r5)((async()=>{const e=await r.getContentEngagementAnalytics(a,{spaceId:t,daysFilter:d});switch(e.type){case"success":return{pageViews:e.data.pageViews,uniquePageViews:e.data.uniquePageViews,pagesCreated:e.data.pagesCreated,pageEdits:e.data.pageEdits,topPages:e.data.topPages};case"failed":throw e.body;default:(0,o.t1)(e)}}),[a,t,d]);return{data:(0,s.useMemo)((()=>g||l),[g]),loading:"pending"===u||"idle"===u,error:m,daysFilter:d,setDaysFilter:c}}},831303:(e,t,a)=>{a.d(t,{i:()=>g});var s=a(667294),n=a(800480),i=a(886628),o=a(559054),r=a(401898),l=a(454642),d=a(883165),c=a(568117);const u={activeMembersCount:0,previousActiveMembersCount:0,activeGuestsCount:0,previousActiveGuestsCount:0,topTeamspaces:[],topViewers:[],topEditors:[]};function g(e){let{spaceStore:t,userId:a,isOrganizationOwner:g}=e;const m=(0,n.O7)(),{updateCacheWithRecordMap:p}=(0,s.useContext)(c.V),[h,f]=(0,s.useState)("last_90_days"),v=(0,i.VK)((()=>t.id),[t]),x=(0,i.VK)((()=>Boolean(t&&a&&(0,d.VK)(t,a).isWorkspaceOwner())),[t,a]),[{status:y,value:b,error:_}]=(0,o.r5)((async()=>{if(!a||!(g||x))return u;const e=await l.getUserEngagementAnalytics(m,{spaceId:v,daysFilter:h});switch(e.type){case"success":return p(e),{activeMembersCount:e.data.activeMembersCount,previousActiveMembersCount:e.data.previousActiveMembersCount,activeGuestsCount:e.data.activeGuestsCount,previousActiveGuestsCount:e.data.previousActiveGuestsCount,topTeamspaces:e.data.topTeamspaces,topViewers:e.data.topViewers,topEditors:e.data.topEditors};case"failed":throw e.body;default:(0,r.t1)(e)}}),[m,a,v,h,x,g,p]);return{data:(0,s.useMemo)((()=>b||u),[b]),loading:"pending"===y||"idle"===y,error:_,daysFilter:h,setDaysFilter:f}}},858698:(e,t,a)=>{a.d(t,{K:()=>o,o:()=>i});var s=a(419639);const n={externalWorkspaceName:{defaultMessage:"External workspace",id:"managedUsers.externalWorkspaceName",description:"A generic name to replace the real name of an external workspace."}};function i(e){return e.formatMessage(n.externalWorkspaceName)}function o(e){if(!e)return;const t=Object.entries(s.nb).find((t=>{let[a,s]=t;return s===e}));if(t){return t[0]}}},8874:(e,t,a)=>{a.d(t,{S:()=>i});var s=a(886628),n=a(80444);function i(){return(0,s.VK)((()=>{const{currentSpaceStore:e}=n.default.state;return(null==e?void 0:e.getMemberCountFromPublicSpaceData())||null}),[])}},889665:(e,t,a)=>{a.d(t,{R:()=>d});var s=a(886628),n=a(519889),i=a(590965),o=a(206258),r=a(88893),l=a(288280);function d(e){let{spaceStore:t}=e;return(0,s.VK)((()=>{const e=l.subscriptionDataStoreInstance.state;if(!e)return{loading:!0};const a=r.CM(e);if(!a.every((e=>o.U6.createChildStore(t,{table:n.KJ,id:e.userId}).isReady())))return{loading:!0};const s=a.filter(i.nB),d=a.filter(i.FN);return{loading:!1,members:s.map((e=>{let{userId:a}=e;return o.U6.createChildStore(t,{table:n.KJ,id:a})})),guests:d.map((e=>{let{userId:a}=e;return o.U6.createChildStore(t,{table:n.KJ,id:a})}))}}),[t])}},124026:(e,t,a)=>{a.d(t,{Z:()=>o,x:()=>n});var s=a(749085);let n=function(e){return e.Overview="overview",e.Users="users",e.Content="content",e.Search="search",e}({});class i extends s.default{getInitialState(){return{}}shouldRefreshState(e){const t=this.getState();return e!==t.currentSpaceId||!(t.currentTab!==n.Users||t.usersTabData&&t.usersTabData.usersAndStats)}}const o=new i},47054:(e,t,a)=>{a.d(t,{AD:()=>d});a(757658);var s=a(730120),n=a(619584),i=a(159730);const o=7;function r(e){if(void 0===e)return s.ou.utc();const t={zone:"utc"};return"number"==typeof e?s.ou.fromMillis(e,t):s.ou.fromISO(e,t)}function l(e,t){const a=t?r(t):s.ou.utc(),n=r(e??function(e){const{days:t,endDate:a,startDate:n}=e;if(t<=0)throw new i.p8("Days must be greater than 0");const o=a?r(a):s.ou.utc();if(!o.isValid)throw new i.p8(`endDate ${a} is in an invalid format`);const l=n?r(n).toMillis():0,d=o.minus({days:t-1}).toMillis();return Math.max(d,l)}({days:o,endDate:t}));if(!n.isValid)throw new i.p8(`startDate ${e} is in an invalid format`);if(!a.isValid)throw new i.p8(`endDate ${t} is in an invalid format`);if(n>a)throw new i.p8(`startDate ${e} => ${n.toISO()} is after endDate ${t} => ${a.toISO()}`);return{startTimestamp:n.toMillis(),endTimestamp:a.toMillis()}}function d(e,t){const{startTimestamp:a,endTimestamp:s}=l(e,t),i=[];let o=a;for(;o<=s;)i.push(r(o).toISODate()),o+=n.A0;return i}},378168:(e,t,a)=>{a.d(t,{A1:()=>c,A7:()=>l,Zv:()=>g,iv:()=>r,vF:()=>d,xR:()=>u});a(401898);var s=a(619584),n=a(463306),i=a(421202),o=a(647425);const r=1714158352e3,l=30*s.Lq,d=30*s.Lq;function c(e){const t=(0,n.y)(e);if((null==t?void 0:t.table)===i.iU)return t.getDeletedFromTrashTime()}function u(e){const t=(0,n.OJ)(e);if((null==t?void 0:t.table)===i.iU)return t.getMovedToTrashTime()}function g(e){return e&&(0,o.wP)(e.getSubscriptionTier())?e.getSetting("delete_from_trash_delay_seconds")??l:l}},883176:(e,t,a)=>{a.d(t,{z:()=>i});a(667294);var s=a(745238),n=a(785893);const i=(0,s.IU)("analyticsSearch",{viewBox:"0 0 51 52",svg:(0,n.jsx)("path",{d:"M.414 21.297c0 2.86.533 5.543 1.6 8.049a21.156 21.156 0 004.468 6.576 20.797 20.797 0 006.577 4.443c2.505 1.067 5.18 1.6 8.023 1.6 2.116 0 4.13-.305 6.043-.914a21.55 21.55 0 005.332-2.565l11.654 11.655a3.44 3.44 0 001.245.812c.473.186.964.28 1.472.28.728 0 1.371-.17 1.93-.508a3.48 3.48 0 001.32-1.346 3.887 3.887 0 00.482-1.93 3.8 3.8 0 00-.279-1.447 3.126 3.126 0 00-.787-1.193l-11.578-11.63a20.414 20.414 0 002.818-5.51c.694-2.013 1.041-4.138 1.041-6.372 0-2.844-.541-5.51-1.625-7.998a20.718 20.718 0 00-4.443-6.602 20.515 20.515 0 00-6.602-4.468c-2.488-1.067-5.162-1.6-8.023-1.6-2.844 0-5.518.533-8.023 1.6a20.592 20.592 0 00-6.577 4.468A21.072 21.072 0 002.014 13.3c-1.067 2.488-1.6 5.154-1.6 7.998zm5.408 0c0-2.1.39-4.071 1.168-5.916a15.517 15.517 0 013.301-4.875 15.168 15.168 0 014.875-3.276c1.845-.795 3.817-1.193 5.916-1.193 2.116 0 4.096.398 5.941 1.193a14.877 14.877 0 014.85 3.276 15.515 15.515 0 013.3 4.875c.796 1.845 1.194 3.817 1.194 5.916 0 2.116-.398 4.096-1.193 5.941a15.517 15.517 0 01-3.301 4.875 15.426 15.426 0 01-4.85 3.276c-1.845.795-3.825 1.193-5.941 1.193-2.099 0-4.07-.398-5.916-1.193a15.737 15.737 0 01-4.875-3.276 15.52 15.52 0 01-3.3-4.875c-.78-1.845-1.169-3.825-1.169-5.941zm15.31 10.36c.458 0 .746-.263.864-.788.237-1.32.474-2.437.711-3.351.254-.931.559-1.693.914-2.286a4.554 4.554 0 011.397-1.498c.575-.389 1.311-.694 2.209-.914.914-.237 2.056-.448 3.427-.634.542-.085.813-.381.813-.89 0-.507-.271-.812-.813-.913-1.354-.17-2.496-.373-3.427-.61-.915-.253-1.668-.567-2.26-.939a4.814 4.814 0 01-1.422-1.498c-.373-.61-.677-1.363-.914-2.26a42.337 42.337 0 01-.635-3.326c-.084-.542-.372-.813-.863-.813s-.796.263-.914.788a53.724 53.724 0 01-.737 3.377c-.22.914-.507 1.675-.863 2.285a4.64 4.64 0 01-1.396 1.472c-.576.373-1.32.677-2.235.914-.914.22-2.048.424-3.402.61-.559.101-.838.406-.838.914 0 .49.28.787.838.889 1.693.186 3.055.44 4.088.761 1.032.305 1.828.762 2.387 1.371.575.61 1.015 1.44 1.32 2.489.305 1.05.584 2.395.838 4.037a1 1 0 00.279.584c.17.152.38.228.635.228z"})})},982114:(e,t,a)=>{a.d(t,{Q:()=>n,p:()=>i});a(667294);var s=a(745238);const n=(0,a(785893).jsx)("path",{d:"M.911 8.034c0 4.505 3.049 7.24 7.246 7.24 1.135 0 2.215-.158 2.885-.376.472-.15.622-.397.622-.65a.44.44 0 00-.451-.444 1.3 1.3 0 00-.321.048c-.834.205-1.552.341-2.516.341-3.74 0-6.29-2.255-6.29-6.118 0-3.698 2.407-6.275 6.03-6.275 3.206 0 5.886 1.975 5.886 5.523 0 2.072-.697 3.466-1.825 3.466-.752 0-1.176-.437-1.176-1.183V4.972c0-.37-.205-.595-.554-.595-.341 0-.553.226-.553.595v.779h-.062c-.349-.84-1.203-1.374-2.222-1.374-1.77 0-3.014 1.51-3.014 3.678 0 2.187 1.237 3.712 3.042 3.712 1.06 0 1.88-.575 2.276-1.545h.062c.13.963.943 1.551 2.023 1.551 1.907 0 3.09-1.873 3.09-4.498 0-3.971-2.92-6.548-6.96-6.548C3.886.727.912 3.632.912 8.034zm6.911 2.652c-1.223 0-2.003-1.018-2.003-2.638 0-1.593.786-2.611 2.01-2.611 1.258 0 2.05.998 2.05 2.584 0 1.62-.813 2.665-2.057 2.665z"}),i=(0,s.IU)("at",{viewBox:"0 0 16 16",svg:n})},193108:(e,t,a)=>{a.d(t,{p:()=>i});a(667294);var s=a(745238),n=a(785893);const i=(0,s.IU)("contentSearch",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M0.25293 5.82031C0.25293 8.88965 2.74805 11.3848 5.81738 11.3848C6.95898 11.3848 8.00488 11.0361 8.87988 10.4414L12.0244 13.5859C12.2158 13.7842 12.4824 13.873 12.749 13.873C13.3301 13.873 13.7471 13.4355 13.7471 12.8682C13.7471 12.5947 13.6514 12.3418 13.4668 12.1504L10.3428 9.01953C10.9922 8.12402 11.3818 7.0166 11.3818 5.82031C11.3818 2.75098 8.88672 0.255859 5.81738 0.255859C2.74805 0.255859 0.25293 2.75098 0.25293 5.82031ZM1.70215 5.82031C1.70215 3.55078 3.54102 1.70508 5.81738 1.70508C8.08691 1.70508 9.93262 3.55078 9.93262 5.82031C9.93262 8.08984 8.08691 9.93555 5.81738 9.93555C3.54102 9.93555 1.70215 8.08984 1.70215 5.82031Z"})})},44643:(e,t,a)=>{a.d(t,{L:()=>i});a(667294);var s=a(745238),n=a(785893);const i=(0,s.IU)("eyeHidePadded",{viewBox:"0 0 24 24",svg:(0,n.jsx)("path",{d:"M17.3867 18.1074C17.6055 18.3193 17.9404 18.333 18.1592 18.1074C18.3848 17.875 18.3711 17.5469 18.1592 17.335L6.5791 5.76855C6.37402 5.55664 6.01855 5.5498 5.80664 5.76855C5.60156 5.97363 5.60156 6.3291 5.80664 6.53418L17.3867 18.1074ZM12 6.1582C10.8105 6.1582 9.73047 6.36328 8.72559 6.69141L9.81934 7.78516C10.5098 7.58691 11.2275 7.4707 12 7.4707C16.3682 7.4707 19.8408 11.2715 19.8408 12.0713C19.8408 12.6113 18.7334 14.0059 16.9766 15.1064L17.9883 16.125C20.1348 14.7168 21.3857 12.8779 21.3857 12.0713C21.3857 10.6699 17.6055 6.1582 12 6.1582ZM12 17.9912C13.2646 17.9912 14.4199 17.7725 15.4658 17.4102L14.3789 16.3232C13.6338 16.542 12.8477 16.6787 12 16.6787C7.63184 16.6787 4.15918 13.0283 4.15918 12.0713C4.15918 11.6133 5.32129 10.1299 7.19434 8.98145L6.16211 7.94922C3.92676 9.37109 2.60742 11.251 2.60742 12.0713C2.60742 13.4727 6.46973 17.9912 12 17.9912ZM15.4111 13.3906C15.5889 12.9873 15.6914 12.5361 15.6914 12.0713C15.6914 10.0137 14.0508 8.39355 12 8.39355C11.5283 8.39355 11.084 8.48242 10.6738 8.65332L15.4111 13.3906ZM12 15.7559C12.5332 15.7559 13.0322 15.6328 13.4766 15.4209L8.64355 10.5811C8.4248 11.0322 8.30176 11.5312 8.30176 12.0781C8.30859 14.0811 9.94238 15.7559 12 15.7559Z"})})},747409:(e,t,a)=>{a.d(t,{N:()=>i});a(667294);var s=a(745238),n=a(785893);const i=(0,s.IU)("ledger",{viewBox:"0 0 16 16",svg:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("path",{d:"M.706 4.113c0 .41.273.677.697.677h1.778v8.388c0 1.435.704 2.146 2.14 2.146h7.813c1.299 0 2.153-.889 2.153-2.235v-1.86c0-.41-.273-.676-.697-.676h-.567V2.95c0-1.429-.711-2.146-2.12-2.146H2.497c-1.066 0-1.79.724-1.79 1.866v1.442Zm3.575 9.072V2.67c0-.28-.027-.54-.082-.766h7.643c.71 0 1.08.376 1.08 1.06v7.588H7.05c-.424 0-.704.266-.704.676v1.956c0 .622-.431 1.039-1.026 1.039-.608 0-1.039-.438-1.039-1.04ZM1.807 3.689V2.671c0-.479.294-.766.69-.766.41 0 .684.287.684.766v1.018H1.807ZM6.25 4.797h4.703a.413.413 0 0 0 .424-.424.412.412 0 0 0-.424-.417H6.25a.418.418 0 0 0-.43.417c0 .24.184.424.43.424Zm0 2.386h2.454a.406.406 0 0 0 .424-.41c0-.24-.178-.431-.424-.431H6.25a.425.425 0 0 0-.43.43c0 .233.184.41.43.41Zm.93 7.04c.17-.3.266-.67.266-1.114v-1.456h6.74v1.436c0 .677-.423 1.135-1.052 1.135H7.18Z"})})})},931278:(e,t,a)=>{a.d(t,{S:()=>i});a(667294);var s=a(745238),n=a(785893);const i=(0,s.IU)("logout",{viewBox:"0 0 30 30",svg:(0,n.jsx)("path",{d:"M17,24l9-9l-9-9l-1.406,1.406L22.188,14H8v2h14.188l-6.594,6.594L17,24z M6,4h16V2H4v26h18v-2H6V4z"})})},903556:(e,t,a)=>{a.d(t,{Z:()=>i});a(667294);var s=a(745238),n=a(785893);const i=(0,s.IU)("mail",{viewBox:"0 0 30 30",svg:(0,n.jsx)("path",{d:"M0,4v22h30V4H0z M17.591,16.33C16.137,17.753,15.819,18,15,18s-1.137-0.247-2.555-1.635L2,6h26L17.591,16.33z M2,8.814 l7.17,7.119L2,21.8V8.814z M2.445,24l8.141-6.661L11,17.75c1.438,1.406,2.281,2.25,4,2.25s2.563-0.844,4-2.25l0.414-0.411L27.555,24 H2.445z M28,21.8l-7.17-5.867L28,8.814V21.8z"})})},521213:(e,t,a)=>{a.d(t,{T:()=>i});a(667294);var s=a(745238),n=a(785893);const i=(0,s.IU)("openPage",{viewBox:"0 0 17 16",svg:(0,n.jsx)("path",{d:"M0.454102 14.1143V2.02832C0.454102 1.26953 0.891602 0.78418 1.58887 0.78418H9.7373C10.4346 0.78418 10.8721 1.26953 10.8721 2.02832V14.1143C10.8721 14.873 10.4346 15.3584 9.7373 15.3584H1.58887C0.891602 15.3584 0.454102 14.873 0.454102 14.1143ZM3.07227 4.45508C3.07227 4.63281 3.18164 4.74902 3.35254 4.74902H4.71973C4.89062 4.74902 5.01367 4.63281 5.01367 4.45508V3.12891C5.01367 2.95801 4.89062 2.83496 4.71973 2.83496H3.35254C3.18164 2.83496 3.07227 2.95801 3.07227 3.12891V4.45508ZM6.37402 4.45508C6.37402 4.63281 6.4834 4.74902 6.66113 4.74902H8.02148C8.19238 4.74902 8.31543 4.63281 8.31543 4.45508V3.12891C8.31543 2.95801 8.19238 2.83496 8.02148 2.83496H6.66113C6.4834 2.83496 6.37402 2.95801 6.37402 3.12891V4.45508ZM11.4736 15.3584C11.6992 14.9893 11.8086 14.5723 11.8086 14.1143V4.14746H15.418C16.1084 4.14746 16.5459 4.63281 16.5459 5.3916V14.1143C16.5459 14.873 16.1084 15.3584 15.418 15.3584H11.4736ZM3.07227 7.24414C3.07227 7.42188 3.18164 7.53809 3.35254 7.53809H4.71973C4.89062 7.53809 5.01367 7.42188 5.01367 7.24414V5.91797C5.01367 5.74707 4.89062 5.62402 4.71973 5.62402H3.35254C3.18164 5.62402 3.07227 5.74707 3.07227 5.91797V7.24414ZM6.37402 7.24414C6.37402 7.42188 6.4834 7.53809 6.66113 7.53809H8.02148C8.19238 7.53809 8.31543 7.42188 8.31543 7.24414V5.91797C8.31543 5.74707 8.19238 5.62402 8.02148 5.62402H6.66113C6.4834 5.62402 6.37402 5.74707 6.37402 5.91797V7.24414ZM13.3604 7.60645C13.3604 7.75 13.4492 7.85254 13.5996 7.85254H14.7344C14.8779 7.85254 14.9736 7.75 14.9736 7.60645V6.5127C14.9736 6.36914 14.8779 6.27344 14.7344 6.27344H13.5996C13.4492 6.27344 13.3604 6.36914 13.3604 6.5127V7.60645ZM3.07227 10.0332C3.07227 10.2041 3.18164 10.3271 3.35254 10.3271H4.71973C4.89062 10.3271 5.01367 10.2041 5.01367 10.0332V8.70703C5.01367 8.5293 4.89062 8.41309 4.71973 8.41309H3.35254C3.18164 8.41309 3.07227 8.5293 3.07227 8.70703V10.0332ZM6.37402 10.0332C6.37402 10.2041 6.4834 10.3271 6.66113 10.3271H8.02148C8.19238 10.3271 8.31543 10.2041 8.31543 10.0332V8.70703C8.31543 8.5293 8.19238 8.41309 8.02148 8.41309H6.66113C6.4834 8.41309 6.37402 8.5293 6.37402 8.70703V10.0332ZM13.3604 10.2998C13.3604 10.4434 13.4492 10.5391 13.5996 10.5391H14.7344C14.8779 10.5391 14.9736 10.4434 14.9736 10.2998V9.20605C14.9736 9.0625 14.8779 8.9668 14.7344 8.9668H13.5996C13.4492 8.9668 13.3604 9.0625 13.3604 9.20605V10.2998ZM3.29785 14.2578H8.08984V12.0361C8.08984 11.7217 7.88477 11.5166 7.57031 11.5166H3.81738C3.50293 11.5166 3.29785 11.7217 3.29785 12.0361V14.2578ZM13.3604 12.9932C13.3604 13.1367 13.4492 13.2324 13.5996 13.2324H14.7344C14.8779 13.2324 14.9736 13.1367 14.9736 12.9932V11.8994C14.9736 11.7559 14.8779 11.6533 14.7344 11.6533H13.5996C13.4492 11.6533 13.3604 11.7559 13.3604 11.8994V12.9932Z"})})},517781:(e,t,a)=>{a.d(t,{_:()=>i});a(667294);var s=a(745238),n=a(785893);const i=(0,s.IU)("organizationOutline",{viewBox:"0 0 16 14",svg:(0,n.jsx)("path",{d:"M9.506 13.342v-1.143h4.125c.101 0 .178-.025.228-.076.051-.05.076-.127.076-.228V5.08c0-.101-.025-.178-.076-.228-.05-.051-.127-.077-.228-.077H9.92V3.64h4.032c.348 0 .621.11.82.328.2.215.3.51.3.885v7.271c0 .375-.1.672-.3.89-.199.22-.472.329-.82.329H9.506zm2.28-6.358c-.126 0-.188-.064-.188-.193v-.896c0-.133.062-.2.187-.2h.926c.129 0 .193.067.193.2v.896c0 .129-.064.193-.193.193h-.926zm0 2.168c-.126 0-.188-.066-.188-.199v-.896c0-.133.062-.2.187-.2h.926c.129 0 .193.067.193.2v.896c0 .133-.064.2-.193.2h-.926zm0 2.163c-.126 0-.188-.067-.188-.2v-.896c0-.13.062-.194.187-.194h.926c.129 0 .193.065.193.194v.896c0 .133-.064.2-.193.2h-.926zm-10.864.808V1.928c0-.38.1-.676.299-.89.199-.22.474-.329.826-.329H9.44c.348 0 .621.11.82.328.204.215.305.512.305.89v10.196c0 .375-.101.672-.304.89-.2.22-.473.329-.82.329H2.046c-.352 0-.627-.11-.826-.328-.2-.22-.3-.516-.3-.891zm1.142-.228c0 .101.026.177.077.228.05.05.127.076.228.076h6.75c.102 0 .178-.025.229-.076.05-.05.076-.127.076-.228V2.162c0-.105-.026-.183-.076-.234-.051-.051-.127-.076-.229-.076H2.37c-.101 0-.178.025-.228.076-.051.05-.077.129-.077.234v9.733zm1.588.85V10.5c0-.25.059-.435.176-.557.117-.125.295-.187.533-.187h2.766c.238 0 .416.062.533.187.117.122.176.307.176.557v2.244h-.89V10.8c0-.117-.061-.176-.182-.176h-2.04c-.12 0-.181.059-.181.176v1.945h-.89zm.17-8.362c-.148 0-.222-.078-.222-.235v-1.09c0-.156.074-.234.222-.234h1.12c.156 0 .234.078.234.235v1.09c0 .156-.078.234-.235.234H3.822zm2.719 0c-.152 0-.229-.078-.229-.235v-1.09c0-.156.077-.234.229-.234h1.12c.152 0 .228.078.228.235v1.09c0 .156-.077.234-.229.234H6.541zM3.822 6.627c-.148 0-.222-.078-.222-.234V5.309c0-.157.074-.235.222-.235h1.12c.156 0 .234.078.234.235v1.084c0 .156-.078.234-.235.234H3.822zm2.719 0c-.152 0-.229-.078-.229-.234V5.309c0-.157.077-.235.229-.235h1.12c.152 0 .228.078.228.235v1.084c0 .156-.077.234-.229.234H6.541zm-2.719 2.25c-.148 0-.222-.08-.222-.24V7.553c0-.157.074-.235.222-.235h1.12c.156 0 .234.078.234.235v1.084c0 .16-.078.24-.235.24H3.822zm2.719 0c-.152 0-.229-.08-.229-.24V7.553c0-.157.077-.235.229-.235h1.12c.152 0 .228.078.228.235v1.084c0 .16-.077.24-.229.24H6.541z"})})},2356:(e,t,a)=>{a.d(t,{u:()=>i});a(667294);var s=a(745238),n=a(785893);const i=(0,s.IU)("showDeletedPages",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M1.89551 8.5498C1.89551 11.9404 4.61621 14.668 8 14.668C11.3838 14.668 14.1045 11.9404 14.1045 8.5498C14.1045 5.16602 11.4043 2.45898 8.02051 2.45898C7.66504 2.45898 7.31641 2.49316 7.01562 2.55469L8.66992 0.920898C8.78613 0.797852 8.85449 0.640625 8.85449 0.462891C8.85449 0.09375 8.56738 -0.207031 8.20508 -0.207031C8.01367 -0.207031 7.84961 -0.138672 7.7334 -0.00878906L4.93066 2.8418C4.79395 2.97852 4.71875 3.15625 4.71875 3.33398C4.71875 3.51855 4.78711 3.68262 4.93066 3.82617L7.7334 6.65625C7.84961 6.7793 8.00684 6.84082 8.20508 6.84082C8.56738 6.84082 8.85449 6.55371 8.85449 6.17773C8.85449 6 8.78613 5.85645 8.66309 5.72656L6.80371 3.88086C7.15234 3.80566 7.56934 3.77148 8.02051 3.77148C10.666 3.77148 12.7646 5.88379 12.7646 8.5498C12.7646 11.2021 10.6455 13.3281 8 13.3281C5.35449 13.3281 3.23535 11.2021 3.23535 8.5498C3.23535 8.14648 2.97559 7.85938 2.5791 7.85938C2.17578 7.85938 1.89551 8.14648 1.89551 8.5498Z"})})},97608:(e,t,a)=>{a.d(t,{J:()=>s});let s=function(e){return e.User="user",e.Domains="domains",e}({})}}]);