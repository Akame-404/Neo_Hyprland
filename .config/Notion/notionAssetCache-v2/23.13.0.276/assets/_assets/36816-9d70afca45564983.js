"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[36816],{948298:(e,t,s)=>{s.d(t,{Vy:()=>M,YN:()=>y,fJ:()=>b,kj:()=>v,mY:()=>x});s(252262),s(324506);var i=s(458129),n=s(815047),a=s(519889),o=s(653965),r=s(891219),l=s(781918),d=s(454642),c=s(476464),u=s(709953),g=s(210228),m=s(215010),p=s(893586),f=s(206258),h=s(598905),S=s(897630);async function y(e){const{environment:t,store:s,status:i,requests:n}=e,r=t.currentUser.id;l.VM(t,{status:i,user_count:n.length,from:e.from,request_type:"member"});const d=await Promise.all(n.map((e=>j(t,{id:e.getForActorId(),table:a.KJ})))).then((e=>(0,o.oA)(e)));if("approved"===i){const e=d.map((e=>({type:"existingUser",value:e.__IM_SORRY__getValue(),spaceRole:"read_and_write"})));if(!(await c.n_({environment:t,store:s,inviteTargets:e,inviteRole:"read_and_write",isOnboarding:!1,invite:{inviteOrigin:"membership_request"}})).success)return{failedUsers:d,resolvedUsers:[]}}return g.createAndCommit({userAction:"accessRequestActions.resolveMembershipRequests",environment:t,perform:e=>{n.map((s=>{const n=new f.oK(t,s.pointer);u.sW({store:n,transaction:e,data:{granted_time:Date.now(),granted_by_table:a.KJ,granted_by_id:r,resolved_time:Date.now(),resolved_by_table:a.KJ,resolved_by_id:r,status:i}})}))}}),{failedUsers:[],resolvedUsers:d}}async function b(e){const{environment:t,store:s,status:i,requests:n}=e,d=t.currentUser.id;l.VM(t,{status:i,user_count:n.length,from:e.from,request_type:"member"});const m=await Promise.all(n.map((e=>j(t,{id:e.getForActorId(),table:a.KJ})))).then((e=>(0,o.oA)(e)));if("approved"===i){const e=m.map((e=>({type:"existingUser",value:e.__IM_SORRY__getValue(),spaceRole:"read_and_write"})));if(!(await c.n_({environment:t,store:s,inviteTargets:e,inviteRole:"read_and_write",isOnboarding:!1,invite:{inviteOrigin:"membership_request"}})).success)return{failedUsers:m,resolvedUsers:[]};const i=s.id,n=await p.Z.awaitData(t,{spaceId:i}),a=n?n.map((e=>e.url)):[];r.oI(t,{invite_flow_id:void 0,invite_origin:"membership_request",user_ids:m.map((e=>e.id)),internal_domains:a})}return g.createAndCommit({userAction:"accessRequestActions.resolveMembershipRequests",environment:t,perform:e=>{n.map((s=>{const n=new f.oK(t,s.pointer);u.sW({store:n,transaction:e,data:{granted_time:Date.now(),granted_by_table:a.KJ,granted_by_id:d,resolved_time:Date.now(),resolved_by_table:a.KJ,resolved_by_id:d,status:i,type:"space_membership_request"}})}))}}),{failedUsers:[],resolvedUsers:m}}async function x(e){const{environment:t,status:s,requests:i,from:n}=e;l.VM(t,{status:s,user_count:i.length,from:n,request_type:"guest"});const c=await Promise.all(i.map((async e=>{var i,o,c;const u=await j(t,{id:e.getForActorId(),table:a.KJ});if(!u)return{type:"failed",user:void 0};if(!e.isGuestInviteRequest())return{type:"failed",user:u};const g=await d.resolveAccessRequest(t,{accessRequestId:e.id,status:s,spaceId:e.getParentId()}),p=null===(i=e.getAttributes().permission_records_and_roles.at(0))||void 0===i?void 0:i.role,f=null===(o=e.getAttributes().permission_records_and_roles.at(0))||void 0===o?void 0:o.id,h=(null===(c=e.getAttributes().invite_message)||void 0===c?void 0:c.length)??0;return"success"===g.type&&"approved"===s&&r.jB(t,{role:p,is_space:!1,invite_targets:[{type:"existingUser",value:{id:u.id,version:0,email:u.getEmail()},spaceRole:"none"}],is_onboarding:!1,invite_origin:"guest_invite_request",permission_items:[{type:"user_permission",role:p,user_id:u.id}],invite_message_length:h,domainType:(0,m.JF)()}),"success"===g.type&&l.Cg(t,{status:s,request_id:e.id,for_actor_id:e.getForActorId(),created_by_id:e.getCreatedById(),requested_page_id:f,requested_role:p,from:n}),{type:g.type,user:u}})));await S.bi(t);const u=c.filter((e=>"failed"===e.type)).map((e=>e.user)),g=c.filter((e=>"success"===e.type)).map((e=>e.user));return{failedUsers:(0,o.oA)(u),resolvedUsers:(0,o.oA)(g)}}async function v(e){if(h.Z.reset(),!e.canAdmin)return;const{environment:t,spaceId:s}=e,i=await d.getUnreadAccessRequestCount(t,{parentTable:n.bx,parentId:s,size:1});"success"===i.type&&h.Z.setState({spaceId:s,count:i.data.count})}async function M(e,t,s){const n=function(e){return Object.values((0,o.vM)(e,(e=>function(e){if(e.isGuestInviteRequest()){const t=e.getAttributes().permission_records_and_roles[0];return`guest_invite_${e.getForActorId()}:${null==t?void 0:t.id}:${e.getCreatedById()}`}return e.isSpaceMembershipRequest()?`space_membership_${e.getForActorId()}:${e.getCreatedById()}}`:e.isTeamMembershipRequest()?void 0:void e.isPageAccessRequest()}(e)))).map((e=>(0,o.MR)(e,(e=>e.getCreatedTime()))[0]))}(await Promise.all(s.map((async t=>{const s=i.J8,n=new f.oK(e,{table:s,id:t});return await n.load(),n.getModel()}))).then((e=>(0,o.oA)(e)))),r=await function(e,t){const s=Object.values((0,o.vM)(t,(e=>function(e){if(e.isGuestInviteRequest()){const t=e.getAttributes().permission_records_and_roles[0];return`guest_invite_${e.getForActorId()}:${null==t?void 0:t.id}:${null==t?void 0:t.role}`}return e.isSpaceMembershipRequest()?`space_membership_${e.getForActorId()}`:e.isTeamMembershipRequest()?void 0:void e.isPageAccessRequest()}(e))));return Promise.all(s.map((async t=>{const s=(0,o.MR)(t,(e=>e.getCreatedTime())),i=s[0];return{createdByActorsWithReason:await Promise.all(s.map((async t=>{const s=await j(e,{id:t.created_by_id,table:a.KJ});if(s)return{actor:s,reason:t.message}}))).then((e=>(0,o.oA)(e))),accessRequest:i}})))}(e,n);return Promise.all(r.map((async t=>{const s=await j(e,{id:t.accessRequest.getForActorId(),table:a.KJ});if(s)return{forActor:s,...t}}))).then((e=>(0,o.oA)(e)))}async function j(e,t){const s=new f.U6(e,t);return await s.load(),s.getModel()}},407512:(e,t,s)=>{s.d(t,{A:()=>f,t:()=>h});var i=s(597213),n=s(709291),a=s(730459),o=s(433929),r=s(80444),l=s(453730),d=s(454642),c=s(547307),u=s(792625),g=s(497977),m=s(709953);const p=(0,n.defineMessages)({deletingAccount:{id:"accountActions.deletingAccount.loadingMessage",defaultMessage:"Deleting your account…"},noUserError:{id:"accountActions.deletingAccount.noUserToDeleteMessage",defaultMessage:"No account to delete."}});function f(e){const{userStore:t,data:s,transaction:i}=e,n={};"name"in s&&s.name&&(n.name=s.name),"profilePhoto"in s&&(n.profile_photo=s.profilePhoto),0!==Object.keys(n).length&&m.sW({store:t,data:n,transaction:i})}async function h(e){u.j({message:p.deletingAccount});const t=e.currentUser.id,{currentUserRootStore:s,currentUserStore:n}=r.default.state;if(!s||!n||!t)return u.x(),void c.showErrorMessage(o.default.formatMessage(p.noUserError));a.K4(e,"delete_user"),await d.deleteUser(e,{}),await l.transactionQueue.clearForUser(t),g.logoutSingleAccount({environment:e,userId:t,logoutOrigin:i.F.DeleteAccount}),u.x()}},929845:(e,t,s)=>{s.d(t,{LC:()=>d,Zy:()=>o,iD:()=>l,rZ:()=>a,wW:()=>r,wz:()=>n});var i=s(730459);function n(e,t){i.K4(e,"toggle_open_in_desktop_app",t)}function a(e){i.K4(e,"configure_open_in_desktop_app")}function o(e){i.K4(e,"open_in_desktop_app_popup_dismiss")}function r(e){i.K4(e,"open_in_desktop_app_popup_display")}function l(e){i.K4(e,"open_in_desktop_app_popup_download")}function d(e,t){i.K4(e,"open_in_desktop_app_popup_open_in_app",t)}},580136:(e,t,s)=>{s.d(t,{s:()=>f,w:()=>h});s(21703),s(667294);var i=s(709291),n=s(215010),a=s(897630),o=s(891219),r=s(781918),l=s(454642),d=s(792625),c=s(476464),u=s(164964),g=s(210228),m=s(785893);const p=(0,i.defineMessages)({removingGuest:{id:"convertGuestToMember.removeGuest.updatingMessage",defaultMessage:"Updating…"},convertingGuest:{id:"convertGuestToMember.convertingGuest.updatingMessage",defaultMessage:"Updating…"}});async function f(e){const{environment:t,store:s,role:l,guestUserStore:f,isConvertToAdmin:h}=e,S=f.id,y=f.getEmail();try{d.j({message:p.convertingGuest});const i=[{type:"user_permission",role:l,user_id:S}],{serverCommitResult:a}=g.createAndCommit({userAction:"spacePerimssionGuestActions.convertGuestToMember",environment:t,perform:e=>{c.tQ({environment:t,spaceStore:s,permissionItems:i,transaction:e,from:"convert_to_member"})}});await a,r.Rb(t,{member_user_id:S,convert_to:h?"admin":"member",origin:e.origin}),o.jB(t,{role:l,is_space:!0,invite_targets:[{type:"existingUser",value:{id:S,version:0,email:""},spaceRole:"none"}],is_onboarding:!1,invite_origin:"convert_to_member",permission_items:i,invite_message_length:0,domainType:(0,n.JF)()})}catch(b){u.oV({label:(0,m.jsx)(i.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.snackbar.failure",defaultMessage:"Failed to convert {email} to workspace member",values:{email:y}})})}finally{await a.bi(t),d.x()}}async function h(e){const{environment:t,store:s,guestUserStore:n}=e,o=n.id,c=n.getEmail();try{d.j({message:p.removingGuest});if("success"!==(await l.removeUsersFromSpace(t,{userIds:[o],spaceId:s.id,removePagePermissions:!0,revokeUserTokens:!1})).type)throw new Error("Failed to remove guest");r.bw(t)}catch(g){u.oV({label:(0,m.jsx)(i.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.snackbar.failure",defaultMessage:"Failed to remove {email} from workspace",values:{email:c}})})}finally{await a.bi(t),d.x(),r.fN(t,{origin:"space_setting_guest_tab",changedNumber:-1})}}},522974:(e,t,s)=>{s.d(t,{VZ:()=>f,vn:()=>u,Y7:()=>m,LH:()=>p});var i=s(531701);const n="theme";var a=s(401898),o=s(30021),r=s(304926),l=s(247839);const d=12;function c(e,t){const{device:s,ThemeStore:a}=e,{mode:o,usingSystemTheme:c}=t;if(window.notionTheme)return;const u={mode:o};a.setState(u),e.mobileNative&&e.mobileNative.setTheme(o,c),l.setTheme(function(e,t){const s=(0,i.gh)({theme:e});return{mode:e,usingSystemTheme:t,colors:{white:i.ZP.white,blue:i.ZP.blue},borderRadius:4,textColor:s.regularTextColor,popoverBackgroundColor:s.popoverBackground,popoverBoxShadow:s.mediumBoxShadow,inputBoxShadow:s.inputBoxShadow,inputBackgroundColor:s.inputBackground,dividerColor:s.darkDividerColor,shadowOpacity:s.shadowOpacity}}(o,c)),localStorage.setItem(n,JSON.stringify(u)),function(e,t){if(0===e.nativeScrollbarWidth)return;const s=document.getElementById("scroll-properties");s&&(s.innerHTML=`\n\t\t* {\n\t\t\tscrollbar-width: ${d}px;\n\t\t\tscrollbar-color: ${g.scrollbarThumb[t]}  ${g.scrollbarTrack[t]};\n\t\t}\n\t\t::-webkit-scrollbar {\n\t\t\twidth: ${d}px;\n\t\t\theight: ${d}px;\n\t\t}\n\t\t::-webkit-scrollbar {\n\t\t\tbackground: transparent;\n\t\t}\n\t\t::-webkit-scrollbar-track:hover {\n\t\t\tbackground: ${g.scrollbarTrack[t]};\n\t\t}\n\t\t::-webkit-scrollbar-thumb {\n\t\t\tbackground: ${g.scrollbarThumb[t]};\n\t\t\tcursor: pointer;\n\t\t}\n\t\t::-webkit-scrollbar-thumb:hover {\n\t\t\tbackground: ${g.scrollbarThumbHover[t]};\n\t\t}\n\t\t::-webkit-scrollbar-button {\n\t\t\tdisplay: none;\n\t\t}\n\t`,r.Z.setState(d))}(s,o),"dark"===o?document.body.classList.add("dark"):document.body.classList.remove("dark")}function u(e){return e.device.prefersDarkInterface?"dark":"light"}const g={scrollbarTrack:{light:"rgba(0, 0, 0, 0)",dark:"rgba(0, 0, 0, 0)"},scrollbarThumb:{light:"#D3D1CB",dark:"rgba(255, 255, 255, 0.2)"},scrollbarThumbHover:{light:"#AEACA6",dark:"rgba(255, 255, 255, 0.3)"}};function m(e){o.Z.setState(e)}function p(e){const t=f(e);switch(t){case"dark":case"light":c(e,{mode:t,usingSystemTheme:!1});break;case"system":!async function(e){const{mobileNative:t}=e;let s="light";s=t&&t.api.getTheme?await t.api.getTheme():u(e),c(e,{mode:s,usingSystemTheme:!0})}(e);break;default:(0,a.t1)(t)}}function f(e){const t=o.Z.state||"system";return"dark"===(s=t)||"light"===s||"system"===s?s:"system";var s}},192245:(e,t,s)=>{s.d(t,{Z:()=>c});s(667294);var i=s(800480),n=s(886628),a=s(709291),o=s(237181),r=s(555422),l=s(80444),d=s(785893);const c=function(){const e=(0,i.O7)(),{device:t}=e,s=(0,n.VK)((()=>u()),[]);return(0,d.jsx)(r.Z,{isMobile:t.isMobile,title:(0,d.jsx)(a.FormattedMessage,{id:"calendarSettings.startWeekOnMonday.label",defaultMessage:"Start week on Monday"}),caption:(0,d.jsx)(a.FormattedMessage,{id:"calendarSettings.startWeekOnMonday.message",defaultMessage:"This will change how all calendars in your app look."}),type:"toggle",isOn:1===s,onToggle:()=>function(e){const t=u();1===t?o.rx(e):o.Zf(e)}(e)})};function u(){const{currentUserSettingsStore:e}=l.default.state;if(e){const t=e.getSettings();if(t)return t.start_day_of_week}}},397832:(e,t,s)=>{s.d(t,{Z:()=>R});s(667294);var i=s(313991),n=s(800480),a=s(886628),o=s(724405),r=s(10020),l=s(772141),d=s(590965),c=s(647425),u=s(709291),g=s(531701),m=s(372933),p=s(653965),f=s(137810),h=s(407512),S=s(614549),y=s(986080),b=s(548779),x=s(687258),v=s(80444),M=s(319385),j=s(992083),w=s(88893),k=s(288280),C=s(411066),_=s(707124),I=s(863296),T=s(731278),F=s(164369),P=s(244071),Z=s(555422),A=s(785893);const R=function(e){var t;const s=(0,n.O7)(),{device:R}=s,B=(0,u.useIntl)(),O=(0,o.yK)((e=>({icon:{width:20,height:20,fill:e.lightIconColor},spaceNameList:{listStyle:"none",maxHeight:200,overflowY:"auto",margin:0,padding:"12px 14px",display:"flex",flexDirection:"column",gap:6,border:`1px solid ${e.stroke.deemphasized}`},spaceItem:{display:"flex",alignItems:"center",lineHeight:"120%",width:"100%",borderRadius:4,paddingTop:4,paddingBottom:4,gap:12,height:44}})),[]),V=(0,a.VK)((()=>M.default.checkGate({gateName:"enable_new_confirm_input_dialog"})),[]),D=(0,a.VK)((()=>{var e;return(0,c.wP)(null===(e=k.subscriptionDataStoreInstance.state)||void 0===e?void 0:e.subscriptionTier)}),[]),E=Boolean(null===(t=e.userEmailDomainSettings)||void 0===t?void 0:t.isDomainVerified),N=e.disabled||E&&D,q=E&&D?(0,A.jsx)(u.FormattedMessage,{defaultMessage:"Your organization has disabled account deletion.",id:"profileSettings.accountDeleteButton.disabledForManagedUser.tooltip"}):null,G=async()=>{const{currentUserStore:e,currentUserRootStore:t}=v.default.state;if(!e||!t)return;if(!e.isDefined())return;const n=p.oA(t.getSpaceViewStores().map((e=>e.getSpaceStore()))),a=(0,w.Io)().filter((t=>(0,l.zz)(t.role)&&t.userId!==e.id)).length>0,o=n.filter((t=>!(0,d.XO)(e.id,t.getModel(),t.getRole(),a))),r=p.oA(o.map((e=>{if(e)return{key:e.id,render:()=>(0,A.jsxs)("div",{style:O.spaceItem,children:[(0,A.jsx)(T.Z,{disabled:!0,icon:(0,b.Wd)(s,e),isEmptyPage:!1,title:(0,b.rn)(s,e),size:32,isLarge:!0}),(0,A.jsxs)("div",{style:{minWidth:0},children:[(0,A.jsx)(F.Z,{className:"notranslate",isMobile:R.isMobile,children:(0,x.bM)(s,B,e)}),(0,A.jsx)(F.Z,{isSmall:!0,isMobile:R.isMobile,children:(0,x.rR)(s,B,e)})]})]})}}))),c=p.oA(o.map((e=>({id:e.id,name:(0,b.rn)(s,e)}))));S.qP(s);const M=(0,m.xf)(i.SP)?(0,A.jsx)(u.FormattedMessage,{id:"profileSettings.deleteAccountConfirmationDialog.warning",defaultMessage:"This action cannot be undone. This will permanently delete your entire account. All private workspaces will be deleted, and you will be removed from all shared workspaces."}):(0,A.jsx)(P.Z,{translations:{es:"Esta acción no se puede deshacer. Esto eliminará permanentemente su cuenta completa. Se eliminarán todas las áreas de trabajo privadas y se eliminará de todas las áreas de trabajo compartidas. Por favor, escriba su correo electrónico para confirmar.",ru:"Это действие не может быть отменено. Это навсегда удалит всю вашу учетную запись. Все частные рабочие области будут удалены, и вы будете удалены из всех общих рабочих областей. Пожалуйста, введите ваш адрес электронной почты для подтверждения.",zh:"此操作无法撤消。 这将永久删除您的整个帐户。 将删除所有私有工作空间，您将从所有共享工作空间中删除。 请输入您的电子邮箱进行确认。",de:"Diese Aktion kann nicht rückgängig gemacht werden. Dadurch wird Ihr gesamtes Konto dauerhaft gelöscht. Alle privaten Arbeitsbereiche werden gelöscht und Sie werden aus allen freigegebenen Arbeitsbereichen entfernt. Bitte geben Sie Ihre E-Mail-Adresse zur Bestätigung ein.",fr:"Cette action ne peut pas être annulée. Cela supprimera définitivement votre compte en entier. Tous les espaces de travail privés seront supprimés et vous serez supprimé de tous les espaces de travail partagés. Veuillez taper votre email pour confirmer.",ja:"この操作を元に戻すことはできません。 これによりアカウント全体が完全に削除されます。 すべてのプライベートワークスペースが削除され、あなたはすべての共有ワークスペースから削除されます。 確認のためにメールアドレスを入力してください。",it:"Questa azione non può essere annullata. Questo eliminerà definitivamente l'intero account. Tutti gli spazi di lavoro privati verranno eliminati e verranno rimossi da tutti gli spazi di lavoro condivisi. Inserisci la tua email per confermare.",pt:"Essa ação não pode ser desfeita. Isso excluirá permanentemente sua conta inteira. Todos os espaços de trabalho privados serão excluídos e você será removido de todos os espaços de trabalho compartilhados. Por favor, digite o seu email para confirmar.",nl:"Deze actie kan niet ongedaan gemaakt worden. Hiermee wordt uw gehele account permanent verwijderd. Alle privéwerkruimten worden verwijderd en u wordt verwijderd uit alle gedeelde werkruimten. Voer je e-mailadres in om te bevestigen.",pl:"Tego działania nie można cofnąć. Spowoduje to trwałe usunięcie całego konta. Wszystkie prywatne obszary robocze zostaną usunięte, a użytkownik zostanie usunięty ze wszystkich współużytkowanych obszarów roboczych. Wpisz swój e-mail, aby potwierdzić.",sv:"Den här åtgärden kan inte ångras. Detta tar bort hela ditt konto permanent. Alla privata arbetsytor kommer att raderas, och du kommer att tas bort från alla delade arbetsytor. Vänligen skriv in din email för att bekräfta.",uk:"Цю дію не можна скасувати. Таким чином буде видалено весь обліковий запис назавжди. Всі приватні робочі області будуть видалені, і ви будете видалені з усіх спільних робочих областей. Будь ласка, введіть електронний лист для підтвердження.",no:"Denne handlingen kan ikke fortrykkes. Dette vil permanent slette hele kontoen din. Alle private arbeidsområder blir slettet, og du vil bli fjernet fra alle delte arbeidsområder. Vennligst skriv inn din epost for å bekrefte.",tr:"Bu işlem geri alınamaz. Bu işlem hesabınızın tamamını kalıcı olarak siler. Tüm özel çalışma alanları silinecek ve paylaşılan tüm çalışma alanlarından kaldırılacaksınız. Lütfen onaylamak için e-postanızı yazın.",cs:"Tuto akci nelze vrátit zpět. Tím bude trvale smazán celý váš účet. Všechny soukromé pracovní prostory budou smazány a budete ze všech sdílených pracovních prostor odstraněni. Pro potvrzení zadejte svůj e-mail.",vi:"Hành động này không thể được hoàn tác. Điều này sẽ xóa vĩnh viễn toàn bộ tài khoản của bạn. Tất cả các không gian làm việc riêng tư sẽ bị xóa và bạn sẽ bị xóa khỏi tất cả các không gian làm việc chung. Vui lòng nhập email của bạn để xác nhận.",da:"Denne handling kan ikke fortrydes. Dette vil permanent slette hele din konto. Alle private arbejdsområder slettes, og du vil blive fjernet fra alle delte arbejdsområder. Indtast venligst din email for at bekræfte.",hu:"Ez a művelet nem visszavonható. Ez véglegesen törli a teljes fiókot. Minden privát munkaterület törlődik, és eltávolításra kerül minden megosztott munkaterületről. Kérjük, írja be e-mail címét, hogy megerősítse.",ar:"لا يمكن التراجع عن هذا الإجراء. سيؤدي الإجراء إلى حذف حسابك بالكامل. سيتم أيضا حذف جميع مساحات العمل الخاصة ، وستتم إزالتك من جميع مساحات العمل المشتركة. يرجى كتابة البريد الإلكتروني الخاص بك للتأكيد.",th:"การกระทำนี้ไม่สามารถยกเลิกได้ นี่จะเป็นการลบบัญชีทั้งหมดของคุณอย่างถาวร พื้นที่ทำงานส่วนตัวทั้งหมดจะถูกลบและคุณจะถูกลบออกจากพื้นที่ทำงานที่ใช้ร่วมกันทั้งหมด กรุณาพิมพ์อีเมลของคุณเพื่อยืนยัน",he:"לא ניתן לבטל פעולה זו. פעולה זו תמחק לצמיתות את כל החשבון שלך. כל סביבות העבודה הפרטיות יימחקו, ותוסר מכל סביבות העבודה המשותפות. הקלד את האימייל שלך כדי לאשר.",fi:"Tätä toimintoa ei voi peruuttaa. Tämä poistaa koko tilin pysyvästi. Kaikki yksityiset työtilat poistetaan ja poistetaan kaikista jaetuista työtiloista. Vahvistaaksesi kirjoita sähköpostiosoitteesi.",id:"Tindakan ini tidak bisa dibatalkan. Ini akan secara permanen menghapus seluruh akun Anda. Semua ruang kerja pribadi akan dihapus, dan Anda akan dihapus dari semua ruang kerja bersama. Ketikkan email Anda untuk mengonfirmasi."}});await y.b({width:420,title:(0,A.jsx)(u.FormattedMessage,{id:"profileSettings.deleteAccountConfirmationDialog.title",defaultMessage:"Delete your entire account permanently?"}),message:(0,A.jsxs)("div",{children:[(0,A.jsx)("div",{children:M}),V?null:(0,A.jsxs)(A.Fragment,{children:[c.length>0?(0,A.jsx)("ul",{style:{padding:0},children:c.map((e=>{let{id:t,name:s}=e;return(0,A.jsx)("li",{style:{marginTop:6,color:g.ZP.red,fontWeight:f.Z.fontWeight.medium,listStyle:"none"},children:s},t)}))}):null,(0,A.jsx)(u.FormattedMessage,{id:"profileSettings.deleteAccountConfirmationDialog.prompt",defaultMessage:"Please type in your email to confirm."})]})]}),content:V?(0,A.jsxs)(A.Fragment,{children:[r&&r.length>0?(0,A.jsx)("div",{style:{overflow:"hidden",borderRadius:6},children:(0,A.jsx)("ul",{style:O.spaceNameList,children:r.map((e=>{let{key:t,render:s}=e;return(0,A.jsx)("div",{children:s()},t)}))})}):null,(0,A.jsx)(_.q,{styleName:"Body-14px/Regular",colorName:"primary",children:(0,A.jsx)(u.FormattedMessage,{id:"profileSettings.deleteAccountConfirmationDialog.prompt",defaultMessage:"Please type in your email to confirm."})})]}):null,acceptLabel:0===c.length?(0,A.jsx)(u.FormattedMessage,{id:"profileSettings.deleteAccountConfirmationDialog.deleteAccountButton.label",defaultMessage:"Permanently delete account"}):s.device.isMobile?(0,A.jsx)(u.FormattedMessage,{id:"profileSettings.deleteAccountConfirmationDialog.deleteAccountAndWorkspacesButtonMobile.label",defaultMessage:"{numberOfWorkspaces, plural, one {Delete account & 1 workspace} other {Delete account & {numberOfWorkspaces} workspaces}}",values:{numberOfWorkspaces:c.length}}):(0,A.jsx)(u.FormattedMessage,{id:"profileSettings.deleteAccountConfirmationDialog.deleteAccountAndWorkspacesButton.label",defaultMessage:"{numberOfWorkspaces, plural, one {Permanently delete account and 1 workspace} other {Permanently delete account and {numberOfWorkspaces} workspaces}}",values:{numberOfWorkspaces:c.length}}),requiredInputValue:e.getEmail()})&&(S.ps(s),j.Z.reset(),h.t(s))};return(0,A.jsx)(Z.Z,{type:"custom",useFlexboxStyle:!0,isMobile:R.isMobile,title:(0,A.jsx)(u.FormattedMessage,{id:"profileSettings.accountDeletionSetting.title",defaultMessage:"Delete my account"}),caption:(0,A.jsx)(u.FormattedMessage,{id:"manageActiveSessions.accountDeletionSetting.label",defaultMessage:"Permanently delete the account and remove access from all workspaces."}),isCritical:!0,customButton:R.isMobile?(0,A.jsx)("div",{style:{marginTop:12},children:(0,A.jsx)(I.Z,{isLarge:!0,isRed:!0,onClick:G,disabled:N,disabledFeedback:N,children:(0,A.jsx)(u.FormattedMessage,{id:"profileSettings.deleteMyAccount.button.label",defaultMessage:"Delete my account"})})}):(0,A.jsx)(C.Z,{style:{borderRadius:"0.25em"},onClick:G,disabled:N,disabledFeedback:N,children:(0,r.C)(O.icon)}),disabled:N,tooltipLabel:q})}},67729:(e,t,s)=>{s.d(t,{Z:()=>h,h:()=>p});s(667294);var i=s(800480),n=s(724405),a=s(686658),o=s(542853),r=s(709291),l=s(950950),d=s(512955),c=s(110182),u=s(489728),g=s(555422),m=s(785893);function p(e){return(0,d.canSetCookie)(e)&&(0,d.canShowCookieUi)(e)}function f(){const e=(0,n.Fg)();return(0,m.jsx)(c.Z,{hasDismissButton:!1,renderOrigin:t=>(0,m.jsxs)(u.Z,{style:{paddingLeft:8,paddingRight:8,height:32},...t,children:[(0,m.jsx)(r.FormattedMessage,{id:"cookieSelector.label.customize",defaultMessage:"Customize"}),(0,o.i)({width:10,marginLeft:4,fill:e.lightIconColor})]})})}const h=function(e){let{isMobile:t}=e;return p((0,i.O7)())?(0,m.jsx)(g.Z,{isMobile:t,title:(0,m.jsx)(r.FormattedMessage,{...a.ze.cookieSettingsLabel}),caption:(0,a.Fd)(l.Tz,"settings"),type:"custom",customButton:(0,m.jsx)(f,{})}):null}},79603:(e,t,s)=>{s.d(t,{P:()=>V,U:()=>O});var i=s(667294),n=s(800480),a=s(886628),o=s(724405),r=s(512174),l=s(536591),d=s(542853),c=s(709291),u=s(531701),g=s(653965),m=s(137810),p=s(957400),f=s(460709),h=s(319385),S=s(807339),y=s(552275),b=s(231945),x=s(436488),v=s(374194),M=s(568785),j=s(478140),w=s(632163),k=s(863296),C=s(174136),_=s(489728),I=s(672495),T=s(164369),F=s(427386),P=s(723189),Z=s(66957),A=s(940235),R=s(785893);function B(e){const t=new Map,s=h.default.getExperimentMap(),i=e?function(){const e=new Map;return r.l4.forEach((t=>{e.set(t,{experimentId:t,experimentVersion:1,group:h.default.getEligibleGroup({experimentId:t,defaultGroup:r.nb,disableExposureLogging:!0}),groups:[...(0,r._n)(t),"control",r.nb],fromStatsig:!0,statsigOption:"EXPERIMENT",isActive:S.C.getIsExperimentActive(t)})})),r.b2.forEach((t=>{e.set(t,{experimentId:t,experimentVersion:1,group:h.default.checkGate({gateName:t,disableExposureLogging:!0}).toString(),groups:["true","false"],fromStatsig:!0,statsigOption:"FEATUREGATE",isActive:!0})})),e}():new Map;return s.forEach(((e,s)=>{t.set(s,e)})),i.forEach(((e,s)=>{t.set(s,e)})),t}function O(){const e=(0,n.O7)(),[t,s]=(0,i.useState)(""),[r,l]=(0,i.useState)(void 0),d=(0,a.VK)((()=>h.default.isStatsigEnabled()),[]),c=(0,a.VK)((()=>B(d)),[d]),u=(0,a.VK)((()=>[...c.values()]),[c]),g=(0,a.VK)((()=>r?[]:u.filter((e=>!t||0===t.length||e.experimentId.includes(t))).sort(((e,t)=>e.experimentId>t.experimentId?1:-1))),[r,u,t]),f=(0,o.yK)((e=>({containerStyle:{width:"100%"},filterContainerStyle:{marginLeft:"auto",flexGrow:1,maxWidth:300},description:{display:"flex",alignItems:"flex-start",cursor:"pointer",width:"100%",flexWrap:"wrap",fontSize:12,color:e.mediumTextColor,marginTop:2,marginBottom:16},emptyState:{borderTop:`1px solid ${e.regularDividerColor}`,paddingTop:12,paddingLeft:10,paddingBottom:14,color:e.mediumTextColor,fontSize:12},emptyStateNoBorder:{paddingTop:12,paddingLeft:10,paddingBottom:14,color:e.mediumTextColor,fontSize:12},localOverridesHeaderContainer:{fontSize:14,display:"flex",alignItems:"center",paddingBottom:4,height:25},resetButtonContainerStyle:{marginLeft:"auto"},tableCellStyle:{paddingLeft:10,paddingRight:10},tableExperimentIDHeaderStyle:{width:"auto"},tableExperimentGroupHeaderStyle:{width:"auto",textAlign:"right"}})),[]),y=["all","stale"],[b,x]=(0,i.useState)(0),j=(0,i.useMemo)((()=>u.filter((e=>!(d&&"fromStatsig"in e&&e.fromStatsig)||!e.isActive)).length),[u,d]),w=(0,a.VK)((()=>g.filter((e=>!(d&&"fromStatsig"in e&&e.fromStatsig)||!e.isActive))),[d,g]),C=[(0,R.jsx)("div",{children:`All (${u.length})`},"all"),(0,R.jsx)("div",{style:{display:"flex",alignItems:"center"},children:`Stale (${j})`},"stale")],_=[{key:"name",header:"Name",style:f.tableExperimentIDHeaderStyle},{key:"value",header:"Value",style:f.tableExperimentGroupHeaderStyle}],{gates:I={},configs:T={}}=S.C.getAllLocalOverrides()??{},F=Object.keys(I).length>0||Object.keys(T).length>0;return(0,R.jsxs)("div",{style:f.containerStyle,children:[(0,R.jsxs)(P.Z,{large:!0,divider:"full",style:{marginBottom:4,paddingBottom:4,display:"flex"},children:["Experiments",(0,R.jsx)("div",{style:{marginLeft:"auto"},children:(0,R.jsx)(k.Z,{style:{fontWeight:m.Z.fontWeight.regular},isSmall:!0,onClick:()=>{const e=g.map((e=>{const t=e.group;return`${d&&"fromStatsig"in e&&e.fromStatsig?`statsig:${e.statsigOption}:${e.experimentId}`:e.experimentId}\t${t}`})).join("\n");console.log(e)},children:null!=r&&r.reset?(0,R.jsx)(M.Z,{}):"Print all to console"})})]}),(0,R.jsxs)("div",{style:f.description,children:[(0,R.jsx)("div",{children:"For server-side/production configs, go to console.statsig.com."}),(0,R.jsx)("div",{children:"If an experiment is marked as 'STALE', it is likely no longer active and should be cleaned up!"})]}),(0,R.jsxs)("div",{style:{marginBottom:20},children:[(0,R.jsxs)("div",{style:f.localOverridesHeaderContainer,children:[(0,R.jsx)("div",{style:{fontWeight:m.Z.fontWeight.medium},children:"Local overrides"}),F&&(0,R.jsx)("div",{style:f.resetButtonContainerStyle,children:(0,R.jsx)(k.Z,{isSmall:!0,onClick:()=>{l({reset:!0}),S.C.removeAllLocalOverrides(),p.Of(e).then((()=>{l(void 0)}))},children:null!=r&&r.reset?(0,R.jsx)(M.Z,{}):"Clear overrides"})})]}),F?(0,R.jsx)(A.Z,{tableStyle:{borderBottom:void 0},cellStyle:f.tableCellStyle,columns:_,hideHeader:!0,rows:[...Object.entries(I).map((e=>{let[t,s]=e;return{key:t,columns:[(0,R.jsx)(D,{name:t,statsigType:"FEATUREGATE"},`${t}-localOverride-title`),(0,R.jsx)(E,{experimentUpdatingState:r,name:t,onUpdate:e=>l(e),possibleValues:["true","false"],statsigType:"FEATUREGATE",value:s.toString()},`${t}-localOverride-value`)]}})),...Object.entries(T).map((e=>{var t;let[s,i]=e;const n=i.hasOwnProperty("group")?i.group:"";return{key:s,columns:[(0,R.jsx)(D,{name:s,statsigType:"EXPERIMENT"},`${s}-localOverride-title`),(0,R.jsx)(E,{experimentUpdatingState:r,name:s,onUpdate:e=>l(e),possibleValues:(null===(t=c.get(s))||void 0===t?void 0:t.groups)??[],statsigType:"EXPERIMENT",value:n},`${s}-localOverride-value`)]}}))]}):(0,R.jsx)("div",{style:f.emptyState,children:"No overridden values"})]}),(0,R.jsx)("div",{style:{fontSize:14,display:"flex",alignItems:"center",paddingBottom:4},children:(0,R.jsx)(Z.Z,{style:{paddingLeft:0},tabs:C,selectedIndex:b,onChange:e=>x(e),right:(0,R.jsx)("div",{style:f.filterContainerStyle,children:(0,R.jsx)(v.Z,{placeholder:"Search...",value:t,showClearButton:!0,autoCapitalize:"off",autoComplete:"off",onChange:e=>{s(e.target.value)}})})})}),0===g.length?(0,R.jsx)("div",{style:f.emptyStateNoBorder,children:"No results"}):"stale"===y[b]?(0,R.jsx)(A.Z,{tableStyle:{borderTop:void 0},cellStyle:f.tableCellStyle,columns:_,hideHeader:!0,hideTopBorderForFirstRow:!0,rows:w.map((e=>{var t;const s=d&&"fromStatsig"in e&&e.fromStatsig;return{key:e.experimentId,columns:[(0,R.jsx)(D,{name:e.experimentId,statsigType:s?e.statsigOption:void 0,isStale:!0},`${e.experimentId}-title`),(0,R.jsx)(E,{experimentUpdatingState:r,name:e.experimentId,onUpdate:e=>l(e),possibleValues:(null===(t=c.get(e.experimentId))||void 0===t?void 0:t.groups)??[],statsigType:s?e.statsigOption:void 0,value:e.group,isStale:!0},`${e.experimentId}-value`)]}}))}):(0,R.jsx)(A.Z,{tableStyle:{borderTop:void 0},cellStyle:f.tableCellStyle,columns:_,hideHeader:!0,hideTopBorderForFirstRow:!0,rows:g.map((e=>{var t;const s=e.group,i=d&&"fromStatsig"in e&&e.fromStatsig,n=i?`statsig:${e.statsigOption}:${e.experimentId}`:e.experimentId;return{key:n,columns:[(0,R.jsx)(D,{name:e.experimentId,statsigType:i?e.statsigOption:void 0,isStale:!i||!e.isActive},`${n}-title`),(0,R.jsx)(E,{experimentUpdatingState:r,name:e.experimentId,onUpdate:e=>l(e),possibleValues:(null===(t=c.get(e.experimentId))||void 0===t?void 0:t.groups)??[],statsigType:i?e.statsigOption:void 0,value:s,isStale:!i||!e.isActive},`${n}-value`)]}}))})]})}function V(e){const t=(0,o.yK)((e=>({headerLabelStyle:{marginTop:2,width:"80%"},PlainButtonStyle:{marginTop:12,marginBottom:4}})),[]);return(0,R.jsxs)("div",{children:[(0,R.jsx)(P.Z,{children:"Experiments"}),(0,R.jsx)(T.Z,{isSmall:!0,isMultiline:!0,style:t.headerLabelStyle,children:"Locally toggle experiments."}),(0,R.jsx)(b.ZP,{popupType:b.Z4.SlideUp,renderOrigin:e=>(0,R.jsx)(k.Z,{...e,isLarge:!0,style:t.PlainButtonStyle,children:"View Experiments"}),render:e=>{const t={menuType:f.og.Modal,whiteBackground:!0,title:"Experiments",right:(0,R.jsx)(c.FormattedMessage,{defaultMessage:"Done",id:"appearanceSettings.modal.done"}),onClickRight:e.close};return(0,R.jsx)(x.Z,{capture:!0,allowEsc:!0,render:()=>(0,R.jsx)(j.Z,{...t,children:(0,R.jsx)(F.ZP,{disableScroller:!0,children:(0,R.jsx)(O,{})})})})}})]})}function D(e){const{statsigType:t,name:s,isStale:i}=e,a=(0,n.Fy)().isMobile,r=(0,o.yK)((e=>({experimentId:{marginRight:5,maxWidth:a?215:300,...m.Z.textOverflowStyle,color:i?e.lightTextColor:void 0},experimentInfo:{display:"flex",flexDirection:a?"column":"row",alignItems:"center"},stalePill:{background:e.redBadgeBackground,color:"white"}})),[a,i]);return(0,R.jsxs)("div",{style:r.experimentInfo,children:[(0,R.jsx)("span",{style:r.experimentId,children:s}),t&&(0,R.jsx)(C.Z,{children:`Statsig ${t}`}),(0,R.jsx)("div",{style:{marginLeft:4},children:"FEATUREGATE"!==t&&i&&(0,R.jsx)(C.Z,{innerStyle:r.stalePill,children:"Stale"})})]})}function E(e){const{experimentUpdatingState:t,name:s,onUpdate:a,possibleValues:h,statsigType:x,value:v,isStale:k}=e,C=(0,n.O7)(),T=(0,n.Fy)().isMobile,F=(0,o.yK)((e=>({experimentGroup:{maxWidth:T?90:300,...m.Z.textOverflowStyle,color:k?e.lightTextColor:void 0},experimentGroupButtonCheckContainerStyle:{width:T?16:14},experimentGroupButtonChevronStyle:{width:10,marginLeft:4,fill:e.lightIconColor},experimentGroupButtonStyle:{overflowX:"hidden",justifyContent:"left"},experimentGroupContainerStyle:{width:"100%",display:"flex",justifyContent:"flex-end"}})),[T,k]);return(0,R.jsx)("div",{style:F.experimentGroupContainerStyle,children:(0,R.jsx)(b.ZP,{popupType:T?b.Z4.SlideUp:b.Z4.Popup,renderOrigin:e=>(0,i.createElement)(_.Z,{...e,key:s,style:F.experimentGroupButtonStyle},(0,R.jsx)("span",{style:F.experimentGroup,children:v??"unknown"}),(0,d.i)(F.experimentGroupButtonChevronStyle)),render:e=>{let i;i=T?{menuType:f.og.Modal,title:s,right:(0,R.jsx)(c.FormattedMessage,{defaultMessage:"Done",id:"appearanceSettings.modal.done"}),onClickRight:e.close}:{menuType:f.og.Popup,width:250};const n=h.map((i=>{const n={key:i,action:()=>{let t;t="EXPERIMENT"===x?new Promise((e=>{S.C.updateLocalOverrideConfig(s,i),e(i)})):"FEATUREGATE"===x?new Promise((e=>{S.C.updateLocalOverrideGate(s,i),e(i)})):p.BX(C,s,i),a({experimentId:s,value:i}),t.then((()=>{a(void 0),g.gw((()=>{e.close()}),1e3)}))},render:e=>{const n=i===r.nb;return(0,R.jsx)(y.Z,{...e,title:i,right:t&&t.experimentId===s&&t.group===i?(0,R.jsx)("div",{style:F.experimentGroupButtonCheckContainerStyle,children:(0,R.jsx)(M.Z,{})}):i!==v||t?void 0:(0,R.jsx)("div",{style:F.experimentGroupButtonCheckContainerStyle,children:(0,l.e)()}),disabled:n,style:{...n&&{color:u.ZP.mediumTextColor}}})}};return n}));return(0,R.jsx)(j.Z,{...i,children:(0,R.jsx)(w.Z,{type:w.i.Vertical,initialFocus:void 0,sections:[{key:s,render:e=>(0,R.jsx)(I.Z,{...e}),items:n}]})})}})})}},244071:(e,t,s)=>{s.d(t,{Z:()=>o});s(667294);function i(){return(navigator.languages?navigator.languages.map((e=>e.toLowerCase())):navigator.language?[navigator.language.toLowerCase()]:navigator.userLanguage?[navigator.userLanguage.toLowerCase()]:[]).map((e=>e.split("-")[0]))}const n=["ar","az","he","fa","ur"];var a=s(785893);const o=function(e){const{style:t,translations:s}=e,o=i();for(const i of o){const e=s[i];if(e){const s=n.includes(i);return(0,a.jsx)("div",{style:{...s&&{direction:"rtl"},...t},children:e})}}return null}},300905:(e,t,s)=>{s.d(t,{Z:()=>o});s(667294);var i=s(709291),n=s(401898),a=s(785893);function o(e){let{target:t}=e;switch(t){case"notify_mobile":return(0,a.jsx)(i.FormattedMessage,{id:"notificationSettings.mobilePushNotificationSettings.description",defaultMessage:"Receive push notifications on mentions and comments via your mobile app"});case"notify_desktop":return(0,a.jsx)(i.FormattedMessage,{id:"notificationSettings.desktopNotificationSettings.description",defaultMessage:"Receive push notifications on mentions and comments immediately on your desktop app"});case"notify_email":return(0,a.jsx)(i.FormattedMessage,{id:"notificationSettings.emailNotificationSettings.improvedDescription",defaultMessage:"Receive emails when you get comments, mentions, page invites, reminders, access requests, and property changes"});case"notify_email_always":return(0,a.jsx)(i.FormattedMessage,{id:"notificationSettings.emailAlwaysNotificationSettings.improvedDescription",defaultMessage:"Receive emails about activity in your workspace, even when you're active on the app"});case"notify_slack":return(0,a.jsx)(i.FormattedMessage,{id:"notificationSettings.slackNotificationsSettings.default.description",defaultMessage:"Receive notifications in your Slack workspace when you're mentioned in a page, database property, or comment"});case"notify_slack_mention":return(0,a.jsx)(i.FormattedMessage,{id:"notificationSettings.slackMentionNotificationSettings.description",defaultMessage:"Receive notifications in your Slack workspace when you're mentioned in a group, page, database property, or comment."});case"notify_slack_all_activity":return(0,a.jsx)(i.FormattedMessage,{id:"notificationSettings.slackAllActivityNotificationSettings.description",defaultMessage:"Receive notifications in your Slack workspace when you get comments, mentions, page invites, and property changes."});case"notify_email_digest":return(0,a.jsx)(i.FormattedMessage,{id:"notificationSettings.emailDigestNotificationsSettings.default.description",defaultMessage:"Receive email digests every 8 hours for changes to pages you’re subscribed to"});case"marketing_emails":return(0,a.jsx)(i.FormattedMessage,{id:"notificationSettings.marketingEmails.description",defaultMessage:"Receive occasional emails about product launches and new features from Notion"});case"desktop_badge":return(0,a.jsx)(i.FormattedMessage,{id:"notificationSettings.desktopBadge.description",defaultMessage:'Show/hide the notification badge using the "Badge application icon" switch in System Settings'});default:(0,n.t1)(t)}}},779080:(e,t,s)=>{s.d(t,{Z:()=>o});s(667294);var i=s(709291),n=s(401898),a=s(785893);function o(e){let{target:t}=e;switch(t){case"notify_mobile":return(0,a.jsx)(i.FormattedMessage,{defaultMessage:"Mobile push notifications",id:"notificationSettings.mobilePushNotificationSettings.title"});case"notify_desktop":return(0,a.jsx)(i.FormattedMessage,{id:"notificationSettings.desktopNotificationSettings.title",defaultMessage:"Desktop push notifications"});case"notify_email":return(0,a.jsx)(i.FormattedMessage,{id:"notificationSettings.productNotifEmails.title",defaultMessage:"Activity in your workspace"});case"notify_email_always":return(0,a.jsx)(i.FormattedMessage,{id:"notificationSettings.emailAlwaysNotificationSettings.title",defaultMessage:"Always send email notifications"});case"notify_slack":return(0,a.jsx)(i.FormattedMessage,{id:"notificationSettings.slackNotificationSettings.title",defaultMessage:"Slack notifications"});case"notify_slack_mention":return(0,a.jsx)(i.FormattedMessage,{id:"notificationSettings.slackMentionNotificationSettings.title",defaultMessage:"Only user or group mentions"});case"notify_slack_all_activity":return(0,a.jsx)(i.FormattedMessage,{id:"notificationSettings.slackAllActivityNotificationSettings.title",defaultMessage:"Activity in your workspace"});case"notify_email_digest":return(0,a.jsx)(i.FormattedMessage,{id:"notificationSettings.emailDigestNotificationSettings.title",defaultMessage:"Email digests"});case"marketing_emails":return(0,a.jsx)(i.FormattedMessage,{id:"notificationSettings.marketingEmails.title",defaultMessage:"Announcements and update emails"});case"desktop_badge":return(0,a.jsx)(i.FormattedMessage,{id:"notificationSettings.desktopBadge.title",defaultMessage:"Desktop badge icon"});default:(0,n.t1)(t)}}},215311:(e,t,s)=>{s.d(t,{Z:()=>C});var i=s(667294),n=s(800480),a=s(886628),o=s(709291),r=s(401898),l=s(898104),d=s(703924),c=s(918514),u=s(128187),g=s(539675),m=s(80444),p=s(788632),f=s(67729),h=s(661519),S=s(164369),y=s(474523),b=s(421291),x=s(427386),v=s(723189),M=s(451124),j=s(597876),w=s(416347),k=s(785893);const C=(0,d.M)((function(e){let{isMobile:t,passwordRequestStore:s,userEmailDomainSettings:d}=e;const{isElectron:C,isPhone:_,isIOS:I}=(0,n.Fy)(),T=(0,n.O7)(),F=(0,a.VK)((()=>p.Z.state.online),[]),P=(0,a.VK)((()=>{var e,s;const i=(null===(e=m.default.state.currentSpaceViewStore)||void 0===e?void 0:e.getNotifyEmail())||!1,n=Boolean(null===(s=m.default.state.currentSpaceViewStore)||void 0===s||null===(s=s.getSettings())||void 0===s?void 0:s.notify_slack),a=(0,u.kC)(),o=(0,u.oI)();return function(e){const{isMobile:t,isElectron:s,showNotifyEmailAlwaysSetting:i,slackSettingsAndGates:n}=e,a=function(e){const{isSlackNotificationSettingEnabled:t,showSlackNotificationSetting:s,showNotionActivityNotificationsToSlackSetting:i}=e;return s?i?[{key:"notify_slack",renderSettingsItem:()=>(0,k.jsx)(j.O,{target:"notify_slack"})},t?{key:"notify_slack_all_activity",renderSettingsItem:()=>(0,k.jsx)(j.O,{target:"notify_slack_all_activity"})}:void 0,t?{key:"notify_slack_mention",renderSettingsItem:()=>(0,k.jsx)(j.O,{target:"notify_slack_mention"})}:void 0].filter(r.$K):[{key:"notify_slack",renderSettingsItem:()=>(0,k.jsx)(j.O,{target:"notify_slack"})}]:[]}(n);return[{key:"notify_mobile",renderSettingsItem:()=>(0,k.jsx)(b.A,{target:"notify_mobile"})},!t&&s?{key:"notify_desktop",renderSettingsItem:()=>(0,k.jsx)(b.A,{target:"notify_desktop"})}:void 0,{key:"notify_email",renderSettingsItem:()=>(0,k.jsx)(b.A,{target:"notify_email"})},i?{key:"notify_email_always",renderSettingsItem:()=>(0,k.jsx)(b.A,{target:"notify_email_always"})}:void 0,{key:"notify_email_digest",renderSettingsItem:()=>(0,k.jsx)(b.A,{target:"notify_email_digest"})},...a,{key:"marketing_emails",renderSettingsItem:()=>(0,k.jsx)(b.A,{target:"marketing_emails"})}].filter(r.$K)}({isMobile:t,isElectron:C,showNotifyEmailAlwaysSetting:i,slackSettingsAndGates:{isSlackNotificationSettingEnabled:n,showSlackNotificationSetting:a,showNotionActivityNotificationsToSlackSetting:o}})}),[t,C]),Z=(0,a.VK)((()=>t?(0,g.E)({isPhone:_,isIOS:I,passwordRequestStore:s,userEmailDomainSettings:d}):(0,g.Z)({environment:T})),[T,t,_,I,s,d]),A=(0,a.VK)((()=>[(0,f.h)(T)?{key:"cookies",renderSettingsItem:()=>(0,k.jsx)(f.Z,{isMobile:t})}:void 0,{key:"view-history",renderSettingsItem:()=>(0,k.jsx)(w.H,{isMobile:t})}].filter(r.$K)),[T,t]),R=(0,a.VK)((()=>T.WindowSizeStore.state.paddingBottomCSS),[T]);return(0,i.useEffect)((()=>{l.ZH({debug:{userAction:"NotificationsAndPersonalSettings.NotificationsAndPersonalSettings"},environment:T})}),[T]),F?(0,k.jsxs)(x.ZP,{disableScroller:t,children:[(0,k.jsx)(v.Z,{large:!t,divider:"full",children:(0,k.jsx)(o.FormattedMessage,{id:"notificationAndPersonalSettings.notificationSection.title",defaultMessage:"My notifications"})}),(0,k.jsx)(M.O,{items:P}),(0,k.jsx)(h.Z,{size:48,isHidden:!0}),(0,k.jsx)(v.Z,{large:!t,divider:"full",children:(0,k.jsx)(o.FormattedMessage,{id:"notificationAndPersonalSettings.settingsSection.title",defaultMessage:"My settings"})}),(0,k.jsx)(M.O,{items:Z}),(0,k.jsx)(h.Z,{size:48,isHidden:!0}),(0,k.jsx)(v.Z,{large:!t,divider:"full",children:(0,k.jsx)(o.FormattedMessage,{id:"notificationAndPersonalSettings.privacySection.title",defaultMessage:"Privacy"})}),(0,k.jsx)(M.O,{items:A}),(0,k.jsx)(h.Z,{size:48,isHidden:!1}),(0,k.jsx)("div",{style:{marginTop:4,marginBottom:t?R:void 0},children:(0,k.jsx)(y.Z,{title:(0,k.jsx)(o.FormattedMessage,{id:"notificationSettings.helpButton.caption",defaultMessage:"Learn about notifications & settings"}),href:(0,c.UY)("guides.notificationSettings"),analyticsFrom:"notifications_settings"})})]}):(0,k.jsx)(x.ZP,{children:(0,k.jsx)(S.Z,{isSmall:!0,style:{textAlign:"center"},children:(0,k.jsx)(o.FormattedMessage,{defaultMessage:"Please go online to manage settings.",id:"notificationSettingsButton.goOnline.prompt"})})})}))},860857:(e,t,s)=>{s.d(t,{Z:()=>Z});var i=s(667294),n=s(800480),a=s(886628),o=s(724405),r=s(745238),l=s(785893);const d=(0,r.IU)("paperAirplane",{viewBox:"0 0 34 34",svg:(0,l.jsx)("path",{d:"M19.6719 32.7188C20.6406 32.7188 21.3125 31.9375 21.8281 30.625L32.2188 3.45312C32.4375 2.875 32.5625 2.375 32.5625 1.9375C32.5625 1.07812 32.0312 0.546875 31.1719 0.546875C30.7344 0.546875 30.2344 0.671875 29.6562 0.890625L2.39062 11.3281C1.20312 11.7812 0.390625 12.4688 0.390625 13.4375C0.390625 14.625 1.26562 15.0781 2.64062 15.4844L14.2344 18.875L17.5938 30.375C18.0156 31.7969 18.4688 32.7188 19.6719 32.7188ZM14.7812 17.0469L3.51562 13.6719C3.0625 13.5469 2.95312 13.4375 2.95312 13.2812C2.95312 13.125 3.0625 13 3.4375 12.8594L26.6562 4.03125C27.6094 3.67188 28.5469 3.20312 29.375 2.82812C28.6094 3.4375 27.5156 4.29688 26.9062 4.90625L14.7812 17.0469ZM19.8281 30.1719C19.6719 30.1719 19.5625 30.0469 19.4375 29.6094L16.0625 18.3438L28.2031 6.20312C28.8125 5.60938 29.6875 4.5 30.3125 3.70312C29.9219 4.54688 29.4531 5.48438 29.0781 6.45312L20.25 29.6719C20.1094 30.0469 20 30.1719 19.8281 30.1719Z"})});var c=s(829851),u=s(698519),g=s(196068),m=s(709291),p=s(531701),f=s(137810),h=s(614549),S=s(454642),y=s(843250),b=s(833954),x=s(369503),v=s(661519),M=s(436488),j=s(374194),w=s(550506),k=s(164369),C=s(188175),_=s(375752),I=s(764898),T=s(924173),F=s(13490),P=s(555422);const Z=(0,m.injectIntl)((function(e){let{mfaStatus:t,isError:s,samlEnforced:a,isEducationPlan:o,hasPassword:r,intl:d,onReloadSettings:c,email:u}=e;const g=(0,n.O7)(),p=(0,i.useRef)();(0,i.useEffect)((()=>{if("on"===t&&void 0===p.current){const e=new _.r(g),t=new T.c;p.current=new T.W(t,e)}}),[g,t]);const f=(0,i.useCallback)((()=>function(e,t,s){"on"===t?x.Z.setState({open:!0,verifyIdentity:!0,onCancel:()=>{var e;return null===(e=s.current)||void 0===e?void 0:e.exit()}}):(h.Wb(e),x.Z.setState({open:!0,setNewPassword:!0,isSet:!1,password:"",repeatPassword:""}))}(g,t,p)),[g,t,p]),{device:S}=g;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(P.Z,{type:"toggleToButton",isMobile:S.isMobile,title:(0,l.jsx)(m.FormattedMessage,{id:"profileSettings.accountSecuritySection.passwordSetting.label",defaultMessage:"Password"}),caption:(0,l.jsx)(O,{isError:s,samlEnforced:a,isEducationPlan:o}),isOn:r,buttonLabel:(0,l.jsx)(m.FormattedMessage,{id:"passwordSetting.changePasswordButton.label",defaultMessage:"Change password"}),onClick:f}),(0,l.jsx)(ee,{hasPassword:r,intl:d,onReloadSettings:c,isEducationPlan:o,email:u,mfaStatus:t,settingsStateMachineRef:p})]})}));function A(e){return{display:e?"inherit":"none",marginTop:10,textAlign:"center",color:p.ZP.red,fontSize:f.Z.fontSize.UISmall.desktop}}function R(){return(0,l.jsx)(m.FormattedMessage,{id:"passwordSettings.passwordModal.educationPlanGuidelines",defaultMessage:"If you lose access to your school email address, you'll be able to log in using your password."})}function B(e,t){return!e&&t}function O(e){let{isError:t,samlEnforced:s,isEducationPlan:i}=e;return t?(0,l.jsx)(m.FormattedMessage,{id:"passwordSettings.passwordSetError.message",defaultMessage:"Your password cannot be set at this time. Please try again later."}):s?(0,l.jsx)(m.FormattedMessage,{id:"passwordSettings.passwordManagedThroughSAMLProvider.message",defaultMessage:"Your password is managed through your SAML Single Sign-on Provider."}):i?(0,l.jsx)(R,{}):(0,l.jsx)(m.FormattedMessage,{id:"passwordSettings.setPassword.message",defaultMessage:"Set a permanent password to login to your account."})}function V(e){return{width:27,height:27,fill:e.regularIconColor}}function D(e){(x.Z.isSetNewPasswordModal()||x.Z.isRemovePasswordModal())&&x.Z.setState({...x.Z.state,oldPassword:e.target.value,alert:void 0})}function E(){(x.Z.isSetNewPasswordModal()||x.Z.isRemovePasswordModal())&&x.Z.setState({...x.Z.state,oldPassword:"",alert:void 0})}function N(e){x.Z.isSetNewPasswordModal()&&x.Z.setState({...x.Z.state,password:e.target.value,alert:void 0})}function q(){const{onCancel:e}=x.Z.state;x.Z.reset(),e&&e()}function G(){x.Z.isSetNewPasswordModal()&&x.Z.setState({...x.Z.state,password:"",repeatPassword:"",alert:void 0})}function L(e){x.Z.isSetNewPasswordModal()&&x.Z.setState({...x.Z.state,repeatPassword:e.target.value,alert:void 0})}function U(){x.Z.isSetNewPasswordModal()&&x.Z.setState({...x.Z.state,repeatPassword:"",alert:void 0})}function K(){x.Z.setState({open:!0,removePassword:!0,isSuccess:!1,oldPassword:""})}function W(e){if(x.Z.isSetNewPasswordModal()){const{password:t,repeatPassword:s}=x.Z.state;t&&s&&t!==s&&x.Z.setState({...x.Z.state,alert:e.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordMismatchError",defaultMessage:"Your new password does not match."})})}}async function z(e,t,s){if(!x.Z.isRemovePasswordModal())return;const{oldPassword:i}=x.Z.state;if(h.wr(s),!i)return void x.Z.setState({...x.Z.state,alert:e.formatMessage({id:"passwordSettings.removePasswordModal.oldPasswordNotEnteredError",defaultMessage:"Please enter your current password."})});const n=await S.setPassword(s,{oldPassword:i,clearPassword:!0});if("success"===n.type)t(),x.Z.isRemovePasswordModal()&&x.Z.setState({...x.Z.state,isSuccess:!0,oldPassword:"",alert:void 0});else{const t=(0,b.wf)(e,n);x.Z.setState({...x.Z.state,alert:t||e.formatMessage({id:"passwordSettings.removePasswordModal.message",defaultMessage:"Error removing password. Please try again later."})})}}function H(e){let{isEducationPlan:t}=e;const s=(0,o.Fg)(),i=(0,a.VK)((()=>x.Z.isPasswordSetModal()),[]),n=(0,a.VK)((()=>x.Z.state),[]);if(!i)return null;const{oldPassword:r}=n,d=void 0===r?(0,l.jsx)(m.FormattedMessage,{id:"passwordSettings.passwordUpdatedModal.passwordSetSuccessModal.title",defaultMessage:"Your password has been set"}):(0,l.jsx)(m.FormattedMessage,{id:"passwordSettings.passwordUpdatedModal.passwordUpdatedModal.title",defaultMessage:"Your password has been saved"}),c=t?(0,l.jsx)(m.FormattedMessage,{id:"passwordSettings.passwordUpdateSuccessModal.educationPlan.header",defaultMessage:"You'll be able to log in, even if you lose access to your school email address."}):(0,l.jsx)(m.FormattedMessage,{id:"passwordSettings.passwordUpdateSuccessModal.header",defaultMessage:"We'll ask for this password when you log in to your account."});return(0,l.jsx)(C.Z,{title:d,header:c,icon:(0,u.k)(V(s)),onDismiss:q})}function $(e){let{isEducationPlan:t,mfaStatus:s,onReloadSettings:i}=e;const r=(0,m.useIntl)(),c=(0,o.Fg)(),u=(0,n.O7)(),g=(0,a.VK)((()=>x.Z.isRemovePasswordModal()),[]),p=(0,a.VK)((()=>x.Z.state),[]);if(!g)return null;const{oldPassword:h,alert:S}=p,y=(0,l.jsx)(m.FormattedMessage,{id:"passwordSettings.removePasswordModal.title",defaultMessage:"Remove password for temporary login codes?"}),b=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(m.FormattedMessage,{id:"passwordSettings.removePasswordModal.header",defaultMessage:"You'll receive a link and login code via email when you try to login."}),t&&(0,l.jsxs)(l.Fragment,{children:[" ",(0,l.jsx)(m.FormattedMessage,{id:"passwordSettings.removePasswordModal.educationPlanWarning.message",defaultMessage:"If you lose access to your school email, you'll be unable to log back into Notion."})]}),"on"===s&&(0,l.jsxs)(l.Fragment,{children:[" ",(0,l.jsx)(m.FormattedMessage,{id:"passwordSettings.removePasswordModal.removeMfaWarning.message",defaultMessage:"<boldtext>2-step verification will also be removed if you continue.</boldtext>",values:{boldtext:e=>(0,l.jsx)("span",{style:{fontWeight:f.Z.fontWeight.semibold},children:e})}})]})]}),v={text:(0,l.jsx)(m.FormattedMessage,{id:"passwordSettings.removePasswordModal.continueButton.label",defaultMessage:"Continue"}),onClick:()=>z(r,i,u),isRed:!0},M=[{text:(0,l.jsx)(m.FormattedMessage,{id:"passwordSettings.removePasswordModal.keepUsingPasswordButton.label",defaultMessage:"Keep using password"}),onClick:q,type:"button",view:"plain"}];return(0,l.jsxs)(C.Z,{title:y,header:b,icon:d(V(c)),onDismiss:q,primaryAction:v,secondaryActions:M,containerStyles:{width:350,padding:24},children:[(0,l.jsx)(F.Z,{hasMarginTop:!0,children:(0,l.jsx)(m.FormattedMessage,{id:"passwordSettings.removePasswordModal.passwordInput.label",defaultMessage:"Enter your current password"})}),(0,l.jsx)(j.Z,{type:"password",value:h,onChange:D,showClearButton:!0,onClearButtonClick:E,placeholder:r.formatMessage({id:"passwordSettings.removePasswordModal.currentPasswordInput.placeholder",defaultMessage:"Current password"}),focusInitial:!0,autoComplete:"current-password"}),(0,l.jsx)(k.Z,{isMultiline:!0,style:A(S),children:S})]})}function Q(){const e=(0,o.Fg)();if(!(0,a.VK)((()=>x.Z.isRemovePasswordSuccessModal()),[]))return null;const t=(0,l.jsx)(m.FormattedMessage,{id:"passwordSettings.removePasswordSuccessModal.title",defaultMessage:"Password removed"}),s=(0,l.jsx)(m.FormattedMessage,{id:"passwordSettings.removePasswordSuccessModal.header",defaultMessage:"To log into your account, we’ll send you a temporary login code to your email."});return(0,l.jsx)(C.Z,{title:t,header:s,icon:(0,u.k)(V(e)),onDismiss:q})}async function Y(e,t,s,i){if(!x.Z.isSetNewPasswordModal())return;const{oldPassword:n,password:a,repeatPassword:o}=x.Z.state;let r;if(t&&!n)r=s.formatMessage({id:"passwordSettings.changePasswordModal.oldPasswordMissingError",defaultMessage:"Please enter your old password."});else if(a){const e=(0,g.IA)(a);e.success?o?a!==o&&(r=s.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordsMismatchError",defaultMessage:"Your passwords do not match."})):r=s.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordNotRepeatedError",defaultMessage:"Please repeat your new password."}):r=function(e,t){const s=b.Ql[e.type];return s?t.formatMessage(s):t.formatMessage({id:"passwordSettings.genericPasswordSaveError",defaultMessage:"Error saving password. Please try again later."})}(e.reason,s)}else r=s.formatMessage({id:"passwordSettings.changePasswordModal.passwordNotEnteredError",defaultMessage:"Please enter a password."});if(r)return void x.Z.setState({...x.Z.state,alert:r});const l=await S.setPassword(e,{oldPassword:n,newPassword:a});if("success"===l.type)i(),x.Z.setState({...x.Z.state,isSet:!0});else{const e=(0,b.wf)(s,l);x.Z.setState({...x.Z.state,alert:e})}}function J(e){let{hasPassword:t,intl:s,onReloadSettings:r,isEducationPlan:d,email:u}=e;const g=(0,o.Fg)(),p=(0,n.O7)(),f=(0,i.useCallback)((()=>Y(p,t,s,r)),[p,t,s,r]),h=(0,a.VK)((()=>x.Z.isSetNewPasswordModal()?x.Z.state:null),[]);if(null===h)return null;const{password:S,repeatPassword:y,oldPassword:b,alert:M}=h,w=t?(0,l.jsx)(m.FormattedMessage,{id:"profileSettings.changePasswordModal.title",defaultMessage:"Change password"}):(0,l.jsx)(m.FormattedMessage,{id:"profileSettings.setPasswordModal.title",defaultMessage:"Set a password"}),_=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(m.FormattedMessage,{id:"passwordSettings.passwordModal.passwordGuidelines",defaultMessage:"Use a password at least 15 letters long, or at least 8 characters long with both letters and numbers."}),d&&(0,l.jsxs)(l.Fragment,{children:[" ",(0,l.jsx)(R,{})]})]}),I=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(F.Z,{children:(0,l.jsx)(m.FormattedMessage,{id:"passwordSettings.passwordModal.newPasswordInput.label",defaultMessage:"Enter a new password"})}),(0,l.jsx)(j.Z,{type:"password",value:S,onChange:N,showClearButton:!0,onClearButtonClick:G,placeholder:s.formatMessage({id:"passwordSettings.passwordModal.newPasswordInput.placeholder",defaultMessage:"New password"}),focusInitial:!t,onBlur:()=>W(s),autoComplete:"new-password"}),(0,l.jsx)(v.Z,{size:10,isHidden:!0}),(0,l.jsx)(F.Z,{children:(0,l.jsx)(m.FormattedMessage,{id:"passwordSettings.changePasswordModal.confirmPasswordInput.label",defaultMessage:"Confirm your new password"})}),(0,l.jsx)(j.Z,{type:"password",value:y,onChange:L,showClearButton:!0,onClearButtonClick:U,placeholder:s.formatMessage({id:"passwordSettings.passwordModal.confirmPasswordInput.placeholder",defaultMessage:"Confirm password"}),onBlur:()=>W(s),autoComplete:"new-password"})]}),T=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(j.Z,{style:{display:"none"},type:"text",value:u,autoComplete:"username",disabled:!0}),(0,l.jsx)(F.Z,{children:(0,l.jsx)(m.FormattedMessage,{id:"passwordSettings.passwordModal.currentPasswordInput.label",defaultMessage:"Enter your current password"})}),(0,l.jsx)(j.Z,{type:"password",value:b,onChange:D,showClearButton:!0,onClearButtonClick:E,placeholder:s.formatMessage({id:"passwordSettings.passwordModal.currentPasswordInput.placeholder",defaultMessage:"Current password"}),focusInitial:!0,autoComplete:"current-password"}),(0,l.jsx)(v.Z,{size:10,isHidden:!0}),I]}),P={text:t?(0,l.jsx)(m.FormattedMessage,{id:"passwordSettings.passwordModal.changePasswordButton.label",defaultMessage:"Change password"}):(0,l.jsx)(m.FormattedMessage,{id:"passwordSettings.passwordModal.setPasswordButton.label",defaultMessage:"Set a password"}),onClick:f},Z=[{text:(0,l.jsx)(m.FormattedMessage,{id:"passwordSettings.passwordModal.removePasswordButton.label",defaultMessage:"Remove password"}),onClick:K,type:"button",view:"plain"}];return(0,l.jsxs)(C.Z,{title:w,header:_,icon:(0,c.z)(V(g)),onDismiss:q,primaryAction:P,secondaryActions:B(d,t)?Z:void 0,containerStyles:{width:350,padding:24},children:[t?T:I,(0,l.jsx)(k.Z,{isMultiline:!0,style:A(M),children:M})]})}function X(e){let{settingsStateMachineRef:t}=e;const s=(0,a.VK)((()=>x.Z.isVerifyIdentityWithMfaModal()),[]);return(0,i.useEffect)((()=>{s&&void 0!==t.current&&t.current.settingsConfirmIdentityForPasswordSetting()})),s&&void 0!==t.current?(0,l.jsx)(I.Z,{settingsStateMachine:t.current,onDismiss:q,onStartSMS:()=>{},onStartTOTP:()=>{},onStartBackupCodes:()=>{}}):null}function ee(e){let{hasPassword:t,intl:s,onReloadSettings:n,isEducationPlan:o,email:r,mfaStatus:d,settingsStateMachineRef:c}=e;const u=(0,a.VK)((()=>x.Z.state.open),[]);return(0,l.jsx)(w.Z,{open:u,onDismiss:q,className:y.BKn,preventHideChildrenWhileOpening:!0,render:()=>(0,l.jsx)(M.Z,{capture:!0,allowEsc:!0,render:()=>(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(J,{hasPassword:t,intl:s,onReloadSettings:n,isEducationPlan:o,email:r}),(0,l.jsx)(H,{isEducationPlan:o}),(0,l.jsx)($,{isEducationPlan:o,mfaStatus:d,onReloadSettings:n}),(0,l.jsx)(X,{settingsStateMachineRef:c}),(0,l.jsx)(Q,{})]})})})}},421291:(e,t,s)=>{s.d(t,{A:()=>w});var i=s(667294),n=s(800480),a=s(886628),o=s(133728),r=s(509999),l=s(709291),d=s(401898),c=s(519719),u=s(454642),g=s(247839),m=s(709953),p=s(412714),f=s(310259),h=s(210228),S=s(710929),y=s(80444),b=s(863296),x=s(300905),v=s(779080),M=s(555422),j=s(785893);function w(e){let{target:t}=e;const s=(0,n.O7)(),{desktopAppId:w}=(0,n.Fy)(),k=(0,a.VK)((()=>y.default.state.currentSpaceViewStore),[]),C=(0,a.VK)((()=>{var e,s;switch(t){case"notify_mobile":case"notify_desktop":case"notify_email":case"notify_email_always":return(null==k||null===(e=k.getKeyStore(t))||void 0===e?void 0:e.getValue())||!1;case"notify_email_digest":return(null==k||null===(s=k.getSettingsStore())||void 0===s||null===(s=s.getKeyStore(t))||void 0===s?void 0:s.getValue())||!1;case"marketing_emails":case"notify_slack":case"desktop_badge":case"notify_slack_mention":case"notify_slack_all_activity":return!1;default:(0,d.t1)(t)}}),[k,t]),_=(0,i.useCallback)((()=>{if(k){const e=!C;"notify_email_digest"===t?f.MA(s,e):h.createAndCommit({userAction:"NotificationsAndPersonalSettings.onToggle",environment:s,perform:s=>{m.sW({store:k,data:{[t]:e},transaction:s})}}),"notify_slack"!==t&&"marketing_emails"!==t&&"desktop_badge"!==t&&c.Zh(s,{is_on:e,target:t})}}),[s,k,C,t]),I=async()=>{const e=await u.getAuthorizedEmailPreferenceCenterLink(s,{});if(e&&"success"===e.type&&e.data.preferenceCenterLink)return c.Md(s),p.D({environment:s,url:e.data.preferenceCenterLink});{const e=await(0,S.iF)(s),t=(0,o.t_)(e);return c.Md(s),p.D({environment:s,url:t})}},T=()=>{var e;null!==(e=g.electronApi)&&void 0!==e&&e.openExternalUrl&&g.electronApi.openExternalUrl(`x-apple.systempreferences:com.apple.preference.notifications?id=${w}`)};return"marketing_emails"===t?(0,j.jsx)(M.Z,{type:"custom",isMobile:!0,title:(0,j.jsx)(v.Z,{target:t}),caption:(0,j.jsx)(x.Z,{target:t}),customButton:(0,j.jsx)(b.Z,{isLarge:!0,onClick:I,icon:r.J,children:(0,j.jsx)(l.FormattedMessage,{id:"notificationSettings.marketingEmails.manageSettingsButton",defaultMessage:"Manage settings"})}),disableSettingsItemClick:!0}):"desktop_badge"===t?(0,j.jsx)(M.Z,{type:"custom",isMobile:!0,title:(0,j.jsx)(v.Z,{target:t}),caption:(0,j.jsx)(x.Z,{target:t}),customButton:(0,j.jsx)(b.Z,{isLarge:!0,onClick:T,icon:r.J,children:(0,j.jsx)(l.FormattedMessage,{id:"notificationSettings.desktopBadge.manageSettingsButton",defaultMessage:"Manage in System Settings"})}),disableSettingsItemClick:!0}):(0,j.jsx)(M.Z,{isMobile:!0,title:(0,j.jsx)(v.Z,{target:t}),caption:(0,j.jsx)(x.Z,{target:t}),type:"toggle",isOn:C,onToggle:_})}},851221:(e,t,s)=>{s.d(t,{Z:()=>m});s(667294);var i=s(800480),n=s(724405),a=s(732566),o=s(709291),r=s(137810),l=s(781918),d=s(992083),c=s(411066),u=s(164369),g=s(785893);function m(e){const{icon:t,title:s,calloutTitle:m,deeplinkTab:p}=e,f=(0,i.O7)(),h=(0,n.yK)((e=>({cardContainer:{backgroundColor:e.accentColors.gray[30],width:"100%",marginTop:20,marginBottom:20,padding:10,border:4,display:"flex",alignItems:"center",justifyContent:"space-between",gap:4},calloutTitle:{fontWeight:r.Z.fontWeight.semibold},titleContainer:{display:"flex",alignItems:"center"},button:{borderRadius:2,padding:4,display:"flex",alignItems:"center"},linkTitle:{color:e.mediumTextColor,fontWeight:r.Z.fontWeight.medium},titleIcon:{marginRight:8,height:20,width:20,color:e.mediumTextColor},arrowIcon:{marginLeft:4,color:e.mediumTextColor,height:14,width:14}})),[]);return(0,g.jsxs)("div",{style:h.cardContainer,children:[(0,g.jsxs)("div",{style:h.titleContainer,children:[t(h.titleIcon),(0,g.jsxs)("div",{children:[(0,g.jsx)(u.Z,{style:h.calloutTitle,children:m}),(0,g.jsx)(u.Z,{children:s})]})]}),p?(0,g.jsxs)(c.Z,{onClick:()=>function(e,t){l.jk(t,{source_tab:d.Z.state.currentTab,destination_tab:e.currentTab,destination_subtab:e.defaultSubtab}),d.Z.setState({...d.Z.state,...e})}(p,f),style:h.button,children:[(0,g.jsx)(u.Z,{style:h.linkTitle,children:(0,g.jsx)(o.FormattedMessage,{id:"settingsDeeplinkBanner.deeplinkMessage",defaultMessage:"View settings"})}),(0,a.k)(h.arrowIcon)]}):null]})}},451124:(e,t,s)=>{s.d(t,{O:()=>d});var i=s(667294),n=s(800480),a=s(676725),o=s(123570),r=s(661519),l=s(785893);function d(e){const{items:t}=e,{isMobile:s}=(0,n.Fy)();return(0,l.jsx)(l.Fragment,{children:(0,a.Z)(t.map((e=>{let{key:t,renderSettingsItem:s}=e;return(0,l.jsx)(i.Fragment,{children:s()},t)})),(e=>(0,l.jsx)(r.Z,{size:(0,o.f)(s),isHidden:!s},e)))})}},597876:(e,t,s)=>{s.d(t,{O:()=>N});var i=s(667294),n=s(800480),a=s(886628),o=s(724405),r=s(332161),l=s(709291),d=s(401898),c=s(137810),u=s(519719),g=s(709953),m=s(210228),p=s(18441),f=s(128187),h=s(80444),S=s(530874),y=s(206258),b=s(300905),x=s(779080),v=s(977657),M=s(536591),j=s(542853),w=s(747453),k=s(940470),C=s(781575),_=s(389475),I=s(460709),T=s(164921),F=s(552275),P=s(231945),Z=s(478140),A=s(632163),R=s(672495),B=s(785893);function O(e){const{currentExternalAuthentication:t,externalAuthentications:s,spaceId:r,spaceViewStore:d}=e,c=(0,n.O7)(),u=(0,n.Fy)(),f=(0,a.VK)((()=>S.Z.integrations.state.find((e=>e.id===v.nO))),[]),h=(0,o.yK)((e=>({popupContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:14,marginTop:12},dropdownButtonContainer:{display:"flex",alignItems:"center",minWidth:0,padding:"0px 8px",borderRadius:4,marginLeft:8},currentValueLabel:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",flex:1},icon:{marginLeft:8,width:12,height:12,color:e.lightTextColor}})),[]);let y;y=u.isPhone?{menuType:I.og.ActionSheet}:{menuType:I.og.Popup,width:280,maxHeight:"50vh"};const b=i.useCallback((e=>Object.entries((0,p.YJ)(s)).map(((s,i)=>{let[n,a]=s;return{key:n,items:a.map((s=>{let{externalAuthentication:i,workspaceName:n}=s;return{key:i.id,action:()=>{e.close(),V({environment:c,spaceViewStore:d,currentExternalBotId:null==t?void 0:t.parent_id,selectedExternalBotId:i.parent_id})},render:e=>(0,B.jsx)(F.Z,{...e,title:n,right:i.id===(null==t?void 0:t.id)&&(0,M.e)({width:12,height:12})})}})),render:e=>(0,B.jsx)(R.Z,{...e,title:n,topBorder:0!==i})}}))),[null==t?void 0:t.id,null==t?void 0:t.parent_id,c,s,d]),x=i.useCallback((e=>f?[{key:"disable-notification",items:[{key:"disable-slack-notification",action:()=>{e.close(),function(e){const{environment:t,spaceViewStore:s}=e;m.createAndCommit({userAction:"NotificationsAndPersonalSettings.SlackNotificationsAccountSetting",environment:t,perform:e=>{g.sW({store:s.getSettingsStore(),data:{notify_slack:null},transaction:e})}}),C.xi(t,{type:"personal",source:"notifications_and_settings"})}({environment:c,spaceViewStore:d})},render:e=>(0,B.jsx)(F.Z,{...e,title:(0,B.jsx)(l.FormattedMessage,{id:"personalSlackNotificationsAccountDropdownButton.disableNotification.label",defaultMessage:"Off"}),right:void 0===t&&(0,M.e)({width:12,height:12})})}],render:e=>(0,B.jsx)(R.Z,{...e,topBorder:b.length>0})},{key:"create-new-auth",items:[{key:"connect",render:e=>(0,B.jsx)(F.Z,{...e,icon:(0,w.R)({width:12,height:12}),title:(0,B.jsx)(l.FormattedMessage,{id:"database.viewSettings.notificationsTab.slack.addNewAccount.label",defaultMessage:"Add new account"})}),action:async()=>{var e;const t=await _.hM({environment:c,integration:f,spaceId:r,from:"notifications_and_settings"});if(k.x.isFail(t))return;const s=null===(e=t.value.externalAuthentication)||void 0===e?void 0:e.parent_id;s&&V({environment:c,spaceViewStore:d,currentExternalBotId:void 0,selectedExternalBotId:s})}}],render:e=>(0,B.jsx)(R.Z,{...e,topBorder:!0})}]:[]),[t,c,b.length,r,d,f]);return(0,B.jsx)("div",{style:h.popupContainer,children:(0,B.jsx)(P.ZP,{popupType:P.Z4.Popup,alignmentToOrigin:P.vR.End,render:e=>(0,B.jsx)(Z.Z,{...y,children:(0,B.jsx)(A.Z,{type:A.i.Vertical,initialFocus:0,sections:[...b(e),...x(e)]})}),renderOrigin:t=>(0,B.jsxs)(T.Z,{...t,style:h.dropdownButtonContainer,children:[(0,B.jsx)("div",{style:h.currentValueLabel,children:(0,B.jsx)(D,{...e})}),(0,j.i)(h.icon)]})})})}function V(e){const{environment:t,spaceViewStore:s,selectedExternalBotId:i,currentExternalBotId:n}=e,a=s.getSettingsStore(),o=a.getKeyStore("notify_slack").getValue();if(n!==i){const e=(0,f.oI)();let s=!1;e&&(s=!n||Boolean(null==o?void 0:o.notify_slack_all_activity)),m.createAndCommit({userAction:"NotificationsAndPersonalSettings.SlackNotificationsAccountSetting",environment:t,perform:e=>{g.sW({store:a,data:{notify_slack:{external_bot_id:i,notify_slack_all_activity:s,notify_slack_mention:!n||(null==o?void 0:o.notify_slack_all_activity)}},transaction:e})}}),void 0===n?C.XC(t,{type:"personal",source:"notifications_and_settings"}):C.OS(t,{type:"personal",source:"notifications_and_settings"})}}function D(e){const{currentExternalAuthentication:t}=e;if(!t)return(0,B.jsx)(l.FormattedMessage,{id:"SlackNotificationsPersonalSettingsAccountPicker.accountDropdown.selectPlaceholder",defaultMessage:"Off"});const s=(0,p.jg)(t).organizationName;return(0,B.jsx)(B.Fragment,{children:s})}var E=s(555422);function N(e){const t=(0,n.O7)(),{target:s}=e,{isMobile:v}=(0,n.Fy)(),M=(0,a.VK)((()=>h.default.state.currentSpaceViewStore),[]),j=(0,a.VK)((()=>h.default.state.currentSpaceStore),[]),w=(0,a.VK)((()=>S.Z.completeSlackAuthentications.state),[]),k=(0,a.VK)((()=>(0,f.oI)()),[]),C=(0,a.VK)((()=>{var e;const t=null==M||null===(e=M.getSettings())||void 0===e||null===(e=e.notify_slack)||void 0===e?void 0:e.external_bot_id;if(!t)return;const s=w.find((e=>e.parent_id===t));if(s)return s;if(!M)return;return(0,y.Kv)(M,{id:t,table:r.PJ}).getValue()}),[M,w]),_=(0,a.VK)((()=>{var e;const t=null==M||null===(e=M.getSettingsStore())||void 0===e||null===(e=e.getKeyStore("notify_slack"))||void 0===e?void 0:e.getValue();switch(s){case"notify_slack_mention":return C&&(null==t?void 0:t.notify_slack_mention)||!1;case"notify_slack_all_activity":return(null==t?void 0:t.notify_slack_all_activity)||!1;case"notify_slack":return!1;default:(0,d.t1)(s)}}),[M,s,C]),I=(0,a.VK)((()=>{var e;const t=null==M||null===(e=M.getSettingsStore())||void 0===e||null===(e=e.getKeyStore("notify_slack"))||void 0===e?void 0:e.getValue();return null==t?void 0:t.notify_slack_all_activity}),[M]),T=(0,i.useCallback)((()=>{if(M){const e=!_,i=M.getSettingsStore();let n=i.getKeyStore("notify_slack").getValue();if(!n)return;"notify_slack_mention"===s?(n[s]=e,e||n.notify_slack_all_activity||(n=void 0),m.createAndCommit({userAction:"NotificationsAndPersonalSettings.onToggle",environment:t,perform:e=>{g.sW({store:i,data:{notify_slack:n},transaction:e})}})):"notify_slack_all_activity"===s&&(n[s]=e,m.createAndCommit({userAction:"NotificationsAndPersonalSettings.onToggle",environment:t,perform:e=>{g.sW({store:i,data:{notify_slack:n},transaction:e})}})),"notify_slack"!==s&&u.Zh(t,{is_on:e,target:s})}}),[t,M,_,s]),F=(0,o.yK)((e=>({notifySlackSelectedWorkspaceName:{fontWeight:c.Z.fontWeight.bold,color:e.darkTextColor},titleWithBadgeContainer:{display:"flex",alignItems:"center"},betaBadgeContainer:{marginTop:-3},betaBadge:{display:"inline",marginLeft:6}})),[]);return M&&j?"notify_slack"===s?(0,B.jsx)(E.Z,{type:"custom",isMobile:v,title:(0,B.jsx)(x.Z,{target:s}),caption:(0,B.jsx)(B.Fragment,{children:C?(0,B.jsx)(l.FormattedMessage,{id:"notificationSettings.slackNotificationsSettings.workspaceSelected.description",defaultMessage:"Receive notifications in {slackWorkspaceName} slack workspace{slackNotificationSettingMessage}.",values:{slackWorkspaceName:(0,B.jsx)("span",{style:F.notifySlackSelectedWorkspaceName,children:(0,p.jg)(C).organizationName}),slackNotificationSettingMessage:k?"":" when you're mentioned in a page, database property, or comment"}}):(0,B.jsx)(b.Z,{target:s})}),customButton:(0,B.jsx)(O,{currentExternalAuthentication:C,externalAuthentications:w,spaceId:j.id,spaceViewStore:M})}):"notify_slack_mention"===s?C?(0,B.jsx)(E.Z,{isMobile:!0,title:(0,B.jsx)(x.Z,{target:s}),caption:(0,B.jsx)(b.Z,{target:s}),type:"toggle",isOn:_,onToggle:T,disabled:Boolean(I)}):(0,B.jsx)(B.Fragment,{}):C?(0,B.jsx)(E.Z,{isMobile:!0,title:(0,B.jsx)(x.Z,{target:s}),caption:(0,B.jsx)(b.Z,{target:s}),type:"toggle",isOn:_,onToggle:T}):(0,B.jsx)(B.Fragment,{}):null}},641977:(e,t,s)=>{s.d(t,{Z:()=>Re});var i=s(667294),n=s(886628),a=s(724405),o=s(158573),r=s(709291),l=s(137810),d=s(516639),c=s(195697),u=s(740394),g=s(164369),m=s(800480),p=s(542853),f=s(433929),h=s(460709),S=s(455838),y=s(61766),b=s(960709),x=s(30397),v=s(88893),M=s(109867),j=s(274016),w=s(748019),k=s(552275),C=s(231945),_=s(268894),I=s(478140),T=s(489728),F=s(672495),P=s(785893);const Z=(0,r.defineMessages)({filterTeams:{defaultMessage:"Filter teamspaces…",id:"teamsDropdownForGroupMenu.filterForTeams.placeholder"}});function A(e){const t=(0,m.O7)(),s=(0,a.yK)((()=>({teamMenuItem:{fontWeight:400}})),[]),[o,l]=(0,i.useState)(""),d=(0,i.useCallback)((e=>M.RF({environment:t,teamId:e,tab:S.a.Members,from:"teams_dropdown_for_group"})),[t]),c=(0,n.VK)((()=>[{key:"teams for group",render:e=>(0,P.jsx)(F.Z,{...e}),actions:e.teamStores.map((e=>{const t={key:e.id,displayName:e.getName(),analyticsName:e.getName()||"team_unknown",searchName:e.getName(),render:t=>(0,P.jsx)(k.Z,{icon:(0,P.jsx)(j.p,{disabled:!0,store:e}),title:(0,P.jsx)(g.Z,{style:s.teamMenuItem,children:e.getName()}),right:(0,P.jsx)(r.FormattedMessage,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"teamsInGroupMenu.filterForTeams.numMembers",values:{numMembers:e.getNumberOfMembersOrZero((0,v.Io)())}}),...t}),action:()=>{d(e.id)},closeParentMenu:!0};return t}))}]),[s,e.teamStores,d]),u=o,p=(0,P.jsx)(w.Z,{filter:u,context:{blocks:[],environment:t,publicEditMode:void 0},sections:c,initialFocus:0}),y=(0,P.jsx)(F.Z,{isInput:!0,children:(0,P.jsx)(_.ZP,{value:u,onChange:(0,i.useCallback)((e=>{l(e.target.value)}),[]),focus:!0,focusAfterAnimation:!0,placeholder:f.default.formatMessage(Z.filterTeams)})}),b={menuType:h.og.Popup,width:280,maxHeight:"50vh",header:e.teamStores.length>5?y:void 0};return(0,P.jsx)(I.Z,{...b,children:p})}const R=function(e){const t=(0,n.qz)(void 0,y.Z),[s]=(0,n.AF)(x.Z),o=(0,a.yK)((e=>({button:{marginRight:8},noTeams:{marginRight:8,color:e.lightTextColor},chevron:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]),l=(0,n.VK)((()=>s.teams.filter((t=>t.getRawMembership().some((t=>"group"===t.entity_type&&t.group_id===e.group.id))))),[s,e.group]);return(0,P.jsx)(C.ZP,{popupType:C.Z4.Popup,renderOrigin:e=>(0,P.jsxs)(T.Z,{disabled:0===l.length,style:0===l.length?o.noTeams:o.button,...e,children:[0===l.length?(0,P.jsx)(r.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.userGroup.teamsCountNone",defaultMessage:"None"}):(0,P.jsx)(r.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.userGroup.teamsCount",defaultMessage:"{numberOfTeams, plural, one {{numberOfTeams} teamspace} other {{numberOfTeams} teamspaces}}",values:{numberOfTeams:l.length}}),l.length>0&&(0,p.i)(o.chevron)]}),buttonPopupStore:t,placementToOrigin:b.Iw.Bottom,render:e=>(0,P.jsx)(A,{parent:e,teamStores:l}),onClose:(0,i.useCallback)((()=>{t.reset()}),[t])})};var B=s(356666),O=s(653965),V=s(91536),D=s(547307),E=s(29974),N=s(210228),q=s(568418),G=s(693405),L=s(573063),U=s(632163),K=s(953437);function W(e){const{group:t,spaceStore:s,settingsStore:i}=e,a=(0,n.qz)(void 0,y.Z);return(0,P.jsx)(C.ZP,{popupType:K.kQ.Popup,render:()=>(0,P.jsx)(z,{group:t,spaceStore:s,popupStore:a,settingsStore:i}),buttonPopupStore:a,renderOrigin:e=>(0,P.jsx)(L.Z,{icon:B.o,...e})})}function z(e){const{group:t,spaceStore:s,popupStore:o,settingsStore:l}=e,d=(0,c.Gc)(),u=(0,n.VK)((()=>s.canAdmin()),[s]),g=(0,m.O7)(),p=(0,n.VK)((()=>(0,c.Xq)({environment:g,spaceStore:s})),[s,g]),f=(0,a.yK)((e=>({deleteButton:{color:e.redBadgeBackground}})),[]),S=(0,i.useCallback)((async()=>{o.setState({open:!1});await D.confirmUserAction({message:(0,P.jsx)(r.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.deleteGroupModal.confirmationMessage",defaultMessage:"Are you sure you want to delete this group? Any pages that are private to this group will be transferred to you."}),acceptLabel:(0,P.jsx)(r.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.deleteGroupModal.confirmationButton.label",defaultMessage:"Yes"})})&&(await N.createAndCommitAsync({environment:g,userAction:"SpacePermissionGroup.handleDelete",waitForServerCommit:!1,perform:async e=>{await E.Xv({environment:g,spaceStore:s,group:t,transaction:e})}}),V.d(g))}),[t,g,s,o]),y=(0,i.useCallback)((()=>{l.setState({...l.state,editingNameGroupId:t.id,groupNameInputValue:t.name||""}),o.setState({open:!1}),V.Xb(g)}),[t,g,o,l]),b=(0,i.useCallback)((()=>{q.Z.setState({...q.Z.state,name:t.name||"",defaultInviteTargets:[{type:"group",value:t}]}),M.lo("group_settings")}),[t]),x={key:"action_menu",render:e=>(0,P.jsx)(F.Z,{...e}),items:O.oA([{key:"rename",render:e=>(0,P.jsx)(G.Z,{...e,title:(0,P.jsx)(r.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.renameItem",defaultMessage:"Rename"})}),action:y},d&&p?{key:"create_team_from_group",render:e=>(0,P.jsx)(G.Z,{...e,title:(0,P.jsx)(r.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.createTeamFromGroup",defaultMessage:"Create teamspace from group"})}),action:b}:void 0,u&&{key:"delete",render:e=>(0,P.jsx)(G.Z,{...e,title:(0,P.jsx)("div",{style:f.deleteButton,children:(0,P.jsx)(r.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.deleteItem",defaultMessage:"Delete"})})}),action:S}])};return(0,P.jsx)(I.Z,{menuType:h.og.Popup,children:(0,P.jsx)(U.Z,{type:U.i.Vertical,initialFocus:0,sections:[x],onAccept:()=>{o.setState({open:!1})}})})}var H=s(772141),$=s(531701),Q=s(883165),Y=s(749085);class J extends Y.default{getInitialState(){return{userInputValue:"",temporaryUserIds:[],limitUsers:!0}}}const X=J;var ee=s(886125),te=s(729302),se=s(266897),ie=s(133728),ne=s(747453),ae=s(519889),oe=s(296994),re=s(823586),le=s(80444),de=s(206258),ce=s(288280),ue=s(743765),ge=s(158297),me=s(992864),pe=s(147082),fe=s(197680);function he(e){const{group:t,spaceStore:s,groupStore:i}=e,o=(0,n.qz)(void 0,y.Z),l=(0,a.yK)((()=>({popup:{width:400},button:{marginTop:4}})),[]);return(0,P.jsx)(C.ZP,{popupType:K.kQ.Popup,render:()=>(0,P.jsx)(Se,{spaceStore:s,group:t,popupStore:o,groupStore:i}),buttonPopupStore:o,onClose:()=>i.setState({userInputValue:"",temporaryUserIds:[],limitUsers:!0}),style:l.popup,renderOrigin:e=>(0,P.jsx)("div",{children:(0,P.jsx)(T.Z,{isGray:!0,icon:ne.R,style:l.button,...e,children:(0,P.jsx)(r.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.groupList.addMemberButton.label",defaultMessage:"Add members"})})})})}function Se(e){const t=(0,m.O7)(),s=(0,r.useIntl)(),{group:a,spaceStore:o,popupStore:l,groupStore:d}=e,c=(0,n.VK)((()=>d.state.temporaryUserIds.map((e=>{const t=o.getRecordValue({table:ae.KJ,id:e});return(0,P.jsx)(me.vw,{userValue:t,format:me.vw.Format.Medium,showRemoveButton:!0,onClickRemove:()=>{const t=d.state.temporaryUserIds.filter((t=>t!==e));d.setState({...d.state,temporaryUserIds:t})},shouldShrink:!0,isSingle:!1},e)}))),[o,d]),u=(0,n.VK)((()=>()=>{const{temporaryUserIds:e}=d.state,s=a.user_ids||[],i=O.G0(s,e),n={...a,user_ids:i,last_edited_time:Date.now()};N.createAndCommit({userAction:"SpacePermissionGroup.handleAddDoneClick",environment:t,perform:e=>{E.jF({spaceStore:o,group:n,transaction:e})}}),d.setState({userInputValue:"",temporaryUserIds:[],limitUsers:!0}),l.setState({open:!1}),V.Kf(t,{add_member_count:e.length})}),[a,t,d,l,o]),g=(0,i.useCallback)((()=>{const{temporaryUserIds:e}=d.state,t=e.slice(0,e.length-1);d.setState({...d.state,temporaryUserIds:t})}),[d]),p=(0,i.useCallback)((e=>{const t=e.target.value,{extractedEmails:s,newInputValue:i}=(0,ie.zI)(t),{currentSpaceStore:n}=le.default.state,a=ce.subscriptionDataStoreInstance.state;if(!a||!n)return;const o=(0,v.CM)(a).map((e=>e.userId)),r=O.oA(o.map((e=>de.U6.createChildStore(n,{table:ae.KJ,id:e}).getValue()))).filter((e=>s.includes(e.email)&&!d.state.temporaryUserIds.includes(e.id)));d.setState({...d.state,temporaryUserIds:[...d.state.temporaryUserIds,...r.map((e=>e.id))],userInputValue:i})}),[d]),f=(0,n.VK)((()=>d.state.userInputValue),[d]),S=(0,n.VK)((()=>d.state.temporaryUserIds),[d]);return(0,P.jsx)(I.Z,{menuType:h.og.Popup,tokenInputHeader:!0,header:(0,P.jsx)(pe.ZP,{focus:!0,disabled:!1,focusAfterAnimation:!0,format:pe.UR.Group,tokens:c,placeholder:s.formatMessage({id:"spacePermissionsSettings.groupsTab.userGroup.userSearchInput.placeholder",defaultMessage:"Search for a person…"}),onRemoveLastToken:g,value:f,onChange:p,inputAndTokenWrapRightStyle:{paddingTop:t.device.isMobile?0:6,paddingBottom:t.device.isMobile?0:6},right:(0,P.jsx)(ge.Z,{isLarge:!0,onClick:u,children:(0,P.jsx)(r.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.userGroup.addUserButton.label",defaultMessage:"Add"})})}),children:(0,P.jsx)(re.Z,{request:{query:f,temporaryUserIds:S},performRequest:async s=>{let{query:i,temporaryUserIds:n}=s;const a=e.group.user_ids||[],o=await oe.FF.searchActions.load();return(await o.searchVisibleSpaceUsers({environment:t,query:i,membersOnly:!0})).filter((e=>a.indexOf(e.id)<0&&n.indexOf(e.id)<0)).slice(0,20)},render:(e,t)=>(0,P.jsx)(ye,{results:t,spaceStore:o,groupStore:d})})})}function ye(e){const{spaceStore:t,groupStore:s}=e,[i,a]=(0,n.AF)(s,X),o=(e.results||[]).map((e=>{let{id:t}=e;return t})),l=(0,n.VK)((()=>o.map((e=>{const s=de.U6.createChildStore(t,{table:ae.KJ,id:e}).getValue(),n={key:e,render:e=>(0,P.jsx)(fe.Z,{...e,actor:(0,se.m3)(s),useEmailAsTooltip:!0}),action:()=>{const t=[...i.temporaryUserIds,e];a({...i,temporaryUserIds:t,userInputValue:""})}};return n}))),[t,a,i,o]);if(0===o.length)return(0,P.jsx)(F.Z,{children:(0,P.jsx)(ue.Z,{title:(0,P.jsx)(r.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.userGroup.searchUserDropdown.noResultsMessage",defaultMessage:"No results"})})});{const e={key:"user_menu",render:e=>(0,P.jsx)(F.Z,{...e}),items:l};return(0,P.jsx)(U.Z,{type:U.i.Vertical,initialFocus:0,sections:[e]})}}const be=10;function xe(e){const{group:t,canEdit:s,spaceStore:i,settingsStore:a}=e,o=(0,r.useIntl)(),l=(0,n.qz)(void 0,X),{groupMembers:c,remainingMembers:u}=(0,n.VK)((()=>{const{countRemainingUsers:e,totalNumberMembers:s,limitedUserStores:n}=(0,d.rm)({group:t,spaceStore:i,limit:l.state.limitUsers&&!a.state.groupsFilter?be:void 0});return{groupMembers:(0,d.N5)({userStores:n,spaceStore:i,intl:o}),remainingMembers:e,totalMembers:s}}),[t,i,a,l,o]);return(0,P.jsxs)("div",{style:{padding:"4px 42px 8px"},children:[c.map((t=>(0,P.jsx)(ve,{userStore:t,...e},t.id))),u>0&&(0,P.jsx)(T.Z,{isGray:!0,style:{marginTop:4},onClick:()=>{l.setState({...l.state,limitUsers:!1})},children:(0,P.jsx)(r.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.showMoreUsersButton.label",defaultMessage:"{numberOfHiddenUsers, plural, one {Show {numberOfHiddenUsers} more} other {Show {numberOfHiddenUsers} more}}",values:{numberOfHiddenUsers:u}})}),s?(0,P.jsx)(he,{group:t,spaceStore:i,groupStore:l}):c.length<1&&(0,P.jsx)(T.Z,{disabled:!0,isGray:!0,children:(0,P.jsx)(r.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.groupList.noMembersInside",defaultMessage:"No members inside"})})]})}function ve(e){const{spaceStore:t,userStore:s,group:i,canEdit:a}=e,o=(0,m.O7)(),l=(0,n.VK)((()=>(0,Q.VK)(t,s.id).getMembershipTypeAsRoleOrNone()),[t,s]);return(0,P.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,P.jsxs)("div",{style:{display:"flex"},children:[(0,P.jsx)(te.Z,{userStore:s,style:{fontSize:14,fontWeight:400,lineHeight:"17px",paddingRight:6,minHeight:34,width:"100%"},avatarSize:22}),(0,H.Bc)(l)&&(0,P.jsx)(ee.Z,{role:"membership_admin"===l?"membership_admin":"admin"})]}),a&&(0,P.jsx)(T.Z,{isGray:!0,hoveredStyle:{color:$.ZP.red},onClick:async()=>{if(await D.confirmUserAction({message:(0,P.jsx)(r.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupDialog.confirmationMessage",defaultMessage:"Are you sure you want to remove this member?"}),acceptLabel:(0,P.jsx)(r.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupDialog.confirmationButton.label",defaultMessage:"Yes"})})){const e=(i.user_ids||[]).filter((e=>e!==s.id)),n={...i,user_ids:e,last_edited_time:Date.now()};N.createAndCommit({userAction:"SpacePermissionGroup.renderUser",environment:o,perform:e=>{E.jF({spaceStore:t,group:n,transaction:e})}}),V.xt(o)}},children:(0,P.jsx)(r.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupButton.label",defaultMessage:"Remove"})})]},s.id)}var Me=s(313991),je=s(375071),we=s(444295),ke=s(522808),Ce=s(922843),_e=s(312793),Ie=s(374194),Te=s(203386),Fe=s(731278),Pe=s(526388),Ze=s(605210);function Ae(e){const{row:t,canEdit:s,open:o,toggleOpenState:c,spaceStore:u,settingsStore:p}=e,f=t.group,h=(0,r.useIntl)(),S=(0,a.Fg)(),y=(0,m.O7)(),b=d.kF({intl:h,group:f}),x=(0,a.yK)((e=>({container:{display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%"},toggle:{flexShrink:0,marginRight:2},chevron:{width:12,height:12,transition:"transform 200ms ease-out",transform:`rotateZ(${o?0:-90}deg)`,fill:"inherit",opacity:.5,marginRight:4},name:{fontFamily:l.Z.getCompositeFontFamily(Me.SP).sans,fontSize:14,lineHeight:"17px",marginRight:4},input:{fontWeight:l.Z.fontWeight.medium,padding:"4px 6px",background:e.contentBackgroundTransparent},icon:{marginRight:9}})),[o]),v=(0,i.useCallback)((e=>{const t={...f,icon:e,last_edited_time:Date.now()};N.createAndCommit({userAction:"SpacePermissionGroup.handleIconChange",environment:y,perform:e=>{E.jF({spaceStore:u,group:t,transaction:e})}}),V.zU(y,{is_emoji:(0,ke.Z)(e)})}),[f,u,y]),M=(0,i.useCallback)((()=>{p.setState({...p.state,editingNameGroupId:void 0,groupNameInputValue:""})}),[p]),j=(0,i.useCallback)((e=>{p.setState({...p.state,groupNameInputValue:e.target.value})}),[p]),w=(0,i.useCallback)((()=>{const{editingNameGroupId:e,groupNameInputValue:t}=p.state,s=t.trim();if(e===f.id){if(s!==f.name){const e={...f,name:s,last_edited_time:Date.now()};N.createAndCommit({userAction:"SpacePermissionGroup.handleNameAccept",environment:y,perform:t=>{E.jF({spaceStore:u,group:e,transaction:t})}})}p.setState({...p.state,editingNameGroupId:void 0,groupNameInputValue:""})}}),[f,y,u,p]),k=(0,n.VK)((()=>p.state.editingNameGroupId===f.id),[f,p]),C=(0,n.VK)((()=>p.state.groupNameInputValue),[p]);function _(e){const t={width:e-4,height:e-4,fill:S.mediumIconColor},s={width:12,height:12,fill:S.mediumIconColor};return(0,P.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[(0,we.I)(t),(0,je.f)(s)]})}return(0,P.jsxs)("div",{style:x.container,children:[(0,P.jsx)(Ze.Z,{isSidebar:!1,fill:!0,icon:"chevron",open:o,color:S.mediumIconColor,onClick:()=>c(f.id),style:x.toggle}),(0,P.jsx)(_e.Z,{size:28,style:x.icon}),k?(0,P.jsx)(Te.Z,{debugName:"GroupNameToggle",capture:!0,onEsc:M,children:(0,P.jsx)(Ie.Z,{disabled:!s,type:Ce.b.Inline,style:x.input,placeholder:h.formatMessage({id:"spacePermissionsSettings.groupsTab.userGroup.groupNameInput.placeholder",defaultMessage:"Untitled"}),focus:!0,value:C,onChange:j,onBlur:w,onSubmit:w})}):(0,P.jsx)(g.Z,{style:x.name,showTooltipWhenTruncated:!0,children:b}),(I=t.isRowHovered,f.icon?s?(0,P.jsx)(Fe.Z,{disabled:!1,bucket:"public",icon:f.icon?{pointer:u.pointer,icon:f.icon}:void 0,size:18,isEmptyPage:!1,title:b,onChange:v,style:x.icon}):(0,P.jsx)(Fe.Z,{disabled:!0,bucket:"public",icon:f.icon?{pointer:u.pointer,icon:f.icon}:void 0,size:18,isEmptyPage:!1,title:b,style:x.icon}):I&&s?(0,P.jsx)(Pe.Z,{renderTooltip:()=>(0,P.jsx)(r.FormattedMessage,{defaultMessage:"Add icon",id:"spacePermissionsSettings.groupsTab.userGroup.groupIcon.tooltip"}),render:e=>(0,P.jsx)(Fe.Z,{disabled:!1,bucket:"public",icon:f.icon?{pointer:u.pointer,icon:f.icon}:void 0,size:18,isEmptyPage:!1,title:b,onChange:v,style:{...x.icon,width:30},defaultIcon:_(18),...e})}):void 0)]});var I}function Re(e){let{groups:t,canEdit:s,spaceStore:d,permissionsSettingsStore:m,containerMarginTop:p}=e;const[f,h]=(0,i.useState)([]),S=(0,a.Fg)(),y=(0,c.Gc)(),b=(0,n.VK)((()=>(0,o.ZP)(m.state.groupsFilter,t,(e=>e.name||""))),[m,t]),x=(0,i.useCallback)((e=>{h((t=>t.includes(e)?t.filter((t=>t!==e)):t.concat(e)))}),[h]),v=(0,i.useMemo)((()=>function(e){return e.map((e=>({id:e.id,group:e,isClickable:!1})))}(b)),[b]),M=(0,i.useMemo)((()=>function(e){let{openRowIds:t,toggleOpenRowId:s,canEdit:i,spaceStore:n,settingsStore:a,isTeamEnabled:o}=e;const d={id:"title",headerTitle:(0,P.jsx)(r.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.groups",defaultMessage:"Group"}),renderCell:e=>(0,P.jsx)(Ae,{row:e,open:t.includes(e.id),toggleOpenState:s,canEdit:i,spaceStore:n,settingsStore:a}),widthData:{width:120},hasClickableContents:!1,sortable:!1},c={id:"teams",headerTitle:(0,P.jsx)("div",{style:{paddingLeft:8},children:(0,P.jsx)(r.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.teams",defaultMessage:"Teamspaces"})}),renderCell:e=>(0,P.jsx)("div",{style:l.Z.textOverflowStyle,children:(0,P.jsx)(R,{group:e.group})}),widthData:{width:40},hasClickableContents:!1,sortable:!1},u={id:"members",headerTitle:(0,P.jsx)(r.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.member",defaultMessage:"Members"}),renderCell:e=>(0,P.jsx)(Be,{spaceStore:n,row:e}),widthData:{width:40},hasClickableContents:!1,sortable:!1},g={id:"menu",headerTitle:null,renderCell:e=>(0,P.jsx)(W,{group:e.group,spaceStore:n,settingsStore:a}),widthData:{width:20},hasClickableContents:!0,sortable:!1};return[d,...o?[c]:[],u,...i?[g]:[]]}({openRowIds:f,toggleOpenRowId:x,canEdit:s,spaceStore:d,settingsStore:m,isTeamEnabled:y})),[f,x,s,d,m,y]),j=(0,u.b)({columnRenderInfo:M,theme:S,containerMarginTop:p}),w=(0,a.yK)((e=>({noRowContainer:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",gap:4,borderBottom:`1px solid ${e.v2.stroke.regular}`}})),[]);return(0,P.jsx)(u.D,{showRowBorders:!0,hideHeaderRowPadding:!0,columnRenderInfo:M,rows:v,styles:j,renderNoRowsComponent:()=>(0,P.jsx)(g.Z,{isSmall:!0,style:w.noRowContainer,children:t.length>0?(0,P.jsx)(r.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.noGroupsFound",defaultMessage:"No groups found"}):(0,P.jsx)(r.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.noGroups",defaultMessage:"No groups"})}),renderRowChild:e=>f.includes(e.id)?(0,P.jsx)(xe,{group:e.group,canEdit:s,spaceStore:d,settingsStore:m}):void 0})}function Be(e){const{spaceStore:t,row:s}=e,i=(0,n.VK)((()=>(0,d.kQ)({group:s.group,spaceStore:t}).length),[t,s.group]);return(0,P.jsx)("div",{style:l.Z.textOverflowStyle,children:(0,P.jsx)(r.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.userGroup.memberCount",defaultMessage:"{numberOfGroupMembers, plural, one {{numberOfGroupMembers} member} other {{numberOfGroupMembers} members}}",values:{numberOfGroupMembers:i}})})}},368840:(e,t,s)=>{s.d(t,{Z:()=>Rt});s(757658);var i=s(667294),n=s(883355),a=s(800480),o=s(886628),r=s(724405),l=s(749085),d=s(158573),c=s(642499),u=s(107189),g=s(356666),m=s(876781),p=s(519981),f=s(128495),h=s(435840),S=s(172263),y=s(471924),b=s(772141),x=s(815047),v=s(947969),M=s(519889),j=s(590965),w=s(883817),k=s(307928),C=s(709291),_=s(531701),I=s(653965),T=s(401898),F=s(137810),P=s(948298),Z=s(436610),A=s(91536),R=s(614549),B=s(781918),O=s(454642),V=s(800893),D=s(547307),E=s(461652),N=s(792625),q=s(476464),G=s(29974),L=s(580136),U=s(210228),K=s(296994),W=s(823586),z=s(187142),H=s(304708),$=s(215010),Q=s(460709),Y=s(367669),J=s(918514),X=s(548779),ee=s(195697),te=s(80444),se=s(788632),ie=s(319385),ne=s(206258),ae=s(672087),oe=s(64404),re=s(992083),le=s(598905),de=s(757118),ce=s(524665),ue=s(897630),ge=s(9634),me=s(601564),pe=s(202469),fe=s(673254),he=s(88893),Se=s(535057),ye=s(288280),be=s(126149),xe=s(621752),ve=s(164921),Me=s(552275),je=s(231945),we=s(661519),ke=s(573063),Ce=s(374194),_e=s(568785),Ie=s(478140),Te=s(632163),Fe=s(301978),Pe=s(863296),Ze=s(158297),Ae=s(672495),Re=s(462385),Be=s(824006),Oe=s(526388),Ve=s(164369),De=s(526774),Ee=s(516639),Ne=s(731278),qe=s(53695),Ge=s(785893);function Le(e){let{spaceStore:t,groups:s,onGroupClick:i}=e;const n=(0,C.useIntl)(),a=s.length,o=(0,r.yK)((e=>({title:{marginRight:8,color:0===a?e.lightTextColor:void 0},defaultGroupIconPill:{height:14,width:14,color:e.mediumTextColor,fill:"currentColor"},untitled:{color:e.lightTextColor}})),[a]),l=s.map((e=>({key:e.id,render:s=>{var i;const a=Ee.kF({intl:n,group:e});return(0,Ge.jsx)(Me.Z,{icon:(0,Ge.jsx)(Ne.Z,{disabled:!0,icon:e.icon&&t?{pointer:t.pointer,icon:e.icon}:void 0,size:18,isEmptyPage:!1,title:a,defaultIcon:(0,De.O)(o.defaultGroupIconPill)}),title:(0,Ge.jsx)(Ve.Z,{style:e.name?void 0:o.untitled,children:a}),caption:(0,Ge.jsx)(C.FormattedMessage,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"groupsDropdownForMember.numMembers",values:{numMembers:(null===(i=e.user_ids)||void 0===i?void 0:i.length)||0}}),inline:!0,...s})},action:i})));return(0,Ge.jsx)(qe.Nz,{title:(0,Ge.jsx)(Ve.Z,{style:o.title,children:0===a?(0,Ge.jsx)(C.FormattedMessage,{id:"groupsDropdownForMember.groupsCountNone.label",defaultMessage:"None"}):(0,Ge.jsx)(C.FormattedMessage,{id:"groupsDropdownForMember.groupsCount.label",defaultMessage:"{numberOfGroups, plural, one {{numberOfGroups} group} other {{numberOfGroups} groups}}",values:{numberOfGroups:a}})}),items:l,disabled:0===a})}var Ue=s(815145),Ke=s(542853),We=s(421202),ze=s(608055),He=s(484210),$e=s(61766),Qe=s(828992),Ye=s(743765),Je=s(489728),Xe=s(511470);const et=function(e){let{store:t,guestStore:s,isSubscribed:n,guest:l,hideActionButtons:d}=e;const c=(0,r.Fg)(),u=(0,a.O7)(),g=(0,o.qz)(void 0,$e.Z),m=(0,i.useCallback)((()=>(0,Ge.jsx)(tt,{store:t,guestStore:s,isSubscribed:n,guest:l,hideActionButtons:d,buttonPopupStore:g})),[t,s,n,l,d,g]),{device:p}=u;return(0,o.VK)((()=>{l.guestPageIds.map((e=>{ne.G.createChildStore(t,{table:We.iU,id:e}).load()}))}),[t,l]),0===l.guestPageIds.length?(0,Ge.jsx)(Je.Z,{disabled:!0,children:(0,Ge.jsx)(C.FormattedMessage,{id:"guestPagesPopup.permissionsForUserGuest.label",defaultMessage:"Guest"})}):(0,Ge.jsx)(je.ZP,{popupType:p.isMobile?je.Z4.SlideUp:je.Z4.Popup,renderOrigin:e=>(0,Ge.jsxs)(Je.Z,{...e,children:[(0,Ge.jsx)(C.FormattedMessage,{id:"guestPagesPopup.page",defaultMessage:"{numberOfAccessiblePages, plural, one {{numberOfAccessiblePages} page} other {{numberOfAccessiblePages} pages}}",values:{numberOfAccessiblePages:l.guestPageIds.length}}),(0,Ke.i)({width:10,marginLeft:4,fill:c.lightIconColor})]}),buttonPopupStore:g,render:m})};function tt(e){let{store:t,guestStore:s,isSubscribed:n,guest:r,hideActionButtons:l,buttonPopupStore:d}=e;const c=(0,a.O7)(),u=(0,i.useCallback)((()=>function(e,t,s,i){D.showDialog({showCancel:!0,keepFocus:!1,message:(0,Ge.jsx)(C.FormattedMessage,{id:"guestPagesPopup.removeGuestModal.confirmationMessage",defaultMessage:"Are you sure you want to remove this person? They will lose access to all shared pages."}),items:[{label:(0,Ge.jsx)(C.FormattedMessage,{id:"guestPagesPopup.removeGuestModal.removeButton.label",defaultMessage:"Remove"}),color:"red",onAccept:async()=>{i.setState({...i.state,open:!1}),await L.w({environment:e,guestUserStore:s,store:t})}}]})}(c,t,s,d)),[c,t,s,d]),g=(0,i.useCallback)((()=>async function(e,t,s,i,n){const a=i?"read_and_write":"editor";n.setState({...n.state,open:!1}),await L.s({environment:e,guestUserStore:s,role:a,store:t,isConvertToAdmin:!i,origin:"guest_pages_popup"})}(c,t,s,n,d)),[c,t,s,n,d]),{device:m}=c,p=(0,o.VK)((()=>t.canEditMembership()),[t]),f=r.guestPageIds.map((e=>{const s=ne.G.createChildStore(t,{table:We.iU,id:e}),i={key:e,render:e=>(0,Ge.jsx)(Xe.Z,{...e,store:s,placeholder:(0,Ge.jsx)(C.FormattedMessage,{id:"guestPagesPopup.privatePagePlaceholder",defaultMessage:"Private page"})}),action:()=>{const s=ne.G.createChildStore(t,{table:We.iU,id:e}),i=(0,He.ZP)({store:s,fullyQualified:!1,pageVisitSource:Ue.tY.LinkInPage});ze.c4({environment:c,url:i,openInNew:"tab"})}};return i}));let h;h=m.isMobile?{menuType:Q.og.ActionSheet}:{menuType:Q.og.Popup,width:300};const S=(0,o.VK)((()=>(0,he.qF)(c)),[c]),y=(0,o.VK)((()=>function(){const e=ye.subscriptionDataStoreInstance.state;return Boolean(e&&(0,he.YK)(e))}()),[]);let b;S&&(b=(0,Ge.jsx)(Oe.Z,{renderTooltip:()=>y?(0,Ge.jsx)(C.FormattedMessage,{id:"guestPagesPopup.addMemberPermissionButton.tooltip",defaultMessage:"This guest will become a member of this workspace."}):(0,Ge.jsx)(C.FormattedMessage,{id:"guestPagesPopup.addAdminPermissionButton.tooltip",defaultMessage:"This guest will become an admin of this workspace."}),render:e=>(0,Ge.jsx)(Pe.Z,{isLarge:!0,onClick:g,...e,children:y?(0,Ge.jsx)(C.FormattedMessage,{id:"guestPagesPopup.addMemberPermissionButton.label",defaultMessage:"Convert to member"}):(0,Ge.jsx)(C.FormattedMessage,{id:"guestPagesPopup.addAdminPermissionButton.label",defaultMessage:"Convert to admin"})})}));const x=!l&&p;return(0,Ge.jsxs)(Ie.Z,{...h,children:[x&&(0,Ge.jsx)(Qe.Z,{title:(0,Ge.jsxs)("div",{style:{paddingTop:12,paddingBottom:8,display:"flex",alignItems:"flex-start"},children:[b,(0,Ge.jsx)(Oe.Z,{renderTooltip:()=>(0,Ge.jsx)(C.FormattedMessage,{id:"guestPagesPopup.removeGuestButton.tooltip",defaultMessage:"This guest will be removed from all pages in this Workspace."}),render:e=>(0,Ge.jsx)(Pe.Z,{isLarge:!0,isRed:!0,style:{marginLeft:b?8:0},onClick:u,...e,children:(0,Ge.jsx)(C.FormattedMessage,{id:"guestPagesPopup.removeGuestButton.label",defaultMessage:"Remove"})})})]})}),x&&(0,Ge.jsx)(Ye.Z,{title:1===f.length?(0,Ge.jsx)(C.FormattedMessage,{id:"guestPagesPopup.guestHasAccessToSinglePageCaption",defaultMessage:"This guest can access this page:"}):(0,Ge.jsx)(C.FormattedMessage,{id:"guestPagesPopup.guestHasAccessToMultiplePagesCaption",defaultMessage:"This guest can access these pages:"})}),(0,Ge.jsx)(Te.Z,{type:Te.i.Vertical,initialFocus:0,sections:[{key:"pages",render:e=>(0,Ge.jsx)(Ae.Z,{...e}),items:f}]})]})}var st=s(474523),it=s(942402),nt=s(207567),at=s(364768),ot=s(329825),rt=s(983890),lt=s(608319),dt=s(427386),ct=s(723189),ut=s(851221),gt=s(641977),mt=s(293963),pt=s(66957),ft=s(940235),ht=s(433929),St=s(455838),yt=s(30397),bt=s(109867),xt=s(274016),vt=s(748019),Mt=s(268894);const jt=(0,C.defineMessages)({filterTeams:{defaultMessage:"Filter teamspaces…",id:"teamsDropdownForMember.filterForTeams.placeholder"}});function wt(e){const{teamGuest:t}=e,s=(0,a.O7)(),i=(0,o.VK)((()=>te.default.state.currentSpaceStore),[]);if(!i)return null;if(0===t.guestPageIds.length)return null;const n=[{key:"pages",render:e=>(0,Ge.jsx)(Ae.Z,{...e}),items:t.guestPageIds.map((e=>{const t=ne.G.createChildStore(i,{table:We.iU,id:e}),n={key:e,render:e=>(0,Ge.jsx)(Xe.Z,{...e,store:t,placeholder:(0,Ge.jsx)(C.FormattedMessage,{id:"guestPagesPopup.privatePagePlaceholder",defaultMessage:"Private page"})}),action:()=>{const t=ne.G.createChildStore(i,{table:We.iU,id:e}),n=(0,He.ZP)({store:t,fullyQualified:!1,pageVisitSource:Ue.tY.LinkInPage});ze.c4({environment:s,url:n,openInNew:"tab"})}};return n}))}],r={menuType:Q.og.Popup,minWidth:300,maxWidth:350,maxHeight:300,header:t.guestPageIds.length>0&&(0,Ge.jsx)(Ve.Z,{isSmall:!0,style:{color:_.ZP.regularTextColor,marginLeft:15,marginRight:15,paddingTop:6},children:(0,Ge.jsx)(C.FormattedMessage,{id:"guestpagesforteamguest.header",defaultMessage:"Pages"})})};return(0,Ge.jsx)(Ie.Z,{...r,children:(0,Ge.jsx)(Te.Z,{type:Te.i.Vertical,initialFocus:void 0,sections:n})})}function kt(e){const t=(0,a.O7)(),[s,n]=(0,i.useState)(""),l=(0,i.useCallback)((e=>bt.RF({environment:t,teamId:e,tab:St.a.Members,from:"teams_dropdown_for_team_guest"})),[t]),d=(0,r.yK)((()=>({teamMenuItem:{fontWeight:400,maxWidth:180}})),[]),c=(0,o.VK)((()=>[{key:"teams for team guest",render:e=>(0,Ge.jsx)(Ae.Z,{...e}),actions:e.teamStores.map((e=>{const t={key:e.id,displayName:e.getName(),analyticsName:e.getName()||"team_unknown",searchName:e.getName(),render:t=>(0,Ge.jsx)(Me.Z,{icon:(0,Ge.jsx)(xt.p,{disabled:!0,store:e}),title:(0,Ge.jsx)(Ve.Z,{style:d.teamMenuItem,children:e.getName()}),caption:(0,Ge.jsx)(C.FormattedMessage,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"teamsDropdownForMember.numMembers",values:{numMembers:e.getNumberOfMembersOrZero((0,he.Io)())}}),inline:!0,...t}),action:()=>{l(e.id)},closeParentMenu:!1};return t}))}]),[e.teamStores,d.teamMenuItem,l]),u=(0,Ge.jsx)(Ae.Z,{isInput:!0,children:(0,Ge.jsx)(Mt.ZP,{value:s,onChange:(0,i.useCallback)((e=>{n(e.target.value)}),[]),focus:!0,focusAfterAnimation:!0,placeholder:ht.default.formatMessage(jt.filterTeams)})}),g={menuType:Q.og.Popup,maxWidth:350,maxHeight:300,header:e.teamStores.length>5?u:void 0};return(0,Ge.jsx)(Ie.Z,{...g,children:(0,Ge.jsx)(vt.Z,{filter:s,context:{blocks:[],environment:t,publicEditMode:void 0},initialFocus:0,sections:c})})}const Ct=function(e){const{teamGuest:t}=e,s=(0,o.VK)((()=>yt.Z.state.teams),[]),i=(0,o.VK)((()=>s.filter((e=>e.isMemberOrGuest(t.userId)))),[s,t]),n=(0,r.yK)((e=>({button:{marginRight:8},noTeams:{marginRight:8,color:e.lightTextColor},chevron:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]),a=i.length??0;return(0,Ge.jsx)(je.ZP,{popupType:je.Z4.Popup,renderOrigin:e=>(0,Ge.jsx)(Je.Z,{disabled:0===a,style:0===a?n.noTeams:n.button,...e,children:0===a?(0,Ge.jsx)(C.FormattedMessage,{id:"teamsDropdownForTeamGuest.teamsCountNone.label",defaultMessage:"No access"}):(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)(C.FormattedMessage,{id:"teamsDropdownForMember.teamsCount.label",defaultMessage:"{numberOfTeams, plural, one {{numberOfTeams} teamspace} other {{numberOfTeams} teamspaces}}",values:{numberOfTeams:a}}),(0,Ke.i)(n.chevron)]})}),render:()=>(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)(kt,{teamGuest:t,teamStores:i}),(0,Ge.jsx)(we.Z,{size:"100%"}),(0,Ge.jsx)(wt,{teamGuest:t})]})})};var _t=s(588775),It=s(605210);const Tt={maxWidth:275,borderRadius:30},Ft={marginTop:8},Pt={maxWidth:160},Zt=50;class At extends n.Z{constructor(){super(...arguments),this.storeTypes={spacePermissionsSettingsStore:oe.Z,getRecoverableSpaceUserContentRequestStore:ae.Z,accessRequestsStore:ae.Z,recentlyRemovedMembersStore:l.default.createClass([],{name:"recentlyRemovedMembersStore"}),isPageGuestsOpenStore:l.default.createClass(!0,{name:"isPageGuestsOpenStore"}),isTeamGuestsOpenStore:l.default.createClass(!0,{name:"isTeamGuestsOpenStore"})},this.userIdsWithContentBeingReprovisionedStore=l.default.createValue([],{name:"userIdsWithContentBeingReprovisionedStore"}),this.isTeamGuestsEnabledStore=this.createComputedStore((()=>(0,H.F$)())),this.renderReprovisioningData=(e,t,s)=>t?(0,Ge.jsx)(ft.Z,{columns:[{key:"user",header:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"}),style:{width:"50%"}},{key:"count",header:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.userTable.pageCountColumn.header",defaultMessage:"Private pages"}),style:{width:"25%"}},{key:"action",header:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.userTable.actionLevelColumn.header",defaultMessage:"Action"}),style:{width:"25%"}}],rows:this.getSpaceRecoverRows(t.recentSpaceRecoverPages)}):!s&&(0,Ge.jsx)(Ot,{}),this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleCreateGroupClick=()=>gs(this.environment,this.props.store,this.stores.spacePermissionsSettingsStore),this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleFilterChange=e=>ms(e,this.stores.spacePermissionsSettingsStore),this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleMembersShowMoreClick=()=>ps(this.stores.spacePermissionsSettingsStore),this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleGuestsShowMoreClick=()=>fs(this.stores.spacePermissionsSettingsStore),this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleTeamGuestsShowMoreClick=()=>hs(this.stores.spacePermissionsSettingsStore),this.handleReprovisionToUserChange=async(e,t)=>{if(!(await D.confirmUserAction({message:(0,Ge.jsx)("span",{children:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmationMessage",defaultMessage:"Are you sure you want to transfer their private pages? This action cannot be undone."})}),acceptLabel:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmButton.label",defaultMessage:"Transfer private pages"})})))return;this.userIdsWithContentBeingReprovisionedStore.setState([...this.userIdsWithContentBeingReprovisionedStore.state,e]);const s=await O.transferSpaceUserContent(this.environment,{spaceId:this.props.store.id,fromUserId:e,toUserId:t});"failed"===s.type&&D.showError(s),await this.stores.getRecoverableSpaceUserContentRequestStore.refresh(),this.userIdsWithContentBeingReprovisionedStore.setState(this.userIdsWithContentBeingReprovisionedStore.state.filter((t=>t!==e)))}}UNSAFE_willMount(){var e;e=this.stores.spacePermissionsSettingsStore,re.Z.state.open&&"members"===re.Z.state.currentTab&&re.Z.state.defaultSubtab&&(e.setState({...e.state,currentTab:re.Z.state.defaultSubtab}),re.Z.setState({...re.Z.state,defaultSubtab:void 0})),async function(e,t,s){if(!t.canAdmin())return;const i=await O.getRecentlyRemovedUsers(e,{spaceId:t.id});if("failed"===i.type)throw D.showError(i),i;s.setState(i.data.recentlyRemovedMembers)}(this.environment,this.props.store,this.stores.recentlyRemovedMembersStore)}renderComponent(){var e;const{store:t,isMobile:s}=this.props;if(!se.Z.state.online)return(0,Ge.jsx)(Vt,{});const n=ye.subscriptionDataStoreInstance.state;if(!n)return(0,Ge.jsx)(Ot,{});const a=he.CM(n);if(!I.yW(a.map((e=>ne.U6.createChildStore(t,{table:M.KJ,id:e.userId}).isReady()))))return(0,Ge.jsx)(Ot,{});const o=a.filter(j.nB),r=a.filter(j.FN),l=Ht(this.environment),d=null===(e=te.default.state.currentSpaceStore)||void 0===e?void 0:e.getPermissionGroups().length,c=this.isTeamGuestsEnabledStore.state?r.length:r.filter((e=>!e.isTeamGuest&&e.isPageGuest)).length,{currentTab:u}=this.stores.spacePermissionsSettingsStore.state;if(s)return(0,Ge.jsxs)(i.Fragment,{children:[this.props.store.canEditMembership()&&(0,Ge.jsxs)(Ae.Z,{shouldShowBottomDivider:!0,children:[(0,Ge.jsx)(os,{store:this.props.store}),(0,Ge.jsx)("div",{style:Xt(this.environment,this.theme),children:(0,Ge.jsx)(rs,{store:this.props.store,isMobile:this.props.isMobile,spacePermissionsSettingsStore:this.stores.spacePermissionsSettingsStore})})]}),(0,Ge.jsx)(Ae.Z,{children:(0,Ge.jsx)(_s,{isMobile:this.props.isMobile,store:this.props.store,spacePermissionsSettingsStore:this.stores.spacePermissionsSettingsStore,recentlyRemovedMembersStore:this.stores.recentlyRemovedMembersStore,isTeamGuestsEnabledStore:this.isTeamGuestsEnabledStore,members:o})})]});const g={[oe.Q.Members]:(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.membersTab.title",defaultMessage:"Members"}),(0,Ge.jsx)("span",{children:" "}),(0,Ge.jsx)("span",{style:{color:this.theme.lightTextColor},children:o.length})]}),[oe.Q.Groups]:(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)(C.FormattedMessage,{id:"spaceBasicSettings.groupsTab.title",defaultMessage:"Groups"}),l&&(0,T.$K)(d)&&(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)("span",{children:" "}),(0,Ge.jsx)("span",{style:{color:this.theme.lightTextColor},children:d})]})]}),[oe.Q.Guests]:(0,Ge.jsxs)(Ge.Fragment,{children:[this.isTeamGuestsEnabledStore.state?(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.externalTab.title",defaultMessage:"External"}):(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.guestsTab.title",defaultMessage:"Guests"}),(0,Ge.jsx)("span",{children:" "}),(0,Ge.jsx)("span",{style:{color:this.theme.lightTextColor},children:c})]}),[oe.Q.Reprovisioning]:(0,Ge.jsx)(C.FormattedMessage,{id:"spaceBasicSettings.reprovisioningTab.title",defaultMessage:"Recently left"}),[oe.Q.Requests]:(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)(C.FormattedMessage,{id:"spaceBasicSettings.requestsTab.title",defaultMessage:"Requests"}),(0,Ge.jsx)("span",{children:" "}),(0,Ge.jsx)("span",{style:{color:this.theme.lightTextColor},children:(0,Ge.jsx)(ds,{store:this.props.store,accessRequestsStore:this.stores.accessRequestsStore})}),(0,Ge.jsx)(es,{unreadAccessRequests:this.props.unreadAccessRequests})]})},m=zt(r,this.props.store),p=m.map((e=>g[e]));return(0,Ge.jsxs)(dt.ZP,{children:[this.isTeamGuestsEnabledStore.state&&(0,Ge.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8,marginBottom:20},children:[(0,Ge.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:7},children:[(0,Ge.jsx)(Ve.Z,{style:{fontWeight:F.Z.fontWeight.medium,fontSize:17},children:(0,Ge.jsx)(C.FormattedMessage,{id:"spaceBasicSettings.people.title",defaultMessage:"People"})}),(0,Ge.jsx)(st.Z,{href:(0,J.UY)("guides.members"),analyticsFrom:"members_settings"})]}),(0,Ge.jsx)(Ve.Z,{isSecondaryColor:!0,style:{fontSize:15},children:(0,Ge.jsx)(C.FormattedMessage,{id:"spaceBasicSettings.people.subtitle",defaultMessage:"Manage members, external guests, groups and permissions."})})]}),(0,Ge.jsx)(pt.Z,{tabs:p,selectedIndex:m.indexOf(u),onChange:e=>function(e,t,s,i,n){const a=zt(t,i)[e];switch(a){case oe.Q.Members:A.qT(s,{tab:"members"});break;case oe.Q.Groups:A.qT(s,{tab:"groups"});break;case oe.Q.Guests:A.qT(s,{tab:"guests"});break;case oe.Q.Reprovisioning:A.qT(s,{tab:"reprovisioning"});break;case oe.Q.Requests:A.qT(s,{tab:"requests"});break;default:(0,T.t1)(a)}n.state.currentTab===oe.Q.Requests&&a!==oe.Q.Requests&&le.Z.reset();us(a,n)}(e,r,this.environment,this.props.store,this.stores.spacePermissionsSettingsStore),style:{paddingLeft:0,paddingRight:0,marginTop:-6,marginBottom:14},tabTitleStyle:{fontSize:16}}),this.renderTab(u,o,r)]})}renderTab(e,t,s){return e===oe.Q.Members?(0,Ge.jsx)(i.Fragment,{children:(0,Ge.jsx)(_s,{isMobile:this.props.isMobile,store:this.props.store,spacePermissionsSettingsStore:this.stores.spacePermissionsSettingsStore,recentlyRemovedMembersStore:this.stores.recentlyRemovedMembersStore,isTeamGuestsEnabledStore:this.isTeamGuestsEnabledStore,members:t})}):e===oe.Q.Guests?(0,Ge.jsx)(Is,{store:this.props.store,spacePermissionsSettingsStore:this.stores.spacePermissionsSettingsStore,recentlyRemovedMembersStore:this.stores.recentlyRemovedMembersStore,isPageGuestsOpenStore:this.stores.isPageGuestsOpenStore,isTeamGuestsOpenStore:this.stores.isTeamGuestsOpenStore,isTeamGuestsEnabledStore:this.isTeamGuestsEnabledStore,guests:s}):e===oe.Q.Groups?(0,Ge.jsx)(ys,{store:this.props.store,spacePermissionsSettingsStore:this.stores.spacePermissionsSettingsStore}):e===oe.Q.Reprovisioning?this.renderReprovisioning():e===oe.Q.Requests?(0,Ge.jsx)(ls,{store:this.props.store,accessRequestsStore:this.stores.accessRequestsStore}):void(0,T.t1)(e)}renderReprovisioning(){return(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)(Ve.Z,{isMultiline:!0,style:{width:"80%"},children:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.reprovisioningTab.workspaceOwner.caption",defaultMessage:"View users that were previously part of the workspace in the past 30 days. Only workspace owners can see this."})}),(0,Ge.jsx)(Ve.Z,{isMultiline:!0,style:{width:"80%"},children:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.reprovisioningTab.workspaceOwner.caption.disclaimer",defaultMessage:"Only users who had private pages will appear here."})}),(0,Ge.jsx)(we.Z,{size:24,isHidden:!0}),(0,Ge.jsx)(W.Z,{requestStore:this.stores.getRecoverableSpaceUserContentRequestStore,request:{spaceId:this.props.store.id},performRequest:async e=>{const t=await O.getRecoverableSpaceUserContent(this.environment,{spaceId:e.spaceId});if("failed"===t.type)throw D.showError(t),t;return t.data},render:this.renderReprovisioningData})]})}getSpaceRecoverRows(e){const t=[];for(const{userId:s,privatePagesCount:i}of e){if(i<1)continue;const e=ne.U6.createChildStore(this.props.store,{table:M.KJ,id:s});t.push({key:s,columns:[(0,Ge.jsx)(Nt,{userStore:e},"Member"),i,this.userIdsWithContentBeingReprovisionedStore.state.includes(s)?(0,Ge.jsx)(Ot,{}):(0,Ge.jsx)("div",{style:{marginLeft:-4},children:(0,Ge.jsx)(rt.Z,{mode:lt.z.Button,focused:!1,title:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.reprovision.toUser.title",defaultMessage:"Transfer private pages"}),parentStore:this.props.store,userIds:this.userIdsWithContentBeingReprovisionedStore.state,onChange:e=>{let[t]=e;this.handleReprovisionToUserChange(s,t)}})})]})}return t}}At.displayName="SpacePermissionsSettings";const Rt=(0,C.injectIntl)(At);function Bt(){const e=ye.subscriptionDataStoreInstance.state;return Boolean(e&&he.YK(e))}function Ot(){return(0,Ge.jsx)(_e.Z,{style:{margin:"calc(50% - 1em) auto"}})}function Vt(){return(0,Ge.jsx)(dt.ZP,{children:(0,Ge.jsx)(Ve.Z,{isSmall:!0,style:{textAlign:"center"},children:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.offlineMessage",defaultMessage:"Please go online to manage members."})})})}function Dt(){return(0,Ge.jsx)("div",{style:{marginTop:24,marginBottom:24},children:(0,Ge.jsx)(st.Z,{title:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.helpButton.caption",defaultMessage:"Learn about adding members to your workspace"}),href:(0,J.UY)("guides.members"),analyticsFrom:"members_settings"})})}function Et(e){const{up:t}=e,s={width:10,height:10,marginLeft:4};return t?(0,u.K)({...s,transform:"rotate(180deg)"}):(0,u.K)(s)}function Nt(e){let{userStore:t,restorationStatus:s}=e;return(0,Ge.jsx)(xe.Z,{actorStore:t,restorationStatus:s})}function qt(e){let{user:t}=e;return"none"!==t.role?(0,Ge.jsx)(_t.ZP,{member:t}):null}function Gt(e,t,s,i){return t&&t.length>0?(0,d.ZP)(t,e,(e=>{const t=ne.U6.createChildStore(s,{table:M.KJ,id:e.userId});return t.isDefined()?t.getSearchName(i):""})):e}function Lt(e){return Boolean(e.getKeyStore("invite_link_enabled").getValue())}function Ut(e){return e.canAdmin()&&Se.wP()}function Kt(e){return e.canEditMembership()&&(0,H.p1)()}function Wt(e){let{store:t}=e;return(0,o.VK)((()=>G.LV(t)),[t])?(0,Ge.jsx)(Ve.Z,{isSmall:!0,isMultiline:!0,style:{width:"80%"},children:(0,Ge.jsx)(C.FormattedMessage,{id:"spaceBasicSettings.membersTab.manageMembersWithLinkCaption",defaultMessage:"Manage members here."})}):(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)(Ve.Z,{isSmall:!0,isMultiline:!0,style:{width:"80%",marginBottom:6},children:(0,Ge.jsx)(C.FormattedMessage,{id:"spaceBasicSettings.membersTab.manageMembersWithoutLinkCaption",defaultMessage:"Manage members here, or <setupdomainlink>set up a domain</setupdomainlink>, so everyone with allowed email domains can join the workspace automatically.",values:{setupdomainlink:e=>(0,Ge.jsx)(it.Z,{onClick:()=>{re.Z.setState({...re.Z.state,currentTab:"settings",defaultSubtab:void 0})},children:e})}})}),(0,Ge.jsx)(Ve.Z,{isSmall:!0,isMultiline:!0,style:{width:"80%"},children:(0,Ge.jsx)(C.FormattedMessage,{id:"spaceBasicSettings.membersTab.payPerMemberCaption",defaultMessage:"You will be charged for each member added. Visit <billingguidelink>our guide</billingguidelink> for more information on how we bill.",values:{billingguidelink:e=>(0,Ge.jsx)(it.Z,{href:(0,J.UY)("guides.billingGuide"),children:e})}})})]})}function zt(e,t){return[oe.Q.Members,oe.Q.Groups,oe.Q.Guests,...Ut(t)?[oe.Q.Reprovisioning]:[],...Kt(t)?[oe.Q.Requests]:[]]}function Ht(e){return he.qF(e)&&Bt()}function $t(e){let{store:t}=e;const s=(0,a.O7)();return(0,o.VK)((()=>t.isDefined()),[t])?(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionSettings.spaceMembers.inviteLink.resetLink",defaultMessage:"You can <resetlink>reset the link</resetlink> for all space members to generate a new invite link.",values:{resetlink:e=>(0,Ge.jsx)(it.Z,{onClick:()=>{D.showDialog({message:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.inviteLinkRefreshModal.description",defaultMessage:"Are you sure you want to reset the invite link for all space members? Your old one will no longer be able to be used."}),showCancel:!0,keepFocus:!1,handleCancel:D.dismissDialog,items:[{label:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.inviteLinkRefreshModal.accept",defaultMessage:"Reset"}),color:"red",onAccept:async()=>{await O.refreshInviteLink(s,{spaceId:t.id}),ue.bi(s)}}]})},children:e})}}):null}function Qt(e){let{inviteLinkUrl:t,isMobile:s}=e;const i=(0,a.O7)(),{mobileNative:n}=i,o=(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.spaceMembers.inviteLink.copyButton",defaultMessage:"Copy link"}),r=()=>{V.RD({environment:i,stringValue:t,copiedMessage:V.tq.copiedLinkToClipboard}),Z.nl(i)},l=()=>{n&&n.share(t),Z.nl(i)};return s?(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)(Ce.Z,{type:"text",format:Ce.B.Default,value:t,disabled:!0}),n?(0,Ge.jsx)(Pe.Z,{onClick:l,style:{marginTop:10,width:"100%"},children:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.spaceMembers.inviteLink.shareButton",defaultMessage:"Share link"})}):(0,Ge.jsx)(Pe.Z,{onClick:r,style:{marginTop:10,width:"100%"},children:o})]}):(0,Ge.jsx)("div",{children:(0,Ge.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",marginTop:12},children:[(0,Ge.jsx)(Ce.Z,{type:"text",format:Ce.B.Default,value:t,disabled:!0,style:{borderTopRightRadius:0,borderBottomRightRadius:0,width:"calc(100% - 90px)",height:32}}),(0,Ge.jsx)(Ze.Z,{onClick:r,style:{borderTopLeftRadius:0,borderBottomLeftRadius:0},isLarge:!0,children:o})]})})}function Yt(e){let{group:t,user:s,userStore:i,store:n}=e;const o=(0,C.useIntl)(),r=(0,a.O7)();return(0,Ge.jsx)(je.ZP,{popupType:je.Z4.Popup,renderOrigin:e=>(0,Ge.jsx)(ke.Z,{...e,icon:g.o,iconStyle:{height:14,width:14},ariaLabel:o.formatMessage({id:"spacePermissionsSettings.externalTab.userThreeDotMenu.ariaLabel",defaultMessage:"Convert to member or remove from workspace"})}),render:e=>{const a=[{key:"convertToMember",render:e=>(0,Ge.jsx)(Me.Z,{...e,icon:(0,S._)({height:17,width:17}),title:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.title",defaultMessage:"Convert to member"}),shouldWrapCaption:!0,caption:"team_guests"===t&&(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.caption",defaultMessage:"Workspace members are not restricted to specific teamspaces"})}),action:()=>function(e,t,s){const{userStore:i,parent:n}=e,a=Bt()?"read_and_write":"editor";D.showDialog({message:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.message",defaultMessage:"Are you sure you want to convert this user into a workspace member?"}),description:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.description",defaultMessage:"This is a billable event."}),showCancel:!0,keepFocus:!1,handleCancel:()=>{D.dismissDialog(),n.close()},items:[{label:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.confirm",defaultMessage:"Convert to workspace member"}),color:"blue",onAccept:async()=>{n.close(),await L.s({environment:s,guestUserStore:i,role:a,store:t,isConvertToAdmin:!Bt(),origin:"page_or_teamspace_guest_three_dot_menu"})}}]})}({user:s,userStore:i,parent:e},n,r)},{key:"removeFromWorkspace",render:e=>(0,Ge.jsx)(Me.Z,{...e,icon:(0,p.V)({height:17,width:17,color:_.ZP.red}),title:(0,Ge.jsx)("span",{style:{color:_.ZP.red},children:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.title",defaultMessage:"Remove from workspace"})})}),action:()=>function(e,t,s){const{userStore:i,parent:n}=e;D.showDialog({message:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.message",defaultMessage:"Are you sure you want to remove this user from the workspace?"}),description:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.description",defaultMessage:"This action will completely remove the user from the workspace, including any teamspaces and pages they have access to."}),showCancel:!0,keepFocus:!1,handleCancel:()=>{D.dismissDialog(),n.close()},items:[{label:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.confirm",defaultMessage:"Remove from workspace"}),color:"red",onAccept:async()=>{n.close(),await L.w({environment:s,guestUserStore:i,store:t})}}]})}({user:s,userStore:i,parent:e},n,r)}],o=[{key:"team section",render:e=>(0,Ge.jsx)(Ae.Z,{...e}),items:a}];return(0,Ge.jsx)(Ie.Z,{menuType:Q.og.Popup,children:(0,Ge.jsx)(Te.Z,{type:Te.i.Vertical,sections:o,initialFocus:void 0,style:{minWidth:265}})})}})}function Jt(e){return{width:14,height:14,marginRight:6,flexGrow:0,flexShrink:0,fill:e.mediumIconColor}}function Xt(e,t){const{WindowSizeStore:s}=e;return{display:"flex",paddingTop:14,paddingBottom:14,paddingLeft:14,paddingRight:s.getSafePaddingRightCSS(14),background:t.cardContentBackground}}function es(e){let{unreadAccessRequests:t}=e;const s=(0,r.Fg)();return t&&t>0?(0,Ge.jsx)(mt.z,{color:s.redBadgeBackground,style:{marginLeft:6}}):null}function ts(){const e=(0,C.defineMessages)({updatingPermissions:{id:"spacePermissionsSettings.updatePermissionsMessage",defaultMessage:"Updating…"}});N.j({message:e.updatingPermissions})}function ss(){N.x()}async function is(e,t,s,i,n){const a=n.currentUser.id;if(e.userId!==a||"none"!==t)ts(),"none"===t?(await O.removeUsersFromSpace(n,{userIds:[e.userId],spaceId:i.id,removePagePermissions:!0,revokeUserTokens:!1}),await ue.bi(n)):U.createAndCommit({userAction:"SpacePermissionsSettings.handleMemberPermissionRoleChange",environment:n,perform:s=>q.tQ({environment:n,spaceStore:i,permissionItems:[{type:"user_permission",role:t,user_id:e.userId}],transaction:s,from:"space_permission_setting_table"})}),ss();else{await G.bf({environment:n,spaceId:i.id,userSettingsStore:s})&&(B.Jk(n,{invite_origin:"workspace_leave",domainType:(0,$.JF)(),new_workspace_member_count:-1,new_workspace_member_ids:[a]}),re.Z.setState({...re.Z.state,open:!1}))}}function ns(e){let{buttonStyle:t,store:s}=e;const i=(0,o.VK)((()=>s.canEditMembership()),[s]),n=(0,o.VK)((()=>!i&&!s.getDisableMembershipRequests()&&(0,H.p1)()),[i,s]),a=(0,o.VK)((()=>Bt()),[]);return n?(0,Ge.jsx)(ot.Z,{store:s,analyticsFrom:"space_settings_add_members",origin:(0,Ge.jsx)(Ze.Z,{isLarge:!0,children:(0,Ge.jsx)(C.FormattedMessage,{id:"inviteUserButton.requestMemberLabel",defaultMessage:"Add members"})})}):(0,Ge.jsxs)("div",{style:{display:"flex"},children:[(0,Ge.jsx)(K.r1,{disabled:!i,store:s,onInviteClick:ts,onInviteComplete:ss,isSubscribed:a,membersOnly:!1,upgradeButtonName:"space_permission_settings",shouldGrow:!1,buttonStyle:t}),(0,Ge.jsx)(K._k,{inviteOrigin:"space_setting_slack_imports",canEditPermission:i,onInviteClick:ts,onInviteComplete:ss})]})}function as(e){let{member:t,store:s}=e;const i=(0,a.O7)(),n=(0,C.useIntl)(),r=i.currentUser.id,{currentUserSettingsStore:l,currentSpaceStore:d}=(0,o.VK)((()=>{const{currentUserSettingsStore:e,currentSpaceStore:t}=te.default.state;return{currentUserSettingsStore:e,currentSpaceStore:t}}),[]),c=(0,o.VK)((()=>function(e,t){const s=e.formatMessage({id:"spacePermissionSettings.memberRoleSelect.permissionitem.roleUpgradeDisabled",defaultMessage:"Cannot upgrade to a higher role than member"}),i=(0,Y.U7)();return I.oA(b.an.map((e=>{if(i||"membership_admin"!==e)return{role:e,disabledInfo:!t.canAdmin()&&b.Bc(e)?{isDisabled:!0,disabledMessage:s}:void 0}})))}(n,s)),[n,s]),u=(0,o.VK)((()=>!(s.canAdmin()||s.canEditMembership()&&(b.RN(t.role)||t.userId===r))),[r,t,s]);return l?(0,Ge.jsx)(nt.ZP,{role:t.role,table:x.bx,type:"user_permission",disabled:u,isUserPermission:t.userId===r,upgradeButtonName:"space_permission_item",availableRoleItems:c,onChange:async e=>{await is(t,e,l,s,i)},buttonStyle:Pt,onRemoveMemberClick:async()=>{let e,n;if(pe.U()&&(n=y.Il(),e=await(0,be.f)({environment:i,contractionSurveyId:n}),!e))return null;await(async()=>await(0,ge.q)(i,t.userId,null==d?void 0:d.id))()&&(await(async e=>{await is(t,"none",l,s,i),B.Sw(i,{member_user_id:t.userId,member_role:t.role,contraction_survey_id:e,is_space:!0,domainType:(0,$.JF)(),new_workspace_member_count:-1})})(n),e&&ce.wA(i))}}):null}function os(e){let{store:t}=e;const s=(0,r.Fg)(),n=(0,a.O7)(),l=(0,o.VK)((()=>Xt(n,s)),[n,s]);return(0,Ge.jsxs)(i.Fragment,{children:[(0,Ge.jsx)("div",{style:l,children:(0,Ge.jsx)(ns,{store:t,buttonStyle:{flex:1}})}),(0,Ge.jsx)("div",{style:{borderBottom:`1px solid ${s.regularDividerColor}`}})]})}function rs(e){let{store:t,isMobile:s,spacePermissionsSettingsStore:i}=e;const n=(0,a.O7)(),r=(0,o.VK)((()=>function(e,t){return e.canEditMembership()&&he.qF(t)}(t,n)),[n,t]),l=(0,o.VK)((()=>function(e,t){if(!e.canEditMembership())return;const s=ye.subscriptionDataStoreInstance.state,i=e.id,n=s&&("subscribed_admin"===s.type||"unsubscribed_admin"===s.type||"subscribed_membership_admin"===s.type)&&s.inviteLinkCode;return n?(0,X.cJ)(t,i,n):void 0}(t,n)),[n,t]),d=(0,o.VK)((()=>Lt(t)),[t]);return r&&l?(0,Ge.jsxs)("div",{children:[(0,Ge.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",cursor:"pointer"},children:[(0,Ge.jsxs)("div",{style:{marginRight:8,flexGrow:1},children:[(0,Ge.jsx)(ct.Z,{children:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.spaceMembers.inviteLink.title",defaultMessage:"Invite link"})}),(0,Ge.jsxs)(Ve.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"85%"},children:[(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionSettings.spaceMembers.inviteLink.caption",defaultMessage:"Share this secret link to invite people to this workspace. Only users who can invite members can see this."})," ",!s&&(0,Ge.jsx)($t,{store:t})]})]}),(0,Ge.jsx)("div",{style:{marginTop:5},children:(0,Ge.jsx)(Be.Z,{on:d,onClick:()=>function(e,t){const s=!Lt(e);R.eo(t,{enabled:s}),U.createAndCommit({userAction:"SpacePermissionsSettings.handleInviteLinkClick",environment:t,perform:t=>{G.ys({transaction:t,spaceStore:e,inviteLinkEnabled:Boolean(s)})}})}(t,n)})})]}),i&&d&&l&&(0,Ge.jsx)("div",{style:s?{marginTop:5}:void 0,children:(0,Ge.jsx)(Qt,{isMobile:s,inviteLinkUrl:l})}),(0,Ge.jsx)(we.Z,{size:40})]}):null}function ls(e){let{store:t,accessRequestsStore:s}=e;return(0,Ge.jsx)(at.ZP,{spaceStore:t,accessRequestsStore:s})}function ds(e){let{store:t,accessRequestsStore:s}=e;const i=(0,a.O7)();return(0,Ge.jsx)(W.Z,{throttle:1e3,request:{parentTable:"space",parentId:t.id,size:100,status:"pending"},requestStore:s,performRequest:async e=>{const s=await O.getAccessRequests(i,e);if("failed"===s.type)throw s.error;const n=s.data.accessRequestIds;return P.Vy(i,t,n)},render:(e,t)=>e||!t?(0,Ge.jsx)("span",{}):t?(0,Ge.jsx)("span",{children:t.filter((e=>"pending"===e.accessRequest.status)).length}):void 0})}function cs(e,t,s,i,n){const a=n.state.sorts[e];if(!a)return t;switch(a.by){case"role":return t.sort(((e,t)=>(b.xm[t.role]-b.xm[e.role])*(a.asc?-1:1)));case"name":return t.map((e=>({user:e,store:ne.U6.createChildStore(s,{table:M.KJ,id:e.userId})}))).sort(((e,t)=>{const s=e.store.getValue(),n=t.store.getValue(),o=(0,k.Nz)(i,s),r=(0,k.Nz)(i,n);return o.localeCompare(r)*(a.asc?1:-1)})).map((e=>e.user))}}function us(e,t){t.setState({...t.state,currentTab:e})}function gs(e,t,s){U.createAndCommit({userAction:"SpacePermissionsSettings.handleCreateGroupClick",environment:e,perform:i=>{const n=G.mo({environment:e,spaceStore:t,transaction:i});n&&s.setState({...s.state,editingNameGroupId:n.id,groupNameInputValue:""})}}),A.O8(e)}function ms(e,t){t.setState({...t.state,groupsFilter:e.target.value})}function ps(e){e.setState({...e.state,limitMembers:!1})}function fs(e){e.setState({...e.state,limitGuests:!1})}function hs(e){e.setState({...e.state,limitTeamGuests:!1})}function Ss(e,t,s){const i=s.state.sorts[e];let n;n=!(!i||i.by!==t)&&i.asc,s.update((s=>({...s,sorts:{...s.sorts,[e]:{by:t,asc:!n}}})))}function ys(e){let{store:t,spacePermissionsSettingsStore:s}=e;const n=(0,C.useIntl)(),l=(0,r.Fg)(),d=(0,a.O7)(),c=(0,i.useCallback)((e=>ms(e,s)),[s]),u=(0,i.useCallback)((()=>gs(d,t,s)),[d,t,s]),g=(0,o.VK)((()=>s.state.groupsFilter),[s]),p=(0,o.VK)((()=>Ht(d)),[d]),f=(0,o.VK)((()=>t.canEditMembership()),[t]),S=(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.groupCreationInsufficientPermissions",defaultMessage:"Only membership admins and workspace owners can add a permission group."}),y=(0,o.VK)((()=>t.isDefined()),[t]),b=(0,o.VK)((()=>t.getPermissionGroups()),[t]),x=(0,o.VK)((()=>(0,ee.bq)()),[]),v=(0,o.VK)((()=>function(e,t){return Ht(t)&&e.canEditMembership()}(t,d)),[d,t]);return y?(0,Ge.jsxs)("div",{children:[p?(0,Ge.jsx)(Ve.Z,{isMultiline:!0,style:{width:"80%"},children:x?(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.captionWithTeamsV2",defaultMessage:"Set up groups to streamline page permissions from the share menu and manage teamspace members in bulk."}):(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.caption",defaultMessage:"Set up groups to conveniently control page permissions from the share menu."})}):(0,Ge.jsx)(me.Z,{subscriptionTier:"plus",from:"permission_groups",icon:m.x,title:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.upgradeTitle",defaultMessage:"Upgrade to create groups"}),caption:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.upgradeCaption.plus",defaultMessage:"Upgrade to the Plus Plan to set up groups and control permissions from the share menu."}),learnMoreRoute:"guides.groups"}),(0,Ge.jsx)(we.Z,{size:24,isHidden:!0}),(0,Ge.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[p&&(0,Ge.jsx)(Oe.Z,{renderTooltip:()=>!f&&S,render:e=>(0,Ge.jsx)(Ze.Z,{isLarge:!0,onClick:u,disabled:!f,...f?void 0:e,children:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.createGroupButton.label",defaultMessage:"Create a group"})})}),b.length>0&&(0,Ge.jsx)(Ce.Z,{placeholder:n.formatMessage({id:"spacePermissionsSettings.groupsTab.filterGroupNamesInput.placeholder",defaultMessage:"Filter by group name…"}),left:(0,h.R)(Jt(l)),showClearButton:!0,format:Ce.B.Small,value:g,style:{...Tt,marginRight:0},onChange:c,onClick:()=>{A.RP(d,{current_tab:oe.Q.Groups})}})]}),b.length>0&&(0,Ge.jsx)(gt.Z,{spaceStore:t,permissionsSettingsStore:s,groups:b,canEdit:v})]}):null}function bs(e){let{groups:t,store:s,spacePermissionsSettingsStore:i}=e;return(0,Ge.jsx)(Le,{spaceStore:s,groups:t,onGroupClick:()=>{us(oe.Q.Groups,i)}})}function xs(e){let{group:t,user:s,userStore:i,store:n,isTeamGuestsEnabledStore:a}=e;const r=(0,o.VK)((()=>a.state),[a]),l=(0,o.VK)((()=>Bt()),[]);return"none"===s.role?r&&"team_guests"===t?(0,Ge.jsx)(Ct,{teamGuest:s}):(0,Ge.jsx)(et,{store:n,guest:s,guestStore:i,isSubscribed:l,hideActionButtons:r}):(0,Ge.jsx)(as,{store:n,member:s})}function vs(e){let{members:t,store:s,isTeamGuestsEnabledStore:n}=e;const a=(0,r.yK)((e=>({container:{display:"flex",alignItems:"center",padding:10,paddingRight:2,gap:5,justifyContent:"space-between",width:"100%",borderBottom:`1px solid ${e.lightDividerColor}`,background:e.cardContentBackground},memberContainer:{flexShrink:1,minWidth:50},permissionContainer:{textAlign:"center",marginLeft:"auto",flexShrink:0}})),[]);return(0,Ge.jsx)(i.Fragment,{children:t.map((e=>{const t=ne.U6.createChildStore(s,{table:M.KJ,id:e.userId});return(0,Ge.jsxs)("div",{style:a.container,children:[(0,Ge.jsx)("div",{style:a.memberContainer,children:(0,Ge.jsx)(Nt,{userStore:t})}),(0,Ge.jsx)("div",{style:a.permissionContainer,children:(0,Ge.jsx)(xs,{store:s,isTeamGuestsEnabledStore:n,group:"members",user:e,userStore:t})})]},e.userId)}))})}function Ms(e){let{group:t,spaceMembers:s,store:n,spacePermissionsSettingsStore:r,recentlyRemovedMembersStore:l,isTeamGuestsEnabledStore:d}=e;const c=(0,a.O7)(),u=(0,o.VK)((()=>r.state.sorts[t]),[t,r]),g=(0,o.VK)((()=>n.getPermissionGroups()),[n]).reduce(((e,t)=>{const s=t.user_ids||[];for(const i of s)e[i]=e[i]?e[i].concat(t):[t];return e}),{}),m={key:"user",header:(0,Ge.jsxs)(ve.Z,{disabled:!1,ignoreLocalHoverState:!0,onClick:()=>{Ss(t,"name",r)},style:{display:"flex",alignItems:"center"},children:[(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"}),u&&"name"===u.by&&(0,Ge.jsx)(Et,{up:u.asc})]}),style:{width:"45%"}},p={key:"groups",header:(0,Ge.jsx)(ve.Z,{disabled:!0,ignoreLocalHoverState:!0,style:{display:"flex",alignItems:"center",paddingLeft:8},children:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.userTable.groupsColumn.header",defaultMessage:"Groups"})}),style:{width:"15%"}},f={key:"teams",header:(0,Ge.jsx)("div",{style:{display:"flex",alignItems:"center",paddingLeft:8},children:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.userTable.teamsColumn.header",defaultMessage:"Teamspaces"})}),style:{width:"20%",textAlign:"center"}},h={key:"access_level",header:(0,Ge.jsxs)(ve.Z,{disabled:!1,ignoreLocalHoverState:!0,onClick:()=>{Ss(t,"role",r)},style:{display:"flex",alignItems:"center",paddingLeft:8},children:[(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.userTable.accessLevelColumn.header",defaultMessage:"Access level"}),u&&"role"===u.by&&(0,Ge.jsx)(Et,{up:u.asc})]}),style:{width:"20%",textAlign:"center"}},S={key:"pages",header:(0,Ge.jsx)("div",{style:{display:"flex",alignItems:"center",paddingLeft:8},children:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.userTable.pagesColumn.header",defaultMessage:"Pages"})}),style:{width:"20%",textAlign:"center"}},y={key:"three_dot",header:(0,Ge.jsx)(ve.Z,{disabled:!0,ignoreLocalHoverState:!0})},b=(0,o.VK)((()=>Ht(c)&&"team_guests"!==t&&"guests"!==t),[c,t]),x=(0,o.VK)((()=>("team_guests"===t||"guests"===t)&&d.state&&n.canEditMembership()),[t,d,n]),v=(0,o.VK)((()=>(0,ee.bq)()),[]);let j="members"===t&&v?[m,f,h]:x?[m,S,y]:[m,S];b&&(j=[...j.slice(0,1),p,...j.slice(1)]);const w=(0,o.VK)((()=>l.state),[l]),k=(0,o.VK)((()=>s.map((e=>({member:e,store:ne.U6.createChildStore(n,{table:M.KJ,id:e.userId})}))).filter((e=>void 0!==e.store.getValue()))),[s,n]);return(0,Ge.jsx)(ft.Z,{columns:j,rows:k.map((e=>{var s;const{member:a,store:o}=e,l=g[a.userId]?g[a.userId]:[],c=null===(s=w.find((e=>e.userId===a.userId)))||void 0===s?void 0:s.restorationStatus,u=[(0,Ge.jsx)(i.Fragment,{children:(0,Ge.jsx)(Nt,{userStore:o,restorationStatus:c})},"member")];return b&&u.push((0,Ge.jsx)(i.Fragment,{children:(0,Ge.jsx)(bs,{store:n,spacePermissionsSettingsStore:r,groups:l})},"groups")),"members"===t&&v&&u.push((0,Ge.jsx)(i.Fragment,{children:(0,Ge.jsx)(qt,{user:a})},"teams")),u.push((0,Ge.jsx)(i.Fragment,{children:(0,Ge.jsx)(xs,{store:n,isTeamGuestsEnabledStore:d,group:t,user:a,userStore:o})},"user-permission")),x&&u.push((0,Ge.jsx)(i.Fragment,{children:(0,Ge.jsx)(Yt,{group:t,user:a,userStore:o,store:n})},"three-dot")),{key:a.userId,columns:u}}))})}function js(e){let{members:t,store:s,spacePermissionsSettingsStore:n,recentlyRemovedMembersStore:l,isTeamGuestsEnabledStore:d}=e;const c=(0,C.useIntl)(),u=(0,r.Fg)(),g=(0,a.O7)(),m=(0,i.useCallback)((()=>ps(n)),[n]),{membersFilter:p,limitMembers:f}=(0,o.VK)((()=>{const{membersFilter:e,limitMembers:t}=n.state;return{membersFilter:e,limitMembers:t}}),[n]),S=(0,o.VK)((()=>Gt(t,p,s,c)),[t,p,s,c]),y=(0,o.VK)((()=>cs("members",S,s,c,n)),[S,s,c,n]),b=f?y.slice(0,Zt):y;return(0,Ge.jsxs)(i.Fragment,{children:[(0,Ge.jsx)("div",{style:{marginRight:8,flexGrow:1},children:(0,Ge.jsx)(ct.Z,{children:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.spaceMembers.members.title",defaultMessage:"Members"})})}),(0,Ge.jsx)(Wt,{store:s}),(0,Ge.jsx)(we.Z,{size:16,isHidden:!0}),(0,Ge.jsxs)("div",{children:[(0,Ge.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[(0,Ge.jsx)(ns,{store:s}),(0,Ge.jsx)(Ce.Z,{placeholder:c.formatMessage({id:"spacePermissionsSettings.membersTab.filterMembersInput.placeholder",defaultMessage:"Filter by email or name…"}),left:(0,h.R)(Jt(u)),showClearButton:!0,format:Ce.B.Small,value:p,style:Tt,onChange:e=>{n.setState({...n.state,membersFilter:e.target.value,limitMembers:!0})},onClick:()=>{A.RP(g,{current_tab:oe.Q.Members})}})]}),(0,Ge.jsx)(Ms,{store:s,spacePermissionsSettingsStore:n,recentlyRemovedMembersStore:l,isTeamGuestsEnabledStore:d,group:"members",spaceMembers:b}),y.length>Zt&&f&&(0,Ge.jsx)(Re.Z,{style:Ft,onClick:m,children:(0,Ge.jsx)(C.FormattedMessage,{defaultMessage:"Show {moreMembersCount} more",id:"spacePermissionsSettings.membersTab.showMore.message",values:{moreMembersCount:y.length-Zt}})})]})]})}function ws(e){let{guests:t,store:s,spacePermissionsSettingsStore:n,recentlyRemovedMembersStore:a,isTeamGuestsEnabledStore:l}=e;const d=(0,C.useIntl)(),c=(0,r.Fg)(),u=(0,i.useCallback)((()=>hs(n)),[n]),{teamGuestsFilter:g,limitTeamGuests:m}=(0,o.VK)((()=>{const{teamGuestsFilter:e,limitTeamGuests:t}=n.state;return{teamGuestsFilter:e,limitTeamGuests:t}}),[n]),p=t.filter((e=>e.isTeamGuest)),f=(0,o.VK)((()=>Gt(p,g,s,d)),[p,g,s,d]),S=(0,o.VK)((()=>cs("team_guests",f,s,d,n)),[f,s,d,n]),y=m?S.slice(0,5):S;return(0,Ge.jsx)("div",{style:{marginBottom:5},children:(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:(0,Ge.jsx)(Ce.Z,{placeholder:d.formatMessage({id:"spacePermissionsSettings.membersTab.filterTeamGuestsInput.placeholder",defaultMessage:"Filter by email or name…"}),left:(0,h.R)(Jt(c)),showClearButton:!0,format:Ce.B.Small,value:g,style:Tt,onChange:e=>{n.setState({...n.state,teamGuestsFilter:e.target.value,limitTeamGuests:!0})}})}),(0,Ge.jsx)(Ms,{store:s,spacePermissionsSettingsStore:n,recentlyRemovedMembersStore:a,isTeamGuestsEnabledStore:l,group:"team_guests",spaceMembers:y}),S.length>5&&m&&(0,Ge.jsx)(Re.Z,{style:Ft,onClick:u,children:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.membersTab.showMoreGuestsButton.label",defaultMessage:"{numberOfHiddenGuests, plural, one {Show {numberOfHiddenGuests} more} other {Show {numberOfHiddenGuests} more}}",values:{numberOfHiddenGuests:S.length-5}})})]})})}function ks(e){let{guests:t,store:s,spacePermissionsSettingsStore:n,recentlyRemovedMembersStore:l,isTeamGuestsEnabledStore:d}=e;const c=(0,C.useIntl)(),u=(0,r.Fg)(),g=(0,a.O7)(),m=(0,i.useCallback)((()=>fs(n)),[n]),{guestsFilter:p,limitGuests:f}=(0,o.VK)((()=>{const{guestsFilter:e,limitGuests:t}=n.state;return{guestsFilter:e,limitGuests:t}}),[n]),S=t.filter((e=>!e.isTeamGuest&&e.isPageGuest)),y=(0,o.VK)((()=>Gt(S,p,s,c)),[S,p,s,c]),b=(0,o.VK)((()=>cs("guests",y,s,c,n)),[y,s,c,n]),x=(0,o.VK)((()=>d.state?5:Zt),[d]),v=f?b.slice(0,x):b,M=(0,o.VK)((()=>te.default.state.currentSpaceStore),[]),j=(0,o.VK)((()=>ye.subscriptionDataStoreInstance.state),[]),w=(0,o.VK)((()=>Boolean(M&&j&&"subscribed_admin"===j.type&&ie.default.checkGate({gateName:"enable_guest_export"}))),[M,j]);return(0,Ge.jsx)("div",{children:(0,Ge.jsxs)("div",{children:[(0,Ge.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[(0,Ge.jsx)(Ce.Z,{placeholder:c.formatMessage({id:"spacePermissionsSettings.membersTab.filterGuestsInput.placeholder",defaultMessage:"Filter by email or name…"}),left:(0,h.R)(Jt(u)),showClearButton:!0,format:Ce.B.Small,value:p,style:Tt,onChange:e=>{n.setState({...n.state,guestsFilter:e.target.value,limitGuests:!0})},onClick:()=>{A.RP(g,{current_tab:oe.Q.Guests})}}),w&&(0,Ge.jsx)(Pe.Z,{isLarge:!1,disabled:!1,isBlue:!0,onClick:()=>function(e,t,s){const{currentSpaceStore:i}=te.default.state,n=ye.subscriptionDataStoreInstance.state;i&&n&&"subscribed_admin"===n.type&&E.Mj(s,{intl:t,spaceStore:i,guests:e})}(b,c,g),disabledFeedback:!0,children:(0,Ge.jsx)(C.FormattedMessage,{id:"exportGuestsButton.label",defaultMessage:"Export guests as CSV"})})]}),(0,Ge.jsx)(Ms,{store:s,spacePermissionsSettingsStore:n,recentlyRemovedMembersStore:l,isTeamGuestsEnabledStore:d,group:"guests",spaceMembers:v}),b.length>x&&f&&(0,Ge.jsx)(Re.Z,{style:Ft,onClick:m,children:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.membersTab.showMoreGuestsButton.label",defaultMessage:"{numberOfHiddenGuests, plural, one {Show {numberOfHiddenGuests} more} other {Show {numberOfHiddenGuests} more}}",values:{numberOfHiddenGuests:b.length-x}})})]})})}function Cs(e){let{guests:t,store:s,spacePermissionsSettingsStore:i,recentlyRemovedMembersStore:n,isPageGuestsOpenStore:a,isTeamGuestsOpenStore:r,isTeamGuestsEnabledStore:l}=e;const d=(0,o.VK)((()=>r.state),[r]),c=(0,o.VK)((()=>a.state),[a]),u=(0,o.VK)((()=>!Boolean(s.getSettingsStore().getKeyStore("disable_team_guests").getValue())),[s]);return(0,Ge.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[u&&(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsxs)("div",{style:{display:"flex"},children:[(0,Ge.jsx)(It.Z,{open:d,onClick:()=>r.setState(!r.state),isSidebar:!1,fill:!0,style:{marginLeft:-27}}),(0,Ge.jsxs)("div",{style:{marginLeft:3},children:[(0,Ge.jsxs)("div",{style:{display:"flex",alignItems:"center",height:24},children:[(0,Ge.jsx)(Ve.Z,{style:{fontSize:15},children:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionSettings.teamGuests.title",defaultMessage:"Teamspace guests"})}),(0,Ge.jsx)("span",{children:" "}),(0,Ge.jsx)(Ve.Z,{isSecondaryColor:!0,style:{fontSize:15},children:t.filter((e=>e.isTeamGuest)).length})]}),(0,Ge.jsx)(Ve.Z,{isSecondaryColor:!0,style:{fontSize:15},children:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionSettings.teamGuests.subtitle",defaultMessage:"Teamspace guests are billed as members and can access all pages in teamspaces they've been invited to."})})]})]}),d&&(0,Ge.jsx)(ws,{store:s,spacePermissionsSettingsStore:i,recentlyRemovedMembersStore:n,isTeamGuestsEnabledStore:l,guests:t})]}),(0,Ge.jsxs)("div",{style:{display:"flex"},children:[(0,Ge.jsx)(It.Z,{open:c,onClick:()=>a.setState(!c),isSidebar:!1,fill:!0,style:{marginLeft:-27}}),(0,Ge.jsxs)("div",{style:{marginLeft:3},children:[(0,Ge.jsxs)("div",{style:{display:"flex",alignItems:"center",height:24},children:[(0,Ge.jsx)(Ve.Z,{style:{fontSize:15},children:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionSettings.pageGuests.title",defaultMessage:"Page guests"})}),(0,Ge.jsx)("span",{children:" "}),(0,Ge.jsx)(Ve.Z,{isSecondaryColor:!0,style:{fontSize:15},children:t.filter((e=>e.isPageGuest&&!e.isTeamGuest)).length})]}),(0,Ge.jsx)(Ve.Z,{isSecondaryColor:!0,style:{fontSize:15},children:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionSettings.pageGuests.subtitle",defaultMessage:"Page guests are free but can only access pages they've been invited to."})})]})]}),c&&(0,Ge.jsx)(ks,{store:s,spacePermissionsSettingsStore:i,recentlyRemovedMembersStore:n,isTeamGuestsEnabledStore:l,guests:t})]})}function _s(e){let{members:t,isMobile:s,store:i,spacePermissionsSettingsStore:n,recentlyRemovedMembersStore:a,isTeamGuestsEnabledStore:o}=e;return s?(0,Ge.jsx)(vs,{store:i,isTeamGuestsEnabledStore:o,members:t}):(0,Ge.jsxs)("div",{children:[(0,Ge.jsx)(Dt,{}),(0,Ge.jsx)(rs,{store:i,isMobile:s,spacePermissionsSettingsStore:n}),(0,Ge.jsx)(js,{store:i,spacePermissionsSettingsStore:n,recentlyRemovedMembersStore:a,isTeamGuestsEnabledStore:o,members:t})]})}function Is(e){let{guests:t,store:s,spacePermissionsSettingsStore:i,recentlyRemovedMembersStore:n,isPageGuestsOpenStore:r,isTeamGuestsOpenStore:l,isTeamGuestsEnabledStore:d}=e;const u=(0,a.O7)(),g=(0,o.VK)((()=>s.canAdmin()),[s]),m=u.currentUser.id,p=s.id,h=m&&p?(0,v.Ni)({spaceId:p,userId:m}):void 0,S=(0,fe.oo)({name:"internal_guests",spaceId:p,spaceUserId:h,amount:0}),y=(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.deeplinkCard.title",defaultMessage:"Change who can invite guests in the <bold>Security</bold> tab",values:{bold:e=>(0,Ge.jsx)("span",{style:{fontWeight:F.Z.fontWeight.semibold},children:e})}}),b=S&&(0,w.V5)(S,{available:()=>g?(0,Ge.jsx)(ut.Z,{icon:f.v,title:y,deeplinkTab:{currentTab:"security",defaultSubtab:void 0}}):null,upsell:e=>{let{limit:t,upsell:s}=e;return"product"===s.type||"contact_sales"===s.type?(0,Ge.jsx)("div",{style:{paddingTop:16,paddingBottom:16},children:(0,Ge.jsx)(z.r,{children:(0,Ge.jsx)(Fe.j,{iconGroup:c.G,display:"inline",tint:"yellow",label:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.guestsTab.limitBanner.title",defaultMessage:"Your workspace is over the {limit}-guest limit",values:{limit:t.total}}),description:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.guestsTab.limitBanner.description",defaultMessage:"Find teammates who are currently guests by filtering to your workspace's email domains and upgrade them to members to continue collaborating. To manage guest seats, <saleslink>reach out to sales</saleslink>.",values:{saleslink:e=>(0,Ge.jsx)(it.Z,{onClick:()=>(0,de.n)("manage_guests"),children:e})}})})})}):"contact_account_manager"===s.type?(0,Ge.jsx)("div",{style:{paddingTop:16,paddingBottom:16},children:(0,Ge.jsx)(z.r,{children:(0,Ge.jsx)(Fe.j,{iconGroup:c.G,display:"inline",tint:"yellow",label:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.guestsTab.limitBanner.title",defaultMessage:"Your workspace is over the {limit}-guest limit",values:{limit:t.total}}),description:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.guestsTab.limitBanner.description.sales_assisted",defaultMessage:"Find teammates who are currently guests by filtering to your workspace's email domains and upgrade them to members to continue collaborating. To get more guest seats, reach out to your account manager."})})})}):(0,T.t1)(s)},blocked:()=>null}),x=(0,o.VK)((()=>d.state),[d]);return 0===t.length?(0,Ge.jsx)(Ge.Fragment,{children:(0,Ge.jsx)(ut.Z,{icon:f.v,calloutTitle:(0,Ge.jsx)("span",{style:{fontWeight:F.Z.fontWeight.semibold},children:(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.deeplinkCard.noGuests.title",defaultMessage:"Your workspace has no guests"})}),title:g?(0,Ge.jsx)(C.FormattedMessage,{id:"spacePermissionsSettings.deeplinkCard.title",defaultMessage:"Change who can invite guests in the <bold>Security</bold> tab",values:{bold:e=>(0,Ge.jsx)("span",{style:{fontWeight:F.Z.fontWeight.semibold},children:e})}}):void 0,deeplinkTab:g?{currentTab:"security",defaultSubtab:void 0}:void 0})}):(0,Ge.jsxs)(Ge.Fragment,{children:[b,x?(0,Ge.jsx)(Cs,{store:s,spacePermissionsSettingsStore:i,recentlyRemovedMembersStore:n,isPageGuestsOpenStore:r,isTeamGuestsOpenStore:l,isTeamGuestsEnabledStore:d,guests:t}):(0,Ge.jsx)(ks,{store:s,spacePermissionsSettingsStore:i,recentlyRemovedMembersStore:n,isTeamGuestsEnabledStore:d,guests:t})]})}},293963:(e,t,s)=>{s.d(t,{z:()=>r});s(667294);var i=s(724405),n=s(709291),a=s(785893);const o=8;function r(e){let{color:t,size:s,style:r}=e;const l=(0,n.useIntl)(),d=(0,i.yK)((e=>({dot:{height:s||o,width:s||o,background:t||e.blueColor,flexShrink:0,borderRadius:"100%",pointerEvents:"none",...r}})),[s,t,r]);return(0,a.jsx)("div",{role:"img","aria-label":l.formatMessage({id:"statusDot.ariaLabel",defaultMessage:"New"}),style:d.dot})}},942982:(e,t,s)=>{s.d(t,{Z:()=>u});s(667294);var i=s(800480),n=s(886628),a=s(709291),o=s(316354),r=s(863296),l=s(164369),d=s(723189),c=s(785893);const u=function(){const e=(0,i.O7)(),t=(0,n.VK)((()=>function(e){const{device:t,WindowSizeStore:s}=e;return{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto",paddingLeft:t.isMobile?s.state.paddingLeftCSS:0,paddingRight:t.isMobile?s.state.paddingRightCSS:0}}(e)),[e]);return(0,c.jsxs)("div",{children:[(0,c.jsx)(m,{}),(0,c.jsxs)("div",{style:t,children:[(0,c.jsx)(l.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,c.jsx)(p,{})}),(0,c.jsx)(g,{})]})]})};function g(){return(0,c.jsx)(o.Z,{href:"https://apps.apple.com/account/subscriptions",children:(0,c.jsx)(r.Z,{isLarge:!0,style:{marginTop:12,marginBottom:4},children:(0,c.jsx)(a.FormattedMessage,{id:"subscriptionSettings.button",defaultMessage:"Manage subscription"})})})}function m(){const e=(0,i.O7)(),{device:t}=e;return(0,c.jsx)(d.Z,{large:!t.isMobile||void 0,divider:t.isMobile?void 0:"full",children:(0,c.jsx)(a.FormattedMessage,{id:"subscriptionSettings.title",defaultMessage:"Subscription"})})}function p(){const e=(0,i.O7)(),{device:t}=e;return t.isMobile?(0,c.jsx)(a.FormattedMessage,{id:"subscriptionSettings.mobileDescription",defaultMessage:"Manage your Personal Pro subscription though the App Store."}):(0,c.jsx)(a.FormattedMessage,{id:"subscriptionSettings.description",defaultMessage:"You're currently subscribed through an in-app purchase with Apple. You can manage your subscription in Apple's subscription settings."})}},830045:(e,t,s)=>{s.d(t,{Z:()=>x});var i=s(667294),n=s(313991),a=s(800480),o=s(886628),r=s(407057),l=s(250501),d=s(133728),c=s(709291),u=s(454642),g=s(823586),m=s(825464),p=s(80444),f=s(672087),h=s(825777),S=s(526388),y=s(555422),b=s(785893);const x=function(e){let{emailDomainSettings:t}=e;const s=(0,a.O7)(),n=(0,o.qz)(void 0,f.Z),r=(0,i.useCallback)(((e,s,i)=>(0,b.jsx)(C,{emailDomainSettings:t,requestStore:n,error:e,result:s,ready:i})),[t,n]),d=(0,o.VK)((()=>p.default.state.currentUserStore),[]);return d?(0,b.jsx)(g.Z,{requestStore:n,request:{userId:d.id,expiryTime:Date.now()+l.g},performRequest:e=>async function(e,t){const s=await u.getDataAccessConsent(t,{});if("failed"===s.type)throw s.error;return s.data}(0,s),render:r}):null};function v(e){return Boolean(e.prevent_granting_support_access)}function M(e){const t=(0,a.O7)(),{accessGranted:s,onClick:i,output:o,emailDomainSettings:l}=e,{device:d}=t;return(0,b.jsx)(y.Z,{disabled:v(l),isMobile:d.isMobile,title:(0,b.jsx)(c.FormattedMessage,{id:"personalSettings.supportSection.userDataConsentSettings.label",defaultMessage:"Support access"}),caption:s&&o.expiryTime?(0,b.jsx)(c.FormattedMessage,{id:"userDataConsentSettings.accessGranted.label",defaultMessage:"You have granted Notion access to your account for support purposes until {expiryTime}.",values:{expiryTime:(0,r.Yx)(o.expiryTime,"medium_with_time",n.SP)}}):(0,b.jsx)(c.FormattedMessage,{id:"personalSettings.supportSection.userDataConsentSettings.message",defaultMessage:"Grant Notion support temporary access to your account so we can troubleshoot problems or recover content on your behalf. You can revoke access at any time."}),type:"toggle",isOn:s,onToggle:i})}function j(e){const{accessGranted:t,onClick:s,output:i,emailDomainSettings:n}=e,a=(0,o.VK)((()=>{var e;const t=null===(e=p.default.state.currentUserStore)||void 0===e?void 0:e.getEmail();return t?(0,d.Gd)(t):void 0}),[]);return(0,b.jsx)(S.Z,{disableTooltip:!v(n),renderTooltip:()=>(0,b.jsx)(c.FormattedMessage,{id:"userDataConsentSetting.disabledByOrganization",defaultMessage:"Granting support access has been disabled by your organization, {emailDomain}",values:{emailDomain:a}}),placement:m.u.Bottom,alignment:m.v.Center,render:e=>(0,b.jsx)("div",{...e,children:(0,b.jsx)(M,{emailDomainSettings:n,accessGranted:t,onClick:s,output:i})})})}async function w(e,t,s){const i=await u.setDataAccessConsent(t,e);if("success"===i.type&&i.data){const e=s.state;s.setState({...e,result:i.data})}}function k(e){let{output:t,emailDomainSettings:s,requestStore:n}=e;const o=(0,a.O7)(),r=(0,i.useCallback)((()=>async function(e,t,s){v(t)||await w({expiryTime:Date.now()+l.g},e,s)}(o,s,n)),[o,s,n]),d=(0,i.useCallback)((()=>async function(e,t,s){v(t)||await w({},e,s)}(o,s,n)),[o,s,n]),c=Boolean(t.expiryTime&&Number(t.expiryTime)>Date.now()),u=c?d:r;return(0,b.jsx)(j,{emailDomainSettings:s,accessGranted:c,onClick:u,output:t})}function C(e){let{error:t,result:s,ready:i,emailDomainSettings:n,requestStore:a}=e;const o=(0,c.useIntl)();return(0,b.jsx)(h.Z,{loaded:i,spinnerSize:16,showSpinnerTimeout:600,children:t||!s?(0,b.jsx)("div",{children:o.formatMessage({id:"userDataConsent.render.error",defaultMessage:"Something went wrong"})}):(0,b.jsx)(k,{emailDomainSettings:n,requestStore:a,output:s})})}},416347:(e,t,s)=>{s.d(t,{H:()=>p});s(667294);var i=s(800480),n=s(886628),a=s(709291),o=s(210228),r=s(237181),l=s(730459),d=s(918514),c=s(80444),u=s(942402),g=s(555422),m=s(785893);function p(e){let{isMobile:t}=e;const s=(0,i.O7)(),p=(0,n.VK)((()=>c.default.state.currentUserSettingsStore),[]),f=(0,n.VK)((()=>{var e;return!0===(null==p||null===(e=p.getSettings())||void 0===e?void 0:e.disable_page_analytics)?"do_not_record":"record"}),[p]);return(0,m.jsx)(g.Z,{isMobile:t,title:(0,m.jsx)(a.FormattedMessage,{id:"viewHistorySettings.title",defaultMessage:"Show my view history"}),caption:(0,m.jsx)(a.FormattedMessage,{id:"viewHistorySettings.description.message",defaultMessage:"People with edit or full access will be able to see when you’ve viewed a page. <inlinelink>Learn more</inlinelink>.",values:{inlinelink:e=>(0,m.jsx)(u.Z,{external:!0,href:(0,d.UY)("guides.pageAnalytics"),children:e})}}),type:"dropdown",currentOption:f,options:[{key:"record",label:(0,m.jsx)(a.FormattedMessage,{id:"viewHistorySettings.record.label",defaultMessage:"Record"})},{key:"do_not_record",label:(0,m.jsx)(a.FormattedMessage,{id:"viewHistorySettings.do_not_record.label",defaultMessage:"Don't record"})}],onSelectOption:e=>{const t="do_not_record"===e;o.createAndCommit({userAction:"ViewHistorySettings.onSelectOption",environment:s,perform:e=>{p&&r.d2({userSettingsStore:p,data:{disable_page_analytics:t},transaction:e})}}),l.K4(s,t?"page_analytics_account_opt_out":"page_analytics_account_opt_in")}})}},386990:(e,t,s)=>{s.d(t,{H:()=>f});s(667294);var i=s(800480),n=s(886628),a=s(89101),o=s(405228),r=s(709291),l=s(800893),d=s(95477),c=s(23124),u=s(526388),g=s(164369),m=s(942402),p=s(785893);function f(e){let{spaceStore:t,isEnterprise:s,showDomain:i}=e;const l=(0,r.useIntl)(),u=(0,n.VK)((()=>t.id),[t]),m=(0,n.VK)((()=>t.getPublicContentDomain()),[t]);return(0,p.jsxs)(c.rj,{gap:8,children:[(0,p.jsx)(c.r8,{row:1,col:1,children:(0,p.jsx)(g.Z,{isSmall:!0,isMultiline:!0,children:(0,p.jsx)(r.FormattedMessage,{id:"securitySAMLSettings.SetupInformationSection.workspaceId",defaultMessage:"Workspace ID"})})}),(0,p.jsx)(c.r8,{row:1,col:2,children:(0,p.jsx)(g.Z,{isSmall:!0,isMultiline:!0,children:(0,p.jsx)(h,{text:u,tooltip:l.formatMessage({id:"securitySAMLSettings.SetupInformationSection.workspaceId.copyTooltip",defaultMessage:"Click to copy ID"})})})}),s?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(c.r8,{row:2,col:1,children:(0,p.jsx)(g.Z,{isSmall:!0,isMultiline:!0,children:(0,p.jsx)(r.FormattedMessage,{id:"securitySAMLSettings.SetupInformationSection.samlSSOEntityIDLink",defaultMessage:"SAML SSO/SAML Entity ID"})})}),(0,p.jsx)(c.r8,{row:2,col:2,children:(0,p.jsx)(g.Z,{isSmall:!0,isMultiline:!0,children:(0,p.jsx)(h,{text:(0,o.AE)(d.default.domainBaseUrl),tooltip:l.formatMessage({id:"securitySAMLSettings.SetupInformationSection.samlSSOEntityID.copyTooltip",defaultMessage:"Click to copy link"})})})}),(0,p.jsx)(c.r8,{row:3,col:1,children:(0,p.jsx)(g.Z,{isSmall:!0,isMultiline:!0,children:(0,p.jsx)(r.FormattedMessage,{id:"securitySAMLSettings.SetupInformationSection.scimBaseUrl",defaultMessage:"SCIM base URL"})})}),(0,p.jsx)(c.r8,{row:3,col:2,children:(0,p.jsx)(g.Z,{isSmall:!0,isMultiline:!0,children:(0,p.jsx)(h,{text:d.default.domainBaseUrl+a._j.scimApiBasePath,tooltip:l.formatMessage({id:"securitySAMLSettings.SetupInformationSection.scimBaseUrl.copyTooltip",defaultMessage:"Click to copy link"})})})})]}):null,i&&void 0!==m?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(c.r8,{row:s?4:2,col:1,children:(0,p.jsx)(g.Z,{isSmall:!0,isMultiline:!0,children:(0,p.jsx)(r.FormattedMessage,{id:"securitySAMLSettings.SetupInformationSection.workspaceDomain",defaultMessage:"Workspace Domain"})})}),(0,p.jsx)(c.r8,{row:s?4:2,col:2,children:(0,p.jsx)(g.Z,{isSmall:!0,isMultiline:!0,children:(0,p.jsx)(h,{text:m,tooltip:l.formatMessage({id:"securitySAMLSettings.SetupInformationSection.workspaceDomain.copyTooltip",defaultMessage:"Click to copy domain"})})})})]}):null]})}function h(e){let{tooltip:t,text:s}=e;const n=(0,i.O7)();return(0,p.jsx)(u.Z,{delayThreshold:0,renderTooltip:()=>t,render:e=>(0,p.jsx)(m.Z,{onClick:()=>{l.RD({environment:n,stringValue:s,copiedMessage:l.tq.copiedPropertyToClipboard})},...e,children:s})})}},375752:(e,t,s)=>{s.d(t,{r:()=>a});var i=s(619584),n=s(454642);class a{constructor(e){this.environment=void 0,this.environment=e}async confirmIdentity(){const{settings:e,sessionVerificationExpirationInSeconds:t}=await this.loadSettings();return t&&t>2*i.hw?{status:"ready"}:e.length>0?{status:"mfa",settings:e}:{status:"password"}}async loadSettings(){const e=await n.authGetLoginConfiguration(this.environment,{});if("success"===e.type){const{data:t}=e;return"required"===t.samlSignIn?{settings:[],sessionVerificationExpirationInSeconds:t.sessionVerificationExpirationInSeconds}:{settings:t.mfaOptions,sessionVerificationExpirationInSeconds:t.sessionVerificationExpirationInSeconds}}throw e}async sendTemporaryPassword(e){const{email:t}=e,s=await n.sendTemporaryPassword(this.environment,{passwordReset:!0,email:t});if("success"===s.type)return{status:"ok"};throw s}async verifyBackupCode(e){var t;const{code:s}=e,i=s.split("-").join(""),a=await n.authVerifyBackupCodesLogin(this.environment,{code:i});if("success"===a.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=a.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw a}async verifyIdentityWithPassword(e){var t;const{password:s}=e,i=await n.authVerifyPassword(this.environment,{password:s});if("success"===i.type)return{status:"match"};if("incorrect_password"===(null===(t=i.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw i}async disableMFA(){const e=await n.authUpdateMfa(this.environment,{action:"disable_all"});if("success"===e.type)return{status:"ok"};throw e}async verifyIdentityWithTOTP(e){var t;const{mfaSettingId:s,code:i}=e,a=await n.authVerifyTotpLogin(this.environment,{mfaSettingId:s,code:i});if("success"===a.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=a.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw a}async verifyIdentityWithSMS(e){var t;const{mfaSettingId:s,code:i}=e,a=await n.authVerifySmsLogin(this.environment,{mfaSettingId:s,code:i});if("success"===a.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=a.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw a}async renameSettings(e){var t,s,i;const{mfaSettingId:a,friendlyName:o}=e,r=await n.authUpdateMfa(this.environment,{action:"rename",mfaSettingId:a,friendlyName:o});if("success"===r.type)return{status:"saved",settings:r.data.mfaOptions};if("mfa_duplicate_friendly_name"===(null===(t=r.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"duplicate"};if("mfa_empty_friendly_name"===(null===(s=r.body)||void 0===s||null===(s=s.clientData)||void 0===s?void 0:s.type))return{status:"empty"};if("mfa_bad_friendly_name"===(null===(i=r.body)||void 0===i||null===(i=i.clientData)||void 0===i?void 0:i.type))return{status:"bad_friendly_name"};throw r}async deleteSettings(e){const t=await n.authUpdateMfa(this.environment,{action:"delete",mfaSettingId:e});if("success"===t.type)return{settings:t.data.mfaOptions};throw t}async createTOTP(){const e=await n.authCreateTotp(this.environment,{});if("success"===e.type)return{mfaSettingId:e.data.mfaSettingId,secret:e.data.authCode,qrCode:e.data.qrCode};throw e}async verifyTOTP(e){var t;const{mfaSettingId:s,code:i}=e,a=await n.authVerifyTotpEnroll(this.environment,{mfaSettingId:s,code:i});if("success"===a.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=a.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw a}async createSMS(e,t){var s,i,a,o;const r=await n.authCreateSms(this.environment,{countryCode:e,phoneNumber:t});if("success"===r.type)return{status:"created",mfaSettingId:r.data.mfaSettingId};if("already_verified_phone_number"===(null===(s=r.body)||void 0===s||null===(s=s.clientData)||void 0===s?void 0:s.type))return{status:"already_verified_phone_number"};if("invalid_country_code"===(null===(i=r.body)||void 0===i||null===(i=i.clientData)||void 0===i?void 0:i.type))return{status:"invalid_country_code"};if("invalid_phone_number"===(null===(a=r.body)||void 0===a||null===(a=a.clientData)||void 0===a?void 0:a.type))return{status:"invalid_phone_number"};if("mfa_sms_unsupported_country_code_for_enrollment"===(null===(o=r.body)||void 0===o||null===(o=o.clientData)||void 0===o?void 0:o.type))return{status:"sms_unsupported_country_code_for_enrollment"};throw r}async verifySMS(e){var t;const{mfaSettingId:s,code:i}=e,a=await n.authVerifySmsEnroll(this.environment,{mfaSettingId:s,code:i});if("success"===a.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=a.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw a}async sendSMS(e){const{mfaSettingId:t}=e,s=await n.authSendSms(this.environment,{mfaSettingId:t});if("success"===s.type)return{status:"ok"};throw s}async createBackupCodes(e){if(!e){const{settings:e}=await this.loadSettings();if(e.find((e=>"backup_code"===e.mfaMethod)))return{status:"already-exists"}}const t=await n.authCreateBackupCodes(this.environment,{});if("success"===t.type)return{status:"new",mfaSettingId:t.data.mfaSettingId,backupCodes:t.data.codes};throw t}}},764898:(e,t,s)=>{s.d(t,{Z:()=>he});var i=s(667294),n=s(800480),a=s(886628),o=s(401898),r=s(628020),l=s(724405),d=s(933679),c=s(709291),u=s(137810),g=s(405474),m=s(188175),p=s(785893);function f(e){const{errorMessage:t,onStartTOTP:s,onStartSMS:n,onDismiss:a}=e,o=(0,l.yK)(h,[]),r=(0,p.jsx)(c.FormattedMessage,{id:"mfa.turnOnSettings.title",defaultMessage:"Turn on 2-step verification"}),u=(0,p.jsx)(c.FormattedMessage,{id:"mfa.turnOnSettings.message",defaultMessage:"Confirm it's you after using a password with a verification code from an authenticator app or text message."}),f=(0,i.useMemo)((()=>(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(g.Z,{type:"totp",title:(0,p.jsx)(c.FormattedMessage,{id:"mfa.turnOnSettings.setupAuthenticator.button.title",defaultMessage:"Code from authenticator"}),caption:(0,p.jsx)(c.FormattedMessage,{id:"mfa.turnOnSettings.setupAuthenticator.button.message",defaultMessage:"Generate a one-time code in your authenticator app"}),onClick:s,style:o.button}),(0,p.jsx)(g.Z,{type:"sms",title:(0,p.jsx)(c.FormattedMessage,{id:"mfa.turnOnSettings.setupSMS.button.title",defaultMessage:"Text me a code"}),caption:(0,p.jsx)(c.FormattedMessage,{id:"mfa.turnOnSettings.setupSMS.button.message",defaultMessage:"Add and verify your phone number"}),onClick:n,style:o.button})]})),[o,n,s]);return(0,p.jsx)(m.Z,{title:r,header:u,children:f,icon:(0,d.j)(o.icon),errorMessage:t,onDismiss:a})}function h(e){return(0,l.EM)({button:{marginBottom:5},settingsTitle:{color:e.mediumTextColor,fontWeight:u.Z.fontWeight.medium,marginBottom:8},icon:{width:30,height:30,fill:e.mediumIconColor}})}var S=s(937612),y=s(568785);function b(e){const{isLoading:t,mfaSetting:s,errorMessage:i,onDismiss:n,onCancel:a,onDeleteMethod:r}=e,d=(0,l.yK)(x,[]),u={text:t?(0,p.jsx)(y.Z,{}):(0,p.jsx)(c.FormattedMessage,{id:"mfa.deleteSetting.permanentlyDelete.button.message",defaultMessage:"Permanently delete"}),onClick:()=>r(s),isRed:!0},g=[{text:(0,p.jsx)(c.FormattedMessage,{id:"mfa.deleteSetting.cancel.button.message",defaultMessage:"Cancel"}),onClick:a,type:"button",view:"outline"}];return(0,p.jsx)(m.Z,{title:(()=>{const e=s.mfaMethod;switch(e){case"sms":return(0,p.jsx)(c.FormattedMessage,{id:"mfa.deleteSetting.sms.title",defaultMessage:"Delete {phoneHint}",values:{phoneHint:s.phoneNumber}});case"totp":return(0,p.jsx)(c.FormattedMessage,{id:"mfa.deleteSetting.totp.title",defaultMessage:"Delete {friendlyName}",values:{friendlyName:s.friendlyName}});default:return(0,o.t1)(e)}})(),header:(()=>{const e=s.mfaMethod;switch(e){case"sms":return(0,p.jsx)(c.FormattedMessage,{id:"mfa.deleteSetting.sms.header",defaultMessage:"Once deleted, you will no longer receive codes sent to {phoneHint}. <boldtext>Are you sure you want to delete this?</boldtext>",values:{phoneHint:s.phoneNumber,boldtext:e=>(0,p.jsx)("span",{style:d.boldText,children:e})}});case"totp":return(0,p.jsx)(c.FormattedMessage,{id:"mfa.deleteSetting.totp.header",defaultMessage:"Once deleted, you will no longer be able to use codes generated from {friendlyName}. <boldtext>Are you sure you want to delete this?</boldtext>",values:{friendlyName:s.friendlyName,boldtext:e=>(0,p.jsx)("span",{style:d.boldText,children:e})}});default:return(0,o.t1)(e)}})(),icon:(0,S.y)(d.crossIcon),primaryAction:u,secondaryActions:g,errorMessage:i,onDismiss:n})}function x(e){return(0,l.EM)({crossIcon:{width:30,fill:"red"},boldText:{fontWeight:u.Z.fontWeight.semibold}})}var v=s(171119),M=s(918514);const j=(0,s(745238).IU)("lockedFilledRedOutlinedWhite",{viewBox:"0 0 11 15",svg:(0,p.jsx)("path",{d:"M2.48352 14.5H8.51649C9.08993 14.5 9.61159 14.3415 9.98454 13.9481C10.3531 13.5594 10.5 13.0215 10.5 12.423V7.8578C10.5 7.33161 10.3876 6.85321 10.1075 6.47956C9.90863 6.21422 9.64758 6.03138 9.34616 5.92009V4.70387C9.34616 3.34493 8.90074 2.28402 8.17081 1.56217C7.44518 0.844569 6.47639 0.5 5.49671 0.5C4.51986 0.5 3.55273 0.844872 2.82813 1.5624C2.09925 2.28417 1.65385 3.34494 1.65385 4.70387V5.9209C1.35431 6.03229 1.09426 6.21478 0.895574 6.47875C0.614816 6.85174 0.5 7.32992 0.5 7.8578V12.423C0.5 13.0215 0.646934 13.5594 1.01546 13.9481C1.38841 14.3415 1.91008 14.5 2.48352 14.5ZM3.7022 4.5581C3.7022 3.8322 3.93059 3.32509 4.24526 3.00203C4.56164 2.67723 5.00162 2.50051 5.49671 2.50051C5.99216 2.50051 6.43618 2.67753 6.75611 3.00343C7.07385 3.3271 7.30439 3.83398 7.30439 4.5581V5.78746H3.7022V4.5581Z",fill:"#E12D2D",stroke:"white"})});var w=s(45653);function k(e){const{userStore:t}=e,s=(0,l.yK)(C,[]);return(0,p.jsxs)("div",{style:s.iconContainer,children:[(0,p.jsx)(w.Z,{userStore:t,size:36,avatarShouldShowShadow:!0,style:s.userIcon}),(0,p.jsx)("span",{children:j(s.lockIcon)})]})}function C(){return(0,l.EM)({iconContainer:{position:"relative"},userIcon:{position:"relative"},lockIcon:{position:"absolute",width:9,height:20,right:0,left:26,top:21}})}function _(e){const{mfaSettings:t,isSMSLoading:s,chosenMfaSettingId:n,userStore:a,errorMessage:r,onClick:d,onDismiss:u}=e,f=(0,l.yK)(I,[]),h=(0,p.jsx)(c.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.methodChooser.title",defaultMessage:"To continue, we need to verify your identity"}),S=(0,p.jsx)(c.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.methodChooser.header",defaultMessage:"Select a method to verify your identity."}),y=[{text:(0,p.jsx)(c.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.methodChooser.needHelp.button",defaultMessage:"Need help?"}),href:(0,M.UY)("guides.mfa"),isExternal:!0,type:"link",view:"plain"}],b=(0,i.useMemo)((()=>(0,v.UG)(t).map((e=>{const t=e.mfaMethod;switch(t){case"totp":return(0,p.jsx)(g.Z,{type:t,title:e.friendlyName,caption:(0,p.jsx)(c.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useAuthenticator.button.message",defaultMessage:"Use code from authenticator"}),onClick:()=>d(e),style:f.actionButton,isActive:!0,disabled:s});case"sms":return(0,p.jsx)(g.Z,{type:t,title:e.phoneNumber,caption:(0,p.jsx)(c.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useSMS.button.message",defaultMessage:"Text me a code"}),onClick:()=>d(e),style:f.actionButton,isActive:!0,isLoading:s&&n===e.mfaSettingId,disabled:s&&n!==e.mfaSettingId});case"backup_code":return(0,p.jsx)(g.Z,{type:t,title:(0,p.jsx)(c.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useBackupCode.button.title",defaultMessage:"Use a backup code"}),caption:(0,p.jsx)(c.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useBackupCode.button.message",defaultMessage:"Use a one-time backup code"}),onClick:()=>d(e),style:f.actionButton,isActive:!0,disabled:s});default:return(0,o.t1)(t)}}))),[t,d,s,n,f.actionButton]);return(0,p.jsx)(m.Z,{title:h,header:S,errorMessage:r,icon:(0,p.jsx)(k,{userStore:a}),secondaryActions:y,onDismiss:u,children:b})}function I(e){return(0,l.EM)({resendLink:{fontWeight:u.Z.fontWeight.medium,color:e.blueColor},actionButton:{marginBottom:5}})}var T=s(303338);function F(e){const t=(0,l.yK)(P,[]),{errorMessage:s,onDismiss:i}=e,n=(0,p.jsx)(c.FormattedMessage,{id:"mfa.turnOffMFAComplete.title",defaultMessage:"2-step verification is turned off"}),a=(0,p.jsx)(c.FormattedMessage,{id:"mfa.turnOffMFAComplete.header",defaultMessage:"2-step verification has been removed from your account. Notion will only ask for your password during log in."}),o=[{text:(0,p.jsx)(c.FormattedMessage,{id:"mfa.turnOffMFAComplete.button.message",defaultMessage:"Complete"}),onClick:i,type:"button",view:"outline"}];return(0,p.jsx)(m.Z,{title:n,header:a,errorMessage:s,icon:(0,T.p)(t.confirmationIcon),secondaryActions:o,onDismiss:i})}function P(e){return(0,l.EM)({confirmationIcon:{width:30,fill:"green"}})}var Z=s(387586);function A(e){const{isLoading:t,lastMFASetting:s,errorMessage:i,onDismiss:n,onTurnOffMFA:a,onCancel:o}=e,r=(0,l.yK)(R,[]),d=(0,p.jsx)(c.FormattedMessage,{id:"mfa.turnOffMFA.title",defaultMessage:"Turn off 2-step verification"}),g={text:t?(0,p.jsx)(y.Z,{}):(0,p.jsx)(c.FormattedMessage,{id:"mfa.turnOffMFA.disableMFA.button.message",defaultMessage:"Turn off 2-step verification"}),onClick:a,isRed:!0},f=[{text:(0,p.jsx)(c.FormattedMessage,{id:"mfa.turnOffMFA.cancel.button.message",defaultMessage:"Cancel"}),onClick:o,type:"button",view:"outline"}];return(0,p.jsx)(m.Z,{title:d,header:s?(0,p.jsx)(c.FormattedMessage,{id:"mfa.turnOffMFA.lastMFASettingDeleted.header",defaultMessage:"Deleting {mfaSettingName} will turn off 2-step verification and remove the additional layer of security on your account. Notion will only ask for your password during log in.",values:{mfaSettingName:"sms"===s.mfaMethod?`${s.phoneNumber}`:s.friendlyName,boldtext:e=>(0,p.jsx)("span",{style:{fontWeight:u.Z.fontWeight.semibold},children:e})}}):(0,p.jsx)(c.FormattedMessage,{id:"mfa.turnOffMFA.header",defaultMessage:"Turning off 2-step verification will remove the additional layer of security on your account. Notion will only ask for your password during log in. "}),icon:(0,Z.B)(r.crossIcon),primaryAction:g,secondaryActions:f,errorMessage:i,onDismiss:n})}function R(e){return(0,l.EM)({crossIcon:{width:30,fill:"red"}})}var B=s(313991),O=s(407057),V=s(661519),D=s(164369),E=s(681864),N=s(356666),q=s(725651),G=s(694900),L=s(164921),U=s(552275),K=s(231945),W=s(374194);function z(e){const{setting:t,setIsEditing:s,isEditing:n,onUpdateMethod:a}=e,o=(0,l.yK)(H,[]),[r,d]=(0,i.useState)(""),c=t.friendlyName,u=""===r?c:r,g=(0,i.useCallback)((e=>""!==e&&e!==c),[c]),m=(0,i.useCallback)((()=>{g(u)?(a({mfaMethod:t.mfaMethod,mfaSettingId:t.mfaSettingId,action:"rename",friendlyName:u}),d(r)):d(c),s(!n)}),[u,n,s,a,r,c,g,t.mfaMethod,t.mfaSettingId]),f=(0,i.useCallback)((e=>{"Enter"!==e.key&&"Escape"!==e.key||m()}),[m]),h=(0,i.useCallback)((e=>{g(e.target.value)&&d(e.target.value)}),[g]);return n?(0,p.jsx)(W.Z,{value:u,maxlength:30,onChange:h,onKeyDown:f,onBlur:m,focus:n,style:o.inputField,inputStyle:o.input}):(0,p.jsx)(D.Z,{children:u})}function H(){return(0,l.EM)({inputField:{width:"auto",marginRight:5,marginBottom:1},input:{fontSize:14,...u.Z.textOverflowStyle}})}var $=s(460709),Q=s(478140),Y=s(632163),J=s(672495);function X(e){const{activeMenuActions:t}=e;return(0,p.jsx)(Q.Z,{menuType:$.og.Popup,children:(0,p.jsx)(Y.Z,{type:Y.i.Vertical,sections:[{key:"mfaMethodActions",render:e=>(0,p.jsx)(J.Z,{...e}),items:t}],initialFocus:void 0})})}function ee(e){const{type:t,title:s,caption:n,setting:a,onDeleteMethod:r,onUpdateMethod:d}=e,u=(0,l.yK)(te,[]),g={totp:(0,E.X)(u.icon),sms:(0,G.u)(u.icon)},[m,f]=(0,i.useState)(!1),h=e=>({key:"deleteMFAMethod",render:e=>(0,p.jsx)(U.Z,{...e,title:(0,p.jsx)(c.FormattedMessage,{id:"mfa.updateSettings.activeSection.editMenu.delete.button.message",defaultMessage:"Delete"}),icon:(0,S.y)(u.menuItemIcon)}),action:()=>{r(a),e.close()}}),y=e=>({key:"editMFAMethod",render:e=>(0,p.jsx)(U.Z,{...e,title:(0,p.jsx)(c.FormattedMessage,{id:"mfa.updateSettings.activeSection.editMenu.editTitle.button.message",defaultMessage:"Edit title"}),icon:(0,q.R)(u.menuItemIcon)}),action:()=>{f(!0),e.close()}});return(0,p.jsxs)("div",{style:u.activeMethodContainer,children:[(0,p.jsxs)("div",{style:u.activeMethodLeftContainer,children:[(0,p.jsx)("div",{style:u.icon,children:g[t]}),(0,p.jsxs)("div",{style:u.activeMethodText,children:[(()=>{switch(t){case"sms":return(0,p.jsx)(D.Z,{children:s});case"totp":return(0,p.jsx)(z,{setting:a,setIsEditing:f,isEditing:m,onUpdateMethod:d});default:return(0,o.t1)(t)}})(),(0,p.jsx)("span",{style:u.activeMethodCaption,children:n})]})]}),(0,p.jsx)(K.ZP,{render:e=>{switch(t){case"sms":return(0,p.jsx)(X,{activeMenuActions:[h(e)]});case"totp":return(0,p.jsx)(X,{activeMenuActions:[y(e),h(e)]});default:(0,o.t1)(t)}},alignmentToOrigin:K.vR.Start,renderOrigin:e=>(0,p.jsx)(L.Z,{style:u.menuButton,disabled:m,...e,children:(0,N.o)(u.menuIcon)}),popupType:K.Z4.Popup})]})}function te(e){return(0,l.EM)({activeMethodContainer:{display:"flex",justifyContent:"space-between",border:`1px solid ${e.outlineButtonBorder}`,width:"100%",padding:"10px 14px 10px 16px",alignItems:"start",height:"auto",borderRadius:4,marginBottom:5},activeMethodLeftContainer:{display:"flex",justifyContent:"left",minWidth:0},activeMethodText:{display:"flex",flexDirection:"column",minWidth:0},activeMethodCaption:{fontSize:u.Z.fontSize.UISmall.desktop,lineHeight:u.Z.lineHeight.UISmall.desktop,color:e.mediumTextColor,whiteSpace:"normal"},icon:{width:20,height:20,marginRight:10,fill:e.blueColor},menuIcon:{fill:e.lightIconColor,width:15,height:15},menuButton:{borderRadius:4,padding:3},menuItemIcon:{width:17,height:17},inputField:{width:"auto",marginRight:5,marginBottom:1},input:{fontSize:14}})}function se(e){const{mfaSettings:t,errorMessage:s,onStartTOTP:n,onStartSMS:a,onTurnOffMFA:r,onStartBackupCodes:u,onDismiss:f,onDeleteMethod:h,onUpdateMethod:S}=e,y=(0,l.yK)(ie,[]),b=(0,p.jsx)(c.FormattedMessage,{id:"mfa.updateSettings.title",defaultMessage:"2-step verification"}),x=(0,p.jsx)(c.FormattedMessage,{id:"mfa.settingModal.message",defaultMessage:"Confirm it's you after using a password by providing a verification code."}),M=(0,i.useMemo)((()=>(0,v.UG)(t).map((e=>{const{mfaMethod:t}=e,s=(0,O.tv)(e.createdAt,B.SP);switch(t){case"totp":return(0,p.jsx)(ee,{type:t,title:e.friendlyName,caption:(0,p.jsx)(c.FormattedMessage,{id:"mfa.updateSettings.activeSection.useAuthenticator.button.message",defaultMessage:"Set up {createdTimeNormalized}",values:{createdTimeNormalized:s}}),setting:e,onDeleteMethod:h,onUpdateMethod:S});case"sms":return(0,p.jsx)(ee,{type:t,title:`${e.phoneNumber}`,caption:(0,p.jsx)(c.FormattedMessage,{id:"mfa.updateSettings.activeSection.useSMS.button.message",defaultMessage:"Set up {createdTimeNormalized}",values:{createdTimeNormalized:s}}),setting:e,onDeleteMethod:h,onUpdateMethod:S});case"backup_code":return;default:(0,o.t1)(t)}}))),[t,h,S]),j=t.filter((e=>"totp"===e.mfaMethod)).length,w=t.filter((e=>"sms"===e.mfaMethod)).length,k=(0,i.useMemo)((()=>[{type:"totp",title:(0,p.jsx)(c.FormattedMessage,{id:"mfa.updateSettings.addMoreSection.addAnotherAuthenticator.button.title",defaultMessage:"Add authenticator"}),caption:j>=2?(0,p.jsx)(c.FormattedMessage,{id:"mfa.updateSettings.addMoreSection.addAnotherAuthenticator.disabled.button.message",defaultMessage:"2 of 2 authenticators added"}):(0,p.jsx)(c.FormattedMessage,{id:"mfa.updateSettings.addMoreSection.addAnotherAuthenticator.button.message",defaultMessage:"{numOfTotpSettings} of 2 authenticators added",values:{numOfTotpSettings:j}}),onClick:n,style:y.button,disabled:j>=2},{type:"sms",title:(0,p.jsx)(c.FormattedMessage,{id:"mfa.updateSettings.addMoreSection.addAnotherPhoneNumber.button.title",defaultMessage:"Add phone number"}),caption:w>=2?(0,p.jsx)(c.FormattedMessage,{id:"mfa.updateSettings.addMoreSection.addAnotherPhoneNumber.disabled.button.message",defaultMessage:"2 of 2 phones added"}):(0,p.jsx)(c.FormattedMessage,{id:"mfa.updateSettings.addMoreSection.addAnotherPhoneNumber.button.message",defaultMessage:"{numOfSmsSettings} of 2 phones added",values:{numOfSmsSettings:w}}),onClick:a,style:y.button,disabled:w>=2},{type:"backup_code",title:(0,p.jsx)(c.FormattedMessage,{id:"mfa.updateSettings.activeSection.useBackupCodes.button.title",defaultMessage:"Regenerate backup codes"}),caption:(0,p.jsx)(c.FormattedMessage,{id:"mfa.updateSettings.activeSection.useBackupCodes.button.message",defaultMessage:"Use for account recovery when other methods don't work"}),onClick:u,style:y.button,disabled:!1}].sort(((e,t)=>(e.disabled?1:0)-(t.disabled?1:0)))),[n,a,u,j,w,y]),C=(0,i.useMemo)((()=>k.map(((e,t)=>(0,i.createElement)(g.Z,{...e,key:t})))),[k]),_=(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(D.Z,{style:y.settingsTitle,isSmall:!0,children:(0,p.jsx)(c.FormattedMessage,{id:"mfa.updateSettings.activeSection.title",defaultMessage:"Active"})}),M,(0,p.jsx)(V.Z,{size:15,isHidden:!0}),(0,p.jsx)(D.Z,{style:y.settingsTitle,isSmall:!0,children:(0,p.jsx)(c.FormattedMessage,{id:"mfa.updateSettings.addMoreMethodsSection.title",defaultMessage:"Add more methods"})}),C]}),I=[{text:(0,p.jsx)(c.FormattedMessage,{id:"mfa.updateSettings.turnOffVerification.button.message",defaultMessage:"Turn off 2-step verification"}),onClick:r,type:"button",view:"plain",isRed:!0}];return(0,p.jsx)(m.Z,{title:b,header:x,errorMessage:s,icon:(0,d.j)(y.icon),onDismiss:f,secondaryActions:I,children:_})}function ie(e){return(0,l.EM)({button:{marginBottom:5},settingsTitle:{color:e.mediumTextColor,fontWeight:u.Z.fontWeight.medium,marginBottom:8},icon:{width:30,height:30,fill:e.mediumIconColor}})}var ne=s(801799),ae=s(531701);function oe(e){const{isLoading:t,userStore:s,errorMessage:n,onDismiss:a,onVerifyBackupCode:o,onTryAnotherMethod:r}=e,d=(0,l.yK)(re,[]),[u,g]=(0,i.useState)(""),f=(0,p.jsx)(c.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withBackupCode.title",defaultMessage:"To continue, we need to verify your identity"}),h=(0,p.jsx)(c.FormattedMessage,{id:"profileSeettings.mfa.verifyIdentity.withBackupCode.header",defaultMessage:"Enter an unused one-time backup code."}),S={text:t?(0,p.jsx)(y.Z,{}):(0,p.jsx)(c.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withBackupCode.button.message",defaultMessage:"Continue"}),onClick:()=>o(u.replace(/[^0-9a-zA-Z]/g,"")),disabled:t||""===u},b=[{text:(0,p.jsx)(c.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withBackupCode.secondaryButton.message",defaultMessage:"Try another method"}),view:"plain",type:"button",onClick:()=>r(),disabled:t}];return(0,p.jsx)(m.Z,{title:f,header:h,icon:(0,p.jsx)(k,{userStore:s}),primaryAction:S,secondaryActions:b,errorMessage:n,onDismiss:a,children:(0,p.jsx)(W.Z,{type:"text",value:u,onChange:e=>{g((0,ne.K)(e.target.value))},placeholder:"0000-0000",style:d.backupCodeInput,disabled:t,autoFocus:!0})})}function re(e){return(0,l.EM)({backupCodeInput:{width:"100%",background:"light"===e.mode?ae.ZP.transparent:e.inputBackground}})}function le(e){const{isLoading:t,isForgotPasswordLoading:s,userStore:n,errorMessage:o,alertMessage:r,onDismiss:d,onVerifyPassword:u,onForgotPassword:g}=e,f=(0,l.yK)(de,[]),[h,S]=(0,i.useState)(""),b=(0,a.VK)((()=>null==n?void 0:n.getEmail()),[n]),x=(0,p.jsx)(c.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withPassword.title",defaultMessage:"To continue, we need to verify your identity"}),v={text:t?(0,p.jsx)(y.Z,{}):(0,p.jsx)(c.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withPassword.button.message",defaultMessage:"Continue"}),onClick:()=>u(h),disabled:t||""===h},M=[{text:(0,p.jsx)(c.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withPassword.secondaryButton.message",defaultMessage:"Forgot password?"}),view:"plain",type:"button",disabled:s,onClick:()=>g(b)}];return(0,p.jsx)(m.Z,{title:x,header:b,icon:(0,p.jsx)(k,{userStore:n}),primaryAction:v,secondaryActions:M,errorMessage:o,alertMessage:r,onDismiss:d,children:(0,p.jsx)(W.Z,{type:"password",value:h,onChange:e=>S(e.target.value),placeholder:"Your password",style:f.passwordInput,disabled:t,autoComplete:"current-password",autoFocus:!0})})}function de(){return(0,l.EM)({passwordInput:{width:"100%"}})}var ce=s(653965),ue=s(473602),ge=s(211898);function me(e){const{mfaSetting:t,isLoading:s,userStore:n,errorMessage:a,resentStatus:o,resentAt:r,onDismiss:l,onVerifySMS:d,onResendLink:u,onTryAnotherMethod:g}=e,[f,h]=(0,i.useState)([]),S=(0,p.jsx)(c.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withSMS.title",defaultMessage:"To continue, we need to verify your identity"}),b=(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(c.FormattedMessage,{id:"profileSeettings.mfa.verifyIdentity.withSMS.header",defaultMessage:"Enter the code sent to {phoneHint}.",values:{phoneHint:`${t.phoneNumber}`}})," ",(0,p.jsx)(ue.y,{resentAt:r,resentStatus:o,onResendLink:u})]}),x={text:s?(0,p.jsx)(y.Z,{}):(0,p.jsx)(c.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withSMS.button.message",defaultMessage:"Continue"}),onClick:()=>d(t.mfaSettingId,f.join("")),disabled:s||"resending"===o||6!==(0,ce.oA)(f).length},v=[{text:(0,p.jsx)(c.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withSMS.secondaryButton.message",defaultMessage:"Try another method"}),view:"plain",type:"button",onClick:()=>g(),disabled:s}];return(0,p.jsx)(m.Z,{title:S,header:b,icon:(0,p.jsx)(k,{userStore:n}),primaryAction:x,secondaryActions:v,errorMessage:a,onDismiss:l,children:(0,p.jsx)("div",{children:(0,p.jsx)(ge.ZP,{numInputs:6,value:f,format:"settings",disabled:!1,onChange:h,autoFocus:!0,isValidKey:ge.rN})})})}function pe(e){const{mfaSetting:t,isLoading:s,userStore:n,errorMessage:a,onDismiss:o,onVerifyTOTP:r,onTryAnotherMethod:d}=e,u=(0,l.yK)(fe,[]),[g,f]=(0,i.useState)([]),h=(0,p.jsx)(c.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withTOTP.title",defaultMessage:"To continue, we need to verify your identity"}),S=(0,p.jsx)(c.FormattedMessage,{id:"profileSeettings.mfa.verifyIdentity.withTOTP.header",defaultMessage:"Enter code from authenticator <boldtext>{friendlyName}</boldtext>.",values:{friendlyName:t.friendlyName,boldtext:e=>(0,p.jsx)("span",{style:u.boldText,children:e})}}),b={text:s?(0,p.jsx)(y.Z,{}):(0,p.jsx)(c.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withTOTP.button.message",defaultMessage:"Continue"}),onClick:()=>r({mfaSettingId:t.mfaSettingId,code:g.join("")}),disabled:s||6!==(0,ce.oA)(g).length},x=[{text:(0,p.jsx)(c.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withTOTP.secondaryButton.message",defaultMessage:"Try another method"}),view:"plain",type:"button",onClick:()=>d(),disabled:s}];return(0,p.jsx)(m.Z,{title:h,header:S,icon:(0,p.jsx)(k,{userStore:n}),primaryAction:b,secondaryActions:x,errorMessage:a,onDismiss:o,children:(0,p.jsx)("div",{children:(0,p.jsx)(ge.ZP,{numInputs:6,value:g,format:"settings",disabled:!1,onChange:f,autoFocus:!0,isValidKey:ge.rN})})})}function fe(e){return(0,l.EM)({boldText:{fontWeight:u.Z.fontWeight.semibold}})}function he(e){const{settingsStateMachine:t,onDismiss:s,onStartTOTP:i,onStartSMS:l,onStartBackupCodes:d}=e,c=(0,n.O7)(),u=(0,a.VK)((()=>(0,r.B7)(c)),[c]),g=t.useCurrentStep();switch(g.step){case"settingsUninitialized":case"settingsLoadSettings":return null;case"settingsVerifyWithPassword":return(0,p.jsx)(le,{isLoading:g.isLoading,isForgotPasswordLoading:g.isForgotPasswordLoading,userStore:u,errorMessage:g.error,alertMessage:g.alert,onVerifyPassword:e=>t.settingsVerifyPassword(e),onForgotPassword:e=>t.settingsForgotPassword(e),onDismiss:s});case"settingsVerifyChooseMFAMethod":return(0,p.jsx)(_,{isSMSLoading:g.isSMSLoading,chosenMfaSettingId:g.chosenMfaSettingId,mfaSettings:g.mfaSettings,userStore:u,errorMessage:g.error,onClick:e=>t.settingsChooseVerifyMethod(e),onDismiss:s});case"settingsVerifyWithTOTP":return(0,p.jsx)(pe,{isLoading:g.isLoading,mfaSetting:g.mfaSetting,userStore:u,errorMessage:g.error,onDismiss:s,onVerifyTOTP:e=>t.settingsVerifyTOTP(e),onTryAnotherMethod:()=>t.settingsTryAnotherMethod()});case"settingsVerifyWithSMS":return(0,p.jsx)(me,{isLoading:g.isLoading,mfaSetting:g.mfaSetting,userStore:u,errorMessage:g.error,resentAt:g.resentAt,resentStatus:g.resentStatus,onDismiss:s,onVerifySMS:(e,s)=>t.settingsVerifySMS({mfaSettingId:e,code:s}),onResendLink:()=>t.settingsVerifyResendSMS(g.mfaSetting.mfaSettingId),onTryAnotherMethod:()=>t.settingsTryAnotherMethod()});case"settingsVerifyWithBackupCode":return(0,p.jsx)(oe,{isLoading:g.isLoading,userStore:u,errorMessage:g.error,onDismiss:s,onVerifyBackupCode:e=>t.settingsVerifyBackupCode(e),onTryAnotherMethod:()=>t.settingsTryAnotherMethod()});case"settingsInitialSetup":return(0,p.jsx)(f,{errorMessage:g.error,onStartTOTP:i,onStartSMS:l,onDismiss:s});case"settingsShowSettings":const e=g.mfaSettings;return(0,p.jsx)(se,{mfaSettings:e,errorMessage:g.error,onStartTOTP:i,onStartSMS:l,onStartBackupCodes:d,onTurnOffMFA:()=>t.settingsConfirmDisableMFA(),onDismiss:s,onDeleteMethod:e=>t.settingsConfirmDelete(e),onUpdateMethod:e=>t.settingsUpdate(e)});case"settingsDeleteSettings":return(0,p.jsx)(b,{isLoading:g.isLoading,mfaSetting:g.mfaSettingToDelete,errorMessage:g.error,onDismiss:s,onCancel:()=>t.settingsConfirmIdentityForSettings(),onDeleteMethod:()=>t.settingsDelete()});case"settingsConfirmIdentity":case"settingsDisableMFA":const n="settingsConfirmIdentity"===g.step&&"disableMFA"===g.source;return"settingsDisableMFA"===g.step||n?(0,p.jsx)(A,{isLoading:n,lastMFASetting:g.lastMFASetting,errorMessage:g.error,onDismiss:s,onTurnOffMFA:()=>t.settingsDisableMFA(),onCancel:()=>t.settingsConfirmIdentityForSettings()}):null;case"settingsIdentityConfirmed":return"disableMFA"===g.source?(0,p.jsx)(F,{errorMessage:g.error,onDismiss:s}):null;default:return(0,o.t1)(g)}}},924173:(e,t,s)=>{s.d(t,{W:()=>u,c:()=>c});var i=s(749085),n=s(926249),a=s(401898),o=s(369503),r=s(801681),l=s(616010);const d={settingsVerifyWithPassword:r.Qj.incorrectPassword,settingsVerifyWithSMS:r.Qj.smsIncorrectCode,settingsVerifyWithTOTP:r.Qj.totpIncorrectCode,settingsVerifyWithBackupCode:r.Qj.backupCodeIncorrectCode};class c extends i.default{getInitialState(){return{step:"settingsUninitialized"}}}class u extends l.o{constructor(e,t){super(e,"settings"),this.service=void 0,this.service=t}settingsConfirmIdentityForPasswordSetting(){this.checkStep("settingsUninitialized")&&(this.store.setState({step:"settingsConfirmIdentity",source:"passwordSetting"}),this.doConfirmIdentity().catch(this.handleUnexpectedError))}settingsConfirmIdentityForSettings(){this.checkStep(["settingsUninitialized","settingsDeleteSettings","settingsDisableMFA"])&&(this.store.setState({step:"settingsConfirmIdentity",source:"settings"}),this.doConfirmIdentity().catch(this.handleUnexpectedError))}settingsVerifyPassword(e){const t=this.checkStep("settingsVerifyWithPassword");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithPassword(e).catch(this.handleUnexpectedError))}settingsForgotPassword(e){const t=this.checkStep("settingsVerifyWithPassword");t&&(this.store.setState({...t,isForgotPasswordLoading:!0}),this.doForgotPassword(e).catch(this.handleUnexpectedError))}settingsChooseVerifyMethod(e){const t=this.checkStep("settingsVerifyChooseMFAMethod");if(!t)return;const s=e.mfaMethod;switch(s){case"sms":this.store.setState({...t,isSMSLoading:!0,chosenMfaSettingId:e.mfaSettingId}),this.doVerifyIdentitySendSMS({mfaSetting:e});break;case"totp":this.store.setState({mfaSetting:e,step:"settingsVerifyWithTOTP",isLoading:!1,source:t.source});break;case"backup_code":this.store.setState({step:"settingsVerifyWithBackupCode",isLoading:!1,source:t.source});break;default:(0,a.t1)(s)}}settingsTryAnotherMethod(){this.checkStep(["settingsVerifyWithSMS","settingsVerifyWithTOTP","settingsVerifyWithBackupCode"])&&this.doTryAnotherMethod().catch(this.handleUnexpectedError)}settingsVerifyTOTP(e){const t=this.checkStep("settingsVerifyWithTOTP");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithTOTP(e).catch(this.handleUnexpectedError))}settingsVerifySMS(e){const t=this.checkStep("settingsVerifyWithSMS");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithSMS(e).catch(this.handleUnexpectedError))}settingsVerifyResendSMS(e){const t=this.checkStep("settingsVerifyWithSMS");t&&(this.store.setState({...t,resentStatus:"resending"}),this.doVerifyIdentityResendSMS(e).catch(this.handleUnexpectedError))}settingsVerifyBackupCode(e){const t=this.checkStep("settingsVerifyWithBackupCode");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithBackupCode({code:e}).catch(this.handleUnexpectedError))}settingsShow(e){const{refresh:t}=e,s=this.getCurrentStep();if("settingsUninitialized"===s.step)return this.settingsConfirmIdentityForSettings();t&&("settingsShowSettings"===s.step||"settingsInitialSetup"===s.step)&&(this.store.setState({step:"settingsLoadSettings"}),this.doLoadSettings().catch(this.handleUnexpectedError))}settingsUpdate(e){this.checkStep("settingsShowSettings")&&this.doUpdateSettings(e).catch(this.handleUnexpectedError)}settingsConfirmDelete(e){const t=this.checkStep("settingsShowSettings");if(!t)return;t.mfaSettings.find((t=>t.mfaSettingId===e.mfaSettingId));const s=t.mfaSettings.filter((e=>"totp"===e.mfaMethod||"sms"===e.mfaMethod));1===s.length?this.store.setState({step:"settingsDisableMFA",lastMFASetting:e}):this.store.setState({step:"settingsDeleteSettings",mfaSettings:t.mfaSettings,mfaSettingToDelete:e,isLoading:!1})}settingsDelete(){const e=this.checkStep("settingsDeleteSettings");e&&(this.store.setState({...e,isLoading:!0}),this.doDeleteSettings(e.mfaSettingToDelete.mfaSettingId).catch(this.handleUnexpectedError))}settingsConfirmDisableMFA(){this.checkStep("settingsShowSettings")&&this.store.setState({step:"settingsDisableMFA"})}settingsDisableMFA(){const e=this.checkStep("settingsDisableMFA");e&&(this.store.setState({step:"settingsConfirmIdentity",source:"disableMFA",lastMFASetting:e.lastMFASetting}),this.doConfirmIdentity().catch(this.handleUnexpectedError))}exit(){this.store.setState({step:"settingsUninitialized"})}async doConfirmIdentity(){const e=await this.withStep("settingsConfirmIdentity",(()=>this.service.confirmIdentity()));if(!e)return;const{result:t,state:s}=e,i=t.status;switch(i){case"ready":this.store.setState({step:"settingsIdentityConfirmed",source:s.source});const e=s.source;"settings"===e?await this.doLoadSettings():"disableMFA"===e?await this.doDisableMFA():"passwordSetting"===e?(o.Z.setState({open:!0,setNewPassword:!0,isSet:!1,password:"",repeatPassword:""}),this.exit()):(0,a.t1)(e);break;case"mfa":this.store.setState({step:"settingsVerifyChooseMFAMethod",mfaSettings:t.settings,source:s.source});break;case"password":this.store.setState({step:"settingsVerifyWithPassword",isLoading:!1,isForgotPasswordLoading:!1,source:"settings"});break;default:throw(0,a.t1)(i)}}async doForgotPassword(e){if(!e)return void this.store.setState({step:"settingsVerifyWithPassword",source:"settings",isLoading:!1,isForgotPasswordLoading:!1,error:r.Qj.unexpectedError});const t=await this.withStep("settingsVerifyWithPassword",(()=>this.service.sendTemporaryPassword({email:e})));if(!t)return;const{result:s,state:i}=t;switch(s.status){case"ok":this.store.setState({...i,isForgotPasswordLoading:!1,alert:r.to.passwordResentLinkSent(e)});break;case"error":this.store.setState({...i,isForgotPasswordLoading:!1,error:r.Qj.unexpectedError});break;default:return(0,a.t1)(s.status)}}async doVerifyIdentityWithPassword(e){const t=await this.withStep("settingsVerifyWithPassword",(()=>this.service.verifyIdentityWithPassword({password:e})));if(!t)return;const{result:s,state:i}=t;await this.handleVerifyIdentityResponse({status:s.status,state:i})}async doVerifyIdentityWithTOTP(e){const t=await this.withStep("settingsVerifyWithTOTP",(()=>this.service.verifyIdentityWithTOTP(e)));if(!t)return;const{result:s,state:i}=t;await this.handleVerifyIdentityResponse({status:s.status,state:i})}async doVerifyIdentityWithSMS(e){const t=await this.withStep("settingsVerifyWithSMS",(()=>this.service.verifyIdentityWithSMS(e)));if(!t)return;const{result:s,state:i}=t;await this.handleVerifyIdentityResponse({status:s.status,state:i})}async doVerifyIdentityResendSMS(e){const t=await this.withStep("settingsVerifyWithSMS",(()=>this.service.sendSMS({mfaSettingId:e})));if(!t)return;const{result:s,state:i}=t;switch(s.status){case"ok":this.store.setState({...i,isLoading:!1,resentStatus:"resent",resentAt:Date.now()});break;case"error":this.store.setState({...i,resentStatus:"not-resent",error:r.Qj.unexpectedError});break;default:return(0,a.t1)(s.status)}}async doVerifyIdentityWithBackupCode(e){const t=await this.withStep("settingsVerifyWithBackupCode",(()=>this.service.verifyBackupCode(e)));if(!t)return;const{result:s,state:i}=t;await this.handleVerifyIdentityResponse({status:s.status,state:i})}async handleVerifyIdentityResponse(e){const{status:t,state:s}=e;switch(t){case"match":const e=s.source;this.store.setState({step:"settingsIdentityConfirmed",source:s.source}),"settings"===e?await this.doLoadSettings():"disableMFA"===e?await this.doDisableMFA():"passwordSetting"===e?(o.Z.setState({open:!0,setNewPassword:!0,isSet:!1,password:"",repeatPassword:""}),this.exit()):(0,a.t1)(e);break;case"incorrect":this.store.setState({...s,isLoading:!1,error:d[s.step]});break;case"error":this.store.setState({...s,isLoading:!1,error:r.Qj.unexpectedError});break;default:return(0,a.t1)(t)}}async doTryAnotherMethod(){const e=await this.withStep(["settingsVerifyWithSMS","settingsVerifyWithTOTP","settingsVerifyWithBackupCode"],(()=>this.service.loadSettings()));if(!e)return;const{result:t,state:s}=e;t.settings.length>0?this.store.setState({...s,step:"settingsVerifyChooseMFAMethod",mfaSettings:t.settings}):this.store.setState({...s,error:r.Qj.unexpectedError})}async doLoadSettings(){const e=await this.withStep(["settingsLoadSettings","settingsIdentityConfirmed"],(()=>this.service.loadSettings()));if(!e)return;const{result:t,state:s}=e,i=s.step;switch(i){case"settingsIdentityConfirmed":case"settingsLoadSettings":t.settings.length>0?this.store.setState({step:"settingsShowSettings",mfaSettings:t.settings}):this.store.setState({step:"settingsInitialSetup"});break;default:return(0,a.t1)(i)}}async doVerifyIdentitySendSMS(e){const{mfaSetting:t}=e,s=await this.withStep("settingsVerifyChooseMFAMethod",(()=>this.service.sendSMS({mfaSettingId:t.mfaSettingId})));if(!s)return;const{result:i,state:n}=s;switch(i.status){case"ok":this.store.setState({mfaSetting:t,step:"settingsVerifyWithSMS",isLoading:!1,resentAt:0,resentStatus:"not-resent",source:n.source});break;case"error":break;default:return(0,a.t1)(i.status)}}async doUpdateSettings(e){const{mfaMethod:t,mfaSettingId:s}=e;if("totp"!==t)return;const i=await this.withStep("settingsShowSettings",(()=>this.service.renameSettings({mfaSettingId:s,friendlyName:e.friendlyName})));if(!i)return;const{result:a,state:o}=i;"saved"===a.status?a.settings.length>0&&!(0,n.Z)(a,o.mfaSettings)?this.store.setState({step:"settingsShowSettings",mfaSettings:a.settings}):this.store.setState({...o,error:void 0}):this.store.setState({...o,error:"duplicate"===a.status?r.Qj.totpDuplicateFriendlyName:"bad_friendly_name"===a.status?r.Qj.totpBadFriendlyName:r.Qj.totpEmptyFriendlyName})}async doDisableMFA(){const e=await this.withStep("settingsIdentityConfirmed",(()=>this.service.disableMFA()));if(!e)return;const{result:t}=e;switch(t.status){case"ok":case"error":break;default:return(0,a.t1)(t.status)}}async doDeleteSettings(e){const t=await this.withStep("settingsDeleteSettings",(()=>this.service.deleteSettings(e)));if(!t)return;const{result:s}=t;this.store.setState({step:"settingsShowSettings",mfaSettings:s.settings})}}},364768:(e,t,s)=>{s.d(t,{ms:()=>ge,Xr:()=>me,dy:()=>ue,ZP:()=>ce});var i=s(667294),n=s(800480),a=s(886628),o=s(724405),r=s(808843),l=s(709291),d=s(137810),c=s(305851),u=s(210228),g=s(78730),m=s(304708),p=s(177150),f=s(80444),h=s(653680),S=s(44041),y=s(891694),b=s(568785),x=s(824006),v=s(164369),M=s(723189),j=s(851221),w=s(293963),k=s(940235),C=s(407057),_=s(253877),I=s(133728),T=s(842875),F=s(185397),P=s(542853),Z=s(605257),A=s(653965),R=s(401898),B=s(948298),O=s(164964),V=s(825464),D=s(206258),E=s(164921),N=s(863296),q=s(489728),G=s(526388),L=s(729302),U=s(45653),K=s(815145),W=s(186517),z=s(421202),H=s(608055),$=s(484210),Q=s(584076),Y=s(731278),J=s(776798),X=s(785893);function ee(e){const{pageAndRole:t,environment:s,intl:i}=e,n=(0,o.yK)((e=>({title:{marginLeft:2},role:{marginLeft:4},linkContainer:{display:"inline-flex",alignItems:"center"}})),[]),r=(0,a.VK)((()=>new D.G(s,{table:z.iU,id:t.id})),[s,t.id]),l=(0,a.VK)((()=>{var e;return null===(e=r.getModel())||void 0===e?void 0:e.getRenderIcon({getRecordModel:r.getRecordModel})}),[r]),d=(0,a.VK)((()=>(0,$.ZP)({store:r,pageVisitSource:K.tY.LinkInPage})),[r]);return(0,X.jsxs)(Q.Z,{style:n.linkContainer,onClick:()=>{H.c4({environment:s,url:d,openInNew:"tab"})},children:[(0,X.jsx)(Y.Z,{icon:l,size:16,isEmptyPage:!1,disabled:!0}),(0,X.jsx)("b",{children:(0,X.jsx)(J.Z,{style:n.title,store:r})}),(0,X.jsx)(v.Z,{style:n.role,isSecondaryColor:!0,children:`(${i.formatMessage((0,W.kD)(t.role,z.iU)).toLocaleLowerCase()})`})]})}function te(e){const{store:t,request:s}=e,{forActor:r,accessRequest:d,createdByActorsWithReason:c}=s,u=(0,n.O7)(),g=(0,o.yK)((e=>({actionButtons:{display:"flex",alignItems:"center",gap:12},requestMetadata:{minWidth:0,marginLeft:10,marginRight:6},tooltip:{marginBottom:2},tooltipHeader:{color:e.mediumInvertedTextColor,fontSize:10,textTransform:"uppercase",letterSpacing:"0.015em",marginBottom:2},requestBody:{marginLeft:38,marginTop:8}})),[]),p=(0,l.useIntl)(),f=(0,a.VK)((()=>r.__IM_SORRY__getValue()),[r]),h=(0,a.VK)((()=>(0,A.mN)(c.map((e=>{let{actor:t}=e;return t})),(e=>e.id))),[c]),S=(0,a.VK)((()=>d.getType()),[d]),y=(0,a.VK)((()=>s.createdByActorsWithReason.filter((e=>{let{reason:t}=e;return Boolean(t)})).map((e=>`${e.actor.getDisplayName(p)} · ${e.reason}`))),[s,p]),b=(0,a.VK)((()=>{var e;return d.isGuestInviteRequest()?null===(e=d.getAttributes())||void 0===e||null===(e=e.permission_records_and_roles)||void 0===e?void 0:e[0]:void 0}),[d]),x=(0,a.VK)((()=>(0,m.wd)()),[]),M=(0,a.VK)((()=>{if(!d.isGuestInviteRequest())return;const e=(0,I.H3)(r.email),s=e&&(0,I.Gd)(e);return s?t.getEmailDomains().find((e=>e===s)):void 0}),[d,r,t]),j=(0,a.VK)((()=>d.created_time),[d]),w=(0,i.useCallback)((async()=>{if(d.isGuestInviteRequest()){(await B.mY({environment:u,requests:[d],status:"approved",from:"requests_center"})).failedUsers.length>0?O.oV({label:(0,X.jsx)(l.FormattedMessage,{id:"spaceSettingsRequestRow.requestRowActions.toast.approveGuestInvite.failure",defaultMessage:"Failed to invite {actorEmail} as a guest",values:{actorEmail:r.email}})}):O.oV({label:(0,X.jsx)(l.FormattedMessage,{id:"spaceSettingsRequestRow.requestRowActions.toast.approveGuestInvite.success",defaultMessage:"Invited {actorEmail} as guest",values:{actorEmail:r.email}})})}else if(d.isSpaceMembershipRequest()){(await B.YN({environment:u,store:t,requests:[d],status:"approved",from:"requests_center"})).failedUsers.length>0?O.oV({label:(0,X.jsx)(l.FormattedMessage,{id:"spaceSettingsRequestRow.requestRowActions.toast.approveSpaceMembership.failure",defaultMessage:"Failed to add {actorEmail} as a member",values:{actorEmail:r.email}})}):O.oV({label:(0,X.jsx)(l.FormattedMessage,{id:"spaceSettingsRequestRow.requestRowActions.toast.approveSpaceMembership.success",defaultMessage:"Added {actorEmail} as a member",values:{actorEmail:r.email}})})}}),[d,u,r,t]),k=(0,i.useCallback)((()=>{d.isGuestInviteRequest()?B.mY({environment:u,requests:[d],status:"rejected",from:"requests_center"}):d.isSpaceMembershipRequest()&&B.YN({environment:u,store:t,requests:[d],status:"rejected",from:"requests_center"})}),[d,u,t]);if(!(s&&r&&f&&c.length))return null;const F=_.CQ(j,(0,T.r)()),P=(0,C.ZV)({value:F,date_format:"relative",userTimeZone:(0,T.r)(),intl:p,allowRelativeDates:!0}),Z=y.length>0||(0,R.$K)(b);return(0,X.jsxs)("div",{style:{width:"100%"},children:[(0,X.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,X.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,X.jsx)(ae,{forActor:f,type:S,shouldShowUpdatedRequestInbox:x}),(0,X.jsxs)("div",{style:g.requestMetadata,children:[(0,X.jsx)(ne,{type:S,forActor:f,shouldShowUpdatedRequestInbox:x}),(0,X.jsxs)(v.Z,{isSmall:!0,children:[(0,X.jsx)(G.Z,{renderTooltip:()=>(0,X.jsxs)("div",{style:g.tooltip,children:[(0,X.jsx)(v.Z,{style:g.tooltipHeader,children:(0,X.jsx)(l.FormattedMessage,{defaultMessage:"Requested by",id:"spaceSettingsRequests.requestRowAction.requestedByMoreThanTwo.tooltip"})}),h.map((e=>(0,X.jsx)(re,{actor:e},e.id)))]}),render:e=>(0,X.jsx)("span",{...e,children:(0,X.jsx)(oe,{request:s,createdByActors:h,shouldShowUpdatedRequestInbox:x})})})," · ",P]})]})]}),(0,X.jsxs)("div",{style:g.actionButtons,children:[(0,X.jsx)(q.Z,{isGray:!0,onClick:k,children:(0,X.jsx)(l.FormattedMessage,{defaultMessage:"Decline",id:"spaceSettingsRequests.requestRowAction.declineButton.label"})}),(0,X.jsx)(G.Z,{render:e=>(0,X.jsx)(N.Z,{isBlue:!0,onClick:w,...e,children:(0,X.jsx)(l.FormattedMessage,{defaultMessage:"Approve",id:"spaceSettingsRequests.requestRowAction.acceptButton.label"})}),renderTooltip:()=>(0,X.jsx)("div",{style:{width:300},children:(0,X.jsx)(l.FormattedMessage,{defaultMessage:"This user will automatically be added to the workspace when approved since {domain} is an allowed email domain",id:"spaceSettingsRequests.requestRowAction.allowedEmailDomain.tooltip",values:{domain:M}})}),disableTooltip:!M,textWrap:!0,placement:V.u.Bottom})]})]}),Z&&(0,X.jsxs)("div",{style:g.requestBody,children:[b&&(0,X.jsx)(ee,{pageAndRole:b,environment:u,intl:p}),y.length>0&&(0,X.jsx)(ie,{reasonMessages:y})]})]})}function se(e){return(0,X.jsx)("b",{children:e})}function ie(e){const{reasonMessages:t}=e,[s,n]=(0,i.useState)(!1),a=(0,o.yK)((e=>({viewReasonsToggle:{paddingLeft:2,paddingRight:2,borderRadius:2,display:"inline-flex",alignItems:"center"},viewReasonsCaratIcon:{marginLeft:2,width:12,height:12,color:e.accentColors.gray[500]},reasonMessageBody:{marginTop:2}})),[]);return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)(E.Z,{style:a.viewReasonsToggle,onClick:()=>n(!s),children:[(0,X.jsx)(v.Z,{isSmall:!0,children:(0,X.jsx)(l.FormattedMessage,{id:"spaceSettingsRequests.requestRowAction.viewReasonsButton.label",defaultMessage:"View reasons"})}),s?(0,P.i)(a.viewReasonsCaratIcon):(0,Z.o)(a.viewReasonsCaratIcon)]}),s&&(0,X.jsx)("div",{style:a.reasonMessageBody,children:t.map(((e,t)=>(0,X.jsx)("div",{children:e},t)))})]})}function ne(e){const{shouldShowUpdatedRequestInbox:t,forActor:s,type:i}=e,n=(0,o.yK)((e=>({title:{display:"flex",gap:4},semibold:{fontWeight:d.Z.fontWeight.semibold}})),[]);if(!t)return(0,X.jsx)("div",{style:n.title,children:(0,X.jsx)(v.Z,{className:"notranslate",children:s.email})});const a="guest_invite_request"===i?(0,X.jsx)(l.FormattedMessage,{id:"spaceSettingsRequests.requestRow.title.guestInviteRequest",defaultMessage:"Invite {actorEmail} as a guest",values:{actorEmail:(0,X.jsx)("span",{style:n.semibold,children:s.email})}}):(0,X.jsx)(l.FormattedMessage,{id:"spaceSettingsRequests.requestRow.title.membershipRequest",defaultMessage:"Add {actorEmail} as a member",values:{actorEmail:(0,X.jsx)("span",{style:n.semibold,children:s.email})}});return(0,X.jsx)("div",{style:n.title,children:(0,X.jsx)(v.Z,{className:"notranslate",children:a})})}function ae(e){const{type:t,shouldShowUpdatedRequestInbox:s,forActor:i}=e,n=(0,o.yK)((e=>({avatarWrapper:{borderRadius:"100%",background:e.accentColors.gray[75],width:28,height:28,display:"flex",alignItems:"center",justifyContent:"center"},addPersonIcon:{width:18,height:18,color:e.accentColors.gray[500]}})),[]);return s&&"guest_invite_request"===t?(0,X.jsx)("div",{style:n.avatarWrapper,children:(0,F.a)(n.addPersonIcon)}):(0,X.jsx)(U.Z,{userValue:i,size:28,borderStyle:"dashed"})}function oe(e){const{createdByActors:t,request:s,shouldShowUpdatedRequestInbox:i}=e,n=(0,l.useIntl)(),o=(0,a.VK)((()=>t.filter((e=>e.email!==s.forActor.email))),[s,t]),r=(0,a.VK)((()=>{var e;return null===(e=t[0])||void 0===e?void 0:e.getDisplayName(n)}),[t,n]),d=(0,a.VK)((()=>{var e;return null===(e=t[1])||void 0===e?void 0:e.getDisplayName(n)}),[t,n]),c=(0,a.VK)((()=>{var e;return null===(e=o[0])||void 0===e?void 0:e.getDisplayName(n)}),[o,n]),u=o.length!==t.length;return i?1===t.length?u?(0,X.jsx)(l.FormattedMessage,{defaultMessage:"Guest self request",id:"spaceSettingsRequests.requestRowAction.requestedBySingularGuestSelfRequest"}):(0,X.jsx)(l.FormattedMessage,{defaultMessage:"Requested by <b>{actorName}</b>",id:"spaceSettingsRequests.requestRowAction.requestedBySingular.v2",values:{actorName:r,b:se}}):u?(0,X.jsx)(l.FormattedMessage,{defaultMessage:"{numberOfOtherActors, plural, one {Guest self request and requested by <b>{secondActorName}</b>} other {Guest self request and requested by <b>{numberOfOtherActors}</b> more}}",id:"spaceSettingsRequests.requestRowAction.requestedByPluralIncludingGuestSelfRequest.v2",values:{secondActorName:c,numberOfOtherActors:o.length,b:se}}):(0,X.jsx)(l.FormattedMessage,{defaultMessage:"{numberOfOtherActors, plural, one {Requested by {firstActorName} and {secondActorName}} other {Requested by {firstActorName} and {numberOfOtherActors} more}}",id:"spaceSettingsRequests.requestRowAction.requestedByPlural.v2",values:{firstActorName:r,secondActorName:d,numberOfOtherActors:t.length-1}}):1===t.length?u?(0,X.jsx)(l.FormattedMessage,{defaultMessage:"Guest self request",id:"spaceSettingsRequests.requestRowAction.requestedBySingularGuestSelfRequest"}):(0,X.jsx)(l.FormattedMessage,{defaultMessage:"From {actorName}",id:"spaceSettingsRequests.requestRowAction.requestedBySingular",values:{actorName:r}}):u?(0,X.jsx)(l.FormattedMessage,{defaultMessage:"{numberOfOtherActors, plural, one {Guest self request and from {secondActorName}} other {Guest self request and from {numberOfOtherActors} more}}",id:"spaceSettingsRequests.requestRowAction.requestedByPluralIncludingGuestSelfRequest",values:{secondActorName:c,numberOfOtherActors:o.length}}):(0,X.jsx)(l.FormattedMessage,{defaultMessage:"{numberOfOtherActors, plural, one {From {firstActorName} and {secondActorName}} other {From {firstActorName} and {numberOfOtherActors} more}}",id:"spaceSettingsRequests.requestRowAction.requestedByPlural",values:{firstActorName:r,secondActorName:d,numberOfOtherActors:t.length-1}})}function re(e){let{actor:t}=e;const s=(0,n.O7)(),i=(0,o.yK)((()=>({component:{display:"flex",justifyContent:"space-between",marginBottom:4},email:{marginLeft:5}})),[]),r=(0,a.VK)((()=>t.email),[t]),l=new D.U6(s,t.pointer);return(0,X.jsxs)("div",{style:i.component,children:[(0,X.jsx)(L.Z,{avatarSize:18,userStore:l}),(0,X.jsx)("div",{style:i.email,children:r})]},t.id)}function le(e){const{spaceStore:t,accessRequestRenderValues:s,lastOpenedRequestCenterTime:i}=e,n=(0,a.VK)((()=>s.filter((e=>"pending"===e.accessRequest.status)).sort(((e,t)=>t.accessRequest.created_time-e.accessRequest.created_time))),[s]),d=(0,o.yK)((e=>({requestColumn:{width:"100%"},zeroStateContainer:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",padding:40,color:e.mediumTextColor,borderStyle:"solid",borderColor:e.regularDividerColor,borderWidth:1,borderRadius:4},mailIcon:{height:12,width:17,color:e.mediumIconColor,marginRight:6}})),[]),c={key:"request",header:void 0,style:d.requestColumn};return 0===n.length?(0,X.jsxs)("div",{style:d.zeroStateContainer,children:[(0,r.h)(d.mailIcon),(0,X.jsx)(l.FormattedMessage,{id:"spaceSettingsRequests.emptyRequests.message",defaultMessage:"No invite requests yet"})]}):(0,X.jsx)(k.Z,{hideHeader:!0,columns:[c],rows:n.map(((e,s)=>({key:`request${s.toString()}`,columns:[(0,X.jsx)(de,{request:e,lastOpenedRequestCenterTime:i,spaceStore:t},e.accessRequest.id)]})))})}function de(e){let{request:t,lastOpenedRequestCenterTime:s,spaceStore:i}=e;const n=(0,a.VK)((()=>s<t.accessRequest.created_time),[s,t.accessRequest]);return(0,X.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[n&&(0,X.jsx)("div",{style:{marginLeft:-18,marginRight:10},children:(0,X.jsx)(w.z,{size:8})}),(0,X.jsx)(te,{store:i,request:t})]},t.accessRequest.id)}function ce(e){const{spaceStore:t,accessRequestsStore:s}=e,c=(0,n.O7)(),[g,p]=(0,i.useState)(Date.now()),[,,S]=(0,a.AF)(void 0,h.Z),y=(0,a.VK)((()=>S.getValueForSpace(t)),[t,S]),[x,,]=(0,a.AF)(s),v=(0,a.VK)((()=>x.result?x.result.filter((e=>"pending"===e.accessRequest.status)).length:0),[x]),w=(0,a.VK)((()=>(0,m.wd)()),[]),k=(0,a.VK)((()=>t.canAdmin()),[t]),C=(0,o.yK)((e=>({errorContainer:{display:"flex",justifyContent:"center",alignItems:"center",padding:40,color:e.mediumTextColor},settingHeader:{fontSize:16,fontWeight:d.Z.fontWeight.medium},requestCount:{color:e.lightTextColor}})),[]);(0,i.useEffect)((()=>{const{currentSpaceViewStore:e}=f.default.state;if(!e)return;const t=e.getKeyStore("settings").getKeyStore("last_opened_request_center").getValue();t&&p(t),u.createAndCommit({userAction:"SpaceSettingsRequests.updateLastOpened",environment:c,perform:t=>{u.applyOperation({store:e,operation:{pointer:e.pointer,path:["settings","last_opened_request_center"],command:"set",args:Date.now()},transaction:t})}})}),[]);return _=x.error,I=x.result,x.ready?_||!I?(0,X.jsx)("div",{style:C.errorContainer,children:(0,X.jsx)(l.FormattedMessage,{defaultMessage:"Something went wrong.",id:"notificationUpdates.unknownErrorMessage"})}):(0,X.jsxs)(X.Fragment,{children:[w&&k?(0,X.jsx)(j.Z,{icon:r.h,title:(0,X.jsx)(l.FormattedMessage,{id:"spaceSettingsRequest.deeplinkCard.title",defaultMessage:"Change request settings in the <bold>Security</bold> tab",values:{bold:e=>(0,X.jsx)("span",{style:{fontWeight:d.Z.fontWeight.semibold},children:e})}}),deeplinkTab:{currentTab:"security",defaultSubtab:void 0}}):null,w?k?null:(0,X.jsx)(fe,{securitySettingsStoreState:y,spaceStore:t,environment:c,isReadOnly:!0}):(0,X.jsx)(fe,{securitySettingsStoreState:y,spaceStore:t,environment:c,isReadOnly:!1}),(0,X.jsxs)(M.Z,{divider:"none",large:!0,style:C.settingHeader,children:[(0,X.jsx)(l.FormattedMessage,{id:"spaceSettingsRequest.title",defaultMessage:"Requests"}),(0,X.jsx)("span",{children:" "}),(0,X.jsx)("span",{style:C.requestCount,children:v>0?v:void 0})]}),(0,X.jsx)(le,{spaceStore:t,accessRequestRenderValues:I,lastOpenedRequestCenterTime:g})]}):(0,X.jsx)("div",{style:C.errorContainer,children:(0,X.jsx)(b.Z,{})});var _,I}function ue(e){return(0,X.jsx)(pe,{...e,title:(0,X.jsx)(l.FormattedMessage,{id:"spaceSettingsRequests.allowMembersToRequestMembers.title",defaultMessage:"Allow members to request adding other members"}),description:(0,X.jsx)(l.FormattedMessage,{id:"spaceSettingsRequests.allowMembersToRequestMembers.description",defaultMessage:"Members can submit requests to admins to add more members"})})}function ge(e){return(0,X.jsx)(pe,{...e,title:(0,X.jsx)(l.FormattedMessage,{id:"spaceSettingsRequests.allowExternalUsersToRequestMembership.title",defaultMessage:"Allow any user to request to be added as a member of the workspace"}),description:(0,X.jsx)(l.FormattedMessage,{id:"spaceSettingsRequests.allowExternalUsersToRequestMembership.description",defaultMessage:"If enabled, users with teamspace invite links can submit requests to admins to be added as members"})})}function me(e){return(0,X.jsx)(pe,{...e,title:(0,X.jsx)(l.FormattedMessage,{id:"spaceSettingsRequests.allowGuestsToSelfRequest.title",defaultMessage:"Allow page guests to request to be added as members to the workspace"}),description:(0,X.jsx)(l.FormattedMessage,{id:"spaceSettingsRequests.allowGuestsToSelfRequest.description",defaultMessage:"Guests of the workspace can submit requests to admins to be added as members"})})}function pe(e){const{toggleOn:t,shouldShowUpsell:s,onClick:n,style:a,upsellOrigin:r,environment:d,description:c,title:u,isReadOnly:g,isControlledByOrganization:m}=e,f=(0,o.yK)((()=>({toggleContainer:{display:"flex",alignItems:"center",cursor:g?"auto":"pointer",marginBottom:14,...a},titleDescription:{fontSize:14,marginRight:8,flexGrow:1},description:{marginTop:2,width:"80%"}})),[a,g]),h=(0,i.useCallback)((()=>{g||m||(s?S.y(d,{from:r,for:"plus"}):n())}),[d,r,g,s,n,m]);return(0,X.jsxs)("div",{style:f.toggleContainer,onClick:h,children:[(0,X.jsxs)("div",{style:f.titleDescription,children:[u,s?(0,X.jsx)(y.Z,{subscriptionTier:"plus",analyticsName:r,onClick:()=>S.y(d,{from:r,for:"plus"}),desktopStyle:{display:"inline-block",marginLeft:8,marginTop:-3}}):null,(0,X.jsx)(v.Z,{isSmall:!0,isMultiline:!0,style:f.description,children:c})]}),g?(0,X.jsx)(v.Z,{isSmall:!0,children:(0,X.jsx)(l.FormattedMessage,{id:"spaceSettingsRequests.readOnlyState.label",defaultMessage:"{isEnabled, select, true {Enabled} other {Disabled}}",values:{isEnabled:t}})}):(0,X.jsx)(x.Z,{on:t,disabled:s,isLocked:m,lockedTooltip:(0,p.g)()})]})}function fe(e){const{securitySettingsStoreState:t,spaceStore:s,environment:n,isReadOnly:o}=e,r=Boolean(null==t?void 0:t.disableMembershipRequests),l=Boolean(null==t?void 0:t.disableExternalMembershipRequests),d=Boolean(null==t?void 0:t.disableGuestMembershipRequests),u=(0,a.VK)((()=>(0,g.U)(s,n)),[n,s]),p=(0,a.VK)((()=>(0,m.Or)()),[]),f=(0,i.useCallback)((()=>{t&&c.n(n,{securitySettingsState:{...t,disableMembershipRequests:!t.disableMembershipRequests},spaceStore:s})}),[n,t,s]),h=(0,i.useCallback)((()=>{t&&c.n(n,{securitySettingsState:{...t,disableExternalMembershipRequests:!t.disableExternalMembershipRequests},spaceStore:s})}),[n,t,s]),S=(0,i.useCallback)((()=>{t&&c.n(n,{securitySettingsState:{...t,disableGuestMembershipRequests:!t.disableGuestMembershipRequests},spaceStore:s})}),[n,t,s]);return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(ue,{environment:n,upsellOrigin:"members_settings",toggleOn:!r,shouldShowUpsell:!1,isReadOnly:o,onClick:f}),p&&(0,X.jsx)(ge,{environment:n,upsellOrigin:"members_settings",toggleOn:!l,shouldShowUpsell:!1,isReadOnly:o,onClick:h}),u&&(0,X.jsx)(me,{environment:n,upsellOrigin:"members_settings",toggleOn:!d,shouldShowUpsell:!1,isReadOnly:o,onClick:S})]})}},187142:(e,t,s)=>{s.d(t,{r:()=>o});var i=s(667294),n=s(800480),a=s(891219);function o(e){const{children:t}=e,s=(0,n.O7)();return(0,i.useEffect)((()=>{a.Dg(s,{})}),[s]),t}},78730:(e,t,s)=>{s.d(t,{B:()=>d,U:()=>l});var i=s(959753),n=s(947969),a=s(519889),o=s(209309),r=s(304708);function l(e,t){return e.getKeyStore("settings").getKeyStore("seen_guest_membership_requests").getValue()&&(0,r.Ye)(t)}function d(e,t){const s=i.kk.fromAccessRequest(e);if(!s.isPageAccessRequest())return!1;const r=s.getForActorPointer(t.id);return r.table===a.KJ&&!o.y.createChildStore(t,n.v8({userId:r.id,spaceId:t.id})).isMember()}},703924:(e,t,s)=>{s.d(t,{M:()=>r});var i=s(667294),n=s(800480),a=s(454642),o=s(785893);function r(e){return function(t){const s=(0,n.O7)(),[r,l]=(0,i.useState)({isDomainVerified:!1,settings:{}});(0,i.useEffect)((()=>{a.getEmailDomainSettings(s,{}).then((e=>{"success"===e.type&&l(e.data)}))}),[s]);const d={...t,userEmailDomainSettings:r};return(0,o.jsx)(e,{...d})}}},18441:(e,t,s)=>{s.d(t,{P9:()=>l,YJ:()=>d,jc:()=>r,jg:()=>o});s(757658);var i=s(977657),n=s(959753),a=s(332161);function o(e){if(e.integration_id!==i.nO)throw"Cannot render account for integration.";const t=/(.+) - (.+)/.exec(e.account_name);if(!t)return{accountName:e.account_name};const[,s,n]=t;return{organizationName:s,accountName:n}}function r(e){return n.kk.fromValue(a.PJ,e).getSlackWorkspaceId()}function l(e,t){return t?e.filter((e=>{const s=r(e);return!!s&&t(s)})):e}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const s={};for(const i of e){const{accountName:e,organizationName:n}=o(i);c({query:t,accountName:e,organizationName:n})&&(s[e]||(s[e]=[]),s[e].push({externalAuthentication:i,workspaceName:n}))}return s}function c(e){const{accountName:t,organizationName:s,query:i}=e;if(0===i.length)return!0;const n=t.toLocaleLowerCase().indexOf(i.trim().toLocaleLowerCase())>=0,a=!!s&&s.toLocaleLowerCase().indexOf(i.trim().toLocaleLowerCase())>=0;return n||a}},177150:(e,t,s)=>{s.d(t,{g:()=>a});s(667294);var i=s(709291),n=s(785893);function a(){return(0,n.jsx)(i.FormattedMessage,{id:"organization.workspaceSettings.locked.tooltip",defaultMessage:"This setting is being managed by your organization."})}},539675:(e,t,s)=>{s.d(t,{E:()=>K,Z:()=>z});var i=s(667294),n=s(800480),a=s(886628),o=s(89101),r=s(709291),l=s(401898),d=s(929845),c=s(247839),u=s(358188),g=s(608055),m=s(522974),p=s(210228),f=s(237181),h=s(192245),S=s(397832),y=s(316354),b=s(568785),x=s(863296),v=s(79603),M=s(386990),j=s(942402),w=s(860857),k=s(723189),C=s(555422),_=s(942982),I=s(830045),T=(s(95477),s(304708)),F=s(321969),P=s(918514),Z=s(548779),A=s(905162),R=s(80444),B=s(424042),O=s(319385),V=s(945946),D=s(992083),E=s(88893),N=s(535057),q=s(288280),G=s(234980),L=s(886706),U=s(785893);function K(e){let{isPhone:t,isIOS:s,passwordRequestStore:i,userEmailDomainSettings:n}=e;const a=q.subscriptionDataStoreInstance.state,o=s&&E.wY(a),r=(0,T.mS)();return[{key:"password",renderSettingsItem:()=>(0,U.jsx)(H,{passwordRequestStore:i})},{key:"appearance",renderSettingsItem:()=>(0,U.jsx)($,{isMobile:!0})},!(t&&(0,A.Y)("supportsNativeHome"))?{key:"page-on-app-start",renderSettingsItem:()=>(0,U.jsx)(Y,{isMobile:!0})}:void 0,O.default.checkGate({gateName:"block_attribution"})?{key:"block-attribution",renderSettingsItem:()=>(0,U.jsx)(Q,{isMobile:!0})}:void 0,o?{key:"subscription",renderSettingsItem:()=>(0,U.jsx)(_.Z,{})}:void 0,{key:"user-consent",renderSettingsItem:()=>(0,U.jsx)(I.Z,{emailDomainSettings:n.settings})},{key:"calendar",renderSettingsItem:()=>(0,U.jsx)(h.Z,{})},r?{key:"experiments",renderSettingsItem:()=>(0,U.jsx)(v.P,{})}:void 0,{key:"spaceInfo",renderSettingsItem:()=>(0,U.jsx)(W,{})},{key:"deleteAccount",renderSettingsItem:()=>(0,U.jsx)(S.Z,{userEmailDomainSettings:n})}].filter(l.$K)}function W(){const e=(0,a.VK)((()=>R.default.state.currentSpaceStore),[]),t=(0,a.VK)((()=>(0,N.wP)()),[]);return e?(0,U.jsxs)("div",{children:[(0,U.jsx)(k.Z,{children:(0,U.jsx)(r.FormattedMessage,{id:"mobileSettings.spaceInfo.title",defaultMessage:"Workspace information"})}),(0,U.jsx)(M.H,{spaceStore:e,isEnterprise:t,showDomain:!0})]}):null}function z(e){var t;const{environment:s}=e,i=O.default.checkGate({gateName:"block_attribution"}),n=s.device.isDesktop&&(s.device.isMac||s.device.isWindows||!1),a=s.device.isDesktop&&s.device.isMac,o=B.Z.state,r=o.isQuickSearchSupported,d=Boolean(null===(t=o.preferences)||void 0===t?void 0:t.isQuickSearchEnabled),c=o.isMenuBarIconSupported,u=o.isNewTabSearchSupported,g=s.device.isElectron,m=g&&r&&d;return[{key:"appearance",renderSettingsItem:()=>(0,U.jsx)($,{isMobile:!1})},{key:"page-on-app-start",renderSettingsItem:()=>(0,U.jsx)(Y,{isMobile:!1})},g&&u?{key:"page-on-tab-start",renderSettingsItem:()=>(0,U.jsx)(J,{})}:void 0,n?{key:"open-in-desktop-app",renderSettingsItem:()=>(0,U.jsx)(ee,{})}:void 0,a?{key:"close-browser-tabs",renderSettingsItem:()=>(0,U.jsx)(X,{})}:void 0,g&&r?{key:"quick-search-enabled",renderSettingsItem:()=>(0,U.jsx)(te,{})}:void 0,m?{key:"quick-search-shortcut",renderSettingsItem:()=>(0,U.jsx)(se,{})}:void 0,void 0,g&&s.device.isMac&&c&&d?{key:"menu-bar-icon-enabled",renderSettingsItem:()=>(0,U.jsx)(ie,{})}:void 0,i?{key:"block-attribution",renderSettingsItem:()=>(0,U.jsx)(Q,{isMobile:!1})}:void 0].filter(l.$K)}function H(e){let{passwordRequestStore:t}=e;const s=(0,a.VK)((()=>{const e=q.subscriptionDataStoreInstance.state;return E.wl(e)}),[]),i=(0,a.VK)((()=>{var e;return(null===(e=R.default.state.currentUserStore)||void 0===e?void 0:e.getEmail())??""}),[]),{hasPassword:n,canConfigurePassword:o,isSamlEnforced:r,mfaStatus:l,error:d,ready:c}=(0,a.VK)((()=>({...t.state.result,error:t.state.error,ready:t.state.result})),[t]);return d?(0,U.jsx)(w.Z,{hasPassword:!1,hasPasswordActions:!1,samlEnforced:!1,mfaStatus:"loading",email:i,onReloadSettings:()=>t.refresh(),isError:!0}):c?(0,U.jsx)(w.Z,{hasPassword:n,hasPasswordActions:o,samlEnforced:r,mfaStatus:l,isEducationPlan:s,email:i,onReloadSettings:()=>t.refresh(),isError:!1}):(0,U.jsx)(b.Z,{})}function $(e){let{isMobile:t}=e;const s=(0,n.O7)(),i=(0,a.VK)((()=>m.VZ(s)),[s]);return(0,U.jsx)(C.Z,{isMobile:t,title:(0,U.jsx)(r.FormattedMessage,{id:"appearanceSettings.title",defaultMessage:"Appearance"}),caption:(0,U.jsx)(r.FormattedMessage,{id:"appearanceSettings.description.message",defaultMessage:"Customize how Notion looks on your device."}),type:"dropdown",currentOption:i,options:[{key:"system",label:(0,U.jsx)(r.FormattedMessage,{id:"appearanceSetting.system.label",defaultMessage:"Use system setting"})},{key:"light",label:(0,U.jsx)(r.FormattedMessage,{id:"appearanceSetting.light.label",defaultMessage:"Light"})},{key:"dark",label:(0,U.jsx)(r.FormattedMessage,{id:"appearanceSetting.dark.label",defaultMessage:"Dark"})}],onSelectOption:e=>{m.Y7(e)}})}function Q(e){let{isMobile:t}=e;const s=(0,n.O7)(),o=(0,a.VK)((()=>R.default.state.currentUserSettingsStore),[]),l=(0,a.VK)((()=>{var e;return(null==o||null===(e=o.getSettings())||void 0===e?void 0:e.show_block_attribution)??!0}),[o]),d=(0,i.useCallback)((()=>{o&&p.createAndCommit({userAction:"NotificationsAndPersonalSettings.onToggle",environment:s,perform:e=>{f.d2({userSettingsStore:o,data:{show_block_attribution:!l},transaction:e})}})}),[o,l,s]);return(0,U.jsx)(C.Z,{isMobile:t,title:(0,U.jsx)(r.FormattedMessage,{id:"attributionSetting.title",defaultMessage:"Block attribution"}),caption:(0,U.jsx)(r.FormattedMessage,{id:"attributionSetting.description.message",defaultMessage:"See your teammates’ initials to the left of blocks they created or edited."}),type:"toggle",isOn:l,onToggle:d})}function Y(e){let{isMobile:t}=e;const s=(0,n.O7)(),i=(0,a.VK)((()=>(0,G.o)()),[]),{isElectron:o}=(0,n.Fy)(),l=(0,a.VK)((()=>{var e,t;return Z.g4(s,{spaceView:null===(e=R.default.state.currentSpaceViewStore)||void 0===e?void 0:e.getModel(),space:null===(t=R.default.state.currentSpaceStore)||void 0===t?void 0:t.getModel()})}),[s]),d=o?(0,U.jsx)(r.FormattedMessage,{id:"pageOnAppStoreSetting.desktopDescription.message",defaultMessage:"Choose what to show when opening new windows, switching workspaces, or launching app without restoring tabs."}):(0,U.jsx)(r.FormattedMessage,{id:"pageOnAppStoreSetting.description.message",defaultMessage:"Choose what to show when Notion starts or when you switch workspaces."});return(0,U.jsx)(C.Z,{isMobile:t,title:(0,U.jsx)(r.FormattedMessage,{id:"pageOnAppStoreSetting.title",defaultMessage:"Open on start"}),caption:d,type:"dropdown",currentOption:l,options:i,onSelectOption:e=>{u.N({userAction:"NotificationsAndPersonalSettings.PageOnAppStartSetting",environment:s,option:e,from:"user_settings"})}})}function J(){const{currentPreference:e}=(0,a.VK)((()=>{var e;const t=B.Z.state;return{currentPreference:Boolean(null===(e=t.preferences)||void 0===e?void 0:e.isNewTabSearchEnabled)}}),[]),t=(0,i.useCallback)((()=>{const t=!e;c.electronAppFeatures.setPreference("isNewTabSearchEnabled",t)}),[e]),s=(0,U.jsx)(r.FormattedMessage,{id:"desktopNewTabSearch.toggle.title",defaultMessage:"New Tab Search"}),n=(0,U.jsx)(r.FormattedMessage,{id:"desktopNewTabSearch.toggle.caption",defaultMessage:'Immediately search for and navigate to a specific page when you open a new tab. When turned off, new tabs will follow your "Open on start" settings. <inlinelink>Learn more</inlinelink>.',values:{inlinelink:e=>(0,U.jsx)(j.Z,{external:!0,href:(0,P.UY)("guides.whyDesktop"),onClick:e=>{e.stopPropagation()},children:e})}});return(0,U.jsx)(C.Z,{isMobile:!1,type:"toggle",title:s,caption:n,isOn:e,onToggle:t})}function X(){const{isElectron:e,isMac:t}=(0,n.Fy)(),s=(0,a.VK)((()=>{var e;return null===(e=B.Z.state.preferences)||void 0===e?void 0:e.isClosingBrowserTabs}),[]),o=(0,i.useCallback)((()=>{const e=!s;c.electronAppFeatures.setPreference("isClosingBrowserTabs",e)}),[s]);if(!e||!t||void 0===s)return null;const l=(0,U.jsx)(r.FormattedMessage,{id:"openInDesktopAppSettings.closeBrowserTabs.title",defaultMessage:"Close redirecting browser tabs"}),d=(0,U.jsx)(r.FormattedMessage,{id:"openInDesktopAppSettings.closeBrowserTabs.caption",defaultMessage:'When opening links in the desktop app, close "Redirecting to your Notion app..." browser tabs.'});return(0,U.jsx)(C.Z,{isMobile:!1,title:l,caption:d,type:"toggle",isOn:s,onToggle:o})}function ee(){const e=(0,n.O7)(),{isElectron:t}=(0,n.Fy)(),s=(0,a.VK)((()=>V.Z.state),[]),i=(0,U.jsx)(r.FormattedMessage,{id:"openInDesktopAppSetting.title",defaultMessage:"Open links in desktop app"}),l=(0,a.VK)((()=>D.Z.state.highlightedSetting===D.R.OpenInDesktopApp),[]);if(t)return(0,U.jsx)(C.Z,{isMobile:!1,title:i,caption:(0,U.jsx)(r.FormattedMessage,{id:"openInDesktopAppSetting.desktopConfigureCaption",defaultMessage:"You can configure browser links to open in this app."}),type:"custom",customButton:(0,U.jsx)(y.Z,{href:(0,F.H)(window.location.href),external:!0,onClick:()=>{d.rZ(e)},children:(0,U.jsx)(x.Z,{children:(0,U.jsx)(r.FormattedMessage,{id:"openInDesktopAppSetting.desktopConfigureButton",defaultMessage:"Set in browser"})})})});return(0,U.jsx)(C.Z,{isMobile:!1,title:i,caption:(0,U.jsx)(r.FormattedMessage,{id:"openInDesktopAppSetting.description.messageWindows",defaultMessage:"You must have the <desktopapplink>Mac or Windows app</desktopapplink> installed",values:{desktopapplink:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,U.jsx)(j.Z,{external:!0,href:o.AR.desktop,onClick:e=>{e.stopPropagation()},children:t})}}}),type:"toggle",isOn:"always"===s,onToggle:()=>{const t="always"===s?"never":"always";V.Z.setState(t),"always"===t&&g.RX({url:(0,F.W)(window.location.href),environment:e}),d.wz(e,{toggled_to:"always"===t?"on":"off"})},shouldHighlight:l})}function te(){const{currentPreference:e}=(0,a.VK)((()=>{var e;const t=B.Z.state;return{currentPreference:Boolean(null===(e=t.preferences)||void 0===e?void 0:e.isQuickSearchEnabled)}}),[]),t=(0,i.useCallback)((()=>{const t=!e;c.electronAppFeatures.setPreference("isQuickSearchEnabled",t)}),[e]),s=(0,U.jsx)(r.FormattedMessage,{id:"desktopQuickSearch.toggle.title",defaultMessage:"Use Command Search"}),n=(0,U.jsx)(r.FormattedMessage,{id:"desktopQuickSearch.toggle.caption",defaultMessage:"Open Notion AI and search anywhere with a shortcut, even when your Notion app isn't active."});return(0,U.jsx)(C.Z,{isMobile:!1,type:"toggle",title:s,caption:n,isOn:e,onToggle:t})}function se(){const{quickSearchShortcut:e,notionAiShortcut:t}=(0,a.VK)((()=>{const e=B.Z.state.preferences;return{quickSearchShortcut:null==e?void 0:e.quickSearchShortcut,notionAiShortcut:null==e?void 0:e.notionAiShortcut}}),[]),s=(0,i.useCallback)((e=>{c.electronAppFeatures.setPreference("quickSearchShortcut",e)}),[]),n=(0,U.jsx)(r.FormattedMessage,{id:"desktopQuickSearch.shortcut.title",defaultMessage:"Command Search shortcut"}),o=(0,U.jsx)(r.FormattedMessage,{id:"desktopQuickSearch.shortcut.caption",defaultMessage:"Customize the shortcut used to trigger Command Search."});return(0,U.jsx)(C.Z,{isMobile:!1,type:"custom",title:n,caption:o,disableSettingsItemClick:!0,customButton:(0,U.jsx)("div",{children:(0,U.jsx)(L.nx,{shortcut:e,onChange:s,conflictingShortcuts:t?[t]:[]})})})}function ie(){const{isMenuBarIconEnabled:e}=(0,a.VK)((()=>{var e;const t=B.Z.state;return{isMenuBarIconEnabled:Boolean(null===(e=t.preferences)||void 0===e?void 0:e.isMenuBarIconEnabled)}}),[]),t=(0,i.useCallback)((()=>{c.electronAppFeatures.setPreference("isMenuBarIconEnabled",!e)}),[e]),s=(0,U.jsx)(r.FormattedMessage,{id:"menuBarIconMacSetting.toggle.title",defaultMessage:"Show Notion in menu bar"}),n=(0,U.jsx)(r.FormattedMessage,{id:"menuBarIconMacSetting.toggle.caption",defaultMessage:"Access Notion faster from the top right of your screen"});return(0,U.jsx)(C.Z,{isMobile:!1,type:"toggle",title:s,caption:n,isOn:e,onToggle:t})}},893586:(e,t,s)=>{s.d(t,{Z:()=>a});var i=s(292595);const n=new(s(551444).q)((e=>{let{spaceId:t}=e;return t}),(async function(e,t){let{spaceId:i}=t;const n=await Promise.resolve().then(s.bind(s,454642)),a=await n.getInternalDomains(e,{spaceId:i});return"success"===a.type?a.data.internalDomains:void 0}));i.exposeDebugValue("InternalDomainsStore",n);const a=n},653680:(e,t,s)=>{s.d(t,{Z:()=>a});var i=s(749085);class n extends i.default{getInitialState(){return{disablePublicAccess:!1,disableGuests:!1,disableMoveToSpace:!1,disableExport:!1,disableSpacePageEdits:!1,disablePublicAccessRequests:!1,disableTeamCreation:!1,disableMembershipRequests:!1,disableExternalMembershipRequests:!1,disableGuestMembershipRequests:!1,enableGuestInviteRequests:!1,enableAiFeature:!1,disableTeamGuests:!1,disableGuestsModalOpen:!1,enableAiTraining:!1}}getValueForSpace(e){if(e.isDefined())return{disablePublicAccess:Boolean(e.getDisablePublicAccess()),disableGuests:Boolean(e.getDisableGuests()),disableMoveToSpace:Boolean(e.getDisableMoveToSpace()),disableExport:Boolean(e.getDisableExport()),disableSpacePageEdits:Boolean(e.getDisableSpacePageEdits()),disablePublicAccessRequests:Boolean(e.getDisablePublicAccessRequests()),disableTeamCreation:Boolean(e.getDisableTeamCreation()),disableMembershipRequests:Boolean(e.getSetting("disable_external_membership_requests")),disableExternalMembershipRequests:Boolean(e.getSetting("disable_external_membership_requests")),disableGuestMembershipRequests:Boolean(e.getSetting("disable_guest_membership_requests")),enableGuestInviteRequests:Boolean(e.getSetting("enable_guest_invite_requests")),enableAiFeature:Boolean(e.getSetting("enable_ai_feature")),disableTeamGuests:Boolean(e.getSetting("disable_team_guests")),enableAiTraining:Boolean(e.getSetting("enable_ai_training"))}}}const a=n},598905:(e,t,s)=>{s.d(t,{Z:()=>a});var i=s(749085);class n extends i.default{getInitialState(){return{count:0}}}const a=new n},524665:(e,t,s)=>{s.d(t,{$A:()=>x,Vu:()=>v,wA:()=>b});var i=s(471924),n=s(709291),a=s(781918),o=s(454642),r=s(792625),l=s(476464),d=s(29974),c=s(210228),u=s(237181),g=s(215010),m=s(80444),p=s(992083),f=s(897630),h=s(9634),S=s(202469),y=s(126149);function b(e){const t=m.default.state.currentUserSettingsStore;t&&c.createAndCommit({userAction:"saveContractionSurveySeenDate",environment:e,perform:e=>{u.d2({userSettingsStore:t,transaction:e,data:{seen_contraction_survey_at:(new Date).getTime()}})}})}async function x(e){let{environment:t,user:s,spaceStore:n,userSettingStore:o}=e;let r,l;if(S.U()&&(l=i.Il(),r=await(0,y.f)({environment:t,contractionSurveyId:l}),!r))return;await(async()=>await(0,h.q)(t,s.userId,n.id))()&&(await(async e=>{await v({member:s,newRole:"none",currentUserSettingsStore:o,spaceStore:n,environment:t}),a.Sw(t,{member_user_id:s.userId,member_role:s.role,contraction_survey_id:e,is_space:!0,domainType:(0,g.JF)(),new_workspace_member_count:-1})})(l),r&&b(t))}async function v(e){let{member:t,newRole:s,currentUserSettingsStore:i,spaceStore:u,environment:m}=e;const h=m.currentUser.id;if(t.userId!==h||"none"!==s)!function(){const e=(0,n.defineMessages)({updatingPermissions:{id:"spacePermissionsSettings.updatePermissionsMessage",defaultMessage:"Updating…"}});r.j({message:e.updatingPermissions})}(),"none"===s?(await o.removeUsersFromSpace(m,{userIds:[t.userId],spaceId:u.id,removePagePermissions:!0,revokeUserTokens:!1}),await f.bi(m)):c.createAndCommit({userAction:"contractionActions.handleMemberPermissionRoleChange",environment:m,perform:e=>l.tQ({environment:m,spaceStore:u,permissionItems:[{type:"user_permission",role:s,user_id:t.userId}],transaction:e,from:"space_permission_setting_table"})}),r.x();else{await d.bf({environment:m,spaceId:u.id,userSettingsStore:i})&&(a.Jk(m,{invite_origin:"workspace_remove_member",domainType:(0,g.JF)(),new_workspace_member_count:-1,new_workspace_member_ids:[h]}),p.Z.setState({...p.Z.state,open:!1}))}}},9634:(e,t,s)=>{s.d(t,{q:()=>T});s(757658);var i=s(667294),n=s(886628),a=s(724405),o=s(519889),r=s(709291),l=s(286572),d=s(454642),c=(s(174136),s(45653)),u=(s(95477),s(80444)),g=s(206258),m=s(535057),p=s(712309),f=s(531701),h=s(137810),S=s(164921),y=s(785893);function b(e){const{items:t,clickHandlerContext:s}=e,n=x(),a=function(){const e=x();return(0,i.useMemo)((()=>({destructive:{default:e.destructiveButtonDefault,hovered:e.destructiveButtonHovered,pressed:e.destructiveButtonPressed},primary:{default:e.primaryButtonDefault,hovered:e.primaryButtonHovered,pressed:e.primaryButtonPressed},secondary:{default:e.secondaryButtonDefault}})),[e.destructiveButtonDefault,e.destructiveButtonHovered,e.destructiveButtonPressed,e.primaryButtonDefault,e.primaryButtonHovered,e.primaryButtonPressed,e.secondaryButtonDefault])}();return(0,y.jsx)("div",{style:n.wrapper,children:t.map((e=>{const t=e.combinedStyles??a[e.buttonType];return(0,y.jsx)(S.Z,{style:null==t?void 0:t.default,hoveredStyle:null==t?void 0:t.hovered,pressedStyle:null==t?void 0:t.pressed,onClick:()=>e.onClick(e,s),children:e.label},e.key)}))})}function x(){return(0,a.yK)((e=>{const t={alignItems:"center",borderRadius:4,boxShadow:void 0,display:"inline-flex",flexShrink:0,fontSize:14,fontWeight:h.Z.fontWeight.medium,height:28,justifyContent:"center",lineHeight:1.2,paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",width:"100%"};return{destructiveButtonDefault:{...t,background:e.redBadgeBackground,color:f.ZP.white,fill:f.ZP.lightTextColor},destructiveButtonHovered:{background:f.ZP.redWithAlpha(.8)},destructiveButtonPressed:{background:f.ZP.red},primaryButtonDefault:{...t,background:f.ZP.blue,color:f.ZP.white,fill:f.ZP.lightTextColor,height:32},primaryButtonHovered:{background:e.blueButtonHoveredBackground},primaryButtonPressed:{background:e.blueButtonPressedBackground},secondaryButtonDefault:{...t,background:e.whiteButtonBackground,color:e.mediumTextColor,fill:f.ZP.lightTextColor},wrapper:{display:"flex",flexDirection:"column",gap:4}}}),[])}function v(e){const t=(0,a.yK)((()=>({wrapper:{display:"flex",flexDirection:"column",gap:24,marginTop:20}})),[]);return(0,y.jsx)("div",{style:{...t.wrapper,...e.styles},children:e.children})}function M(e){const{icon:t,title:s,description:i,customIcon:n}=e,o=(0,a.yK)((e=>({description:{color:e.text.secondary,fontSize:14,lineHeight:"18px",letterSpacing:-.154,textAlign:"center"},icon:{display:"inline",height:34,fill:"#8E8B87"},title:{color:e.text.primary,textAlign:"center",fontSize:16,lineHeight:"1.3",fontWeight:h.Z.fontWeight.medium,letterSpacing:-.32,textWrap:"balance"},wrapper:{display:"flex",flexDirection:"column",gap:8}})),[]);return(0,y.jsxs)("div",{style:o.wrapper,children:[t?t(o.icon):n||null,(0,y.jsx)("div",{style:o.title,children:s}),i?(0,y.jsx)("div",{style:o.description,children:i}):null]})}function j(e){const{onFinished:t,userId:s,userContractionMessages:l}=e,d=(0,a.yK)((e=>({highlights:{color:e.text.secondary,fontSize:14,lineHeight:"18px",letterSpacing:-.154,textAlign:"left",marginTop:-28,marginBottom:-20,marginLeft:-16},customIcon:{alignSelf:"center"},wrapper:{marginTop:4}})),[]),p=(0,r.useIntl)(),f=(0,i.useCallback)((e=>{"submit"!==e.key?t(!1):t(!0)}),[t]),h=(0,n.VK)((()=>u.default.state.currentSpaceStore),[]),S=(0,n.VK)((()=>{if(!h)return;const e=g.U6.createChildStore(h,{id:s,table:o.KJ});return e.isDefined()&&!e.getIsDeleted()?e:void 0}),[h,s]),{name:x,isEnterprise:j}=(0,n.VK)((()=>({name:null==S?void 0:S.getDisplayName(p),isEnterprise:(0,m.wP)()})),[S,p]);return(0,y.jsxs)(v,{styles:d.wrapper,children:[(0,y.jsx)(M,{customIcon:(0,y.jsx)(c.Z,{userStore:S,size:34,style:d.customIcon}),title:I(x),description:C(l,j)}),(0,y.jsx)(w,{}),(0,y.jsx)("div",{style:d.highlights,children:(0,y.jsx)("ul",{children:l.map(((e,t)=>(0,y.jsx)("li",{children:e},`contraction_highlight_${t}`)))})}),(0,y.jsx)(b,{items:[{key:"submit",buttonType:"destructive",label:_(x),onClick:f},{key:"cancel",buttonType:"secondary",label:(0,y.jsx)(r.FormattedMessage,{id:"contractionConfirmation.cancel",defaultMessage:"Cancel"}),onClick:f}]})]})}function w(){return null}function k(e){return e>2e3?(0,y.jsx)(r.FormattedMessage,{id:"contractionConfirmation.amount.2000",defaultMessage:"2000+"}):e>1500?(0,y.jsx)(r.FormattedMessage,{id:"contractionConfirmation.amount.1500",defaultMessage:"1500+"}):e>1e3?(0,y.jsx)(r.FormattedMessage,{id:"contractionConfirmation.amount.1000",defaultMessage:"1000+"}):e>500?(0,y.jsx)(r.FormattedMessage,{id:"contractionConfirmation.amount.500",defaultMessage:"500+"}):e>250?(0,y.jsx)(r.FormattedMessage,{id:"contractionConfirmation.amount.250",defaultMessage:"250+"}):e>100?(0,y.jsx)(r.FormattedMessage,{id:"contractionConfirmation.amount.100",defaultMessage:"100+"}):e>75?(0,y.jsx)(r.FormattedMessage,{id:"contractionConfirmation.amount.75",defaultMessage:"75+"}):e>50?(0,y.jsx)(r.FormattedMessage,{id:"contractionConfirmation.amount.50",defaultMessage:"50+"}):e>25?(0,y.jsx)(r.FormattedMessage,{id:"contractionConfirmation.amount.25",defaultMessage:"25+"}):e>10?(0,y.jsx)(r.FormattedMessage,{id:"contractionConfirmation.amount.10",defaultMessage:"10+"}):e>5?(0,y.jsx)(r.FormattedMessage,{id:"contractionConfirmation.amount.5",defaultMessage:"5+"}):(0,y.jsx)(r.FormattedMessage,{id:"contractionConfirmation.amount.2",defaultMessage:"2+"})}function C(e,t){return e.length>0?(0,y.jsx)(r.FormattedMessage,{id:"contractionConfirmation.description.withName",defaultMessage:"They have been an active Notion member. {isEnterprise, select, true {} other {Removing them may cause permanent loss of their private pages.}}",values:{isEnterprise:t}}):(0,y.jsx)(r.FormattedMessage,{id:"contractionConfirmation.description",defaultMessage:"They will immediately lose access to this workspace{isEnterprise, select, true {.} other { and no one will be able to access their private pages.}}",values:{isEnterprise:t}})}function _(e){return e&&e.length<16?(0,y.jsx)(r.FormattedMessage,{id:"contractionConfirmation.remove.withName",defaultMessage:"Remove {name}",values:{name:e}}):(0,y.jsx)(r.FormattedMessage,{id:"contractionConfirmation.remove",defaultMessage:"Remove member"})}function I(e){return e?(0,y.jsx)(r.FormattedMessage,{id:"contractionConfirmation.title.withName",defaultMessage:"Are you sure you want to remove {name}?",values:{name:e}}):(0,y.jsx)(r.FormattedMessage,{id:"contractionConfirmation.title",defaultMessage:"Are you sure you want to remove this member?"})}async function T(e,t,s){let i=[],n={};if(s){const a=await d.getUserContractionData(e,{userId:t,spaceId:s});"success"===a.type&&(n=a.data,i=function(e){const t=[];if(!("l28_active"in e))return t;const s=Number(e.l28_active);s>1&&t.push((0,y.jsx)(r.FormattedMessage,{id:"contractionConfirmation.activity",defaultMessage:"Visited <bold>{activeDays} days</bold> in the past month",values:{activeDays:k(s),bold:e=>(0,y.jsx)("b",{children:e})}}));const i=Number(e.num_comments);i>1&&t.push((0,y.jsx)(r.FormattedMessage,{id:"contractionConfirmation.numberOfComments",defaultMessage:"Made <bold>{numberOfComments} comments</bold> in their lifetime",values:{numberOfComments:k(i),bold:e=>(0,y.jsx)("b",{children:e})}}));const n=Number(e.num_pages_created);return n>1&&t.push((0,y.jsx)(r.FormattedMessage,{id:"contractionConfirmation.numberOfPages",defaultMessage:"Created <bold>{numberOfPages} pages</bold> in their lifetime",values:{numberOfPages:k(n),bold:e=>(0,y.jsx)("b",{children:e})}})),t}(n))}return l.j(e,{name:"contraction_contextual_confirmation_shown",args:{userContractionData:n}}),await p.Z.showModal((s=>{const a=t=>{t?l.j(e,{name:"contraction_contextual_confirmation_confirmed",args:{userContractionData:n}}):l.j(e,{name:"contraction_contextual_confirmation_cancelled",args:{userContractionData:n}}),s(t)};return{dismissUsing:"onlyEscape",onDismiss:()=>a(!1),content:(0,y.jsx)(j,{onFinished:a,userId:t,userContractionMessages:i})}}))}},601564:(e,t,s)=>{s.d(t,{Z:()=>p});s(667294);var i=s(800480),n=s(724405),a=s(709291),o=s(137810),r=s(225888),l=s(412714),d=s(863296),c=s(158297),u=s(918514),g=s(44041),m=s(785893);const p=function(e){let{style:t,icon:s,title:n,caption:a,upgradeMessage:o,from:r,subscriptionTier:l,onUpgradeClick:d,learnMoreRoute:c}=e;const u=(0,i.O7)();return(0,m.jsxs)("section",{style:h(u,t),children:[(0,m.jsx)(y,{icon:s}),(0,m.jsx)(f,{title:n}),(0,m.jsx)(b,{caption:a}),(0,m.jsx)(M,{upgradeMessage:o,from:r,subscriptionTier:l,onUpgradeClick:d,learnMoreRoute:c})]})};function f(e){let{title:t}=e;return(0,m.jsx)("header",{style:{fontWeight:o.Z.fontWeight.semibold},children:t})}function h(e,t){const{device:s}=e;return{...t,fontSize:14,...!s.isMobile&&{maxWidth:340}}}function S(e){return{color:e.mediumTextColor,marginTop:4,marginBottom:16}}function y(e){let{icon:t}=e;const s=(0,n.Fg)();return t?t(function(e){return{width:32,height:"auto",fill:e.mediumIconColor,marginBottom:8}}(s)):null}function b(e){let{caption:t}=e;const s=(0,n.Fg)();return(0,m.jsx)("p",{style:S(s),children:t})}function x(e){let{upgradeMessage:t,from:s,subscriptionTier:n,onUpgradeClick:o}=e;const r=(0,i.O7)();return(0,m.jsx)(c.Z,{onClick:e=>function(e,t,s,i,n){g.y(i,{from:t,for:s}),n&&n(e)}(e,s,n,r,o),isLarge:!0,children:t||(0,m.jsx)(a.FormattedMessage,{defaultMessage:"Upgrade",id:"upsellCallout.upgradeButton.text"})})}function v(e){let{from:t,learnMoreRoute:s}=e;const n=(0,i.O7)();return(0,m.jsx)(d.Z,{onClick:()=>function(e,t,s){l.D({environment:s,url:(0,u.UY)(t)}),r.Fs(s,{from:e})}(t,s,n),children:(0,m.jsx)(a.FormattedMessage,{defaultMessage:"Learn more",id:"upsellCallout.learnMoreButton.text"})})}function M(e){let{upgradeMessage:t,from:s,subscriptionTier:i,onUpgradeClick:n,learnMoreRoute:a}=e;return(0,m.jsxs)("footer",{style:{display:"flex",flexWrap:"wrap",gap:"8px 12px"},children:[(0,m.jsx)(x,{upgradeMessage:t,from:s,subscriptionTier:i,onUpgradeClick:n}),(0,m.jsx)(v,{from:s,learnMoreRoute:a})]})}},202469:(e,t,s)=>{s.d(t,{U:()=>a});var i=s(253877),n=s(80444);function a(){const e=n.default.state.currentUserSettingsStore;if(!e)return!1;const t=e.getSettings();if(!t)return!1;if(!t.seen_contraction_survey_at)return!0;return Date.now()>(0,i.Xz)({date:t.seen_contraction_survey_at,daysToAdd:1})}},673254:(e,t,s)=>{s.d(t,{V5:()=>i.V5,VX:()=>f,oo:()=>h,eB:()=>S});var i=s(883817),n=s(288280),a=s(170060),o=s(800480),r=s(886628),l=s(815047),d=s(947969),c=s(635150),u=s(206258);function g(e,t){const{name:s,spaceId:i,spaceUserId:n}=t,a=(0,o.O7)();return(0,r.VK)((()=>{if(!i||!n)return;const o=c.Z.getData(a,{spaceId:i});if(!o)return;const r=new u.H2(a,{table:l.bx,id:i}),g=new u.y3(a,{table:d.WU,spaceId:i,id:n}),m=e[s]({environment:a,spaceId:i});return{...t,scope:{type:"space",billingData:o,premiumFeatureOverrides:r.getSettings().premium_feature_overrides??{}},actor:{isSpaceAdmin:(null==g?void 0:g.isWorkspaceOwner())??!1},data:m}}),[a,s,t,e,i,n])}var m=s(88893);const p={guests:e=>{const t=n.subscriptionDataStoreInstance.state;return{current:t?(0,m.lk)(t):0}},internal_guests:e=>{const t=n.subscriptionDataStoreInstance.state;return{current:t?(0,m.lk)(t):0,hasLowGuestLimit:(0,a.fc)()}},non_admin_members:e=>{}};function f(e){const t=g(p,e);return!!t&&(0,i.KQ)(t)}function h(e){const t=g(p,e);if(t)return(0,i.$W)(t)}function S(e){const t=g(p,e);if(!t)return;const s=e.state;return(0,i.lJ)({...t,state:s})}},712309:(e,t,s)=>{s.d(t,{Z:()=>o});var i=s(749085),n=s(471924);class a extends i.default{getInitialState(){return{modalInfoById:{}}}async showModal(e){const t=n.Il();return new Promise((s=>{const i=e((e=>{s(e),this.internalCloseModal(t,(()=>{this.internalRemoveModal(t)}))}));this.update((e=>({modalInfoById:{...e.modalInfoById,[t]:{...i,isOpen:!0}}})))}))}internalRemoveModal(e){this.update((t=>{const s={...t.modalInfoById};return delete s[e],{modalInfoById:s}}))}internalCloseModal(e,t){this.update((s=>({modalInfoById:{...s.modalInfoById,[e]:{...s.modalInfoById[e],isOpen:!1,onClosed:t}}})))}}const o=new a},842605:(e,t,s)=>{s.d(t,{m:()=>p});s(667294);var i=s(886628),n=s(724405),a=s(709291),o=s(401898),r=s(689024),l=s(668828),d=s(707124),c=s(785893);function u(e){const{isChecked:t,label:s,onClickToggle:i}=e,a=(0,n.yK)((()=>({row:{alignItems:"center",cursor:"pointer",display:"flex",gap:8}})),[]);return(0,c.jsxs)("label",{style:a.row,children:[(0,c.jsx)(l._,{checked:t,onChange:i}),(0,c.jsx)(d.q,{styleName:"Body-14px/Regular",children:s})]})}var g=s(374194);function m(e){const{inputText:t,isChecked:s,label:i,onClickToggle:n,placeholderText:a,setInputText:o}=e;return(0,c.jsxs)(r.jX,{gap:8,children:[(0,c.jsx)(u,{label:i,isChecked:s,onClickToggle:n}),s?(0,c.jsx)(g.Z,{autoFocus:!0,value:t,placeholder:a,onChange:e=>o(e.target.value)}):null]})}function p(e){const{store:t}=e,s=(0,n.yK)((e=>({container:{border:`1px solid ${e.stroke.deemphasized}`,borderRadius:6}})),[]),l=(0,i.VK)((()=>t.state.options),[t]),{selectedIndexes:d,customTextByIndex:g}=(0,i.VK)((()=>{const{selectedIndexes:e,customTextByIndex:s}=t.state;return{selectedIndexes:e,customTextByIndex:s}}),[t]),p=(0,a.useIntl)();return(0,c.jsx)(r.jX,{padding:"16px 16px",style:s.container,gap:12,children:l.map(((e,s)=>{const{type:i}=e,n=d.has(s);switch(i){case"checkbox":return(0,c.jsx)(u,{isChecked:n,label:e.label,onClickToggle:()=>t.toggleIndex(s)},s);case"checkboxAndInput":const a="placeholderText"in e&&e.placeholderText?p.formatMessage(e.placeholderText):void 0;return(0,c.jsx)(m,{inputText:g[s]??"",isChecked:n,label:e.label,onClickToggle:()=>t.toggleIndex(s),placeholderText:a,setInputText:e=>t.setCustomTextByIndex(s,e)},s);default:(0,o.t1)(i)}}))})}},957187:(e,t,s)=>{s.d(t,{f:()=>o});s(667294);var i=s(709291),n=s(785893);const a=(0,i.defineMessages)({switchingToNewTool:{id:"survey.options.switching.placeholder",defaultMessage:"Share the name of the other tools"},switchingToNewAiTool:{id:"survey.options.usingAnotherAIService.placeholder",defaultMessage:"Share the name of the other AI tools"}}),o={consolidatingWorkspaces:{optionName:"consolidating_workspaces",type:"checkbox",label:(0,n.jsx)(i.FormattedMessage,{id:"survey.options.consolidatingWorkspaces",defaultMessage:"Consolidating Notion workspaces"})},dataSecurity:{optionName:"data_security",type:"checkbox",label:(0,n.jsx)(i.FormattedMessage,{id:"churnSurvey.reasons.dataSecurity",defaultMessage:"Data security"})},missingFeatures:{optionName:"missing_features",type:"checkbox",label:(0,n.jsx)(i.FormattedMessage,{id:"survey.options.missingFeatures",defaultMessage:"Missing features"})},noLongerNeedAccess:{optionName:"no_longer_need_access",type:"checkbox",label:(0,n.jsx)(i.FormattedMessage,{id:"survey.options.noLongerNeedAccess",defaultMessage:"No longer need access to Notion"})},noLongerWorkTogether:{optionName:"no_longer_work_together",type:"checkbox",label:(0,n.jsx)(i.FormattedMessage,{id:"survey.options.noLongerWorksHere",defaultMessage:"No longer works here"})},notUsingEnough:{optionName:"not_using_enough",type:"checkbox",label:(0,n.jsx)(i.FormattedMessage,{id:"survey.options.notUsingEnough",defaultMessage:"Not using it enough"})},other:{optionName:"other",type:"checkboxAndInput",label:(0,n.jsx)(i.FormattedMessage,{id:"survey.options.other",defaultMessage:"Other"})},switching:{optionName:"switching",type:"checkboxAndInput",label:(0,n.jsx)(i.FormattedMessage,{id:"survey.options.switching",defaultMessage:"Switching to another tool"}),placeholderText:a.switchingToNewTool},switchingToAnotherWorkspace:{optionName:"switching_to_another_workspace",type:"checkbox",label:(0,n.jsx)(i.FormattedMessage,{id:"survey.options.switchingToAnotherWorkspace",defaultMessage:"Switching to another Notion workspace"})},tooDifficult:{optionName:"too_difficult",type:"checkbox",label:(0,n.jsx)(i.FormattedMessage,{id:"survey.options.tooDifficult",defaultMessage:"Too difficult to use"})},tooExpensive:{optionName:"too_expensive",type:"checkbox",label:(0,n.jsx)(i.FormattedMessage,{id:"survey.options.tooExpensive",defaultMessage:"Too expensive"})},upgradedByMistake:{optionName:"upgraded_by_mistake",type:"checkbox",label:(0,n.jsx)(i.FormattedMessage,{id:"survey.options.upgradedByMistake",defaultMessage:"Upgraded by mistake"})},usingAnotherAiService:{optionName:"using_another_ai_service",type:"checkboxAndInput",label:(0,n.jsx)(i.FormattedMessage,{id:"churnSurvey.reasons.usingAnotherAIService",defaultMessage:"Using another AI service"}),placeholderText:a.switchingToNewAiTool},qualityOfResults:{optionName:"quality_of_results",type:"checkbox",label:(0,n.jsx)(i.FormattedMessage,{id:"churnSurvey.reasons.qualityOfResults",defaultMessage:"Quality of results"})}}},488101:(e,t,s)=>{s.d(t,{b:()=>n,z:()=>a});s(757658);var i=s(749085);class n extends i.default{getInitialState(){return{options:[],customTextByIndex:{},selectedIndexes:new Set}}setOptions(e){this.setState({customTextByIndex:{},options:e,selectedIndexes:new Set})}setCustomTextByIndex(e,t){this.update((s=>({...s,customTextByIndex:{...s.customTextByIndex,[e]:t}})))}toggleIndex(e){this.update((t=>{const s=new Set(t.selectedIndexes);return s.has(e)?s.delete(e):s.add(e),{...t,selectedIndexes:s}}))}toSurveyResult(){const{customTextByIndex:e,options:t,selectedIndexes:s}=this.state,i=[],n=[],a={};return s.forEach((s=>{const o=t[s];i.push(o.optionName),n.push(s),"checkboxAndInput"===o.type&&e[s]&&(a[o.optionName]=e[s])})),{reasons:i,reasonIndexes:n,customTextByReason:a}}}const a=new n},126149:(e,t,s)=>{s.d(t,{f:()=>p});s(667294);var i=s(739263),n=s(709291),a=s(653965),o=s(286572),r=s(957187),l=s(382914),d=s(699884),c=s(969098),u=s(842605),g=s(488101),m=s(785893);async function p(e){const{environment:t,contractionSurveyId:s}=e;o.j(t,{name:"contraction_survey_opened",args:{contractionSurveyId:s}});const a=await async function(e){const{iconGroup:t,options:s,title:i,description:a}=e;return await c.o.showAsyncModal((e=>{const o=new g.b;return o.setOptions(s),(0,m.jsx)(d.c,{isOpen:e.isOpen,onDismiss:e.onDismiss,onClosed:e.onClosed,areaConstraint:{width:{type:"min",length:406},height:{type:"unlimited",scroll:"allow"}},render:()=>(0,m.jsx)(l.sR,{header:(0,m.jsx)(l.vI,{iconAndTitle:(0,m.jsx)("div",{style:{padding:"0 24px"},children:(0,m.jsx)(l.kC,{iconGroup:t,title:i})}),description:a}),footer:(0,m.jsx)(l.a6,{layout:"vertical",primaryButtons:[{label:(0,m.jsx)(n.FormattedMessage,{id:"contractionSurvey.continue",defaultMessage:"Continue"}),onClick:()=>e.resolve(o.toSurveyResult())}],secondaryButtons:[{buttonType:"dismiss"}]}),children:(0,m.jsx)(u.m,{store:o})})})}))}({iconGroup:i.X,title:(0,m.jsx)(n.FormattedMessage,{id:"contractionSurvey.title",defaultMessage:"Why are you removing this member from your workspace?"}),description:(0,m.jsx)(n.FormattedMessage,{id:"contractionSurvey.description",defaultMessage:"We'd love your input to make Notion better"}),options:f()});return a?o.j(t,{name:"contraction_survey_completed",args:{contraction_survey_id:s,reasons:a.reasons,reason_indexes:a.reasonIndexes,reason_other:a.customTextByReason.other}}):o.j(t,{name:"contraction_survey_dismissed",args:{contractionSurveyId:s}}),a}function f(){return[...(0,a.TV)([r.f.noLongerNeedAccess,r.f.noLongerWorkTogether,r.f.notUsingEnough,r.f.switching,r.f.switchingToAnotherWorkspace,r.f.tooExpensive]),r.f.other]}},739263:(e,t,s)=>{s.d(t,{X:()=>i});const i=(0,s(745238).CZ)("pencilLine",{default:{loader:()=>s.e(80486).then(s.bind(s,780486)),size:20},small:{loader:()=>s.e(66635).then(s.bind(s,666635)),size:16},mini:{loader:()=>s.e(79693).then(s.bind(s,579693)),size:14},large:{loader:()=>s.e(47423).then(s.bind(s,147423)),size:24}})},642499:(e,t,s)=>{s.d(t,{G:()=>i});const i=(0,s(745238).CZ)("personCropCircleBadgeExclamationPoint",{default:{loader:()=>s.e(16750).then(s.bind(s,416750)),size:20},small:{loader:()=>s.e(35560).then(s.bind(s,835560)),size:16},mini:{loader:()=>s.e(84473).then(s.bind(s,984473)),size:14},large:{loader:()=>s.e(9346).then(s.bind(s,609346)),size:24}})},185397:(e,t,s)=>{s.d(t,{a:()=>a});s(667294);var i=s(745238),n=s(785893);const a=(0,i.IU)("addPerson",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M9.48242 7.91211C10.8076 7.91211 11.8352 6.77783 11.8352 5.35718C11.8352 4.00391 10.7908 2.84717 9.48242 2.84717C8.17407 2.84717 7.12964 4.00952 7.13525 5.36279C7.14087 6.77783 8.16284 7.91211 9.48242 7.91211ZM9.48242 8.87231C8.7356 8.87231 8.04492 8.99585 7.44409 9.22046C8.23022 9.95044 8.72437 10.9836 8.72437 12.1235C8.72437 12.511 8.66821 12.8872 8.55591 13.2466H12.8684C13.969 13.2466 14.3171 12.8479 14.3171 12.2302C14.3171 10.804 12.3967 8.87231 9.48242 8.87231ZM4.74316 15.1895C6.42212 15.1895 7.80347 13.7969 7.80347 12.1235C7.80347 10.4558 6.42212 9.06885 4.74316 9.06885C3.06982 9.06885 1.68286 10.4558 1.68286 12.1235C1.68286 13.7969 3.06982 15.1895 4.74316 15.1895ZM4.74316 14.1675C4.41187 14.1675 4.18726 13.9429 4.18726 13.6172V12.6907H3.27197C2.94629 12.6907 2.72168 12.4661 2.71606 12.1292C2.71045 11.7979 2.93506 11.5732 3.27197 11.5732H4.18726V10.6636C4.18726 10.3379 4.41187 10.1133 4.74316 10.1077C5.08008 10.1021 5.30469 10.3267 5.30469 10.6636V11.5732H6.22559C6.55127 11.5732 6.77588 11.7979 6.77588 12.1292C6.77588 12.4661 6.55127 12.6907 6.22559 12.6907H5.30469V13.6172C5.30469 13.9429 5.08008 14.1675 4.74316 14.1675Z"})})},10020:(e,t,s)=>{s.d(t,{C:()=>a});s(667294);var i=s(745238),n=s(785893);const a=(0,i.IU)("chevronRightRoundedThin",{viewBox:"0 0 24 24",svg:(0,n.jsx)("path",{d:"M17.0078 11.8594C17.0078 11.724 16.9818 11.599 16.9297 11.4844C16.8776 11.3698 16.7995 11.2604 16.6953 11.1562L10.6094 5.20312C10.4375 5.03125 10.224 4.94531 9.96875 4.94531C9.80208 4.94531 9.64844 4.98698 9.50781 5.07031C9.36719 5.14844 9.25521 5.25521 9.17188 5.39062C9.09375 5.52604 9.05469 5.67969 9.05469 5.85156C9.05469 6.09635 9.14844 6.3151 9.33594 6.50781L14.8203 11.8594L9.33594 17.2109C9.14844 17.4036 9.05469 17.625 9.05469 17.875C9.05469 18.0417 9.09375 18.1927 9.17188 18.3281C9.25521 18.4688 9.36719 18.5781 9.50781 18.6562C9.64844 18.7396 9.80208 18.7812 9.96875 18.7812C10.224 18.7812 10.4375 18.6927 10.6094 18.5156L16.6953 12.5625C16.7995 12.4583 16.8776 12.349 16.9297 12.2344C16.9818 12.1198 17.0078 11.9948 17.0078 11.8594Z"})})},876781:(e,t,s)=>{s.d(t,{x:()=>a});s(667294);var i=s(745238),n=s(785893);const a=(0,i.IU)("group",{viewBox:"0 0 30 30",svg:(0,n.jsx)("path",{d:"M15.011 14.795c1.678 0 3.096-1.502 3.096-3.444C18.107 9.455 16.682 8 15.012 8c-1.67 0-3.096 1.478-3.088 3.367 0 1.926 1.41 3.428 3.088 3.428zm-8.872.178c1.464 0 2.697-1.316 2.697-3.003 0-1.656-1.241-2.917-2.697-2.917-1.448 0-2.697 1.284-2.69 2.933 0 1.671 1.234 2.987 2.69 2.987zm17.722 0c1.456 0 2.69-1.316 2.69-2.987.007-1.649-1.242-2.933-2.69-2.933s-2.697 1.261-2.697 2.917c0 1.687 1.241 3.003 2.697 3.003zM1.917 22h5.747c-.82-1.184.069-3.521 1.8-4.899-.842-.55-1.946-.952-3.325-.952C2.714 16.15.5 18.695.5 20.793.5 21.559.883 22 1.917 22zm26.166 0c1.034 0 1.417-.441 1.417-1.207 0-2.098-2.214-4.644-5.64-4.644-1.378 0-2.474.403-3.317.952 1.732 1.378 2.62 3.715 1.8 4.899h5.74zm-17.852-.008h9.554c1.264 0 1.7-.387 1.7-1.099 0-1.989-2.505-4.728-6.473-4.728-3.977 0-6.475 2.74-6.475 4.728 0 .712.437 1.1 1.693 1.1z"})})},646783:(e,t,s)=>{s.d(t,{w:()=>a});s(667294);var i=s(745238),n=s(785893);const a=(0,i.IU)("templates",{viewBox:"0 0 20 20",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M6.39733 5.67853C5.89764 5.50234 5.36002 5.40649 4.8 5.40649C2.14904 5.40649 0 7.55432 0 10.2038C0 12.8533 2.14904 15.0011 4.8 15.0011C6.52165 15.0011 8.0316 14.0952 8.87867 12.7343L5.26487 12.0975L6.39733 5.67853Z"}),(0,n.jsx)("path",{d:"M17.3126 3.66609L7.85843 2L6.19141 11.4489L10.6545 12.2354L14.3998 5.81854L16.3449 9.15116L17.3126 3.66609Z"}),(0,n.jsx)("path",{d:"M8.80078 17L14.4008 7.4054L20.0008 17H8.80078Z"})]})})},196068:(e,t,s)=>{s.d(t,{IA:()=>n,o4:()=>a,zg:()=>o});var i=s(653965);function n(e){if(i.jj(e).length<=3)return{success:!1,reason:{type:"password_too_consistent"}};if(e.length>=15)return{success:!0};if(e.length<8)return{success:!1,reason:{type:"password_too_short"}};const t=a(e),s=o(e);return t&&s?{success:!0}:t||s?s?t?{success:!1,reason:{type:"password_too_short"}}:{success:!1,reason:{type:"password_missing_letter"}}:{success:!1,reason:{type:"password_missing_number"}}:{success:!1,reason:{type:"password_missing_letter_and_number"}}}function a(e){return e.match(/[a-z]/i)}function o(e){return e.match(/\d/)}},490814:(e,t,s)=>{s.d(t,{$W:()=>l,Ay:()=>g,KQ:()=>o,Kz:()=>u,V5:()=>c,_e:()=>d,lJ:()=>r,t:()=>n});var i=s(401898),n=s(212847),a=s(909182);function o(e,t,s){return d(l(e,t,s))}function r(e,t,s){const i=s.state,n=s.scope.billingData,a={trialEnd:i.trialEnd,items:i.items};return l(e,t,{...s,scope:{...s.scope,billingData:{...n,subscription:a}}})}function l(e,t,s){const{name:n,scope:o,actor:r}=s,l={...s,billingData:o.billingData},d=o.premiumFeatureOverrides,c=n in d?function(e,t,s){const n={type:"contact_account_manager"},a=e[t.name].type;if("check"===a){const e={type:"none"};return!0===s?{type:"available",limit:e}:{type:"upsell",upsell:n,limit:e}}if("per_use"===a){const e=t.amount,i={type:"per_use",amount:s};return"unlimited"===s||s>e?{type:"available",limit:i}:{type:"upsell",upsell:n,limit:i}}if("cumulative"===a){const e=t.amount,i=t.data.current,a={type:"cumulative",current:i,total:s};return"unlimited"===s||s>=i+e?{type:"available",limit:a}:{type:"upsell",upsell:n,limit:a}}(0,i.t1)(a)}(e,s,d[n]):t[n](l);if("upsell"!==c.type)return c;const u=(0,a.Rd)(o.billingData.subscription),g=r.isSpaceAdmin,m=u?{type:"contact_account_manager"}:c.upsell,p=g?"upsell":"blocked";return{...c,type:p,upsell:m}}function d(e){return"available"===e.type}function c(e,t){const{available:s}=t;let n,a;return"unavailable"in t?(n=t.unavailable,a=t.unavailable):(n=t.blocked,a=t.upsell),"available"===e.type?s():"upsell"===e.type?a(e):"blocked"===e.type?n(e):(0,i.t1)(e)}function u(e,t){if(void 0!==e)return c(e,{available:()=>{},blocked:t,upsell:()=>{}})}function g(e){return n.object({required:e,optional:{}})}},883817:(e,t,s)=>{s.d(t,{$W:()=>d,II:()=>g,KQ:()=>l,V5:()=>n.V5,lJ:()=>c});var i=s(909182),n=s(490814),a=s(647425);const o={guests:{type:"cumulative",data:(0,n.Ay)({current:n.t.number()})},internal_guests:{type:"cumulative",data:(0,n.Ay)({current:n.t.number(),hasLowGuestLimit:n.t.boolean()})},non_admin_members:{type:"check",data:n.t.isUndefined()}},r={guests:e=>{let{amount:t,billingData:s,data:{current:i}}=e;return u({billingData:s,amount:t,current:i,limits:{free:10,personal:"unlimited",student:"unlimited",plus:"unlimited",business:"unlimited",enterprise:"unlimited"},upsellMap:{free:"plus"}})},internal_guests:e=>{let{amount:t,billingData:s,data:{current:i,hasLowGuestLimit:n}}=e;return u({billingData:s,amount:t,current:i,limits:(0,a.gp)({hasLowGuestLimit:n}),upsellMap:{free:"plus",student:"business",personal:"business",plus:"business"}})},non_admin_members:e=>{let{billingData:t}=e;return function(e){let{billingData:t,minimumTier:s}=e;const n=i.zt(t.subscription),o={type:"none"};return(0,a.$V)(n,s)?{type:"available",limit:o}:{type:"upsell",limit:o,upsell:{type:"product",product:s,limit:o}}}({billingData:t,minimumTier:"plus"})}};function l(e){return(0,n.KQ)(o,r,e)}function d(e){return(0,n.$W)(o,r,e)}function c(e){return(0,n.lJ)(o,r,e)}function u(e){let{billingData:t,amount:s,current:n,limits:a,upsellMap:o}=e;const r=i.zt(t.subscription),l=a[r],d={current:n,total:l,type:"cumulative"},c=o[r],u=c?a[c]:void 0;if(l&&("unlimited"===l||s+n<=l))return{type:"available",limit:d};if(c&&u){return{type:"upsell",limit:d,upsell:{type:"product",product:c,limit:{type:"cumulative",current:n,total:u}}}}return{type:"upsell",limit:d,upsell:{type:"contact_sales"}}}function g(e){return((null==e?void 0:e.items)??[]).filter((e=>"sites_custom_hostnames"===i.tw(e))).reduce(((e,t)=>e+t.quantity),0)}}}]);