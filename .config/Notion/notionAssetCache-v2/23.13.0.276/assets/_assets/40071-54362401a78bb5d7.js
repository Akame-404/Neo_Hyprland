"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[40071],{668155:(e,t,o)=>{o.d(t,{Z:()=>a});o(667294);var n=o(709291),i=o(362896),s=o(110906),r=o(785893);const a=function(e){let{collectionViewName:t,collectionViewType:o}=e;return t?(0,r.jsx)(i.Z,{children:t}):"page"===o?(0,r.jsx)(n.FormattedMessage,{id:"database.collectionView.untitledName.untitled",defaultMessage:"Untitled"}):(0,r.jsx)(n.FormattedMessage,{...s.b1[o]})}},240071:(e,t,o)=>{o.d(t,{Z:()=>ae});var n=o(294184),i=o.n(n),s=(o(667294),o(883355)),r=o(815145),a=o(388437),l=o(239132),c=o(780926),d=o(753470),u=o(937612),p=o(709291),m=o(531701),g=o(653965),h=o(137810),f=o(981193),C=o(498834),v=o(547307),M=o(496802),x=o(608055),S=o(210228),y=o(793174),k=o(358564),_=o(668155),T=o(566890),b=o(466213),j=o(296994),D=o(128651),E=o(119037),O=o(730459),N=o(843250),w=o(484210),I=o(433929),A=o(460709),P=o(98742),L=o(425498),F=o(117031),Z=o(223196),R=o(80444),V=o(61766),H=o(319385),U=o(896049),B=o(206258),G=o(224736),z=o(693405),K=o(231945),q=o(661519),W=o(973420),Y=o(478140),J=o(828992),X=o(632163),Q=o(731278),$=o(776798),ee=o(672495),te=o(526388),oe=o(942402),ne=o(38933),ie=o(785893);const se=(0,p.defineMessages)({emptyPageTitle:{defaultMessage:"Empty",id:"database.templatePicker.emptyPageTitle"}});class re extends s.Z{constructor(){super(...arguments),this.storeTypes={mouseStore:D.Z,buttonPopupStore:V.Z},this.allActionDependenciesLoadedStore=this.createComputedStore((()=>{const{templateStore:e}=this.props;if(!e)return!1;const t=e.getAutomationPointer();return!!t&&(0,k.k)(e,t)})),this.renderActionMenuPopup=e=>{const{device:t}=this.environment,{templateStore:o}=this.props,n=!!o&&(0,E.J5S)({environment:this.environment,blocks:[o],publicEditMode:void 0}),i=null==o?void 0:o.getAutomationStore(),s=null!=i&&i.isActive()?null==i?void 0:i.getRecurrence():void 0,r=this.canEditContentOnlyStore.state,m=this.cannotEditRecurrenceStore.state,h=function(e){const{templateNestingExceedsMaxDepth:t,immediateAncestorRecurrenceType:o,ancestorHasDailyTemplate:n,automationStore:i,environment:s}=e;if(!H.default.checkGate({gateName:"recurrence_queue_task_improvements"}))return;const r="disabled_duplication"===(null==i?void 0:i.getStatus());if(r&&null!=i&&i.getAlive())return(0,ie.jsx)(p.FormattedMessage,{defaultMessage:"This repeating template was turned off. <inlinelink>Turn on</inlinelink> with the same settings.",id:"database.templatePickerItem.actionMenu.nestedTemplateExplanationCaptionDisabledDuringDuplication",values:{inlinelink:e=>(0,ie.jsx)(oe.Z,{external:!1,color:"notion-link-blue",hoverColor:"blue",onClick:()=>{!async function(e,t){if(!t)return;const{automationActions:o}=await y._1.load();S.createAndCommit({userAction:"CollectionTemplatePickerItem.setAutomationStatusToActive",environment:e,perform:n=>o.enableAutomation({automationStore:t,environment:e,transaction:n})})}(s,i)},children:e})}});if(n)return(0,ie.jsx)(p.FormattedMessage,{defaultMessage:"It already gets created daily from another repeating template.",id:"database.templatePickerItem.actionMenu.nestedTemplateExplanationCaptionNestedInDaily"});if(t)return(0,ie.jsx)(p.FormattedMessage,{defaultMessage:"It already gets created automatically from other repeating templates.",id:"database.templatePickerItem.actionMenu.nestedTemplateExplanationCaptionTooDeeplyNested"});if(o)return(0,ie.jsx)(p.FormattedMessage,{defaultMessage:"This template is within another template that repeats every {immediateAncestorRecurrenceType}.",id:"database.templatePickerItem.actionMenu.nestedTemplateExplanationCaptionNestedInTemplate",values:{immediateAncestorRecurrenceType:o}})}({templateNestingExceedsMaxDepth:this.templateNestingExceedsMaxDepthStore.state,immediateAncestorRecurrenceType:this.immediateAncestorRecurrenceTypeStore.state,ancestorHasDailyTemplate:this.ancestorHasDailyTemplateStore.state,automationStore:i,environment:this.environment}),M={key:"section",render:e=>(0,ie.jsx)(ee.Z,{...e}),items:g.oA([this.props.templateStore&&!r&&n&&(!i||(null==i?void 0:i.isReady()))&&!m&&{key:"repeatControl",render:e=>o&&(0,ie.jsx)(j.qb,{...e,recurrence:s,onChange:async e=>{const{recurrenceActions:t}=await j.FF.recurrence.load();e?t.addRecurrence({environment:this.environment,blockStore:o,recurrence:e}):t.deleteRecurrence({environment:this.environment,blockStore:o})}}),action:()=>function(e,t){O.K4(e,"recurrence_menu_open",{isConfigured:void 0!==t})}(this.environment,this.props.recurrence)},this.props.isOverlay&&!r&&{key:"Set default",render:e=>(0,ie.jsx)(z.Z,{...e,title:(0,ie.jsx)(p.FormattedMessage,{defaultMessage:"Set as default",id:"database.collectionTemplatePickerItem.actionMenu.setAsDefault"}),svg:c.z}),action:()=>this.handleSetAsDefault(e)},this.props.templateStore&&{key:"Edit",render:e=>(0,ie.jsx)(z.Z,{...e,title:n?(0,ie.jsx)(p.FormattedMessage,{defaultMessage:"Edit",id:"database.templatePickerItem.actionMenu.edit"}):(0,ie.jsx)(p.FormattedMessage,{defaultMessage:"View",id:"database.templatePickerItem.actionMenu.view"}),svg:n?d.H:l.c}),action:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleEdit},this.props.templateStore&&!r&&n&&{key:"Duplicate",render:e=>(0,ie.jsx)(z.Z,{...e,title:(0,ie.jsx)(p.FormattedMessage,{defaultMessage:"Duplicate",id:"database.templatePickerItem.actionMenu.duplicate"}),svg:a.a}),action:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleDuplicate},this.props.templateStore&&!r&&n&&{key:"Delete",render:e=>(0,ie.jsx)(z.Z,{...e,title:(0,ie.jsx)(p.FormattedMessage,{defaultMessage:"Delete",id:"database.templatePickerItem.actionMenu.delete"}),svg:u.y}),action:n?()=>async function(e,t,o){if(!o)return;if(!(await v.confirmUserAction({message:(0,ie.jsx)(p.FormattedMessage,{defaultMessage:"Are you sure you would like to delete this template?",id:"database.confirmDialog.templatePickerItem.deleteMessage"}),acceptLabel:(0,ie.jsx)(p.FormattedMessage,{defaultMessage:"Delete",id:"database.confirmDialog.templatePickerItem.deleteButton.label"})})))return;S.createAndCommit({userAction:"CollectionTemplatePickerItem.handleDelete",environment:e,perform:e=>C.R5({collectionStore:t,templateStore:o,transaction:e})}),f.sY(e,{template_action:"delete"})}(this.environment,this.props.collectionStore,this.props.templateStore):()=>{}},(m||h)&&{key:"nestedTemplateExplanation",render:e=>(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(q.Z,{size:12}),(0,ie.jsx)(J.Z,{...e,style:{padding:2},titleStyle:this.nestingExplanationMenuItemTitleStyle,title:le({cannotAddRecurrenceToTemplate:m}),captionStyle:this.nestingExplanationMenuItemCaptionStyle,caption:h})]}),action:()=>{}}])};let x;return x=t.isMobile?{menuType:A.og.ActionSheet}:{menuType:A.og.Popup,width:230},(0,ie.jsx)(Y.Z,{...x,children:(0,ie.jsx)(X.Z,{type:X.i.Vertical,initialFocus:void 0,sections:[M]})})},this.nestingExplanationMenuItemTitleStyle={whiteSpace:"normal",fontWeight:h.Z.fontWeight.medium,fontSize:h.Z.fontSize.UISmall.desktop},this.nestingExplanationMenuItemCaptionStyle={whiteSpace:"normal",color:m.ZP.lightTextColor,fontWeight:h.Z.fontWeight.regular,fontSize:h.Z.fontSize.UISmall.desktop},this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleEdit=()=>function(e,t,o,n,i){if(!o)return;null==n||n(),ce(o,e,i),t.reset(),f.sY(e,{template_action:"edit"})}(this.environment,this.stores.buttonPopupStore,this.props.templateStore,this.props.onCancelClick,this.context.overrideLinkClick),this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleDuplicate=e=>async function(e,t,o,n,i,s,r){if(!i)return;null==s||s();const{recurrenceActions:a}=await j.FF.recurrence.load(),{performResult:l}=S.createAndCommit({userAction:"CollectionTemplatePickerItem.duplicatedStore",environment:t,perform:n=>{const s=C.Zh({environment:t,event:e.event,collectionStore:o,templateStore:i,transaction:n});if(i.getAutomationId()){const e=B.Mz.fromBlockStore(i),o=null==e?void 0:e.getRecurrence();e&&null!=e&&e.isActive()&&o&&a.createRecurrenceInner(n,t,s,o)}return s}});l&&ce(l,t,r);n.reset(),f.sY(t,{template_action:"duplicate"})}(e,this.environment,this.props.collectionStore,this.stores.buttonPopupStore,this.props.templateStore,this.props.onCancelClick,this.context.overrideLinkClick),this.handleSetAsDefault=e=>{var t,o;const{collectionContextStore:n}=this.context,i=null==n?void 0:n.collectionStore(),s=null==n?void 0:n.collectionViewStore();if(!i||null==s||!s.isDefined())return;const r=null!==(t=this.props.templateStore)&&void 0!==t&&t.id?{template_page_id:null===(o=this.props.templateStore)||void 0===o?void 0:o.id}:"empty";v.showDialog({showCancel:!0,keepFocus:!1,message:(0,ie.jsx)(p.FormattedMessage,{id:"database.collectionTemplatePickerItem.setAsDefaultDialog.message",defaultMessage:"<span>Use “{pageName}” as default template when creating new pages?</span>",values:{span:e=>(0,ie.jsx)("span",{children:e}),pageName:this.props.templateStore?(0,ie.jsx)($.Z,{store:this.props.templateStore,style:{display:"inline"}}):I.default.formatMessage(se.emptyPageTitle)}}),items:[{label:(0,ie.jsx)(p.FormattedMessage,{id:"database.collectionTemplatePickerItem.setAsDefaultDialog.setCollection",defaultMessage:"For all views in “{databaseName}”",values:{databaseName:(0,ie.jsx)($.Z,{store:i,style:{display:"inline"}})}}),onAccept:()=>{e.close(),S.createAndCommit({environment:this.environment,userAction:"CollectionTemplatePickerItem.handleSetAsDefault:collection",perform:e=>{M.FH({stores:[i],update:{collection_default_template:r},transaction:e}),M.FH({stores:[s],update:{collection_view_default_template:r},transaction:e})}})}},{label:(0,ie.jsx)(p.FormattedMessage,{id:"database.collectionTemplatePickerItem.setAsDefaultDialog.setCollectionView",defaultMessage:"Only on “{viewName}” view",values:{viewName:(0,ie.jsx)(_.Z,{collectionViewName:s.getName(),collectionViewType:s.getType()})}}),onAccept:()=>{e.close(),S.createAndCommit({environment:this.environment,userAction:"CollectionTemplatePickerItem.handleSetAsDefault:collectionView",perform:e=>{M.FH({stores:[s],update:{collection_view_default_template:r},transaction:e})}})}}]})},this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleMouseMove=()=>{return e=this.stores.mouseStore,void(U.Z.state||e.setState({...e.state,mouseEntered:!0}));var e},this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleMouseLeave=()=>{var e;(e=this.stores.mouseStore).setState({...e.state,mouseEntered:!1})},this.getRecordModel=this.props.collectionStore.getRecordModel,this.canEditContentOnlyStore=this.createComputedStore((()=>{var e;return Boolean(null===(e=this.props.collectionStore.getParentBlockStore())||void 0===e?void 0:e.canEditContentOnly())})),this.recurrenceConstraintReadyResultStore=this.createComputedStore((()=>{if(this.props.templateStore){const e=(0,L.w)(this.props.templateStore);if(e.automationStoresReady)return e}})),this.templateNestingExceedsMaxDepthStore=this.createComputedStore((()=>{var e;return Boolean(null===(e=this.recurrenceConstraintReadyResultStore.state)||void 0===e?void 0:e.templateNestingExceedsMaxDepth)})),this.immediateAncestorRecurrenceTypeStore=this.createComputedStore((()=>{var e;return null===(e=this.recurrenceConstraintReadyResultStore.state)||void 0===e?void 0:e.immediateAncestorRecurrenceType})),this.ancestorHasDailyTemplateStore=this.createComputedStore((()=>{var e;return Boolean(null===(e=this.recurrenceConstraintReadyResultStore.state)||void 0===e?void 0:e.ancestorHasDailyTemplate)})),this.cannotEditRecurrenceStore=this.createComputedStore((()=>{if(!H.default.checkGate({gateName:"recurrence_queue_task_improvements"}))return!1;if(!this.props.templateStore)return!1;const e=(0,L.w)(this.props.templateStore);return!e.automationStoresReady||e.violatesConstraint}))}get registries(){return[F.Z]}UNSAFE_willMountOrUpdate(e){super.UNSAFE_willMountOrUpdate(e),this.allActionDependenciesLoadedStore.state}renderComponent(){var e;const{device:t}=this.environment,{templateStore:o,isMobile:n,isOverlay:i,focused:s,locked:r,canConfigureCollection:a,draggable:l,recurrence:c}=this.props,{mouseStore:d,buttonPopupStore:u}=this.stores,p=!o&&!i,m=(!r||r&&!l)&&(a||this.canEditContentOnlyStore.state)&&(d.state.mouseEntered||u.state.open||n||i)&&!p,h=o?(0,ie.jsx)($.Z,{enableHover:!0,showTooltipWhenTruncated:!0,store:o}):I.default.formatMessage(se.emptyPageTitle),f=null==o||null===(e=o.getModel())||void 0===e?void 0:e.getRenderIcon({getRecordModel:this.getRecordModel});return(0,ie.jsx)(ne.Z,{className:N.$ji,type:o?"custom_template":"empty_page",format:i?"collection-overlay":"page-menu-item",locked:r||!a||!l,icon:(0,ie.jsx)(Q.Z,{disabled:!0,icon:f,isEmptyPage:(null==o?void 0:o.isEmptyPage())??!0,size:t.isMobile&&i?24:20,isLarge:!i,style:{...!i&&{pointerEvents:"none",marginRight:10}},pageIconStyle:{...!i&&{fill:this.theme.lightIconColor}}}),title:h,onClick:this.props.onClick,onMouseEnter:this.props.onMouseEnter,right:m&&(0,ie.jsxs)(W.X2,{alignItems:"center",gap:2,children:[c&&o&&(0,ie.jsx)(j.qb,{...g.CE(this.props,["onClick"]),recurrence:c,showTooltip:!0,variant:"icon",onChange:async e=>{const{recurrenceActions:t}=await j.FF.recurrence.load();e?t.addRecurrence({environment:this.environment,blockStore:o,recurrence:e}):t.deleteRecurrence({environment:this.environment,blockStore:o})}}),this.renderActionMenuButton()]}),onMouseMove:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleMouseMove,onMouseLeave:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleMouseLeave,focused:s,isDefault:this.props.isDefault,recurrence:this.props.recurrence,recurrenceDisabled:this.props.recurrenceDisabled})}renderActionMenuButton(){const{isMobile:e,isOverlay:t}=this.props,{buttonPopupStore:o}=this.stores,n=!!this.props.templateStore&&(0,E.J5S)({environment:this.environment,blocks:[this.props.templateStore],publicEditMode:void 0});return(0,ie.jsx)(te.Z,{renderTooltip:()=>n?(0,ie.jsx)(p.FormattedMessage,{defaultMessage:"Edit this template",id:"database.templatePickerItem.editTemplate.tooltip"}):(0,ie.jsx)(p.FormattedMessage,{defaultMessage:"View this template",id:"database.templatePickerItem.viewTemplate.tooltip"}),delayThreshold:300,render:n=>(0,ie.jsx)(K.ZP,{popupType:e?Z.k.SlideUp:Z.k.Popup,placementToOrigin:K.pO.Right,originGap:12,buttonPopupStore:o,renderOrigin:o=>(0,ie.jsx)(G.Z,{className:i()(N.C_N,{[N.JiD]:e||t}),isMobile:e&&t,style:{...!t&&{marginRight:0}},...(0,P.Z)(n,o)}),render:this.renderActionMenuPopup,onClick:()=>{f.sY(this.environment,{template_action:"open_menu"})}})})}}re.displayName="CollectionTemplatePickerItem",re.contextTypes={...s.w,...b.wK,...T.xm};const ae=re;function le(e){const{cannotAddRecurrenceToTemplate:t}=e;if(H.default.checkGate({gateName:"recurrence_queue_task_improvements"}))return t&&(0,ie.jsx)(p.FormattedMessage,{defaultMessage:"This template can't be repeated.",id:"database.templatePickerItem.actionMenu.nestedTemplateExplanationTitle"})}function ce(e,t,o){const{mainEditorCurrentBlockStore:n}=R.default.state;!function(e,t,o){o?o(e):x.c4({environment:t,url:e})}(n?(0,w.ZP)({store:n,peekViewBlockId:e.id,fullyQualified:!1,pageVisitSource:r.tY.PeekOpen}):(0,w.ZP)({store:e,fullyQualified:!1,pageVisitSource:r.tY.LinkInPage}),t,o)}},38933:(e,t,o)=>{o.d(t,{Z:()=>D});var n=o(667294),i=o(800480),s=o(797511),r=o(886628),a=o(724405),l=o(949271),c=o(745238),d=o(785893);const u=(0,c.IU)("repeatDisabled",{viewBox:"0 0 16 14",svg:(0,d.jsxs)("svg",{children:[(0,d.jsx)("path",{d:"M1.11621 8.32422C0.888346 8.32422 0.69694 8.24674 0.541992 8.0918C0.391602 7.93685 0.316406 7.74772 0.316406 7.52441V6.77246C0.316406 6.08431 0.469076 5.49186 0.774414 4.99512C1.08431 4.49837 1.51953 4.11784 2.08008 3.85352C2.64518 3.58464 3.31283 3.4502 4.08301 3.4502H9.23047V1.95312C9.23047 1.76628 9.28288 1.62272 9.3877 1.52246C9.49251 1.41764 9.63607 1.36523 9.81836 1.36523C9.90495 1.36523 9.9847 1.37891 10.0576 1.40625C10.1305 1.43359 10.1966 1.47233 10.2559 1.52246L13.0107 3.83301C13.1566 3.9515 13.2272 4.09277 13.2227 4.25684C13.2227 4.4209 13.152 4.56217 13.0107 4.68066L10.2559 6.99121C10.1966 7.03678 10.1305 7.07552 10.0576 7.10742C9.9847 7.13477 9.90495 7.14844 9.81836 7.14844C9.63607 7.14844 9.49251 7.09603 9.3877 6.99121C9.28288 6.88639 9.23047 6.74284 9.23047 6.56055V5.00195H3.98047C3.34245 5.00195 2.83659 5.17741 2.46289 5.52832C2.09375 5.87923 1.90918 6.35319 1.90918 6.9502V7.52441C1.90918 7.74772 1.83171 7.93685 1.67676 8.0918C1.52181 8.24674 1.33496 8.32422 1.11621 8.32422ZM14.8906 7.54492C15.1094 7.54492 15.2962 7.6224 15.4512 7.77734C15.6061 7.92773 15.6836 8.11686 15.6836 8.34473V9.09668C15.6836 9.78483 15.5286 10.3773 15.2188 10.874C14.9134 11.3708 14.4782 11.7536 13.9131 12.0225C13.348 12.2868 12.6803 12.4189 11.9102 12.4189H6.7627V13.9229C6.7627 14.1051 6.71029 14.2464 6.60547 14.3467C6.50521 14.4515 6.36393 14.5039 6.18164 14.5039C6.09505 14.5039 6.01302 14.4902 5.93555 14.4629C5.86263 14.4355 5.79655 14.3968 5.7373 14.3467L2.98242 12.0361C2.84115 11.9222 2.77051 11.7832 2.77051 11.6191C2.77051 11.4505 2.84115 11.307 2.98242 11.1885L5.7373 8.87793C5.79655 8.8278 5.86263 8.78906 5.93555 8.76172C6.01302 8.73438 6.09505 8.7207 6.18164 8.7207C6.36393 8.7207 6.50521 8.77311 6.60547 8.87793C6.71029 8.97819 6.7627 9.12174 6.7627 9.30859V10.8604H12.0127C12.6553 10.8604 13.1611 10.6872 13.5303 10.3408C13.904 9.98991 14.0908 9.51595 14.0908 8.91895V8.34473C14.0908 8.11686 14.166 7.92773 14.3164 7.77734C14.4714 7.6224 14.6628 7.54492 14.8906 7.54492Z",fill:"#C7C6C4"}),(0,d.jsx)("path",{d:"M4 2L12 14",stroke:"white",strokeWidth:"3",strokeLinecap:"round"}),(0,d.jsx)("path",{d:"M4 2L12 14",stroke:"#C7C6C4",strokeLinecap:"round"})]})});var p=o(709291),m=o(531701),g=o(137810),h=o(292595),f=o(237181),C=o(80444),v=o(319385);(0,h.exposeDebugValue)("resetDictationTooltip",(e=>{const t=C.default.state.currentUserSettingsStore;t&&f.B1({environment:e,userSettingsStore:t,dismissed:!1})}));var M=o(319124),x=o(825464),S=o(552689),y=o(164921),k=o(552275),_=o(973420),T=o(828451),b=o(526388),j=o(481415);const D=function(e){let{format:t,className:o,icon:n,title:i,isDefault:s,recurrence:r,recurrenceDisabled:a,right:l,focused:c,onClick:u,onMouseMove:p,onMouseEnter:m,onMouseLeave:g,locked:h,type:f}=e;return"collection-overlay"===t?(0,d.jsx)(O,{className:o,icon:n,format:t,title:i,isDefault:s,recurrence:r,recurrenceDisabled:a,right:l,focused:c,onClick:u,onMouseMove:p,onMouseEnter:m,onMouseLeave:g,locked:h,type:f}):"phone-modal"===t?(0,d.jsx)(N,{icon:n,format:t,title:i,isDefault:s,recurrence:r,focused:c,onClick:u}):"experimental-new-page"===t?"dictation"===f?(0,d.jsx)(F,{focused:c,onClick:u,onMouseMove:p,onMouseEnter:m,onMouseLeave:g,icon:n,title:i,type:f}):(0,d.jsx)(P,{focused:c,onClick:u,onMouseMove:p,onMouseEnter:m,onMouseLeave:g,icon:n,title:i,type:f}):"experimental-new-page-submenu"===t?(0,d.jsx)(L,{focused:c,onClick:u,onMouseMove:p,onMouseEnter:m,onMouseLeave:g,icon:n,title:i}):(0,d.jsx)(I,{focused:c,onClick:u,onMouseMove:p,onMouseEnter:m,onMouseLeave:g,icon:n,format:t,title:i,isDefault:s,recurrence:r,recurrenceDisabled:a,right:l})};function E(e){let{format:t,title:o,isDefault:n,recurrenceDisabled:i}=e;const s=(0,a.Fg)(),l=(0,r.VK)((()=>v.default.checkGate({gateName:"recurrence_queue_task_improvements"})),[]);return"collection-overlay"!==t?(0,d.jsx)(d.Fragment,{children:o}):(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o,(0,d.jsxs)("span",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n&&(0,d.jsx)("span",{style:{fontSize:12,fontWeight:g.Z.fontWeight.medium,color:s.mediumTextColor},children:(0,d.jsx)(p.FormattedMessage,{defaultMessage:"DEFAULT",id:"database.templatePickerMenuItem.default"})}),i&&l&&u({width:14,height:12.25,color:m.ZP.lightIconColor,marginLeft:8})]})]})}function O(e){let{className:t,icon:o,format:n,title:s,isDefault:r,recurrence:a,recurrenceDisabled:l,right:c,focused:u,onClick:p,onMouseMove:m,onMouseEnter:g,onMouseLeave:h,locked:f,type:C}=e;const v=(0,i.O7)(),{device:M}=v;return(0,d.jsx)(k.Z,{className:t,icon:o,title:(0,d.jsx)(E,{format:n,title:s,isDefault:r,recurrence:a,recurrenceDisabled:l}),right:c,focused:u,onClick:p,onMouseMove:m,onMouseEnter:g,onMouseLeave:h,showDragHandle:!M.isMobile&&!f,dragHandleDisabled:"empty_page"===C})}function N(e){let{icon:t,format:o,title:n,isDefault:i,recurrence:s,focused:r,onClick:a}=e;return(0,d.jsx)(k.Z,{icon:(0,d.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24},children:t}),title:(0,d.jsx)(E,{format:o,title:n,isDefault:i,recurrence:s}),focused:r,onClick:a,showDragHandle:!1})}function w(e,t,o){const{device:n}=e;return{...l.ZD,display:"flex",alignItems:"center",flexGrow:1,height:n.isMobile?36:32,fontSize:16,borderRadius:4,paddingLeft:8,marginBottom:2,color:o?t.mediumTextColor:t.lightTextColor}}function I(e){let{focused:t,onClick:o,onMouseMove:n,onMouseEnter:l,onMouseLeave:c,icon:u,format:p,title:m,isDefault:g,recurrence:h,recurrenceDisabled:f,right:C}=e;const v=(0,a.Fg)(),x=(0,i.O7)(),S=(0,s.l)(),k=(0,r.VK)((()=>{const e=null==S?void 0:S.publicEditModeStore.state;return(0,M.GD)(e)}),[S]);return(0,d.jsxs)(y.Z,{style:w(x,v,k),hovered:t,onClick:o,onMouseMove:n,onMouseEnter:l,onMouseLeave:c,hoveredStyle:{background:v.buttonHoveredBackground,color:v.regularTextColor},pressedStyle:{background:v.buttonPressedBackground},children:[(0,d.jsx)("div",{style:{display:"flex",alignItems:"center",width:24,height:24,marginRight:10},children:u}),(0,d.jsx)(E,{format:p,title:m,isDefault:g,recurrence:h,recurrenceDisabled:f}),C&&(0,d.jsx)("div",{style:{marginLeft:"auto",marginRight:4},children:C})]})}const A=(0,p.defineMessages)({experimentalNewPageDictationItemTooltip:{id:"experimental.new.page.dictation.item.tooltip",defaultMessage:"Use your voice to write"},dictationCalloutHeader:{id:"TemplatePickerMenuItem.dictationCallout.Header",defaultMessage:"Use your voice to write with high-quality speech-to-text"}});function P(e){const{focused:t,onClick:o,onMouseMove:n,onMouseEnter:s,onMouseLeave:l,icon:c,title:u,type:p,tooltipEvents:m}=e,g=(0,i.O7)(),h=(0,r.VK)((()=>!g.device.isMobile&&"control"!==v.default.getEligibleGroup({experimentId:"horizon_1_quick_templates",defaultGroup:"control"})),[g.device]),f=(0,a.yK)((e=>({item:{display:"flex",alignItems:"center",padding:"6px 14px 6px 10px",border:`1px solid ${e.stroke.regular}`,borderRadius:100},moreItem:{width:32,height:32,padding:0,justifyContent:"center"},itemFocused:{background:e.tint.regular},itemFilled:{borderColor:e.tint.regular,background:e.tint.regular},itemFilledAndFocused:{background:e.fill.gray}})),[]),C=(0,r.VK)((()=>{if(!h)return!1;if("ai"===p||"dictation"===p)return!0;return!("on"!==v.default.getEligibleGroup({experimentId:"horizon_1_templates_above_fold",defaultGroup:"control"}))&&"templates"===p}),[h,p]),M=h&&"more"===p;return(0,d.jsx)("div",{onClick:o,onMouseMove:n,onMouseEnter:s,onMouseLeave:l,...m||{},style:{...f.item,...M?f.moreItem:{},...C?f.itemFilled:{},...t?f.itemFocused:{},...C&&t?f.itemFilledAndFocused:{}},children:(0,d.jsxs)(_.X2,{gap:4,alignItems:"center",children:[c,u]})})}function L(e){const{focused:t,onClick:o,onMouseMove:n,onMouseEnter:i,onMouseLeave:s,icon:r,title:l}=e,c=(0,a.yK)((e=>({item:{display:"flex",alignItems:"center",padding:"4px 10px 4px 8px"},itemFocused:{background:e.tint.regular}})),[]);return(0,d.jsx)("div",{onClick:o,onMouseMove:n,onMouseEnter:i,onMouseLeave:s,style:{...c.item,...t?c.itemFocused:{}},children:(0,d.jsxs)(_.X2,{gap:8,alignItems:"center",children:[r,l]})})}function F(e){const t=(0,n.useRef)(null),[o,s]=function(){const[e,t]=(0,n.useState)(!1),o=(0,i.O7)(),s=(0,r.VK)((()=>C.default.state.currentUserSettingsStore),[]);return[(0,r.VK)((()=>{const t=v.default.checkGate({gateName:"dictation_new_page_nux"}),o=null==s?void 0:s.getSettings(),n=Boolean(null==o?void 0:o.dismissed_dictation_new_page_nux);return t&&!n&&!e}),[s,e]),(0,n.useCallback)((()=>{s&&(t(!0),f.B1({environment:o,userSettingsStore:s,dismissed:!0}))}),[o,s,t])]}(),l=(0,a.yK)((e=>({tooltipContainer:{display:"flex",flexDirection:"row",gap:"6px",padding:"0px 0",alignItems:"center",marginLeft:"-4px"},badge:{background:e.accentColors.translucentGray[300],color:e.mediumInvertedTextColor,marginLeft:0,width:"fit-content"}})),[]);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(T.g,{shouldShow:o,calloutId:"dictation_new_page_origin_element_tooltip",children:(0,d.jsx)(j.U,{style:{width:200},pointerLength:25,pointerPosition:"50%",origin:t,placementToOrigin:"top",alignmentToOrigin:x.v.Center,header:(0,d.jsx)(S.Z,{style:l.badge}),content:(0,d.jsx)(p.FormattedMessage,{...A.dictationCalloutHeader}),shouldDismissUponOutsideClick:!0,onCloseClick:s})}),(0,d.jsx)(b.Z,{disableTooltip:o,renderTooltip:()=>(0,d.jsxs)("div",{style:l.tooltipContainer,children:[(0,d.jsx)(S.Z,{style:l.badge}),(0,d.jsx)(p.FormattedMessage,{...A.experimentalNewPageDictationItemTooltip})]}),originGap:6,placement:x.u.Top,render:o=>(0,d.jsx)("div",{ref:t,children:(0,d.jsx)(P,{...e,tooltipEvents:o})})})]})}},117031:(e,t,o)=>{o.d(t,{Z:()=>s});var n=o(535431);class i extends n.Z{findCollectionTemplatePickerItemFromStore(e){if(e)return this.find((t=>t.props.templateStore===e))}}const s=new i},753470:(e,t,o)=>{o.d(t,{H:()=>s});o(667294);var n=o(745238),i=o(785893);const s=(0,n.IU)("rename",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M14.7881 2.5752L15.3008 2.04199C15.5605 1.76855 15.5742 1.39941 15.3213 1.13965L15.1436 0.955078C14.9111 0.722656 14.5283 0.763672 14.2754 1.00977L13.749 1.5293L14.7881 2.5752ZM6.68066 9.87598L8.0752 9.28809L14.2891 3.06738L13.25 2.03516L7.03613 8.25586L6.4209 9.60254C6.35254 9.75977 6.52344 9.9375 6.68066 9.87598ZM4.09668 14.4355H12.0674C13.373 14.4355 14.1387 13.6768 14.1387 12.2207V4.99512L12.7988 6.33496V12.1045C12.7988 12.7676 12.4434 13.1025 11.9854 13.1025H4.17871C3.54297 13.1025 3.19434 12.7676 3.19434 12.1045V4.49609C3.19434 3.83301 3.54297 3.49805 4.17871 3.49805H10.0234L11.3633 2.1582H4.09668C2.62695 2.1582 1.85449 2.91699 1.85449 4.37988V12.2207C1.85449 13.6836 2.62695 14.4355 4.09668 14.4355Z"})})}}]);