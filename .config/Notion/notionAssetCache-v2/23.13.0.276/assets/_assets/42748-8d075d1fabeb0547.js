"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[42748],{841883:(e,t,r)=>{r.d(t,{Z:()=>Z});r(757658);var o=r(667294),i=r(158573),n=r(709291),l=r(846010),a=r(279131),p=r(487167),s=r(65091),c=r(701302),d=r(800480),u=r(886628),y=r(399036),g=r(653965),h=r(551365),S=r(110906),m=r(492650),P=r(566890),f=r(523864),v=r(278030),x=r(13654),b=r(724405),C=r(180951),k=r(842875),w=r(747453),I=r(433929),j=r(401018),M=r(4827),O=r(552275),R=r(279954),T=r(785893);function B(e){const{property:t,store:r,disabled:i,canConfigureCollection:l,onTab:a,onUntab:p,schema:s,blockPropertyValueOverlayStore:c,collectionStore:y,pagePropertiesStore:g}=e,S=(0,d.O7)(),{device:m,currentUser:f}=S,x=(0,b.Fg)(),B=(0,P.DK)(),_=s[t],A=(0,b.yK)((()=>({propertyOuter:{display:"flex",alignItems:"left",marginLeft:4,height:"100%",flex:"auto",flexDirection:"column",minWidth:0},property:{display:"flex",alignItems:"center",marginLeft:4,height:"100%",flex:"auto",minWidth:0},addPageButton:{fontSize:14,minHeight:j.wI,color:x.lightTextColor,background:void 0,boxShadow:void 0}})),[x.lightTextColor]),V=(0,o.useCallback)((()=>{g.setState({...g.state,hoveredProperty:e.property})}),[e.property,g]),Z=(0,o.useCallback)((()=>{g.setState({...g.state,hoveredProperty:void 0})}),[g]),E=(0,o.useCallback)((()=>{h.bA({environment:S,blockPropertyValueOverlayStore:c,store:r,property:t,format:v.C.Page,collectionContextStore:B})}),[S,c,r,t,B]),H=(0,u.VK)((()=>m.isMobile&&!i&&"relation"===(null==_?void 0:_.type)&&r.isDefined()&&!C.wV({block:r.getModel(),property:t,schema:s,getRecordModel:r.getRecordModel,userId:f.id,userTimeZone:(0,k.r)(),intl:I.default.getIntl()})),[f.id,m.isMobile,i,t,_,s,r]);return(0,T.jsx)("div",{role:"cell",style:A.propertyOuter,children:(0,T.jsxs)(R.Z,{store:r,analyticsName:"page_property",children:[(0,T.jsx)("div",{style:A.property,onMouseMove:V,onMouseLeave:Z,children:(0,T.jsx)(M.Z,{store:r,property:t,locked:!l,disabled:i,format:v.C.Page,onTab:a,onUntab:p,tableWrap:!1,blockPropertyValueOverlayStore:c,onOpenProperty:E,collectionStore:y})},t),H&&(0,T.jsx)(O.Z,{focused:!1,icon:(0,w.R)({width:14,fill:x.lightIconColor}),buttonStyle:{marginRight:0,width:"calc(100% - 4px)"},style:A.addPageButton,title:(0,T.jsx)(n.FormattedMessage,{id:"pagePropertyRowValue.addRelationButtonMessage",defaultMessage:"Add page"}),onClick:E})]})})}const _=o.memo(B);function A(e){const{schema:t,format:r,store:i,collectionStore:n,disabled:l,locked:a,blockPropertyValueOverlayStore:s,isInPeekRenderer:y,property:b,mergedProperties:C,dragHandleStyle:k,hideDragHandle:w,disablePropertyName:I,opacity:j,pagePropertiesStore:M}=e,O=(0,o.useId)(),R=(0,d.O7)(),B=(0,P.DK)(),A=(0,p.vg)(n),Z=(0,u.VK)((()=>(0,S.p1)(n)),[n]),E=(0,o.useCallback)((()=>{const e=s.state;if(!e.isOpen)return;const r=C,o=r.findIndex((t=>t.property===e.property)),n=r.find(((e,r)=>r>o&&V(t,e.property)))||r.find(((e,r)=>V(t,e.property)));n&&c.default.afterNextFlush((()=>{h.bA({environment:R,blockPropertyValueOverlayStore:s,store:i,property:n.property,format:v.C.Page,collectionContextStore:B})})),h.xv({environment:R,blockPropertyValueOverlayStore:s})}),[s,B,R,C,t,i]),H=(0,o.useCallback)((()=>{const e=s.state;if(!e.isOpen)return;const r=C,o=r.findIndex((t=>t.property===e.property)),n=g.dF(r,((e,r)=>r<o&&V(t,e.property)))||g.dF(r,((e,r)=>V(t,e.property)));n&&c.default.afterNextFlush((()=>{h.bA({environment:R,blockPropertyValueOverlayStore:s,store:i,property:n.property,format:v.C.Page,collectionContextStore:B})})),h.xv({environment:R,blockPropertyValueOverlayStore:s})}),[s,B,R,C,t,i]),N=(0,u.VK)((()=>(0,m.fg)(R,i)),[R,i]);return(0,T.jsxs)("div",{role:"row","aria-labelledby":O,style:{display:"flex",paddingBottom:4,width:"100%",opacity:j??1},children:[(0,T.jsx)(x.Z,{schema:t,format:r,property:b,collectionStore:n,pagePropertiesStore:M,disabled:Boolean(l||I),locked:a||Z,canConfigureCollection:A,isInPeekRenderer:y,dragHandleStyle:k,hideDragHandle:w,propertyNameAriaId:O,blockStore:i}),(0,T.jsx)(_,{schema:t,property:b,store:i,collectionStore:n,pagePropertiesStore:M,disabled:l||a,canConfigureCollection:A,onTab:E,onUntab:H,blockPropertyValueOverlayStore:s}),(0,T.jsx)(f.Z,{store:i,property_id:b,hideContent:N})]},b)}function V(e,t){const r=e[t];return Boolean(r&&!y.uk.includes(r.type))}function Z(e){const{disabled:t,locked:r,collectionStore:c,format:d,mergedProperties:u,propertyGroupId:y,showHiddenProperties:g,hideDragHandle:h,propertySearchState:S,pagePropertiesStore:m}=e,P=(0,n.useIntl)(),f=u,v=(0,p.vg)(c),x=null!=S&&S.open&&S.query.length>0?S.query:void 0,b=(0,p.G_)({collectionStore:c,format:d}),C=(0,p.r$)({collectionStore:c,format:d,propertyGroupId:y}),k=(0,l.y)(),w=y&&k?C:b,I=P.formatMessage({id:"pageProperties.tableLabel",defaultMessage:"Page properties"}),j=function(e){const{properties:t,pagePropertyQuery:r}=e;return(0,o.useMemo)((()=>r?(0,i.ZP)(r,t,(e=>e.name)).map((e=>e.property)):[]),[t,r])}({properties:f,pagePropertyQuery:x}),M=function(e){const{properties:t,showHiddenProperties:r}=e;return(0,o.useMemo)((()=>{const e=[];let o=0;return t.forEach((t=>{if("section"!==t.visibility)return r?(e.splice(o,0,t.property),void(o+=1)):void("hide"!==t.visibility&&("hide_if_empty"!==t.visibility||t.hasValue)?(e.splice(o,0,t.property),o+=1):e.push(t.property));e.push(t.property)})),{all:e,visible:e.slice(0,o)}}),[t,r])}({properties:f,showHiddenProperties:g}),O=(0,o.useMemo)((()=>new Set(j)),[j]),R=function(e){const{propertySearch:t,properties:r}=e;return(0,o.useMemo)((()=>{if(t.query||t.open){const e=[],t=Math.min(r.all.length,s.sw.MIN_PROPERTIES_TO_RENDER),o=Math.max(t,r.visible.length),i=r.query.length,n=Math.max(0,o-i),l=r.all.filter((e=>!r.querySet.has(e)));r.query.slice(0,o).forEach((t=>{e.splice(0,0,t)}));for(let r=0;r<n&&r<l.length;r++){const t=l[r];e.splice(r,0,t)}return e}return r.visible}),[t,r])}({properties:{all:M.all,visible:M.visible,query:j,querySet:O},propertySearch:{open:(null==S?void 0:S.open)??!1,query:x}});return t||r||!v||h||x?(0,T.jsx)("div",{role:"table","aria-label":I,style:a.yA,children:R.map(((t,r)=>{const o=void 0===x||O.has(t)?1:.4;return(0,T.jsx)("div",{children:(0,T.jsx)(A,{...e,opacity:o,property:t,pagePropertiesStore:m})},r)}))}):(0,T.jsx)(a.ZP,{role:"table","aria-label":I,direction:"vertical",keys:R,renderKey:t=>{const r=void 0===x||O.has(t)?1:.4;return(0,T.jsx)(A,{...e,opacity:r,property:t,pagePropertiesStore:m})},onDrop:w})}},912867:(e,t,r)=>{r.d(t,{Uv:()=>B,ZP:()=>_});var o=r(667294),i=r(800480),n=r(886628),l=r(724405),a=r(356666),p=r(747453),s=r(709291),c=r(316956),d=r(805149),u=r(413182),y=r(566890),g=r(966603),h=r(98742),S=r(825464),m=r(61766),P=r(400807),f=r(4827),v=r(278030),x=r(623063),b=r(164921),C=r(231945),k=r(301743),w=r(953437),I=r(526388),j=r(13654),M=r(487167),O=r(841883),R=r(65091),T=r(785893);const B=130;function _(e){const{store:t,collectionStore:r,pagePropertiesStore:a,blockPropertyValueOverlayStore:p,compactProperties:s,disabled:c,locked:d,format:u,isInPeekRenderer:g,hiddenProperties:h,rowLength:S,variant:b}=e,C=(0,n.VK)((()=>r.getSchema()),[r]),[k,w]=(0,o.useState)(!1),I=(0,M.vg)(r),O=(0,n.VK)((()=>P.Z.getMode(t)),[t]),R=(0,i.Fy)(),B=(0,n.qz)(void 0,m.Z),_=(0,y.Y$)(),V=(0,l.yK)((()=>({PagePropertiesCompactRow:{display:s.length>S?"grid":"flex",justifyContent:"flex-start",gridTemplateColumns:`repeat(${S}, 1fr)`,columnGap:10,rowGap:4,marginTop:2,marginBottom:6},PagePropertiesPinnedRow:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(130px, max-content))",columnGap:10,rowGap:16,marginTop:14,marginBottom:6}})),[s.length,S]),Z=(0,o.useCallback)((()=>{w(!0)}),[]),E=(0,o.useCallback)((()=>{w(!1)}),[]);return(0,T.jsx)("div",{style:"pinned"===b?V.PagePropertiesPinnedRow:V.PagePropertiesCompactRow,onMouseEnter:Z,onMouseLeave:E,children:s.map(((e,o)=>{const i=o===s.length-1;return(0,T.jsxs)("span",{style:{flexShrink:1,display:i?"flex":void 0},children:[(0,T.jsxs)("span",{style:{flex:1,overflow:"hidden"},children:[(0,T.jsx)(j.Z,{schema:C,format:u,hideIcon:!0,hideDragHandle:!0,property:e.property,blockStore:t,collectionStore:r,pagePropertiesStore:a,disabled:c,locked:d,canConfigureCollection:I&&"suggest"!==O,isInPeekRenderer:g,style:{height:24,width:"100%"}}),(0,T.jsx)(f.Z,{store:t,collectionStore:r,blockPropertyValueOverlayStore:p,property:e.property,format:v.C.CompactPage,disabled:c,locked:d,tableWrap:!1})]}),i&&(0,T.jsx)(x.Z,{isVisible:k||R.isMobile,enterAnimationStyle:{opacity:0},animationStyle:{opacity:1,marginLeft:"auto"},exitAnimationStyle:{opacity:0},render:()=>(0,T.jsx)(A,{onClose:E,hiddenProperties:h,canConfigureCollection:I&&"suggest"!==O&&"pinned"!==b,store:t,collectionStore:r,collectionContextStore:_,blockPropertyValueOverlayStore:p,disabled:c,locked:d,isInPeekRenderer:g,format:u,buttonPopupStore:B,pagePropertiesStore:a,hideDragHandle:"pinned"===b})})]},e.property)}))})}const A=o.memo((function(e){const{hiddenProperties:t,canConfigureCollection:r,collectionStore:y,isInPeekRenderer:m,buttonPopupStore:P,collectionContextStore:f,hideDragHandle:v,overflowButtonWrapperStyle:x,overflowButtonStyle:j,pagePropertiesStore:M}=e,B=(0,i.Fy)(),_=(0,i.O7)(),A=(0,n.VK)((()=>y.getSchema()),[y]),V=(0,l.yK)((e=>({overflowIcon:{width:16,height:16,fill:e.mediumIconColor},pagePropertiesOverflow:{width:"100%",fontSize:14,padding:v?"10px":"10px 10px 10px 28px",maxHeight:500,overflowY:"scroll"},overflowButtonWrapper:{display:"flex",alignItems:"center",paddingBottom:8,...x},overflowButton:{display:"flex",width:32,height:32,borderRadius:4,justifyContent:"center",alignItems:"center",...j}})),[v,x,j]),Z=(0,o.useCallback)((()=>{c.fH({environment:_,collectionContextStore:f,collectionStore:y,isInPeekRenderer:m,onCloseMenu:()=>{P.setState({open:!1})},pagePropertiesStore:M})}),[_,f,M,y,m,P]);return t.length?(0,T.jsx)(C.ZP,{onClose:e.onClose,popupWrapStyle:{width:500},buttonPopupStore:P,popupType:B.isMobile?w.kQ.SlideUp:w.kQ.Popup,render:()=>(0,T.jsx)(k.Z,{debugName:"PagePropertiesCompact",capture:!0,children:(0,T.jsxs)("div",{style:V.pagePropertiesOverflow,children:[(0,T.jsx)(O.Z,{showHiddenProperties:!0,schema:A,mergedProperties:t,format:e.format,store:e.store,collectionStore:e.collectionStore,disabled:e.disabled,locked:e.locked,blockPropertyValueOverlayStore:e.blockPropertyValueOverlayStore,isInPeekRenderer:e.isInPeekRenderer,hideDragHandle:v,pagePropertiesStore:M}),r&&(0,T.jsx)(R.le,{collectionStore:y,pagePropertiesStore:M,isInPeekRenderer:m})]})}),renderOrigin:e=>(0,T.jsx)("div",{style:V.overflowButtonWrapper,children:(0,T.jsx)(I.Z,{renderTooltip:()=>(0,T.jsx)(s.FormattedMessage,{defaultMessage:"{num, plural, one {1 more property} other {{num} more properties}}",id:"database.pageProperties.compact.showMoreTooltip",values:{num:t.length}}),placement:S.u.Bottom,render:t=>(0,T.jsx)(b.Z,{style:V.overflowButton,mobileFeedback:B.isMobile,...(0,h.Z)(e,t),children:(0,a.o)(V.overflowIcon)})})})}):r?(0,T.jsx)("div",{style:V.overflowButtonWrapper,children:(0,T.jsx)(I.Z,{renderTooltip:()=>(0,T.jsx)(s.FormattedMessage,{defaultMessage:"Add a property",id:"database.pageProperties.compact.addPropertyButtonTitle"}),placement:S.u.Bottom,render:t=>(0,T.jsx)(C.ZP,{popupType:_.device.isMobile?w.kQ.SlideUp:w.kQ.Popup,onClose:e.onClose,buttonPopupStore:P,originGap:1,alignmentToOrigin:C.vR.Start,render:()=>(0,T.jsx)(u.PJ,{context:g.HV.TopbarFilterPopup,collectionContextStore:f,collectionSettingsStore:f.settingsStore,hideDesktopHeader:!0}),onClick:Z,onDismiss:()=>{const e=f.settingsStore;d.E3({collectionSettingsStore:e})},renderOrigin:e=>(0,T.jsx)(b.Z,{style:V.overflowButton,mobileFeedback:B.isMobile,...(0,h.Z)(e,t),children:(0,p.R)(V.overflowIcon)})})})}):null}))},65091:(e,t,r)=>{r.d(t,{ZP:()=>T,le:()=>B,sw:()=>Z});r(757658);var o=r(667294),i=r(800480),n=r(886628),l=r(724405),a=r(872787),p=r(849019),s=r(747453),c=r(709291),d=r(137810),u=r(316956),y=r(805149),g=r(413182),h=r(566890),S=r(966603),m=r(212534),P=r(433929),f=r(846010),v=r(61766),x=r(319385),b=r(623063),C=r(164921),k=r(231945),w=r(573063),I=r(436488),j=r(374194),M=r(953437),O=r(487167),R=r(785893);function T(e){const{locked:t,disabled:r,collectionStore:o,mergedProperties:i,schema:l,isCompact:a,propertySearchState:p,setPropertySearchState:s,pagePropertiesStore:c}=e,d=(0,n.VK)((()=>c.state.forceShowProperties),[c]),u=L(i,l,a),y=(0,O.vg)(o),g=[];return(d||0===u)&&(!t&&!r&&y)&&g.push((0,R.jsx)(B,{...e},"add-property")),u>0&&(d?g.push((0,R.jsx)(A,{mergedProperties:i,schema:l,isCompact:a,propertySearchState:p,setPropertySearchState:s,pagePropertiesStore:c},"hide-properties")):g.push((0,R.jsx)(_,{mergedProperties:i,schema:l,isCompact:a,propertySearchState:p,setPropertySearchState:s,pagePropertiesStore:c},"show-more"))),(0,R.jsx)(R.Fragment,{children:g})}function B(e){const{collectionStore:t,isInPeekRenderer:r,pagePropertiesStore:l,propertyGroupId:a}=e,p=(0,h.Y$)(),d=(0,i.O7)(),m=(0,n.qz)(void 0,v.Z),P=N(),x=(0,n.VK)((()=>p.settingsStore.state.open),[p.settingsStore]);(0,o.useEffect)((()=>{x||m.setState({...m.state,open:!1})}),[m,x]);const b=(0,f.y)(),w=(0,o.useCallback)((()=>{u.fH({environment:d,propertyGroupId:b?a:void 0,collectionContextStore:p,pagePropertiesStore:l,collectionStore:t,isInPeekRenderer:r,onCloseMenu:()=>{m.setState({open:!1})}})}),[d,b,a,p,l,t,r,m]);return(0,n.VK)((()=>p.permissionScopesStore.state),[p]).isExternallyImportedAndSyncedCollection?null:(0,R.jsx)("div",{style:{display:"flex"},children:(0,R.jsx)("div",{style:P.AddOrToggleOrSearchContainerStyle,children:(0,R.jsx)(k.ZP,{popupType:d.device.isMobile?M.kQ.SlideUp:M.kQ.Popup,buttonPopupStore:m,originGap:1,alignmentToOrigin:k.vR.Start,render:()=>(0,R.jsx)(g.PJ,{context:S.HV.TopbarFilterPopup,collectionContextStore:p,collectionSettingsStore:p.settingsStore,hideDesktopHeader:!0}),onClick:w,onClose:()=>{const e=p.settingsStore;y.E3({collectionSettingsStore:e})},renderOrigin:t=>(0,R.jsxs)(C.Z,{style:{...P.AddOrTogglePropertyButtonStyle,...e.style},...t,children:[(0,s.R)(P.ActionPropertyButtonIconStyle),(0,R.jsx)("div",{style:P.AddPropertyButtonTitleStyle,children:(0,R.jsx)(c.FormattedMessage,{defaultMessage:"Add a property",id:"database.pageProperties.addPropertyButtonTitle"})})]})})})})}function _(e){const{mergedProperties:t,schema:r,isCompact:i,propertySearchState:n,setPropertySearchState:l,pagePropertiesStore:p}=e,s=N(n.open),d=L(t,r,i),u=(0,o.useCallback)((e=>{e.stopPropagation(),p.setState({...p.state,forceShowProperties:!0})}),[p]),y=!n.hide&&t.length>=Z.MIN_PROPERTIES_TO_ENABLE_SEARCH;return(0,R.jsxs)("div",{style:{display:"flex"},children:[y?(0,R.jsx)(E,{setPropertySearchState:l}):null,(0,R.jsxs)("div",{style:s.AddOrToggleOrSearchContainerStyle,children:[(0,R.jsxs)(C.Z,{style:{...s.AddOrTogglePropertyButtonStyle,...e.style},onClick:u,children:[(0,a.Y)(s.ActionPropertyButtonIconStyle),(0,R.jsx)("div",{style:s.AddPropertyButtonTitleStyle,children:(0,R.jsx)(c.FormattedMessage,{defaultMessage:"{num, plural, one {1 more property} other {{num} more properties}}",id:"database.pageProperties.showMorePropertyTitle",values:{num:d}})})]},"show-more"),(0,R.jsx)(H,{propertySearchState:n,setPropertySearchState:l})]})]})}function A(e){const{mergedProperties:t,schema:r,isCompact:i,propertySearchState:n,setPropertySearchState:l,pagePropertiesStore:p}=e,s=L(t,r,i),d=N(n.open),u=(0,o.useCallback)((e=>{e.stopPropagation(),p.setState({...p.state,forceShowProperties:!1})}),[p]),y=!n.hide&&t.length>=Z.MIN_PROPERTIES_TO_ENABLE_SEARCH;return(0,R.jsxs)("div",{style:{display:"flex"},children:[y?(0,R.jsx)(E,{setPropertySearchState:l}):null,(0,R.jsxs)("div",{style:d.AddOrToggleOrSearchContainerStyle,children:[(0,R.jsxs)(C.Z,{style:{...d.AddOrTogglePropertyButtonStyle,...e.style},onClick:u,children:[(0,a.Y)({...d.ActionPropertyButtonIconStyle,transform:"rotate(180deg)"}),(0,R.jsx)("div",{style:d.AddPropertyButtonTitleStyle,children:(0,R.jsx)(c.FormattedMessage,{defaultMessage:"{num, plural, one {Hide 1 property} other {Hide {num} properties}}",id:"database.pageProperties.hidePropertyTitle",values:{num:s}})})]},"hide-properties"),(0,R.jsx)(H,{propertySearchState:n,setPropertySearchState:l})]})]})}const V=(0,c.defineMessages)({propertySearchInputPlaceholder:{defaultMessage:"Search properties...",id:"databasePage.propertySearchInputPlaceholder"}}),Z={MIN_PROPERTIES_TO_ENABLE_SEARCH:8,MIN_PROPERTIES_TO_RENDER:3},E=o.memo((function(e){const{setPropertySearchState:t}=e,r=(0,l.yK)((e=>({SearchPropertiesButtonIconStyle:{width:14,height:void 0,fill:e.lightIconColor},SearchPropertiesButtonStyle:{display:"flex",alignItems:"center",fontSize:14,paddingTop:6,paddingBottom:6,paddingLeft:2,marginLeft:2,marginRight:2,height:34,width:24,color:e.lightIconColor,fontWeight:d.Z.fontWeight.regular,lineHeight:1,borderRadius:4}})),[]),i=(0,n.VK)((()=>x.default.checkGate({gateName:"page_property_search"})),[]),a=(0,o.useCallback)((()=>{t((e=>({...e,open:!e.open})))}),[t]);return i?(0,R.jsx)(w.Z,{ariaLabel:P.default.formatMessage(V.propertySearchInputPlaceholder),icon:p.e,iconStyle:r.SearchPropertiesButtonIconStyle,style:r.SearchPropertiesButtonStyle,onClick:a}):(0,R.jsx)(R.Fragment,{})})),H=o.memo((function(e){const{propertySearchState:t,setPropertySearchState:r}=e,n=(0,i.O7)(),a=(0,l.yK)((e=>{const{device:t}=n;return{SearchPropertiesInputContainerStyle:{gridRow:1,gridColumn:1,minWidth:t.isMobile?128:168},SearchPropertiesInputStyle:{fontSize:14,lineHeight:1,paddingRight:4,color:e.regularTextColor,height:34}}}),[n]),p=t.open,s=t.query,c=(0,o.useCallback)((()=>{r({...t,open:!1,query:""})}),[r,t]),d=(0,o.useCallback)((e=>{27===e.keyCode&&r({...t,open:!1,query:""})}),[r,t]),u=(0,o.useCallback)((e=>{r({...t,open:!0,query:e.target.value})}),[r,t]);return(0,R.jsx)(b.Z,{isVisible:p,animationStyle:{width:150,opacity:1},enterAnimationStyle:{width:0,opacity:0},exitAnimationStyle:{width:0,opacity:0},render:()=>(0,R.jsx)(I.Z,{capture:p,allowEsc:!0,render:e=>(0,R.jsx)("div",{...e,style:a.SearchPropertiesInputContainerStyle,children:(0,R.jsx)("div",{style:{display:"flex",alignItems:"center",overflow:"hidden"},children:(0,R.jsx)(j.Z,{style:a.SearchPropertiesInputStyle,format:j.B.Transparent,value:s,onChange:u,placeholder:P.default.formatMessage(V.propertySearchInputPlaceholder),focusInitial:p,forceShowClearButton:!0,onCancel:c,onClick:m.Wi,onClearButtonClick:c,onKeyDown:d})})})})})}));function N(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=(0,i.O7)();return(0,l.yK)((r=>{const{device:o}=t;return{AddOrToggleOrSearchContainerStyle:{display:"grid"},AddOrTogglePropertyButtonStyle:{display:"flex",alignItems:"center",color:r.lightTextColor,borderRadius:4,paddingLeft:6,paddingRight:6,height:34,width:o.isMobile?"100%":"auto",gridColumn:1,gridRow:1,visibility:e?"hidden":"visible"},ActionPropertyButtonIconStyle:{width:16,height:16,marginRight:9,marginTop:1,fill:r.lightIconColor},AddPropertyButtonTitleStyle:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0,lineHeight:"16px"}}}),[t,e])}function L(e,t,r){return(0,o.useMemo)((()=>e.filter((e=>"hide"===e.visibility||"hide_if_empty"===e.visibility&&!e.hasValue)).length),[e])}},487167:(e,t,r)=>{r.d(t,{G_:()=>x,nd:()=>v,r$:()=>b,vg:()=>f});r(21703);var o=r(667294),i=r(800480),n=r(886628),l=r(180951),a=r(406695),p=r(842875),s=r(295519),c=r(3093),d=r(709291),u=r(653965),y=r(496802),g=r(210228),h=r(110906),S=r(123347),m=r(846010),P=r(319385);function f(e){return(0,n.VK)((()=>h.eD({collectionStore:e,collectionViewBlockStore:e.getParentBlockStore(),checkNavigableAncestorLocked:!1})),[e])}function v(e){let{store:t,format:r,schema:u,collectionStore:y,propertyIds:g,propertyGroupId:h}=e;const S=(0,i.O7)(),f=(0,d.useIntl)(),v=(0,m.y)(),x=function(e){let{propertyIds:t,propertyGroupId:r,format:i}=e;const n=(0,m.y)();return(0,o.useMemo)((()=>{const e=t?t.map((e=>({property:e,visible:!0}))):void 0;if(e)return e;if(r&&n){const e=null==i?void 0:i.property_groups;if(!e)return[];const t=(0,c.vX)({propertyGroups:e,groupId:r});return null!=t&&t.propertyIds?t.propertyIds.map((e=>({property:e,visible:!0}))):[]}return(i.collection_page_properties||[]).filter((e=>{var t;return null===(t=i.collection_page_sections)||void 0===t||!t.some((t=>t.section===e.property&&("inline"===t.visibility||"minimal"===t.visibility)))}))}),[i.collection_page_properties,i.collection_page_sections,null==i?void 0:i.property_groups,n,r,t])}({propertyIds:g,format:r,propertyGroupId:v?h:void 0});return(0,n.VK)((()=>{const e=t.getModel(),o="on"===P.default.getGroup("default-new-page-property-to-hide-when-empty")?(0,s.i)(r,u,void 0,a.j5.Collection):y.getFormat(),i=o&&o.property_visibility;if(i){return x.map((r=>{var o;return{visibility:"show",hasValue:!Boolean(e&&l.wV({block:e,property:r.property,schema:u,getRecordModel:t.getRecordModel,userId:S.currentUser.id,userTimeZone:(0,p.r)(),intl:f})),name:(null===(o=u[r.property])||void 0===o?void 0:o.name)??"",...r,...i.find((e=>e.property===r.property))}}))}return x?x.map((e=>{var r;return{...e,visibility:"show",hasValue:Boolean(t.getPropertyValue(e.property)),name:(null===(r=u[e.property])||void 0===r?void 0:r.name)??""}})):[]}),[t,r,u,y,x,f,S.currentUser.id])}function x(e){let{collectionStore:t,format:r}=e;const n=(0,i.O7)();return(0,o.useCallback)((e=>{const o=r.collection_page_properties||[],i=[...(0,u.oA)(e.map((e=>o.find((t=>t.property===e))))),...o.filter((t=>!e.includes(t.property)))];g.createAndCommit({userAction:"PageProperties.handleReorder",environment:n,perform:e=>{y.FH({stores:[t],update:{collection_page_properties:i},transaction:e})}})}),[t,n,r.collection_page_properties])}function b(e){let{collectionStore:t,format:r,propertyGroupId:n}=e;const l=(0,i.O7)();return(0,o.useCallback)((e=>{if(!n)throw new Error("cannot reorder properties for property group -- no property group id provided");g.createAndCommit({userAction:"PagePropertiesGroup.handleReorder",environment:l,perform:r=>{(0,S.N8)({collectionStore:t,newPartialPropertyIds:e,groupId:n,transaction:r})}})}),[t,l,n])}},846010:(e,t,r)=>{r.d(t,{y:()=>n});var o=r(886628),i=r(319385);function n(){return(0,o.VK)((()=>i.default.checkGate({gateName:"page_layouts"})),[])}},451741:(e,t,r)=>{r.d(t,{NW:()=>l,Qi:()=>i,Rt:()=>o,WO:()=>a,wI:()=>n});let o=function(e){return e[e.SelectedPage=0]="SelectedPage",e[e.SearchPage=1]="SearchPage",e[e.NewPage=2]="NewPage",e}({});const i=4,n=32,l=400,a=20},401018:(e,t,r)=>{r.d(t,{NW:()=>o.NW,Qi:()=>o.Qi,ev:()=>i.ev,wI:()=>o.wI});var o=r(451741),i=r(296994)},872787:(e,t,r)=>{r.d(t,{Y:()=>n});r(667294);var o=r(745238),i=r(785893);const n=(0,o.IU)("chevronDownThin",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M8.004 12a.72.72 0 00.54-.237l6.238-6.487A.735.735 0 0015 4.753c0-.426-.314-.753-.733-.753a.76.76 0 00-.524.213l-5.739 5.955-5.747-5.955A.73.73 0 001.733 4C1.314 4 1 4.327 1 4.753c0 .204.08.384.218.531l6.238 6.479a.751.751 0 00.548.237z"})})},727714:(e,t,r)=>{r.d(t,{N:()=>n});r(667294);var o=r(745238),i=r(785893);const n=(0,o.IU)("link",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M7.69922 10.8945L8.73828 9.84863C7.91797 9.77344 7.34375 9.51367 6.91992 9.08984C5.76465 7.93457 5.76465 6.29395 6.91309 5.14551L9.18262 2.87598C10.3379 1.7207 11.9717 1.7207 13.127 2.87598C14.2891 4.04492 14.2822 5.67188 13.1338 6.82031L11.958 7.99609C12.1768 8.49512 12.2451 9.10352 12.1289 9.62988L14.0908 7.6748C15.7725 6 15.7793 3.62109 14.084 1.92578C12.3887 0.223633 10.0098 0.237305 8.33496 1.91211L5.95605 4.29785C4.28125 5.97266 4.26758 8.35156 5.96289 10.0469C6.36621 10.4434 6.90625 10.7441 7.69922 10.8945ZM8.30078 5.13184L7.26855 6.17773C8.08203 6.25293 8.66309 6.51953 9.08008 6.93652C10.2422 8.09863 10.2422 9.73242 9.08691 10.8809L6.81738 13.1504C5.66211 14.3057 4.03516 14.3057 2.87305 13.1504C1.71094 11.9883 1.71777 10.3545 2.87305 9.20605L4.04199 8.03027C3.83008 7.53125 3.75488 6.92969 3.87109 6.39648L1.91602 8.35156C0.234375 10.0264 0.227539 12.4121 1.92285 14.1074C3.61816 15.8027 5.99707 15.7891 7.67188 14.1143L10.0439 11.7354C11.7256 10.0537 11.7324 7.6748 10.0371 5.98633C9.64062 5.58301 9.10059 5.28223 8.30078 5.13184Z"})})}}]);