"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[51783],{551783:(e,t,n)=>{n.d(t,{Bo:()=>ne,eQ:()=>oe,QG:()=>ue,ol:()=>Se,fn:()=>le,_W:()=>he,vs:()=>Ae,O2:()=>ie,UF:()=>be,Z3:()=>ce,w1:()=>ge,rZ:()=>se,s0:()=>re,GH:()=>pe,hc:()=>me,hD:()=>fe,pk:()=>de,i2:()=>ve,$$:()=>ae,LQ:()=>z,$3:()=>X,y6:()=>te,Tz:()=>j,oQ:()=>ee,Oh:()=>Be});n(21703);var o=n(701302),i=n(427328),a=n(180951),r=n(76233),s=n(211342),l=n(483249),c=n(106404),u=n(536280),d=n(245990),m=n(567060),f=n(628020),p=n(27724),v=n(631781),b=n(742858),S=n(524677),h=n(210228),A=n(353471);var g=n(452423),B=n(384084),M=n(137231),w=n(498724),y=n(898104),C=n(492022),N=n(457819),T=n(18821),_=n(922705),k=n(745162),x=n(224646),O=n(938676),P=n(444534),I=n(905162),Z=n(80444),D=n(798180),E=n(316772),F=n(319385),G=n(803418),H=n(319111),Q=n(619671),R=n(156638),Y=n(155320),K=n(924666),L=n(119037),$=n(268056),U=n(367669),V=n(918514),W=n(273959),q=n(489086);function z(e){const{environment:t}=e,{isMobileNative:n,osVersion:o,isIOS:i}=t.device;return!!n&&(!i||!s.isLessThanVersion(o,[14,0]))}const J=!1;function X(e,t,n){var o;const{NativeMobileActionBarStore:r}=e,s=J||Boolean(null==r?void 0:r.state.enableShouldShowDebugging);if(!function(e,t,n){var o;const{device:r,NativeMobileActionBarStore:s,TabbedRouterStore:l}=e,c=J||Boolean(null==s?void 0:s.state.enableShouldShowDebugging);if(!r.isMobile)return Me(c,"canShowMobileActionBar = false (reason: !device.isMobile)"),!1;if((0,V.__)(e)&&F.default.checkGate({gateName:"mab_consider_navigation_top_page"})){const e=(0,i.w_)(l.state);if("web"!==e.type||"page"!==(0,i._r)(e).route.name)return Me(c,"canShowMobileActionBar = false (reason: top page is not a web page)"),!1}if(Y.default.state.open)return Me(c,"canShowMobileActionBar = false (reason: quickFindOpen)"),!1;if(!r.isMobileNative&&H.Z.state.open)return Me(c,"canShowMobileActionBar = false (reason: !device.isMobileNative && MentionMenuStore.state.open)"),!1;if(r.isMobileNative&&_.ZP.state.enabled)return Me(c,"canShowMobileActionBar = false (reason: !device.isMobileNative && DictationStore.state.open)"),!1;if(K.default.isEditingComment())return Me(c,"canShowMobileActionBar = false (reason: TextSelectionStore.isEditingComment())"),!1;const u=(0,N.RR)(E.default.state),d=null===(o=D.default.getActiveSession())||void 0===o?void 0:o.hasPendingOperations();if(u||d)return Me(c,"canShowMobileActionBar = false (reason: isCompletionsPopupActive || hasPendingEdits)"),!1;if(!Q.Z.state.isOpen&&z({environment:e})&&G.Z.hasOpenPopups())return Me(c,"canShowMobileActionBar = false (reason: !PageTemplateModalStore.state.open && isNativeMobileActionBarAvailable({ environment }) && GlobalPopupStore.hasOpenPopups() > 0)"),!1;if(Q.Z.state.isOpen){var m;const e=Q.Z.state,t=null===(m=e.collectionContextStore)||void 0===m?void 0:m.normalizedSchemaStore.state;if(!t)return Me(c,"canShowMobileActionBar = false (reason: !collectionSchema)"),!1;const n=(0,a.Qm)({schema:t,property:e.property});if(!n||"text"!==n.type||n.ai_inference)return Me(c,"canShowMobileActionBar = false (reason: PageBlockPropertyValueOverlayStore.state.isOpen && propertySchema.type !== text)"),!1}return x.in(e)&&O.sidebarOpenStore.state?(Me(c,"canShowMobileActionBar = false (reason: sidebarHelpers.sidebarIsExpanded(environment) && sidebarOpenStore.get()"),!1):(0,L.ryx)()?!!(0,L.J5S)({environment:e,blocks:[t],publicEditMode:n})||(Me(c,"canShowMobileActionBar = false (reason: !_canEdit)"),!1):(Me(c,"canShowMobileActionBar = false (reason: !currentPageIsNotLocked())"),!1)}(e,t,n))return Me(s,"shouldShowMobileActionBar = false (reason: !canShowMobileActionBar)"),{canShow:!1,canShowNativeBar:!1,shouldShow:!1};const l=z({environment:e});if(r&&null!==r.state.menuType&&!(0,f.JE)())return Me(s,"shouldShowMobileActionBar = true (reason: NativeMobileActionBarStore && NativeMobileActionBarStore.state.menuType !== null"),{canShow:!0,canShowNativeBar:l,shouldShow:!0};const c=K.default.state;if("editing"!==c.mode)return Me(s,"shouldShowMobileActionBar = false (reason: TextSelectionStore.state.mode !== editing"),{canShow:!0,canShowNativeBar:l,shouldShow:!1};const u=c.multiSelection,d=(0,k.L5)(u),m=d.some((e=>e.editable.props.disableStyleAnnotations)),p=d.some((e=>e.editable.props.disableMobileActionBar)),v=d.some((e=>e.editable.props.disableComment));return d&&p?(Me(s,"shouldShowMobileActionBar = false (reason: !renderedBlocks || !disableMobileActionBar)"),{canShow:!0,canShowNativeBar:l,shouldShow:!1}):(Me(s,"shouldShowMobileActionBar = true"),{shouldShow:!0,canShowNativeBar:l,disableStyleAnnotations:m,disableComment:v,isEmpty:(0,$.iG)(u)&&0===u.end.index&&0===(null===(o=(0,q.x0)(u.end.store))||void 0===o?void 0:o.endIndex)})}function j(e){const{environment:t,store:n}=e,{isPhone:o}=t.device,i=Z.default.state.currentLoadingContainerStore,a=Boolean(null==n?void 0:n.isCollectionView()),r=Boolean(null==n?void 0:n.getAssociatedCollectionStore()),s=t.currentUser.isLoggedIn(),l=R.Z.state.open;return Boolean(!r&&!a&&!l&&o&&n&&i&&n.isDefined()&&n.canEdit()&&!n.hasContent()&&s&&i.state.ready)}function ee(e,t){const n=(0,I.Y)("supportsNativeMobileDynamicActionBar"),o=K.default.state;if("editing"===o.mode)return!t.state.isComposing&&!(0,$.iG)(o.multiSelection)||!n&&P.g$.getSimpleTableCellFromTextSelection();const i=e.state.savedTextSelectionStoreState;return!(!i||"editing"!==i.mode)&&!(0,$.iG)(i.multiSelection)}function te(e){const{NativeMobileActionBarStore:t,device:n}=e;return Boolean(t&&null!==t.state.menuType&&!n.isTablet&&!n.isAndroid&&!(0,I.Y)("supportsMobileActionBarNativeActionMenuWithoutIgnoreSelectionArea"))}function ne(e){if((0,U.YF)(e))return!1;const{stores:t}=p.default.state;return t.length>0&&t[0].canEdit()&&!t[0].isNavigableBlock()&&!Boolean(P.g$.getSimpleTableCellFromTextSelection())}function oe(e,t){return!(0,U.YF)(e)&&t.canEdit()}function ie(e){"editing"===K.default.state.mode&&(h.createAndCommit({userAction:"mobileActionBarHelpers.handleIndent",environment:e,perform:t=>{M.n2({environment:e,transaction:t,shiftKey:!1})}}),Be(e,"indent"))}function ae(e){"editing"===K.default.state.mode&&(h.createAndCommit({userAction:"mobileActionBarHelpers.handleUnindent",environment:e,perform:t=>{M.n2({environment:e,transaction:t,shiftKey:!0})}}),Be(e,"unindent"))}function re(e){h.createAndCommit({userAction:"mobileActionBarHelpers.handleMoveUp",environment:e,perform:t=>{M.fs({environment:e,transaction:t,direction:"up"})}}),Be(e,"move-up")}function se(e){h.createAndCommit({userAction:"mobileActionBarHelpers.handleMoveDown",environment:e,perform:t=>{M.fs({environment:e,transaction:t,direction:"down"})}}),Be(e,"move-down")}function le(e){const t=p.default.state.stores[0],n=K.default.state;if(t&&"editing"===n.mode){const{multiSelection:o}=n,i=(0,q.hn)(o.end.store)||(0,q.mK)(o.start.store);h.createAndCommit({userAction:"mobileActionBarHelpers.handleDelete",environment:e,perform:e=>{b.Od({store:t,transaction:e})}});if(P.g$.getSimpleTableCellFromTextSelection())h.createAndCommit({userAction:"mobileActionBarHelpers.handleDelete",environment:e,perform:t=>{P.HM.clearSelectedCell({environment:e,transaction:t})}});else if(i){const t=(0,W.sQ)(i);S.eP({environment:e,store:t}),S.Db(e)}else S.ZH({debug:{userAction:"mobileActionBarHelpers.handleDelete"},environment:e});Be(e,"remove")}}function ce(e){m.lZ({environment:e,mentionTypes:{page:!0,heading:!0,createPage:!0,user:!0,inviteUserToWorkspace:!1,inviteUserToPage:!0,bot:!0,date:!0,reminder:!0,templateVariable:!0,group:!0}}),Be(e,"mention")}function ue(e){const t=K.default.state;if("empty"===t.mode){const t=(0,f.RM)();if(!t)throw new Error("No root store.");S.Ys({environment:e,store:t})}else if((0,$.iG)(t.multiSelection)){const n=(0,W.sQ)(t.multiSelection.start.store);S.Ys({environment:e,store:n})}(0,C.toggleInitialPrompt)({from:"mobile_action_bar",environment:e}),Be(e,"ai")}function de(e,t){w.aS({environment:e,annotation:t}),Be(e,t[0])}function me(e,t,n){const{NativeMobileActionBarStore:o}=e;null==o||o.update((e=>({...e,menuType:t,shouldRestoreSelectionForMenu:n})))}function fe(e,t,n){const{NativeMobileActionBarStore:o}=e;null==o||o.update((e=>({...e,isSubMenuOverridden:n,subMenuType:t}))),null===t?B.xv():null!==t&&Be(e,t)}function pe(e){g.KX(e),Be(e,"redo")}function ve(e){g.Yw(e),Be(e,"undo")}function be(e){d.dz({type:"focusOnly",focus:!0}),Be(e,r.GKr.Link)}function Se(e,t){const n=p.default.state.stores[0];if(!n)return;const o=K.default.state,i="empty"!==o.mode&&o.multiSelection;i&&!(0,$.iG)(i)?(T.WD({environment:e,blockStore:n,multiSelection:i}),Be(e,"comment",t)):(T.yw({environment:e,blockStore:n}),Be(e,"discuss",t))}function he(e){u.qn({environment:e,analyticsFrom:"rich_text_menu"}),Be(e,"equation")}function Ae(e){!async function(e){const t=p.default.state.stores,n=await A.y({multiple:!0,accept:e.device.isIOS?"image/*, video/*":"image/*"}),o=p.default.getCurrentRecordCache(),i=f.qQ(e);0!==n.length&&o&&h.createAndCommit({userAction:"mobileActions.takePicture",environment:e,perform:a=>{var r,s;const l=v.z({environment:e,files:n,inMemoryRecordCache:o,pageWidth:i,transaction:a,spaceId:0!==t.length?t[0].pointer.spaceId:null===(r=(0,f.RM)())||void 0===r?void 0:r.pointer.spaceId,useCrdt:0!==t.length?t[0].useCrdt():(null===(s=(0,f.RM)())||void 0===s?void 0:s.useCrdt())??!1});b.is({environment:e,blocks:l,selection:t,transaction:a,replaceEmptyTextBlock:!0}),S.ZH({debug:{userAction:"mobileActions.takePicture"},environment:e})}})}(e),Be(e,"take_picture")}function ge(e,t,n){const{device:i}=e,a=i.isMobileNative&&i.isIOS&&i.isPhone;a||S.Z5({environment:e,stores:p.default.state.stores}),t&&n?c.Qn({environment:e,stores:p.default.state.stores,actionSectionGroupKey:"default",left:t,top:n,showInput:!1,analyticsFrom:"mobile_more_menu"}):c.$Z({environment:e,stores:p.default.state.stores,actionSectionGroupKey:"default",showInput:!1,analyticsFrom:"mobile_more_menu"}),Be(e,"more"),o.default.afterNextFlush((()=>{a&&y.sD()}))}function Be(e,t,n){l.YO(e,{itemName:t,from:n})}function Me(e,t){e&&console.log(t)}},156638:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(749085);class i extends o.default{getInitialState(){return{open:!1}}}const a=new i}}]);