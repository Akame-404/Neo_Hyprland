"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[55461],{694166:(e,t,o)=>{o.d(t,{Z:()=>u});o(667294);var n=o(800480),r=o(724405),i=o(605257),l=o(356666),a=o(137810),s=o(552275),c=o(925130),d=o(785893);const u=function(e){const{icon:t,iconStyle:o,title:u,caption:p,right:g,rightStyle:h,isRed:C,isGray:x,isOrange:m,isPadded:f,onClick:v,onMouseDown:y,onMouseEnter:S,onMouseLeave:F,disabled:j,showChevron:b,chevronStyle:M,rotateChevron:Z,showDragHandle:k,focused:w,textWrapperStyle:T,shouldWrapCaption:R,desktopIconStyle:V}=e,A=(0,n.O7)(),{isMobile:P}=A.device,I=(0,r.yK)((e=>({style:{color:x?e.mediumTextColor:m?"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400]:e.regularTextColor,fill:x?e.mediumIconColor:m?"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400]:e.regularIconColor,opacity:j?.4:void 0},leftIconStyle:{width:24,height:f?24:P?18:16,marginRight:-2,...t===l.o&&{height:3},...o},rightStyle:{display:"flex",alignItems:"center",color:j?e.regularTextColor:e.lightTextColor,fill:j?e.regularIconColor:e.lightIconColor,flexShrink:0,...h},rightIconStyle:{width:12,fill:e.lightIconColor,marginLeft:6,transition:"transform 200ms ease-in-out",...M},rightIconRotatedStyle:{transform:"rotate(90deg)"}})),[x,m,j,o,f,P,t,M,h]),[B]=(0,c.o$)();return(0,d.jsx)(s.Z,{ref:B,icon:null==t?void 0:t(I.leftIconStyle),focused:w||!1,disabled:j,title:u,caption:p,shouldWrapCaption:R,desktopTitleStyle:{flexGrow:1,flexShrink:1},showDragHandle:k,buttonStyle:I.style,rightStyle:I.rightStyle,isRedOnHover:C,ignoreLocalHoverState:!!j||void 0,right:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{style:{...a.Z.textOverflowStyle,display:"flex"},children:g}),!j&&b&&(0,i.o)({...I.rightIconStyle,...Z&&I.rightIconRotatedStyle})]}),onClick:v,onMouseDown:y,onMouseEnter:S,onMouseLeave:F,textWrapperStyle:T,desktopIconStyle:V})}},586650:(e,t,o)=>{o.d(t,{R1:()=>W,ep:()=>z,ZP:()=>G});var n=o(667294),r=o(800480),i=o(886628),l=o(724405),a=o(749085),s=o(576205),c=o(745238),d=o(785893);const u=(0,c.IU)("copyPadded",{viewBox:"0 0 24 24",svg:(0,d.jsx)("path",{d:"M4.89062 18.5107C4.89062 19.9873 5.64941 20.7529 7.1123 20.7529H13.5107C14.9736 20.7529 15.7256 19.9805 15.7256 18.5107V17.2461H16.8877C18.3506 17.2461 19.1094 16.4805 19.1094 15.0039V9.58984C19.1094 8.69434 18.9248 8.12012 18.3848 7.56641L14.9736 4.09375C14.4609 3.56738 13.8525 3.36914 13.0664 3.36914H10.4893C9.0332 3.36914 8.26758 4.13477 8.26758 5.61133V6.86914H7.1123C5.64941 6.86914 4.89062 7.6416 4.89062 9.11133V18.5107ZM15.042 11.3262L11.3369 7.55957C10.8105 7.02637 10.3662 6.88281 9.60742 6.87598V5.68652C9.60742 5.05762 9.94238 4.70898 10.6055 4.70898H13.4629V7.97656C13.4629 8.82422 13.9141 9.26172 14.7549 9.26172H17.7695V14.9219C17.7695 15.5576 17.4414 15.9062 16.7715 15.9062H15.7256V13.2539C15.7256 12.3311 15.6162 11.9072 15.042 11.3262ZM14.584 7.80566V5.2627L17.4209 8.14062H14.9189C14.6865 8.14062 14.584 8.04492 14.584 7.80566ZM6.23047 18.4287V9.19336C6.23047 8.56445 6.55859 8.20898 7.22168 8.20898H9.32031V11.9551C9.32031 12.9326 9.80566 13.4111 10.7764 13.4111H14.3857V18.4287C14.3857 19.0645 14.0576 19.4131 13.3945 19.4131H7.22168C6.55859 19.4131 6.23047 19.0645 6.23047 18.4287ZM10.9062 12.2285C10.626 12.2285 10.5029 12.1055 10.5029 11.8252V8.46875L14.2012 12.2285H10.9062Z"})});var p=o(356666),g=o(821197),h=o(38715),C=o(355863),x=o(709291),m=o(653965),f=o(401898),v=o(137810),y=o(108406),S=o(234993),F=o(805149),j=o(210228),b=o(623063),M=o(552275),Z=o(231945),k=o(573063),w=o(478140),T=o(828992),R=o(632163),V=o(489728),A=o(953437),P=o(672495),I=o(526388),B=o(295691),D=o(397004),_=o(460709),L=o(98742),O=o(825464),H=o(61766),K=o(694166);let W=function(e){return e[e.FilterBar=0]="FilterBar",e[e.SettingsFilters=1]="SettingsFilters",e[e.SettingsSort=2]="SettingsSort",e}({});const q=a.default.createClass(!1,{name:"ShowMoreStore"});function z(){return(0,d.jsx)(x.FormattedMessage,{id:"database.filterValue.mergeIntoAdvancedFilter.tooltip",defaultMessage:"Use an advanced filter to group filter rules and use AND/OR conditions."})}const G=function(e){let{collectionContextStore:t,context:o,showHoverActionsStore:a,moreActionsButtonPopupStore:s}=e;const c=(0,l.Fg)(),m=(0,r.O7)(),S=(0,x.useIntl)(),F=(0,r.Fy)(),j=(0,i.qz)(s,H.Z),M=(0,i.qz)(void 0,q),w=(0,i.VK)((()=>{const e=t.localStateDiffStore.state;return o===W.SettingsFilters?(e.filters.moved.length>0?1:0)+e.filters.added.length+e.filters.removed.length+e.filters.updated.length:0}),[t,o]),R=(0,n.useCallback)((()=>function(e,t,o){y.wd({environment:e,collectionContextStore:t,action:"click_save_control_more_options_button"}),o.setState(!0)}(m,t,M)),[m,t,M]),P=(0,i.VK)((()=>t.permissionScopesStore.state),[t]),D=(0,i.VK)((()=>t.isFullScreenStore.state||!a||a.state),[t,a]),_=(0,i.VK)((()=>M.state),[M]),L=(0,i.VK)((()=>J(t,o)),[t,o]);if(o===W.FilterBar)return F.isPhone?P.canConfigureBlock?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(V.Z,{isOrange:!0,hovered:!0,style:{flexGrow:1,justifyContent:"center",height:32,marginRight:8,fontWeight:v.Z.fontWeight.semibold},onClick:()=>X(m,t,o),children:(0,d.jsx)(Q,{})}),(0,d.jsx)(Z.ZP,{popupType:F.isMobile?A.kQ.SlideUp:A.kQ.Popup,render:e=>(0,d.jsx)(oe,{parent:e,collectionContextStore:t,context:o}),originGap:4,onClick:()=>te(m,t),buttonPopupStore:j,renderOrigin:e=>(0,d.jsx)(k.Z,{style:{width:32,height:32},iconStyle:{width:16},hovered:!0,icon:p.o,...e})})]}):(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(V.Z,{style:{flexGrow:1,justifyContent:"center",height:32,marginRight:8,fontWeight:v.Z.fontWeight.semibold},hovered:!0,isGray:!0,onClick:()=>ee(m,t,o),children:(0,d.jsx)(E,{})})}):(0,d.jsx)(b.Z,{isVisible:D,animationStyle:{opacity:1},enterAnimationStyle:{opacity:0},exitAnimationStyle:{opacity:0},render:()=>(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,d.jsx)(V.Z,{isGray:!0,onClick:()=>ee(m,t,o),style:{lineHeight:1.1,fontSize:F.isMobile?16:14},children:(0,d.jsx)(E,{})}),P.canConfigureBlock&&(0,d.jsx)(Z.ZP,{popupType:m.device.isMobile?A.kQ.SlideUp:A.kQ.Popup,render:e=>(0,d.jsx)(oe,{parent:e,collectionContextStore:t,context:o}),originGap:4,onClick:()=>te(m,t),buttonPopupStore:j,renderOrigin:e=>(0,d.jsx)(B.Z,{title:(0,d.jsx)(Q,{}),color:"orange",onClick:()=>X(m,t,o),dropdownEvents:e,style:{marginLeft:6,marginRight:F.isMobile?8:void 0,fontSize:F.isMobile?16:14,...F.isMobile?{height:30}:null}})})]})});if(o===W.SettingsFilters||o===W.SettingsSort){const e=o===W.SettingsFilters;return(0,d.jsxs)(d.Fragment,{children:[_&&P.canConfigureBlock&&(F.isMobile?(0,d.jsx)(T.Z,{style:{fontSize:12,color:c.mediumTextColor},title:(0,d.jsx)(ne,{context:o,changeCount:w})}):(0,d.jsx)("div",{style:{fontSize:12,color:c.mediumTextColor,paddingLeft:14,paddingRight:14,paddingTop:8,paddingBottom:8,maxWidth:220},children:(0,d.jsx)(ne,{context:o,changeCount:w})})),P.canConfigureBlock&&(0,d.jsx)(K.Z,{icon:h.N,isOrange:!0,title:(0,d.jsx)(Q,{}),onClick:()=>X(m,t,o)}),(0,d.jsx)(K.Z,{icon:C.s,isGray:!0,title:e?(0,d.jsx)(x.FormattedMessage,{defaultMessage:"Reset filters",id:"database.viewSettings.filterAndSortSaveControl.resetFilters"}):(0,d.jsx)(x.FormattedMessage,{defaultMessage:"Reset sorts",id:"database.viewSettings.filterAndSortSaveControl.resetSorts"}),onClick:()=>ee(m,t,o)}),P.canConfigureBlock&&!_&&(0,d.jsx)(K.Z,{icon:p.o,isGray:!0,title:(0,d.jsx)(x.FormattedMessage,{defaultMessage:"More options",id:"database.viewSettings.filterAndSortSaveControl.more"}),onClick:R}),P.canConfigureBlock&&_&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(K.Z,{icon:u,isPadded:!0,isGray:!0,title:(0,d.jsx)(U,{}),onClick:()=>{$(m,t,S)}}),L&&(0,d.jsx)(I.Z,{placement:O.u.Left,style:{maxWidth:240,whiteSpace:void 0},renderTooltip:()=>(0,d.jsx)("div",{children:(0,d.jsx)(z,{})}),render:e=>(0,d.jsx)(K.Z,{icon:g.Q,isGray:!0,title:(0,d.jsx)(N,{}),onClick:()=>{Y(m,t,o)},...e})})]})]})}(0,f.t1)(o)};function U(){return(0,d.jsx)(x.FormattedMessage,{defaultMessage:"Save as new view",id:"database.filterBar.changesControl.saveAsNewView.title"})}function N(){return(0,d.jsx)(x.FormattedMessage,{defaultMessage:"Merge into advanced filter",id:"database.filterBar.changesControl.mergeIntoAdvancedFilter.title"})}function E(){return(0,d.jsx)(x.FormattedMessage,{defaultMessage:"Reset",id:"database.filterBar.changesControl.reset.title"})}function Q(){return(0,d.jsx)(x.FormattedMessage,{defaultMessage:"Save for everyone",id:"database.filterBar.changesControl.saveForEveryone.title"})}function J(e,t){const o=e.currentPropertyFiltersStore.state;return(t===W.FilterBar||t===W.SettingsFilters)&&Boolean(o.find((e=>(0,s.aN)(e.filter))))}function X(e,t,o){const n=t.collectionViewStore();n&&(y.wd({environment:e,collectionContextStore:t,action:"click_save_control_save_in_current_view"}),j.createAndCommit({userAction:"CollectionSettingsSaveControl.handleSaveInCurrentViewClick",environment:e,perform:r=>{S.Ys({environment:e,type:o===W.FilterBar?S.mO.All:o===W.SettingsFilters?S.mO.Filters:S.mO.Sorts,collectionContextStore:t,targetCollectionViewStore:n,transaction:r})}}),S.RD({environment:e,seen:!0}))}function $(e,t,o,n){y.wd({environment:e,collectionContextStore:t,action:"click_save_control_save_as_new_view"}),j.createAndCommit({userAction:"CollectionSettingsSaveControl.handleSaveAsNewViewClick",environment:e,perform:n=>{S.k7({environment:e,collectionContextStore:t,transaction:n,intl:o})}}),null==n||n.close()}function Y(e,t,o,n){const r=(0,D.Pi)(t),i=t.currentPropertyFiltersStore.state.filter((e=>(0,D.mu)(e.id)));S.iU({environment:e,collectionContextStore:t,temporaryState:{...t.temporaryStateStore.state,propertyFilters:{value:i},combinatorFilter:{value:r}}});const l=o===W.FilterBar?t.filterBarCombinatorFilterSettingsStore:t.filterOptionsCombinatorFilterSettingsStore;F.wl({collectionSettingsStore:l,item:{type:"filter"}}),y.wd({environment:e,collectionContextStore:t,action:"merge_filter_into_combinator"}),null==n||n.close()}function ee(e,t,o,n){y.wd({environment:e,collectionContextStore:t,action:"click_save_control_reset"});const r=t.temporaryStateStore.state,i=o===W.SettingsFilters?{...r,propertyFilters:void 0,combinatorFilter:void 0}:o===W.SettingsSort?{...r,sorts:void 0}:void 0;S._x({environment:e,collectionContextStore:t,temporaryState:i}),S.RD({environment:e,seen:!0}),null==n||n.close()}function te(e,t){y.wd({environment:e,collectionContextStore:t,action:"click_save_control_more_options_popup"}),S.RD({environment:e,seen:!0})}function oe(e){let{parent:t,collectionContextStore:o,context:n}=e;const l=(0,x.useIntl)(),a=(0,r.O7)(),{device:s}=a,c=(0,r.MO)();let u;u=s.isMobile?{menuType:_.og.ActionSheet}:{menuType:_.og.Popup,width:250};const p=(0,i.VK)((()=>J(o,n)),[o,n]),g=m.oA([c&&{key:"reset",render:e=>(0,d.jsx)(M.Z,{...e,disabled:!1,title:(0,d.jsx)(E,{})}),action:()=>{ee(a,o,n,t)}},{key:"newView",render:e=>(0,d.jsx)(M.Z,{...e,disabled:!1,title:(0,d.jsx)(U,{})}),action:()=>{$(a,o,l,t)}},p&&{key:"merge",render:e=>(0,d.jsx)(I.Z,{placement:O.u.Left,style:{maxWidth:240,whiteSpace:void 0},renderTooltip:()=>(0,d.jsx)("div",{children:(0,d.jsx)(z,{})}),render:t=>(0,d.jsx)(M.Z,{...(0,L.Z)(e,t),disabled:!1,title:(0,d.jsx)(N,{})})}),action:()=>{Y(a,o,n,t)}}]);return(0,d.jsx)(w.Z,{...u,children:(0,d.jsx)(R.Z,{type:R.i.Vertical,sections:[{key:0,render:e=>(0,d.jsx)(P.Z,{enableActionSheetTitle:!0,...e}),items:g}],initialFocus:0})})}function ne(e){let{context:t,changeCount:o}=e;return t===W.SettingsFilters?(0,d.jsx)(x.FormattedMessage,{defaultMessage:"{count, plural, one {{count} filter changed from what other people see} other {{count} filters changed from what other people see}}",id:"database.viewSettings.filterAndSortSaveControl.filter.caption",values:{count:o}}):(0,d.jsx)(x.FormattedMessage,{defaultMessage:"Sort has been changed from what other people see",id:"database.viewSettings.filterAndSortSaveControl.sort.caption"})}},502005:(e,t,o)=>{o.d(t,{Tp:()=>h,cn:()=>d,fg:()=>p,l0:()=>u,oq:()=>g});o(667294);var n=o(800480),r=o(436488),i=o(478140),l=o(828992),a=o(840721),s=o(460709),c=o(785893);const d=8,u=8,p=32,g={height:p+d-2,paddingTop:d-2};function h(e){let{title:t,helpButton:o,onCancel:l,desktopMinWidth:d,desktopMaxWidth:u,desktopWidth:p,children:g}=e;const{device:h}=(0,n.O7)();return(0,c.jsx)(r.Z,{capture:!0,allowEsc:!0,allowUndo:!0,render:e=>{let n;return n=h.isMobile?{menuType:s.og.Modal,title:t,right:(0,c.jsx)(a.DoneMenuText,{}),onClickRight:l,...e}:{menuType:s.og.Popup,...d&&{minWidth:d},...u&&{maxWidth:u},...p&&{width:p},...e},(0,c.jsx)(i.Z,{...n,header:t&&(0,c.jsx)(C,{title:t,helpButton:o}),children:g})}})}function C(e){let{title:t,helpButton:o}=e;return(0,n.O7)().device.isMobile?null:(0,c.jsx)(l.Z,{style:g,title:t,right:o})}},713401:(e,t,o)=>{o.d(t,{Z:()=>d});var n=o(667294),r=o(724405),i=o(747453),l=o(531701),a=o(831339),s=o(552275),c=o(785893);const d=n.forwardRef((function(e,t){const o=(0,r.yK)((t=>({base:{color:e.isBlue?l.ZP.blue:t.mediumTextColor}})),[e.isBlue]),{color:n}=o.base;return(0,c.jsx)(s.Z,{ref:t,...e,title:(0,c.jsx)("div",{style:{color:n,fill:n},children:e.title}),icon:(0,c.jsx)(a.Z,{icon:i.R,styles:{fill:n}})})}))},576852:(e,t,o)=>{o.d(t,{Qv:()=>Pe,ZP:()=>_e,I4:()=>Le});o(430541),o(757658);var n=o(667294),r=o(800480),i=o(886628),l=o(724405),a=o(749085),s=o(266897),c=o(576205),d=o(399036),u=o(180951),p=o(984619),g=o(640506),h=o(253877),C=o(158573),x=o(842875),m=o(542853),f=o(356666),v=o(821197),y=o(937612),S=o(396367),F=o(421202),j=o(177420),b=o(213493),M=o(519889),Z=o(604308),k=o(709291),w=o(653965),T=o(401898),R=o(137810),V=o(586650),A=o(296994),P=o(823586),I=o(628020),B=o(397004),D=o(717335),_=o(623879),L=o(426991),O=o(460709),H=o(98742),K=o(205691),W=o(729376),q=o(825464),z=o(600051),G=o(80444),U=o(61766),N=o(229798),E=o(206258),Q=o(742696),J=o(429369),X=o(76233),$=o(108406),Y=o(566890),ee=o(798165),te=o(168834),oe=o(552275),ne=o(260458),re=o(568785),ie=o(478140),le=o(632163),ae=o(743765),se=o(840721),ce=o(672495),de=o(685567),ue=o(147082),pe=o(785893);function ge(e){const{filter:t,parentStore:o,updateValue:a,onClose:s,desktopTopActions:d,mobileMenuTitle:u,mobileMoreActions:g}=e,h=(0,r.O7)(),x=(0,Y.Y$)(),[m,f]=(0,n.useState)([]),[v,y]=(0,n.useState)(!1),S=(0,n.useMemo)((()=>(0,c.vR)(t)?(0,c.u0)(t):[]),[t]),F=(0,r.Fy)(),j=(0,i.VK)((()=>w.oA(S.map((e=>{if(e.value)return E.NW.createChildStore(o,{table:"collection",id:e.value})})))),[S,o]),b=(0,i.VK)((()=>j.map((e=>(0,pe.jsx)(de.Z,{format:F.isMobile?p.lo.Large:p.lo.Small,value:(0,pe.jsx)(te.Z,{collectionStore:e}),onClickRemove:()=>{const t=S.find((t=>t.value===e.id));if(t){const e=w.zu(S,t);a(e)}},showRemoveButton:!0,isSingle:!1,shouldShrink:!0,backgroundColor:"transparent",showFullValueTooltip:!0},e.id)))),[j,S,F.isMobile,a]),[M,Z]=(0,n.useState)(""),T=(0,k.useIntl)(),R=(0,i.VK)((()=>{var e;return null===(e=G.default.state.currentUserStore)||void 0===e?void 0:e.userId}),[]),V=(0,i.VK)((()=>x.collectionStoresStore.state??[]),[x]),A=(0,i.VK)((()=>v?V:x.collectionStoreResultsInViewOrder()),[v,x,V]),P=(0,i.VK)((()=>(0,C.ZP)(M,V,(e=>X.QaF(e.getName()??[])))),[M,V]),I=(0,i.VK)((()=>V.filter((e=>!m.some((t=>t.id===e.id))))),[V,m]),B=(0,i.qz)(void 0,N.Z);(0,n.useEffect)((()=>{f((()=>""===M?w.mN([...A,...j,...m],"id"):P))}),[M,v,A,P,j]);const D=(0,l.yK)((e=>({checkboxIcon:{fill:e.regularIconColor}})),[]),_=(0,n.useCallback)(((e,t)=>{const o=Boolean(t.find((t=>"exact"===t.type&&t.value===e.id))),n=()=>{const o=w.ln(t,[{type:"exact",value:e.id}],(e=>e.value));a(o)};return{key:e.id,render:t=>(0,pe.jsx)(oe.Z,{...t,icon:(0,pe.jsx)(ne.Z,{checked:o,size:14,onClick:n,style:D.checkboxIcon}),title:(0,pe.jsx)(te.Z,{collectionStore:e}),isTokenTitle:!0}),action:n}}),[D.checkboxIcon,a]),L=(0,n.useCallback)((()=>({key:"hidden-items-button",render:e=>(0,pe.jsx)(oe.Z,{...e,icon:(0,Q.t)({width:13,height:13}),title:(0,pe.jsx)(k.FormattedMessage,{id:"collectionFilterValueMenu.locationFilterValueMenu.hiddenLocationsDescription",defaultMessage:"{numHiddenOptions, plural, one {{numHiddenOptions} other source} other {{numHiddenOptions} other sources}}",values:{numHiddenOptions:I.length}})}),action:()=>{y(!0),$.wd({environment:h,collectionContextStore:x,action:"expand_property_filter",original_view_type:void 0,property_type:"location"})}})),[I.length,x,h]),H=(0,i.VK)((()=>{const e=[],t={},n=[];for(const o of m){const e=ee.VP(o);e?R&&e.isMemberOrGuest(R)&&(t[e.id]=[...t[e.id]??[],o]):n.push(o)}for(const[r,i]of Object.entries(t)){const t=E.zX.createChildStore(o,{table:J.e0,id:r});e.push({key:r,items:i.map((e=>_(e,S))),render:e=>(0,pe.jsx)(ce.Z,{topBorder:!0,...e,title:(0,pe.jsx)(pe.Fragment,{children:t.getName()??""})})})}return n.length>0&&e.push({key:"private",items:n.map((e=>_(e,S))),render:e=>(0,pe.jsx)(ce.Z,{topBorder:!0,...e,title:(0,pe.jsx)(k.FormattedMessage,{id:"collectionFilterValueMenu.privateLocationSection",defaultMessage:"Private"})})}),I.length>0&&!v&&e.push({key:"hidden",items:[L()],render:e=>(0,pe.jsx)(ce.Z,{topBorder:!0,...e})}),e}),[I.length,v,m,R,o,_,S,L]),K=(0,pe.jsx)(ue.ZP,{focus:!F.isMobile||void 0,focusAfterAnimation:!0,format:ue.UR.FilterValue,tokens:b,placeholder:T.formatMessage({defaultMessage:"Search for one or more sources",id:"database.filterValue.locationType.searchPlaceholder"}),onRemoveLastToken:()=>{const e=S.slice(0,S.length-1);a(e)},onClearButtonClick:()=>{a([]),null==s||s()},value:M,onChange:e=>{Z(e.target.value)},dontShowBorderBottom:F.isAndroid,showClearButton:!0,style:{maxHeight:"20vh",overflowY:"auto"}}),W=(0,pe.jsxs)(ce.Z,{desktopStyle:{paddingBottom:0},children:[!F.isMobile&&d,K]});let q;return q=F.isMobile?{menuType:O.og.Modal,title:u,left:g,right:(0,pe.jsx)(se.DoneMenuText,{}),onClickRight:s,header:W}:{menuType:O.og.Popup,maxHeight:c.ot,width:260,header:W,disableHeaderBorder:!0},(0,pe.jsx)(ie.Z,{...q,children:(0,c.vR)(t)&&(0,pe.jsxs)(pe.Fragment,{children:[!x&&(0,pe.jsx)(ce.Z,{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"8px 0px"},children:(0,pe.jsx)(re.Z,{})}),x&&(0,pe.jsxs)(pe.Fragment,{children:[0===V.length||""!==M&&0===m.length?(0,pe.jsx)(ce.Z,{children:(0,pe.jsx)(ae.Z,{title:(0,pe.jsx)(k.FormattedMessage,{defaultMessage:"No results",id:"database.filterValue.selectType.noResults.message"})})}):null,V.length>0&&(0,pe.jsx)(le.Z,{type:le.i.Vertical,initialFocus:0,sections:H,store:B,onAccept:()=>{Z("")}})]})]})})}var he=o(582584),Ce=o(164921),xe=o(231945),me=o(573063),fe=o(268894),ve=o(203386),ye=o(953437),Se=o(511470),Fe=o(814871),je=o(526388),be=o(992864),Me=o(164369),Ze=o(366653),ke=o(341209),we=o(793289),Te=o(83264),Re=o(278948),Ve=o(125845),Ae=o(122084);let Pe=function(e){return e[e.AdvancedFilter=0]="AdvancedFilter",e[e.PropertyFilter=1]="PropertyFilter",e}({});const Ie=(0,k.defineMessages)({startingMessage:{defaultMessage:"Select or type a date...",id:"search.dateMenu.dateMessage"},chevronDownAriaLabel:{id:"filterDateMenu.chevronDownAriaLabel.ariaLabel",defaultMessage:"Dropdown to select a date relative to today"},pageContainingThisView:{defaultMessage:"Page containing this view",id:"database.filterValue.pageContainingThisView"}}),Be=a.default.createClass("",{name:"QueryStore"});function De(){const{device:e}=(0,r.O7)();return(0,m.i)({width:10,height:10,...e.isMobile&&{marginTop:2}})}const _e=function(e){let{schema:t,propertyFilter:o,parentStore:n,onClose:r,onChange:l,userCanConfigureFilters:a,onDelete:s,onAddToCombinatorFilter:c,context:d,collectionViewId:u,collectionContextStore:p,allowRelativePersonFilter:g,allowRelativeDateFilter:h}=e;const C=(0,i.qz)(void 0,U.Z),x=(0,i.qz)(void 0,U.Z),m=(0,i.qz)(void 0,N.Z),f=(0,i.qz)(void 0,Be);return(0,pe.jsx)(ve.Z,{debugName:"CollectionFilterValueMenu",capture:!0,onEsc:e=>function(e,t){null==t||t()}(0,r),children:(0,pe.jsx)(xt,{propertyFilter:o,schema:t,parentStore:n,onChange:l,userCanConfigureFilters:a,onDelete:s,onAddToCombinatorFilter:c,context:d,onClose:r,collectionViewId:u,collectionContextStore:p,allowRelativePersonFilter:g,allowRelativeDateFilter:h,queryStore:f,menuListStore:m,dateFilterPopupStore:x,dateRangeFilterPopupStore:C})})};function Le(e){const{query:t,propertySchema:o,selectedValues:n,updateValue:r,isMobile:i,styles:l}=e,a=o.options||[];return(t?(0,C.ZP)(t,a,(e=>e.value)):a).map((e=>{const t=Boolean(n.find((t=>t.value===e.value))),o={key:e.value,render:o=>(0,pe.jsx)(oe.Z,{icon:(0,pe.jsx)(ne.Z,{onClick:o.onClick,checked:t,size:14,style:l.checkboxIcon}),title:(0,pe.jsx)(Ae.a,{format:i?p.lo.Large:p.lo.Medium,isSingle:!0,value:e.value,color:e.color,showRemoveButton:!1}),isTokenTitle:!0,...o}),action:()=>{const o=t?n.filter((t=>{let{value:o}=t;return o!==e.value})):[...n,{type:"exact",value:e.value}];r(o)}};return o}))}function Oe(e){return Array.isArray(e)?0===e.length?{type:"exact",value:void 0}:1===e.length?e[0]:e:e}function He(e,t){return Boolean(e.find((e=>w.Xy(e,t))))}function Ke(){return(0,pe.jsx)(k.FormattedMessage,{defaultMessage:"Me",id:"database.filterValue.personType.firstPersonPropertyValue.title"})}function We(e,t,o){const{filter:n}=o;(0,c.a_)(n)?null==t||t({...n,subfilter:{...n.subfilter,value:Oe(e)}}):null==t||t({...n,value:Oe(e)})}function qe(e,t,o){const{filter:n}=o;(0,c.a_)(n)?null==t||t({...n,subfilter:e}):null==t||t(e)}function ze(e,t,o,n,r){return()=>{We(e?t.filter((e=>!w.Xy(e,o))):[...t,o],r,n)}}function Ge(e){let{filter:t,onChange:o,propertyFilter:n,onClose:r}=e;return(0,c.yI)(t.value)?null:(0,pe.jsx)(ce.Z,{topBorder:!0,children:(0,pe.jsx)(oe.Z,{focused:!1,title:(0,pe.jsx)(k.FormattedMessage,{defaultMessage:"Clear",id:"database.filterValue.clear.message"}),onClick:()=>{We({type:"exact",value:void 0},o,n),null==r||r()}})})}function Ue(e){let{filter:t}=e;const o=(0,l.Fg)();return(0,pe.jsx)("span",{style:{color:o.lightTextColor},children:(0,D.WC)(t.operator).toLocaleLowerCase()})}function Ne(e){let{propertySchema:t,propertyFilter:o,onChange:n}=e;const i=(0,l.Fg)(),a=(0,r.O7)(),{device:s}=a,d=o.filter;if(!(0,c.vR)(d)||!(0,c.gE)(d))return(0,pe.jsx)(pe.Fragment,{children:t.name});const u={width:190,items:c.T,selectedItem:(0,c.TX)(d),getKey:e=>e,onSelect:e=>{qe({...d,use_end:(0,c.UG)(e)},n,o)},renderItem:e=>(0,pe.jsx)(je.Z,{renderTooltip:()=>(0,D._T)(e.value),render:t=>(0,pe.jsx)(oe.Z,{title:(0,D.IF)(e.value),...(0,H.Z)(e,t)}),placement:q.u.Right,textWrap:!0,style:{width:"260px"}}),renderOrigin:e=>(0,pe.jsx)(Ce.Z,{...e,style:{marginRight:4,marginLeft:2,paddingLeft:2,paddingRight:2,borderRadius:4,flexShrink:0},children:(0,pe.jsxs)("div",{style:{display:"flex",alignItems:"center",...!s.isMobile&&{color:i.mediumTextColor,fill:i.lightIconColor,fontWeight:500,fontSize:12}},children:[(0,pe.jsx)("span",{style:{marginRight:4},children:(0,D.IF)((0,c.TX)(d))}),(0,pe.jsx)(De,{})]})})};return(0,pe.jsx)(Fe.Z,{...u,mobileActionSheet:!0})}function Ee(e){let{propertyFilter:t,onChange:o}=e;const n=(0,k.useIntl)(),i=(0,l.Fg)(),a=(0,r.O7)(),{filter:s}=t,{device:d}=a;if(!(0,c.a_)(s))return null;const u={width:190,items:c.Rf,getKey:e=>e,selectedItem:s.operator,onSelect:e=>{null==o||o({...s,operator:e})},renderItem:e=>(0,pe.jsx)(oe.Z,{title:(0,D.SW)(e.value,n),...e}),renderOrigin:e=>(0,pe.jsx)(Ce.Z,{...e,style:{marginRight:4,marginLeft:2,paddingLeft:2,paddingRight:2,borderRadius:4,flexShrink:0},children:(0,pe.jsxs)("div",{style:{display:"flex",alignItems:"center",...!d.isMobile&&{color:i.lightTextColor,fontSize:12}},children:[(0,pe.jsx)("span",{style:{marginRight:4},children:(0,D.SW)(s.operator,n).toLocaleLowerCase()}),(0,pe.jsx)(De,{})]})})};return(0,pe.jsx)(Fe.Z,{...u,mobileActionSheet:!0})}function Qe(e){let{propertyFilter:t,schema:o,parentStore:n,onChange:a}=e;const s=(0,l.Fg)(),d=(0,r.O7)(),{property:u}=t,{device:p}=d,g=o[u],h=(0,c.a_)(t.filter)?t.filter.subfilter:t.filter,C=(0,i.VK)((()=>(0,c.fI)({schema:o,property:u,getRecordModel:n.getRecordModel})),[n,u,o]);if((0,c.a_)(h))return null;let x=(0,c.xm)(C);g&&(0,_.Dt)(g)&&(x=x.filter((e=>!(0,c._N)(e))));const m={width:190,items:x,selectedItem:h.operator,getKey:e=>e,onSelect:e=>{qe((0,D.li)(C,h,e,"propertyFilter"),a,t)},renderItem:e=>(0,pe.jsx)(oe.Z,{title:(0,D.WC)(e.value),...e}),renderOrigin:e=>(0,pe.jsx)(Ce.Z,{...e,style:{marginRight:4,marginLeft:2,paddingLeft:2,paddingRight:2,borderRadius:4,flexShrink:0},children:(0,pe.jsxs)("div",{style:{display:"flex",alignItems:"center",...!p.isMobile&&{color:s.mediumTextColor,fill:s.lightIconColor,fontWeight:500,fontSize:12}},children:[(0,pe.jsx)("span",{style:{marginRight:4},children:(0,D.WC)(h.operator).toLocaleLowerCase()}),(0,pe.jsx)(De,{})]})})};return(0,pe.jsx)(Fe.Z,{...m,mobileActionSheet:!0})}function Je(e){let{parent:t,userCanConfigureFilters:o,onDelete:n,onAddToCombinatorFilter:i}=e;const l=(0,r.O7)(),{device:a}=l;let s;s=a.isMobile?{menuType:O.og.ActionSheet}:{menuType:O.og.Popup,maxHeight:c.ot};const d=o?w.oA([{key:"delete",render:e=>(0,pe.jsx)(oe.Z,{...e,title:(0,pe.jsx)(k.FormattedMessage,{id:"database.filterValue.deleteFilter.title",defaultMessage:"Delete filter"}),icon:(0,y.y)({width:14}),isRedOnHover:!0}),action:()=>{t.close(),null==n||n()}},{key:"merge",render:e=>(0,pe.jsx)(je.Z,{placement:q.u.Right,style:{maxWidth:240,whiteSpace:void 0},renderTooltip:()=>(0,pe.jsx)("div",{children:(0,pe.jsx)(V.ep,{})}),render:t=>(0,pe.jsx)(oe.Z,{...(0,H.Z)(e,t),title:(0,pe.jsx)(k.FormattedMessage,{id:"database.filterValue.mergeIntoAdvancedFilter.title",defaultMessage:"Add to advanced filter"}),icon:(0,v.Q)({width:14})})}),action:()=>{t.close(),null==i||i()}}]):[];return(0,pe.jsx)(ie.Z,{...s,children:(0,pe.jsx)(le.Z,{type:le.i.Vertical,sections:[{key:"actions",render:e=>(0,pe.jsx)(ce.Z,{disableMobilePadding:!0,...e}),items:d}],initialFocus:void 0})})}function Xe(e){let{propertySchema:t,propertyFilter:o,onChange:n}=e;return(0,c.c3)(t)?(0,pe.jsx)(Ne,{propertyFilter:o,onChange:n,propertySchema:t}):(0,pe.jsx)(pe.Fragment,{children:t.name})}function $e(e){let{userCanConfigureFilters:t,onDelete:o,onAddToCombinatorFilter:n}=e;const i=(0,r.O7)(),{device:l}=i;return(0,pe.jsx)(xe.ZP,{popupType:i.device.isMobile?ye.kQ.SlideUp:ye.kQ.Popup,render:e=>(0,pe.jsx)(Je,{parent:e,userCanConfigureFilters:t,onDelete:o,onAddToCombinatorFilter:n}),renderOrigin:e=>t&&(0,pe.jsx)(me.Z,{icon:f.o,style:{...!l.isMobile&&{height:20,width:20,marginRight:8,marginTop:-2}},...e}),style:{width:240},originGap:2,placementToOrigin:xe.pO.Right,alignmentToOrigin:xe.vR.Start})}function Ye(e){let{propertyFilter:t,onChange:o,schema:n,parentStore:r,userCanConfigureFilters:i,onDelete:a,onAddToCombinatorFilter:s,context:d}=e;const u=(0,l.Fg)();if(d!==Pe.PropertyFilter)return null;const{property:p}=t,g=n[p];return g?(0,pe.jsxs)("div",{style:{display:"flex",color:u.lightTextColor,fontSize:12,marginBottom:6},children:[(0,pe.jsx)("span",{style:{flexShrink:1,marginLeft:8,...R.Z.textOverflowStyle},children:(0,pe.jsx)(Xe,{propertyFilter:t,onChange:o,propertySchema:g})}),(0,c.a_)(t.filter)&&(0,pe.jsx)(Ee,{propertyFilter:t,onChange:o}),(0,pe.jsx)(Qe,{propertyFilter:t,schema:n,parentStore:r,onChange:o}),(0,pe.jsx)("div",{style:{flexGrow:1}}),(0,pe.jsx)($e,{userCanConfigureFilters:i,onDelete:a,onAddToCombinatorFilter:s})]}):null}function et(e){let{propertyFilter:t,schema:o,context:n,onChange:r,parentStore:i}=e;const{property:l}=t,a=o[l];return a?n===Pe.PropertyFilter?(0,pe.jsxs)("div",{style:{display:"flex"},children:[(0,pe.jsx)("span",{style:{fontWeight:R.Z.fontWeight.medium,flexShrink:1,marginLeft:8,maxWidth:150,...R.Z.textOverflowStyle},children:(0,pe.jsx)(Xe,{propertyFilter:t,onChange:r,propertySchema:a})}),(0,c.a_)(t.filter)&&(0,pe.jsx)(Ee,{propertyFilter:t,onChange:r}),(0,pe.jsx)(Qe,{propertyFilter:t,schema:o,parentStore:i,onChange:r})]}):(0,pe.jsx)(pe.Fragment,{children:a.name}):null}function tt(e){let{context:t,userCanConfigureFilters:o,onDelete:n,onAddToCombinatorFilter:r}=e;return t!==Pe.PropertyFilter?null:(0,pe.jsx)($e,{userCanConfigureFilters:o,onDelete:n,onAddToCombinatorFilter:r})}function ot(e){let{filter:t,onChange:o,propertyFilter:n,schema:i,parentStore:l,userCanConfigureFilters:a,onDelete:s,onAddToCombinatorFilter:d,context:u,onClose:p}=e;const g=(0,r.O7)(),h=(0,k.useIntl)(),{device:C}=g,x=(0,pe.jsx)(ce.Z,{isInput:!0,disableDesktopPadding:!0,children:(0,pe.jsx)(fe.ZP,{focus:!0,focusInitial:!0,focusAfterAnimation:!0,value:(0,c.vR)(t)&&t.value.value?t.value.value:"",onChange:e=>{We({type:"exact",value:e.target.value},o,n)},onClearButtonClick:()=>{We({type:"exact",value:void 0},o,n)},placeholder:h.formatMessage({defaultMessage:"Type a value…",id:"database.filterValue.textType.searchPlaceholder"}),showClearButton:!0,textWrapperStyle:{marginLeft:8,marginRight:8}})}),m=(0,pe.jsxs)(ce.Z,{disableMobileBorders:!0,disableMobilePadding:!0,children:[!C.isMobile&&(0,pe.jsx)(Ye,{propertyFilter:n,onChange:o,schema:i,parentStore:l,userCanConfigureFilters:a,onDelete:s,onAddToCombinatorFilter:d,context:u}),(0,c.vR)(t)&&x]});let f;return f=C.isMobile?{menuType:O.og.Modal,title:(0,pe.jsx)(et,{propertyFilter:n,schema:i,context:u,onChange:o,parentStore:l}),left:(0,pe.jsx)(tt,{context:u,userCanConfigureFilters:a,onDelete:s,onAddToCombinatorFilter:d}),right:(0,pe.jsx)(se.DoneMenuText,{}),onClickRight:p,header:m}:{menuType:O.og.Popup,maxHeight:c.ot,width:220,header:m},(0,pe.jsx)(ie.Z,{...f})}function nt(e){let{filter:t,onChange:o,propertyFilter:n,schema:i,parentStore:l,userCanConfigureFilters:a,onDelete:s,onAddToCombinatorFilter:d,context:u,onClose:p}=e;const g=(0,r.O7)(),h=(0,k.useIntl)(),{device:C}=g,x=(0,pe.jsx)(ce.Z,{isInput:!0,disableDesktopPadding:!0,children:(0,pe.jsx)(fe.ZP,{focus:!0,focusInitial:!0,focusAfterAnimation:!0,value:(0,c.vR)(t)&&"number"==typeof t.value.value?t.value.value.toString():"",inputLeft:(0,pe.jsx)(Ue,{filter:t}),onChange:e=>{We({type:"exact",value:(0,K.m)(e.target.value,h)},o,n)},onClearButtonClick:()=>{We({type:"exact",value:void 0},o,n)},placeholder:h.formatMessage({defaultMessage:"Type a value…",id:"database.filterValue.numberType.searchPlaceholder"}),showClearButton:!0,textWrapperStyle:{marginLeft:8,marginRight:8}})}),m=(0,pe.jsxs)(ce.Z,{disableMobileBorders:!0,disableMobilePadding:!0,children:[!C.isMobile&&(0,pe.jsx)(Ye,{propertyFilter:n,onChange:o,schema:i,parentStore:l,userCanConfigureFilters:a,onDelete:s,onAddToCombinatorFilter:d,context:u}),(0,c.vR)(t)&&x]});let f;return f=C.isMobile?{menuType:O.og.Modal,title:(0,pe.jsx)(et,{propertyFilter:n,schema:i,context:u,onChange:o,parentStore:l}),left:(0,pe.jsx)(tt,{context:u,userCanConfigureFilters:a,onDelete:s,onAddToCombinatorFilter:d}),right:(0,pe.jsx)(se.DoneMenuText,{}),onClickRight:p,header:m}:{menuType:O.og.Popup,maxHeight:c.ot,width:220,header:m},(0,pe.jsx)(ie.Z,{...f})}function rt(e,t,o){t.setState(e),o.setState({focus:{section:0,indexLocal:0,indexGlobal:0}})}function it(e){let{filter:t,schema:o,propertyFilter:n,parentStore:a,onChange:s,onClose:g,userCanConfigureFilters:h,onDelete:C,onAddToCombinatorFilter:x,context:m,queryStore:f,menuListStore:v}=e;const y=(0,k.useIntl)(),S=(0,l.Fg)(),F=(0,r.O7)(),{device:j}=F,b=(0,i.VK)((()=>f.state),[f]),M=(0,i.VK)((()=>(0,B.tJ)(o,n,a)),[o,n,a]);if(!M||!(0,d.cu)(M))return null;const Z=M.options||[],T=(0,c.vR)(t)?(0,c.dx)(t)?(0,c.mg)(t):(0,c.qC)(t):[],R=Le({query:b,propertySchema:M,selectedValues:T,updateValue:e=>{We(e,s,n)},isMobile:j.isMobile,styles:{checkboxIcon:{fill:S.regularIconColor,pointerEvents:"none"}}}),V=T.map((e=>{if(void 0===e.value)return null;const t=(0,u.i7)(Z,e.value);return t?(0,pe.jsx)(Ae.a,{format:j.isMobile?p.lo.Large:p.lo.Small,isSingle:!1,value:t.value,color:t.color,showRemoveButton:!0,onClickRemove:()=>{We(w.zu(T,e),s,n)}},t.id):null})),A=(0,pe.jsx)(ue.ZP,{focus:!j.isMobile||void 0,focusAfterAnimation:!0,format:ue.UR.FilterValue,tokens:V,placeholder:y.formatMessage({defaultMessage:"Select one or more options…",id:"database.filterValue.selectType.searchPlaceholder"}),onRemoveLastToken:()=>{We(T.slice(0,T.length-1),s,n)},onClearButtonClick:()=>{We([],s,n),null==g||g()},value:b,onChange:e=>{rt(e.target.value,f,v)},dontShowBorderBottom:j.isAndroid,showClearButton:!0}),P=(0,pe.jsxs)(ce.Z,{desktopStyle:{paddingBottom:0},children:[!j.isMobile&&(0,pe.jsx)(Ye,{propertyFilter:n,onChange:s,schema:o,parentStore:a,userCanConfigureFilters:h,onDelete:C,onAddToCombinatorFilter:x,context:m}),(0,c.vR)(t)&&A]});let I;return I=j.isMobile?{menuType:O.og.Modal,title:(0,pe.jsx)(et,{propertyFilter:n,schema:o,context:m,onChange:s,parentStore:a}),left:(0,pe.jsx)(tt,{context:m,userCanConfigureFilters:h,onDelete:C,onAddToCombinatorFilter:x}),right:(0,pe.jsx)(se.DoneMenuText,{}),onClickRight:g,header:P}:{menuType:O.og.Popup,maxHeight:c.ot,width:260,header:P,disableHeaderBorder:!0,tokenInputHeader:!0},(0,pe.jsx)(ie.Z,{...I,children:(0,c.vR)(t)&&(0,pe.jsxs)(pe.Fragment,{children:[0===R.length&&(0,pe.jsx)(ce.Z,{children:(0,pe.jsx)(ae.Z,{title:(0,pe.jsx)(k.FormattedMessage,{defaultMessage:"No results",id:"database.filterValue.selectType.noResults.message"})})}),R.length>0&&(0,pe.jsx)(le.Z,{type:le.i.Vertical,initialFocus:0,sections:[{key:"select",render:e=>(0,pe.jsx)(ce.Z,{...e}),items:R}],store:v,onAccept:()=>{rt("",f,v)}})]})})}function lt(e){let{filter:t,error:o,results:l,schema:a,propertyFilter:d,parentStore:u,onChange:g,allowRelativePersonFilter:h,onClose:C,userCanConfigureFilters:x,onDelete:m,onAddToCombinatorFilter:f,context:v,queryStore:y,menuListStore:S}=e;const F=(0,r.O7)(),b=(0,k.useIntl)(),{device:Z}=F,T=(0,i.VK)((()=>y.state),[y]),R=(0,i.VK)((()=>(0,B.tJ)(a,d,u)),[a,d,u]),V=(0,n.useMemo)((()=>(0,c.vR)(t)?(0,c.R8)(t):[]),[t]),A=(0,i.VK)((()=>w.oA(V.map(((e,t)=>{if("exact"===e.type&&e.value){const t=(0,s.Hl)({pointer:e.value,getRecordValue:u.getRecordValue});return(0,pe.jsx)(be.ZP,{actor:t,format:Z.isMobile?be.ZP.Format.Large:be.ZP.Format.Small,showRemoveButton:!0,onClickRemove:()=>{We(w.zu(V,e),g,d)},shouldShrink:!0,isSingle:!1},e.value.id)}if("relative"===e.type&&"me"===e.value&&h)return(0,pe.jsx)(de.Z,{format:Z.isMobile?p.lo.Large:p.lo.Small,value:(0,pe.jsx)(Ke,{}),onClickRemove:()=>{We(w.zu(V,e),g,d)},showRemoveButton:!0,isSingle:!1,shouldShrink:!0,backgroundColor:"transparent",showFullValueTooltip:!0},t)})))),[h,V,Z.isMobile,g,u.getRecordValue,d]);if(!R)return null;const P=(0,pe.jsx)(ue.ZP,{focus:!Z.isMobile||void 0,focusAfterAnimation:!0,format:ue.UR.FilterValue,tokens:A,placeholder:b.formatMessage({defaultMessage:"Search for one or more people…",id:"database.filterValue.personType.searchPlaceholder"}),onRemoveLastToken:()=>{We(V.slice(0,V.length-1),g,d)},onClearButtonClick:()=>{We([],g,d),null==C||C()},value:T,onChange:e=>{rt(e.target.value,y,S)},dontShowBorderBottom:Z.isAndroid,showClearButton:!0,style:{maxHeight:"20vh",overflowY:"auto"}}),I=(0,pe.jsxs)(ce.Z,{desktopStyle:{paddingBottom:0},children:[!Z.isMobile&&(0,pe.jsx)(Ye,{propertyFilter:d,onChange:g,schema:a,parentStore:u,userCanConfigureFilters:x,onDelete:m,onAddToCombinatorFilter:f,context:v}),(0,c.vR)(t)&&P]});let D;D=Z.isMobile?{menuType:O.og.Modal,title:(0,pe.jsx)(et,{propertyFilter:d,schema:a,context:v,onChange:g,parentStore:u}),left:(0,pe.jsx)(tt,{context:v,userCanConfigureFilters:x,onDelete:m,onAddToCombinatorFilter:f}),right:(0,pe.jsx)(se.DoneMenuText,{}),onClickRight:C,header:I}:{menuType:O.og.Popup,maxHeight:c.ot,width:260,header:I,disableHeaderBorder:!0};const _=w.oA((l&&l.users||[]).map((e=>function(e,t,o,n,r){const{device:i}=n,l=Boolean(t.find((t=>{var o;return"exact"===t.type&&(null===(o=t.value)||void 0===o?void 0:o.id)===e.id})));return{key:e.id,render:t=>(0,pe.jsx)(oe.Z,{...t,title:(0,pe.jsx)(be.vw,{isSingle:!0,shouldShrink:!0,format:i.isMobile?be.vw.Format.Large:be.vw.Format.Medium,userValue:e,showRemoveButton:!1}),isTokenTitle:!0,checkState:l}),action:()=>{We(l?t.filter((t=>{var o;return!("exact"===t.type&&(null===(o=t.value)||void 0===o?void 0:o.id)===e.id)})):[...t,{type:"exact",value:{table:M.KJ,id:e.id}}],r,o)}}}(e,V,d,F,g)))),L=["created_by","last_edited_by"].includes(R.type)?w.oA((l&&l.bots||[]).map((e=>function(e,t,o,n,r){const{device:i}=n,l=Boolean(t.find((t=>{var o;return"exact"===t.type&&(null===(o=t.value)||void 0===o?void 0:o.id)===e.id})));return{key:e.id,render:t=>(0,pe.jsx)(oe.Z,{...t,title:(0,pe.jsx)(be.Jn,{isSingle:!0,shouldShrink:!0,format:i.isMobile?be.Jn.Format.Large:be.Jn.Format.Medium,botValue:e,showRemoveButton:!1}),isTokenTitle:!0,checkState:l}),action:()=>{We(l?t.filter((t=>{var o;return!("exact"===t.type&&(null===(o=t.value)||void 0===o?void 0:o.id)===e.id)})):[...t,{type:"exact",value:{table:j.cZ,id:e.id}}],r,o)}}}(e,V,d,F,g)))):[];if(h&&l&&(!T||"me".includes(T))){const e=Boolean(V.find((e=>"relative"===e.type&&"me"===e.value)));_.unshift({key:"me",render:t=>(0,pe.jsx)(oe.Z,{...t,title:(0,pe.jsx)(Ke,{}),checkState:e,style:Z.isMobile?void 0:{fontSize:14}}),action:()=>{We(e?V.filter((e=>{let{value:t}=e;return"me"!==t})):[...V,{type:"relative",value:"me"}],g,d)}})}const H=[];return _.length>0&&H.push({key:"user property",render:e=>(0,pe.jsx)(ce.Z,{...e}),items:_}),L.length>0&&H.push({key:"bot property",render:e=>(0,pe.jsx)(ce.Z,{...e,title:"Pick a bot"}),items:L}),(0,pe.jsx)(ie.Z,{...D,children:(0,c.vR)(t)&&(0,pe.jsxs)(pe.Fragment,{children:[o&&(0,pe.jsx)(ce.Z,{children:(0,pe.jsx)(ae.Z,{title:(0,pe.jsx)(k.FormattedMessage,{defaultMessage:"Something went wrong.",id:"database.filterValue.personType.searchPersonPropertyMenuItem.errorMessage"})})}),0===H.length&&l&&!o&&(0,pe.jsx)(ce.Z,{children:(0,pe.jsx)(ae.Z,{title:(0,pe.jsx)(k.FormattedMessage,{defaultMessage:"No results",id:"database.filterValue.personType.noResults.message"})})}),!l&&!o&&(0,pe.jsx)(ce.Z,{children:(0,pe.jsx)(Re.Z,{})}),H.length>0&&(0,pe.jsx)(le.Z,{type:le.i.Vertical,initialFocus:0,sections:H,store:S,onAccept:()=>{rt("",y,S)}})]})})}function at(e){var t;let{filter:o,context:n,propertyFilter:i,schema:l,onChange:a,parentStore:s,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p,onClose:g,menuListStore:h}=e;const C=(0,r.O7)(),{device:x}=C;let m;m=x.isMobile?{menuType:O.og.Modal,title:(0,pe.jsx)(et,{propertyFilter:i,schema:l,context:n,onChange:a,parentStore:s}),left:(0,pe.jsx)(tt,{context:n,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p}),right:(0,pe.jsx)(se.DoneMenuText,{}),onClickRight:g}:{menuType:O.og.Popup,maxHeight:c.ot,width:220,footer:(0,pe.jsx)(Ge,{onChange:a,propertyFilter:i,onClose:g,filter:o})};const f=null===(t=o.value)||void 0===t?void 0:t.value;return(0,pe.jsxs)(ie.Z,{...m,children:[n===Pe.PropertyFilter&&(0,pe.jsx)(ce.Z,{children:!x.isMobile&&(0,pe.jsx)(Ye,{propertyFilter:i,onChange:a,schema:l,parentStore:s,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p,context:n})}),(0,pe.jsx)(le.Z,{type:le.i.Vertical,initialFocus:0,sections:[{key:"select",render:e=>(0,pe.jsx)(ce.Z,{style:n===Pe.PropertyFilter?{paddingTop:0}:void 0,...e}),items:[{key:"unchecked",render:e=>(0,pe.jsx)(oe.Z,{...e,title:(0,pe.jsx)(k.FormattedMessage,{defaultMessage:"Unchecked",id:"database.filterValue.checkboxType.unchecked.title"}),isTokenTitle:!0,checkState:!1===f}),action:()=>{We({type:"exact",value:!1},a,i)}},{key:"checked",render:e=>(0,pe.jsx)(oe.Z,{...e,title:(0,pe.jsx)(k.FormattedMessage,{defaultMessage:"Checked",id:"database.filterValue.checkboxType.checked.title"}),isTokenTitle:!0,checkState:!0===f}),action:()=>{We({type:"exact",value:!0},a,i)}}]}],store:h,onAccept:g}),x.isMobile&&(0,pe.jsx)(Ge,{onChange:a,propertyFilter:i,onClose:g,filter:o})]})}function st(e){let{filter:t,error:o,results:l,schema:a,propertyFilter:s,parentStore:u,onChange:g,onClose:h,userCanConfigureFilters:C,onDelete:x,onAddToCombinatorFilter:m,context:f,collectionViewId:v,queryStore:y,menuListStore:j,allowCurrentPageInRelatedCollectionFilter:M}=e;const Z=(0,r.O7)(),R=(0,k.useIntl)(),{device:V}=Z,A=(0,i.VK)((()=>y.state),[y]),P=(0,i.VK)((()=>(0,B.tJ)(a,s,u)),[a,s,u]),I=(0,i.VK)((()=>function(e,t){if(!e)return;const o=E.Xr.createChildStore(t,{table:b.np,id:e}).getParentBlockStore();return o?o.getNearestAncestorTemplateStore():void 0}(v,u)),[v,u]),D=(0,i.VK)((()=>null==I?void 0:I.getAssociatedCollectionId()),[I]),_=(0,n.useMemo)((()=>(0,c.vR)(t)?(0,c.YO)(t):[]),[t]),H=(0,i.VK)((()=>{const e=(0,B.tJ)(a,s,u);return e&&(0,d.p_)(e)?{appConfigUri:(0,W.ke)(e,u),schema:(0,W.uJ)(e,Z)}:{}}),[a,s,u,Z]),K=(0,i.VK)((()=>function(e,t,o,n,r){const{appConfigUri:i,schema:l}=n;if(!l)return[];if(!i||!(0,L.Sh)(l,i))return[];const a=(0,S.Zv)(l,i),s=S.qB[i];return w.oA(a.map((n=>{if(!e||n.includes(e)){const e={type:"relative",value:{type:"builtin",variable:n}},i=He(t,e);return{key:n,render:e=>(0,pe.jsx)(oe.Z,{...e,title:(0,pe.jsx)(k.FormattedMessage,{...s[n].messageDescriptor}),checkState:i}),action:ze(i,t,e,o,r)}}})))}(A,_,s,H,g)),[A,_,s,H,g]),q=(0,i.VK)((()=>M?function(e,t,o,n,r){const i=e.formatMessage(Ie.pageContainingThisView);if(!t||i.toLowerCase().includes(t)){const e={type:"relative",value:{type:"current_page_in_related_collection"}},t=He(o,e);return{key:e.value.type,render:e=>(0,pe.jsx)(oe.Z,{...e,title:i,checkState:t}),action:ze(t,o,e,n,r)}}}(R,A,_,s,g):void 0),[R,A,_,s,g,M]);if(!P||!(0,d.p_)(P))return null;const z=(0,d.F0)(P);if(!z)return null;const G=w.oA(_.map(((e,t)=>{if(!e.value)return null;const o={format:V.isMobile?p.lo.Large:p.lo.Small,shouldWrap:!1,showRemoveButton:!0,isSingle:!1,shouldShrink:!0,onClickRemove:()=>{We(w.zu(_,e),g,s)}},n=e.type;if("exact"===n)return(0,pe.jsx)(Ve.Z,{blockId:e.value,parentStore:u,...o},e.value);if("relative"===n){var r;const{appConfigUri:n}=H;return"current_page_in_related_collection"===e.value.type?(0,pe.jsx)(de.Z,{value:R.formatMessage(Ie.pageContainingThisView),backgroundColor:"transparent",showFullValueTooltip:!0,...o},t):n&&"builtin"===e.value.type?(0,pe.jsx)(de.Z,{value:(0,pe.jsx)(k.FormattedMessage,{...null===(r=S.qB[n])||void 0===r||null===(r=r[e.value.variable])||void 0===r?void 0:r.messageDescriptor}),backgroundColor:"transparent",showFullValueTooltip:!0,...o},t):null}(0,T.t1)(n)}))),U=(0,pe.jsx)(ue.ZP,{focus:!V.isMobile||void 0,focusAfterAnimation:!0,format:ue.UR.FilterValue,tokens:G,placeholder:R.formatMessage({defaultMessage:"Search for one or more pages…",id:"database.filterValue.relationType.searchPlaceholder"}),onRemoveLastToken:()=>{We(_.slice(0,_.length-1),g,s)},onClearButtonClick:()=>{We([],g,s),null==h||h()},value:A,onChange:e=>{rt(e.target.value,y,j)},dontShowBorderBottom:V.isAndroid,style:{maxHeight:"20vh",overflowY:"auto"},showClearButton:!0}),N=(0,pe.jsxs)(ce.Z,{desktopStyle:{paddingBottom:0},children:[!V.isMobile&&(0,pe.jsx)(Ye,{propertyFilter:s,onChange:g,schema:a,parentStore:u,userCanConfigureFilters:C,onDelete:x,onAddToCombinatorFilter:m,context:f}),(0,c.vR)(t)&&U]});let Q;Q=V.isMobile?{menuType:O.og.Modal,title:(0,pe.jsx)(et,{propertyFilter:s,schema:a,context:f,onChange:g,parentStore:u}),left:(0,pe.jsx)(tt,{context:f,userCanConfigureFilters:C,onDelete:x,onAddToCombinatorFilter:m}),right:(0,pe.jsx)(se.DoneMenuText,{}),onClickRight:h,header:N}:{menuType:O.og.Popup,maxHeight:c.ot,width:260,header:N,disableHeaderBorder:!0},l&&!A&&I&&z&&D===z&&(l=w.jj([I.id,...l]));let J=[];if(l){const e=function(e,t,o,n,r){return e.map((e=>{const i={type:"exact",value:e},l=He(t,i),a=E.G.createChildStore(o,{table:F.iU,id:e});return{key:e,action:ze(l,t,i,n,r),render:e=>(0,pe.jsx)(Se.Z,{store:a,checkState:l,hidePath:!0,...e})}}))}(l,_,u,s,g);J=((0,c.a_)(s.filter)?[]:K).concat(e),q&&(J=[q,...J])}return(0,pe.jsx)(ie.Z,{...Q,children:(0,c.vR)(t)&&(0,pe.jsxs)(pe.Fragment,{children:[o&&(0,pe.jsx)(ce.Z,{children:(0,pe.jsx)(ae.Z,{title:(0,pe.jsx)(k.FormattedMessage,{defaultMessage:"Something went wrong.",id:"database.filterValue.relationType.searchRelationPropertyMenuItem.errorMessage"})})}),0===J.length&&l&&!o&&(0,pe.jsx)(ce.Z,{children:(0,pe.jsx)(ae.Z,{title:(0,pe.jsx)(k.FormattedMessage,{defaultMessage:"No results",id:"database.filterValue.relationType.noResults.message"})})}),!l&&!o&&(0,pe.jsx)(ce.Z,{children:(0,pe.jsx)(Re.Z,{})}),J.length>0&&(0,pe.jsx)(le.Z,{type:le.i.Vertical,initialFocus:0,sections:[{key:"results",render:e=>(0,pe.jsx)(ce.Z,{...e}),items:J}],store:j,onAccept:()=>{rt("",y,j)}})]})})}function ct(e){let{filter:t,schema:o,propertyFilter:n,parentStore:r,onChange:l,allowRelativeDateFilter:a,dateRangeFilterPopupStore:s}=e;const d=(0,i.VK)((()=>(0,B.tJ)(o,n,r)),[o,n,r]);if(!d)return null;let u;if((0,c.TQ)(t)&&"exact"===t.value.type&&t.value.value){const e=t.value.value;u={starting:e.start_date?{type:"date",start_date:e.start_date}:void 0,ending:e.end_date?{type:"date",start_date:e.end_date}:void 0}}else u=(0,c.TQ)(t)&&"relative"===t.value.type?t.value:{starting:void 0,ending:void 0};const p={disableMenuWrap:!0,title:d.name,value:u,onUpdate:e=>{var o,r;if(e.error)return null;const i={...u,...e.value},a=null===(o=i.starting)||void 0===o?void 0:o.start_date,s=null===(r=i.ending)||void 0===r?void 0:r.start_date;qe({operator:"date_is_within",use_end:"use_end"in t?null==t?void 0:t.use_end:void 0,value:{type:"exact",value:a||s?{type:"daterange",start_date:a,end_date:s}:void 0}},l,n)},allowRelativeRangeFilter:a,relativeRangePopupStore:s,onUpdateRelativeFilter:e=>{qe({...t,value:e},l,n)}};return(0,pe.jsx)(pe.Fragment,{children:(0,pe.jsx)(ce.Z,{children:(0,pe.jsx)(Te.Z,{...p})})})}function dt(e){let{filter:t,events:o,onChange:n,propertyFilter:i,allowRelativeDateFilter:a,dateFilterPopupStore:s}=e;const c=(0,l.Fg)(),d=(0,r.O7)(),u=(0,k.useIntl)();return(0,pe.jsx)(Ze.Z,{...o,placeholder:u.formatMessage(Ie.startingMessage),focused:"exact"===t.value.type,value:t.value,onUpdate:e=>{var o;if(e.error)return null;const r=null===(o=e.value)||void 0===o?void 0:o.start_date;qe({...t,value:{type:"exact",value:r?{type:"date",start_date:r}:void 0}},n,i)},inputRight:a&&(0,pe.jsx)(me.Z,{icon:m.i,iconStyle:{width:12,height:12},ariaLabel:u.formatMessage(Ie.chevronDownAriaLabel),style:{...!d.device.isMobile&&{height:20,width:20},color:c.mediumIconColor},onClick:()=>{s.setState({open:!0})}}),hideClearButton:"relative"===t.value.type||void 0,isRightLastElementOfInput:!0})}function ut(e){let{filter:t,context:o,onChange:n,propertyFilter:i,schema:a,parentStore:s,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p,onClose:g,menuListStore:h}=e;const C=(0,l.Fg)(),x=(0,r.O7)(),{device:m}=x,f=(0,c.vR)(t)?(0,c.fl)(t):[],v=f.map((e=>{let{value:t}=e;return t})),y=Z.zz.map((e=>{const t=v.includes(e);return{key:e,render:o=>(0,pe.jsx)(oe.Z,{icon:(0,pe.jsx)(ne.Z,{checked:t,size:14,style:{fill:C.regularIconColor,pointerEvents:"none"}}),title:(0,D.cq)({type:"exact",value:e}),...o}),action:()=>{if(t)We(f.filter((t=>{let{value:o}=t;return o!==e})),n,i);else{const t={type:"exact",value:e};We([...f,t],n,i)}}}}));let S;return S=m.isMobile?{menuType:O.og.Modal,title:(0,pe.jsx)(et,{propertyFilter:i,schema:a,context:o,onChange:n,parentStore:s}),left:(0,pe.jsx)(tt,{context:o,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p}),right:(0,pe.jsx)(se.DoneMenuText,{}),onClickRight:g}:{menuType:O.og.Popup,maxHeight:c.ot,width:220,footer:(0,pe.jsx)(Ge,{onChange:n,propertyFilter:i,onClose:g,filter:t})},(0,pe.jsxs)(ie.Z,{...S,children:[o===Pe.PropertyFilter&&(0,pe.jsx)(ce.Z,{children:!m.isMobile&&(0,pe.jsx)(Ye,{propertyFilter:i,onChange:n,schema:a,parentStore:s,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p,context:o})}),(0,pe.jsx)(le.Z,{type:le.i.Vertical,initialFocus:0,sections:[{key:"select",render:e=>(0,pe.jsx)(ce.Z,{...e}),items:y}],store:h})]})}function pt(e){let{filter:t,parentStore:o,schema:n,propertyFilter:l,onChange:a,allowRelativePersonFilter:s,onClose:c,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p,context:g,queryStore:h,menuListStore:C}=e;const x=(0,r.O7)(),m=(0,i.VK)((()=>h.state),[h]);return(0,pe.jsx)(P.Z,{request:m,performRequest:e=>async function(e,t,o){const n=await A.FF.searchActions.load();let{users:r,bots:i}=await n.searchSpaceActors({environment:o,query:e,membersOnly:!1});return r=r.slice(0,20),i=i.slice(0,20),await Promise.all([...r.map((async e=>{let{id:o}=e;const n=(0,E.Kv)(t,{table:M.KJ,id:o});await n.load()})),...i.map((async e=>{const o=(0,E.Kv)(t,{table:j.cZ,id:e.id,spaceId:e.space_id});await o.load()}))]),{users:r,bots:i}}(e,o,x),render:(e,r)=>(0,pe.jsx)(lt,{schema:n,propertyFilter:l,parentStore:o,onChange:a,allowRelativePersonFilter:s,onClose:c,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p,context:g,queryStore:h,menuListStore:C,filter:t,error:e,results:r})})}function gt(e){let{filter:t,schema:o,propertyFilter:n,parentStore:l,onChange:a,onClose:s,userCanConfigureFilters:c,onDelete:u,onAddToCombinatorFilter:p,context:g,collectionViewId:h,queryStore:C,menuListStore:x,allowCurrentPageInRelatedCollectionFilter:m}=e;const f=(0,r.O7)(),v=(0,i.VK)((()=>C.state),[C]),y=(0,i.VK)((()=>G.default.state.currentSpaceStore),[]),S=(0,i.VK)((()=>z.Z.state.publicPageData),[]),j=(0,i.VK)((()=>(0,B.tJ)(o,n,l)),[o,n,l]),b=(null==y?void 0:y.id)||(null==S?void 0:S.spaceId);if(!j||!(0,d.p_)(j)||!b)return null;const M=(0,d.F0)(j);return M?(0,pe.jsx)(P.Z,{request:{query:v,spaceId:b,collectionId:M},performRequest:e=>async function(e,t,o){const{query:n,spaceId:r,collectionId:i}=e;if(!r||!i)return[];const l=await A.FF.searchActions.load(),{results:a}=await l.searchPagesInCollection({environment:o,query:n,collectionId:i,limit:20,spaceId:r,excludeTemplates:!0,source:"relation_menu",includePublicPagesWithoutExplicitAccess:!0,boostRecentlyViewedPages:!1});return 0===a.length?[]:(await Promise.all(a.map((async e=>{const o=(0,E.Kv)(t,{table:F.iU,id:e});await o.load()}))),a)}(e,l,f),render:(e,r)=>(0,pe.jsx)(st,{schema:o,propertyFilter:n,parentStore:l,onChange:a,onClose:s,userCanConfigureFilters:c,onDelete:u,onAddToCombinatorFilter:p,context:g,collectionViewId:h,queryStore:C,menuListStore:x,filter:t,error:e,results:r,allowCurrentPageInRelatedCollectionFilter:m})}):null}function ht(e){let{filter:t,onChange:o,propertyFilter:n,allowRelativeDateFilter:r,dateFilterPopupStore:l}=e;const a=(0,i.VK)((()=>I.AK.state),[]);if(!(0,c.vR)(t))return null;const s="exact"===t.value.type?t.value.value:(0,h.Id)(t.value);return s&&!(0,g.J_)(s)?null:(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)(ce.Z,{children:(0,pe.jsx)(ke.Z,{type:"date",filterValue:t.value,onUpdate:e=>{qe({...t,value:e},o,n)},renderOrigin:e=>(0,pe.jsx)(dt,{onChange:o,propertyFilter:n,allowRelativeDateFilter:r,dateFilterPopupStore:l,filter:t,events:e}),disabled:"exact"===t.value.type&&r,buttonPopupStore:l})}),(0,pe.jsxs)(ce.Z,{style:{padding:"0px 14px 14px 14px"},children:[(0,pe.jsx)(we.Z,{firstDayOfWeek:a,selectValue:void 0!==s,value:s?h.OQ.notionDateToLuxon(s).toMillis():Date.now(),onChange:e=>{We({type:"exact",value:(0,h.hT)(e,(0,x.r)())},o,n)}}),"relative"===t.value.type&&(0,pe.jsx)(Me.Z,{isSmall:!0,style:{marginLeft:4,marginTop:4},children:(0,pe.jsx)(k.FormattedMessage,{id:"collectionFilterMenu.dateFilter.relativeDateFilter.description",defaultMessage:"Filter will update with the current date"})})]})]})}function Ct(e){let{filter:t,context:o,propertyFilter:n,schema:i,onChange:l,parentStore:a,userCanConfigureFilters:s,onDelete:d,onAddToCombinatorFilter:u,onClose:p,allowRelativeDateFilter:g,dateFilterPopupStore:h,dateRangeFilterPopupStore:C}=e;const x=(0,r.O7)(),{device:m}=x;let f;return f=m.isMobile?{menuType:O.og.Modal,title:(0,pe.jsx)(et,{propertyFilter:n,schema:i,context:o,onChange:l,parentStore:a}),left:(0,pe.jsx)(tt,{context:o,userCanConfigureFilters:s,onDelete:d,onAddToCombinatorFilter:u}),right:(0,pe.jsx)(se.DoneMenuText,{}),onClickRight:p}:{menuType:O.og.Popup,maxHeight:c.ot},(0,pe.jsxs)(ie.Z,{...f,children:[o===Pe.PropertyFilter&&!m.isMobile&&(0,pe.jsx)(ce.Z,{desktopStyle:{paddingBottom:0},children:(0,pe.jsx)(Ye,{propertyFilter:n,onChange:l,schema:i,parentStore:a,userCanConfigureFilters:s,onDelete:d,onAddToCombinatorFilter:u,context:o})}),(0,c.vR)(t)?(0,c.TQ)(t)?(0,pe.jsx)(ct,{schema:i,propertyFilter:n,parentStore:a,onChange:l,allowRelativeDateFilter:g,dateRangeFilterPopupStore:C,filter:t}):(0,pe.jsx)(ht,{onChange:l,propertyFilter:n,allowRelativeDateFilter:g,dateFilterPopupStore:h,filter:t}):void 0]})}function xt(e){let{propertyFilter:t,schema:o,parentStore:n,onChange:r,userCanConfigureFilters:l,onDelete:a,onAddToCombinatorFilter:s,context:u,onClose:p,collectionViewId:g,collectionContextStore:h,allowRelativePersonFilter:C,allowRelativeDateFilter:x,queryStore:m,menuListStore:f,dateFilterPopupStore:v,dateRangeFilterPopupStore:y}=e;const{property:S,filter:F}=t,j=(0,i.VK)((()=>(0,c.fI)({schema:o,property:S,getRecordModel:n.getRecordModel})),[n,S,o]),b=o[S],M=(0,i.VK)((()=>!(!h||!b)&&function(e){var t;let{collectionContextStore:o,propertySchema:n}=e;if(void 0===o.collectionViewModuleContextStore.state)return!1;const r=null===(t=o.collectionViewModuleContextStore.currentPageInRelatedCollectionStore())||void 0===t?void 0:t.getAssociatedCollectionId();return!!r&&(0,d.p_)(n)&&n.collection_id===r}({collectionContextStore:h,propertySchema:b})),[h,b]),Z=(0,c.a_)(F)?F.subfilter:F;if("text"===j)return(0,c.Ly)(Z)?(0,pe.jsx)(ot,{onChange:r,propertyFilter:t,schema:o,parentStore:n,userCanConfigureFilters:l,onDelete:a,onAddToCombinatorFilter:s,context:u,onClose:p,filter:Z}):null;if("relation"===j)return(0,c.e)(Z)?(0,pe.jsx)(gt,{schema:o,propertyFilter:t,parentStore:n,onChange:r,onClose:p,userCanConfigureFilters:l,onDelete:a,onAddToCombinatorFilter:s,context:u,collectionViewId:g,queryStore:m,menuListStore:f,filter:Z,allowCurrentPageInRelatedCollectionFilter:M}):null;if("checkbox"===j)return(0,c.XA)(Z)?(0,pe.jsx)(at,{context:u,propertyFilter:t,schema:o,onChange:r,parentStore:n,userCanConfigureFilters:l,onDelete:a,onAddToCombinatorFilter:s,onClose:p,menuListStore:f,filter:Z}):null;if("select"===j||"multi_select"===j)return(0,c.dx)(Z)||(0,c.NU)(Z)?(0,pe.jsx)(it,{schema:o,propertyFilter:t,parentStore:n,onChange:r,onClose:p,userCanConfigureFilters:l,onDelete:a,onAddToCombinatorFilter:s,context:u,queryStore:m,menuListStore:f,filter:Z}):null;if("status"===j)return(0,c.r2)(Z)?(0,pe.jsx)(he.Z,{propertyFilter:t,schema:o,filter:Z,parentStore:n,updateValue:e=>We(e,r,t),onClose:p,desktopTopActions:(0,pe.jsx)(Ye,{propertyFilter:t,onChange:r,schema:o,parentStore:n,userCanConfigureFilters:l,onDelete:a,onAddToCombinatorFilter:s,context:u}),mobileMenuTitle:(0,pe.jsx)(et,{propertyFilter:t,schema:o,context:u,onChange:r,parentStore:n}),mobileMoreActions:(0,pe.jsx)(tt,{context:u,userCanConfigureFilters:l,onDelete:a,onAddToCombinatorFilter:s}),collectionContextStore:h}):null;if("person"===j)return(0,c.Gb)(Z)?(0,pe.jsx)(pt,{parentStore:n,schema:o,propertyFilter:t,onChange:r,allowRelativePersonFilter:C,onClose:p,userCanConfigureFilters:l,onDelete:a,onAddToCombinatorFilter:s,context:u,queryStore:m,menuListStore:f,filter:Z}):null;if("number"===j)return(0,c.h6)(Z)?(0,pe.jsx)(nt,{onChange:r,propertyFilter:t,schema:o,parentStore:n,userCanConfigureFilters:l,onDelete:a,onAddToCombinatorFilter:s,context:u,onClose:p,filter:Z}):null;if("date"===j)return(0,c.gE)(Z)?(0,pe.jsx)(Ct,{context:u,propertyFilter:t,schema:o,onChange:r,parentStore:n,userCanConfigureFilters:l,onDelete:a,onAddToCombinatorFilter:s,onClose:p,allowRelativeDateFilter:x,dateFilterPopupStore:v,dateRangeFilterPopupStore:y,filter:Z}):null;if("file"===j);else{if("location"===j)return(0,c.Mp)(Z)?(0,pe.jsx)(ge,{filter:Z,parentStore:n,updateValue:e=>We(e,r,t),onClose:p,desktopTopActions:(0,pe.jsx)(Ye,{propertyFilter:t,onChange:r,schema:o,parentStore:n,userCanConfigureFilters:l,onDelete:a,onAddToCombinatorFilter:s,context:u}),mobileMenuTitle:(0,pe.jsx)(et,{propertyFilter:t,schema:o,context:u,onChange:r,parentStore:n}),mobileMoreActions:(0,pe.jsx)(tt,{context:u,userCanConfigureFilters:l,onDelete:a,onAddToCombinatorFilter:s})}):null;if("verification"===j)return(0,c.Jw)(Z)?(0,pe.jsx)(ut,{context:u,onChange:r,propertyFilter:t,schema:o,parentStore:n,userCanConfigureFilters:l,onDelete:a,onAddToCombinatorFilter:s,onClose:p,menuListStore:f,filter:Z}):null;(0,T.t1)(j)}return null}},168834:(e,t,o)=>{o.d(t,{Z:()=>a});o(667294);var n=o(886628),r=o(731278),i=o(776798),l=o(785893);const a=function(e){const{collectionStore:t}=e,o=(0,n.VK)((()=>t.getIcon()),[t]);return(0,l.jsxs)("div",{style:{display:"flex",columnGap:4,alignItems:"center"},children:[(0,l.jsx)(r.Z,{disabled:!0,icon:o,isEmptyPage:!1,size:20}),(0,l.jsx)(i.Z,{store:t,style:{maxWidth:180}})]})}},831339:(e,t,o)=>{o.d(t,{Z:()=>i});o(667294);var n=o(800480),r=o(785893);const i=function(e){const t=((0,n.O7)().device.isMobile,{width:16});return(0,r.jsx)("div",{style:t,children:e.icon(e.styles)})}},374617:(e,t,o)=>{o.d(t,{r_:()=>f,ZA:()=>x});o(667294);var n=o(724405),r=o(142613),i=o(16184),l=o(745238),a=o(785893);const s=(0,l.IU)("statusCompleteGroup",{viewBox:"0 0 17 17",svg:(0,a.jsx)("path",{d:"M8.54688 16.5078C13.0156 16.5078 16.6953 12.8281 16.6953 8.35938C16.6953 3.89844 13.0078 0.210938 8.53906 0.210938C4.07812 0.210938 0.398438 3.89844 0.398438 8.35938C0.398438 12.8281 4.07812 16.5078 8.54688 16.5078ZM8.54688 14.7188C5.02344 14.7188 2.19531 11.8828 2.19531 8.35938C2.19531 4.83594 5.01562 2 8.53906 2C12.0703 2 14.8984 4.83594 14.9062 8.35938C14.9141 11.8828 12.0703 14.7188 8.54688 14.7188ZM7.71094 12.0781C8.00781 12.0781 8.27344 11.9219 8.44531 11.6562L11.8828 6.32031C11.9922 6.14844 12.0781 5.95312 12.0781 5.77344C12.0781 5.35156 11.7109 5.07031 11.3125 5.07031C11.0547 5.07031 10.8281 5.21094 10.6562 5.49219L7.6875 10.2578L6.29688 8.51562C6.10938 8.27344 5.91406 8.17969 5.67188 8.17969C5.25781 8.17969 4.92188 8.50781 4.92188 8.92969C4.92188 9.125 5 9.30469 5.14062 9.48438L6.94531 11.6641C7.16406 11.9375 7.40625 12.0781 7.71094 12.0781Z"})}),c=(0,l.IU)("statusInProgressGroup",{viewBox:"0 0 17 17",svg:(0,a.jsx)("path",{d:"M8.54688 16.5078C13.0156 16.5078 16.6953 12.8281 16.6953 8.35938C16.6953 3.89844 13.0078 0.210938 8.53906 0.210938C4.07812 0.210938 0.398438 3.89844 0.398438 8.35938C0.398438 12.8281 4.07812 16.5078 8.54688 16.5078ZM8.54688 14.7188C5.02344 14.7188 2.19531 11.8828 2.19531 8.35938C2.19531 4.83594 5.01562 2 8.53906 2C12.0703 2 14.8984 4.83594 14.9062 8.35938C14.9141 11.8828 12.0703 14.7188 8.54688 14.7188ZM7.07031 11.4531L11.5938 8.80469C11.9297 8.60938 11.9219 8.125 11.5938 7.92969L7.07031 5.27344C6.71875 5.07031 6.26562 5.24219 6.26562 5.63281V11.0938C6.26562 11.4766 6.69531 11.6719 7.07031 11.4531Z"})}),d=(0,l.IU)("statusTodoGroup",{viewBox:"0 0 17 17",svg:(0,a.jsx)("path",{d:"M8.52344 1.85156C8.97656 1.85156 9.34375 1.49219 9.34375 1.05469C9.34375 0.609375 8.97656 0.234375 8.52344 0.234375C8.08594 0.234375 7.72656 0.609375 7.72656 1.05469C7.72656 1.48438 8.09375 1.85156 8.52344 1.85156ZM10.7969 2.21875C11.2422 2.21875 11.6094 1.85156 11.6094 1.41406C11.6094 0.960938 11.2422 0.601562 10.7969 0.601562C10.3516 0.601562 9.99219 0.960938 9.99219 1.41406C9.99219 1.85156 10.3516 2.21875 10.7969 2.21875ZM6.27344 2.21875C6.71094 2.21875 7.07812 1.85156 7.07812 1.41406C7.07812 0.960938 6.71094 0.601562 6.27344 0.601562C5.82812 0.601562 5.46094 0.960938 5.46094 1.41406C5.46094 1.85156 5.82812 2.21875 6.27344 2.21875ZM12.8359 3.25781C13.2812 3.25781 13.6484 2.89844 13.6484 2.45312C13.6484 2.00781 13.2812 1.64062 12.8359 1.64062C12.3984 1.64062 12.0312 2.00781 12.0312 2.45312C12.0312 2.89062 12.3984 3.25781 12.8359 3.25781ZM4.23438 3.25781C4.67188 3.25781 5.03906 2.89062 5.03906 2.45312C5.03906 2.00781 4.67969 1.64062 4.23438 1.64062C3.78906 1.64062 3.42188 2.00781 3.42188 2.45312C3.42188 2.89844 3.78906 3.25781 4.23438 3.25781ZM14.4609 4.88281C14.9062 4.88281 15.2734 4.51562 15.2734 4.07812C15.2734 3.63281 14.9062 3.26562 14.4609 3.26562C14.0234 3.26562 13.6562 3.63281 13.6562 4.07812C13.6562 4.51562 14.0234 4.88281 14.4609 4.88281ZM2.625 4.88281C3.0625 4.88281 3.42969 4.51562 3.42969 4.07812C3.42969 3.63281 3.0625 3.26562 2.625 3.26562C2.17969 3.26562 1.8125 3.63281 1.8125 4.07812C1.8125 4.51562 2.17969 4.88281 2.625 4.88281ZM15.4922 6.90625C15.9375 6.90625 16.3047 6.54688 16.3047 6.10156C16.3047 5.65625 15.9375 5.28906 15.4922 5.28906C15.0547 5.28906 14.6875 5.65625 14.6875 6.10156C14.6875 6.53906 15.0547 6.90625 15.4922 6.90625ZM1.59375 6.90625C2.02344 6.90625 2.39062 6.53906 2.39062 6.10156C2.39062 5.65625 2.03125 5.28906 1.59375 5.28906C1.14062 5.28906 0.78125 5.65625 0.78125 6.10156C0.78125 6.54688 1.14062 6.90625 1.59375 6.90625ZM15.8828 9.17188C16.3281 9.17188 16.6953 8.80469 16.6953 8.35938C16.6953 7.92188 16.3281 7.55469 15.8828 7.55469C15.4453 7.55469 15.0781 7.92188 15.0781 8.35938C15.0781 8.80469 15.4453 9.17188 15.8828 9.17188ZM1.21094 9.17188C1.64844 9.17188 2.01562 8.80469 2.01562 8.35938C2.01562 7.92188 1.64844 7.55469 1.21094 7.55469C0.765625 7.55469 0.398438 7.92188 0.398438 8.35938C0.398438 8.80469 0.765625 9.17188 1.21094 9.17188ZM15.4922 11.4375C15.9375 11.4375 16.3047 11.0703 16.3047 10.625C16.3047 10.1797 15.9375 9.82031 15.4922 9.82031C15.0547 9.82031 14.6875 10.1875 14.6875 10.625C14.6875 11.0703 15.0547 11.4375 15.4922 11.4375ZM1.59375 11.4375C2.03125 11.4375 2.39062 11.0703 2.39062 10.625C2.39062 10.1875 2.02344 9.82031 1.59375 9.82031C1.14062 9.82031 0.78125 10.1797 0.78125 10.625C0.78125 11.0703 1.14062 11.4375 1.59375 11.4375ZM14.4609 13.4609C14.9062 13.4609 15.2734 13.0938 15.2734 12.6484C15.2734 12.2109 14.9062 11.8438 14.4609 11.8438C14.0234 11.8438 13.6562 12.2109 13.6562 12.6484C13.6562 13.0938 14.0234 13.4609 14.4609 13.4609ZM2.625 13.4609C3.0625 13.4609 3.42969 13.0938 3.42969 12.6484C3.42969 12.2109 3.0625 11.8438 2.625 11.8438C2.17969 11.8438 1.8125 12.2109 1.8125 12.6484C1.8125 13.0938 2.17969 13.4609 2.625 13.4609ZM12.8359 15.0859C13.2812 15.0859 13.6484 14.7188 13.6484 14.2734C13.6484 13.8281 13.2812 13.4688 12.8359 13.4688C12.3984 13.4688 12.0312 13.8359 12.0312 14.2734C12.0312 14.7188 12.3984 15.0859 12.8359 15.0859ZM4.23438 15.0859C4.67969 15.0859 5.03906 14.7188 5.03906 14.2734C5.03906 13.8359 4.67188 13.4688 4.23438 13.4688C3.78906 13.4688 3.42188 13.8281 3.42188 14.2734C3.42188 14.7188 3.78906 15.0859 4.23438 15.0859ZM10.7969 16.125C11.2422 16.125 11.6094 15.7656 11.6094 15.3125C11.6094 14.875 11.2422 14.5078 10.7969 14.5078C10.3516 14.5078 9.99219 14.875 9.99219 15.3125C9.99219 15.7656 10.3516 16.125 10.7969 16.125ZM6.27344 16.125C6.71094 16.125 7.07812 15.7656 7.07812 15.3125C7.07812 14.875 6.71094 14.5078 6.27344 14.5078C5.82812 14.5078 5.46094 14.875 5.46094 15.3125C5.46094 15.7656 5.82812 16.125 6.27344 16.125ZM8.52344 16.4922C8.97656 16.4922 9.34375 16.1172 9.34375 15.6719C9.34375 15.2344 8.97656 14.875 8.52344 14.875C8.09375 14.875 7.72656 15.2422 7.72656 15.6719C7.72656 16.1172 8.08594 16.4922 8.52344 16.4922Z"})});var u=o(709291),p=o(388268),g=o(825464),h=o(132662),C=o(526388);const x={[r.G1]:(0,a.jsx)(u.FormattedMessage,{...r.ct.statusGroupNameTodo}),[r.Ho]:(0,a.jsx)(u.FormattedMessage,{...r.ct.statusGroupNameInProgress}),[r.RW]:(0,a.jsx)(u.FormattedMessage,{...r.ct.statusGroupNameComplete}),[r.Ap]:(0,a.jsx)(u.FormattedMessage,{...p.sY.current}),[r.JV]:(0,a.jsx)(u.FormattedMessage,{...p.sY.future})},m={[r.G1]:d,[r.Ho]:c,[r.RW]:s};function f(e){const{group:t,disableGroup:o,style:r,showIcon:l,showColor:s}=e,c=(0,n.Fg)(),u=m[t.name]??d,p=t.color??"gray";return(0,a.jsxs)("div",{style:{...r,display:"inline-flex",alignItems:"center"},children:[l&&u({display:"inline-block",width:16,height:16,fill:s?c.accentColors[p][400]:c.mediumIconColor}),(0,a.jsx)("span",{style:{paddingLeft:l?6:void 0,color:s?c.accentColors[p][500]:void 0},children:x[t.name]??t.name}),o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.Z,{size:4}),(0,a.jsx)(C.Z,{placement:g.u.Bottom,render:e=>(0,a.jsx)("div",{...e,children:(0,i.Q)({width:12})}),renderTooltip:e=>(0,a.jsx)("div",{...e,children:o.tooltipCaption}),disableTooltip:void 0===o.tooltipCaption})]}):null]})}},295691:(e,t,o)=>{o.d(t,{Z:()=>c});o(667294);var n=o(724405),r=o(542853),i=o(531701),l=o(137810),a=o(164921),s=o(785893);const c=function(e){const{style:t,color:o,title:c,onClick:d,icon:u,iconStyle:p,mainButtonStyle:g,dropdownEvents:h,className:C,disabled:x,disableDropdown:m}=e,f=(0,n.yK)((e=>({wrap:{position:"relative",display:"inline-flex",flexShrink:0,borderRadius:4,overflow:"hidden",height:28},mainButton:{display:"flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",borderTopLeftRadius:4,borderBottomLeftRadius:4,paddingLeft:8,paddingRight:8,fontWeight:l.Z.fontWeight.medium,..."blue"===o&&{background:i.ZP.blue,color:i.ZP.white},..."orange"===o&&{background:"dark"===e.mode?e.accentColors.orange[100]:e.accentColors.orange[50],color:"dark"===e.mode?e.accentColors.orange[600]:e.accentColors.orange[400]},...g},dropdownButton:{display:"flex",alignItems:"center",justifyContent:"center",width:24,alignSelf:"stretch",borderTopRightRadius:4,borderBottomRightRadius:4,..."blue"===o&&{background:i.ZP.blue,color:i.ZP.white,boxShadow:`inset 1px 0 0 ${e.darkDividerColor}`},..."orange"===o&&{background:"dark"===e.mode?e.accentColors.orange[100]:e.accentColors.orange[50],color:e.accentColors.orange[400],boxShadow:"dark"===e.mode?`${e.accentColors.orange[300]} 1px 0 0 inset`:`${e.accentColors.orange[200]} 1px 0 0 inset`}},dropdownButtonIcon:{width:10,marginTop:2,..."blue"===o&&{fill:i.ZP.white},..."orange"===o&&{fill:"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400]}},buttonHoveredStyle:{..."blue"===o&&{background:e.blueButtonHoveredBackground},..."orange"===o&&{background:"dark"===e.mode?e.accentColors.orange[200]:e.accentColors.orange[100]}},buttonPressedStyle:{..."blue"===o&&{background:e.blueButtonPressedBackground},..."orange"===o&&{background:"dark"===e.mode?e.accentColors.orange[300]:e.accentColors.orange[200]}},icon:{width:12,marginRight:6,..."blue"===o&&{fill:i.ZP.white},..."orange"===o&&{fill:e.accentColors.orange[400]},...p},border:{position:"absolute",pointerEvents:"none",borderRadius:4,top:0,left:0,right:0,bottom:0,..."blue"===o&&!x&&{boxShadow:"rgba(15, 15, 15, 0.1) 0px 0px 0px 1px inset, rgba(15, 15, 15, 0.1) 0px 1px 2px"},..."orange"===o&&!x&&{boxShadow:"dark"===e.mode?`${e.accentColors.orange[300]} 0px 0px 0px 1px inset`:`${e.accentColors.orange[200]} 0px 0px 0px 1px inset`}}})),[o,p,x,g]);return(0,s.jsxs)("div",{style:{...f.wrap,...t},className:C,children:[(0,s.jsxs)(a.Z,{style:f.mainButton,onClick:d,disabled:x,disabledFeedback:!0,hoveredStyle:f.buttonHoveredStyle,pressedStyle:f.buttonPressedStyle,children:[u&&u(f.icon),c]}),m||x?null:(0,s.jsx)(a.Z,{disabledFeedback:!0,style:f.dropdownButton,hoveredStyle:f.buttonHoveredStyle,pressedStyle:f.buttonPressedStyle,...h,children:(0,r.i)(f.dropdownButtonIcon)}),(0,s.jsx)("div",{style:f.border})]})}},122084:(e,t,o)=>{o.d(t,{F:()=>d,a:()=>c});o(667294);var n=o(724405),r=o(531701),i=o(137810),l=o(362896),a=o(685567),s=o(785893);function c(e){const{value:t,color:o,format:c,showEllipsis:d,onClickRemove:u,showRemoveButton:p,isSingle:g,shouldShrink:h,hideTooltip:C,descriptionTooltip:x,tooltipPlacement:m,...f}=e,v=(0,n.Fg)(),y=(0,n.yK)((e=>({token:{...d&&i.Z.textOverflowStyle}})),[d]),{textColor:S,backgroundColor:F}=(0,r.KR)(v,o);return t?(0,s.jsx)(a.Z,{format:c,value:(0,s.jsx)(l.Z,{children:t}),onClickRemove:u,showRemoveButton:p,isSingle:g,color:S,backgroundColor:F,shouldShrink:h,tooltipPlacement:m,showFullValueTooltip:!C,tooltip:C?void 0:x,style:y.token,...f}):null}function d(e){const{value:t,color:o,format:c,showEllipsis:d,onClickRemove:u,showRemoveButton:p,isSingle:g,shouldShrink:h,groupColor:C,tooltipPlacement:x,descriptionTooltip:m,hideTooltip:f,...v}=e,y=(0,n.Fg)(),S=(0,n.yK)((()=>({token:{...d&&i.Z.textOverflowStyle}})),[d]);if(!t)return null;const{textColor:F,backgroundColor:j}=(0,r.KR)(y,o??C??"gray"),b=o&&"default"!==o?o:C??"gray";return(0,s.jsx)(a.Z,{format:c,value:(0,s.jsx)(l.Z,{children:t}),onClickRemove:u,showRemoveButton:p,isSingle:g,color:F,backgroundColor:j,shouldShrink:h,showFullValueTooltip:!f,tooltip:f?void 0:m,style:S.token,isRound:!0,showColoredDot:b,tooltipPlacement:x,...v})}},582584:(e,t,o)=>{o.d(t,{S:()=>M,Z:()=>b});o(757658);var n=o(667294),r=o(800480),i=o(886628),l=o(724405),a=o(576205),s=o(984619),c=o(603729),d=o(709291),u=o(653965),p=o(108406),g=o(397004),h=o(460709),C=o(374617),x=o(552275),m=o(260458),f=o(478140),v=o(632163),y=o(840721),S=o(672495),F=o(122084),j=o(785893);function b(e){const{propertyFilter:t,schema:o,filter:s,parentStore:C,updateValue:m,onClose:F,desktopTopActions:b,mobileMenuTitle:Z,mobileMoreActions:k,collectionContextStore:w}=e,T=(0,r.O7)(),R=(0,r.Fy)(),[V,A]=(0,n.useState)([]),[P,I]=(0,n.useState)(!1),B=(0,i.VK)((()=>(0,g.tJ)(o,t,C)),[o,t,C]),D=(0,l.yK)((e=>({checkboxIcon:{fill:e.regularIconColor}})),[]),_=(0,i.VK)((()=>(0,a.vR)(s)?(0,a.wB)(s):[]),[s]),L=(0,i.VK)((()=>{if(!B||"status"!==B.type)return[];const e=B.options??[],t=null==w?void 0:w.collectionStoreResultsInViewOrder();return!P&&t?e.filter((e=>t.some((t=>{var o;return null===(o=e.collectionIds)||void 0===o?void 0:o.includes(t.id)})))):e}),[B,P,w]),O=(0,i.VK)((()=>{if(!B||"status"!==B.type)return[];const e=[],t=B.groups??[],o=B.options??[];for(const n of t){const t=(0,g.IX)({group:n,options:o,filterValues:_});if("partial"!==t.groupCheckState)continue;const r=o.filter((e=>{var t;return null===(t=n.optionIds)||void 0===t?void 0:t.includes(e.id)})).filter((e=>t.optionCheckedInfo.get(e.id)));e.push(...r)}return e}),[B,_]),H=(0,i.VK)((()=>{if(!B||"status"!==B.type)return[];const e=B.options??[];return V?e.filter((e=>!V.some((t=>t.id===e.id)))):[]}),[B,V]);(0,n.useEffect)((()=>{A((()=>u.mN([...L,...V,...O],"id")))}),[L]);const K=(0,i.VK)((()=>B&&"status"===B.type?M({propertySchema:B,statusFilterValues:_,updateValue:m,isMobile:R.isMobile,styles:{checkboxIcon:D.checkboxIcon},visibleOptions:V,shouldShowHiddenSources:P,setShouldShowHiddenSources:I}):[]),[R.isMobile,B,D.checkboxIcon,m,V,P,I,_]);if(!B||"status"!==B.type)return null;const W=(0,j.jsx)(S.Z,{desktopStyle:{paddingBottom:0},children:!R.isMobile&&b});let q;q=R.isMobile?{menuType:h.og.Modal,title:Z,left:k,right:(0,j.jsx)(y.DoneMenuText,{}),onClickRight:F,header:W}:{menuType:h.og.Popup,maxHeight:a.ot,width:260,header:W,disableHeaderBorder:!0,tokenInputHeader:!0};const z=(0,j.jsx)(v.Z,{type:v.i.Vertical,initialFocus:0,sections:[{key:"groups",items:K,render:e=>(0,j.jsx)(S.Z,{...e,title:"",style:{paddingTop:0}})}]}),G=H&&H.length>0&&!P?(0,j.jsx)(S.Z,{topBorder:!0,children:(0,j.jsx)(x.Z,{icon:(0,c.T)({width:13,height:13}),title:(0,j.jsx)(d.FormattedMessage,{id:"collectionFilterValueMenu.statusFilterValueMenu.hiddenStatusOptionsDescription",defaultMessage:"{numHiddenOptions, plural, one {{numHiddenOptions} other status option} other {{numHiddenOptions} other status options}}",values:{numHiddenOptions:H.length}}),focused:!1,onClick:()=>{I(!0),w&&p.wd({environment:T,collectionContextStore:w,action:"expand_property_filter",original_view_type:void 0,property_type:"status"})}})}):null,U=(0,j.jsx)(S.Z,{topBorder:!0,children:(0,j.jsx)(x.Z,{title:(0,j.jsx)(d.FormattedMessage,{defaultMessage:"Clear selection",id:"database.filterValue.selectType.clearSelection.message"}),focused:!1,onClick:()=>{m([])}})});return(0,j.jsx)(f.Z,{...q,children:(0,a.vR)(s)&&(0,j.jsxs)(j.Fragment,{children:[z,G,U]})})}function M(e){const{propertySchema:t,statusFilterValues:o,updateValue:n,isMobile:r,styles:i,visibleOptions:l,shouldShowHiddenSources:a}=e,c=t.groups??[],d=t.options??[],u=[];for(const p of c){const e=()=>{const e=(0,g.CN)(c,d,o,{type:"is_group",value:p.name});e&&n(e)},t=(0,g.IX)({group:p,options:d,filterValues:o}),h=d.filter((e=>{var t;return(null===(t=p.optionIds)||void 0===t?void 0:t.includes(e.id))&&(a||(null==l?void 0:l.some((t=>t.id===e.id))))})),f=[];for(const l of h){const e=()=>{const e=(0,g.CN)(c,d,o,{type:"is_option",value:l.value});e&&n(e)};f.push({key:`option-${l.id}`,action:e,render:o=>(0,j.jsx)(x.Z,{...o,icon:(0,j.jsx)(m.Z,{checked:t.optionCheckedInfo.get(l.id)??!1,size:14,onClick:e,style:i.checkboxIcon}),title:(0,j.jsx)(F.F,{format:r?s.lo.Large:s.lo.Medium,isSingle:!0,value:l.value,color:l.color,showRemoveButton:!1,groupColor:p.color}),style:{paddingLeft:16}})})}u.push({key:`group-${p.id}`,action:e,render:o=>(0,j.jsx)(x.Z,{...o,icon:(0,j.jsx)(m.Z,{checked:t.groupCheckState,size:14,onClick:e,style:i.checkboxIcon}),title:(0,j.jsx)(C.r_,{style:{fontWeight:500,marginTop:2},group:p,showIcon:!0,showColor:!0}),textWrapperStyle:{marginLeft:3}})},...f)}return u}},492658:(e,t,o)=>{o.d(t,{Z:()=>i});var n=o(749085);class r extends n.default{getInitialState(){return{inputValue:"",focus:!1}}}const i=r},205691:(e,t,o)=>{o.d(t,{m:()=>i});var n=o(423512),r=o(319385);function i(e,t){return(0,n.p3)(e,r.default.checkGate({gateName:"localized_parse_number"})?t:void 0)}},821197:(e,t,o)=>{o.d(t,{Q:()=>i});o(667294);var n=o(745238),r=o(785893);const i=(0,n.IU)("filter",{viewBox:"0 0 16 16",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 4C2 3.58579 2.33579 3.25 2.75 3.25H13.25C13.6642 3.25 14 3.58579 14 4C14 4.41421 13.6642 4.75 13.25 4.75H2.75C2.33579 4.75 2 4.41421 2 4Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.75 8C3.75 7.58579 4.08579 7.25 4.5 7.25H11.5C11.9142 7.25 12.25 7.58579 12.25 8C12.25 8.41421 11.9142 8.75 11.5 8.75H4.5C4.08579 8.75 3.75 8.41421 3.75 8Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.5 12C5.5 11.5858 5.83579 11.25 6.25 11.25H9.75C10.1642 11.25 10.5 11.5858 10.5 12C10.5 12.4142 10.1642 12.75 9.75 12.75H6.25C5.83579 12.75 5.5 12.4142 5.5 12Z"})]})})}}]);