"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[75306],{175306:(e,t,a)=>{a.d(t,{_p:()=>dt,q6:()=>ct,Qi:()=>ta,p0:()=>sa,KC:()=>ra,IK:()=>He,Dw:()=>Je,TH:()=>Ue,cO:()=>et,Bj:()=>at,fK:()=>nt,mS:()=>Xe,zm:()=>mt,hS:()=>gt,OH:()=>rt,yN:()=>Ee});a(252262),a(324506),a(430541),a(667294);var n=a(541432),o=a(117397),i=a(406695),s=a(568626),r=a(295519),l=a(509999),c=a(182477),d=a(270622),u=a(53376),g=a(240745),m=a(622771),f=a(853735),p=a(264330),b=a(745238),M=a(785893);const v=(0,b.IU)("editPage",{viewBox:"0 0 16 16",svg:(0,M.jsx)("path",{d:"M8 15.126C11.8623 15.126 15.0615 11.9336 15.0615 8.06445C15.0615 4.20215 11.8623 1.00293 7.99316 1.00293C4.13086 1.00293 0.938477 4.20215 0.938477 8.06445C0.938477 11.9336 4.1377 15.126 8 15.126ZM8 13.7383C4.85547 13.7383 2.33301 11.209 2.33301 8.06445C2.33301 4.91992 4.84863 2.39746 7.99316 2.39746C11.1377 2.39746 13.6738 4.91992 13.6738 8.06445C13.6738 11.209 11.1445 13.7383 8 13.7383ZM5.97656 7.44922C6.40723 7.44922 6.79004 7.05957 6.79004 6.51953C6.79004 5.97949 6.41406 5.58984 5.97656 5.58984C5.55273 5.58984 5.18359 5.97949 5.18359 6.51953C5.18359 7.05957 5.55273 7.44922 5.97656 7.44922ZM10.0098 7.44922C10.4404 7.44922 10.8232 7.05957 10.8232 6.51953C10.8232 5.97949 10.4404 5.58984 10.0098 5.58984C9.5791 5.58984 9.2168 5.97949 9.2168 6.51953C9.2168 7.05957 9.58594 7.44922 10.0098 7.44922ZM7.99316 11.4277C9.42871 11.4277 10.3926 10.4775 10.3926 10.0195C10.3926 9.85547 10.2285 9.78027 10.0713 9.84863C9.57227 10.1084 8.99121 10.416 7.99316 10.416C7.00195 10.416 6.41406 10.1084 5.91504 9.84863C5.76465 9.77344 5.60059 9.85547 5.60059 10.0195C5.60059 10.4775 6.56445 11.4277 7.99316 11.4277Z"})});var y=a(727714),C=a(762208),k=a(621158),N=a(554855),S=a(484199);const h=(0,b.IU)("quote",{viewBox:"0 0 20 20",svg:(0,M.jsx)("path",{d:"M9.061 9.12c.987 0 1.79-.675 1.79-1.7 0-.973-.662-1.626-1.56-1.626-.438 0-.802.163-1.04.498.23-.995 1.003-1.656 2.065-1.708.304-.022.527-.238.527-.527 0-.35-.29-.557-.683-.557-1.67 0-3.163 1.425-3.163 3.334 0 1.388.891 2.286 2.064 2.286zm-4.648 0c.988 0 1.79-.675 1.79-1.7 0-.973-.661-1.626-1.56-1.626-.445 0-.801.163-1.039.498.23-.995 1.002-1.649 2.072-1.708.296-.022.512-.238.512-.527 0-.35-.29-.557-.676-.557-1.678 0-3.163 1.425-3.163 3.334 0 1.388.891 2.286 2.064 2.286zM12.84 4.83h4.165a.66.66 0 00.668-.66.664.664 0 00-.668-.662H12.84a.664.664 0 00-.668.661c0 .371.297.66.668.66zm0 3.89h4.165a.66.66 0 00.668-.66.66.66 0 00-.668-.661H12.84a.66.66 0 00-.668.66c0 .372.297.661.668.661zm-9.852 3.89h14.017a.66.66 0 00.668-.66.66.66 0 00-.668-.66H2.988c-.371 0-.66.289-.66.66 0 .371.289.66.66.66zm0 3.891h14.017a.664.664 0 00.668-.66.66.66 0 00-.668-.662H2.988c-.371 0-.66.29-.66.661 0 .364.289.661.66.661z"})});var L=a(870663),w=a(418442),_=a(291427),x=a(660291);const I=(0,b.IU)("timeBy",{viewBox:"0 0 30 30",svg:(0,M.jsx)("path",{d:"M14 25H16V15H14C13.919 15.164 13.209 15.698 12 15.909V17.94C12.743 17.85 13.416 17.652 14 17.388V25ZM25 4C25 2.343 23.657 1 22 1C20.343 1 19 2.343 19 4H11C11 2.343 9.657 1 8 1C6.343 1 5 2.343 5 4H1V29H29V4H25ZM21 4C21 3.449 21.448 3 22 3C22.552 3 23 3.449 23 4V6C23 6.551 22.552 7 22 7C21.448 7 21 6.551 21 6V4ZM7 4C7 3.449 7.448 3 8 3C8.552 3 9 3.449 9 4V6C9 6.551 8.552 7 8 7C7.448 7 7 6.551 7 6V4ZM27 27H3V13H27V27ZM27 11H3V6H5C5 7.657 6.343 9 8 9C9.657 9 11 7.657 11 6H19C19 7.657 20.343 9 22 9C23.657 9 25 7.657 25 6H27V11Z"})});var P=a(537888);const j=(0,b.IU)("unstar",{viewBox:"0 0 16 16",svg:(0,M.jsx)("path",{d:"M11.6641 9.32227L15.1299 6.83398C15.5879 6.50586 15.7861 6.14355 15.6562 5.76074C15.5264 5.38477 15.1641 5.2002 14.5967 5.20703L10.1943 5.23438L8.85449 1.03711C8.68359 0.490234 8.40332 0.196289 8 0.196289C7.60352 0.196289 7.32324 0.490234 7.14551 1.03711L6.22949 3.9082L7.2002 4.87207L7.96582 2.28125C7.97266 2.24023 7.98633 2.2334 8 2.2334C8.02051 2.2334 8.02734 2.24023 8.04102 2.28125L9.13477 6.01367C9.2373 6.35547 9.42188 6.47168 9.77051 6.45801L13.6602 6.36914C13.7012 6.36914 13.7148 6.37598 13.7217 6.38965C13.7285 6.41016 13.7217 6.41699 13.6875 6.4375L10.7754 8.44043L11.6641 9.32227ZM13.9268 14.2783C14.1387 14.4902 14.4941 14.4902 14.6992 14.2783C14.9043 14.0664 14.9111 13.7246 14.6992 13.5127L3.44043 2.28809C3.22852 2.07617 2.87988 2.06934 2.66797 2.28809C2.46289 2.49316 2.46289 2.84863 2.66797 3.05371L13.9268 14.2783ZM3.2627 14.7637C3.58398 15.0098 3.98047 14.9277 4.44531 14.5928L8 11.9814L11.5547 14.5928C12.0195 14.9277 12.4092 14.9961 12.7441 14.7637C12.8193 14.709 12.8672 14.6406 12.9629 14.5107L8.3418 10.7236C8.10254 10.5254 7.84277 10.5391 7.60352 10.7305L4.52051 13.1094C4.49316 13.123 4.47266 13.1367 4.45898 13.1162C4.45215 13.1025 4.45215 13.0957 4.45898 13.0615L5.75781 9.39062C5.87402 9.05566 5.83301 8.84375 5.52539 8.63867L2.3125 6.4375C2.28516 6.42383 2.27148 6.41016 2.27832 6.38965C2.29199 6.37598 2.30566 6.36914 2.33984 6.36914L4.88281 6.42383L3.67969 5.2207L1.40332 5.20703C0.835938 5.2002 0.480469 5.38477 0.350586 5.76074C0.220703 6.14355 0.412109 6.50586 0.876953 6.83398L4.46582 9.41113L3.05762 13.5879C2.87305 14.1279 2.94141 14.5244 3.2627 14.7637Z"})});var A=a(915157),D=a(89101),F=a(709291),T=a(653965),Z=a(659301),V=a(551365),R=a(800893),B=a(442274),H=a(631781),z=a(496802),J=a(196313),E=a(865770),U=a(627153),O=a(472711),K=a(709953),q=a(742858),G=a(524677),$=a(164964),W=a(210228),Y=a(668422),Q=a(61202),X=a(429657),ee=a(710274),te=a(110906),ae=a(278030),ne=a(693405),oe=a(552275),ie=a(672495),se=a(69872),re=a(883283),le=a(296994),ce=a(938530),de=a(119037),ue=a(628020),ge=a(623879),me=a(433929),fe=a(966324),pe=a(444534),be=a(583960),Me=a(80444),ve=a(364424),ye=a(221797),Ce=a(895554),ke=a(113493),Ne=a(482763),Se=a(135067),he=a(593685),Le=a(129768),we=a(62967),_e=a(320422),xe=a(342784),Ie=a(802295),Pe=a(212988),je=a(206471),Ae=a(641670),De=a(811732);const Fe=(0,F.defineMessages)({fixLegacyTransclusion:{id:"action.fixLegacyTransclusion.name",defaultMessage:"Fix legacy transclusion"},newPageInName:{id:"action.newPageIn.name",defaultMessage:"Turn into page in"},insertBelowName:{id:"action.insertBelow.name",defaultMessage:"Insert below"},copyDirectLinkName:{id:"action.copyDirectLink.name",defaultMessage:"Copy link to original"},openasPageName:{id:"action.openasPage.name",defaultMessage:"Open as page"},copyLinksName:{id:"action.copyLinks.name",defaultMessage:"Copy links to all"},viewOriginalName:{id:"action.viewOriginal.name",defaultMessage:"View original"},downloadName:{id:"action.download.name",defaultMessage:"Download"},replaceName:{id:"action.replace.name",defaultMessage:"Replace"},turnSimpleTableIntoCollection:{id:"action.turnIntoCollection.title",defaultMessage:"Turn into database"},editPropertyName:{id:"action.editProperty.name",defaultMessage:"Edit property"},clearDateName:{id:"action.clearDate.name",defaultMessage:"Clear date"},turnintoInlineName:{id:"action.turnintoInline.name",defaultMessage:"Turn into inline"},turnintoPageName:{id:"action.turnintoPage.name",defaultMessage:"Turn into page"},turnCollectionIntoSimpleTable:{id:"action.turnintoSimpleTable.name",defaultMessage:"Turn into simple table"},mergewithCSVName:{id:"action.mergewithCSV.name",defaultMessage:"Merge with CSV"},mergewithCSVCaption:{id:"action.mergewithCSV.caption",defaultMessage:"Header row required"},openIn:{id:"action.openIn.name",defaultMessage:"Open in"},lockDatabaseName:{id:"action.lockDatabaseName.name",defaultMessage:"Lock database"},unlockDatabaseName:{id:"action.unlockDatabaseName.name",defaultMessage:"Unlock database"},lockDatabaseViewsName:{id:"action.lockDatabaseViewsName.name",defaultMessage:"Lock views"},unlockDatabaseViewsName:{id:"action.unlockDatabaseViews.name",defaultMessage:"Unlock views"},lockWikiName:{id:"action.lockWikiName.name",defaultMessage:"Lock wiki"},reloadPreview:{id:"action.reloadPreview",defaultMessage:"Reload preview"},unlockWikiName:{id:"action.unlockWikiName.name",defaultMessage:"Unlock wiki"},turnPreviewIntoMention:{id:"action.turnPreviewIntoMention",defaultMessage:"Turn into mention"},reloadSyncedPage:{id:"action.reloadSyncedPage",defaultMessage:"Sync page"},addtoFavoritesName:{id:"action.addtoFavorites.name",defaultMessage:"Add to Favorites"},removefromFavoritesName:{id:"action.removefromFavorites.name",defaultMessage:"Remove from Favorites"},configureName:{id:"action.configure.name",defaultMessage:"Configure"},editIconName:{id:"action.editIcon.name",defaultMessage:"Icons"},editIconNameFeatureGated:{id:"action.editIcon.nameFeatureGated",defaultMessage:"Edit icon"},wrapCodeKeywords:{id:"action.wrapCode.fuzzySearchKeywords",defaultMessage:"Wrap Code"},wrapCodeLabel:{id:"action.wrapCode.label",defaultMessage:"Wrap code"},languageModeName:{id:"action.languageMode.name",defaultMessage:"Set language"},formatCodeLabel:{id:"action.formatCode.label",defaultMessage:"Format code"},workAtNotion:{id:"action.workAtNotion.name",defaultMessage:"Work at Notion"},quoteSizeSection:{id:"action.section.quoteSize",defaultMessage:"Quote size"},quoteSizeDefault:{id:"action.quoteSize.default",defaultMessage:"Default"},quoteSize:{id:"action.quoteSize.name",defaultMessage:"Quote size"},quoteSizeLarge:{id:"action.quoteSize.large",defaultMessage:"Large"},listFormatDefault:{id:"action.listFormat.letters.default",defaultMessage:"Default"},listFormatSection:{id:"action.listFormat.sectionName",defaultMessage:"List format"},listFormat:{id:"action.listFormat.name",defaultMessage:"List format"},listFormatNumbers:{id:"action.listFormat.numbers.name",defaultMessage:"Numbers"},listFormatLetters:{id:"action.listFormat.letters.name",defaultMessage:"Letters"},listFormatRoman:{id:"action.listFormat.letters.roman",defaultMessage:"Roman numerals"},listFormatDisc:{id:"action.listFormat.disc.name",defaultMessage:"Disc"},listFormatCircle:{id:"action.listFormat.circle.name",defaultMessage:"Circle"},listFormatSquare:{id:"action.listFormat.square.name",defaultMessage:"Square"},alignmentName:{id:"action.alignment.name",defaultMessage:"Align"},cropImage:{id:"action.cropImage",defaultMessage:"Crop image"}}),Te=[de.MaU,de.ffD(de.sRS),de.ffD(de.cWe),de.or([de.O4s,de.ffD(de.OPg)]),...we.kv],Ze=(0,we.cN)({key:"fixLegacyTransclusion",displayName:Fe.fixLegacyTransclusion,analyticsName:Fe.fixLegacyTransclusion.defaultMessage,svg:x.b,validators:[de.szW,de.U7o,...Te],closeParentMenu:!0,action:e=>{let{blocks:t,environment:a}=e;E.Y({environment:a,store:t[0]})}}),Ve=(0,we.MV)({key:"turn into section",displayName:we.RE.turnIntoName,analyticsName:we.RE.turnIntoName.defaultMessage,svg:C.z,validators:[de.J5S,de.ffD(de.OPg),de.wFS,de.XQy,de.Vc5],subActions:()=>[{key:0,title:void 0,render:e=>(0,M.jsx)(ie.Z,{...e}),actions:De.g.actions}]}),Re=(0,we.cN)({key:"new page in section",displayName:Fe.newPageInName,analyticsName:Fe.newPageInName.defaultMessage,closeParentMenu:!0,svg:N.a,hideFromSlashActionMenu:!0,validators:[de.J5S,de.ffD(de.OPg),de.ffD(de.P99("page")),de.XQy,de.wFS],render:(e,t,a)=>{const{onFocus:n,onAccept:o}=a;return(0,M.jsx)(le.bI,{...e,title:Fe.newPageInName,blocksToTransform:t.blocks,onFocus:n,onAccept:o?()=>o(Re,t,void 0):void 0})},action:()=>{}}),Be=(0,we.cN)({key:"insert below",displayName:Fe.insertBelowName,analyticsName:Fe.insertBelowName.defaultMessage,svg:g.M,validators:[de.J5S,de.Eok,de.tqC],closeParentMenu:!0,action:e=>{let{blocks:t,environment:a}=e;W.createAndCommit({userAction:"actionRegistry.insertBelow",environment:a,perform:e=>{q.ZJ({environment:a,blocks:t,transaction:e})}})}}),He=(0,we.cN)({key:"copy direct link to content housed within block",displayName:Fe.copyDirectLinkName,analyticsName:Fe.copyDirectLinkName.defaultMessage,svg:y.N,validators:[de.jlf,de.U7o,de.ffD(de.OOd),de.ffD(de.Fxc),de.or([de.Cjo,de.$H4,de.P99(n.Ti.bookmark),de.P99(n.Ti.externalObjectInstance),de.P99(n.Ti.externalObjectInstancePage),de.K5G,de.p5B])],closeParentMenu:!0,action:(e,t)=>{R.IK({...e,event:t})}}),ze=(0,we.cN)({key:"open collection as page",displayName:Fe.openasPageName,analyticsName:Fe.openasPageName.defaultMessage,svg:k.h,validators:[de.vjj,de.ffD(de.O4s),de.ffD(de.LHu)],closeParentMenu:!0,action:e=>q.YP(e)}),Je=(0,we.cN)({key:"copy links to blocks",displayName:Fe.copyLinksName,analyticsName:Fe.copyLinksName.defaultMessage,svg:y.N,validators:[de.jlf,de.ECq,de.ffD(de.uY7)],closeParentMenu:!0,action:(e,t)=>{R.Dw({...e,event:t})}}),Ee=(0,we.cN)({key:"view original",displayName:Fe.viewOriginalName,analyticsName:Fe.viewOriginalName.defaultMessage,svg:l.J,validators:[de.U7o,de.or([de.Cjo,de.xDy([de.$H4,de.ffD(de.OOd)])])],closeParentMenu:!0,action:e=>{let{blocks:t,environment:a}=e;H.qL(a,{store:t[0],from:"view_original"})}}),Ue=(0,we.cN)({key:"download source",displayName:Fe.downloadName,analyticsName:Fe.downloadName.defaultMessage,svg:p.a,validators:[de.U7o,de.or([de.$H4,de.Cjo]),de.or([de.VBw,de.OOd]),de.ffD(de.Fxc)],closeParentMenu:!0,action:e=>{let{blocks:t,environment:a}=e;H.TH({environment:a,store:t[0]})}}),Oe=(0,we.cN)({key:"replace source",displayName:Fe.replaceName,analyticsName:Fe.replaceName.defaultMessage,svg:L.h,validators:[de.J5S,de.U7o,de.or([de.$H4,de.Cjo])],closeParentMenu:!0,action:e=>{let{blocks:t}=e;H.x1({store:t[0]})}}),Ke=(0,we.cN)({key:"turn into collection",displayName:Fe.turnSimpleTableIntoCollection,analyticsName:Fe.turnSimpleTableIntoCollection.defaultMessage,svg:C.z,validators:[de.J5S,de.ffD(de.b47),de._nA,de.XQy,de.ffD(de.US8)],closeParentMenu:!0,action:e=>{let{blocks:t,environment:a}=e;return W.createAndCommit({userAction:"actionRegistry.turnSimpleTableIntoCollection",environment:a,perform:e=>{pe.HM.turnIntoCollection({environment:a,editorMode:"default",simpleTableStore:t[0],transaction:e}),G.ZH({debug:{userAction:"blockActionRegistry.turnSimpleTableIntoCollection"},environment:a}),pe.HM.clearSelection()}})}}),qe=[de.J5S,de.ffD(de.p1d),de.AKv,de.ffD(de.Q_M),de.ffD(de.YGm),de.FXl];const Ge=(0,we.MV)({key:"edit property",displayName:Fe.editPropertyName,analyticsName:Fe.editPropertyName.defaultMessage,svg:S.N,validators:qe,subActions:e=>{let{blocks:t}=e;const a=t.at(0);if(!a)return[];const n=(0,te.fm)(a),o=a.getAssociatedCollectionStore();if(!o)return[];const s=(null==n?void 0:n.normalizedSchemaStore.state)??o.getSchema(),l=o.getFormat(),c=(0,r.i)(l,s,void 0,i.j5.Collection);if(!c.collection_page_properties)return[];c.collection_page_properties.unshift({property:"title"});const d=T.oA(c.collection_page_properties.map((e=>{const a=s[e.property];if(a&&(0,ge.Sb)({propertySchema:a,property:e.property,blockStores:t,collectionSchema:s}))return function(e){const{property:t,propertySchema:a}=e,n=a.name;return{key:`Edit Property ${n} ${t}`,displayName:n,analyticsName:"Edit property",searchName:n,validators:qe,closeParentMenu:!0,action:(e,n)=>{let{blocks:o,originRect:i,environment:s}=e;"checkbox"===a.type?W.createAndCommit({userAction:"actionRegistry.createEditPropertyAction",environment:s,perform:e=>{V.vO({stores:o,property:t,transaction:e})}}):i&&V.bA({environment:s,store:o[0],additionalStores:o.slice(1),property:t,format:ae.C.Page,rect:{...T.Go(i),width:200},preventClearSelection:!0,blockPropertyValueOverlayStore:ue._H(),collectionContextStore:(0,te.fm)(o[0])})},render:e=>(0,M.jsx)(se.Z,{...e,propertySchema:a,format:se.L.Name})}}({property:e.property,propertySchema:a})})));return[{key:0,title:void 0,render:e=>(0,M.jsx)(ie.Z,{...e}),actions:d}]}}),$e=(0,we.cN)({key:"clear date",displayName:Fe.clearDateName,analyticsName:Fe.clearDateName.defaultMessage,svg:I,validators:[de.J5S,de.ffD(de.OPg),de.or([de.j2U("timeline"),de.j2U("calendar")])],closeParentMenu:!0,action:e=>{let{environment:t,blocks:a}=e;const n=(0,te.fm)(a[0]);if(!n)return;const o=null==n?void 0:n.collectionViewStore();if(!o)return;const i=n.normalizedSchemaStore.state;W.createAndCommit({userAction:"actionRegistry.clearDate",environment:t,perform:e=>{X.k2({stores:a,collectionViewStore:o,schema:i,transaction:e})}})}}),We=(0,we.cN)({key:"view collection view inline",displayName:Fe.turnintoInlineName,analyticsName:Fe.turnintoInlineName.defaultMessage,svg:C.z,validators:[de.Mgm,de.ffD(de.O4s),de.k5s,de.ffD(de.b47),de.ffD(de.f7f),de.Vc5],closeParentMenu:!0,action:e=>{let{blocks:t,environment:a}=e;return W.createAndCommit({userAction:"actionRegistry.viewCollectionViewInline",environment:a,perform:e=>{Y.Cj({environment:a,blocks:t,blockType:"collection_view",transaction:e}),G.ZH({debug:{userAction:"blockActionRegistry.viewCollectionViewInline"},environment:a})}})}}),Ye=(0,we.cN)({key:"view collection view as page",displayName:Fe.turnintoPageName,analyticsName:Fe.turnintoPageName.defaultMessage,svg:C.z,validators:[de.vjj,de.ffD(de.O4s),de.k5s,de.ffD(de.b47),de.ffD(de.OPg),de.ffD(de.K5G)],closeParentMenu:!0,action:e=>{let{blocks:t,environment:a}=e;return W.createAndCommit({userAction:"actionRegistry.turnCollectionViewIntoCollectionViewPage",environment:a,perform:e=>{Y.Cj({environment:a,blocks:t,blockType:"collection_view_page",transaction:e})}})}}),Qe=(0,we.cN)({key:"turn into simple table",displayName:Fe.turnCollectionIntoSimpleTable,analyticsName:Fe.turnCollectionIntoSimpleTable.defaultMessage,svg:C.z,validators:[de.vjj,de.dM3("table"),de.ffD(de.O4s),de.k5s,de.ffD(de.b47),de.TKz,de.iJI,de.ffD(de.K5G)],closeParentMenu:!0,action:async e=>{let{blocks:t,environment:a}=e;const n=t[0],o=n.useCrdt(),i=await pe.g$.getPagesInCollectionForSimpleTableTransform({environment:a,collectionViewBlockStore:n});if(i.some((e=>e.useCrdt()!==o)))return $.oV({label:o?"Cannot turn database with non-CRDT pages into simple table on CRDT page":"Cannot turn database with CRDT pages into simple table on non-CRDT page"}),void s.log({level:"info",from:"blockActionRegistry",type:"crdt:turnCollectionIntoSimpleTableUseCrdtMismatch",data:{miscDataToConvertToString:{collectionViewBlockUseCrdt:o}}});W.createAndCommit({userAction:"actionRegistry.turnCollectionIntoSimpleTable",environment:a,perform:e=>{pe.HM.turnIntoSimpleTable({environment:a,editorMode:"default",collectionViewBlockStore:n,pageStores:i,transaction:e}),G.ZH({debug:{userAction:"blockActionRegistry.turnCollectionIntoSimpleTable"},environment:a}),pe.HM.clearSelection()}})}}),Xe=(0,we.cN)({key:"merge with csv",displayName:Fe.mergewithCSVName,analyticsName:Fe.mergewithCSVName.defaultMessage,validators:[de.YGm,de.k5s,de.Ggh,de.YZb,de.ffD(de.OPg),de.ffD(de.ESL),de.ffD(de.Jtb),de.ffD(de.K5G),de.ffD(de.uY7)],closeParentMenu:!0,render:e=>(0,M.jsx)(ne.Z,{...e,svg:m.J,title:(0,M.jsx)(F.FormattedMessage,{...Fe.mergewithCSVName}),tooltipText:(0,M.jsx)(F.FormattedMessage,{...Fe.mergewithCSVCaption})}),action:e=>{let{blocks:[t],environment:a}=e;ee.mS({environment:a,store:t})}}),et=(0,we.N$)({key:"database lock",displayName:Fe.lockDatabaseName,label:me.default.formatMessage(Fe.lockDatabaseName),isEnabled:e=>e.isLocked(),validators:[de.YGm,de.plk,de.ffD(de.f7f),de.k5s,de.ffD(de.uY7)],action:(e,t,a)=>K.sW({store:t.getFormatStore(),data:{block_locked:!t.isLocked(),block_locked_by:e.currentUser.id},transaction:a}),afterAction:()=>null}),tt=(0,we.cN)({key:"database unlock",displayName:Fe.unlockDatabaseName,analyticsName:Fe.unlockDatabaseName.defaultMessage,svg:P.U,validators:[de.YGm,de.plk,de.ffD(de.f7f),de.k5s,de.p1d],closeParentMenu:!1,action:e=>{let{blocks:t,environment:a}=e;const n=t[0];O.bo({environment:a,store:n,lock:!1})}}),at=(0,we.N$)({key:"database views lock",displayName:Fe.lockDatabaseViewsName,label:me.default.formatMessage(Fe.lockDatabaseViewsName),isEnabled:e=>e.isLocked(),validators:[de.YGm,de.ffD(de.plk),de.k5s,de.ffD(de.uY7)],action:(e,t,a)=>K.sW({store:t.getFormatStore(),data:{block_locked:!t.isLocked(),block_locked_by:e.currentUser.id},transaction:a}),afterAction:()=>null}),nt=(0,we.N$)({key:"wiki lock",displayName:Fe.lockWikiName,label:me.default.formatMessage(Fe.lockWikiName),isEnabled:e=>e.isLocked(),validators:[de.YGm,de.plk,de.f7f,de.k5s,de.ffD(de.uY7)],action:(e,t,a)=>K.sW({store:t.getFormatStore(),data:{block_locked:!t.isLocked(),block_locked_by:e.currentUser.id},transaction:a}),afterAction:()=>null}),ot=(0,we.cN)({key:"wiki unlock",displayName:Fe.unlockWikiName,analyticsName:Fe.unlockWikiName.defaultMessage,svg:P.U,validators:[de.YGm,de.plk,de.f7f,de.k5s,de.p1d],closeParentMenu:!1,action:e=>{let{blocks:t,environment:a}=e;const n=t[0];O.bo({environment:a,store:n,lock:!1})}});function it(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return[de.J5S,de.ffD(de.OPg),de.ffD(de.nJQ),de.U7o,e?de.or([de.rol("external_object_instance"),de.p5B]):de.rol("external_object_instance"),de.ffD(de.HBU)]}const st=(0,we.cN)({key:"reload link preview",displayName:Fe.reloadPreview,analyticsName:Fe.reloadPreview.defaultMessage,svg:x.b,validators:it(!1),closeParentMenu:!0,action:e=>{let{environment:t,blocks:a}=e;if(0===a.length)return;const n=a[0];n.isExternalObjectInstanceBlockStore()&&Q.qK({environment:t,from:"page_more_menu",store:n,spaceId:n.getSpaceId()})}}),rt=(0,we.cN)({key:"turn preview into mention",displayName:Fe.turnPreviewIntoMention,analyticsName:Fe.turnPreviewIntoMention.defaultMessage,svg:C.z,validators:it(!0),closeParentMenu:!0,action:e=>{let{environment:t,blocks:a}=e;0!==a.length&&W.createAndCommit({userAction:"actionRegistry.turnPreviewIntoMention",environment:t,perform:e=>{a[0].isType("alias")?J.az({blockStore:a[0],transaction:e}):Q.sz({environment:t,block:a[0],transaction:e})}})}});function lt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,we.cN)({key:"add to favorites",displayName:Fe.addtoFavoritesName,analyticsName:Fe.addtoFavoritesName.defaultMessage,svg:_.e,validators:[...e,de.jlf,de.DFt,de.U7o,de.ffD(de.UI7),de.ffD(de.tls)],closeParentMenu:!0,action:e=>{let{blocks:t,environment:a}=e;const{currentSpaceViewStore:n}=Me.default.state;if(n){const e=t[0];W.createAndCommit({userAction:"actionRegistry.addToFavorites",environment:a,perform:t=>{fe.bookmarkPage({spaceViewStore:n,store:e,transaction:t})}})}}})}const ct=lt([de.tqC]),dt=lt();function ut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,we.cN)({key:"remove from favorites",displayName:Fe.removefromFavoritesName,analyticsName:Fe.removefromFavoritesName.defaultMessage,svg:j,validators:[...e,de.UI7,de.U7o],closeParentMenu:!0,action:e=>{let{blocks:t,environment:a}=e;const{currentSpaceViewStore:n}=Me.default.state;n&&W.createAndCommit({userAction:"actionRegistry.removeFromFavorites",environment:a,perform:e=>{fe.unbookmarkPage({spaceViewStore:n,store:t[0],transaction:e})}})}})}const gt=ut([de.tqC]),mt=ut(),ft=(0,we.cN)({key:"reload synced page",displayName:Fe.reloadSyncedPage,analyticsName:Fe.reloadSyncedPage.defaultMessage,svg:x.b,validators:[de.J5S,de.ffD(de.OPg),de.ffD(de.nJQ),de.U7o,de.rol("external_object_instance_page")],closeParentMenu:!0,action:e=>{let{environment:t,blocks:a}=e;if(0===a.length)return;const n=a[0];n.isExternalObjectInstancePageBlockStore()&&Q.qK({environment:t,from:"page_more_menu",store:n,spaceId:n.getSpaceId(),bypassCache:!0})}}),pt=(0,we.cN)({key:"configure",displayName:Fe.configureName,analyticsName:Fe.configureName.defaultMessage,svg:w.H,validators:[de.J5S,de.U7o,de.zX6],closeParentMenu:!0,action:e=>q.jQ(e)}),bt=vt(!1),Mt=vt(!0);function vt(e){return(0,we.cN)({key:"edit icon",displayName:e?Fe.editIconNameFeatureGated:Fe.editIconName,analyticsName:e?Fe.editIconNameFeatureGated.defaultMessage:Fe.editIconName.defaultMessage,svg:v,validators:[de.J5S,de.ffD(de.OPg),de.lrK],closeParentMenu:!0,action:e=>{let{environment:t,originRect:a,blocks:n}=e;const o=e=>{var t;return e.isType("button")?null===(t=e.getAutomationStore())||void 0===t?void 0:t.getIconStore():e.getIconStore()},i=(e,a)=>{n.forEach((a=>{const n=o(a);n&&W.createAndCommit({userAction:"actionRegistry.editIcon",environment:t,perform:t=>{K.sO({store:n,value:e,transaction:t})}})})),a&&a.keepVisible||U.Z()},s=n.find((e=>{return(t=e).isType("button")?null===(a=o(t))||void 0===a?void 0:a.getValue():t.hasIcon();var t,a})),r=n.every((e=>e.isType("callout"))),l=[{type:"emoji",title:(0,M.jsx)(F.FormattedMessage,{defaultMessage:"Emojis",id:"recordIcon.emojiTab.title"}),onChange:i},{type:"icon",title:(0,M.jsx)("div",{style:{display:"flex",gap:4},children:(0,M.jsx)(F.FormattedMessage,{defaultMessage:"Icons",id:"recordIcon.iconTab.title"})}),onChange:i}];U.$(t,{recordIconLoggingData:{source:"bulk_block_selection"},originGap:4,originRect:a,popupWidth:ce.FZ,popupHeight:ce.kX,isSmallWidth:!1,title:me.default.getIntl().formatMessage({defaultMessage:"Page icon",id:"recordIcon.emojiModalMenu.title"}),onDelete:s?()=>{n.forEach((e=>{const a=o(e);a&&W.createAndCommit({userAction:"actionRegistry.editIcon",environment:t,perform:e=>{K.sO({store:a,value:void 0,transaction:e})}})})),U.Z()}:void 0,currentTab:"emoji",isCallout:r,tabs:l,disableClearSelection:!0})}})}const yt=(0,we.N$)({key:"code wrap",displayName:Fe.wrapCodeKeywords,label:me.default.formatMessage(Fe.wrapCodeLabel),isEnabled:e=>Boolean(e.getFormat().code_wrap),validators:[de.U7o,de.P99("code")],action:(e,t,a)=>z.FH({stores:[t],update:{code_wrap:!t.getFormat().code_wrap},transaction:a}),afterAction:(e,t)=>{A.Z.set({userId:t.currentUser.id,key:be.T.localCodeWrapPreferenceKey,value:e})}}),Ct=(0,F.defineMessages)({ABAP:{id:"action.languageMode.abap",defaultMessage:"ABAP"},Agda:{id:"action.languageMode.agda",defaultMessage:"Agda"},Arduino:{id:"action.languageMode.arduino",defaultMessage:"Arduino"},Assembly:{id:"action.languageMode.nasm",defaultMessage:"Assembly"},Bash:{id:"action.languageMode.bash",defaultMessage:"Bash"},BASIC:{id:"action.languageMode.basic",defaultMessage:"Basic"},BNF:{id:"action.languageMode.bnf",defaultMessage:"BNF"},C:{id:"action.languageMode.c",defaultMessage:"C"},"C#":{id:"action.languageMode.csharp",defaultMessage:"C#"},"C++":{id:"action.languageMode.cplusplus",defaultMessage:"C++"},Clojure:{id:"action.languageMode.clojure",defaultMessage:"Clojure"},CoffeeScript:{id:"action.languageMode.coffeescript",defaultMessage:"CoffeeScript"},Coq:{id:"action.languageMode.coq",defaultMessage:"Coq"},CSS:{id:"action.languageMode.css",defaultMessage:"CSS"},Dart:{id:"action.languageMode.dart",defaultMessage:"Dart"},Dhall:{id:"action.languageMode.dhall",defaultMessage:"Dhall"},Diff:{id:"action.languageMode.diff",defaultMessage:"Diff"},Docker:{id:"action.languageMode.docker",defaultMessage:"Docker"},EBNF:{id:"action.languageMode.ebnf",defaultMessage:"EBNF"},Elixir:{id:"action.languageMode.elixir",defaultMessage:"Elixir"},Elm:{id:"action.languageMode.elm",defaultMessage:"Elm"},Erlang:{id:"action.languageMode.erlang",defaultMessage:"Erlang"},"F#":{id:"action.languageMode.fsharp",defaultMessage:"F#"},Flow:{id:"action.languageMode.flow",defaultMessage:"Flow"},Fortran:{id:"action.languageMode.fortran",defaultMessage:"Fortran"},Gherkin:{id:"action.languageMode.gherkin",defaultMessage:"Gherkin"},GLSL:{id:"action.languageMode.glsl",defaultMessage:"GLSL"},Go:{id:"action.languageMode.go",defaultMessage:"Go"},GraphQL:{id:"action.languageMode.graphql",defaultMessage:"Graphql"},Groovy:{id:"action.languageMode.groovy",defaultMessage:"Groovy"},Haskell:{id:"action.languageMode.haskell",defaultMessage:"Haskell"},HTML:{id:"action.languageMode.html",defaultMessage:"HTML"},Idris:{id:"action.languageMode.idris",defaultMessage:"Idris"},Java:{id:"action.languageMode.java",defaultMessage:"Java"},JavaScript:{id:"action.languageMode.javascript",defaultMessage:"JavaScript"},JSON:{id:"action.languageMode.json",defaultMessage:"JSON"},Julia:{id:"action.languageMode.julia",defaultMessage:"Julia"},Kotlin:{id:"action.languageMode.kotlin",defaultMessage:"Kotlin"},LaTeX:{id:"action.languageMode.latex",defaultMessage:"LaTeX"},Less:{id:"action.languageMode.less",defaultMessage:"LESS"},Lisp:{id:"action.languageMode.lisp",defaultMessage:"Lisp"},LiveScript:{id:"action.languageMode.livescript",defaultMessage:"LiveScript"},"LLVM IR":{id:"action.languageMode.llvm",defaultMessage:"LLVM IR"},Lua:{id:"action.languageMode.lua",defaultMessage:"Lua"},Makefile:{id:"action.languageMode.makefile",defaultMessage:"Makefile"},Markdown:{id:"action.languageMode.markdown",defaultMessage:"Markdown"},Markup:{id:"action.languageMode.markup",defaultMessage:"Markup"},MATLAB:{id:"action.languageMode.matlab",defaultMessage:"MATLAB"},Mathematica:{id:"action.languageMode.mathematica",defaultMessage:"Mathematica"},Mermaid:{id:"action.languageMode.mermaid",defaultMessage:"Mermaid"},Nix:{id:"action.languageMode.nix",defaultMessage:"Nix"},"Notion Formula":{id:"action.languageMode.notionFormula",defaultMessage:"Notion Formula"},"Objective-C":{id:"action.languageMode.objectiveC",defaultMessage:"Objective-C"},OCaml:{id:"action.languageMode.ocaml",defaultMessage:"OCaml"},Pascal:{id:"action.languageMode.pascal",defaultMessage:"Pascal"},Perl:{id:"action.languageMode.perl",defaultMessage:"Perl"},PHP:{id:"action.languageMode.php",defaultMessage:"PHP"},"Plain Text":{id:"action.languageMode.plaintext",defaultMessage:"Plain Text"},PowerShell:{id:"action.languageMode.powershell",defaultMessage:"Powershell"},Prolog:{id:"action.languageMode.prolog",defaultMessage:"Prolog"},Protobuf:{id:"action.languageMode.protobuf",defaultMessage:"Protobuf"},PureScript:{id:"action.languageMode.purescript",defaultMessage:"PureScript"},Python:{id:"action.languageMode.python",defaultMessage:"Python"},R:{id:"action.languageMode.r",defaultMessage:"R"},Racket:{id:"action.languageMode.racket",defaultMessage:"Racket"},Reason:{id:"action.languageMode.reason",defaultMessage:"Reason"},Ruby:{id:"action.languageMode.ruby",defaultMessage:"Ruby"},Rust:{id:"action.languageMode.rust",defaultMessage:"Rust"},Sass:{id:"action.languageMode.sass",defaultMessage:"Sass"},Scala:{id:"action.languageMode.scala",defaultMessage:"Scala"},Scheme:{id:"action.languageMode.scheme",defaultMessage:"Scheme"},Scss:{id:"action.languageMode.scss",defaultMessage:"SCSS"},Shell:{id:"action.languageMode.shell",defaultMessage:"Shell"},Solidity:{id:"action.languageMode.solidity",defaultMessage:"Solidity"},SQL:{id:"action.languageMode.sql",defaultMessage:"SQL"},Swift:{id:"action.languageMode.swift",defaultMessage:"Swift"},TOML:{id:"action.languageMode.toml",defaultMessage:"TOML"},TypeScript:{id:"action.languageMode.typescript",defaultMessage:"TypeScript"},"VB.Net":{id:"action.languageMode.vbdotnet",defaultMessage:"VB.Net"},Verilog:{id:"action.languageMode.verilog",defaultMessage:"Verilog"},VHDL:{id:"action.languageMode.vhdl",defaultMessage:"VHDL"},"Visual Basic":{id:"action.languageMode.visualbasic",defaultMessage:"Visual Basic"},WebAssembly:{id:"action.languageMode.webassembly",defaultMessage:"WebAssembly"},XML:{id:"action.languageMode.xml",defaultMessage:"XML"},YAML:{id:"action.languageMode.yaml",defaultMessage:"YAML"},"Java/C/C++/C#":{id:"action.languageMode.cstyle",defaultMessage:"Java/C/C++/C#"}}),kt=[de.J5S,de.ffD(de.OPg),de.Eok,de.rol("code"),de.ffD(de.O4s)],Nt=(0,we.$J)({key:"code block languageMode actions",title:Fe.languageModeName,render:e=>(0,M.jsx)(ie.Z,{...e}),actions:o.X0.map((e=>(0,we.cN)({key:`set language ${e} action`,displayName:Ct[e],analyticsName:`set language ${e}`,validators:kt,closeParentMenu:!0,action:t=>{let{environment:a,blocks:n}=t;A.Z.set({userId:a.currentUser.id,key:be.T.localLanguagePreferenceKey,value:e}),W.createAndCommit({userAction:"actionRegistry.languageModeActions",environment:a,perform:t=>{B.E5({language:e,blocks:n,transaction:t})}})},render:t=>(0,M.jsx)(oe.Z,{...t,title:e})})))}),St=(0,we.MV)({key:"languageMode section",displayName:Fe.languageModeName,analyticsName:Fe.languageModeName.defaultMessage,validators:kt,subActions:()=>[Nt]}),ht=(0,we.cN)({key:"format code",displayName:Fe.formatCodeLabel,closeParentMenu:!0,analyticsName:Fe.formatCodeLabel.defaultMessage,validators:[de.U7o,de.P99("code"),de.GzT],action:async e=>{let{blocks:t,environment:a}=e;const n=t[0];await B.Cn({codeBlockStore:n,environment:a})}}),Lt=(0,we.cN)({key:"work at notion",analyticsName:Fe.workAtNotion.defaultMessage,closeParentMenu:!0,displayName:Fe.workAtNotion,validators:[de.P99("code"),de.vM3],action:()=>{window&&window.open(D._j.careers)}}),wt=[de.J5S,de.ffD(de.OPg),de.rol("quote")];function _t(e){return t=>{A.Z.set({userId:t.environment.currentUser.id,key:be.l.localSizePreferenceKey,value:e}),W.createAndCommit({userAction:"actionRegistry.createQuoteSizeAction",environment:t.environment,perform:a=>{z.FH({stores:t.blocks,update:{quote_size:e},transaction:a})}})}}const xt=(0,we.$J)({key:"quote size actions",title:Fe.quoteSizeSection,render:e=>(0,M.jsx)(ie.Z,{...e}),actions:[(0,we.cN)({key:"quote size default",displayName:Fe.quoteSizeDefault,analyticsName:Fe.quoteSizeDefault.defaultMessage,validators:wt,closeParentMenu:!0,action:_t(void 0)}),(0,we.cN)({key:"quote size large",displayName:Fe.quoteSizeLarge,analyticsName:Fe.quoteSizeLarge.defaultMessage,validators:wt,closeParentMenu:!0,action:_t("large")})]}),It=(0,we.MV)({key:"quote size",displayName:Fe.quoteSize,analyticsName:Fe.quoteSize.defaultMessage,svg:h,validators:wt,subActions:()=>[xt]}),Pt=[de.J5S,de.ffD(de.OPg),de.rol("numbered_list"),de.J8b("numbered_list")],jt=[de.J5S,de.ffD(de.OPg),de.rol("bulleted_list"),de.J8b("bulleted_list")],At=(0,we.MV)({key:"number format",displayName:Fe.listFormat,analyticsName:Fe.listFormat.defaultMessage,svg:S.N,validators:Pt,subActions:()=>[Ft]});function Dt(e){return t=>{W.createAndCommit({userAction:"actionRegistry.createListFormatAction",environment:t.environment,perform:a=>{z.FH({stores:t.blocks,update:{list_format:e},transaction:a})}})}}const Ft=(0,we.$J)({key:"text color actions",title:Fe.listFormatSection,render:e=>(0,M.jsx)(ie.Z,{...e}),actions:[(0,we.cN)({key:"list format default",displayName:Fe.listFormatDefault,analyticsName:Fe.listFormatDefault.defaultMessage,validators:Pt,closeParentMenu:!0,action:Dt(void 0)}),(0,we.cN)({key:"list format numbers",displayName:Fe.listFormatNumbers,analyticsName:Fe.listFormatNumbers.defaultMessage,validators:Pt,closeParentMenu:!0,action:Dt("numbers")}),(0,we.cN)({key:"list format letters",displayName:Fe.listFormatLetters,analyticsName:Fe.listFormatLetters.defaultMessage,validators:Pt,closeParentMenu:!0,action:Dt("letters")}),(0,we.cN)({key:"list format roman numerals",displayName:Fe.listFormatRoman,analyticsName:Fe.listFormatRoman.defaultMessage,validators:Pt,closeParentMenu:!0,action:Dt("roman")})]});function Tt(e){return t=>{W.createAndCommit({userAction:"actionRegistry.createBulletListFormatAction",environment:t.environment,perform:a=>{z.FH({stores:t.blocks,update:{bullet_list_format:e},transaction:a})}})}}const Zt=(0,we.$J)({key:"bullet list format actions",title:Fe.listFormatSection,render:e=>(0,M.jsx)(ie.Z,{...e}),actions:[(0,we.cN)({key:"list format default",displayName:Fe.listFormatDefault,analyticsName:Fe.listFormatDefault.defaultMessage,validators:jt,closeParentMenu:!0,action:Tt(void 0)}),(0,we.cN)({key:"list format disc",displayName:Fe.listFormatDisc,analyticsName:Fe.listFormatDisc.defaultMessage,validators:jt,closeParentMenu:!0,action:Tt("disc")}),(0,we.cN)({key:"list format circle",displayName:Fe.listFormatCircle,analyticsName:Fe.listFormatCircle.defaultMessage,validators:jt,closeParentMenu:!0,action:Tt("circle")}),(0,we.cN)({key:"list format square",displayName:Fe.listFormatSquare,analyticsName:Fe.listFormatSquare.defaultMessage,validators:jt,closeParentMenu:!0,action:Tt("square")})]}),Vt=(0,we.MV)({key:"bulleted format",displayName:Fe.listFormat,analyticsName:Fe.listFormat.defaultMessage,svg:S.N,validators:jt,subActions:()=>[Zt]}),Rt=[de.jlf,de.J5S,de.or([de.xDy([de.U7o,de.Cjo,de.k6d]),de.xDy([de.P99(n.Ti.text),de.QLY("text_align")])])],Bt=(0,we.MV)({key:"alignment",displayName:Fe.alignmentName,analyticsName:Fe.alignmentName.defaultMessage,svg:d.$,validators:Rt,subActions:()=>[Jt]});function Ht(e){return t=>{W.createAndCommit({userAction:"actionRegistry.createAlignmentFormatAction",environment:t.environment,perform:a=>{if(t.blocks&&t.blocks.length>0)for(const n of t.blocks)z.hc({environment:t.environment,store:n,alignment:e,transaction:a})}})}}const zt=(0,F.defineMessages)({leftAlign:{id:"action.alignment.left.name",defaultMessage:"Left"},centerAlign:{id:"action.alignment.center.name",defaultMessage:"Center"},rightAlign:{id:"action.alignment.right.name",defaultMessage:"Right"}}),Jt=(0,we.$J)({key:"alignment format actions",title:Fe.alignmentName,render:e=>(0,M.jsx)(ie.Z,{...e}),actions:[(0,we.cN)({key:"alignment format left",displayName:zt.leftAlign,analyticsName:"Align left",validators:Rt,closeParentMenu:!0,svg:d.$,action:Ht("left")}),(0,we.cN)({key:"alignment format center",displayName:zt.centerAlign,analyticsName:"Align center",validators:Rt,closeParentMenu:!0,svg:c.L,action:Ht("center")}),(0,we.cN)({key:"alignment format right",displayName:zt.rightAlign,analyticsName:"Align right",validators:Rt,closeParentMenu:!0,svg:u.g,action:Ht("right")})]}),Et=(0,we.cN)({key:"edit image",displayName:Fe.cropImage,analyticsName:Fe.cropImage.defaultMessage,svg:f.s,validators:[de.J5S,de.Jji,de.YZb,de.QLY("image_cropping")],closeParentMenu:!0,action:e=>{let{blocks:t,environment:a}=e;const n=t[0],o=n.getOriginalImageSource();o&&(ve.Z.openModal({blockStore:n,originalSource:o}),Z.Z(a,{from:"blockmenu"}))}}),Ut={key:"block menu primary",render:e=>(0,M.jsx)(ie.Z,{...e}),actions:[ke.NY,Se.G,Le.o1,Le.vh,Ze,Ve,Re,Be,re.f]},Ot={key:"block menu navigation",render:e=>(0,M.jsx)(ie.Z,{...e}),actions:[He,ze,...Pe.ej,Ne.H,Ne.K,Je]},Kt={key:"block menu secondary",render:e=>(0,M.jsx)(ie.Z,{...e}),actions:[et,tt,at,nt,ot,_e.d,Ee,Ue,Oe,pt,Ae.B,Ae.L9,Ke,je.$,je.g,Ge,$e,We,Ye,Qe,Xe,st,rt,ft,Ie.A,dt]},qt={key:"block menu dictate",render:e=>(0,M.jsx)(ie.Z,{...e}),actions:[he.j8]},Gt={key:"block menu comment",render:e=>(0,M.jsx)(ie.Z,{...e}),actions:[Ce.UI,Ce.VJ,Ce.Bt]},$t={key:"block menu color",render:e=>(0,M.jsx)(ie.Z,{...e,topBorder:!0}),actions:[ye.Tr,bt]},Wt={key:"code block menu style",render:e=>(0,M.jsx)(ie.Z,{...e}),actions:[yt,St,ht,Lt]},Yt={key:"block menu quote",render:e=>(0,M.jsx)(ie.Z,{...e}),actions:[It]},Qt={key:"block menu number",render:e=>(0,M.jsx)(ie.Z,{...e}),actions:[At]},Xt={key:"block menu bullet",render:e=>(0,M.jsx)(ie.Z,{...e}),actions:[Vt]},ea={key:"block alignment",render:e=>(0,M.jsx)(ie.Z,{...e}),actions:[Bt,Et]},ta=[xe.ww,Gt,ea,Ut,qt,Ot,Kt,$t,Wt,Yt,Qt,Xt],aa=(0,we.MV)({key:"open in (group)",svg:l.J,displayName:Fe.openIn,analyticsName:Fe.openIn.defaultMessage,validators:[de.U7o,de.ffD(de.tqC),Pe.Y7],subActions:()=>[{key:0,title:void 0,render:e=>(0,M.jsx)(ie.Z,{...e}),actions:Pe.Ob}]}),na={key:"collection menu tertiary",render:e=>(0,M.jsx)(ie.Z,{...e}),actions:[Ce.UI,aa]},oa={key:"collection menu secondary",render:e=>(0,M.jsx)(ie.Z,{...e}),actions:[Mt,Ge]},ia={key:"collection menu primary",render:e=>(0,M.jsx)(ie.Z,{...e}),actions:[dt,mt,Ne.K,Je,Le.o1,Ie.A,Se.G]},sa=[ia,oa,na],ra=[ia,oa,{key:"collection menu tertiary",render:e=>(0,M.jsx)(ie.Z,{...e}),actions:[aa]}]},342784:(e,t,a)=>{a.d(t,{ww:()=>g});a(667294);var n=a(338491),o=a(355863),i=a(452423),s=a(672495),r=a(119037),l=a(62967),c=a(785893);const d=(0,l.cN)({key:"mobile undo",displayName:l.RE.undoName,analyticsName:l.RE.undoName.defaultMessage,svg:o.s,validators:[r.jlf,r.Mnk,r.ffD(r.Eok),r.ffD(r.tls)],closeParentMenu:!0,action:e=>{let{environment:t}=e;return i.Yw(t)}}),u=(0,l.cN)({key:"mobile redo",displayName:l.RE.redoName,analyticsName:l.RE.redoName.defaultMessage,svg:n.N,validators:[r.Mnk,r.ffD(r.Eok),r.ffD(r.tls)],closeParentMenu:!0,action:e=>{let{environment:t}=e;return i.KX(t)}}),g=(0,l.$J)({key:"mobile revision actions",render:e=>(0,c.jsx)(s.Z,{...e}),actions:[d,u]})},781575:(e,t,a)=>{a.d(t,{AK:()=>m,Mc:()=>s,OS:()=>d,Td:()=>p,Uu:()=>r,XC:()=>l,ZK:()=>v,e8:()=>g,gV:()=>u,hc:()=>b,n0:()=>M,u0:()=>f,xi:()=>c});var n=a(730459),o=a(215010),i=a(535057);function s(e){n.K4(e,"add_slack_integration")}function r(e){n.K4(e,"remove_slack_integration")}function l(e,t){n.K4(e,"slack_notification_create",t)}function c(e,t){n.K4(e,"slack_notification_delete",t)}function d(e,t){n.K4(e,"slack_notification_update",t)}function u(e,t){const a=i.zt(),s=o.JF();n.K4(e,"slack_imports_invite_render_button",{subscription_tier:a,domain_type:s,origin:t.origin,invite_flow_id:t.invite_flow_id})}function g(e,t){const a=i.zt(),s=o.JF();n.K4(e,"slack_imports_invite_render_invite_popup",{subscription_tier:a,domain_type:s,origin:t.origin,invite_flow_id:t.invite_flow_id})}function m(e,t){const a=i.zt(),s=o.JF();n.K4(e,"slack_imports_invite_click_invite_button",{subscription_tier:a,domain_type:s,invited_user_count:t.invited_user_count,origin:t.origin,invite_token_query:t.inviteTokenQuery,invite_targets:t.inviteTargets,invite_flow_id:t.invite_flow_id})}function f(e,t){const a=i.zt(),s=o.JF();n.K4(e,"slack_imports_invite_completed",{subscription_tier:a,domain_type:s,invited_user_count:t.invited_user_count,is_success:t.is_success,origin:t.origin,invite_flow_id:t.invite_flow_id,error:t.error,invite_stage:t.invite_stage})}function p(e,t){const a=i.zt(),s=o.JF();n.K4(e,"slack_imports_invite_dismiss_popup",{subscription_tier:a,domain_type:s,origin:t.origin,invite_flow_id:t.invite_flow_id})}function b(e,t){const a=i.zt(),s=o.JF();n.K4(e,"slack_imports_invite_click_select_all",{subscription_tier:a,domain_type:s,origin:t.origin,invite_flow_id:t.invite_flow_id,invited_user_count:t.invited_user_count,is_unselect:t.is_unselect,invite_token_query:t.invite_token_query})}function M(e,t){const a=i.zt(),s=o.JF();n.K4(e,"slack_imports_invite_start_slack_integration",{subscription_tier:a,domain_type:s,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from})}function v(e,t){const a=i.zt(),s=o.JF();n.K4(e,"slack_imports_invite_complete_slack_integration",{subscription_tier:a,domain_type:s,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from,is_success:t.is_success})}},76463:(e,t,a)=>{a.d(t,{P0:()=>_,RN:()=>j,VG:()=>I,Yw:()=>x,jX:()=>A,k2:()=>D,lz:()=>w,v2:()=>P});var n=a(186517),o=a(772141),i=a(145953),s=a(421202),r=a(177420),l=a(815047),c=a(519889),d=a(709291),u=a(401898),g=a(547307),m=a(433929),f=a(367669),p=a(206258),b=a(454642),M=a(792625),v=a(476464),y=a(709953),C=a(164964),k=a(328014),N=a(210228),S=a(61202);const h=(0,d.defineMessages)({duplicatingTemplate:{id:"botActions.duplicatingTemplate.loadingMessage",defaultMessage:"Duplicating template..."},duplicatingTemplateError:{id:"botActions.duplicateTemplateAndShareWithBot.snackbar.failure",defaultMessage:"Failed to duplicate template for to your workspace"}});function L(e,t){const{environment:a,spaceStore:n,spaceRole:o}=t,i=function(e){const{name:t,spaceStore:a,userId:n,icon:o,type:i}=e,s=Date.now(),r={name:t,created_at:s,created_by_table:c.KJ,created_by_id:n,alive:!0,icon:o,space_id:a.id,last_edited_at:s,last_edited_by_id:n,last_edited_by_table:c.KJ};switch(i){case"guest":return{...r,type:"guest",capabilities:e.capabilities,parent_table:l.bx,parent_id:a.id,integration_id:void 0};case"scim":return{...r,type:"scim",parent_table:c.KJ,parent_id:n};default:(0,u.t1)(i)}}(t),s=y.ae({environment:a,table:r.cZ,value:i,inMemoryRecordCache:a.defaultRecordCache.inMemoryRecordCache,transaction:e});return v.tQ({environment:a,spaceStore:n,permissionItems:[{type:"bot_permission",role:o,bot_id:s.id}],transaction:e}),{botStore:s}}function w(e){const{environment:t}=e,{serverCommitResult:a,performResult:{botStore:n}}=N.createAndCommit({userAction:"botActions.createSpaceBot",environment:t,perform:t=>L(t,e)});return{botStore:n,transactionPromise:a}}async function _(e){const{environment:t,botId:a,onSuccess:n}=e,o=await b.deleteBot(t,{botId:a});"failed"===o.type?g.showError(o):"success"===o.type&&n&&(await S.pJ({environment:t}),n())}async function x(e){const{environment:t,table:a,id:n,type:o}=e,i=await b.getBots(t,{table:a,id:n,type:o});if("failed"===i.type)throw g.showError(i),i;return{botIds:i.data.botIds,recordMap:i.data.recordMap}}async function I(e){const{environment:t,botId:a}=e,n=await b.getBotToken(t,{botId:a});if("failed"!==n.type)return n.data.token;g.showError(n)}function P(e){const{botValue:t,store:a,environment:o}=e,{id:i,parent_id:s,parent_table:r,capabilities:l}=t,c={type:"bot_permission",bot_id:i,parent_id:s,parent_table:r,role:(0,n.uH)(l)};N.createAndCommit({userAction:"TopbarMoreButton.handleAddingConnection",environment:o,perform:e=>{v.l3({environment:o,store:a,permissionItems:[c],transaction:e})}})}function j(e){const{botId:t,store:a,environment:n}=e,i=a.getPermissionItems().filter((0,u.AO)((e=>(0,o.FB)(e)?{true:e}:{false:e})));for(const o of i)if(o.bot_id===t){const e={...o,role:"none"};N.createAndCommit({userAction:"TopbarMoreButton.handleRemovingConnection",environment:n,perform:t=>{v.l3({environment:n,store:a,permissionItems:[e],transaction:t})}})}}function A(e){const{currentSpaceStore:t,environment:a,pages:n,botStore:o,addPermission:i}=e;if(!t)return;const r=(0,f.zT)({botStore:o,addPermission:i});n.forEach((e=>{const n=p.t1.createChildStore(t,{table:s.iU,id:e});N.createAndCommit({userAction:"botActions.updateBlockPermissionsForBot",environment:a,perform:e=>{v.l3({environment:a,store:n,permissionItems:[r],transaction:e})}})}))}async function D(e){const{environment:t,spaceStore:a,spaceViewStore:n,templatePageId:o,botValue:s,pages:l}=e;if(!a)return;const c=p.t1.createChildStore(a,{table:r.cZ,id:s.id});if(o)return await async function(e){const{environment:t,spaceStore:a,spaceViewStore:n,templatePageId:o,botStore:s}=e;if(!a||!n)return;try{M.j({message:h.duplicatingTemplate});const e=await b.loadBlockSubtree(t,{block:{id:o,spaceId:a.id},shallow:!1});if("failed"===e.type)return;const r=i.PF.create(e.data.subtreeRecordMap),{performResult:l}=N.createAndCommit({userAction:"botActions.duplicateTemplateAndShareWithBot",environment:t,perform:e=>{const i=k.cc({environment:t,recordMap:r,copyPageId:o,isPrivate:!0,spaceStore:a,spaceViewStore:n,transaction:e,allowCopyExternalObjectInstances:!1}),l=n.getPrivatePageIds();l.length>0&&y.sW({store:n,data:{private_pages:[i.id,...l]},transaction:e});const c=(0,f.zT)({botStore:s,addPermission:!0});return v.l3({environment:t,store:i,permissionItems:[c],transaction:e}),i}});return l}catch(r){C.oV({label:m.default.formatMessage(h.duplicatingTemplateError)})}finally{M.x()}}({environment:t,templatePageId:o,botStore:c,spaceStore:a,spaceViewStore:n});A({environment:t,currentSpaceStore:a,botStore:c,pages:l,addPermission:!0})}},605851:(e,t,a)=>{a.d(t,{VR:()=>u,ac:()=>d,zq:()=>c});a(667294);var n=a(724405),o=a(213148),i=a(698519),s=a(709291),r=a(785893);function l(e){const{enabled:t,labelIfEnabled:a,labelIfDisabled:o}=e,i=(0,n.yK)((e=>({container:{color:t?e.mediumTextColor:e.lightTextColor}})),[t]);return(0,r.jsxs)("div",{style:i.container,children:[g(t)," ",t?a:o]})}function c(e){const t="none"!==e;return[(0,r.jsx)(l,{enabled:t&&e.read_content,labelIfEnabled:(0,r.jsx)(s.FormattedMessage,{id:"capabilitiesTooltip.mixedAccess.readContent.enabled",defaultMessage:"Can read content."}),labelIfDisabled:(0,r.jsx)(s.FormattedMessage,{id:"capabilitiesTooltip.mixedaccess.readContent.disabled",defaultMessage:"Cannot read content."})},"read_content"),(0,r.jsx)(l,{enabled:t&&e.insert_content,labelIfEnabled:(0,r.jsx)(s.FormattedMessage,{id:"capabilitiesTooltip.mixedaccess.insertContent.enabled",defaultMessage:"Can insert content."}),labelIfDisabled:(0,r.jsx)(s.FormattedMessage,{id:"capabilitiesTooltip.mixedaccess.insertContent.disabled",defaultMessage:"Cannot insert content."})},"insert_content"),(0,r.jsx)(l,{enabled:t&&e.update_content,labelIfEnabled:(0,r.jsx)(s.FormattedMessage,{id:"capabilitiesTooltip.mixedaccess.updateContent.enabled",defaultMessage:"Can update content."}),labelIfDisabled:(0,r.jsx)(s.FormattedMessage,{id:"capabilitiesTooltip.mixedaccess.updateContent.disabled",defaultMessage:"Cannot update content."})},"update_content"),(0,r.jsx)(l,{enabled:t&&e.insert_comment,labelIfEnabled:(0,r.jsx)(s.FormattedMessage,{id:"capabilitiesTooltip.insertComment.enabled",defaultMessage:"Can comment."}),labelIfDisabled:(0,r.jsx)(s.FormattedMessage,{id:"capabilitiesTooltip.insertComment.disabled",defaultMessage:"Cannot comment."})},"insert_comment"),(0,r.jsx)(l,{enabled:t&&e.read_comment,labelIfEnabled:(0,r.jsx)(s.FormattedMessage,{id:"capabilitiesTooltip.readComment.enabled",defaultMessage:"Can read comments."}),labelIfDisabled:(0,r.jsx)(s.FormattedMessage,{id:"capabilitiesTooltip.readComment.disabled",defaultMessage:"Cannot read comments."})},"read_comment")]}function d(e){return[(0,r.jsx)(l,{enabled:e.read_user_without_email,labelIfEnabled:(0,r.jsx)(s.FormattedMessage,{id:"capabilitiesTooltip.userAccess.readUsers.enabled",defaultMessage:"Can view users."}),labelIfDisabled:(0,r.jsx)(s.FormattedMessage,{id:"capabilitiesTooltip.userAccess.readUsers.disabled",defaultMessage:"Cannot view users."})},"read_user_without_email"),(0,r.jsx)(l,{enabled:e.read_user_with_email,labelIfEnabled:(0,r.jsx)(s.FormattedMessage,{id:"capabilitiesTooltip.userAccess.readUserEmailAddresses.enabled",defaultMessage:"Can view user email addresses."}),labelIfDisabled:(0,r.jsx)(s.FormattedMessage,{id:"capabilitiesTooltip.userAccess.readUserEmailAddresses.disabled",defaultMessage:"Cannot view user email addresses."})},"read_user_with_email")]}function u(e){return[(0,r.jsx)(l,{enabled:e.link_preview,labelIfEnabled:(0,r.jsx)(s.FormattedMessage,{id:"capabilitiesTooltip.linkPreview.enabled",defaultMessage:"Can preview links."}),labelIfDisabled:(0,r.jsx)(s.FormattedMessage,{id:"capabilitiesTooltip.linkPreview.disabled",defaultMessage:"Cannot preview links."})},"link_preview"),(0,r.jsx)(l,{enabled:e.synced_database,labelIfEnabled:(0,r.jsx)(s.FormattedMessage,{id:"capabilitiesTooltip.syncedDatabase.enabled",defaultMessage:"Can sync databases."}),labelIfDisabled:(0,r.jsx)(s.FormattedMessage,{id:"capabilitiesTooltip.syncedDatabase.disabled",defaultMessage:"Cannot sync databases."})},"synced_database")]}function g(e){const t={width:12,display:"inline",verticalAlign:"middle"};return e?(0,i.k)(t):(0,o.U)(t)}},484015:(e,t,a)=>{a.d(t,{_:()=>c});a(667294);var n=a(800480),o=a(186517),i=a(709291),s=a(605851),r=a(828992),l=a(785893);function c(e){const{role:t}=e,a=(0,i.useIntl)(),{device:c}=(0,n.O7)(),d=(0,s.zq)(t);return(0,l.jsx)(r.Z,{...e,title:a.formatMessage((0,o.Gx)(t,void 0).label),shouldWrapCaption:!0,style:c.isMobile?{padding:"12px 4px"}:{padding:4,marginTop:2,marginBottom:2},captionStyle:{marginTop:4},caption:(0,l.jsx)("div",{children:d})})}},69872:(e,t,a)=>{a.d(t,{L:()=>u,Z:()=>g});a(667294);var n=a(800480),o=a(724405),i=a(12396),s=a(698519),r=a(623879),l=a(552275),c=a(828992),d=a(785893);let u=function(e){return e[e.Name=0]="Name",e[e.Type=1]="Type",e}({});const g=function(e){const{propertySchema:t,format:a,locked:g}=e,m=(0,o.Fg)(),f=(0,n.O7)(),{name:p,type:b,icon:M}=t,v=a===u.Name?p:r.SO[b];return g?(0,d.jsx)(c.Z,{title:v,icon:(0,d.jsx)(i.ZP,{icon:M,type:b,size:f.device.isMobile?18:16,theme:m,style:{fill:m.regularIconColor}}),...e}):(0,d.jsx)(l.Z,{title:v,icon:(0,d.jsx)(i.ZP,{icon:M,type:b,size:f.device.isMobile?18:16,theme:m,style:{fill:m.regularIconColor,marginLeft:6,marginRight:2}}),right:e.selected?(0,s.k)({width:14,height:14}):null,...e})}},883283:(e,t,a)=>{a.d(t,{Z:()=>ct,f:()=>st});a(757658);var n=a(667294),o=a(875553),i=a(772141),s=a(177420),r=a(709291),l=a(401898),c=a(62967),d=a(454642),u=a(800893),g=a(800480),m=a(886628),f=a(724405),p=a(815145),b=a(745238),M=a(785893);const v=(0,b.IU)("disconnect",{viewBox:"0 0 16 16",svg:(0,M.jsx)("path",{d:"M6.45508 4.50977L7.28906 5.34375L8.7041 3.4707L7.67871 5.7334L9.45605 7.51074H11.083L10.3857 8.43359L11.2539 9.30859L12.7852 7.36035C12.9082 7.20996 12.9697 7.06641 12.9697 6.90234C12.9697 6.61523 12.751 6.41016 12.4502 6.41016H8.54688L10.5703 1.05078C10.8506 0.298828 10.0645 -0.0976562 9.58594 0.517578L6.45508 4.50977ZM12.874 13.6631C13.0859 13.875 13.4346 13.875 13.6396 13.6631C13.8516 13.458 13.8584 13.1025 13.6396 12.8906L3.10547 2.35645C2.90039 2.15137 2.53809 2.14453 2.33301 2.35645C2.12793 2.56152 2.12793 2.92383 2.33301 3.12891L12.874 13.6631ZM3.0166 9.12402C3.0166 9.4043 3.23535 9.61621 3.53613 9.61621H7.44629L5.41602 14.9688C5.13574 15.7207 5.92188 16.1172 6.40039 15.5088L9.52441 11.5166L8.69043 10.6895L7.28223 12.5488L8.30078 10.293L6.5166 8.51562H4.89648L5.60059 7.59277L4.72559 6.71777L3.20801 8.65918C3.08496 8.81641 3.0166 8.95996 3.0166 9.12402Z"})});var y=a(418442),C=a(339248),k=a(474181),N=a(421202),S=a(275754),h=a(715070),L=a(80444),w=a(552275),_=a(670301);function x(e,t){const{bot:a}=e,n=(0,m.VK)((()=>L.default.state.currentUserRootStore),[]);return a&&n?(0,M.jsx)(w.Z,{...e,icon:(0,M.jsx)(_.Z,{botValue:a}),title:(0,h.Mh)(a),ref:t}):null}const I=n.forwardRef(x);var P=a(693405),j=a(268894),A=a(568785),D=a(828992),F=a(743765),T=a(731278),Z=a(776798),V=a(526388),R=a(484015),B=a(841892),H=a(324600),z=a(484210),J=a(98742),E=a(128187),U=a(825464),O=a(942402),K=a(760442);function q(e){return(0,m.VK)((()=>{var t;return{isDefined:e.isDefined(),channel:null===(t=e.getKeyStore("channel").getValue())||void 0===t?void 0:t.replace(/^#/,"")}}),[e])}function G(){return(0,M.jsx)(K.Z,{imageURL:B.Z.images.tooltips.pageUpdates.slackPng,imageHeight:100,caption:(0,M.jsx)(r.FormattedMessage,{defaultMessage:"Connect a Slack channel to get updates about this page and pages within it.",id:"topbar.updatesButton.slackIntegrationButton.tooltip"})})}function $(){return(0,M.jsx)(K.Z,{imageURL:B.Z.images.tooltips.pageUpdates.slackPng,imageHeight:100,caption:(0,M.jsx)(r.FormattedMessage,{defaultMessage:"Disconnect a Slack channel to stop getting updates about this page and pages within it.",id:"topbar.updatesButton.slackIntegrationButton.disconnectTooltip"})})}const W=(0,n.forwardRef)((function(e,t){const{blockStore:a,...n}=e,{blockStore:o,slackIntegrationStore:i}=(0,E.Jk)(a),{isDefined:s,channel:l}=q(i),c=(0,m.VK)((()=>(0,z.ZP)({store:o,pageVisitSource:p.tY.LinkInPage})),[o]);return s?(0,M.jsx)(V.Z,{placement:U.u.Left,render:e=>(0,M.jsx)(P.Z,{...(0,J.Z)(e,n),svg:H.P,title:l,caption:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(r.FormattedMessage,{defaultMessage:"Based on",id:"topbar.updatesButton.slackIntegrationButton.activeTitle"})," ",(0,M.jsx)(O.Z,{href:c,children:(0,M.jsx)(Z.Z,{store:o,style:{display:"inline"}})})]}),ref:t}),renderTooltip:$}):null})),Y=(0,n.forwardRef)((function(e,t){const{blockStore:a,...n}=e,{slackIntegrationStore:o}=(0,m.VK)((()=>(0,E.Jk)(a)),[a]),{isDefined:i,channel:s}=q(o);return i?(0,M.jsx)(V.Z,{placement:U.u.Left,render:e=>(0,M.jsx)(P.Z,{svg:H.P,title:s,caption:(0,M.jsx)(r.FormattedMessage,{defaultMessage:"Connected to Slack channel",id:"topbar.updatesButton.slackIntegrationButton.connectedCaption"}),...(0,J.Z)(e,n)}),renderTooltip:$,ref:t}):null}));var Q=a(186517),X=a(460709),ee=a(748019),te=a(478140),ae=a(840721),ne=a(672495),oe=a(842782);const ie=(0,n.forwardRef)((function(e,t){const{context:a,parent:o,isSharedDirectly:i,botStore:s,botPermissionSourcePage:r,originConnectionLabel:l,...c}=e,d=(0,g.O7)(),u=(0,m.VK)((()=>L.default.state.currentSpaceStore),[]),f=a.blocks[0],p=(0,m.VK)((()=>f.canAdmin()&&(null==u?void 0:u.canRead())),[f,u]),{botCapabilities:b,botName:v}=(0,m.VK)((()=>({botCapabilities:s.getCapabilities(),botName:s.getName()})),[s]);return(0,n.createElement)(oe.Z,{...c,key:s.id,renderOrigin:e=>(0,M.jsx)(w.Z,{...e,title:l,icon:(0,M.jsx)(_.Z,{botStore:s,showActiveDot:!0,style:{position:"relative"}})}),renderExtension:(e,t)=>{let n;return n=d.device.isPhone?{menuType:X.og.Modal,right:(0,M.jsx)(ae.DoneMenuText,{}),onClickRight:t.close,...e}:{menuType:X.og.Popup,width:220,...e},(0,M.jsx)(te.Z,{...n,children:(0,M.jsx)(ee.Z,{context:a,initialFocus:0,onAccept:o.onAccept,sections:[se({isSharedDirectly:i,botCapabilities:b,botPermissionSourcePage:r}),...p?[re({isSharedDirectly:i,botId:s.id,botName:v})]:[]]})})},onFocus:o.onFocus,focused:c.focused,openOnFocus:!1,ref:t})}));function se(e){const{botCapabilities:t,isSharedDirectly:a,botPermissionSourcePage:n}=e,o=(0,Q.uH)(t);return{key:"active connection capabilities section",render:e=>(0,M.jsx)(ne.Z,{...e,topBorder:!1}),actions:[...a?[]:[Ye(n)],Qe(o)]}}function re(e){const{isSharedDirectly:t,botId:a,botName:n}=e;return{key:"active connection disconnect section",render:e=>(0,M.jsx)(ne.Z,{...e}),actions:t?[Xe(a,n)]:[et(a)]}}var le=a(315468),ce=a(959753),de=a(509844),ue=a(436610),ge=a(296994),me=a(641623),fe=a(548779),pe=a(277907),be=a(206258);const Me=(0,n.forwardRef)((function(e,t){const{context:a,parent:o,alreadyConnectedIntegrationIds:i,alreadyConnectedBotIds:r,originButtonLabel:c,...d}=e,u=a.blocks[0],f=(0,g.O7)(),p=(0,m.VK)((()=>L.default.state.currentSpaceStore),[]),b=(0,m.VK)((()=>null==p?void 0:p.getBotSettingsStore().getValue()),[p]),v=(0,m.VK)((()=>null!=b&&b.integration_restrictions&&null!=b&&b.integration_approval_statuses?Object.keys(b.integration_approval_statuses):[]),[b]),[y,C]=(0,n.useState)(""),[N,S]=(0,n.useState)({status:"loading"}),h=(0,pe.XJ)(ge.FF.searchActions);(0,n.useEffect)((()=>{if("resolved"!==h.status)return;const e=h.value;Promise.all([async function(t){return await e.searchSpaceBots({environment:f,query:t})}(y),async function(e){const t=await ge.FF.searchActions.load();return await t.searchInstallableIntegrations({query:e,environment:f,spaceId:null==p?void 0:p.id,botSettings:b})}(y)]).then((e=>{let[t,a]=e;const n=new Set,o=function(e){const{alreadyConnectedBotIds:t,alreadyConnectedIntegrationIds:a,botValues:n,environment:o}=e,i=[];for(const r of n){const e=r.id,n=t.has(e)||r.integration_id&&a.has(r.integration_id),l=ce.kk.fromValue(s.cZ,r),c=(0,me.Nq)(o,l)||(0,fe.Fn)(o)&&(0,me.f_)(l);!n&&c&&i.push(r)}return i}({alreadyConnectedBotIds:r,alreadyConnectedIntegrationIds:i,botValues:t,environment:f}).map((e=>(e.integration_id&&n.add(e.integration_id),{table:s.cZ,value:e})));let c=a.map((e=>{if(p){const t=be.t1.createChildStore(p,{id:e,table:de.K2}),a=t.computeWithRecordValues((e=>{let{getRecordValueAndSubscribe:a}=e;return a(t)}));if(a&&!(0,k.VM)(a)){return{table:de.K2,value:a}}}})).filter(l.$K).filter((e=>!(n.has(e.value.id)||i.has(e.value.id))));if(k.Cb.name.toLowerCase().includes(y.toLowerCase())){const e={table:"legacy_integration",value:k.Cb};c=[...c,e]}const d=[...o,...c].sort(((e,t)=>{var a,n;const o=null===(a=e.value.name)||void 0===a?void 0:a.toLowerCase(),i=null===(n=t.value.name)||void 0===n?void 0:n.toLowerCase();return o&&i?o<i?-1:o>i?1:0:0}));S({results:d,status:"ready"})})).catch((e=>S({status:"error"})))}),[y,p,r,b,v,f,i,u,h.status,h.value]);return(0,M.jsx)(oe.Z,{...d,renderOrigin:(e,t)=>(0,M.jsx)(P.Z,{...e,ref:t,title:c,svg:le.L}),renderExtension:(e,t)=>{const n=f.device.isMobile?{menuType:X.og.Modal,right:(0,M.jsx)(ae.DoneMenuText,{}),onClickRight:t.close,...e}:{menuType:X.og.Popup,width:220,...e},o=f.device.isMobile?{menuType:X.og.Modal,topbarStyle:{height:0}}:{menuType:X.og.Popup,width:220,maxHeight:"16vh",...e},i=Boolean(u.canAdmin()&&(null==p?void 0:p.canRead()));return(0,M.jsx)(te.Z,{...n,onClick:e=>{e.stopPropagation()},children:(0,M.jsx)(ee.Z,{initialFocus:0,context:a,onAccept:()=>{ue.sS(f)},sections:[...i?[ve(y,C),""===y?ye({searchResults:N,resultsMenuProps:o}):ke({searchResults:N,resultsMenuProps:o})]:[],Ne(i,k.Cb)]})})},onFocus:o.onFocus,focused:d.focused,openOnFocus:!0,ref:t})}));function ve(e,t){return{key:"search connections section",render:e=>(0,M.jsx)(ne.Z,{...e,isInput:!0}),actions:[Ue(e,t)]}}function ye(e){const{searchResults:t,resultsMenuProps:a}=e,n=new Set;return{key:"search initial connections section",render:e=>(0,M.jsx)(Ce,{...e,resultsMenuProps:a}),actions:[..."ready"===t.status?t.results.map((e=>"bot"===e.table?(e.value.integration_id&&n.add(e.value.integration_id),Ke(e.value)):nt(e)?(0,E.F6)()&&!(0,E.SG)()?void 0:Ge(e.value):qe(e.value))).filter(l.$K):"loading"===t.status?[Ee()]:[Oe()]]}}function Ce(e){const{resultsMenuProps:t,...a}=e,o=(0,n.useRef)(null),i=(0,n.useCallback)((()=>{var e;const t=null===(e=o.current)||void 0===e||null===(e=e.querySelector('[role="menuitem"]'))||void 0===e?void 0:e.clientHeight,a=window.innerHeight<600?3:7;o.current&&t&&(o.current.style.maxHeight=a*t+.5*t+"px")}),[]);return(0,n.useEffect)((()=>(i(),window.addEventListener("resize",i),()=>{window.removeEventListener("resize",i)})),[i]),(0,M.jsx)(te.Z,{...t,innerRef:o,children:(0,M.jsx)(ne.Z,{...a,isInput:!0,topBorder:!1,style:{margin:0,paddingTop:0,paddingBottom:0}})})}function ke(e){const{searchResults:t,resultsMenuProps:a}=e;let n=[];return n="error"===t.status?[Oe()]:"loading"===t.status?[Ee()]:"ready"===t.status&&t.results.length>0?t.results.map((e=>e.table===s.cZ?Ke(e.value):nt(e)?(0,E.F6)()&&!(0,E.SG)()?void 0:Ge(e.value):qe(e.value))).filter(l.$K):[{key:"connections search error",displayName:he.default.formatMessage(ze.connectionNoSearchResultsLabel),analyticsName:ze.connectionNoSearchResultsLabel.defaultMessage,searchName:ze.connectionNoSearchResultsLabel.defaultMessage,closeParentMenu:!1,validators:[Se.Ggh,Se.J5S,Je],render:e=>(0,M.jsx)(F.Z,{title:he.default.formatMessage(ze.connectionNoSearchResultsLabel)}),action:()=>{}}],{key:"connections search results",render:e=>(0,M.jsx)(Ce,{...e,resultsMenuProps:a}),actions:n}}function Ne(e,t){const a=e,n=!(0,E.F6)()||(0,E.SG)();return{key:"manage connections section",render:t=>(0,M.jsx)(ne.Z,{...t,style:{marginTop:e?6:0}}),actions:[...!a&&n?[Ge(t)]:[],{key:"manage connections",displayName:he.default.formatMessage(ze.manageConnectionsLabel),analyticsName:ze.manageConnectionsLabel.defaultMessage,searchName:ze.manageConnectionsLabel.defaultMessage,closeParentMenu:!1,validators:[Se.Ggh,Se.J5S,Se.ffD(Se.tqC)],render:e=>(0,M.jsx)(P.Z,{...e,title:he.default.formatMessage(ze.manageConnectionsLabel),svg:y.H}),action:()=>{_e.r$({currentTab:"connected_apps",openedFrom:"topbar"})}}]}}var Se=a(119037),he=a(433929),Le=a(76463),we=a(547307),_e=a(91376),xe=a(476464),Ie=a(412714),Pe=a(599405),je=a(95477),Ae=a(691924),De=a(781575),Fe=a(247839),Te=a(215356),Ze=a(709953),Ve=a(331120),Re=a(210228);const Be=(0,r.defineMessages)({somethingWentWrong:{defaultMessage:"Something went wrong.",id:"slackActions.dialogError.loginWithSlack.errorMessage"},titleMessage:{defaultMessage:"Slack login",id:"slackActions.loginPopupModal.title"},removeIntegrationMessage:{id:"slackIntegrationButton.removeIntegrationConfirmationDialog.prompt",defaultMessage:"Are you sure you want to remove Slack integration?"},removeIntegrationConfirmationLabel:{id:"slackIntegrationButton.removeIntegrationConfirmationDialog.removeButton.label",defaultMessage:"Remove"}});async function He(e){let{environment:t,blockId:a,intl:n}=e;De.Mc(t),await async function(e){const{environment:t,blockId:a,intl:n}=e,o=(0,Ae.eC)(t);let i=(0,Pe.createSlackPopupRedirect)(je.default.domainBaseUrl,{blockId:a,authType:o,userId:t.currentUser.id});if(i=o.redirectToAuth?i:await(0,Ae.HU)(t,i),t.device.isElectron)return void Fe.openExternalUrl(i);const s=await Te.M(t,{width:530,height:530,url:i,titleMessage:Be.titleMessage});if(!s)return void we.showErrorMessage(n.formatMessage(Be.somethingWentWrong));const r=(0,Pe.parseRoute)({url:s,isMobile:t.device.isMobile,baseUrl:je.default.domainBaseUrl,publicDomainName:je.default.publicDomainName,protocol:je.default.protocol,currentUrl:window.location.href});"slackAuthCallback"===r.name&&Ve.YU({route:r,environment:t})}({environment:t,blockId:a,intl:n})}const ze=(0,r.defineMessages)({connectionLoadingLabel:{id:"topbar.connectionsSection.connectionLoading.label",defaultMessage:"Connections loading"},connectionSearchPlaceholderLabel:{id:"topbar.connectionsSection.topbarMoreConnectionsSubMenu.label",defaultMessage:"Search for connections..."},connectionSearchErrorLabel:{id:"topbar.connectionsSection.connectionSearchError.label",defaultMessage:"Something went wrong"},connectionNoSearchResultsLabel:{id:"topbar.connectionsSection.noSearchResults.label",defaultMessage:"No results"},connectionSearchResultLabel:{id:"topbar.connectionsSection.connectionSearchResult.label",defaultMessage:"{name}"},slackEmptyLabel:{id:"topbar.connectionSection.slackEmpty.label",defaultMessage:"Slack"},slackConnectedLabel:{id:"topbar.connectionSection.slackConnected.label",defaultMessage:"Connected to Slack channel"},manageConnectionsLabel:{id:"topbar.connectionsSection.manageConnections.label",defaultMessage:"Manage connections"},connectToLabel:{id:"topbar.connectionsSection.connectTo.label",defaultMessage:"Connect to"},addConnectionsLabel:{id:"topbar.connectionsSection.addConnections.label",defaultMessage:"Add connections"},fromParentPageLabel:{id:"topbar.connectionsSection.fromParenPage.label",defaultMessage:"From"},capabilitiesLabel:{id:"topbar.connectionsSection.capabilities.label",defaultMessage:"Capabilities"},disconnectLabel:{id:"topbar.connectionSection.disconnectIntegration.label",defaultMessage:"Disconnect"},disconnectConfirmationLabel:{id:"topbar.connectionSection.disconnectIntegrationConfirmation.label",defaultMessage:"{botName} will be removed from this page and all child pages. Continue?"},restrictionLabel:{id:"topbar.connectionSection.restrictIntegration.label",defaultMessage:"Restrict"},restrictionConfirmationLabel:{id:"topbar.connectionSection.restrictIntegrationConfirmation.label",defaultMessage:"Are you sure you want to remove this permission and restrict access? This page will no longer share settings from the parent page."},restrictionAcceptLabel:{id:"topbar.connectionSection.restrictAccept.label",defaultMessage:"Restrict access"},connectionLabel:{id:"topbar.connectionSection.connectionIntegration.label",defaultMessage:"{connectionName}"},connectionBotConfirmlabel:{id:"topbar.connectionSection.connectBotConfirmation.label",defaultMessage:"{botName} will have access to this and all child pages. Continue?"},connectionIntegrationConfirmlabel:{id:"topbar.connectionSection.connectIntegrationConfirmation.label",defaultMessage:"{integrationName} is developed by a third party partner and you will be redirected outside of Notion to authorize this connection. Continue?"}}),Je=Se.ffD(Se.xDy([Se.tqC,Se.ffD(Se.xDy([Se.zzA,Se.J5S]))]));function Ee(){return{key:"connections loading",displayName:he.default.formatMessage(ze.connectionLoadingLabel),analyticsName:ze.connectionLoadingLabel.defaultMessage,searchName:ze.connectionLoadingLabel.defaultMessage,closeParentMenu:!1,validators:[Se.Ggh,Se.J5S,Je],render:e=>(0,M.jsx)(D.Z,{...e,icon:(0,M.jsx)(A.Z,{}),title:he.default.formatMessage(ze.connectionLoadingLabel)}),action:()=>{}}}function Ue(e,t){return{key:"search connections input",analyticsName:ze.connectionSearchPlaceholderLabel.defaultMessage,displayName:he.default.formatMessage(ze.connectionSearchPlaceholderLabel),searchName:ze.connectionSearchPlaceholderLabel.defaultMessage,closeParentMenu:!1,validators:[Se.Ggh,Se.J5S,Je],render:()=>(0,M.jsx)(j.ZP,{value:e,onChange:e=>t(e.target.value),placeholder:he.default.formatMessage(ze.connectionSearchPlaceholderLabel),focus:!0}),action:()=>{}}}function Oe(){return{key:"connections search error",displayName:he.default.formatMessage(ze.connectionSearchErrorLabel),analyticsName:ze.connectionSearchErrorLabel.defaultMessage,searchName:ze.connectionSearchErrorLabel.defaultMessage,closeParentMenu:!1,validators:[Se.Ggh,Se.J5S,Je],render:e=>(0,M.jsx)(F.Z,{title:he.default.formatMessage(ze.connectionSearchErrorLabel)}),action:()=>{}}}function Ke(e){const{id:t,name:a}=e,n=he.default.formatMessage(ze.connectionSearchResultLabel,{name:a});return{key:`${t}`,displayName:n,analyticsName:n,searchName:a,closeParentMenu:!1,validators:[Se.Ggh,Se.J5S,Je],render:(t,a)=>(0,M.jsx)(I,{...t,bot:e,focused:t.focused,onClick:async()=>{await tt(a.blocks[0],a.environment,e)},ref:t.ref}),action:async t=>{await tt(t.blocks[0],t.environment,e)}}}function qe(e){const{id:t,name:a,info:n}=e,o=he.default.formatMessage(ze.connectionLabel,{connectionName:a});return{key:`${t}`,displayName:o,analyticsName:o,searchName:a,closeParentMenu:!1,validators:[Se.Ggh,Se.J5S,Je,Se.ffD(Se.tqC)],render:e=>(0,M.jsx)(w.Z,{...e,title:o,icon:(0,M.jsx)("img",{src:n.icon,style:{width:18,height:"auto"},ref:e.ref})}),action:async t=>{let{environment:a}=t;e.id!==k.T0&&await async function(e,t){const{id:a,name:n}=e,o=await we.confirmUserAction({message:he.default.formatMessage(ze.connectionIntegrationConfirmlabel,{integrationName:n})}),i=(0,C.E)(a,n);o&&Ie.D({environment:t,url:i,targetSelf:!1})}(e,a)}}}function Ge(e){const t=he.default.formatMessage(ze.slackEmptyLabel);return{key:"slack empty",displayName:t,analyticsName:ze.slackEmptyLabel.defaultMessage,searchName:t,closeParentMenu:!0,validators:[Se.Ggh,Se.J5S,Se.YPq,Se.tJc,Se.OFQ,Se.ffD(Se.Fxc)],render:a=>(0,M.jsx)(V.Z,{placement:U.u.Left,render:n=>(0,M.jsx)(w.Z,{...(0,J.Z)(n,a),title:t,icon:(0,M.jsx)("img",{src:e.info.icon,style:{height:18}})}),renderTooltip:G}),action:e=>{var t;He({environment:e.environment,blockId:null===(t=e.blocks)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.id,intl:he.default.getIntl()})}}}function $e(){const e=he.default.formatMessage(ze.slackConnectedLabel);return{key:"slack connected inherited",displayName:e,analyticsName:ze.slackConnectedLabel.defaultMessage,searchName:e,closeParentMenu:!0,validators:[Se.Ggh,Se.J5S,Se.urk,Se.ffD(Se.Fxc)],render:(e,t,a)=>(0,M.jsx)(W,{blockStore:t.blocks[0],...e}),action:e=>{}}}function We(){const e=he.default.formatMessage(ze.slackConnectedLabel);return{key:"slack connected on block",displayName:e,analyticsName:ze.slackConnectedLabel.defaultMessage,searchName:e,closeParentMenu:!0,validators:[Se.Ggh,Se.J5S,Se.Rd2,Se.ffD(Se.Fxc)],render:(e,t,a)=>(0,M.jsx)(Y,{blockStore:t.blocks[0],...e}),action:e=>{const{slackIntegrationStore:t}=(0,E.Jk)(e.blocks[0]);!function(e,t,a){we.showDialog({message:a.formatMessage(Be.removeIntegrationMessage),showCancel:!0,keepFocus:!0,items:[{label:a.formatMessage(Be.removeIntegrationConfirmationLabel),color:"red",onAccept:()=>{De.Uu(e),Re.createAndCommit({userAction:"slackActions.handleRemoveSlackIntegration",environment:e,perform:e=>{Ze.sW({store:t,data:{enabled:!1},transaction:e})}})}}]})}(e.environment,t,he.default.getIntl())}}}function Ye(e){const t=he.default.formatMessage(ze.fromParentPageLabel);return{key:"from parent page",displayName:t,analyticsName:t,searchName:t,closeParentMenu:!1,validators:[Se.Ggh,Se.J5S],action:()=>{},render:(t,a)=>{let{blocks:n}=a;const o=n[0],i=be.G.createChildStore(o,{table:N.iU,id:e.blockId});return(0,M.jsx)(at,{parentBlockStore:i})}}}function Qe(e){const t=he.default.formatMessage(ze.capabilitiesLabel);return{key:"capabilities",displayName:t,analyticsName:t,searchName:t,closeParentMenu:!1,validators:[Se.Ggh,Se.J5S],action:()=>{},render:()=>(0,M.jsx)(R._,{role:e})}}function Xe(e,t){const a=he.default.formatMessage(ze.disconnectLabel);return{key:"disconnect integration",displayName:a,analyticsName:a,searchName:ze.disconnectLabel.defaultMessage,closeParentMenu:!1,validators:[Se.Ggh,Se.J5S],action:async a=>{let{blocks:n,environment:o}=a;const i=n[0];await async function(e,t,a,n){const o=await we.confirmUserAction({message:he.default.formatMessage(ze.disconnectConfirmationLabel,{botName:n})});o&&Le.RN({botId:a,store:e,environment:t})}(i,o,e,t)},render:e=>(0,M.jsx)(P.Z,{...e,svg:v,title:a,focused:!0})}}function et(e){const t=he.default.formatMessage(ze.disconnectLabel),a=he.default.formatMessage(ze.restrictionLabel);return{key:"restrict page from permission model",displayName:a,analyticsName:a,searchName:ze.restrictionLabel.defaultMessage,closeParentMenu:!1,validators:[Se.Ggh,Se.J5S],action:async t=>{let{blocks:a,environment:n}=t;const o=a[0];await async function(e,t,a){if(await we.confirmUserAction({message:he.default.formatMessage(ze.restrictionConfirmationLabel),acceptLabel:he.default.formatMessage(ze.restrictionAcceptLabel)})){const n={type:"bot_permission",role:"none",bot_id:e};Re.createAndCommit({userAction:"TopbarMoreConnections.restrictPagePermissions",environment:a,perform:e=>{xe.Pk({environment:a,store:t,permissionItem:n,shouldInherit:!0,transaction:e})}})}}(e,o,n)},render:e=>(0,M.jsx)(P.Z,{...e,svg:v,title:t,focused:!0})}}async function tt(e,t,a){await we.confirmUserAction({message:he.default.formatMessage(ze.connectionBotConfirmlabel,{botName:a.name})})&&Le.v2({botValue:a,store:e,environment:t})}function at(e){const{parentBlockStore:t}=e,a=(0,m.VK)((()=>t.getIcon()),[t]),o=(0,m.VK)((()=>t.isEmptyPage()),[t]),i=(0,g.O7)(),s=(0,f.Fg)(),[l,c]=(0,n.useState)("transparent"),d=i.device.isMobile?{fontSize:14,paddingLeft:4}:{fontSize:12,paddingLeft:4};return(0,M.jsx)(F.Z,{...e,title:(0,M.jsxs)("span",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start"},children:[(0,M.jsx)(r.FormattedMessage,{id:"topbar.connectionSection.parentPage.label",defaultMessage:"From"}),(0,M.jsxs)("span",{style:{display:"flex",alignItems:"center",padding:2,borderRadius:2,marginLeft:2,cursor:"pointer",backgroundColor:l,color:s.regularTextColor,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},onClick:()=>{S._c({environment:i,store:t,pageVisitSource:p.tY.LinkInPage})},onMouseEnter:()=>{c(s.selectLightGray[100])},onMouseLeave:()=>{c("transparent")},onMouseDown:()=>{c(s.selectLightGray[200])},onMouseUp:()=>{c(s.selectLightGray[100])},children:[(0,M.jsx)(T.Z,{disabled:!0,icon:a,isEmptyPage:o,size:12,style:{margin:"0px 2px"}}),(0,M.jsx)(Z.Z,{store:t})]})]}),textWrapperStyle:d})}function nt(e){return"legacy_integration"===e.table&&e.value.id===k.Cb.id}var ot=a(367669);const it=(0,r.defineMessages)({copyPublicApiObject:{id:"action.copyPublicApiObject",defaultMessage:"Copy API object (Dev)"}}),st=(0,c.cN)({key:"copy public API object",displayName:it.copyPublicApiObject,analyticsName:it.copyPublicApiObject.defaultMessage,validators:[Se.U7o,Se.QLY("public_api_dev_mode")],closeParentMenu:!1,svg:o.U,action:async e=>{let{environment:t,blocks:a}=e;const n=await d.getPublicApiObject(t,{id:a[0].id});let o;o="success"===n.type?JSON.stringify(n.data,void 0,2):JSON.stringify(n.error,void 0,2),u.RD({environment:t,stringValue:o,copiedMessage:u.tq.copiedApiObjectToClipboard})}});function rt(e,t,a){const n=function(e){var t;const a=e.blocks[0],n=(0,ot.YO)(a).filter((0,l.AO)((e=>(0,i.FB)(e.permissionItem)?{true:{...e,permissionItem:e.permissionItem}}:{false:e})));if(0===n.length)return{status:"no bots"};const o=new Map,r=null===(t=L.default.state.currentSpaceStore)||void 0===t?void 0:t.id,c=n.map((e=>{let{from:t,permissionItem:n}=e;const i=be.t1.createChildStore(a,{table:s.cZ,id:n.bot_id,spaceId:r});if("block"===t.table)return o.set(n.bot_id,t),i})).filter(l.$K);if(c.every((e=>e.isReady()))){const t=c.filter((t=>t.isDefined()&&Boolean((0,me.Nq)(e.environment,t.getModel()))));if((0,fe.Fn)(e.environment)){const e=t.map((e=>e.getIntegrationId())),a=new Set(e),n=c.filter((e=>!(!e.isDefined()||a.has(e.getIntegrationId())||!Boolean((0,me.f_)(e.getModel()))||(a.add(e.getIntegrationId()),0))));t.push(...n)}return{status:"ready",botStores:t,botIdToSharedPageIds:o}}return{status:"loading"}}(e),{status:o}=n;if("no bots"===o||"loading"===o)return n;{const{botStores:e,botIdToSharedPageIds:o}=n;return{status:"ready",botActions:e.map((e=>{if(e.isDefined()){const n=e.getIntegrationId();n&&t.add(n);const i=o.get(e.id);if(i)return a.add(e.id),function(e){const{botStore:t,botPermissionSourcePage:a}=e,{id:n}=t,o=t.getName(),i=he.default.formatMessage(ze.connectionLabel,{connectionName:o});return{key:`${n}`,displayName:i,analyticsName:i,searchName:i,closeParentMenu:!1,validators:[Se.Ggh,Se.J5S,Se.ffD(Se.uY7)],action:()=>{},render:(e,n,o)=>{const s=n.blocks[0].id===a.blockId;return(0,M.jsx)(ie,{...e,context:n,parent:o,isSharedDirectly:s,botStore:t,botPermissionSourcePage:a,originConnectionLabel:i})}}}({botStore:e,botPermissionSourcePage:i})}})).filter(l.$K)}}}function lt(e){const t=new Set,a=new Set,n=rt(e,t,a),o=function(e,t){const a=ze.connectToLabel,n=he.default.formatMessage(a);return{key:"add connections action",displayName:n,analyticsName:a.defaultMessage,searchName:a.defaultMessage,closeParentMenu:!1,validators:[Se.Ggh,Se.J5S,Je,Se.ffD(Se.uY7)],action:()=>{},render:(a,o,i)=>(0,M.jsx)(Me,{...a,context:o,parent:i,alreadyConnectedIntegrationIds:e,alreadyConnectedBotIds:t,originButtonLabel:n})}}(t,a);if("no bots"===n.status)return{loadingAction:[],connectedActions:[],searchSubMenu:o};if("loading"===n.status)return{loadingAction:[Ee()],connectedActions:[],searchSubMenu:o};{const{botActions:e}=n;return{loadingAction:[],connectedActions:e,searchSubMenu:o}}}function ct(e){const{loadingAction:t,connectedActions:a,searchSubMenu:n}=lt(e);return{key:"topbar connections",render:e=>(0,M.jsx)(ne.Z,{...e,topBorder:!0,title:(0,M.jsx)(r.FormattedMessage,{id:"topbar.connectionSection.label",defaultMessage:"Connections"})}),actions:[...t,...[$e(),We()],...a,n,st]}}},641623:(e,t,a)=>{a.d(t,{Nq:()=>o,f_:()=>i,yh:()=>s});var n=a(715070);function o(e,t){const a=t.getAlive(),o=(0,n.hA)(t),i=Boolean(!t.getIntegrationId()),s=Boolean(t.getIntegrationId()),r=Boolean(e.currentUser.id===t.getParentId());return a&&o&&(s&&r||i)}function i(e){return e.getAlive()&&(0,n.hA)(e)&&Boolean(e.getIntegrationId())}function s(e){const{externalIntegrationStoreState:t,integrationId:a}=e;if(!t.loaded)return;const o=t.externalAuthentications.map((e=>{let{parent_id:t}=e;return t})),i=new Set(o),s=t.bots.filter((e=>e.alive&&i.has(e.id)&&(0,n.U9)(e)&&e.integration_id===a));return s.length?s[0]:void 0}},240745:(e,t,a)=>{a.d(t,{M:()=>i});a(667294);var n=a(745238),o=a(785893);const i=(0,n.IU)("arrowDown",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M8 1.57715C7.5625 1.57715 7.25488 1.88477 7.25488 2.33594V10.8262L7.30957 12.3027L5.50488 10.2861L3.95312 8.75488C3.82324 8.625 3.63184 8.53613 3.42676 8.53613C3.0166 8.53613 2.70898 8.85059 2.70898 9.26758C2.70898 9.46582 2.78418 9.64355 2.94141 9.80762L7.44629 14.3193C7.59668 14.4697 7.79492 14.5586 8 14.5586C8.20508 14.5586 8.40332 14.4697 8.55371 14.3193L13.0586 9.80762C13.2158 9.64355 13.291 9.46582 13.291 9.26758C13.291 8.85059 12.9902 8.53613 12.5801 8.53613C12.3682 8.53613 12.1836 8.625 12.0469 8.75488L10.4951 10.2861L8.69043 12.2959L8.74512 10.8262V2.33594C8.74512 1.88477 8.44434 1.57715 8 1.57715Z"})})},622771:(e,t,a)=>{a.d(t,{J:()=>i});a(667294);var n=a(745238),o=a(785893);const i=(0,n.IU)("arrowsConverging",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M4.47949 13.2667C4.27441 13.2667 4.11263 13.2006 3.99414 13.0684C3.88021 12.9408 3.82324 12.7881 3.82324 12.6104C3.82324 12.3552 3.9349 12.1569 4.1582 12.0157L4.70508 11.667C4.94206 11.5075 5.20866 11.2956 5.50488 11.0313C5.80566 10.7624 6.09277 10.4594 6.36621 10.1221C6.64421 9.78488 6.87207 9.42485 7.0498 9.04204C7.22754 8.65923 7.31641 8.27414 7.31641 7.88677V4.46196H8.67676V7.88677C8.67676 8.27414 8.76562 8.65923 8.94336 9.04204C9.12109 9.42485 9.34668 9.78716 9.62012 10.129C9.89355 10.4662 10.1807 10.767 10.4814 11.0313C10.7822 11.2956 11.0511 11.5075 11.2881 11.667L11.835 12.0157C12.0583 12.1569 12.1699 12.3552 12.1699 12.6104C12.1699 12.7972 12.1107 12.9522 11.9922 13.0752C11.8737 13.2028 11.7119 13.2667 11.5068 13.2667C11.3109 13.2667 11.1195 13.2051 10.9326 13.0821L10.5771 12.8428C10.3447 12.6879 10.0941 12.4942 9.8252 12.2618C9.56087 12.0248 9.30339 11.7741 9.05273 11.5098C8.80208 11.2455 8.58333 10.9903 8.39648 10.7442C8.20964 10.4981 8.07975 10.2839 8.00684 10.1016H7.98633C7.91341 10.2839 7.78125 10.5004 7.58984 10.751C7.40299 10.9971 7.18424 11.2523 6.93359 11.5167C6.68294 11.7764 6.42318 12.0248 6.1543 12.2618C5.88997 12.4942 5.64388 12.6879 5.41602 12.8428L5.06055 13.0821C4.8737 13.2051 4.68001 13.2667 4.47949 13.2667ZM6.29102 5.36431C6.02669 5.36431 5.86263 5.28228 5.79883 5.11821C5.73503 4.95415 5.77832 4.76502 5.92871 4.55083L7.5625 2.26079C7.68555 2.08306 7.83138 1.99647 8 2.00103C8.16862 2.00103 8.31445 2.08761 8.4375 2.26079L10.0576 4.55767C10.2126 4.7673 10.2559 4.95415 10.1875 5.11821C10.1237 5.28228 9.96191 5.36431 9.70215 5.36431H6.29102Z"})})},315468:(e,t,a)=>{a.d(t,{L:()=>i});a(667294);var n=a(745238),o=a(785893);const i=(0,n.IU)("connections",{viewBox:"0 0 16 14",svg:(0,o.jsx)("g",{children:(0,o.jsx)("path",{d:"M2.825 5.581A2.32 2.32 0 112.832.939a2.32 2.32 0 01-.007 4.642zm10.343 0A2.32 2.32 0 1113.175.94a2.32 2.32 0 01-.007 4.641zM2.825 4.331c.609 0 1.073-.473 1.073-1.074 0-.602-.464-1.067-1.073-1.067a1.05 1.05 0 00-1.06 1.067c0 .601.465 1.073 1.06 1.073zm10.343 0c.608 0 1.066-.473 1.066-1.074 0-.602-.458-1.067-1.066-1.067-.595 0-1.066.465-1.066 1.067a1.06 1.06 0 001.066 1.073zm-6.89-.466a.595.595 0 110-1.19.595.595 0 010 1.19zm1.722 0a.595.595 0 110-1.19.595.595 0 010 1.19zm1.723 0a.595.595 0 010-1.19.6.6 0 01.594.596.6.6 0 01-.594.594zm1.675 3.131a.594.594 0 01-.595-.588c0-.328.266-.595.595-.595a.592.592 0 010 1.183zm-6.795 0a.594.594 0 01-.595-.588.595.595 0 011.19 0 .594.594 0 01-.595.588zm5.502 1.429a.595.595 0 010-1.19.6.6 0 01.595.595.6.6 0 01-.595.595zm-4.21 0a.595.595 0 010-1.19.6.6 0 01.594.595.6.6 0 01-.594.595zM8 13.196a2.327 2.327 0 01-2.317-2.33 2.32 2.32 0 014.642 0A2.328 2.328 0 018 13.195zm0-1.258c.608 0 1.066-.471 1.066-1.073 0-.595-.458-1.06-1.066-1.06a1.05 1.05 0 00-1.066 1.06A1.06 1.06 0 008 11.938z"})})})},762208:(e,t,a)=>{a.d(t,{z:()=>i});a(667294);var n=a(745238),o=a(785893);const i=(0,n.IU)("loop",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M5.80371 3.12305C5.81006 3.50391 6.05762 3.74512 6.47656 3.74512H11.3643C11.9546 3.74512 12.2783 4.0498 12.2783 4.66553V11.2925L11.377 10.3149L10.8628 9.80078C10.5962 9.54688 10.2344 9.52783 9.96777 9.78809C9.71387 10.0483 9.72021 10.4229 9.98047 10.6831L12.145 12.8413C12.6211 13.311 13.167 13.311 13.6431 12.8413L15.8076 10.6831C16.0679 10.4229 16.0742 10.0483 15.8203 9.78809C15.5537 9.52783 15.1919 9.54688 14.9253 9.80078L14.4111 10.3149L13.5161 11.2861V4.56396C13.5161 3.20557 12.8052 2.50098 11.4341 2.50098H6.47656C6.05762 2.50098 5.79736 2.74219 5.80371 3.12305ZM0.186035 7.05859C0.446289 7.3252 0.808105 7.30615 1.07471 7.0459L1.59521 6.53809L2.48389 5.56689V12.2891C2.48389 13.6475 3.19482 14.3521 4.56592 14.3521H9.52344C9.94238 14.3521 10.2026 14.1108 10.1963 13.73C10.1899 13.3428 9.94238 13.1079 9.52344 13.1079H4.64209C4.05176 13.1079 3.72803 12.7969 3.72803 12.1812V5.5542L4.62305 6.53809L5.14355 7.0459C5.40381 7.30615 5.77197 7.3252 6.03223 7.05859C6.29248 6.79834 6.28613 6.43018 6.01953 6.16992L3.85498 4.01172C3.37891 3.53564 2.83936 3.53564 2.36328 4.01172L0.19873 6.16992C-0.0678711 6.43018 -0.0742188 6.79834 0.186035 7.05859Z"})})},621158:(e,t,a)=>{a.d(t,{h:()=>i});a(667294);var n=a(745238),o=a(785893);const i=(0,n.IU)("openAsPage",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M3.22605 12.855C3.36623 12.9952 3.55957 13.0822 3.77226 13.0725L8.83802 13.0338C9.04103 13.0338 9.24405 12.9468 9.36973 12.8212C9.67425 12.5166 9.65975 12.1058 9.36973 11.8157C9.21988 11.6659 9.05553 11.6079 8.86702 11.6127L6.79818 11.6417L5.26105 11.7577L6.39215 10.7136L10.7087 6.39712L11.7528 5.26603L11.6319 6.80799L11.6029 8.87683C11.6029 9.06051 11.6561 9.22969 11.8059 9.37954C12.096 9.66956 12.5117 9.67923 12.8162 9.3747C12.9419 9.24902 13.0289 9.04601 13.024 8.84782L13.0675 3.77723C13.0724 3.56938 12.9902 3.3712 12.85 3.23102C12.7098 3.09084 12.5165 3.0135 12.3038 3.0135L7.23805 3.06184C7.03987 3.05701 6.83685 3.14401 6.71117 3.26969C6.40665 3.57422 6.41631 3.98992 6.70634 4.27994C6.85618 4.42979 7.02536 4.48296 7.20905 4.48296L9.27789 4.45396L10.8198 4.33311L9.68392 5.37237L5.36739 9.6889L4.32814 10.8248L4.44415 9.28769L4.47315 7.21886C4.47799 7.03034 4.41998 6.86599 4.27013 6.71615C3.98011 6.42612 3.56924 6.41162 3.26472 6.71615C3.13904 6.84182 3.05203 7.04484 3.05203 7.24786L3.00853 12.3088C3.0037 12.5263 3.08587 12.7148 3.22605 12.855Z"})})},484199:(e,t,a)=>{a.d(t,{N:()=>i});a(667294);var n=a(745238),o=a(785893);const i=(0,n.IU)("properties",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M1.91602 4.83789C2.44238 4.83789 2.87305 4.40723 2.87305 3.87402C2.87305 3.34766 2.44238 2.91699 1.91602 2.91699C1.38281 2.91699 0.952148 3.34766 0.952148 3.87402C0.952148 4.40723 1.38281 4.83789 1.91602 4.83789ZM5.1084 4.52344H14.3984C14.7607 4.52344 15.0479 4.23633 15.0479 3.87402C15.0479 3.51172 14.7607 3.22461 14.3984 3.22461H5.1084C4.74609 3.22461 4.45898 3.51172 4.45898 3.87402C4.45898 4.23633 4.74609 4.52344 5.1084 4.52344ZM1.91602 9.03516C2.44238 9.03516 2.87305 8.60449 2.87305 8.07129C2.87305 7.54492 2.44238 7.11426 1.91602 7.11426C1.38281 7.11426 0.952148 7.54492 0.952148 8.07129C0.952148 8.60449 1.38281 9.03516 1.91602 9.03516ZM5.1084 8.7207H14.3984C14.7607 8.7207 15.0479 8.43359 15.0479 8.07129C15.0479 7.70898 14.7607 7.42188 14.3984 7.42188H5.1084C4.74609 7.42188 4.45898 7.70898 4.45898 8.07129C4.45898 8.43359 4.74609 8.7207 5.1084 8.7207ZM1.91602 13.2324C2.44238 13.2324 2.87305 12.8018 2.87305 12.2686C2.87305 11.7422 2.44238 11.3115 1.91602 11.3115C1.38281 11.3115 0.952148 11.7422 0.952148 12.2686C0.952148 12.8018 1.38281 13.2324 1.91602 13.2324ZM5.1084 12.918H14.3984C14.7607 12.918 15.0479 12.6309 15.0479 12.2686C15.0479 11.9062 14.7607 11.6191 14.3984 11.6191H5.1084C4.74609 11.6191 4.45898 11.9062 4.45898 12.2686C4.45898 12.6309 4.74609 12.918 5.1084 12.918Z"})})},291427:(e,t,a)=>{a.d(t,{e:()=>i});a(667294);var n=a(745238),o=a(785893);const i=(0,n.IU)("star",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M3.2627 14.7637C3.58398 15.0098 3.98047 14.9277 4.44531 14.5928L8 11.9814L11.5547 14.5928C12.0195 14.9277 12.4229 15.0098 12.7441 14.7637C13.0586 14.5244 13.127 14.1279 12.9424 13.5879L11.541 9.41113L15.1299 6.83398C15.5879 6.50586 15.7861 6.14355 15.6562 5.76074C15.5264 5.38477 15.1641 5.2002 14.5967 5.20703L10.1943 5.23438L8.85449 1.03711C8.68359 0.490234 8.40332 0.196289 8 0.196289C7.60352 0.196289 7.32324 0.490234 7.14551 1.03711L5.80566 5.23438L1.40332 5.20703C0.835938 5.2002 0.480469 5.38477 0.350586 5.76074C0.220703 6.14355 0.412109 6.50586 0.876953 6.83398L4.46582 9.41113L3.05762 13.5879C2.87305 14.1279 2.94141 14.5244 3.2627 14.7637ZM4.45898 13.1162C4.45215 13.1025 4.45215 13.0957 4.45898 13.0615L5.75781 9.39062C5.87402 9.05566 5.83301 8.84375 5.52539 8.63867L2.3125 6.4375C2.28516 6.42383 2.27148 6.41016 2.27832 6.38965C2.29199 6.37598 2.30566 6.36914 2.33984 6.36914L6.22949 6.45801C6.58496 6.47168 6.7627 6.35547 6.86523 6.01367L7.96582 2.28125C7.97266 2.24023 7.98633 2.2334 8 2.2334C8.02051 2.2334 8.02734 2.24023 8.04102 2.28125L9.13477 6.01367C9.2373 6.35547 9.42188 6.47168 9.77051 6.45801L13.6602 6.36914C13.7012 6.36914 13.7148 6.37598 13.7217 6.38965C13.7285 6.41016 13.7217 6.41699 13.6875 6.4375L10.4814 8.63867C10.167 8.85059 10.126 9.05566 10.2422 9.39062L11.541 13.0615C11.5547 13.0957 11.5547 13.1025 11.541 13.1162C11.5273 13.1367 11.5137 13.123 11.4863 13.1094L8.40332 10.7305C8.12305 10.5117 7.87695 10.5117 7.60352 10.7305L4.52051 13.1094C4.49316 13.123 4.47266 13.1367 4.45898 13.1162Z"})})},537888:(e,t,a)=>{a.d(t,{U:()=>i});a(667294);var n=a(745238),o=a(785893);const i=(0,n.IU)("unlocked",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M2.49023 14.7227H8.89551C9.94824 14.7227 10.4746 14.1963 10.4746 13.0479V8.20801C10.4746 7.22363 10.085 6.69727 9.29883 6.57422V4.83105C9.29883 3.22461 10.3174 2.35645 11.541 2.35645C12.7646 2.35645 13.79 3.22461 13.79 4.83105V6.28711C13.79 6.76562 14.0703 7.01855 14.4395 7.01855C14.8018 7.01855 15.082 6.7793 15.082 6.28711V4.96094C15.082 2.36328 13.3525 1.1123 11.541 1.1123C9.72949 1.1123 8 2.36328 8 4.96094V6.54004H2.49023C1.43066 6.54004 0.911133 7.06641 0.911133 8.20801V13.0479C0.911133 14.1963 1.43066 14.7227 2.49023 14.7227ZM2.68848 13.5059C2.3877 13.5059 2.2373 13.3623 2.2373 13V8.25586C2.2373 7.89355 2.3877 7.76367 2.68848 7.76367H8.7041C9.00488 7.76367 9.14844 7.89355 9.14844 8.25586V13C9.14844 13.3623 9.00488 13.5059 8.7041 13.5059H2.68848ZM7.99316 21.1123C6.5918 21.1123 5.2793 21.8779 4.75293 23.375L5.78516 24.4141C5.94922 23.0811 6.87891 22.3564 7.99316 22.3564C9.2168 22.3564 10.2422 23.2246 10.2422 24.8311V26.54H7.9248L9.1416 27.7637H11.0078C11.3086 27.7637 11.4521 27.8936 11.4521 28.2559V30.0742L12.7783 31.4072V28.208C12.7783 27.2031 12.3682 26.6768 11.541 26.5674V24.9609C11.541 22.3633 9.81152 21.1123 7.99316 21.1123ZM13.749 35.126C13.9609 35.3379 14.3164 35.3379 14.5215 35.126C14.7266 34.9072 14.7334 34.5723 14.5215 34.3535L2.46973 22.3154C2.25781 22.1035 1.90918 22.0967 1.69043 22.3154C1.48535 22.5205 1.48535 22.876 1.69043 23.0811L13.749 35.126ZM4.79395 34.7227H11.1992C11.5 34.7227 11.7598 34.6816 11.9785 34.5928L10.8711 33.4922C10.8096 33.499 10.7549 33.5059 10.6865 33.5059H4.99219C4.69141 33.5059 4.54102 33.3623 4.54102 33V28.2559C4.54102 27.9004 4.68457 27.7637 4.97852 27.7637H5.14258L4.04883 26.6631C3.48828 26.8818 3.21484 27.3809 3.21484 28.208V33.0479C3.21484 34.1963 3.73438 34.7227 4.79395 34.7227Z"})})},339248:(e,t,a)=>{a.d(t,{E:()=>r});var n=a(307032),o=a(218265),i=a(89101);function s(e,t){const a=t.trim().toLowerCase(),n=(0,o.Of)(a).replace(/\./g,"-");return n?`${n}-${e}`:e}function r(e,t){if(!(0,n.e)(e))return`${i._j.integrations}/${e}`;const a=s(e,void 0===t?"":t);return`${i._j.integrations}/${a}`}}}]);