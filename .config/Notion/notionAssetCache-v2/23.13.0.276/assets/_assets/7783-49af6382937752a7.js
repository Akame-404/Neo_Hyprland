"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[7783],{559389:(e,t,i)=>{i.d(t,{T_:()=>v,Ud:()=>y,eV:()=>C});var n=i(701302),a=i(145953),o=i(700042),r=i(58202),l=i(100952),s=i(141433),c=i(496802),d=i(594419),m=i(709953),p=i(524677),u=i(137231),g=i(898104),f=i(668422);function C(e){const{environment:t,store:i,transaction:a,preventTextSelection:o,onTextSelection:r}=e,s=(()=>{const e=i.getContentStores();if(1===e.length&&e[0].isEmptyTextBlock())return e[0];const n=i.useCrdt(),o=m.j4({environment:t,type:"text",inMemoryRecordCache:i.inMemoryRecordCache,transaction:a,spaceId:i.pointer.spaceId,useCrdt:n}),r=d.R3({parentStore:i.getContentStore(),appendStore:o,transaction:a}).childStore;return l.W(t,{from:"template_picker",type:"text",creating_block_id:o.id,parent_collection_id:o.getParentCollectionIdUpToTwoLevels()}),r})();return o||n.default.afterNextFlush((()=>{p.eP({environment:t,store:s}),g.N_({store:s.getBlockTitleStore()}),null==r||r()})),s}function v(e){const{environment:t,store:i,transaction:n}=e;c.is({store:i,transaction:n}),C({environment:t,store:i,transaction:n})}function y(e){var t;const{environment:i,store:c,viewType:d,transaction:m}=e,p=null===(t=c.getBlockTitleStore())||void 0===t?void 0:t.getValue();s.ZI({environment:i,sourceBlockId:"root",targetBlockPointer:c.pointer,sourceBlockSubtree:(0,a.R3)((0,o.iC)({isInline:!1,viewType:d})),targetRecordCache:c.inMemoryRecordCache,transaction:m,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0,useCrdt:c.useCrdt()}),f.vs({environment:i,block:c,blockType:"collection_view_page",transaction:m}),p&&u.sO({environment:i,store:c.getBlockTitleStore(),value:p,transaction:m}),n.default.afterNextFlush((()=>{const e=r.R.findCollectionViewBlockFromStore(c);null==e||e.handleCreated()})),l.W(i,{from:"template_picker",type:"collection_view_page",creating_block_id:c.id,is_full_screen:!0,view_type:d})}},459827:(e,t,i)=>{i.d(t,{Q:()=>s});i(667294);var n=i(137810),a=i(623879),o=i(785893);const r={...n.Z.textOverflowStyle,position:"absolute",left:0,right:0,top:0,bottom:0},l={marginLeft:4,fontWeight:n.Z.fontWeight.semibold};function s(e){const{prefix:t,viewName:i,viewType:n}=e;return(0,o.jsxs)("div",{style:{position:"relative",width:"100%"},children:[" ",(0,o.jsxs)("div",{style:r,children:[t,n&&a.aW[n]({marginLeft:8,marginRight:2,width:"1em",display:"inline",verticalAlign:"bottom"}),(0,o.jsx)("span",{style:l,children:i})]})]})}},713401:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(667294),a=i(724405),o=i(747453),r=i(531701),l=i(831339),s=i(552275),c=i(785893);const d=n.forwardRef((function(e,t){const i=(0,a.yK)((t=>({base:{color:e.isBlue?r.ZP.blue:t.mediumTextColor}})),[e.isBlue]),{color:n}=i.base;return(0,c.jsx)(s.Z,{ref:t,...e,title:(0,c.jsx)("div",{style:{color:n,fill:n},children:e.title}),icon:(0,c.jsx)(l.Z,{icon:o.R,styles:{fill:n}})})}))},781870:(e,t,i)=>{i.d(t,{Z:()=>d});i(667294);var n=i(800480),a=i(724405),o=i(584169),r=i(225888),l=i(573063),s=i(316354),c=i(785893);const d=function(e){const t=(0,n.O7)(),i=(0,a.Fg)();return(0,c.jsx)(s.Z,{href:e.href,external:!0,onClick:()=>r.Fs(t,{from:e.helpButtonContext}),children:(0,c.jsx)(l.Z,{icon:o.m,style:{height:24,width:24,marginRight:-6,fill:i.mediumIconColor}})})}},831339:(e,t,i)=>{i.d(t,{Z:()=>o});i(667294);var n=i(800480),a=i(785893);const o=function(e){const t=((0,n.O7)().device.isMobile,{width:16});return(0,a.jsx)("div",{style:t,children:e.icon(e.styles)})}},491496:(e,t,i)=>{i.d(t,{Z:()=>U});var n=i(667294),a=i(800480),o=i(886628),r=i(724405),l=i(815145),s=i(158573),c=i(747453),d=i(435840),m=i(709291),p=i(653965),u=i(981193),g=i(498834),f=i(608055),C=i(210228),v=i(459827),y=i(566890),h=i(466213),k=i(27105),b=i(492658),w=i(214976),x=i(368585),M=i(484210),S=i(460709),T=i(918514),P=i(80444),I=i(229798),E=i(206258),V=i(897630),L=i(713401),_=i(781870),j=i(240071),A=i(279131),Z=i(268894),R=i(478140),F=i(828992),B=i(632163),N=i(840721),H=i(672495),D=i(38933),K=i(785893);const O=(0,m.defineMessages)({filterPlaceholder:{id:"collectionPicker.searchBarFilter.text",defaultMessage:"Filter…"}});const U=function(e){let{collectionStore:t,isOverlay:i,onEmptyEnter:n,onEmptyPageClick:l,onCancelClick:c,canConfigureCollection:d,locked:p,onTemplateClick:u}=e;const g=(0,r.Fg)(),f=(0,a.Fy)(),C=(0,o.qz)(void 0,b.Z),v=(0,o.qz)(void 0,I.Z),y=(0,o.VK)((()=>t.getTemplatePageStores().filter((e=>e.getAlive()))),[t]),h=(0,o.VK)((()=>y.every((e=>e.isReady()))),[y]),k=(0,o.VK)((()=>C.state.inputValue),[C]),w=(0,o.VK)((()=>i&&null!=k&&k.length?(0,s.ZP)(k,y,(e=>String(e.getProperties().title)??"")):y),[y,k,i]);if(!h)return null;let x=(0,K.jsx)(Q,{collectionStore:t,onEmptyEnter:n,onEmptyPageClick:l,onCancelClick:c,canConfigureCollection:d,isOverlay:i,locked:p,onTemplateClick:u,menuListStore:v,templateInputStore:C,filteredTemplatePageStores:w,draggable:!0});const M=(0,K.jsx)(Y,{templateInputStore:C});if(i){let e;return e=f.isMobile?{menuType:S.og.Modal,title:(0,K.jsx)(m.FormattedMessage,{defaultMessage:"Database templates",id:"database.mobileTemplatesMenu.title"}),left:(0,K.jsx)(N.CancelMenuText,{}),onClickLeft:c}:{menuType:S.og.Popup,width:360},y.length>6&&k&&(x=(0,K.jsx)(Q,{collectionStore:t,onEmptyEnter:n,onEmptyPageClick:l,onCancelClick:c,canConfigureCollection:d,isOverlay:i,locked:p,onTemplateClick:u,menuListStore:v,templateInputStore:C,filteredTemplatePageStores:w,draggable:!1})),(0,K.jsxs)(R.Z,{...e,header:(0,K.jsx)(W,{collectionStore:t}),children:[0===y.length&&(0,K.jsx)(H.Z,{children:(0,K.jsx)("div",{style:{fontSize:14,padding:f.isMobile?"12px 16px":"0 14px 3px 14px",color:g.lightTextColor,wordBreak:"keep-all",...f.isMobile&&{background:g.contentBackground,boxShadow:`0 1px 0 ${g.regularDividerColor}`,marginBottom:1}},children:(0,K.jsx)(m.FormattedMessage,{defaultMessage:"Replicate page formats inside this database with templates.",id:"database.emptyTemplatesList.info"})})}),y.length>6?M:void 0,x]})}return x};function W(e){let{collectionStore:t}=e;const i=(0,a.O7)(),n=(0,o.VK)((()=>t.getNameStore().getValue()),[t]);if(i.device.isMobile)return null;const r=n?(0,K.jsx)(K.Fragment,{children:(0,w.Xh)(n,t)}):(0,K.jsx)(m.FormattedMessage,{defaultMessage:"Untitled",id:"database.templateList.UntitledDatabaseTitle"});return(0,K.jsx)(F.Z,{style:{marginTop:6},title:(0,K.jsx)(v.Q,{prefix:(0,K.jsx)(m.FormattedMessage,{id:"database.templatesList.templatesFor",defaultMessage:"Templates for"}),viewName:r}),right:(0,K.jsx)(_.Z,{helpButtonContext:"collection_templates_menu",href:(0,T.UY)("guides.databaseTemplates")})})}function z(e){let{props:{ref:t,...i},isOverlay:n,locked:o}=e;const l=(0,r.Fg)(),s=(0,a.O7)(),d=(0,K.jsx)(m.FormattedMessage,{defaultMessage:"New template",id:"database.templateView.newTemplateButton"});return n?(0,K.jsx)(L.Z,{isBlue:s.device.isDesktop,title:d,...i}):(0,K.jsx)(D.Z,{title:d,icon:(0,c.R)({width:18,fill:l.lightIconColor,marginLeft:1,marginRight:11}),type:"new_template",format:n?"collection-overlay":"page-menu-item",locked:o,...i})}function q(e,t,i){const{mainEditorCurrentBlockStore:n}=P.default.state;!function(e,t,i){i?i(e):f.c4({environment:t,url:e})}(n?(0,M.ZP)({store:n,peekViewBlockId:e.id,fullyQualified:!1,pageVisitSource:l.tY.Create}):(0,M.ZP)({store:e,fullyQualified:!1,pageVisitSource:l.tY.Create}),t,i)}function Y(e){let{templateInputStore:t}=e;const i=(0,m.useIntl)(),r=(0,a.O7)(),l=(0,n.useCallback)((e=>function(e,t){t.setState({...t.state,inputValue:e.currentTarget.value})}(e,t)),[t]),s=(0,o.VK)((()=>t.state),[t]),{device:c}=r,p=!c.isMobile||void 0;return(0,K.jsx)("div",{style:{margin:c.isMobile?0:"10px 0"},children:(0,K.jsx)(Z.ZP,{value:s.inputValue,focusInitial:p,placeholder:i.formatMessage(O.filterPlaceholder),showClearButton:!0,inputLeft:(0,K.jsx)(Z.f_,{icon:d.R}),onChange:l,style:{...c.isAndroid&&{borderBottom:"none"}}})})}function Q(e){let{filteredTemplatePageStores:t,draggable:i,collectionStore:r,onEmptyEnter:l,onEmptyPageClick:s,onCancelClick:c,canConfigureCollection:d,isOverlay:m,locked:f,onTemplateClick:v,menuListStore:b,templateInputStore:w}=e;const M=(0,a.O7)(),S=(0,n.useContext)(y.cu),T=(0,n.useContext)(h.ZO),P=(0,n.useCallback)((e=>function(e,t,i,n){n.unsetFocus(),C.createAndCommit({userAction:"CollectionTemplatePicker.handleCollectionTemplatesReorder",environment:t,perform:t=>g.$p({collectionStore:i,newTemplateIds:e,transaction:t})})}(e,M,r,b)),[M,r,b]),I=(0,n.useCallback)((()=>function(e,t,i,n){var a;V.M_(e)&&(i(),u.rN(e,{template_name:"empty",is_keyboard:!0,collection_id:t.id,collection_view_id:null==n||null===(a=n.collectionViewStore())||void 0===a?void 0:a.id}))}(M,r,l,S)),[M,r,l,S]),L=(0,n.useCallback)((e=>function(e,t,i,n){V.M_(t)&&(i(e.event),u.rN(t,{template_name:"empty",is_keyboard:"keydown"===e.event.type,...n&&(0,x.Pn)(n)}))}(e,M,s,S)),[S,M,s]),_=(0,n.useCallback)((e=>function(e,t,i,n,a,o,r){if(V.M_(t)){var l;const{performResult:a}=C.createAndCommit({userAction:"CollectionTemplatePicker.newPage",environment:t,perform:a=>g.nx({environment:t,collectionStore:i,transaction:a,title:n?n.state.inputValue:void 0,useCrdt:(0,k.SL)({event:e.event,source:"collection_instantiate_template"})})});a&&q(a,t,o),u.dZ(t,{collection_id:i.id,collection_view_id:null==r||null===(l=r.collectionViewStore())||void 0===l?void 0:l.id})}null==a||a()}(e,M,r,w,c,T,S)),[M,r,w,c,T,S]),{device:Z}=M,R=(0,n.useMemo)((()=>({key:"create-template",render:(e,t)=>(0,K.jsx)(z,{isOverlay:m,locked:f,props:e}),action:_})),[_,m,f]),F=(0,o.VK)((()=>null==S?void 0:S.defaultPageTemplateStore.state),[S]),N=(0,o.VK)((()=>({key:"empty",render:(e,i)=>{if(0!==t.length&&""===w.state.inputValue)return(0,K.jsx)(j.Z,{collectionStore:r,canConfigureCollection:d,isOverlay:m,templateStore:void 0,isMobile:M.device.isMobile,locked:f||!d,draggable:!0,isDefault:void 0===(null==F?void 0:F.id),onCancelClick:c,...e})},action:L})),[d,r,null==F?void 0:F.id,M.device.isMobile,L,m,f,c,w,t.length]),D=(0,o.VK)((()=>{const e=t.map((e=>e.id));return p.oA([0!==t.length&&{key:"templates",render:t=>{const a=t.children.slice(0,t.children.length-1),o=t.children[t.children.length-1];return(0,K.jsx)(H.Z,{...t,disableDesktopPadding:!m,disableMobileBorders:!0,children:(0,K.jsxs)(n.Fragment,{children:[Z.isMobile||f||!d?a.map(((e,t)=>a[t])):(0,K.jsx)(A.ZP,{direction:"vertical",keys:e,disabled:!i,renderKey:(t,i)=>a[e.indexOf(t)],onDrop:P}),o]})})},items:[...t.map((e=>function(e,t,i,a,o,r,l,s,c,d){const{device:m}=e,p=null==d?void 0:d.defaultPageTemplateStore.state,u=E.Mz.fromBlockStore(t),g=null!=u&&u.isActive()?u.getRecurrence():void 0,f="disabled_duplication"===(null==u?void 0:u.getStatus());return{key:t.id,render:e=>(0,n.createElement)(j.Z,{...e,key:t.id,isOverlay:l,collectionStore:a,canConfigureCollection:o,templateStore:t,isMobile:m.isMobile,locked:r,onCancelClick:s,draggable:i,isDefault:(null==p?void 0:p.id)===t.id,recurrence:g,recurrenceDisabled:f}),action:i=>{V.M_(e)&&c({templateStore:t,isKeyboard:"keydown"===i.event.type,useCrdt:(0,k.SL)({event:i.event,source:"collection_instantiate_template",contextualDefault:t.useCrdt()})})}}}(M,e,i,r,d,f,m,c,v,S))),N]},d?{key:"create-template",render:e=>(0,K.jsx)(H.Z,{topBorder:m,disableDesktopPadding:!m,disableMobileBorders:!0,...e}),items:[R]}:void 0])}),[d,S,r,R,Z.isMobile,i,N,M,P,m,f,c,v,t]);return(0,K.jsx)(B.Z,{type:B.i.Vertical,store:b,initialFocus:void 0,disableInitialScroll:!0,disableCommandEnter:!0,onEmptyEnter:I,sections:D})}},240698:(e,t,i)=>{i.d(t,{Im:()=>A,K0:()=>I,b6:()=>Z,dQ:()=>T,pd:()=>E,re:()=>P,ss:()=>L});i(757658);var n=i(815145),a=i(635013),o=i(121321),r=i(169628),l=i(917948),s=i(742696),c=i(110405),d=i(582356),m=i(554855),p=i(646783),u=i(973426),g=i(471924),f=i(709291),C=i(757549),v=i(275754),y=i(559389),h=i(210228),k=i(433929),b=i(889014),w=i(167940),x=i(992083),M=i(934593);const S=(0,f.defineMessages)({emptyWithIcon:{defaultMessage:"Empty page with icon",id:"templatePickerHelpers.basicTemplateItems.emptyWithIcon"},empty:{defaultMessage:"Empty page",id:"templatePickerHelpers.basicTemplateItems.empty"},templates:{defaultMessage:"Templates",id:"templatePickerHelpers.basicTemplateItems.templates"},import:{defaultMessage:"Import",id:"templatePickerHelpers.basicTemplateItems.import"}}),T={name:k.default.formatMessage(S.empty),iconFn:m.a,type:"empty_page",shouldShow:()=>!0,onClick:(e,t)=>{h.createAndCommit({userAction:"templatePickerHelpers.emptyTemplateItems",environment:e,perform:i=>{y.eV({environment:e,store:t,transaction:i})}})}},P={name:k.default.formatMessage(S.templates),type:"templates",iconFn:e=>(0,u.i)(e),shouldShow:()=>!0,onClick:e=>{(0,M.H)({cloneTo:"current_page",analyticsFrom:"newPage",environment:e})}},I={name:k.default.formatMessage(S.templates),type:"templates",iconFn:e=>(0,p.w)(e),shouldShow:()=>!0,onClick:e=>{(0,M.H)({cloneTo:"current_page",analyticsFrom:"newPage",environment:e})}},E={name:k.default.formatMessage(S.import),type:"import",iconFn:d.l,shouldShow:()=>!0,onClick:(e,t)=>{const i=g.Il();w.Z.setState({flowId:i}),C.Sy(e,{from:"new_page",flowId:i}),x.Z.setState({...x.Z.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:void 0})}},V=(0,f.defineMessages)({pageWithIcon:{defaultMessage:"Page with icon",id:"templatePickerHelpers.mobileBasicTemplateItems.pageWithIcon"},emptyPage:{defaultMessage:"Empty page",id:"templatePickerHelpers.mobileBasicTemplateItems.emptyPage"}}),L=[{name:k.default.formatMessage(V.pageWithIcon),type:"page_with_icon",shouldShow:()=>!0,onClick:(e,t)=>{h.createAndCommit({userAction:"templatePickerHelpers.mobileBasicTemplateItems",environment:e,perform:i=>{y.T_({environment:e,store:t,transaction:i})}})}},{name:k.default.formatMessage(V.emptyPage),type:"empty_page",shouldShow:()=>!0,onClick:(e,t)=>{h.createAndCommit({userAction:"templatePickerHelpers.mobileBasicTemplateItems",environment:e,perform:i=>{y.eV({environment:e,store:t,transaction:i})}})}}],_=(0,f.defineMessages)({table:{defaultMessage:"Table",id:"templatePickerHelpers.databaseTemplateNames.table"},board:{defaultMessage:"Board",id:"templatePickerHelpers.databaseTemplateNames.board"},list:{defaultMessage:"List",id:"templatePickerHelpers.databaseTemplateNames.list"},calendar:{defaultMessage:"Calendar",id:"templatePickerHelpers.databaseTemplateNames.calendar"},gallery:{defaultMessage:"Gallery",id:"templatePickerHelpers.databaseTemplateNames.gallery"},timeline:{defaultMessage:"Timeline",id:"templatePickerHelpers.databaseTemplateNames.timeline"},tableView:{defaultMessage:"Table view",id:"templatePickerHelpers.databaseTemplateNames.tableView"},boardView:{defaultMessage:"Board view",id:"templatePickerHelpers.databaseTemplateNames.boardView"},listView:{defaultMessage:"List view",id:"templatePickerHelpers.databaseTemplateNames.listView"},calendarView:{defaultMessage:"Calendar view",id:"templatePickerHelpers.databaseTemplateNames.calendarView"},galleryView:{defaultMessage:"Gallery view",id:"templatePickerHelpers.databaseTemplateNames.galleryView"},timelineView:{defaultMessage:"Timeline view",id:"templatePickerHelpers.databaseTemplateNames.timelineView"}});function j(e){const{environment:t,store:i,viewType:a}=e;h.createAndCommit({userAction:"templatePickerHelpers.handleClickForViewType",environment:t,perform:e=>{y.Ud({environment:t,store:i,viewType:a,transaction:e}),v._c({environment:t,store:i,pageVisitSource:n.tY.LinkInPage});const o=i.getCollectionViewStores()[0];o&&(0,b.u)(o.id,{viewType:a})}})}const A=[{name:k.default.formatMessage(_.table),type:"table",iconFn:s.t,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>j({environment:e,store:t,viewType:"table"})},{name:k.default.formatMessage(_.board),type:"board",iconFn:a.i,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>j({environment:e,store:t,viewType:"board"})},{name:k.default.formatMessage(_.list),type:"list",iconFn:l.O,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>j({environment:e,store:t,viewType:"list"})},{name:k.default.formatMessage(_.timeline),type:"timeline",iconFn:c._,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>j({environment:e,store:t,viewType:"timeline"})},{name:k.default.formatMessage(_.calendar),type:"calendar",iconFn:o.N,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>j({environment:e,store:t,viewType:"calendar"})},{name:k.default.formatMessage(_.gallery),type:"gallery",iconFn:r.n,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>j({environment:e,store:t,viewType:"gallery"})}];function Z(e,t){const i=new Map(e.map((e=>[e.type,e])));return t.reduce(((e,t)=>(i.has(t)&&e.push(i.get(t)),e)),[])}},827981:(e,t,i)=>{i.r(t),i.d(t,{default:()=>W,getIconStyle:()=>q});i(757658);var n=i(667294),a=i(800480),o=i(184747),r=i(886628),l=i(724405),s=i(949271),c=i(356666),d=i(775e3),m=i(526789),p=i(11751),u=i(76233),g=i(709291),f=i(653965),C=i(981193),v=i(498834),y=i(104617),h=i(559389),k=i(274284),b=i(210228),w=i(492022),x=i(110906),M=i(296994),S=i(68688),T=i(922705),P=i(214976),I=i(319124),E=i(273203),V=i(548779),L=i(277907),_=i(80444),j=i(788632),A=i(896026),Z=i(924666),R=i(897630),F=i(491496),B=i(568785),N=i(632163),H=i(240698),D=i(38933),K=i(785893);const O=(0,g.defineMessages)({genericHelpMeWriteNewPage:{defaultMessage:"Write “{filter}” with AI…",id:"id.completions.genericHelpMeWriteNewPage"},genericHelpMeWriteNewPageEmpty:{defaultMessage:"Start writing with AI…",id:"id.completions.genericHelpMeWriteNewPageEmpty"},dictate:{defaultMessage:"Dictate",id:"id.dictate.dictateIntoNewPage"}});function U(e){let{menuListStore:t,sectionTitleStyle:i,handleTemplatePickerEmptyEnter:n,sectionsBeforeMobilePreviewSections:o,renderMobileTemplatePreviewItem:l}=e;const s=(0,r.VK)((()=>{var e;return null===(e=_.default.state.currentSpaceStore)||void 0===e?void 0:e.getSubscriptionTier()}),[]),c=(0,r.VK)((()=>(0,V.kO)().function),[]),d=(0,a.O7)(),m=(0,L.XJ)(M.FF.AppTemplates),p=(0,r.VK)((()=>{if(!m.value)return[];return m.value.templatePickerItems.getMobilePreviewTemplates({userPersona:c,subscriptionTier:s,environment:d}).map((e=>{let{category:t,sectionHeaderMessage:n,templates:a}=e;return{key:t,render:e=>(0,K.jsxs)("div",{children:[(0,K.jsx)("div",{style:i,children:(0,K.jsx)(g.FormattedMessage,{...n})}),e.children]},e.key),items:a.map(l)}}))}),[m.value,c,s,d,l,i]),u="pending"===m.status?(0,K.jsx)("div",{style:{marginTop:i.marginTop,marginBottom:i.marginBottom,paddingLeft:10},children:(0,K.jsx)(B.Z,{})}):void 0;return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(N.Z,{type:N.i.Vertical,store:t,initialFocus:void 0,disableInitialScroll:!0,disableCommandEnter:!0,onEmptyEnter:n,sections:[...o,...p]}),u]})}const W=function(e){let{store:t,menuListStore:i}=e;const n=(0,a.O7)(),l=(0,a.Fy)();(0,o.Z)((()=>{i.reset()}));const s=(0,r.VK)((()=>A.Z.getMode(n,t)),[n,t]),c=(0,r.VK)((()=>j.Z.state.online),[]),d=(0,r.VK)((()=>function(e){return Boolean(e.getAssociatedCollectionStore())}(t)),[t]),m=(0,r.VK)((()=>t.getAssociatedCollectionStore()),[t]),p=(0,r.VK)((()=>m?m.getParentBlockStore():void 0),[m]),g=(0,r.VK)((()=>m?m.getTemplatePageStores():void 0),[m]),f=(0,r.VK)((()=>function(e){return e.isTemplate()}(t)),[t]),C=(0,r.VK)((()=>function(e){const t=e.getAssociatedCollectionStore(),i=t&&t.getParentBlockStore();return x.eD({collectionStore:t,collectionViewBlockStore:i,checkNavigableAncestorLocked:!0})}(t)),[t]),y=(0,r.VK)((()=>!(null==p||!p.isNonEditableState())),[p]);return c?(0,K.jsxs)("div",{children:[!d&&!l.isMobile&&(0,K.jsx)(J,{store:t,menuListStore:i,publicEditMode:s}),!d&&l.isTablet&&(0,K.jsx)(X,{store:t,menuListStore:i,publicEditMode:s}),d&&!f&&m&&p&&g&&g.length>0&&(0,K.jsx)(F.Z,{isOverlay:!1,collectionStore:m,canConfigureCollection:C,onTemplateClick:e=>function(e,t,i){b.createAndCommit({userAction:"TemplatePicker.handleCollectionTemplateClick",environment:i,perform:n=>{const a=t.getTitleValue();v.ob({title:""!==u.QaF(a)?{text:a}:"template",environment:i,store:t,templateStore:e.templateStore,isKeyboard:e.isKeyboard,isCreateIn:!1,transaction:n,from:"template_picker"})}})}(e,t,n),onEmptyEnter:()=>Y(n),onEmptyPageClick:()=>function(e,t){b.createAndCommit({userAction:"TemplatePicker.handleTemplateEmptyPageClick",environment:t,perform:i=>{h.eV({environment:t,store:e,transaction:i})}})}(t,n),locked:y})]}):null};function z(e,t){const{device:i}=e;return{...s.ZD,marginTop:16,marginBottom:4,letterSpacing:0,fontSize:i.isMobile?12:13,color:t.lightTextColor,display:"flex",alignItems:"center",fontWeight:500}}function q(e,t){return e.isLargeDatabaseIcon?{width:16,fill:t.lightIconColor,marginLeft:2,marginRight:12}:{width:20,fill:t.lightIconColor,marginRight:10}}function Y(e){const t=Z.default.state;R.M_(e)&&"editing"===t.mode&&(b.createAndCommit({userAction:"TemplatePicker.handleTemplatePickerEmptyEnter",environment:e,perform:i=>{k.IO({environment:e,editorMode:"default",transaction:i,multiSelection:t.multiSelection})}}),C.rN(e,{template_name:"empty",is_keyboard:!0}))}function Q(e,t,i,n){return!(0,E.r)(e)&&((0,I.GD)(n)&&t.focused&&(0,d.U)({width:14,marginRight:6,fill:i.lightIconColor}))}function G(e,t,i,a,o){return{key:e.name,render:a=>{var r;let{ref:l,...s}=a;return(0,n.createElement)(D.Z,{...s,key:e.name,format:"page-menu-item",title:e.name,type:e.type,icon:null===(r=e.iconFn)||void 0===r?void 0:r.call(e,q(e,i)),locked:!1,right:Q(t,s,i,o)})},action:i=>{R.M_(t)&&(C.rN(t,{template_name:e.name,is_keyboard:"keydown"===i.event.type,from:e.from}),e.onClick(t,a))}}}function X(e){let{store:t,menuListStore:i,publicEditMode:o}=e;const r=(0,l.Fg)(),s=(0,a.O7)(),c=(0,n.useCallback)((e=>G(e,s,r,t,o)),[s,r,t,o]),d=[{key:"Basic",render:e=>(0,K.jsx)("div",{children:e.children},e.key),items:H.ss.map(c)},{key:"Database",render:e=>(0,K.jsxs)("div",{children:[(0,K.jsx)("div",{style:z(s,r),children:(0,K.jsx)(g.FormattedMessage,{defaultMessage:"Database",id:"templatePicker.mobileTemplatePicker.databaseTemplateSection.label"})}),e.children]},e.key),items:H.Im.filter((e=>e.shouldShow(s))).map(c)}];return(0,K.jsx)(U,{menuListStore:i,sectionTitleStyle:z(s,r),handleTemplatePickerEmptyEnter:()=>Y(s),sectionsBeforeMobilePreviewSections:d,renderMobileTemplatePreviewItem:e=>function(e,t){return{key:e.name,render:t=>{let{ref:i,...a}=t;return(0,n.createElement)(D.Z,{...a,key:e.name,title:e.name,type:"page_template",format:"page-menu-item",locked:!1})},action:()=>{y.$7({environment:t,item:e,createNewPage:!1,isPrivate:!1})}}}(e,s)})}function $(e,t,i,a,o,r,l){const s=(0,H.b6)(H.Im,["table"]),d=f.zu(H.Im,...s),m=!r&&d.length>0?function(e,t,i,a,o){return{key:e,render:i=>{let{ref:r,...l}=i;return(0,n.createElement)(D.Z,{...l,key:e,format:"page-menu-item",title:(0,K.jsx)(g.FormattedMessage,{defaultMessage:"More",id:"templatePicker.more.label"}),type:"more",icon:(0,c.o)({width:20,fill:a.lightIconColor,marginRight:10}),locked:!1,right:Q(t,l,a,o)})},action:()=>i(!0)}}("moreNew",t,l,i,o):null,p=[H.pd,e?H.K0:H.re,...s,...m?[]:d].filter((e=>e.shouldShow(t))).map((e=>G(e,t,i,a,o)));return m?p.concat(m):p}function J(e){let{store:t,menuListStore:i,publicEditMode:o}=e;const s=(0,g.useIntl)(),c=(0,l.Fg)(),d=(0,a.O7)(),u=(0,r.VK)((()=>T.TI.state&&T.mn.state===t.id),[t]),[f,C]=(0,n.useState)(!1),v=(0,r.VK)((()=>(0,I.GD)(o)),[o]),y=(0,r.VK)((()=>(0,S.d)()),[]),k=(0,r.VK)((()=>0===t.getContentLength()),[t])?[G(H.dQ,d,c,t,o)]:[],x=$(v,d,c,t,o,f,C),V=(0,r.VK)((()=>t.getTitleValue()),[t]),L=(0,r.VK)((()=>(0,E.r)(d)),[d]),_=[];if(v){const e=function(e,t,i,a,o,r){return{key:"ask ai",render:o=>{let{ref:l,...s}=o;const c=e.replace(/(\r\n|\n|\r)/gm," "),d=c.length>30?`${c.slice(0,30)}…`:c;return(0,n.createElement)(D.Z,{...s,key:"genericHelpMeWriteNewPageWithAI",format:"page-menu-item",title:c?a.formatMessage(O.genericHelpMeWriteNewPage,{filter:d}):a.formatMessage(O.genericHelpMeWriteNewPageEmpty),type:"ai",icon:(0,K.jsx)("div",{style:{height:24,width:24,borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",marginRight:4},children:(0,p.t)({width:16,height:16,fill:"dark"===i.mode?i.accentColors.purple[700]:i.accentColors.purple[400]})}),locked:!1,right:Q(t,s,i,r)})},action:()=>{b.createAndCommit({userAction:"TemplatePicker.genericHelpMeWriteNewPageWithAI",environment:t,perform:i=>{h.eV({environment:t,store:o,transaction:i,preventTextSelection:!1,onTextSelection(){(0,w.openHelpMeWriteGenericPopup)({environment:t,title:e})}})}})}}}((0,P.Xh)(V,t).trim(),d,c,s,t,o);_.push(e)}if(y){const e=function(e,t,i,a,o){return{key:"dictate",render:a=>{let{ref:r,...l}=a;return(0,n.createElement)(D.Z,{...l,key:"dictateNewPage",format:"page-menu-item",title:i.formatMessage(O.dictate),type:"dictation",icon:(0,K.jsx)("div",{style:{height:24,width:24,borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",marginRight:4},children:(0,m.q)({width:16,height:16,fill:"dark"===t.mode?t.accentColors.red[700]:t.accentColors.red[400]})}),locked:!1,right:Q(e,l,t,o)})},action:async()=>{const{dictationActions:t}=await M.FF.dictation.load();t.startDictation({environment:e,pageBlock:a,from:"template_picker"})}}}(d,c,s,t,o);_.push(e)}return u?null:(0,K.jsx)(N.Z,{type:N.i.Horizontal,store:i,initialFocus:L?void 0:0,disableInitialScroll:!0,disableCommandEnter:!0,isEnterOnHoverEmpty:!0,disableKeyboard:L,onEmptyEnter:()=>Y(d),sections:[{key:"Basic",render:e=>(0,K.jsx)("div",{children:e.children},e.key),items:[...k,..._]},{key:"Add new",render:e=>(0,K.jsxs)("div",{children:[(0,K.jsx)("div",{style:z(d,c),children:(0,K.jsx)(g.FormattedMessage,{defaultMessage:"Add new",id:"templatePicker.add new.label"})}),e.children]},e.key),items:x}]})}},566890:(e,t,i)=>{i.d(t,{DK:()=>m,L1:()=>c,Y$:()=>d,cu:()=>l,xm:()=>s});i(21703);var n=i(667294),a=i(67381);const o="collectionContextStore",r=(0,a.Q)({displayName:o,legacyContextKey:o,modernContextDefaultValue:void 0}),l=r.context,s=r.legacyPropTypes,c=r.Provider;function d(){const e=n.useContext(l);if(void 0===e)throw new Error(`No context provided: ${o}`);return e}function m(){return n.useContext(l)}},492658:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(749085);class a extends n.default{getInitialState(){return{inputValue:"",focus:!1}}}const o=a},68688:(e,t,i)=>{i.d(t,{d:()=>o});var n=i(80444),a=i(319385);function o(){const{currentSpaceStore:e}=n.default.state;return Boolean(window.isSecureContext&&(null==e?void 0:e.canRead())&&e.isAiEnabledOnSpace()&&"on"===a.default.getEligibleGroup({experimentId:"dictation_experiment_v2",defaultGroup:"control"}))}},425498:(e,t,i)=>{i.d(t,{m:()=>o,w:()=>r});i(757658);var n=i(954061),a=i(798165);const o=[{frequency:"day",interval:1},{frequency:"week",interval:1},{frequency:"month",interval:1},{frequency:"year",interval:1}];function r(e){const t=a.qA(e)??[],i=[];for(const n of t){if(!("block"===n.table&&!0===n.isTemplate()&&n.getFormat().automation_id&&n.id!==e.id))continue;const t=n.getAutomationStore();if(t){if(!t.isReady())return{automationStoresReady:!1};void 0!==t.getRecurrence()&&t.isDefined()&&i.push(t.getModel())}}return{automationStoresReady:!0,...(0,n.templateAncestorsViolateRecurrenceNesting)(i)}}},167940:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(749085),a=i(471924);class o extends n.default{getInitialState(){return{flowId:void 0}}getOrCreateFlowId(){const e=this.state.flowId||a.Il();return this.state.flowId&&this.setState({flowId:e}),e}}const r=new o},156638:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(749085);class a extends n.default{getInitialState(){return{open:!1}}}const o=new a},213148:(e,t,i)=>{i.d(t,{U:()=>o});i(667294);var n=i(745238),a=i(785893);const o=(0,n.IU)("close",{viewBox:"0 0 16 16",svg:(0,a.jsx)("path",{d:"M2.89795 13.3428C3.18799 13.6262 3.6626 13.6262 3.93945 13.3494L7.99341 9.29541L12.0474 13.3494C12.3308 13.6262 12.8054 13.6328 13.0889 13.3428C13.3723 13.0593 13.3723 12.5847 13.0955 12.3079L9.0415 8.24731L13.0955 4.19336C13.3723 3.9165 13.3789 3.4353 13.0889 3.15845C12.7988 2.875 12.3308 2.875 12.0474 3.15186L7.99341 7.20581L3.93945 3.15186C3.6626 2.875 3.1814 2.86841 2.89795 3.15186C2.6145 3.44189 2.62109 3.9231 2.89795 4.19336L6.9519 8.24731L2.89795 12.3079C2.62109 12.5781 2.6145 13.0659 2.89795 13.3428Z"})})},664878:(e,t,i)=>{i.d(t,{h:()=>o});i(667294);var n=i(745238),a=i(785893);const o=(0,n.IU)("dot",{viewBox:"0 0 5 4",svg:(0,a.jsx)("circle",{cx:"2.5",cy:"2",r:"2"})})},239132:(e,t,i)=>{i.d(t,{c:()=>o});i(667294);var n=i(745238),a=i(785893);const o=(0,n.IU)("eye",{viewBox:"0 0 32 32",svg:(0,a.jsx)("path",{d:"M16.006 25.812c8.863 0 14.994-7.17 14.994-9.406C31 14.16 24.858 7 16.006 7 7.252 7 1 14.16 1 16.406c0 2.236 6.252 9.406 15.006 9.406zm0-3.242a6.194 6.194 0 01-6.197-6.164c-.012-3.452 2.744-6.164 6.197-6.164 3.419 0 6.185 2.711 6.185 6.164 0 3.364-2.766 6.164-6.185 6.164zm0-3.94c1.228 0 2.246-1.007 2.246-2.224 0-1.228-1.018-2.235-2.246-2.235-1.24 0-2.258 1.007-2.258 2.235 0 1.217 1.018 2.224 2.258 2.224z"})})},780926:(e,t,i)=>{i.d(t,{z:()=>o});i(667294);var n=i(745238),a=i(785893);const o=(0,n.IU)("flag",{viewBox:"0 0 13 14",svg:(0,a.jsx)("path",{d:"M0.825195 13.8457C1.16699 13.8457 1.4541 13.5654 1.4541 13.2168V9.47754C1.63867 9.40918 2.21973 9.19727 3.10156 9.19727C5.59668 9.19727 7.25781 10.4414 9.66406 10.4414C10.7168 10.4414 11.1885 10.3115 11.7217 10.0654C12.207 9.84668 12.4941 9.4502 12.4941 8.82129V1.99219C12.4941 1.55469 12.1523 1.27441 11.6943 1.27441C11.3047 1.27441 10.6895 1.54102 9.58887 1.54102C7.20996 1.54102 5.52148 0.296875 3.0332 0.296875C1.99414 0.296875 1.5293 0.419922 0.975586 0.672852C0.49707 0.891602 0.196289 1.24707 0.196289 1.86914V13.2168C0.196289 13.5586 0.483398 13.8457 0.825195 13.8457ZM9.63672 9.16309C7.41504 9.16309 5.71289 7.92578 3.12207 7.92578C2.45215 7.92578 1.84375 8.00098 1.48145 8.14453V2.0332C1.59766 1.83496 2.11035 1.56836 3.05371 1.56836C5.38477 1.56836 7.09375 2.80566 9.56836 2.80566C10.2383 2.80566 10.792 2.73047 11.2158 2.61426V8.69824C11.0996 8.89648 10.5801 9.16309 9.63672 9.16309Z"})})},582356:(e,t,i)=>{i.d(t,{l:()=>o});i(667294);var n=i(745238),a=i(785893);const o=(0,n.IU)("import",{viewBox:"0 0 16 16",svg:(0,a.jsx)("path",{d:"M13.291 14.5723C13.291 14.1484 12.9902 13.834 12.5732 13.834H8.06836C8.24609 13.8203 8.42383 13.7314 8.56055 13.5947L13.0586 9.08301C13.2158 8.91895 13.291 8.74121 13.291 8.54297C13.291 8.12598 12.9902 7.81836 12.5801 7.81836C12.3682 7.81836 12.1836 7.90039 12.0469 8.03711L10.4951 9.56836L8.69043 11.585L8.75195 10.1084V1.61133C8.75195 1.16016 8.44434 0.852539 8 0.852539C7.5625 0.852539 7.25488 1.16016 7.25488 1.61133V10.1084L7.30957 11.5781L5.50488 9.56836L3.95312 8.03711C3.82324 7.90039 3.63184 7.81836 3.42676 7.81836C3.0166 7.81836 2.70898 8.12598 2.70898 8.54297C2.70898 8.74121 2.78418 8.91895 2.94141 9.08301L7.44629 13.5947C7.58301 13.7314 7.75391 13.8203 7.93848 13.834H3.44043C3.0166 13.834 2.70898 14.1484 2.70898 14.5723C2.70898 14.9893 3.0166 15.3037 3.44043 15.3037H12.5732C12.9902 15.3037 13.291 14.9893 13.291 14.5723Z"})})},526789:(e,t,i)=>{i.d(t,{q:()=>o});i(667294);var n=i(745238),a=i(785893);const o=(0,n.IU)("microphone",{viewBox:"0 0 17 25",svg:(0,a.jsx)("path",{d:"M0.20752 12.0743C0.20752 13.5496 0.511882 14.853 1.12061 15.9845C1.72933 17.116 2.57438 18.0219 3.65576 18.7023C4.73714 19.3826 5.98324 19.7908 7.39404 19.9269V22.129H3.45166C3.17236 22.129 2.93245 22.2257 2.73193 22.4191C2.53141 22.6196 2.43115 22.8595 2.43115 23.1388C2.43115 23.4109 2.53141 23.6437 2.73193 23.837C2.93245 24.0376 3.17236 24.1378 3.45166 24.1378H13.313C13.5923 24.1378 13.8322 24.0376 14.0327 23.837C14.2332 23.6437 14.3335 23.4109 14.3335 23.1388C14.3335 22.8595 14.2332 22.6196 14.0327 22.4191C13.8322 22.2257 13.5923 22.129 13.313 22.129H9.37061V19.9269C10.7814 19.7908 12.0239 19.3826 13.0981 18.7023C14.1795 18.0219 15.0246 17.116 15.6333 15.9845C16.242 14.853 16.5464 13.5496 16.5464 12.0743V9.94739C16.5464 9.66809 16.4461 9.43176 16.2456 9.2384C16.0522 9.04504 15.8159 8.94836 15.5366 8.94836C15.2573 8.94836 15.0174 9.04504 14.8169 9.2384C14.6164 9.43176 14.5161 9.66809 14.5161 9.94739V11.9991C14.5161 13.2166 14.2583 14.2837 13.7427 15.2003C13.2271 16.1098 12.5109 16.8152 11.5942 17.3165C10.6776 17.8178 9.60693 18.0685 8.38232 18.0685C7.16488 18.0685 6.09424 17.8178 5.17041 17.3165C4.24658 16.8152 3.52686 16.1098 3.01123 15.2003C2.50277 14.2837 2.24854 13.2166 2.24854 11.9991V9.94739C2.24854 9.66809 2.14827 9.43176 1.94775 9.2384C1.74723 9.04504 1.50374 8.94836 1.21729 8.94836C0.94515 8.94836 0.708822 9.04504 0.508301 9.2384C0.30778 9.43176 0.20752 9.66809 0.20752 9.94739V12.0743ZM8.38232 15.8448C9.10563 15.8448 9.75016 15.6766 10.3159 15.34C10.8888 14.9962 11.3364 14.5236 11.6587 13.922C11.9881 13.3204 12.1528 12.6222 12.1528 11.8273V4.59778C12.1528 3.80286 11.9881 3.10461 11.6587 2.50305C11.3364 1.90149 10.8888 1.43241 10.3159 1.09583C9.75016 0.752075 9.10563 0.5802 8.38232 0.5802C7.65902 0.5802 7.0109 0.752075 6.43799 1.09583C5.87223 1.43241 5.42464 1.90149 5.09521 2.50305C4.76579 3.10461 4.60107 3.80286 4.60107 4.59778V11.8273C4.60107 12.6222 4.76579 13.3204 5.09521 13.922C5.42464 14.5236 5.87223 14.9962 6.43799 15.34C7.0109 15.6766 7.65902 15.8448 8.38232 15.8448Z"})})},435840:(e,t,i)=>{i.d(t,{R:()=>o,T:()=>a});i(667294);var n=i(745238);const a=(0,i(785893).jsx)("path",{d:"M.281 6.438c0-.875.164-1.696.492-2.461a6.484 6.484 0 011.375-2.032A6.237 6.237 0 016.64.078 6.2 6.2 0 019.11.57c.77.328 1.447.787 2.03 1.375a6.374 6.374 0 011.368 2.032c.333.765.5 1.586.5 2.46 0 .688-.107 1.342-.32 1.961a6.28 6.28 0 01-.868 1.696l3.563 3.578c.11.104.19.226.242.367.057.14.086.29.086.445 0 .22-.05.417-.149.594a1.122 1.122 0 01-1 .57c-.156 0-.307-.028-.453-.086a1.058 1.058 0 01-.382-.25l-3.586-3.585c-.5.333-1.047.596-1.641.789a6.089 6.089 0 01-1.86.28 6.237 6.237 0 01-2.468-.491 6.4 6.4 0 01-2.024-1.367A6.509 6.509 0 01.773 8.913a6.256 6.256 0 01-.492-2.476zm1.664 0c0 .65.12 1.26.36 1.828a4.775 4.775 0 001.015 1.5c.433.427.933.763 1.5 1.007a4.548 4.548 0 001.82.368c.652 0 1.261-.123 1.829-.368a4.747 4.747 0 002.508-2.507 4.567 4.567 0 00.367-1.829c0-.645-.123-1.252-.367-1.82a4.776 4.776 0 00-1.016-1.5A4.578 4.578 0 008.469 2.11a4.567 4.567 0 00-1.828-.367c-.646 0-1.253.123-1.82.367a4.667 4.667 0 00-1.5 1.008c-.433.432-.772.932-1.016 1.5a4.633 4.633 0 00-.36 1.82z"}),o=(0,n.IU)("search",{viewBox:"0 0 16 16",svg:a})},646783:(e,t,i)=>{i.d(t,{w:()=>o});i(667294);var n=i(745238),a=i(785893);const o=(0,n.IU)("templates",{viewBox:"0 0 20 20",svg:(0,a.jsxs)("g",{children:[(0,a.jsx)("path",{d:"M6.39733 5.67853C5.89764 5.50234 5.36002 5.40649 4.8 5.40649C2.14904 5.40649 0 7.55432 0 10.2038C0 12.8533 2.14904 15.0011 4.8 15.0011C6.52165 15.0011 8.0316 14.0952 8.87867 12.7343L5.26487 12.0975L6.39733 5.67853Z"}),(0,a.jsx)("path",{d:"M17.3126 3.66609L7.85843 2L6.19141 11.4489L10.6545 12.2354L14.3998 5.81854L16.3449 9.15116L17.3126 3.66609Z"}),(0,a.jsx)("path",{d:"M8.80078 17L14.4008 7.4054L20.0008 17H8.80078Z"})]})})},973426:(e,t,i)=>{i.d(t,{i:()=>o});i(667294);var n=i(745238),a=i(785893);const o=(0,n.IU)("templatesColor",{viewBox:"0 0 20 20",svg:(0,a.jsxs)("g",{children:[(0,a.jsx)("path",{d:"M6.39733 5.67853C5.89764 5.50234 5.36002 5.40649 4.8 5.40649C2.14904 5.40649 0 7.55432 0 10.2038C0 12.8533 2.14904 15.0011 4.8 15.0011C6.52165 15.0011 8.0316 14.0952 8.87867 12.7343L5.26487 12.0975L6.39733 5.67853Z",fill:"#3C9ED7"}),(0,a.jsx)("path",{d:"M17.3126 3.66609L7.85843 2L6.19141 11.4489L10.6545 12.2354L14.3998 5.81854L16.3449 9.15116L17.3126 3.66609Z",fill:"#E7595E"}),(0,a.jsx)("path",{d:"M8.80078 17L14.4008 7.4054L20.0008 17H8.80078Z",fill:"#F5BC4E"})]})})},954061:(e,t,i)=>{i.r(t),i.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>u,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>d,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>c,MAX_RECURRENCE_INTERVAL:()=>l,RRULE_WEEKDAYS_MAP:()=>r,getRecurrenceAfter:()=>p,rruleFromRecurrence:()=>s,templateAncestorsViolateRecurrenceNesting:()=>m});var n=i(730120),a=i(484885);const o={day:a.Ci.DAILY,week:a.Ci.WEEKLY,month:a.Ci.MONTHLY,year:a.Ci.YEARLY},r={MO:a.Ci.MO,TU:a.Ci.TU,WE:a.Ci.WE,TH:a.Ci.TH,FR:a.Ci.FR,SA:a.Ci.SA,SU:a.Ci.SU},l=100;function s(e){const{start_date:t,frequency:i,interval:n,weekdays:l,timezone:s,hour:c,minute:d}=e,m="week"===i&&l?l.map((e=>r[e])):void 0;return new a.Ci({freq:o[i],dtstart:new Date(t),interval:n,byweekday:m,tzid:s,byhour:c??0,byminute:d??0,bysecond:0})}const c=1,d=1;function m(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const i=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),n=e.length,a=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,o=n>c,r=i.length>=d;return{violatesConstraint:o||r,templateNestingExceedsMaxDepth:o,ancestorHasDailyTemplate:r,nestedDepthOfAutomationAncestors:n,immediateAncestorRecurrenceType:a}}function p(e){const{recurrence:t,afterDate:i}=e,a=s({...t}).after(new Date(i));if(!a)return;return n.ou.fromJSDate(a).toUTC().setZone("local",{keepLocalTime:!0}).toJSDate()}const u=100}}]);