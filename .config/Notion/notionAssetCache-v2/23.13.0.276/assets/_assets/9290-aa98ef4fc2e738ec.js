"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[9290],{640833:(e,t,s)=>{s.d(t,{L:()=>k});var n=s(667294),r=s(886628),a=s(460709),i=s(223196),o=s(61766),l=s(231945),d=s(478140),c=s(632163),m=s(953437),u=s(126263),p=s(800480),h=s(421202),g=s(653965),b=s(210228),f=s(582787),S=s(206258),C=s(672495),M=s(173587),v=s(621),y=s(785893);function T(e){let{blockStore:t,filterDeletedPermissions:s}=e;const{mockBlockStore:i}=function(e){let{blockStore:t,filterDeletedPermissions:s}=e;const a=(0,p.O7)(),i=(0,r.VK)((()=>(0,g.Xh)(t.inMemoryRecordCache.data)),[t]),o=(0,n.useMemo)((()=>new u.Z({name:"adminContentSearch.deletedFromTrashPermissionsView",data:i,isTemporaryData:!0})),[i]),l=(0,f.Z)({unpersistedInMemoryRecordCache:o}),{mockBlockStore:d}=(0,r.VK)((()=>{const e=s?s(t):[],n=new S.G(a,{table:h.iU,id:t.id},{inMemoryRecordCache:o});return l.createAndCommit({userAction:"adminContentSearch.restoreDeletedFromTrashPermissionsOptimistically",perform:t=>{b.applyOperation({store:n,operation:{pointer:n,command:"set",path:["permissions"],args:e},transaction:t})}}),{inMemoryRecordCache:o,mockBlockStore:n}}),[a,t,o,l,s]);return{mockBlockStore:d}}({blockStore:t,filterDeletedPermissions:s}),o=(0,v.E)(i),l=(0,M.z)({permissionItems:o});return(0,y.jsx)(d.Z,{menuType:a.og.Popup,width:248,children:(0,y.jsx)(c.Z,{type:c.i.Vertical,initialFocus:void 0,sections:[{key:"deletedFromTrashPermissions",render:e=>(0,y.jsx)(C.Z,{...e}),items:l}]})})}var x=s(743261),P=s(705540);function k(e){let{blockStore:t,getValidDeletedPermissions:s,placementToOrigin:u,renderPopupOrigin:p,environment:h,includeNonRestoreActions:g}=e;const b=(0,r.qz)(void 0,o.Z),f=(0,P.T)(),[S,C]=(0,n.useState)(!1),M=(0,x.e)({environment:h,blockStore:t,getValidDeletedPermissions:s,pageStatus:"deleted_from_trash",popupStore:b,handleOpenDeletedPermissionsMenu:()=>C(!0),includeNonRestoreActions:g});return(0,y.jsx)(l.ZP,{popupType:i.k.Popup,alignmentToOrigin:m.ZP.Alignment.Center,placementToOrigin:u,style:f.popupMenu,render:()=>S?(0,y.jsx)(T,{blockStore:t,filterDeletedPermissions:s}):(0,y.jsx)(d.Z,{menuType:a.og.Popup,width:248,children:(0,y.jsx)(c.Z,{type:c.i.Vertical,initialFocus:void 0,sections:M})}),onClose:()=>{C(!1)},buttonPopupStore:b,renderOrigin:p})}},743261:(e,t,s)=>{s.d(t,{e:()=>P});s(757658),s(667294);var n=s(886628),r=s(724405),a=s(815145),i=s(733907),o=s(727714),l=s(262397),d=s(937612),c=s(355863),m=s(709291),u=s(401898),p=s(800893),h=s(412714),g=s(239865),b=s(484210),f=s(798165),S=s(825464),C=s(80444),M=s(552275),v=s(672495),y=s(526388),T=s(705540),x=s(785893);function P(e){const{blockStore:t,pageStatus:s}=e,r=(0,n.VK)((()=>{var n;if("deleted_from_trash"!==s)return{ancestorBlockStore:void 0,canRestoreAncestor:!1,canRestoreOriginalAccess:!1};const{getValidDeletedPermissions:r}=e,a=f.nR(f.qA(t));if(Boolean((null==a?void 0:a.id)!==t.id))return{ancestorBlockStore:a,canRestoreAncestor:!0,canRestoreOriginalAccess:!1};const i=r?r(t):[],o=Boolean(t.getParentSpaceStore()&&0===i.length);return{ancestorBlockStore:a,canRestoreAncestor:!1,canRestoreOriginalAccess:!Boolean(null===(n=t.getParentBlockStore())||void 0===n?void 0:n.pathHasDeletedPermission())&&!o}}),[e,t,s]),o=function(e){const t=(0,T.T)(),{environment:s,pageStatus:n,popupStore:r,blockStore:o}=e;async function d(){const e=(0,b.ZP)({store:o,pageVisitSource:a.tY.CopyLink});await p.RD({environment:s,stringValue:e,copiedMessage:p.tq.copiedLinkToClipboard}),r.setState({open:!1})}const c=[];switch(n){case"alive":case"in_trash":{const{handleOpenPermissionsMenu:s}=e;c.push(function(e){let{iconStyle:t,action:s}=e;return{key:"change-permissions",render:e=>(0,x.jsx)(M.Z,{...e,icon:(0,l.I)(t),title:(0,x.jsx)(m.FormattedMessage,{id:"adminContentSearchTab.pagesTable.page.actions.changePermissions",defaultMessage:"Change permissions"})}),action:s}}({iconStyle:t.changePermissionsIcon,action:s}),j({iconStyle:t.icon,action:d}));break}case"deleted_from_trash":{const{ancestorBlockStore:n,canRestoreAncestor:o,canRestoreOriginalAccess:u,handleOpenDeletedPermissionsMenu:p,includeNonRestoreActions:g}=e;if(n&&o){const e=()=>{const e=(0,b.ZP)({store:n,pageVisitSource:a.tY.DeletedFromTrashPageActions});h.D({environment:s,url:e}),r.setState({open:!1})};c.push(function(e){let{iconStyle:t,action:s}=e;return{key:"go-to-parent-page",render:e=>(0,x.jsx)(M.Z,{...e,icon:(0,i.n)(t),title:(0,x.jsx)(m.FormattedMessage,{id:"adminContentSearchTab.pagesTable.page.actions.navigateToParent",defaultMessage:"Open parent in new tab"})}),action:s}}({iconStyle:t.openLinkIcon,action:e}))}u&&c.push(function(e){let{iconStyle:t,action:s}=e;return{key:"view-original-permissions",render:e=>(0,x.jsx)(M.Z,{...e,icon:(0,l.I)(t),title:(0,x.jsx)(m.FormattedMessage,{id:"adminContentSearchTab.pagesTable.page.actions.viewOriginalPermissions",defaultMessage:"View original permissions"})}),action:s}}({iconStyle:t.changePermissionsIcon,action:p})),g&&c.push(j({iconStyle:t.icon,action:d}));break}default:(0,u.t1)(n)}if(0===c.length)return;return{key:"actions",render:e=>(0,x.jsx)(v.Z,{...e}),items:c}}("deleted_from_trash"===s?{...e,...r}:e),S=function(e){const{pageStatus:t,environment:s,blockStore:r}=e,a=(0,T.T)(),i=[],o=(0,n.VK)((()=>{var e;return(null===(e=C.default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.id)===r.id}),[r]);switch(t){case"alive":return;case"in_trash":{async function l(){await g.DV({environment:s,block:r,spaceId:r.getSpaceId(),from:"adminContentSearch.restorePage",restoreWithoutNavigation:!0})}i.push(I({iconStyle:a.icon,action:l,disable:!1}),function(e){let{iconStyle:t,action:s}=e;return{key:"delete-from-trash",render:e=>(0,x.jsx)(k,{...e,icon:(0,d.y)(t),title:(0,x.jsx)(m.FormattedMessage,{id:"adminContentSearchTab.pagesTable.page.actions.deleteFromTrash",defaultMessage:"Delete from trash"})}),action:s}}({iconStyle:a.icon,action:()=>{g.Rn({environment:s,blocks:[r],from:"adminContentSearch"})}}));break}case"deleted_from_trash":{const{canRestoreAncestor:p,canRestoreOriginalAccess:h,includeNonRestoreActions:b}=e,f=p||!h,S=p?(0,x.jsx)(m.FormattedMessage,{id:"adminContentSearchTab.pagesTable.page.actions.restore.tooltip.restoreParent",defaultMessage:"Restore the parent page to restore the original permissions."}):h?void 0:(0,x.jsx)(m.FormattedMessage,{id:"adminContentSearchTab.pagesTable.page.actions.restore.tooltip.pageCannotBeRestored",defaultMessage:"This page cannot have its original permissions restored."});i.push(I({iconStyle:a.icon,action:()=>{g.Fy({environment:s,blockStore:r,spaceId:r.getSpaceId()})},disable:f,tooltip:S}),function(e){let{iconStyle:t,action:s}=e;return{key:"restore-to-private",render:e=>(0,x.jsx)(M.Z,{...e,icon:(0,c.s)(t),shouldWrapCaption:!0,title:(0,x.jsx)(m.FormattedMessage,{id:"adminContentSearchTab.pagesTable.page.actions.restoreToPrivate",defaultMessage:"Restore to your private pages"}),caption:(0,x.jsx)(m.FormattedMessage,{id:"adminContentSearchTab.pagesTable.page.actions.restoreToPrivate.caption",defaultMessage:"After restoring, you can choose a new location and permissions"})}),action:s}}({iconStyle:a.icon,action:async()=>{await g.gW({environment:s,blockStore:r,spaceId:r.getSpaceId(),navigateToPage:o})}})),b&&i.push(function(e){let{iconStyle:t,action:s}=e;return{key:"purge",render:e=>(0,x.jsx)(k,{...e,icon:(0,d.y)(t),title:(0,x.jsx)(m.FormattedMessage,{id:"adminContentSearchTab.pagesTable.page.actions.purge",defaultMessage:"Permanently delete"})}),action:s}}({iconStyle:a.icon,action:()=>{g.f6({environment:s,blockStore:r})}}));break}default:(0,u.t1)(t)}return{key:"inactive-page-actions",render:e=>(0,x.jsx)(v.Z,{...e,topBorder:!0}),items:i}}("deleted_from_trash"===s?{...e,...r}:e);return[o,S].filter(u.$K)}function k(e){const t=(0,r.yK)((e=>({destructiveMenuItemHover:{background:e.tint.uiRedHover},destructiveMenuItemPressed:{background:e.tint.uiRedPressed}})),[]);return(0,x.jsx)(M.Z,{...e,isRedOnHover:!0,hoveredStyle:t.destructiveMenuItemHover,pressedStyle:t.destructiveMenuItemPressed})}function I(e){let{iconStyle:t,action:s,disable:n,tooltip:r}=e;const a=e=>(0,x.jsx)(M.Z,{...e,disabled:n,disallowTabbing:n,disabledFeedback:!0,icon:(0,c.s)(t),shouldWrapCaption:!0,title:(0,x.jsx)(m.FormattedMessage,{id:"adminContentSearchTab.pagesTable.page.actions.restore",defaultMessage:"Restore page"}),caption:(0,x.jsx)(m.FormattedMessage,{id:"adminContentSearchTab.pagesTable.page.actions.restore.caption",defaultMessage:"Restore to original location and permissions"})});return{key:"restore",render:e=>r?(0,x.jsx)(y.Z,{textWrap:!0,renderTooltip:()=>r??null,placement:S.u.Right,render:t=>(0,x.jsx)("div",{...t,children:a(e)})}):a(e),action:s}}function j(e){let{iconStyle:t,action:s}=e;return{key:"copy-link",render:e=>(0,x.jsx)(M.Z,{...e,icon:(0,o.N)(t),title:(0,x.jsx)(m.FormattedMessage,{id:"adminContentSearchTab.pagesTable.page.actions.copyLink",defaultMessage:"Copy link to page"})}),action:s}}},705540:(e,t,s)=>{s.d(t,{T:()=>r});var n=s(724405);function r(){return(0,n.yK)((e=>({changePermissionsIcon:{height:18,width:18,fill:"currentColor"},icon:{marginRight:3,height:15,width:15,fill:"currentColor"},destructiveMenuItemHover:{background:e.tint.uiRedHover},destructiveMenuItemPressed:{background:e.tint.uiRedPressed},openLinkIcon:{marginRight:3,height:15,width:15,fill:"currentColor",transform:"rotate(-45deg)"},popupMenu:{width:248},popupShareModal:{width:450}})),[])}},173587:(e,t,s)=>{s.d(t,{v:()=>B,z:()=>G});s(757658);var n=s(667294),r=s(844495),a=s(709291),i=s(53695),o=s(526388),l=s(800480),d=s(886628),c=s(724405),m=s(177420),u=s(206258),p=s(636596),h=s(828992),g=s(670301),b=s(785893);function f(e){let{botId:t}=e;const s=(0,a.useIntl)(),n=(0,l.O7)(),r=(0,d.VK)((()=>u.t1.createUniqueRootStore(n,{table:m.cZ,id:t})),[t,n]),i=(0,d.VK)((()=>r.getDisplayName(s)),[r,s]),o=(0,d.VK)((()=>r.getParentStore()),[r]),p=(0,d.VK)((()=>{if(o){if(o instanceof u.U6)return o.getDisplayName(s);if(o instanceof u.H2)return o.getName()}}),[o,s]),f=(0,c.yK)((()=>({desktopIconStyle:{alignSelf:"center",width:24,fontSize:18}})),[]);return i?(0,b.jsx)(h.Z,{desktopIconStyle:f.desktopIconStyle,icon:(0,b.jsx)(g.Z,{botStore:r,size:24}),title:i,caption:(0,b.jsx)(a.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.botMenuItem.createdBy",defaultMessage:"Created by {creatorName}",values:{creatorName:p}})}):(0,b.jsx)(S,{})}function S(){const e=(0,c.yK)((e=>({container:{userSelect:"none",minHeight:45,fontSize:14,padding:"4px 8px",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},textContainer:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",gap:6},icon:{flexGrow:0,flexShrink:0,width:24,height:24,borderRadius:"0.25em",marginRight:4,marginTop:1},title:{flexGrow:0,flexShrink:0,width:80,height:14,borderRadius:"0.25em",marginLeft:4},byline:{flexGrow:0,flexShrink:0,width:150,height:10,borderRadius:"0.25em",marginLeft:4}})),[]);return(0,b.jsxs)("div",{style:e.container,children:[(0,b.jsx)(p.Z,{style:e.icon}),(0,b.jsxs)("div",{style:e.textContainer,children:[(0,b.jsx)(p.Z,{emphasized:!1,style:e.title}),(0,b.jsx)(p.Z,{emphasized:!1,style:e.byline})]})]})}var C=s(526774),M=s(80444),v=s(731278);const y=(0,a.defineMessages)({editor:{id:"adminContentSearchTab.sharedWith.permissions.editor",defaultMessage:"Full access"},readAndWrite:{id:"adminContentSearchTab.sharedWith.permissions.readAndWrite",defaultMessage:"Can edit"},commentOnly:{id:"adminContentSearchTab.sharedWith.permissions.commentOnly",defaultMessage:"Can comment"},reader:{id:"adminContentSearchTab.sharedWith.permissions.reader",defaultMessage:"Can view"},none:{id:"adminContentSearchTab.sharedWith.permissions.none",defaultMessage:"None"}});function T(e,t){switch(t){case"editor":return e.formatMessage(y.editor);case"read_and_write":return e.formatMessage(y.readAndWrite);case"comment_only":return e.formatMessage(y.commentOnly);case"reader":return e.formatMessage(y.reader);case"none":return e.formatMessage(y.none)}}function x(e){let{name:t,icon:s,role:n}=e;const r=(0,a.useIntl)(),i=(0,d.VK)((()=>M.default.state.currentSpaceStore),[]),o=T(r,n),l=(0,c.yK)((e=>({defaultIcon:{height:18,width:18,color:e.lightTextColor,fill:"currentColor"},defaultGroupIcon:{height:20,width:20,color:e.lightTextColor,fill:"currentColor"}})),[]);return(0,b.jsx)(h.Z,{desktopIconStyle:{alignSelf:"center",width:24,fontSize:18},icon:(0,b.jsx)(v.Z,{disabled:!0,icon:s&&i?{pointer:i.pointer,icon:s}:void 0,size:20,isEmptyPage:!1,title:t,defaultIcon:(0,C.O)(l.defaultGroupIcon)}),title:t||(0,b.jsx)(a.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.untitledPage",defaultMessage:"Untitled{maybeRoleString}",values:{maybeRoleString:o?` · ${o}`:""}}),caption:(0,b.jsx)(a.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.group",defaultMessage:"Group{maybeRoleString}",values:{maybeRoleString:o?` · ${o}`:""}})})}var P=s(772141),k=s(274016);function I(e){let{permissionItem:t}=e;const s=(0,a.useIntl)(),n=(0,d.VK)((()=>M.default.state.currentSpaceStore),[]),r=(0,d.VK)((()=>{var e;return null===(e=M.default.state.currentSpaceStore)||void 0===e?void 0:e.getName()}),[]),i=null==t?void 0:t.role,o=(0,P.iC)(i)?T(s,i):void 0;return(0,b.jsx)(h.Z,{desktopIconStyle:{alignSelf:"center",width:24},icon:n?(0,b.jsx)(k.p,{disabled:!0,store:n,size:24}):void 0,title:r,caption:(0,b.jsx)(a.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.spaceMembers",defaultMessage:"Members{maybeRoleString}",values:{maybeRoleString:o?` · ${o}`:""}})})}var j=s(91192),w=s(429369);function W(e){let{teamId:t,role:s,onlyOwners:n}=e;const r=(0,l.O7)(),i=(0,a.useIntl)(),o=(0,d.VK)((()=>new u.zX(r,{table:w.e0,id:t})),[r,t]),c=T(i,s),m=(0,d.VK)((()=>o.getName()),[o]),p=m||(0,b.jsx)(a.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.unknownTeamName",defaultMessage:"Private teamspace"});return(0,b.jsx)(h.Z,{desktopIconStyle:{alignSelf:"center",width:24},icon:m?(0,b.jsx)(k.p,{disabled:!0,store:o,size:24}):(0,j.x)(),title:p,caption:n?(0,b.jsx)(a.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.teamOwners",defaultMessage:"Owners{maybeRoleString}",values:{maybeRoleString:c?` · ${c}`:""}}):(0,b.jsx)(a.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.teamMembers",defaultMessage:"Members{maybeRoleString}",values:{maybeRoleString:c?` · ${c}`:""}})})}var _=s(621),R=s(519889),Z=s(307928),O=s(45653);function F(e){let{userId:t,role:s,isGuest:n}=e;const r=(0,a.useIntl)(),i=(0,l.O7)(),{userStore:o,userName:c}=(0,d.VK)((()=>{const e=new u.U6(i,{table:R.KJ,id:t}),s=(0,Z.Nz)(r,e.getModel());return{userStore:e,userName:s}}),[i,t,r]),m=T(r,s);return(0,b.jsx)(h.Z,{desktopIconStyle:{alignSelf:"center",width:24},icon:(0,b.jsx)(O.Z,{userStore:o,size:24}),title:c,caption:n?(0,b.jsx)(a.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.guest",defaultMessage:"Guest{maybeRoleString}",values:{maybeRoleString:m?` · ${m}`:""}}):(0,b.jsx)(a.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.member",defaultMessage:"Member{maybeRoleString}",values:{maybeRoleString:m?` · ${m}`:""}})})}const V=(0,a.defineMessages)({sharedWithWorkspaceMembers:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithWorkspaceMembers",defaultMessage:"Workspace members"},sharedWithTeamOwners:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithTeamOwners",defaultMessage:"Teamspace owners"},sharedWithTeamMembers:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithTeamMembers",defaultMessage:"Teamspace members"},sharedWithMembers:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithMembers",defaultMessage:"{numMembers, plural, one {# member} other {# members}}"},sharedWithGroups:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithGroups",defaultMessage:"{numGroups, plural, one {# group} other {# groups}}"},sharedWithGuests:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithGuests",defaultMessage:"{numGuests, plural, one {# guest} other {# guests}}"},sharedWithBots:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithBots",defaultMessage:"{numBots, plural, one {# connection} other {# connections}}"},separator:{defaultMessage:", ",id:"adminContentSearchTab.pagesTable.sharedWithCell.separator"}});function A(e){let{blockStore:t}=e;const s=(0,_.E)(t),n=function(e,t){const{mostPermissivePublicItem:s,spacePermission:n,groupPermissions:i,guestUserPermissions:l,memberUserPermissions:d,teamSharePermissions:c,teamOwnerSharePermissions:m,botPermissions:u}=e,p=n&&"none"!==n.permissionItem.role;if(s&&"none"!==s.permissionItem.role)return(0,b.jsx)(a.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithWeb",defaultMessage:"Shared to web"});if(!p&&0===i.length&&0===l.length&&0===d.length&&0===c.length&&0===m.length&&0===u.length)return(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},children:[(0,b.jsx)(a.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.orphanedPage",defaultMessage:"Nobody"}),(0,b.jsx)(o.Z,{render:e=>(0,b.jsx)("div",{...e,children:(0,r.D)({marginLeft:4,height:14,width:14,opacity:.5})}),renderTooltip:()=>(0,b.jsx)(a.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.orphanedPage.tooltip",defaultMessage:"No person, group, or teamspace has any access to this page."})})]});const h=[];p?h.push(t.formatMessage(V.sharedWithWorkspaceMembers)):(m.length>0&&0===c.length?h.push(t.formatMessage(V.sharedWithTeamOwners)):c.length>0&&h.push(t.formatMessage(V.sharedWithTeamMembers)),d.length>0&&h.push(t.formatMessage(V.sharedWithMembers,{numMembers:d.length})),i.length>0&&h.push(t.formatMessage(V.sharedWithGroups,{numGroups:i.length})));l.length>0&&h.push(t.formatMessage(V.sharedWithGuests,{numGuests:l.length}));u.length>0&&h.push(t.formatMessage(V.sharedWithBots,{numBots:u.length}));return h.join(t.formatMessage(V.separator))}(s,(0,a.useIntl)()),l=G({permissionItems:s});return(0,b.jsx)(i.Nz,{title:n,items:l,disabled:0===l.length})}function G(e){let{permissionItems:t}=e;return[...t.spacePermission?[{key:"space-permission",render:e=>{var s;return(0,b.jsx)(I,{...e,permissionItem:null===(s=t.spacePermission)||void 0===s?void 0:s.permissionItem})},action:()=>{}}]:[],...t.teamOwnerSharePermissions.map((e=>({key:`${e.team_id}-owners`,render:t=>(0,b.jsx)(W,{...t,onlyOwners:!0,teamId:e.team_id,role:e.role}),action:()=>{}}))),...t.teamSharePermissions.map((e=>({key:`${e.team_id}-members`,render:t=>(0,b.jsx)(W,{...t,teamId:e.team_id,role:e.role}),action:()=>{}}))),...t.groupPermissions.map((e=>({key:e.id,render:t=>(0,b.jsx)(x,{...t,name:e.name,icon:e.icon,role:e.role}),action:()=>{}}))),...t.memberUserPermissions.map((e=>({key:e.user_id,render:t=>(0,b.jsx)(F,{...t,userId:e.user_id,role:e.role}),action:()=>{}}))),...t.guestUserPermissions.map((e=>({key:e.user_id,render:t=>(0,b.jsx)(F,{...t,isGuest:!0,userId:e.user_id,role:e.role}),action:()=>{}}))),...t.botPermissions.map((e=>({key:e.bot_id,render:t=>(0,b.jsx)(f,{...t,botId:e.bot_id}),action:()=>{}})))]}const B=n.memo(A)},621:(e,t,s)=>{s.d(t,{E:()=>m});s(757658);var n=s(886628),r=s(772141),a=s(364684),i=s(798165),o=s(367669),l=s(80444),d=s(88893),c=s(288280);function m(e){return(0,n.VK)((()=>{const t=c.subscriptionDataStoreInstance.state,s=t?(0,d.CM)(t):[],n=l.default.state.currentSpaceStore,m=(0,o.YO)(e),u=(null==n?void 0:n.getPermissionGroups())||[],p=(0,i.VP)(e),h=m.find((e=>{let{permissionItem:t}=e;return r.$D(t)})),g=m.find((e=>{let{permissionItem:t}=e;return r.Ir(t)})),b=p?m.find((e=>{let{permissionItem:t}=e;return(0,a.J2)(t,p.id)})):void 0,f=m.map((e=>{let{permissionItem:t}=e;return t})).filter(r.zU),S=m.map((e=>{let{permissionItem:t}=e;return t})).filter(r.LW),C=m.map((e=>{let{permissionItem:t}=e;return t})).filter(r.hV).reduce(((e,t)=>{const s=t.group_id,n=t.role,r=u.find((e=>e.id===s));if(r){const t={...r,role:n};e.push(t)}return e}),[]),[M,v]=m.map((e=>{let{permissionItem:t}=e;return t})).filter(r.jg).reduce(((e,t)=>{const n=s.find((e=>e.userId===t.user_id));return Boolean(n&&!r.zz(n.role)&&!r.J5(n.role))?[e[0].concat(t),e[1]]:[e[0],e[1].concat(t)]}),[[],[]]);return{groupPermissions:C,mostPermissivePublicItem:h,spacePermission:g,teamPermission:b,teamSharePermissions:f,teamOwnerSharePermissions:S,guestUserPermissions:M,memberUserPermissions:v,botPermissions:m.map((e=>{let{permissionItem:t}=e;return t})).filter((e=>(0,r.FB)(e)))}}),[e])}},674451:(e,t,s)=>{s.d(t,{$:()=>c});var n=s(667294),r=s(886628),a=s(401898),i=s(463306);var o=s(772141),l=s(798165),d=s(88893);function c(e){let{spaceStore:t,subscriptionData:s}=e;const{userIsMember:c,permissionGroupExists:m}=(0,r.VK)((()=>{if(!s)return{userIsMember:()=>!1,permissionGroupExists:()=>!1};const e=new Set;d.hn(s).forEach((t=>{e.add(t.userId)}));const n=new Set;null==t||t.getPermissionGroups().forEach((e=>{n.add(e.id)}));return{userIsMember:t=>e.has(t),permissionGroupExists:e=>n.has(e)}}),[t,s]);return(0,n.useCallback)((e=>{var t;const s=null===(t=e.getPermissionItems().find(o.gG))||void 0===t?void 0:t.previous_permissions;return s?function(e){var t;let{deletedPermissions:s,ancestorPath:n,userIsMember:r,permissionGroupExists:o}=e;const l=null===(t=(0,i.bs)(n))||void 0===t?void 0:t.id;return s.filter((e=>{const t=e.type;switch(t){case"trusted_domain_permission":case"public_permission":case"deleted_permission":case"bot_permission":return!1;case"exclusive_user_permission":case"user_permission":return r(e.user_id);case"explicit_team_guest_permission":case"explicit_team_owner_permission":case"explicit_team_permission":return e.team_id===l;case"group_permission":return o(e.group_id);case"team_owner_permission":case"team_permission":case"restricted_permission":case"space_permission":return!0;default:(0,a.t1)(t)}}))}({deletedPermissions:s,ancestorPath:(0,l.fJ)(e),userIsMember:c,permissionGroupExists:m}):[]}),[c,m])}},8675:(e,t,s)=>{s.d(t,{Z:()=>l});var n=s(749085),r=s(80444),a=s(319385),i=s(206258);class o extends n.default{getInitialState(){return{changePermissionsEnabled:!1,privatePageStore:void 0,loading:!1,error:void 0}}shouldSaveTransactionWithSudoMode(e){const t=e===this.state.privatePageStore,s=a.default.checkGate({gateName:"enable_get_private_page_info_endpoint"}),n=this.doesUserAlreadyHaveEditorAccessOnBlock(e.id);return t&&s&&this.state.changePermissionsEnabled&&!n}shouldUserHaveAccessToPrivatePageBlock(){var e,t;const s=null===(e=r.default.state.currentSpaceStore)||void 0===e?void 0:e.canAdmin(),n="enterprise"===(null===(t=r.default.state.currentSpaceStore)||void 0===t?void 0:t.getSubscriptionTier());return this.state.privatePageStore&&s&&n}doesUserAlreadyHaveEditorAccessOnBlock(e){const t=r.default.state.currentSpaceStore;if(!t)return!1;return i.G.createChildStore(t,{table:"block",id:e}).canAdmin()}}const l=o},91192:(e,t,s)=>{s.d(t,{x:()=>a});s(667294);var n=s(745238),r=s(785893);const a=(0,n.IU)("privateTeam",{viewBox:"0 0 28 28",svg:(0,r.jsx)("path",{d:"M20.6455 21.2744C20.9092 21.5469 21.3311 21.5645 21.6035 21.2744C21.8936 20.9844 21.8672 20.5889 21.6035 20.3164L6.9082 5.62988C6.64453 5.36621 6.21387 5.36621 5.94141 5.62988C5.68652 5.88477 5.68652 6.33301 5.94141 6.58789L20.6455 21.2744ZM13.8076 6.13086C12.2783 6.13086 10.8896 6.39453 9.59766 6.8252L10.7578 7.97656C11.7246 7.68652 12.7178 7.51953 13.8076 7.51953C19.5908 7.51953 24.2754 12.6172 24.2754 13.6631C24.2754 14.375 22.7373 16.291 20.3027 17.7852L21.3838 18.8662C24.1611 17.0645 25.8135 14.7002 25.8135 13.6631C25.8135 11.8613 20.9092 6.13086 13.8076 6.13086ZM13.8076 21.1953C15.4424 21.1953 16.9365 20.9053 18.2988 20.4395L17.1475 19.2881C16.1016 19.6133 14.9941 19.8066 13.8076 19.8066C8.01562 19.8066 3.33105 14.9023 3.33105 13.6631C3.33105 13.0479 4.95703 11 7.5498 9.44434L6.45996 8.35449C3.5332 10.165 1.79297 12.5996 1.79297 13.6631C1.79297 15.4561 6.79395 21.1953 13.8076 21.1953ZM18.3164 15.5879C18.5889 14.999 18.7383 14.3398 18.7383 13.6631C18.7383 10.9121 16.541 8.74121 13.8076 8.74121C13.1133 8.74121 12.4629 8.89062 11.874 9.14551L18.3164 15.5879ZM13.8076 18.585C14.5811 18.585 15.3105 18.3916 15.9609 18.0752L9.36914 11.4834C9.04395 12.1338 8.85938 12.8721 8.85938 13.6631C8.86816 16.3438 11.0566 18.585 13.8076 18.585Z"})})},262397:(e,t,s)=>{s.d(t,{I:()=>a});s(667294);var n=s(745238),r=s(785893);const a=(0,n.IU)("settingsSecurity",{viewBox:"0 0 11 20",svg:(0,r.jsx)("path",{d:"M4.92129 19.3231C5.26719 19.627 5.74092 19.6649 6.07178 19.3383L8.38779 16.9913C8.71865 16.6571 8.70361 16.1558 8.38027 15.8292L7.2749 14.7127L8.92168 13.0569C9.2375 12.7379 9.22998 12.229 8.90664 11.8948L7.41026 10.3757C9.44805 9.35026 10.5985 7.64127 10.5985 5.62847C10.5985 2.78016 8.32012 0.486328 5.49277 0.486328C2.66543 0.486328 0.394531 2.77257 0.394531 5.62847C0.394531 7.67166 1.54502 9.50217 3.37979 10.3301V17.4622C3.37979 17.7357 3.4625 18.0471 3.69561 18.2446L4.92129 19.3231ZM5.49277 17.9863L4.68066 17.166V9.34266C2.95869 8.9629 1.73301 7.4438 1.73301 5.62847C1.73301 3.53972 3.40986 1.84592 5.49277 1.84592C7.57569 1.84592 9.24502 3.53212 9.24502 5.62847C9.24502 7.42101 8.01181 8.96289 6.13194 9.38824V11.0289L7.57569 12.4872L6.03418 14.0214V15.3887L7.04931 16.3989L5.49277 17.9863ZM5.49277 5.67405C6.23721 5.67405 6.83877 5.06641 6.83877 4.32205C6.83877 3.5777 6.23721 2.97005 5.49277 2.97005C4.74834 2.97005 4.1543 3.5701 4.1543 4.32205C4.1543 5.06641 4.75586 5.67405 5.49277 5.67405Z"})})}}]);