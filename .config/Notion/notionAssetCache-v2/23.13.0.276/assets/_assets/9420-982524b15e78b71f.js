"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[9420],{718250:(e,t,o)=>{o.d(t,{K:()=>r,O:()=>i});var n=o(745483);function i(e){n.Z.state.openModals.has(e)||(n.Z.state.openModals.add(e),n.Z.emit())}function r(e){n.Z.state.openModals.has(e)&&(n.Z.state.openModals.delete(e),n.Z.emit())}},381726:(e,t,o)=>{o.d(t,{H2:()=>R,Hm:()=>I,Hz:()=>Z,K8:()=>F,RO:()=>V,WH:()=>P,gp:()=>D,gu:()=>B,sP:()=>O,vz:()=>L});o(21703),o(667294);var n=o(541432),i=o(399036),r=o(340304),s=o(15167),l=o(421202),a=o(213493),c=o(714429),d=o(611318),u=o(76233),p=o(709291),m=o(307032),g=o(108406),S=o(805149),f=o(496802),h=o(709953),y=o(210228),x=o(710274),v=o(552275),C=o(974420),w=o(95477),b=o(741195),k=o(433929),M=o(978201),j=o(282356),_=o(785893);const T=(0,p.defineMessages)({responsesViewName:{id:"formEditorActions.responsesViewName",defaultMessage:"Responses"},newFormViewName:{id:"formEditorActions.newFormViewName",defaultMessage:"New form"}});function I(e){const{questionStore:t,newName:o,environment:n}=e;y.createAndCommit({userAction:"formQuestion.changeName",environment:n,perform:e=>{y.applyOperation({store:t,operation:{pointer:t.pointer,path:["config","name"],command:"set",args:[[o]]},transaction:e})}})}function V(e){const{questionStore:t,newDescription:o,environment:n}=e;y.createAndCommit({userAction:"formQuestion.changeDescription",environment:n,perform:e=>{y.applyOperation({store:t,operation:{pointer:t.pointer,path:["config","description"],command:"set",args:void 0!==o?[[o]]:void 0},transaction:e})}})}function F(e){var t;const{questionStore:o,environment:n,autofocusedQuestionDescriptionStore:i}=e;void 0===(null===(t=o.getConfig())||void 0===t?void 0:t.description)&&V({environment:n,questionStore:o,newDescription:""}),i.autofocusQuestionDescription({questionId:o.id})}function B(e){const{environment:t,collectionViewBlockStore:o,transaction:n,schema:r}=e;if(!o)return;const u=o.getSpaceId(),{formBlockStore:p}=function(e){var t;const{environment:o,spaceId:n,inMemoryRecordCache:r,transaction:a,schema:u}=e,p=(0,b.TS)({environment:o,table:l.iU,spaceId:n}),m=(0,b.TS)({environment:o,table:c.L_,spaceId:n}),g=h.j4({id:p,environment:o,type:"form",permissions:[{type:"space_permission",role:"reader",unlisted_timestamp:Date.now()}],inMemoryRecordCache:r,transaction:a,useCrdt:!1}),S=h.ae({environment:o,table:d.Bh,value:{space_id:n,parent_table:l.iU,parent_id:g.id,modules:(0,s.l2)(m)},inMemoryRecordCache:r,transaction:a});return f.FH({stores:[g],update:{form_layout_pointer:{id:S.id,spaceId:n,table:d.Bh}},transaction:a}),A({environment:o,questionId:m,spaceId:n,layoutId:S.id,propertyId:i.iw,initialQuestionTitle:(null===(t=u[i.iw])||void 0===t?void 0:t.name)??"",inMemoryRecordCache:r,transaction:a}),{formBlockStore:g}}({environment:t,spaceId:u,inMemoryRecordCache:o.inMemoryRecordCache,transaction:n,schema:r}),m=(0,x.W9)({environment:t,collectionViewBlockStore:o,collectionView:{type:"form_editor",parent_id:o.id,parent_table:l.iU,alive:!0,space_id:u,name:k.default.formatMessage(T.newFormViewName),format:{form_block_pointer:{id:p.id,spaceId:u,table:l.iU}}},transaction:n});return h.sW({store:p,data:{parent_id:m.id,parent_table:a.np,alive:!0},transaction:n}),{newViewId:m.id}}function R(e){const{environment:t,collectionViewBlockStore:o,transaction:n}=e,i=o.getSpaceId(),r=Object.keys(e.schema).find((t=>{var o;return"created_by"===(null===(o=e.schema[t])||void 0===o?void 0:o.type)}));(0,x.W9)({environment:t,collectionViewBlockStore:o,collectionView:{type:"table",parent_id:o.id,parent_table:l.iU,alive:!0,name:k.default.formatMessage(T.responsesViewName),space_id:i,format:{table_properties:[{property:"title",visible:!0},...r?[{property:r,visible:!0}]:[]],table_wrap:!0,collection_pointer:o.getCollectionPointer()}},transaction:n})}function P(e){let{environment:t,moduleId:o,sessionId:n,layoutStore:i,collectionSettingsStore:r}=e;(0,M.H)({environment:t,position:{area:"form_layout_schema",moduleId:o},layoutStore:i,sessionId:n}),S.E3({collectionSettingsStore:r})}function A(e){const{environment:t,questionId:o,spaceId:n,layoutId:i,propertyId:r,initialQuestionTitle:s,inMemoryRecordCache:l,transaction:a}=e;h.ae({environment:t,table:c.L_,value:{id:o,space_id:n,parent_table:d.Bh,parent_id:i,alive:!0,config:{propertyId:r,name:[[s]]}},inMemoryRecordCache:l,transaction:a})}function Z(e){const{environment:t,transaction:o,layoutStore:n,collectionStore:i,propertyId:r,moduleId:s}=e,l=n.getModel();if(!l)throw new Error("Layout model cannot be undefined");const a=i.getSchema()[r];if(!a)throw new Error(`No schema found for property ${r}`);const d=a.name,u=n.getSpaceId(),p=(0,b.TS)({environment:t,table:c.L_,spaceId:u});A({environment:t,questionId:p,spaceId:u,layoutId:l.id,propertyId:r,initialQuestionTitle:d,inMemoryRecordCache:n.inMemoryRecordCache,transaction:o});const m=l.updatePageModuleWithId({area:"form_layout_schema",moduleId:s,fn:e=>({id:s,type:"formQuestion",formQuestionId:p})});return(0,j.JH)({transaction:o,rawModules:m,layoutStore:n,area:"form_layout_schema"}),{questionId:p}}function L(e){const{environment:t,collectionStore:o,temporaryRecordCache:i}=e,r=o.getSchema(),s={};Object.keys(r).forEach((e=>{s[e]=(0,u.TPx)("")}));const{performResult:l}=y.createAndCommit({environment:t,userAction:"formActions.createDummyFormPage",perform:e=>h.j4({environment:t,type:n.Ti.page,inMemoryRecordCache:i,transaction:e,spaceId:o.getSpaceId(),properties:{...s},useCrdt:!1})});return l}function D(e){let{environment:t,collectionContextStore:o}=e;const n=o.settingsStore;return{key:"formViewItem",render:e=>(0,_.jsx)(v.Z,{title:(0,_.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,_.jsx)(p.FormattedMessage,{defaultMessage:"Form",id:"CollectionViewTabBar.newFormItem.title"}),(0,_.jsx)(C.Z,{})]}),icon:(0,r.w)({width:16}),shouldWrapCaption:!0,caption:(0,_.jsx)(p.FormattedMessage,{defaultMessage:"Create a form to help people fill out properties correctly",id:"CollectionViewTabBar.newFormItem.description"}),...e}),action:()=>{y.createAndCommit({userAction:"CollectionViewTabBar.createFormEditorView",environment:t,perform:e=>{const n=o.collectionViewBlockStore();if(!n)return;const i=B({environment:t,collectionViewBlockStore:n,schema:o.normalizedSchemaStore.state,transaction:e});i&&(0,x.f8)({environment:t,collectionContextStore:o,collectionViewId:i.newViewId,isFullScreen:o.isFullScreenStore.state,isRootChild:o.isRootChildStore.state,isInPeekRenderer:o.isInPeekRendererStore.state})}}),S.r$({collectionContextStore:o,collectionSettingsStore:n}),g.xb({environment:t,collectionContextStore:o,view_type:"form_editor"})}}}function O(e){let t=`${w.default.domainBaseUrl}/form/`;return t+=`${m.cj(e)}`,t}},134464:(e,t,o)=>{o.d(t,{V:()=>$,m:()=>W});o(757658);var n=o(667294),i=o(701302),r=o(800480),s=o(476487),l=o(886628),a=o(724405),c=o(107289),d=o(164945),u=o(559054),p=o(356666),m=o(747453),g=o(606287),S=o(76233),f=o(709291),h=o(653965),y=o(108406),x=o(805149),v=o(496802),C=o(709953),w=o(137231),b=o(210228),k=o(710274),M=o(73657),j=o(552275),_=o(268894),T=o(632163),I=o(511470),V=o(672495),F=o(623879),B=o(433929),R=o(889014),P=o(675822),A=o(229798),Z=o(206258),L=o(543696),D=o(497372),O=o(694166),N=o(332628),K=o(131003),E=o(785893);function W(e){const{collectionSettingsStore:t,collectionContextStore:o}=e,c=(0,r.O7)(),[d,u,p,g]=(0,l.VK)((()=>[o.collectionViewBlockStore(),o.collectionViewStore(),o.collectionStore(),o.getCollectionViewBlockSourceState()]),[o]),[f,h]=(0,n.useState)(void 0),[M,j]=(0,n.useState)(void 0),[[_,T],I]=(0,n.useState)([void 0,void 0]),V=(0,n.useMemo)((()=>f?F.Bh[f].toLocaleLowerCase():B.default.formatMessage(G.database).toString().toLocaleLowerCase()),[f]),[P,A]=(0,n.useState)(""),Z=(0,l.VK)((()=>p&&o.hasSingleCollection()),[o,p]),[L,K]=(0,n.useState)("boot");(0,n.useEffect)((()=>{if("boot"===L&&u){var e,t,n;const r=null==u?void 0:u.id,s=r?null===(e=(0,R.x)(r))||void 0===e?void 0:e.viewType:void 0;h(s??(null==u?void 0:u.getType()));const l=null===(t=o.collectionViewBlockStore())||void 0===t?void 0:t.getTitleValue();var i;if(null!=l&&null!==(n=l[0])&&void 0!==n&&null!==(n=n[0])&&void 0!==n&&n.length)j(null===(i=o.collectionViewBlockStore())||void 0===i?void 0:i.getTitleValue());K("initializing")}}),[o,u,L]);const W=(0,n.useCallback)((e=>{const t=o.collectionViewStore(),n=o.collectionViewBlockStore();if(!t||!n)return;let i;M?i=M:null!=e&&e.length&&(i=(0,S.TPx)(e)),function(e){const{environment:t,collectionName:o,collectionContextStore:n,collectionViewBlockStore:i,collectionViewStore:r,baseViewType:s,createdCollectionRecordPointerMap:l,setCreatedCollection:a}=e,c=r,d=i;y.wd({environment:t,collectionContextStore:n,action:"select_new_collection"}),b.createAndCommit({userAction:"CollectionSettingsCreateViewSourceNew.handleCreateDB",environment:t,perform:e=>{C.sW({store:c,data:{name:s?F.Bh[s]:void 0,format:void 0,query2:void 0,type:s??"table"},transaction:e});const i=(0,k.TM)({environment:t,collectionViewStore:c,collectionViewBlockStore:d,name:o,transaction:e,targetCollectionRecordPointerMap:l}),r=d.getCollectionViewSourceCollectionStore();n.setContext({type:"collectionView",collectionViewBlockStore:d,collectionStore:r,collectionViewStore:c,pageVisitSourceOverride:void 0}),a([r,i])}})}({environment:c,baseViewType:f,collectionName:i,collectionContextStore:o,collectionViewBlockStore:n,collectionViewStore:t,createdCollectionRecordPointerMap:T,setCreatedCollection:I})}),[o,c,f,M,T]);(0,n.useEffect)((()=>{if("initializing"===L){const e=(null==d?void 0:d.getCollectionViewStores().length)||0;"source"===g?K("initialized_source"):"chart"===f||"linked"===g&&e>1||o.isEditableHomeCollectionStore.state?K("initialized_linked"):(W(),K("initialized"))}}),[f,o,d,W,Z,L,g]);const H=(0,s.Z)(),U=(0,a.yK)((e=>({newItemIconStyle:{color:e.mediumIconColor,marginTop:2},newItemRightStyle:{alignItems:"top"}})),[]),z=(0,n.useCallback)((e=>{b.createAndCommit({userAction:"CollectionSettingsCreateViewSource.handleSourcePickerAccept",environment:c,perform:n=>{var i;const r=o.collectionViewStore(),s=o.collectionViewBlockStore();if(!r||!s)return;const l=null==s||null===(i=s.getTitleStore())||void 0===i?void 0:i.getValue();(0,k.yc)({environment:c,collectionContextStore:o,collectionStore:e,transaction:n}),_&&C.sW({store:_,data:{alive:!1},transaction:n}),C.sW({store:s,data:{collection_id:null},transaction:n}),o.isInHomeWidgetStore.state&&x.E3({collectionSettingsStore:t});const a=s.getBlockTitleStore();a&&l&&w.sO({environment:c,store:a,value:l,transaction:n}),v.FH({stores:[s],update:{collection_pointer:null},transaction:n})}}),$({environment:c,collectionStore:e,collectionContextStore:o,collectionSettingsStore:t})}),[o,t,_,c]),Q=(0,l.VK)((()=>{if("initialized"===L)return{key:"newButton",render:e=>(0,E.jsx)(O.Z,{...e,icon:m.R,iconStyle:U.newItemIconStyle,rightStyle:U.newItemRightStyle,title:B.default.formatMessage(G.newViewType,{viewType:V}),caption:B.default.formatMessage(G.startBlankDatabase)}),action:()=>{var e;if("linked"===g)W(P);else if(P&&!M){const e=null==d?void 0:d.getTitleStore();e&&b.createAndCommit({userAction:"CollectionSettingsCreateViewSource.setTitleAfterNewInput",environment:c,perform:t=>{w.sO({environment:c,store:e,value:[[P]],transaction:t})}})}x.E3({collectionSettingsStore:t}),"collection_view_page"!==(null===(e=o.collectionViewBlockStore())||void 0===e?void 0:e.getType())||0!==P.length||M||i.default.afterNextFlush((()=>{(0,k.W1)({environment:c,collectionContextStore:o})}))}}}),[V,o,t,d,W,c,P,M,L,g,U.newItemIconStyle,U.newItemRightStyle]),Y=(0,l.VK)((()=>t.state.hideSettingsHeader),[t]);return(0,E.jsx)(D.ZP,{...e,title:B.default.formatMessage(G.newView),children:d&&(0,E.jsx)(q,{collectionContextStore:o,parentStore:d,onAccept:z,context:N.S7.Source,input:P,setInput:A,searchSessionId:H,newButtonMenuItem:Q,createdCollectionId:null==_?void 0:_.id,hideSearchTitle:Y})})}const H=5,U=20,z=20;function q(e){let{collectionContextStore:t,context:o,parentStore:i,onAccept:s,searchSessionId:c,input:d,setInput:m,newButtonMenuItem:S,createdCollectionId:f,hideSearchTitle:x}=e;const v=(0,r.O7)(),C=(0,l.qz)(void 0,A.Z),[w,b]=(0,n.useState)(H),k=(0,a.yK)((e=>({showMoreButton:{color:e.mediumTextColor,fill:e.mediumIconColor}})),[]),F=(0,n.useCallback)((e=>{const{collectionStore:n,totalResults:i,clickedIndex:r}=e;t&&y.wd({environment:v,collectionContextStore:t,action:"select_existing_collection"}),s(n),y.tW({environment:v,eventName:"select_search_item",totalResults:i,clickedIndex:r,sessionId:c,source:o,queryLength:d.length})}),[t,o,v,d.length,s,c]),[R]=(0,u.r5)((async()=>await(0,N.sW)({query:d,limit:w},i,v,c,t)),[d,w,t,v,i,c],{debounce:P.vp}),L=(0,l.VK)((()=>{var e;if("pending"===R.status&&!Boolean(null==R||null===(e=R.value)||void 0===e?void 0:e.results.length))return[{key:"loading",render:e=>(0,E.jsx)("div",{style:{paddingTop:v.device.isMobile?10:0},children:(0,E.jsx)(K.a,{})}),action:()=>{}}];if("rejected"===R.status)return[];const{results:t,showMore:o}=R.value??{results:[],showMore:0},n=t.filter((e=>e!==f)).map((e=>{const o=Z.NW.createChildStore(i,{table:g.vF,id:e});return{key:e,render:e=>(0,E.jsx)(I.Z,{...e,store:o}),action:e=>{const{index:n}=e;F({collectionStore:o,totalResults:t.length,clickedIndex:n})}}}));if(o>0){const e={key:"showMore",render:e=>(0,E.jsx)(j.Z,{...e,buttonStyle:k.showMoreButton,icon:(0,p.o)({width:16,height:16}),title:B.default.formatMessage(G.showMore,{showMore:o})}),action:()=>{b(w+z)}};n.push(e)}return t.length>0?n:[{key:"noResults",render:e=>(0,E.jsx)(M.Z,{caption:B.default.formatMessage(G.noResults),style:{marginLeft:1},...e}),action:()=>{}}]}),[f,F,w,i,R.status,R.value,k.showMoreButton,v.device.isMobile]),D=(0,n.useMemo)((()=>({key:"results",items:L,render:e=>(0,E.jsx)(V.Z,{title:!x&&B.default.formatMessage(G.linkExisting),...e})})),[x,L]),O=(0,n.useMemo)((()=>d.length>0),[d]),W=(0,n.useMemo)((()=>{if(S)return{key:"newButton",render:e=>(0,E.jsx)(V.Z,{topBorder:O,...e}),items:[S]}}),[S,O]),q=(0,n.useMemo)((()=>(0,h.oA)([d?void 0:W,D,d?W:void 0])),[d,W,D]),$=(0,l.VK)((()=>void 0!==S?G.linkOrCreate:null!=t&&t.isInHomeWidgetStore.state?G.search:G.link),[t,S]);return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(V.Z,{shouldShowBottomDivider:!1,children:(0,E.jsx)(_.ZP,{value:d,onChange:e=>{m(e.target.value),b(e.target.value?U:H),C.setState({focus:{section:0,indexLocal:0,indexGlobal:0}})},focusInitial:!0,placeholder:B.default.formatMessage($),showClearButton:!0})}),(0,E.jsx)(T.Z,{type:T.i.Vertical,initialFocus:void 0,sections:q})]})}const G=(0,f.defineMessages)({newViewType:{defaultMessage:"New {viewType}",id:"database.viewSettings.createView.newViewType"},newView:{defaultMessage:"New view",id:"database.viewSettings.createViewTab.newView"},database:{defaultMessage:"Database",id:"database.viewSettings.createViewTab.view"},link:{defaultMessage:"Link...",id:"database.viewSettings.searchCollections.link"},search:{defaultMessage:"Search...",id:"database.viewSettings.searchCollections.search"},linkOrCreate:{defaultMessage:"Link or create...",id:"database.viewSettings.searchCollections.linkedOrCreate"},linkExisting:{defaultMessage:"Link existing database",id:"database.viewSettings.createViewTab.linkExisting"},startBlankDatabase:{defaultMessage:"Start a blank database",id:"database.viewSettings.createViewTab.startBlankDatabase"},showMore:{defaultMessage:"Show {showMore} more",id:"database.viewSettings.searchCollections.showMore.title"},showMoreWithoutCount:{defaultMessage:"Show more",id:"database.viewSettings.searchCollections.showMore.titleWithoutCount"},noResults:{defaultMessage:"No results",id:"database.viewSettings.searchCollections.noResultsTitle"}});async function $(e){var t;const{environment:o,collectionStore:n,collectionContextStore:i,collectionSettingsStore:r}=e,s=i.collectionViewBlockStore(),l=i.collectionViewStore(),a=n.getParentBlockStore();if(!s||!a||!l)return;const u=null===(t=n.getModel())||void 0===t?void 0:t.getNormalizedSchema();if("chart"===l.getType()&&u){const e=l.getFormat(),t=e.chart_config;if("placeholder"!==(null==t?void 0:t.type))return;let n;return(0,d.F)(t.placeHolderType)?n=(0,c.K0)({collectionSchema:u,axisChartType:t.placeHolderType}):"donut"===t.placeHolderType&&(n=(0,c.dq)({collectionSchema:u})),b.createAndCommit({userAction:"slashMenu.create.barChartView",environment:o,perform:t=>{C.sW({store:l.getFormatStore(),transaction:t,data:{...e,hide_linked_collection_name:!0,subitem_display_mode:"flattened",chart_config:n||null}})}}),void r.setState({open:!0,stack:[{type:"main"}]})}await Promise.all([...a.getCollectionViewStores().map((e=>e.load())),...s.getCollectionViewStores().map((e=>e.load()))]);(0,L.gL)({collectionStore:n,sourceCollectionViewBlockStore:a,currentCollectionViewBlockStore:s,currentCollectionViewStore:l,constraints:(0,R.x)(l.id)}).length>0?x.H4({collectionSettingsStore:r,item:{type:"duplicateExistingView"}}):x.H4({collectionSettingsStore:r,item:{type:"createView"}})}},543696:(e,t,o)=>{o.d(t,{Vz:()=>R,ZP:()=>A,gL:()=>P});o(757658),o(667294);var n=o(883355),i=o(126263),r=o(749085),s=o(356666),l=o(747453),a=o(709291),c=o(653965),d=o(108406),u=o(805149),p=o(709953),m=o(210228),g=o(710274),S=o(820616),f=o(668155),h=o(110906),y=o(73657),x=o(552275),v=o(268894),C=o(632163),w=o(672495),b=o(623879),k=o(433929),M=o(889014),j=o(229798),_=o(206258),T=o(497372),I=o(694166),V=o(785893);const F=(0,a.defineMessages)({inputPlaceholder:{defaultMessage:"Search for a view…",id:"database.viewSettings.duplicateExistingViewTab.inputPlaceholder"}});class B extends n.Z{constructor(){super(...arguments),this.temporaryRecordCache=new i.Z({name:"CollectionSettingsDuplicateExistingView"}),this.lastDuplicatedViewId=void 0,this.originalCollectionPointer=void 0,this.didAccept=!1,this.wentBack=!1,this.initialViewType=void 0,this.preselectedViewPointer=void 0,this.storeTypes={inputStore:r.default.createClass("",{name:"inputStore"}),menuListStore:j.Z,limitStore:r.default.createClass(!0,{name:"limitStore"})},this.handlePreviewCollectionView=e=>{e?this.duplicateViewSettings(e,!0):(this.lastDuplicatedViewId=void 0,this.temporaryRecordCache.clearCache())},this.handlePreviewCollectionViewDebounced=c.Ds(this.handlePreviewCollectionView,500),this.handleMenuListStoreChange=()=>{const e=this.stores.menuListStore.state,{device:t}=this.environment;if(void 0===e.focus.indexLocal||t.isMobile)return;const o=this.stores.inputStore.state.length>0;if(!o&&0===e.focus.section||o&&1===e.focus.section)return void this.handlePreviewCollectionViewDebounced(void 0);const n=Z(this.props.collectionContextStore,this.stores.inputStore,this.stores.limitStore).viewStores[e.focus.indexLocal];n&&this.handlePreviewCollectionViewDebounced(n)},this.handleDuplicateViewAccept=e=>{const{collectionSettingsStore:t,collectionContextStore:o}=this.props;this.environment.defaultRecordCache.inMemoryRecordCache.removeCacheOverride(this.temporaryRecordCache),d.wd({environment:this.environment,collectionContextStore:o,action:"click_duplicate_view"}),this.duplicateViewSettings(e,!1),u.wl({collectionSettingsStore:t,item:{type:"main",selectViewNameInitial:!0}}),this.didAccept=!0},this.handleNewEmptyViewClick=()=>{const{collectionSettingsStore:e,collectionContextStore:t}=this.props;d.wd({environment:this.environment,collectionContextStore:t,action:"click_new_empty_view"}),u.E3({collectionSettingsStore:e}),u.H4({collectionSettingsStore:e,item:{type:"createView"}}),this.didAccept=!0}}UNSAFE_willMount(e){const{collectionContextStore:t}=e,o=t.collectionStore(),n=t.collectionViewStore();if(!n)return;const i=(0,M.x)(n.id);this.preselectedViewPointer=null==i?void 0:i.viewPointer,this.originalCollectionPointer=null==o?void 0:o.pointer,this.environment.defaultRecordCache.inMemoryRecordCache.addCacheOverride(this.temporaryRecordCache),this.stores.menuListStore.addListener(this.handleMenuListStoreChange),this.initialViewType=n.getType()}willUnmount(){if(this.environment.defaultRecordCache.inMemoryRecordCache.removeCacheOverride(this.temporaryRecordCache),this.stores.menuListStore.removeListener(this.handleMenuListStoreChange),!this.didAccept&&!this.wentBack){const{viewStores:e}=Z(this.props.collectionContextStore,this.stores.inputStore,this.stores.limitStore),t=e.find((e=>e.id===this.lastDuplicatedViewId));if(!t)return;this.duplicateViewSettings(t,!1)}}renderComponent(){var e;const{inputStore:t,menuListStore:o,limitStore:n}=this.stores,{device:i}=this.environment,r=t.state,{viewStores:d,showMore:p}=Z(this.props.collectionContextStore,this.stores.inputStore,this.stores.limitStore),m=this.initialViewType?b.Bh[this.initialViewType].toLocaleLowerCase():void 0,g=m?(0,V.jsx)(a.FormattedMessage,{defaultMessage:"New {viewType} view",id:"database.viewSettings.createViewTab.newView1",values:{viewType:m}}):(0,V.jsx)(a.FormattedMessage,{defaultMessage:"New view",id:"database.viewSettings.createViewTab.newView2"}),h={key:"emptyViewSection",items:[{key:"emptyViewMenuItem",render:e=>(0,V.jsx)(I.Z,{...e,icon:l.R,iconStyle:{color:this.theme.mediumIconColor},title:g}),action:this.handleNewEmptyViewClick}],render:e=>(0,V.jsx)(w.Z,{topBorder:r.length>0,...e})},M=c.oA(d.map((e=>{const t=e.getType(),o=e.getFormat().collection_view_icon;if(!t||"page"===t)return;const n=e.getName(),i=e.id;return{key:i,render:e=>{var r;return(0,V.jsx)(x.Z,{...e,title:(0,V.jsx)(f.Z,{collectionViewType:t,collectionViewName:n}),icon:(0,V.jsx)(S.F,{color:"regular",viewIcon:o,viewType:t,style:{marginRight:4,marginLeft:2}}),checkState:(null===(r=this.preselectedViewPointer)||void 0===r?void 0:r.id)===i})},action:()=>{this.handleDuplicateViewAccept(e)}}})));if(p>0){const e={key:"showMore",render:e=>(0,V.jsx)(x.Z,{...e,icon:(0,s.o)({width:16,height:16,color:this.theme.mediumTextColor}),style:{color:this.theme.mediumTextColor},title:(0,V.jsx)(a.FormattedMessage,{defaultMessage:"Show {showMore} more",id:"database.viewSettings.duplicateExistingViewTab.showMore.title",values:{showMore:p}})}),action:()=>{n.setState(!1)}};M.push(e)}const j=(0,V.jsx)(a.FormattedMessage,{defaultMessage:"New view",id:"database.viewSettings.createViewTab.newView"}),_=null===(e=this.props.collectionContextStore.collectionStore())||void 0===e?void 0:e.getName();return(0,V.jsxs)(T.ZP,{...this.props,title:j,handleBackArrowClick:()=>{this.wentBack=!0,u.z$({collectionSettingsStore:this.props.collectionSettingsStore})},children:[(p>0||r)&&(0,V.jsx)(w.Z,{children:(0,V.jsx)(v.ZP,{focusInitial:!i.isMobile||void 0,value:r,onChange:e=>{t.setState(e.target.value),o.setState({focus:{section:0,indexLocal:0,indexGlobal:0}}),n.setState(!0)},placeholder:k.default.formatMessage(F.inputPlaceholder),showClearButton:!0})}),(0,V.jsx)(C.Z,{type:C.i.Vertical,initialFocus:0,sections:c.oA([r.length?void 0:h,{key:"results",render:e=>0===M.length?(0,V.jsx)(y.Z,{caption:(0,V.jsx)(a.FormattedMessage,{defaultMessage:"No results",id:"database.viewSettings.duplicateExistingViewTab.noResultsTitle"})}):(0,V.jsx)(w.Z,{title:_?(0,V.jsx)(a.FormattedMessage,{defaultMessage:"Views on {collectionName}",id:"database.viewSettings.duplicateExistingViewTab.viewsTitle",values:{collectionName:_}}):(0,V.jsx)(a.FormattedMessage,{defaultMessage:"Existing views",id:"database.viewSettings.duplicateExistingViewTab.viewsTitleExistingViews"}),...e}),items:M},r.length?h:void 0]),store:o})]})}duplicateViewSettings(e,t){if(e.id===this.lastDuplicatedViewId&&t)return;this.lastDuplicatedViewId=e.id;const{collectionContextStore:o}=this.props,n=o.collectionViewStore();if(!n)return;let i=n;t&&(i=n.clone(this.temporaryRecordCache)),R({viewToDuplicateStore:e,collectionContextStore:o,collectionViewStore:n,environment:this.environment,temporaryStore:i})}}function R(e){const{viewToDuplicateStore:t,collectionContextStore:o,collectionViewStore:n,environment:i,temporaryStore:r}=e,s=o.collectionStore(),l=t.getType();if(!l||!s)return;const a=t.getName(),c=t.getPageSort(),d=t.getFormat(),u=t.getKeyStore("query2").getValue();m.createAndCommit({userAction:"CollectionSettingsDuplicateExistingView.duplicateViewSettings",environment:i,perform:e=>{p.sW({store:r??n,data:{name:a,type:l,page_sort:c,format:{...d,collection_pointer:s.pointer},query2:u},transaction:e})}}),g.Ip({collectionContextStore:o})}function P(e){const{collectionStore:t,sourceCollectionViewBlockStore:o,currentCollectionViewBlockStore:n,currentCollectionViewStore:i,constraints:r}=e;let s=c.mN([...n.getCollectionViewStores(),...o.getCollectionViewStores()],(e=>e.id)).filter((e=>{var o;return(null===(o=e.getCollectionStore())||void 0===o?void 0:o.id)===t.id&&e.id!==i.id&&"page"!==e.getType()}));if(null!=r&&r.viewType&&(s=[...s.filter((e=>e.getType()===r.viewType)),...s.filter((e=>e.getType()!==r.viewType))]),null!=r&&r.viewPointer){const{id:e}=r.viewPointer,t=s.find((t=>t.pointer.id===e))||_.Xr.createChildStore(o,r.viewPointer);s=[t,...s.filter((t=>t.pointer.id!==e))]}return s}B.displayName="CollectionSettingsDuplicateExistingView";const A=(0,a.injectIntl)(B);function Z(e,t,o){const n=e.collectionViewBlockStore(),i=e.collectionStore(),r=e.collectionViewStore();if(!n||!i||!r)return{viewStores:[],showMore:0};const s=t.state,l=i.getParentBlockStore();if(!n||!l)return{viewStores:[],showMore:0};let a=P({collectionStore:i,sourceCollectionViewBlockStore:l,currentCollectionViewBlockStore:n,currentCollectionViewStore:r,constraints:(0,M.x)(r.id)}),c=0;return s?a=a.filter((e=>(0,h.D)(e,s))):o.state&&(c=a.length-7,a=a.slice(0,7)),{viewStores:a,showMore:c}}},171214:(e,t,o)=>{o.d(t,{I:()=>g});var n=o(667294),i=o(800480),r=o(886628),s=o(749085),l=o(540107),a=o(627153),c=o(268894),d=o(702520),u=o(433929),p=o(785893);const m=s.default.createClass("",{name:"InputStore"}),g=n.forwardRef((function(e,t){const{placeholder:o,focusInitial:s,selectAll:g,disabled:S,inputOuterStyle:f,iconButton:h,inputRightButton:y,initialValue:x,onBlur:v,onSubmit:C,onChange:w}=e,b=(0,i.O7)(),[k,M]=(0,n.useState)(x||""),j=(0,r.qz)(e.inputStore,m),_=(0,r.VK)((()=>j.state),[j])||k,T=(0,n.useCallback)((()=>{v(_)}),[_,v]),I=(0,n.useCallback)((()=>{C(_)}),[_,C]),V=(0,n.useCallback)((e=>{const t=e.target.value;M(t),j&&j.setState(t),w&&w(t)}),[j,w]),F=(0,l.S)();return(0,n.useEffect)((()=>{e.inputStore&&j.setState(x)}),[]),(0,n.useEffect)((()=>()=>{F()&&x!==_&&v(_)}),[x,_,F,v]),(0,p.jsx)(c.ZP,{ref:t,focusInitial:s,selectAll:g,value:_,onChange:V,onBlur:T,onSubmit:I,placeholder:o,disabled:S,textWrapperStyle:{opacity:S?.4:void 0},inputOuterStyle:f,left:h&&(0,p.jsx)(c.DO,{icon:h.icon,iconStyle:h.iconStyle,onClick:e=>function(e,t,o){if(!(o&&e.target instanceof Element))return;const n=u.default.getIntl(),{onSubmit:i,enforceIconColor:r,includeEmojiTab:s}=o;a.$(t,{originRect:e.target.getBoundingClientRect(),originGap:3,popupHeight:d.DQ,popupWidth:d.rw,showArrow:!0,title:n.formatMessage({defaultMessage:"Icon",id:"mediaPicker.tabs.icon"}),currentTab:"icon",tabs:s?[{type:"emoji",onChange:(e,t)=>{i(e),t&&t.keepVisible||a.Z()}},{type:"icon",enforceIconColor:r,onChange:(e,t)=>{i(e),t&&t.keepVisible||a.Z()}}]:[{type:"icon",enforceIconColor:r,onChange:(e,t)=>{i(e),t&&t.keepVisible||a.Z()}}],onDelete:()=>{i(),a.Z()}})}(e,b,h),disabled:S,style:{opacity:S?.4:void 0}}),showClearButton:!1,inputRight:y})}))},23159:(e,t,o)=>{o.d(t,{Z:()=>l});o(667294);var n=o(709291),i=o(531701),r=o(164369),s=o(785893);function l(e){return(0,s.jsx)(r.Z,{isMultiline:!0,style:{paddingTop:8,marginLeft:16,marginRight:16,color:i.ZP.red,...e.styles},children:(0,s.jsx)(n.FormattedMessage,{id:"database.viewSettings.propertyTab.duplicatePropertyNameError",defaultMessage:"A property named {propertyName} already exists in this database.",values:{propertyName:e.propertyName}})})}},627948:(e,t,o)=>{o.d(t,{Z:()=>n});const n=(0,o(709291).defineMessages)({inputPlaceholder:{defaultMessage:"Property name",id:"database.viewSettings.propertyTab.propertyName"},autofillOffLabel:{defaultMessage:"Off",id:"database.viewSettings.propertyTab.autofillOffLabel"},autofillOnLabel:{defaultMessage:"On",id:"database.viewSettings.propertyTab.autofillOnLabel"},keptUpToDateWithNotionAITooltip:{defaultMessage:"Auto-updated by AI",id:"database.tableHeaderCell.tooltipAiAutofillDescription"}})},85125:(e,t,o)=>{o.d(t,{P:()=>G,Z:()=>Q});var n=o(667294),i=o(800480),r=o(886628),s=o(724405),l=o(749085),a=o(849019),c=o(747453),d=o(151454),u=o(709291),p=o(653965),m=o(108406),g=o(234993),S=o(805149),f=o(524677),h=o(898104),y=o(413182),x=o(586650),v=o(623063),C=o(437601),w=o(279131),b=o(301743),k=o(374194),M=o(489728),j=o(953437),_=o(953336),T=o(709942),I=o(724098),V=o(397004),F=o(966603),B=o(613273),R=o(434859),P=o(61766),A=o(710274),Z=o(401456),L=o(152387),D=o(808298),O=o(222109),N=o(745238),K=o(785893);const E=(0,N.IU)("arrowUpThick",{viewBox:"0 0 16 16",svg:(0,K.jsx)("path",{d:"M7.99316 14.6133C8.58789 14.6133 8.98438 14.2031 8.98438 13.5879V6L8.92285 4.5166L10.2969 6.10254L11.835 7.63379C12.0195 7.81836 12.252 7.94141 12.5459 7.94141C13.0791 7.94141 13.4824 7.54492 13.4824 6.98438C13.4824 6.72461 13.3799 6.48535 13.1748 6.27344L8.72461 1.82324C8.54004 1.63184 8.2666 1.52246 7.99316 1.52246C7.72656 1.52246 7.44629 1.63184 7.26172 1.82324L2.81836 6.27344C2.61328 6.48535 2.51074 6.72461 2.51074 6.98438C2.51074 7.54492 2.91406 7.94141 3.44727 7.94141C3.74805 7.94141 3.98047 7.81836 4.1582 7.63379L5.69629 6.10254L7.07031 4.5166L7.00195 6V13.5879C7.00195 14.2031 7.40527 14.6133 7.99316 14.6133Z"})});var W=o(137810),H=o(223196),U=o(45257);function z(e){let{collectionContextStore:t,collectionSettingsStore:o}=e;const{device:s}=(0,i.O7)(),l=(0,r.VK)((()=>o.state.open),[o]),a=(0,n.useCallback)((e=>{e&&(0,B.yT)(e.target)||S.E3({collectionSettingsStore:o})}),[o]),c=(0,n.useCallback)((()=>(0,K.jsx)(y.PJ,{context:F.HV.FilterBar,collectionContextStore:t,collectionSettingsStore:o,hideDesktopHeader:!0})),[t,o]);return(0,n.useEffect)((()=>()=>S.E3({collectionSettingsStore:o})),[]),(0,K.jsx)(j.ZP,{popupType:s.isMobile?H.k.SlideUp:H.k.Popup,open:l,origin:(0,K.jsx)(q,{collectionContextStore:t,collectionSettingsStore:o}),onDismiss:a,disableMouseCapture:!0,enableOutsideClickDismiss:!0,originGap:4,render:c})}function q(e){let{collectionContextStore:t,collectionSettingsStore:o}=e;const l=(0,i.O7)(),[a,c,d,p]=(0,r.VK)((()=>[t.currentSortsStore.state,t.localStateDiffStore.state,t.normalizedSchemaStore.state,t.permissionScopesStore.state]),[t]),g=a[0],f=g?d[g.property]:void 0,h=(0,n.useCallback)((()=>{m.wd({environment:l,collectionContextStore:t,action:"click_sort"}),S.wl({collectionSettingsStore:o,item:{type:"sort"}})}),[t,o,l]),y=(0,s.yK)((e=>({arrowIcon:{width:12,marginRight:4,fill:e.blueColor},arrowsIcon:{width:16,marginRight:4,fill:e.blueColor},title:{marginTop:-1,maxWidth:220,...W.Z.textOverflowStyle}})),[]);let x;return x=1===a.length?g&&"descending"===g.direction?(0,D.N)(y.arrowIcon):E(y.arrowIcon):(0,O.T)(y.arrowsIcon),(0,K.jsx)(U.Z,{on:!0,hasDiff:Boolean(p.canConfigureBlock&&c.sorts),icon:x,title:(0,K.jsx)("span",{style:y.title,children:1===a.length&&f?f.name:(0,K.jsx)(u.FormattedMessage,{defaultMessage:"{sortCount} sorts",id:"database.filterBar.sorts.label",values:{sortCount:a.length}})}),onClick:h})}let G=function(e){return e[e.FilterBar=0]="FilterBar",e[e.SettingsFilters=1]="SettingsFilters",e}({});const $=l.default.createClass({open:!1,stack:[]},{name:"CreateFilterSettingsStore"});const Q=function(e){let{collectionContextStore:t,showHoverActionsStore:o,createFilterSettingsStore:n,saveControlMoreActionsButtonPopupStore:s}=e;const l=(0,i.MO)(),a=(0,r.qz)(s,P.Z),c=(0,r.qz)(n,$),u=(0,r.VK)((()=>(0,V.Nq)(t)),[t]),p=(0,r.VK)((()=>l&&t.searchOpenStore.state),[l,t]),m=(0,r.VK)((()=>t.currentPropertyFiltersStore.state),[t]),g=(0,r.VK)((()=>t.currentSortsStore.state),[t]),S=(0,r.VK)((()=>t.shouldShowSourceStore.state?8:12),[t]),f=(0,r.VK)((()=>t.filterBarSortSettingsStore.state.open),[t]),h=g.length>0||f,y=(0,r.VK)((()=>t.permissionScopesStore.state),[t]),x=(0,r.VK)((()=>y.canConfigureBlock?t.currentCombinatorFilterStore.state:void 0),[y,t]);return(0,K.jsxs)("div",{style:{width:"100%",zIndex:d._Y},onClick:e=>function(e,t){t.filtersBarOpenStore.setState(!0)}(0,t),children:[(0,K.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[p&&(0,K.jsx)(ne,{collectionContextStore:t}),!p&&(0,K.jsx)("div",{style:{position:"relative",flexGrow:0,overflow:"hidden"},children:(0,K.jsx)(_.Z,{type:R.Z.X,style:{display:"flex",alignItems:"center",paddingTop:S,paddingBottom:8},showLeftRightOverlay:!l,children:l?(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(ie,{collectionContextStore:t}),h&&(0,K.jsx)(X,{collectionContextStore:t}),h&&!l&&(0,K.jsx)(ee,{}),x&&(0,K.jsx)(Y,{collectionContextStore:t}),(0,K.jsx)(oe,{collectionContextStore:t,propertyFilters:m}),(0,K.jsx)(le,{collectionContextStore:t,showHoverActionsStore:o,createFilterSettingsStore:c})]}):(0,K.jsxs)(K.Fragment,{children:[h&&(0,K.jsx)(X,{collectionContextStore:t}),h&&!l&&(0,K.jsx)(ee,{}),x&&(0,K.jsx)(Y,{collectionContextStore:t}),(0,K.jsx)(oe,{collectionContextStore:t,propertyFilters:m}),(0,K.jsx)(le,{collectionContextStore:t,showHoverActionsStore:o,createFilterSettingsStore:c})]})})}),(0,K.jsxs)("div",{style:{display:"flex",alignItems:"center",marginLeft:"auto"},children:[!l&&u&&(0,K.jsx)(re,{collectionContextStore:t,showHoverActionsStore:o,saveControlMoreActionsButtonPopupStore:a}),!l&&(0,K.jsx)(T.Z,{collectionContextStore:t})]})]}),l&&!p&&(0,K.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[u&&(0,K.jsx)(re,{collectionContextStore:t,showHoverActionsStore:o,saveControlMoreActionsButtonPopupStore:a}),(0,K.jsx)(T.Z,{collectionContextStore:t})]})]})};function Y(e){let{collectionContextStore:t}=e;return(0,K.jsx)(Z.B,{context:G.FilterBar,collectionSettingsStore:t.filterBarCombinatorFilterSettingsStore,collectionContextStore:t})}function X(e){let{collectionContextStore:t}=e;return(0,K.jsx)(z,{collectionContextStore:t,collectionSettingsStore:t.filterBarSortSettingsStore},"sort")}function J(e){let{filter:t,collectionContextStore:o}=e;const n=(0,r.VK)((()=>o.getFilterBarItemSettingsStore(t)),[o,t]);return(0,K.jsx)(L.Z,{id:t.id,context:G.FilterBar,collectionContextStore:o,collectionSettingsStore:n},t.id)}function ee(){const e=(0,s.Fg)();return(0,K.jsx)("div",{style:{borderRight:`1px solid ${e.regularDividerColor}`,height:24,marginRight:12,marginLeft:8}})}function te(e){e.searchOpenStore.setState(!1),e.searchQueryStore.setState("")}function oe(e){let{propertyFilters:t,collectionContextStore:o}=e;const n=(0,i.O7)();if((0,r.VK)((()=>o.permissionScopesStore.state),[o]).canConfigureBlock){const e=t.map((e=>e.id));return(0,K.jsx)(w.ZP,{direction:"horizontal",keys:e,disableVerticalEdgeScroll:!0,disableHorizontalEdgeScroll:!0,renderKey:e=>{const n=t.find((t=>t.id===e));if(n)return(0,K.jsx)(J,{collectionContextStore:o,filter:n})},style:{display:"flex",flexShrink:0},onDrop:e=>function(e,t,o){if(!o.collectionViewBlockStore())return;const n=o.currentPropertyFiltersStore.state,i=p.oA(e.map((e=>n.find((t=>t.id===e)))));g.iU({environment:t,collectionContextStore:o,temporaryState:{...o.temporaryStateStore.state,propertyFilters:{value:i}}}),m.wd({environment:t,collectionContextStore:o,action:"reorder_filters"})}(e,n,o)})}return(0,K.jsx)(K.Fragment,{children:t.map((e=>(0,K.jsx)(J,{filter:e,collectionContextStore:o},e.id)))})}function ne(e){let{collectionContextStore:t}=e;const o=(0,u.useIntl)(),n=(0,s.Fg)(),l=(0,i.O7)(),c=(0,r.VK)((()=>t.searchQueryStore.state),[t]);return(0,K.jsx)(b.Z,{debugName:"CollectionViewFilterBar",capture:!0,children:(0,K.jsx)(I.Z,{capture:!0,render:e=>(0,K.jsx)("div",{...e,style:{width:"100%",paddingTop:l.device.isMobile?8:12,paddingBottom:6},children:(0,K.jsx)(U.Z,{wrapStyle:{width:"100%"},innerStyle:{width:"100%"},icon:(0,a.e)({width:14,fill:n.mediumIconColor,marginRight:6}),hideChevron:!0,title:(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(k.Z,{format:k.B.Transparent,value:c,placeholder:o.formatMessage({defaultMessage:"Type to search…",id:"database.filterBar.mobileSearch.placeholder"}),onChange:e=>function(e,t){t.searchQueryStore.setState(e.target.value)}(e,t),autoComplete:"on",autoCorrect:"on",onBlur:()=>function(e){e.searchQueryStore.state||te(e)}(t),onClearButtonClick:()=>te(t),showClearButton:!0,focus:!l.device.isIOS||void 0,focusInitial:!0,inputStyle:{height:"100%"}}),(0,K.jsx)(C.Z,{show:!0})]})})})})})}function ie(e){let{collectionContextStore:t}=e;const o=(0,s.Fg)(),n=(0,i.O7)();return(0,K.jsx)(U.Z,{wrapStyle:{display:"flex",alignItems:"center"},icon:(0,a.e)({width:14,fill:o.mediumIconColor,marginRight:6}),hideChevron:!0,title:(0,K.jsx)("span",{style:{marginTop:-1,color:o.mediumTextColor},children:(0,K.jsx)(u.FormattedMessage,{defaultMessage:"Search",id:"database.filterBar.search.title"})}),onClick:()=>function(e,t){h.ZH({debug:{userAction:"CollectionViewFilterBar.handleSearchClick"},environment:e}),f.ZH({debug:{userAction:"CollectionViewFilterBar.handleSearchClick"},environment:e}),A.wG(),t.searchOpenStore.setState(!0),t.searchQueryStore.setState(""),m.wd({environment:e,collectionContextStore:t,action:"click_mobile_search"})}(n,t)},"search")}function re(e){let{collectionContextStore:t,showHoverActionsStore:o,saveControlMoreActionsButtonPopupStore:n}=e;return(0,K.jsx)(x.ZP,{context:x.R1.FilterBar,collectionContextStore:t,showHoverActionsStore:o,moreActionsButtonPopupStore:n})}function se(e){let{collectionContextStore:t,createFilterSettingsStore:o}=e;return(0,K.jsx)(y.PJ,{context:F.HV.FilterBar,collectionContextStore:t,collectionSettingsStore:o,hideDesktopHeader:!0})}function le(e){let{collectionContextStore:t,showHoverActionsStore:o,createFilterSettingsStore:s}=e;const l=(0,i.O7)(),a=(0,n.useCallback)((e=>function(e,t){e&&(0,B.yT)(e.target)||S.E3({collectionSettingsStore:t})}(e,s)),[s]),d=(0,n.useCallback)((()=>(0,K.jsx)(se,{collectionContextStore:t,createFilterSettingsStore:s})),[t,s]),p=(0,n.useCallback)((()=>function(e,t,o){m.wd({environment:e,collectionContextStore:t,action:"click_new_filter"}),S.wl({collectionSettingsStore:o,item:{type:"createFilter"}})}(l,t,s)),[l,t,s]),g=(0,r.VK)((()=>s.state.open),[s]),f=(0,r.VK)((()=>o.state||g),[o,g]);return(0,K.jsx)(j.ZP,{open:g,popupType:l.device.isMobile?j.kQ.SlideUp:j.kQ.Popup,origin:(0,K.jsx)(v.Z,{isVisible:!0,animationStyle:{opacity:f?1:0},render:()=>(0,K.jsx)(M.Z,{icon:c.R,isSmall:!0,isLightGray:!0,hovered:g,onClick:p,style:{fontSize:14},children:(0,K.jsx)(u.FormattedMessage,{defaultMessage:"Add filter",id:"database.filterBar.addButton.title"})})}),render:d,disableMouseCapture:!0,enableOutsideClickDismiss:!0,originGap:4,onDismiss:a})}},401456:(e,t,o)=>{o.d(t,{B:()=>C});var n=o(667294),i=o(800480),r=o(886628),s=o(724405),l=o(821197),a=o(709291),c=o(137810),d=o(108406),u=o(234993),p=o(805149),m=o(413182),g=o(953437),S=o(966603),f=o(212534),h=o(613273),y=o(223196),x=o(45257),v=o(785893);function C(e){let{collectionContextStore:t,collectionSettingsStore:o}=e;const s=(0,i.O7)(),[l,a]=(0,r.VK)((()=>[o.state.open,t.currentCombinatorFilterStore.state]),[t,o]),c=(0,n.useCallback)((()=>(0,v.jsx)(m.PJ,{context:S.HV.FilterBar,collectionContextStore:t,collectionSettingsStore:o,hideDesktopHeader:!0})),[t,o]),d=(0,n.useCallback)((e=>{var n;e&&(0,h.yT)(e.target)||(p.E3({collectionSettingsStore:o}),a&&0===(null===(n=a.filters)||void 0===n?void 0:n.length)&&u.iU({environment:s,collectionContextStore:t,temporaryState:{...t.temporaryStateStore.state,combinatorFilter:{value:void 0}}}))}),[t,o,s,a]);return(0,n.useEffect)((()=>()=>p.E3({collectionSettingsStore:o})),[]),(0,v.jsx)(g.ZP,{popupType:s.device.isMobile?y.k.SlideUp:y.k.Popup,open:l,origin:(0,v.jsx)(w,{collectionContextStore:t,collectionSettingsStore:o}),onDismiss:d,disableMouseCapture:!0,enableOutsideClickDismiss:!0,originGap:4,render:c})}function w(e){var t;let{collectionContextStore:o,collectionSettingsStore:u}=e;const m=(0,i.O7)(),g=(0,s.yK)((e=>({icon:{width:void 0,height:m.device.isMobile?14:12,fill:e.blueColor,marginRight:6},title:{maxWidth:180,...c.Z.textOverflowStyle}})),[m.device]),[S,h]=(0,r.VK)((()=>[Boolean(o.localStateDiffStore.state.combinatorFilter),o.currentCombinatorFilterStore.state]),[o]),y=(0,n.useCallback)((()=>{h&&(p.wl({collectionSettingsStore:u,item:{type:"filter"}}),d.wd({environment:m,collectionContextStore:o,action:"click_combinator_filter"}))}),[o,u,m,h]);return h?(0,v.jsx)(x.Z,{icon:(0,l.Q)(g.icon),title:(0,v.jsx)("span",{style:g.title,children:(0,v.jsx)(a.FormattedMessage,{defaultMessage:"{ruleCount, plural, one {{ruleCount} rule} other {{ruleCount} rules}}",id:"database.filterBar.advancedFilterRulesCount.title",values:{ruleCount:(null===(t=h.filters)||void 0===t?void 0:t.length)||0}})}),on:!0,hasDiff:S,onClick:e=>(0,f.ZP)({event:e,context:f.Af.CollectionSettingsClick,callback:y})},"combinator"):null}},152387:(e,t,o)=>{o.d(t,{Z:()=>J});var n=o(667294),i=o(800480),r=o(886628),s=o(724405),l=o(576205),a=o(12396),c=o(709291),d=o(926249),u=o(137810),p=o(108406),m=o(234993),g=o(805149),S=o(576852),f=o(953437),h=o(526388),y=o(397004),x=o(368585),v=o(212534),C=o(613273),w=o(318245),b=o(825464),k=o(223196),M=o(85125),j=o(45257),_=o(715070),T=o(399036),I=o(640506),V=o(676725),F=o(396367),B=o(421202),R=o(177420),P=o(606287),A=o(519889),Z=o(307928),L=o(653965),D=o(401898),O=o(776798),N=o(289845),K=o(717335),E=o(729376),W=o(206258),H=o(785893);const U=function(e){let{schema:t,propertyFilter:o,parentStore:n,valueOnly:i,style:s}=e;const a=(0,r.VK)((()=>{const e=t[o.property];if(e&&(0,T.p_)(e))return(0,E.ke)(e,n)}),[t,o,n]),{filter:d}=o,u=(0,l.a_)(d)?d.subfilter:d,p=(0,l.h6)(u)&&!(0,l.mv)(d),m={...s,maxWidth:void 0};return(0,H.jsx)("span",{style:(0,l.gE)(u)?m:s,children:(0,H.jsx)(c.FormattedMessage,{defaultMessage:"{propertyName}{colonSeparator} {filterOperator} {propertyValue}",id:"database.filterBarFilterValue.title",values:{propertyName:i?void 0:(0,H.jsx)(q,{propertyFilter:o,schema:t}),colonSeparator:i||p?void 0:":",filterOperator:(0,H.jsx)(G,{propertyFilter:o}),propertyValue:(0,H.jsx)(Q,{propertyFilter:o,schema:t,parentStore:n,relatedCollectionAppConfigUri:a})}})})};function z(){return(0,H.jsx)(c.FormattedMessage,{defaultMessage:"Not",id:"database.filterBarFilterValue.notOperator"})}function q(e){let{propertyFilter:t,schema:o}=e;const n=o[t.property];return n?(0,H.jsx)("span",{style:{fontWeight:u.Z.fontWeight.medium},children:n.name}):null}function G(e){let{propertyFilter:t}=e;const{filter:o}=t,n=(0,l.a_)(o)?o.subfilter:o;if((0,l.Ly)(n))return"string_contains"===n.operator||"string_is"===n.operator?null:"string_does_not_contain"===n.operator||"string_is_not"===n.operator?(0,H.jsx)(z,{}):(0,H.jsx)(H.Fragment,{children:(0,K.WC)(n.operator)});if((0,l.h6)(n))return(0,H.jsx)(H.Fragment,{children:(0,K.WC)(n.operator)});if((0,l.XA)(n)){if("checkbox_is_not"===n.operator)return(0,H.jsx)(z,{})}else{if((0,l.dx)(n))return"enum_is"===n.operator?null:"enum_is_not"===n.operator?(0,H.jsx)(z,{}):(0,H.jsx)(H.Fragment,{children:(0,K.WC)(n.operator)});if((0,l.NU)(n))return"enum_contains"===n.operator?null:"enum_does_not_contain"===n.operator?(0,H.jsx)(z,{}):(0,H.jsx)(H.Fragment,{children:(0,K.WC)(n.operator)});if((0,l.r2)(n))return"status_is"===n.operator?null:"status_is_not"===n.operator?(0,H.jsx)(z,{}):(0,H.jsx)(H.Fragment,{children:(0,K.WC)(n.operator)});if((0,l.e)(n))return"relation_contains"===n.operator?null:"relation_does_not_contain"===n.operator?(0,H.jsx)(z,{}):(0,H.jsx)(H.Fragment,{children:(0,K.WC)(n.operator)});if((0,l.Gb)(n))return"person_contains"===n.operator?null:"person_does_not_contain"===n.operator?(0,H.jsx)(z,{}):(0,H.jsx)(H.Fragment,{children:(0,K.WC)(n.operator)});if((0,l.Mp)(n)){if("location_is"===n.operator)return null;if("location_is_not"===n.operator)return(0,H.jsx)(z,{})}else if((0,l.gE)(n)){if("date_is"===n.operator)return null;if("date_is_after"===n.operator)return(0,H.jsx)(c.FormattedMessage,{defaultMessage:"After",id:"database.filterValue.dateType.dateIsAfter.title"});if("date_is_before"===n.operator)return(0,H.jsx)(c.FormattedMessage,{defaultMessage:"Before",id:"database.filterValue.dateType.dateIsBefore.title"});if("date_is_on_or_after"===n.operator)return(0,H.jsx)(c.FormattedMessage,{defaultMessage:"On or after",id:"database.filterValue.dateType.dateIsOnOrAfter.title"});if("date_is_on_or_before"===n.operator)return(0,H.jsx)(c.FormattedMessage,{defaultMessage:"On or before",id:"database.filterValue.dateType.dateIsOnOrBefore.title"});if(!(0,l.TQ)(n))return(0,H.jsx)(H.Fragment,{children:(0,K.WC)(n.operator)});{const e=n.value;if(!e.value||"exact"!==e.type||!(0,I.gR)(e.value))return(0,H.jsx)(H.Fragment,{children:(0,K.ip)(e)});if(e.value.start_date&&e.value.end_date)return null;if(e.value.start_date)return(0,H.jsx)(c.FormattedMessage,{defaultMessage:"Starting",id:"database.filterValue.dateType.starting.title"});if(e.value.end_date)return(0,H.jsx)(c.FormattedMessage,{defaultMessage:"Ending",id:"database.filterValue.dateType.ending.title"})}}else{if((0,l.Jw)(n))return"verification_is"===n.operator?null:"verification_is_not"===n.operator?(0,H.jsx)(z,{}):(0,H.jsx)(H.Fragment,{children:(0,K.WC)(n.operator)});(0,D.t1)(n)}}return null}function $(e){let{index:t}=e;return(0,H.jsx)("span",{style:{whiteSpace:"pre"},children:(0,H.jsx)(c.FormattedMessage,{defaultMessage:", ",id:"database.filterValue.commaSeparator"})},t)}function Q(e){let{propertyFilter:t,schema:o,parentStore:n,relatedCollectionAppConfigUri:i}=e;const{filter:r}=t,s=(0,l.a_)(r)?r.subfilter:r;if(!(0,l.vR)(s))return null;if((0,l.Ly)(s)||(0,l.h6)(s)){const e=s.value.value;if(void 0!==e)return(0,H.jsx)("span",{children:e})}else if((0,l.XA)(s)){const e=s.value.value;if(!0===e)return(0,H.jsx)("span",{children:(0,H.jsx)(c.FormattedMessage,{defaultMessage:"Checked",id:"database.filterValue.checkboxType.checked.title"})});if(!1===e)return(0,H.jsx)("span",{children:(0,H.jsx)(c.FormattedMessage,{defaultMessage:"Unchecked",id:"database.filterValue.checkboxType.unchecked.title"})})}else{if((0,l.dx)(s)||(0,l.NU)(s)){const e=(0,l.dx)(s)?(0,l.mg)(s):(0,l.qC)(s),t=L.oA(e.map((e=>{let{value:t}=e;return t})));return 0===t.length?null:(0,H.jsx)("span",{children:(0,V.Z)(t,(e=>(0,H.jsx)($,{index:e})))})}if((0,l.r2)(s)){const e=(0,l.wB)(s),t=L.oA(e.map((e=>{let{value:t}=e;return t})));return 0===t.length?null:(0,H.jsx)("span",{children:(0,V.Z)(t,(e=>(0,H.jsx)($,{index:e})))})}if((0,l.e)(s)){const e=(0,l.YO)(s),t=L.oA(e.map(((e,t)=>{if(!e.value)return null;const o=e.type;if("exact"===o){const t=W.G.createChildStore(n,{table:B.iU,id:e.value});return(0,H.jsx)(O.Z,{style:{display:"inline"},store:t},e.value)}if("relative"===o){var r;if("builtin"===e.value.type)return i?(0,H.jsx)("span",{children:(0,H.jsx)(c.FormattedMessage,{...null===(r=F.qB[i])||void 0===r||null===(r=r[e.value.variable])||void 0===r?void 0:r.messageDescriptor})},t):null;if("current_page_in_related_collection"===e.value.type)return(0,H.jsx)("span",{children:(0,H.jsx)(c.FormattedMessage,{defaultMessage:"This page",id:"database.filterAndSort.currentPagePropertyValue.title"})},t)}else(0,D.t1)(o)})));return(0,H.jsx)(H.Fragment,{children:(0,V.Z)(t,(e=>(0,H.jsx)($,{index:e})))})}if((0,l.Gb)(s))return(0,H.jsx)(Y,{useFilter:s,parentStore:n});if((0,l.Mp)(s)){const e=(0,l.u0)(s),t=L.oA(e.map((e=>{if(e.value){const t=e.value,o=W.t1.createChildStore(n,{table:P.vF,id:t});return(0,H.jsx)(O.Z,{style:{display:"inline"},store:o},t)}})));return(0,H.jsx)(H.Fragment,{children:(0,V.Z)(t,(e=>(0,H.jsx)($,{index:e})))})}if((0,l.gE)(s)){const e=o[t.property],n=(e&&"date"===e.type?e.date_format:void 0)||I.sF;let i;if("exact"===s.value.type){const e=s.value;if(e.value)if((0,I.J_)(e.value))i=e.value;else if((0,I.gR)(e.value)){const t=(0,I.Gc)(e.value);t&&(i=t.value)}}else if(!(0,l.TQ)(s))return(0,H.jsx)(H.Fragment,{children:(0,K.x)(s.value)});if(i)return(0,H.jsx)(N.Z,{style:{display:"inline"},value:i,dateFormat:n,shortenDateAndRange:!0})}else{if((0,l.Jw)(s)){const e=(0,l.fl)(s).filter((e=>{let{value:t}=e;return Boolean(t)})).map(K.cq);return 0===e.length?null:(0,H.jsx)("span",{children:(0,V.Z)(e,(e=>(0,H.jsx)($,{index:e})))})}(0,D.t1)(s)}}return null}function Y(e){let{parentStore:t,useFilter:o}=e;const n=(0,c.useIntl)(),i=(0,l.R8)(o),s=(0,r.VK)((()=>L.oA(i.map(((e,o)=>{if("relative"===e.type)return(0,H.jsx)("span",{children:(0,H.jsx)(c.FormattedMessage,{defaultMessage:"Me",id:"database.filterValue.personType.firstPersonPropertyValue.title"})},o);if(e.value){const i=e.value;if(i.table===A.KJ){const e=W.t1.createChildStore(t,{table:i.table,id:i.id});return(0,H.jsx)("span",{children:(0,Z.Nz)(n,e.getModel())},o)}if(i.table===R.cZ){const e=W.t1.createChildStore(t,{table:i.table,id:i.id});return(0,H.jsx)("span",{children:(0,_.Mh)(e.getModel())},o)}}})))),[i,t,n]);return(0,H.jsx)(H.Fragment,{children:(0,V.Z)(s,(e=>(0,H.jsx)($,{index:e})))})}function X(e){let{id:t,context:o,collectionContextStore:d,collectionSettingsStore:u,onClick:_}=e;const T=(0,i.O7)(),I=(0,s.Fg)(),{filter:V,isReadOnly:F}=(0,r.VK)((()=>{const e=function(e,t){const o=t.currentPropertyFiltersStore.state;return o.find((t=>t.id===e))}(t,d);return{filter:e,isReadOnly:Boolean(e&&(0,y.mu)(e.id))}}),[d,t]),B=(0,r.VK)((()=>{const e=d.localStateDiffStore.state;return e.filters.updated.includes(t)||e.filters.added.includes(t)}),[d,t]),R=(0,r.VK)((()=>d.collectionViewStore()),[d]),P=(0,r.VK)((()=>d.normalizedSchemaStore.state),[d]),A=(0,r.VK)((()=>d.permissionScopesStore.state.canConfigureBlock),[d]),Z=(0,r.VK)((()=>u.state.open),[u]),L=(0,r.VK)((()=>{var e;return V?null==d||null===(e=d.collectionStore())||void 0===e||null===(e=e.getSchema()[V.filter.property])||void 0===e?void 0:e.type:void 0}),[d,V]),D=(0,r.VK)((()=>V&&V.id===y.OC),[V]),O=(0,n.useCallback)((e=>{e&&(0,C.yT)(e.target)||g.E3({collectionSettingsStore:u})}),[u]),N=(0,n.useCallback)((()=>{var e;_&&_(),V&&(u.state.open?g.E3({collectionSettingsStore:u}):g.wl({collectionSettingsStore:u,item:{type:"filter"}}),p.wd({environment:T,collectionContextStore:d,action:"click_property_filter",original_view_type:void 0,property_type:null==d||null===(e=d.collectionStore())||void 0===e||null===(e=e.getSchema()[V.filter.property])||void 0===e?void 0:e.type}))}),[d,u,T,V,_]),K=(0,n.useCallback)((()=>{g.E3({collectionSettingsStore:u})}),[u]),E=(0,n.useCallback)((e=>{var t;if(!V)return;const o=null===(t=d.remoteResultStore.state)||void 0===t?void 0:t.sizeHint,n=w.default.mark("collections.update_filter_lag");w.default.measureAfterNextFlush(n,{environment:T,getData:()=>x.Y5({from:"property_filter",property_type:L,collectionContextStore:d,sizeHintAtStart:o})});const i=V.filter,r=d.currentPropertyFiltersStore.state.map((t=>{if(t.id===V.id){return{...V,filter:{...i,filter:e}}}return t}));m.iU({environment:T,collectionContextStore:d,temporaryState:{...d.temporaryStateStore.state,propertyFilters:{value:r}}}),p.wd({environment:T,collectionContextStore:d,action:"update_property_filter",original_view_type:void 0,property_type:L})}),[d,T,V,L]),W=(0,n.useCallback)((()=>{var e;if(!V)return;const t=d.currentPropertyFiltersStore.state.filter((e=>e.id!==V.id));m.iU({environment:T,collectionContextStore:d,temporaryState:{...d.temporaryStateStore.state,propertyFilters:{value:t}}}),p.wd({environment:T,collectionContextStore:d,action:"delete_property_filter",original_view_type:void 0,property_type:null==d||null===(e=d.collectionStore())||void 0===e||null===(e=e.getSchema()[V.filter.property])||void 0===e?void 0:e.type})}),[d,T,V]),z=(0,n.useCallback)((()=>{var e;if(!V)return;const{combinatorFilter:t,propertyFilters:n}=(0,y.Gz)(d,V);m.iU({environment:T,collectionContextStore:d,temporaryState:{...d.temporaryStateStore.state,propertyFilters:{value:n},combinatorFilter:{value:t}}});const i=o===M.P.FilterBar?d.filterBarCombinatorFilterSettingsStore:d.filterOptionsCombinatorFilterSettingsStore;g.wl({collectionSettingsStore:i,item:{type:"filter"}}),p.wd({environment:T,collectionContextStore:d,action:"merge_filter_into_combinator",property_type:null==d||null===(e=d.collectionStore())||void 0===e||null===(e=e.getSchema()[V.filter.property])||void 0===e?void 0:e.type})}),[d,o,T,V]),q=(0,n.useCallback)(((e,t)=>{if(!R||!V)return null;const o=V.filter,n=!(0,l.Oo)(o),i=P[o.property];return(0,H.jsx)(j.Z,{icon:i&&(0,H.jsx)(a.ZP,{type:i.type,icon:i.icon,size:T.device.isMobile?18:16,theme:I,style:{fill:n?I.blueColor:I.mediumIconColor,marginRight:6}}),title:n?(0,H.jsx)(U,{propertyFilter:o,schema:P,style:ee(),parentStore:R}):(0,H.jsx)("span",{style:ee(),children:null==i?void 0:i.name}),on:n,hasDiff:B,disabled:t,hideChevron:t,onClick:e=>((0,v.ZP)({event:e,context:v.Af.CollectionSettingsClick,callback:N}),e.preventDefault(),!1),...e},V.id)}),[R,T,V,N,B,P,I]),G=(0,n.useCallback)((()=>D?(0,H.jsx)(h.Z,{placement:b.u.Bottom,render:e=>q(e,!0),renderTooltip:()=>(0,H.jsx)(c.FormattedMessage,{id:"database.filterBarPropertyFilter.cannotConfigureSubitemDisplayMode",defaultMessage:"To modify this filter, first change the subitem display mode."})}):(0,H.jsx)(h.Z,{placement:b.u.Bottom,render:e=>q(e,!0),renderTooltip:()=>(0,H.jsx)(c.FormattedMessage,{id:"database.filterBarPropertyFilter.cannotConfigure",defaultMessage:"This filter cannot be modified on this view."})})),[q,D]),$=(0,n.useCallback)((()=>{if(!V)return;const e=V.filter;return R?(0,H.jsx)(S.ZP,{collectionViewId:R.id,propertyFilter:e,schema:P,parentStore:R,onChange:E,onClose:K,onDelete:W,onAddToCombinatorFilter:z,context:S.Qv.PropertyFilter,userCanConfigureFilters:A,allowRelativeDateFilter:!0,allowRelativePersonFilter:!0,collectionContextStore:d}):void 0}),[A,d,R,V,z,W,K,E,P]);return F?G():(0,H.jsx)(f.ZP,{popupType:T.device.isMobile?k.k.SlideUp:k.k.Popup,open:Z,origin:F?G():q(void 0,!1),onDismiss:O,disableMouseCapture:!0,enableOutsideClickDismiss:!0,originGap:4,render:$})}const J=n.memo(X,d.Z);function ee(){return{maxWidth:180,...u.Z.textOverflowStyle}}},45257:(e,t,o)=>{o.d(t,{Z:()=>a});o(667294);var n=o(800480),i=o(724405),r=o(542853),s=o(164921),l=o(785893);function a(e){const{icon:t,title:o,on:a,hasDiff:d,wrapStyle:u,innerStyle:p,hideChevron:m}=e,g=(0,i.Fg)(),S=(0,n.O7)();return(0,l.jsxs)("div",{style:{borderRadius:14,marginRight:6,display:"inline-flex",...d&&{position:"relative"},...u},children:[(0,l.jsxs)(s.Z,{disabled:e.disabled,style:c(Boolean(a),g,p,S.device.isMobile),hoveredStyle:a?{background:g.outlineBlueButtonHoveredBackground}:void 0,pressedStyle:a?{background:g.outlineBlueButtonPressedBackground}:void 0,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onClick:e.onClick,onDoubleClick:e.onDoubleClick,children:[t,o,!m&&(0,r.i)({width:10,marginLeft:4,marginTop:1,fill:a?g.blueColor:g.lightIconColor})]}),d&&(0,l.jsx)("div",{style:{position:"absolute",top:-2,right:-2,background:"dark"===g.mode?g.accentColors.orange[500]:g.accentColors.orange[300],border:`1px solid ${g.contentBackground}`,width:9,height:9,borderRadius:9}})]})}function c(e,t,o,n){return{fontSize:14,display:"inline-flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",borderRadius:32,height:n?28:24,lineHeight:n?"28px":"24px",padding:"0 8px",border:`1px solid ${t.outlineButtonBorder}`,color:t.mediumTextColor,...e&&{color:t.blueColor,border:`1px solid ${t.filterPillBorder}`,background:t.filterPillBackground},...o}}},147082:(e,t,o)=>{o.d(t,{UR:()=>C,ZP:()=>b,go:()=>v});var n=o(667294),i=o(883355),r=o(800480),s=o(724405),l=o(853465),a=o(653965),c=o(460709),d=o(98742),u=o(434859),p=o(964113),m=o(164921),g=o(437601),S=o(374194),f=o(203386),h=o(953336),y=o(164369),x=o(785893);const v="20px";let C=function(e){return e[e.Select=0]="Select",e[e.Person=1]="Person",e[e.Relation=2]="Relation",e[e.FilterValue=3]="FilterValue",e[e.Share=4]="Share",e[e.Group=5]="Group",e}({});class w extends i.Z{constructor(){super(...arguments),this.inputRef=n.createRef(),this.storeTypes={store:p.Z},this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleFocused=()=>{this.stores.store.setState({focused:!0})},this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleBlurred=()=>{this.stores.store.setState({focused:!1})},this.handleContainerClick=()=>{var e,t,o;this.props.disabled||(null===(e=this.inputRef.current)||void 0===e||e.focusInput(),null===(t=(o=this.props).onClick)||void 0===t||t.call(o))}}UNSAFE_willMount(){(this.props.focus||this.props.focusInitial)&&this.stores.store.setState({focused:!0})}UNSAFE_willUpdate(){void 0!==this.props.focus&&this.stores.store.setState({focused:this.props.focus})}renderComponent(){const{disabled:e}=this.props;return(0,x.jsx)(f.Z,{debugName:"TokenInputMenuItem",capture:!e,onLeft:a.yR,onRight:a.yR,onSelectAll:a.yR,onRedo:a.yR,onUndo:a.yR,onToggleBold:a.yR,onToggleItalics:a.yR,onToggleCode:a.yR,onCut:a.yR,onCopy:a.yR,onPaste:a.yR,onKeypress:a.yR,children:(0,x.jsx)(f.Z,{debugName:"TokenInputMenuItem",capture:!e&&this.props.value.length>0,onDelete:a.yR,onBackspace:a.yR,children:(0,x.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"stretch",flex:1,minWidth:0,gap:this.props.message?4:void 0},children:[this.renderTokenInput(),this.props.message&&(0,x.jsx)(y.Z,{isSmall:!0,children:this.props.message})]})})})}renderTokenInput(){const{right:e,showClearButton:t}=this.props;return e||t?(0,x.jsxs)(h.Z,{type:u.Z.All,style:{...I(this.environment,this.theme,this.props.format,this.props.focus,this.props.dontShowBorderBottom,this.props.disabled,this.props.showBorder,this.context.menu),flexWrap:"nowrap",...this.props.style},onClick:this.handleContainerClick,children:[(0,x.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",flexGrow:1,minWidth:0,...this.props.inputAndTokenWrapRightStyle},children:[this.props.tokens,!this.props.hideInput&&this.renderInput()]}),(0,x.jsx)("div",{style:{flexShrink:0},children:(0,x.jsx)(T,{showClearButton:this.props.showClearButton,right:this.props.right,onClearButtonClick:this.props.onClearButtonClick,tokens:this.props.tokens,value:this.props.value})})]}):this.environment.device.isMobile?(0,x.jsxs)("div",{style:{...I(this.environment,this.theme,this.props.format,this.props.focus,this.props.dontShowBorderBottom,this.props.disabled,this.props.showBorder,this.context.menu),flexWrap:"nowrap",...this.props.style},onClick:this.handleContainerClick,children:[(0,x.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",flexGrow:1,minWidth:0,overflow:"hidden",marginRight:k(this.props.format)?6:0},children:[this.props.tokens,!this.props.hideInput&&this.renderInput()]}),(0,x.jsx)(g.Z,{show:this.stores.store.state.focused})]}):(0,x.jsxs)(h.Z,{type:u.Z.All,style:{...I(this.environment,this.theme,this.props.format,this.props.focus,this.props.dontShowBorderBottom,this.props.disabled,this.props.showBorder,this.context.menu),...this.props.style},onClick:this.handleContainerClick,children:[this.props.tokens,!this.props.hideInput&&this.renderInput()]})}renderInput(){const e=0===this.props.tokens.length;return(0,x.jsx)(S.Z,{disabled:this.props.disabled,format:S.B.Transparent,...(0,d.Z)({onKeyDown:e=>function(e,t,o,n){"Backspace"===e.key&&0===t.length&&o();n&&n(e)}(e,this.props.value,this.props.onRemoveLastToken,this.props.onKeyDown)},{onChange:this.props.onChange}),value:this.props.value,focus:this.props.focus,focusInitial:this.props.focusInitial,focusAfterAnimation:this.props.focusAfterAnimation,style:(t=this.props.format,o=this.environment,n=this.theme,i=this.props.inputFullWidth,r=this.props.inputDivStyle,{flexGrow:1,flexShrink:1,flexBasis:i?"100%":60,minWidth:60,width:"auto",lineHeight:v,...o.device.isMobile?{margin:"0 8px 8px 0"}:_(n)[t].inputDivDesktopStyle,...r}),inputStyle:this.props.inputStyle||{height:this.environment.device.isMobile?24:k(this.props.format)?20:18},size:1,ref:this.inputRef,type:this.props.type,placeholder:e?this.props.placeholder:"",onSubmit:e=>function(e,t,o,n){0===t.length&&o&&o();n&&n(e)}(e,this.props.value,this.props.onEmptySubmit,this.props.onSubmit),onFocus:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleFocused,onBlur:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleBlurred,textarea:this.props.textarea,autoComplete:this.props.autoComplete});var t,o,n,i,r}}w.displayName="TokenInputMenuItem",w.contextTypes={...c.mw,...i.w};const b=w;function k(e){return e===C.Group}function M(e,t){return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",background:t?"none":e.tokenInputMenuItemBackground,cursor:"text",overflow:"hidden"}}function j(e){return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",flexShrink:0,minHeight:44,borderBottom:`1px solid ${e.regularDividerColor}`,fontSize:16,background:e.popoverBackground}}function _(e){const t={desktopWrapStyle:{padding:"8px 9px 1px",width:"100%",minHeight:34,fontSize:14},inputDivDesktopStyle:{margin:"0 6px 6px 0",borderTopLeftRadius:4,borderTopRightRadius:4},inputDivDesktopFocusStyle:{}};return{[C.Select]:t,[C.Person]:t,[C.Relation]:t,[C.Group]:t,[C.FilterValue]:{desktopWrapStyle:{padding:"6px 6px 1px",boxShadow:e.inputBoxShadow,background:e.inputBackground,margin:"6px 8px 2px 8px",minHeight:30,fontSize:12,borderRadius:4},inputDivDesktopStyle:{margin:"0 6px 4px 0"},inputDivDesktopFocusStyle:{boxShadow:"rgba(35, 131, 226, 0.57) 0px 0px 0px 1px inset, rgba(35, 131, 226, 0.35) 0px 0px 0px 2px"}},[C.Share]:{desktopWrapStyle:{padding:"8px 9px 1px",width:"100%",minHeight:34,fontSize:14},inputDivDesktopStyle:{margin:"0 0 0 2px",borderTopLeftRadius:4,borderTopRightRadius:4},inputDivDesktopFocusStyle:{}}}}function T(e){let{showClearButton:t,right:o,onClearButtonClick:n,tokens:i,value:a}=e;const c=(0,s.Fg)(),d=(0,r.O7)(),{isMobile:u}=d.device;return o?(0,x.jsx)(x.Fragment,{children:o}):t&&(i.length>0||a.length>0)?(0,x.jsx)(m.Z,{onClick:n,style:{flexShrink:0,flexGrow:0,borderRadius:u?24:20,marginTop:2},children:(0,l.X)({width:u?16:14,height:u?16:14,fill:c.lightIconColor})}):null}function I(e,t,o,n,i,r,s,l){const{WindowSizeStore:a}=e;return{...e.device.isMobile?{...j(t),paddingTop:14,paddingBottom:8,paddingLeft:(null==l?void 0:l.menuType)!==c.og.Popup?a.getSafePaddingLeftCSS(16):16,paddingRight:(null==l?void 0:l.menuType)!==c.og.Popup?a.getSafePaddingRightCSS(16):16,...i&&{borderBottom:"none"}}:{...M(t,r),..._(t)[o].desktopWrapStyle},...s&&{boxShadow:"rgba(15, 15, 15, 0.1) 0px 0px 0px 1px inset"},...s&&n&&{boxShadow:"rgba(35, 131, 226, 0.57) 0px 0px 0px 1px inset, rgba(35, 131, 226, 0.35) 0px 0px 0px 2px"},...!e.device.isMobile&&n&&_(t)[o].inputDivDesktopFocusStyle}}},830905:(e,t,o)=>{o.d(t,{TB:()=>w,Xh:()=>x,Y7:()=>C,ZP:()=>v,qQ:()=>y});var n=o(667294),i=o(886628),r=o(724405),s=o(406695),l=o(920669),a=o(423512),c=o(803791),d=o(709291),u=o(644866),p=o(694166),m=o(214976),g=o(288280),S=o(291839),f=o(526388),h=o(785893);function y(e){let{collectionStore:t,propertySchema:o}=e;const n=(0,i.VK)((()=>(0,m.Xh)(t.getName(),t)),[t]),r=(0,i.VK)((()=>{var e;const t=(null===(e=g.subscriptionDataStoreInstance.state)||void 0===e?void 0:e.addOns)??[];return(0,c.de)(t)}),[]);return(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{style:{color:"white",fontWeight:500,wordWrap:"break-word",whiteSpace:"pre-wrap"},children:(0,h.jsx)(d.FormattedMessage,{...u.fillAllPagesMessages.fillAllPagesTooltip,values:{hasNames:Boolean(n)&&Boolean(o.name),collectionName:n,propertyName:o.name}})}),!r&&(0,h.jsx)("div",{style:{color:"#ACABA9",fontWeight:500},children:(0,h.jsx)(d.FormattedMessage,{...u.fillAllPagesMessages.fillAllPagesAddOnMessage})})]})}function x(e){let{updateAiInferencesTaskStatus:t,iconStyle:o,progressIconStyle:n}=e;const i=(0,r.Fg)();return t.isRunning?(0,h.jsx)("div",{style:n,children:(0,h.jsx)(S.Z,{})}):(0,l.y)({width:14,color:i.accentColors.purple[400],...o})}function v(e){let{updateAiInferencesTaskStatus:t,style:o}=e;const n=(0,d.useIntl)();return(0,h.jsx)("div",{style:o,children:t.isRunning?(0,h.jsx)("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:void 0===t.numPagesFilled||void 0===t.numPagesRequested?(0,h.jsx)(d.FormattedMessage,{defaultMessage:"Autofilling all pages",id:"aiAutofill.fillallPages.updatingAllPages"}):(0,h.jsx)(d.FormattedMessage,{defaultMessage:"{numPagesRequested, plural, one {Autofilling {numPagesFilled} of {numPagesRequested} page} other {Updating {numPagesFilled} of {numPagesRequested} pages}}",id:"aiAutofill.fillallPages.updatingAllPagesWithProgress",values:{numPagesFilled:(0,a.uf)(t.numPagesFilled,"compact",n),numPagesRequested:(0,a.uf)(t.numPagesRequested,"compact",n)}})}):(0,h.jsx)(d.FormattedMessage,{defaultMessage:"Autofill all pages",id:"aiAutofill.fillAllPages.buttonTitle"})})}function C(e){let{updateAiInferencesTaskStatus:t}=e;const{numPagesFilled:o,numPagesRequested:n}={numPagesFilled:void 0,numPagesRequested:void 0,...t},i=(0,r.yK)((e=>({inner:{background:e.accentColors.purple[400],height:"100%",transition:"width .5s"},outer:{background:e.accentColors.gray[100],height:3,borderRadius:2,minWidth:120,overflow:"hidden",marginTop:8}})),[]);return void 0===o||void 0===n?null:(0,h.jsx)("div",{style:i.outer,role:"progressbar",children:(0,h.jsx)("div",{style:{...i.inner,width:100*Math.min(o/n,1)+"%"}})})}function w(e){const{environment:t,collectionContextStore:o,collectionStore:r,property:l,propertySchema:a,doesUserHaveAIAddOn:c,isAutofillSetupEnabled:d}=e,m=(0,i.VK)((()=>{const e=o.collectionStore();return e?(0,s.De)(e.getFormat(),l):{isRunning:!1,numPagesFilled:void 0,numPagesRequested:void 0}}),[o,l]),g=(0,n.useCallback)((async()=>{const e=o.collectionStore();e&&a&&await u.autofillPropertyForCollection({environment:t,collectionStore:e,propertySchema:a,property:l})}),[t,a,l,o]);return(0,h.jsx)(f.Z,{disableTooltip:c,renderTooltip:()=>(0,h.jsx)(y,{collectionStore:r,propertySchema:a}),render:e=>(0,h.jsx)(p.Z,{icon:e=>(0,h.jsx)(x,{updateAiInferencesTaskStatus:m,iconStyle:e,progressIconStyle:{marginTop:4,marginLeft:4,marginRight:2}}),title:(0,h.jsx)(v,{updateAiInferencesTaskStatus:m}),caption:void 0!==m.numPagesFilled&&void 0!==m.numPagesRequested&&(0,h.jsx)(C,{updateAiInferencesTaskStatus:m}),focused:!1,onClick:g,disabled:m.isRunning||!d,...e})})}},343350:(e,t,o)=>{o.d(t,{Z:()=>s});o(667294);var n=o(504430);o(757658);var i=o(785893);const r=16;function s(e){const{startPoint:t,endPoint:o,style:r,showArrowHead:s,useRightAngles:c,cornerRadiusOverride:d,handleMouseMove:u,handleMouseLeave:p}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a,{startPoint:t,startCurvePoint:c?void 0:{x:t.x+n.i2,y:t.y},endPoint:s?{x:o.x-1.5,y:o.y}:o,endCurvePoint:c?void 0:{x:o.x-n.i2,y:o.y},cornerRadiusOverride:d,style:r,handleMouseMove:u,handleMouseLeave:p,children:e.children}),s&&(0,i.jsx)(l,{endPoint:o,style:r})]})}function l(e){const{endPoint:t,style:o}=e;return(0,i.jsx)("polyline",{points:`${t.x-5},${t.y-6} ${t.x},${t.y} ${t.x-5},${t.y+6}`,style:o,fill:"transparent"})}function a(e){const{startPoint:t,startCurvePoint:o,endPoint:n,endCurvePoint:s,style:l,cornerRadiusOverride:a,handleMouseMove:c,handleMouseLeave:d}=e;let u="";u=o&&s?`M ${t.x} ${t.y} L ${o.x} ${o.y} L ${s.x} ${s.y} L ${n.x} ${n.y}`:`M ${t.x} ${t.y} L ${t.x} ${n.y} L ${n.x} ${n.y}`;const p=function(e,t){function o(e,t,o){const i=t.x-e.x,r=t.y-e.y,s=Math.sqrt(i*i+r*r);return n(e,t,Math.min(1,o/s))}function n(e,t,o){return{x:e.x+(t.x-e.x)*o,y:e.y+(t.y-e.y)*o}}function i(e,t){e.length>2&&(e[e.length-2]=t.x.toString(),e[e.length-1]=t.y.toString())}function r(e){return{x:parseFloat(e[e.length-2]),y:parseFloat(e[e.length-1])}}const s=e.split(/[,\s]/).reduce(((e,t)=>{const o=t.match("([a-zA-Z])(.+)");return o?(e.push(o[1]),e.push(o[2])):e.push(t),e}),[]).reduce((function(e,t){return!isNaN(parseFloat(t))&&e.length?e[e.length-1].push(t):e.push([t]),e}),[]);let l=[];if(s.length>1){const e=r(s[0]);let a=null;"Z"===s[s.length-1][0]&&s[0].length>2&&(a=["L",e.x.toString(),e.y.toString()],s[s.length-1]=a),l.push(s[0]);for(let c=1;c<s.length;c++){const e=l[l.length-1],d=s[c],u=d===a?s[1]:s[c+1];if(u&&e&&e.length>2&&"L"===d[0]&&u.length>2&&"L"===u[0]){const s=r(e),a=r(d),c=r(u),p=o(a,s,t),m=o(a,c,t);i(d,p),l.push(d);const g=n(p,a,.5),S=n(a,m,.5),f=["C",g.x.toString(),g.y.toString(),S.x.toString(),S.y.toString(),m.x.toString(),m.y.toString()];l.push(f)}else l.push(d)}if(a){const e=r(l[l.length-1]);l.push(["Z"]),i(l[0],e)}}else l=s;return l.reduce((function(e,t){return`${e}${t.join(" ")} `}),"")}(u,a||r);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:p,style:l,fill:"transparent"}),(c||d)&&(0,i.jsxs)("g",{onMouseMove:c,onMouseLeave:d,children:[(0,i.jsx)("path",{d:p,style:{strokeOpacity:0,strokeWidth:16,pointerEvents:"stroke",cursor:"default"},fill:"transparent"}),e.children]})]})}},865089:(e,t,o)=>{o.d(t,{FF:()=>s,Yy:()=>a,bZ:()=>l});o(667294);var n=o(709291),i=o(288492),r=o(785893);function s(e){let{origin:t}=e;return(0,r.jsx)(i.r,{origin:t,placementToOrigin:"bottom",style:{minWidth:240},tutorialId:"sprints-onboarding",tutorialStepId:"current-sprint-view-tooltip",header:(0,r.jsx)(n.FormattedMessage,{id:"SprintsBoardOnboardingTooltip.SprintBoardView.header",defaultMessage:"Manage the current sprint"}),content:(0,r.jsx)(n.FormattedMessage,{id:"SprintsBoardOnboardingTooltip.SprintBoardView.content",defaultMessage:"Add tasks and update task status as your team makes progress during the sprint."})})}function l(e){let{origin:t}=e;return(0,r.jsx)(i.r,{origin:t,placementToOrigin:"bottom",tutorialId:"sprints-onboarding",tutorialStepId:"sprint-task-tooltip",header:(0,r.jsx)(n.FormattedMessage,{id:"SprintsBoardOnboardingTooltip.SprintBoardItem.header",defaultMessage:"Change tasks status"}),content:(0,r.jsx)(n.FormattedMessage,{id:"SprintsBoardOnboardingTooltip.SprintBoardItem.content",defaultMessage:'Drag this task to "In progress".'})})}function a(e){let{origin:t}=e;return(0,r.jsx)(i.r,{origin:t,placementToOrigin:"bottom",style:{minWidth:240},tutorialId:"sprints-onboarding",tutorialStepId:"complete-sprint-button-tooltip",header:(0,r.jsx)(n.FormattedMessage,{id:"SprintsBoardOnboardingTooltip.CompleteSprintButton.header",defaultMessage:"Complete this sprint"}),content:(0,r.jsx)(n.FormattedMessage,{id:"SprintsBoardOnboardingTooltip.CompleteSprintButton.content",defaultMessage:"Click the button when you're done with this sprint."})})}},709942:(e,t,o)=>{o.d(t,{Z:()=>Xe});var n=o(667294),i=o(886628),r=o(800480),s=o(724405),l=o(709291),a=o(137810),c=o(436610),d=o(227370),u=o(368585),p=o(164856),m=o(80444),g=o(865089),S=o(363123),f=o(749085),h=o(815145),y=o(371663),x=o(984619),v=o(640506),C=o(407057),w=o(536591),b=o(542853),k=o(213148),M=o(747453),j=o(253523),_=o(600606),T=o(421202),I=o(894438),V=o(76233),F=o(531701),B=o(401898),R=o(619584),P=o(275754),A=o(436821),Z=o(793174),L=o(460709),D=o(637034),O=o(729376),N=o(458484),K=o(206258),E=o(4827),W=o(278030),H=o(552275),U=o(231945),z=o(573063),q=o(636596),G=o(478140),$=o(632163),Q=o(840721),Y=o(489728),X=o(158297),J=o(731278),ee=o(776798),te=o(672495),oe=o(83264),ne=o(292660),ie=o(942402),re=o(685567),se=o(785893);const le=(0,l.defineMessages)({completedPercentSummary:{id:"completeAutomationSprintModal.sprintSummary.completedPercentSummary",defaultMessage:"{completedTaskCount} / {totalTaskCount} total tasks"},selectNextSprintLabel:{id:"completeAutomationSprintModal.sprintSummary.selectNextSprintLabel",defaultMessage:"Next sprint"},selectDatesForNextSprintLabel:{id:"completeAutomationSprintModal.sprintSummary.selectDatesForNextSprintLabel",defaultMessage:"Start and end dates"},nextSprintDatesLabel:{id:"completeAutomationSprintModal.sprintSummary.nextSprintDatesLabel",defaultMessage:"Next sprint dates"},cancelButton:{id:"completeAutomationSprintModal.sprintSummary.cancel",defaultMessage:"Cancel"},fallbackSprintName:{id:"completeAutomationSprintModal.sprintName.placeholder",defaultMessage:"Sprint"}});function ae(e){let{onDismiss:t,...o}=e;const{isOpen:i}=o,s=(0,r.O7)(),l=(0,n.useId)(),a=e=>{t();let n=!1;(0,B.Kn)(e)&&(0,B.$K)(e.clickedCancel)&&(n=!0===e.clickedCancel),c.$X(s,{...(0,u.Pn)(o.taskCollectionContextStore),action:n?"cancel_modal":"dismiss_modal"})};return(0,se.jsx)(ne.Z,{ariaLabelledBy:l,isOpen:i,onDismiss:()=>a(),render:()=>(0,se.jsx)(ce,{...o,onDismiss:a,titleAriaId:l})})}function ce(e){var t;const{completeSprintAutomationContext:o,setIsLoading:s,taskCollectionContextStore:a,onDismiss:c,completeSprintAutomationState:d,onAutomationComplete:u,titleAriaId:p}=e,{currentSprintId:g,querySprintsResult:h,currentSprintTaskSummary:y}=d,x=(0,l.useIntl)(),C=(0,r.O7)(),{isMobile:w}=(0,r.Fy)(),b=(0,i.VK)((()=>m.default.state.currentUserSettingsStore),[]),k=(0,i.VK)((()=>o.sprintCollectionStore),[o]),M=(0,i.VK)((()=>{var e;const t=null===(e=o.automationContext)||void 0===e?void 0:e.automationStore;return null==t?void 0:t.getRecurrence()}),[o]),j=(0,i.VK)((()=>{var e;return(null===(e=o.automationContext)||void 0===e||null===(e=e.automationActionStore.getConfig())||void 0===e?void 0:e.complete_sprint_action)??"complete_sprint_and_move_incomplete_tasks_to_next_sprint"}),[null===(t=o.automationContext)||void 0===t?void 0:t.automationActionStore]),_=(0,i.VK)((()=>k.getSpaceId()),[k]),V=(0,i.VK)((()=>{if(g)return K.G.createChildStore(k,{id:g,table:T.iU,spaceId:k.getSpaceId()})}),[g,k]),F=(0,i.VK)((()=>V?(0,D.vU)({intl:x,environment:C,store:V,untitledFallback:le.fallbackSprintName}):x.formatMessage(le.fallbackSprintName)),[V,x,C]),B=(0,i.VK)((()=>Se({sprintBlockStore:V,sprintCollectionStore:k})),[V,k]),P=(0,i.VK)((()=>fe({sprintDateRange:B,intl:x})),[B,x]),[A,L]=n.useState(),O=(0,i.VK)((()=>f.default.createValue(j)),[j]),N=n.useMemo((()=>{if(!M||null==B||!B.end_date)return;const e=(0,I.Su)(M);return e?(0,I.rP)({currentSprintEndDate:B.end_date,sprintSchedule:e}):void 0}),[M,null==B?void 0:B.end_date]),E=(0,i.VK)((()=>{if("pointer"!==(null==A?void 0:A.type))return;return Se({sprintBlockStore:K.G.createChildStore(k,A.pointer),sprintCollectionStore:k})}),[A,k]),[W,H]=n.useState(void 0),U=n.useMemo((()=>{if(W&&(0,v.h)(W))return W}),[W]),z=n.useMemo((()=>{if(!h)return;const{nextSprintIds:e,futureSprintIds:t}=h;return e.length>0?e:t}),[h]),q=(0,i.VK)((()=>{if(void 0===z)return;const e=z[0];return e?{type:"pointer",pointer:{id:e,table:T.iU,spaceId:_}}:{type:"actionId"}}),[z,_]),G=(0,i.VK)((()=>{var e;return!Boolean(null==b||null===(e=b.getSettings())||void 0===e?void 0:e.seen_sprint_settings_engagement_banner)}),[b]);n.useEffect((()=>{q&&L(q)}),[q,L]),n.useEffect((()=>{H(E??N)}),[E,N,H]);const $=n.useCallback((async()=>{if(c(),!A||!U||!o.automationContext)return;s(!0);const e=0===(null==y?void 0:y.incompleteTaskCount)?"complete_sprint":O.state;if(!o.automationContext)return;const t={type:"recurrence",recurrence:{type:"completeSprint",completeSprintActionType:e,nextSprintDateRange:U},automationStore:o.automationContext.automationStore,intl:x,parentRecordStore:o.currentCollectionViewBlockStore},n=()=>{u()},{automationExecutionActions:i}=await Z._1.load();await i.executeClientAutomation({environment:C,store:o.currentCollectionViewBlockStore,clientContext:t,onUndo:()=>{s(!0),n(),s(!1)}}),n(),s(!1)}),[c,A,U,s,null==y?void 0:y.incompleteTaskCount,O,o.automationContext,o.currentCollectionViewBlockStore,x,C,u]),Q=pe({isMobile:w}),{status:J}=(0,S.V)({value:d,validateLoaded:e=>!1===e.isLoading,waitTimeInMs:1*R.hM});if("pending"!==J&&d.isLoading)return(0,se.jsx)(de,{titleAriaId:p,onDismiss:c,sprintCollectionStore:k});if(d.isLoading)return(0,se.jsx)(ue,{titleAriaId:p,onDismiss:c});const{incompleteTaskCount:ee}=d.currentSprintTaskSummary,te=Boolean(A)&&Boolean(U),oe=void 0!==z&&z.length>0;return(0,se.jsxs)("div",{style:Q.modalContainer,children:[(0,se.jsx)("div",{style:Q.header,id:p,children:(0,se.jsx)(l.FormattedMessage,{id:"completeAutomationSprintModal.sprintSummary.title",defaultMessage:"{sprintName} summary",values:{sprintName:F}})}),(0,se.jsx)(ge,{currentSprintFormattedDateRange:P,currentSprintTaskSummary:y}),G&&(0,se.jsx)(me,{collectionContextStore:a,userSettingsStore:b,onDismissModal:c}),oe&&(0,se.jsxs)("div",{style:Q.flexRow,children:[x.formatMessage(le.selectNextSprintLabel),(0,se.jsx)(Ce,{nextSprintInput:A,setNextSprintInput:L,completeSprintAutomationContext:o,sprintPageIds:z})]}),(0,se.jsxs)("div",{style:Q.flexRow,children:[oe?x.formatMessage(le.selectDatesForNextSprintLabel):x.formatMessage(le.nextSprintDatesLabel),(0,se.jsx)(be,{sprintDateRange:W,setSprintDateRange:H})]}),ee>0&&(0,se.jsxs)("div",{style:Q.flexRow,children:[(0,se.jsx)(l.FormattedMessage,{id:"completeAutomationSprintModal.sprintSummary.incompleteTasksLabel",defaultMessage:"{incompleteTaskCount, plural, one {{incompleteTaskCount} incomplete task} other {{incompleteTaskCount} incomplete tasks}}",values:{incompleteTaskCount:ee}}),(0,se.jsx)(ye,{actionTypeStore:O})]}),(0,se.jsx)(X.Z,{disabled:!te,onClick:()=>{$()},style:Q.button,children:(0,se.jsx)(l.FormattedMessage,{id:"completeAutomationSprintModal.sprintSummary.completeSprintButton",defaultMessage:"Complete {sprintName}",values:{sprintName:F}})}),(0,se.jsx)(Y.Z,{onClick:()=>c({clickedCancel:!0}),style:Q.button,children:x.formatMessage(le.cancelButton)})]})}function de(e){const{onDismiss:t,sprintCollectionStore:o,titleAriaId:n}=e,s=(0,r.O7)(),a=(0,l.useIntl)(),{isMobile:c}=(0,r.Fy)(),d=(0,i.VK)((()=>o.getParentBlockStore()),[o]),u=pe({isMobile:c});return(0,se.jsxs)("div",{style:u.modalContainer,children:[(0,se.jsx)("div",{style:u.header,id:n,children:(0,se.jsx)(l.FormattedMessage,{id:"completeAutomationSprintModal.missingCurrentSprint.title",defaultMessage:"No current sprint found"})}),(0,se.jsx)(X.Z,{onClick:()=>{d&&P._c({environment:s,store:d,pageVisitSource:h.tY.LinkInPage})},style:{...u.button,marginTop:24},children:(0,se.jsx)(l.FormattedMessage,{id:"completeAutomationSprintModal.missingCurrentSprint.navigateToSprintsDatabase",defaultMessage:"Fix in Sprints database"})}),(0,se.jsx)(Y.Z,{onClick:t,style:u.button,children:a.formatMessage(le.cancelButton)})]})}function ue(e){const{onDismiss:t,titleAriaId:o}=e,n=(0,l.useIntl)(),{isMobile:i}=(0,r.Fy)(),s=pe({isMobile:i});return(0,se.jsxs)("div",{style:s.modalContainer,children:[(0,se.jsx)("div",{style:s.header,id:o,children:(0,se.jsx)(l.FormattedMessage,{id:"completeAutomationSprintModal.sprintSummary.titlePlaceholder",defaultMessage:"Sprint summary"})}),(0,se.jsx)("div",{style:s.subheader,children:(0,se.jsx)(q.Z,{style:s.subheaderShimmer})}),(0,se.jsxs)("div",{style:s.flexRow,children:[n.formatMessage(le.selectNextSprintLabel),(0,se.jsx)(q.Z,{style:s.flexRowShimmerBox1})]}),(0,se.jsxs)("div",{style:s.flexRow,children:[n.formatMessage(le.selectDatesForNextSprintLabel),(0,se.jsx)(q.Z,{style:s.flexRowShimmerBox2})]}),(0,se.jsxs)("div",{style:s.flexRow,children:[(0,se.jsx)(l.FormattedMessage,{id:"completeAutomationSprintModal.sprintSummary.incompleteTasksPlaceholder",defaultMessage:"Incomplete tasks"}),(0,se.jsx)(q.Z,{style:s.flexRowShimmerBox3})]}),(0,se.jsx)(X.Z,{disabled:!0,onClick:()=>{},style:s.button,children:(0,se.jsx)(l.FormattedMessage,{id:"completeAutomationSprintModal.sprintSummary.completeSprintButtonPlaceholder",defaultMessage:"Complete sprint"})}),(0,se.jsx)(Y.Z,{onClick:t,style:s.button,children:n.formatMessage(le.cancelButton)})]})}function pe(e){let{isMobile:t}=e;return(0,s.yK)((e=>{const o={height:44,borderRadius:8,display:"flex",alignItems:"center",width:void 0},n={...o,marginTop:12,marginBottom:18};return{modalContainer:{width:400,display:"flex",fontSize:t?a.Z.fontSize.UIRegular.mobile:a.Z.fontSize.UIRegular.desktop,flexDirection:"column",justifyContent:"center",padding:20},header:{display:"flex",alignItems:"center",justifyContent:"center",fontSize:t?18:16,fontWeight:a.Z.fontWeight.semibold},subheader:{display:"flex",alignItems:"center",justifyContent:"center",color:e.lightTextColor,marginBottom:16,gap:8},separator:{height:2,width:2,borderRadius:2,backgroundColor:e.lightIconColor},flexRow:{display:"flex",...t?{flexDirection:"column",fontSize:14,color:e.mediumTextColor}:{justifyContent:"space-between",alignItems:"center",height:24,marginBottom:16}},completedTaskGroup:{display:"flex",gap:4},button:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:8,...t&&o},subheaderShimmer:{borderRadius:4,marginTop:6,width:200,height:16,...t&&{height:22}},flexRowShimmerBox1:{borderRadius:4,width:60,height:16,...t&&n},flexRowShimmerBox2:{borderRadius:4,width:80,height:16,...t&&n},flexRowShimmerBox3:{borderRadius:4,width:140,height:16,...t&&n},dropdownButton:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:4,...t&&{...n,border:`1px solid ${e.accentColors.gray[50]}`,justifyContent:"space-between"}},dropdownChevronIcon:{color:e.lightIconColor,width:12,height:"auto"}}}),[t])}function me(e){const{collectionContextStore:t,userSettingsStore:o,onDismissModal:n}=e,i=(0,r.O7)(),c=(0,s.yK)((e=>({banner:{width:"100%",display:"flex",alignItems:"start",backgroundColor:e.accentColors.blue["light"===e.mode?50:300],borderRadius:4,padding:12,marginBottom:12,fontSize:12,lineHeight:1.5,gap:8},bannerContent:{flex:"1 1 auto",color:e.regularTextColor},bannerTitle:{fontWeight:a.Z.fontWeight.regular},icon:{width:12,color:e.blueColor},repeatIcon:{flex:"0 0 auto",marginBlockStart:3},closeButton:{marginTop:-3,borderRadius:"50%"},link:{color:e.text.uiBluePrimary}})),[]);return(0,se.jsxs)("div",{style:c.banner,children:[(0,se.jsx)("div",{style:c.repeatIcon,children:(0,j.N)(c.icon)}),(0,se.jsx)("div",{style:c.bannerContent,children:(0,se.jsx)("div",{style:c.bannerTitle,children:(0,se.jsx)(l.FormattedMessage,{id:"completeAutomationSprintModal.turnOnAutomaticSprints.banner.title",defaultMessage:"Complete your sprints automatically. Turn on Automated sprints in <linkToSprintSettings>Settings</linkToSprintSettings>.",values:{linkToSprintSettings:function(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return(0,se.jsx)(ie.Z,{onClick:()=>{o&&(n(),A.zX({environment:i,userSettingsStore:o}),A.Rh(t))},disableUnderline:!0,style:c.link,children:r})}}})})}),(0,se.jsx)(z.Z,{icon:k.U,ariaLabel:"closeButton",style:c.closeButton,onClick:()=>{o&&A.zX({environment:i,userSettingsStore:o})}})]})}function ge(e){const{currentSprintFormattedDateRange:t,currentSprintTaskSummary:o}=e,{isMobile:n}=(0,r.Fy)(),i=(0,l.useIntl)(),s=pe({isMobile:n}),a=o?i.formatMessage(le.completedPercentSummary,{completedTaskCount:o.completedTaskCount,totalTaskCount:o.totalTaskCount}):void 0,c=t&&o?(0,se.jsxs)(se.Fragment,{children:[t,(0,se.jsx)("div",{style:s.separator}),a]}):t||a;return void 0===c?null:(0,se.jsx)("div",{style:s.subheader,children:c})}function Se(e){const{sprintBlockStore:t,sprintCollectionStore:o}=e;if(!t)return;const n=o.getPropertyMapping(),i=null==n?void 0:n[y.b0.Dates];if(!i)return;const r=t.getPropertyValue(i);if(!r)return;const s=(0,V.nai)(r)[0];return s?(0,v.Ls)(s):void 0}function fe(e){const{sprintDateRange:t,intl:o}=e;if(t&&(0,v.h)(t))return(0,C.ZV)({value:t,allowRelativeDates:!1,shortenDateAndRange:!0,displayInUserTimezone:!0,intl:o})}const he={complete_sprint_and_move_incomplete_tasks_to_next_sprint:(0,se.jsx)(l.FormattedMessage,{id:"completeAutomationSprintModal.sprintSummary.moveToNextSprintOption",defaultMessage:"Move to next sprint"}),complete_sprint_and_move_incomplete_tasks_to_backlog:(0,se.jsx)(l.FormattedMessage,{id:"completeAutomationSprintModal.sprintSummary.moveToBacklogOption",defaultMessage:"Move to backlog"}),complete_sprint:(0,se.jsx)(l.FormattedMessage,{id:"completeAutomationSprintModal.sprintSummary.keepInThisSprintOption",defaultMessage:"Keep in current sprint"})};function ye(e){const{actionTypeStore:t}=e,{isMobile:o}=(0,r.Fy)(),n=(0,i.VK)((()=>t.state),[t]),s=pe({isMobile:o});return(0,se.jsx)(U.ZP,{popupType:o?U.Z4.SlideUp:U.Z4.Popup,alignmentToOrigin:U.vR.Start,placementToOrigin:U.pO.Bottom,render:e=>(0,se.jsx)(ve,{actionTypeStore:t,buttonPopupParent:e}),renderOrigin:e=>(0,se.jsxs)(Y.Z,{...e,style:s.dropdownButton,children:[he[n],(0,b.i)(s.dropdownChevronIcon)]})})}const xe=["complete_sprint_and_move_incomplete_tasks_to_next_sprint","complete_sprint_and_move_incomplete_tasks_to_backlog","complete_sprint"];function ve(e){const{actionTypeStore:t,buttonPopupParent:o}=e,{isMobile:n}=(0,r.Fy)(),l=(0,s.yK)((e=>({checkIcon:{color:e.lightIconColor,width:12,height:"auto",marginLeft:4}})),[]),a=(0,i.VK)((()=>xe.map((e=>{const n=e===t.state;return{key:e,action:()=>{t.setState(e),o.close()},render:t=>(0,se.jsx)(H.Z,{...t,title:he[e],right:n&&(0,w.e)(l.checkIcon)})}}))),[t,l.checkIcon,o]);let c;return c=n?{menuType:L.og.ActionSheet}:{menuType:L.og.Popup,maxHeight:"50vh",minWidth:230},(0,se.jsx)(G.Z,{...c,children:(0,se.jsx)($.Z,{type:$.i.Vertical,initialFocus:0,sections:[{key:"sprint_automations",items:a,render:e=>(0,se.jsx)(te.Z,{...e})}]})})}function Ce(e){const{nextSprintInput:t,completeSprintAutomationContext:o,setNextSprintInput:n,sprintPageIds:a}=e,{sprintCollectionStore:c}=o,{isMobile:d}=(0,r.Fy)(),u=(0,r.O7)(),p=(0,l.useIntl)(),m=(0,i.VK)((()=>{if(void 0===t)return(0,se.jsx)(l.FormattedMessage,{id:"completeAutomationSprintModal.sprintSelect.empty",defaultMessage:"Select sprint"});if("actionId"===t.type)return(0,se.jsx)(l.FormattedMessage,{id:"completeAutomationSprintModal.sprintSelect.newSprint",defaultMessage:"New sprint"});if("pointer"===t.type){const e=K.G.createChildStore(c,t.pointer);return(0,D.vU)({intl:p,environment:u,store:e,untitledFallback:le.fallbackSprintName})}(0,B.t1)(t)}),[t,p,c,u]),g=pe({isMobile:d}),S=(0,s.yK)((e=>({button:{...void 0===t&&{color:e.lightTextColor}}})),[t]),f={...g.dropdownButton,...S.button};return 0===a.length||1===a.length?(0,se.jsx)(Y.Z,{style:f,disabled:!0,children:m}):(0,se.jsx)(U.ZP,{popupType:d?U.Z4.SlideUp:U.Z4.Popup,alignmentToOrigin:U.vR.Start,placementToOrigin:U.pO.Bottom,render:e=>(0,se.jsx)(we,{buttonPopupParent:e,completeSprintAutomationContext:o,sprintPageIds:a,nextSprintInput:t,setNextSprintInput:n}),renderOrigin:e=>(0,se.jsxs)(Y.Z,{...e,style:f,children:[m,(0,b.i)(g.dropdownChevronIcon)]})})}function we(e){const{sprintPageIds:t,completeSprintAutomationContext:o,buttonPopupParent:a,nextSprintInput:c,setNextSprintInput:d}=e,{sprintCollectionStore:u}=o,{isMobile:p}=(0,r.Fy)(),m=(0,i.VK)((()=>u.getSpaceId()),[u]),g=(0,i.VK)((()=>(0,O.U1)({collectionStore:o.taskCollectionStore,property:y.Es.TaskToSprintRelation}).filter((e=>e.visible&&("title"===e.property||o.sprintCollectionSchema[e.property])))),[o]),S=(0,i.VK)((()=>new N.Z),[]),f=(0,s.yK)((e=>({checkIcon:{color:e.lightIconColor,width:12,height:"auto",marginLeft:4},plusIcon:{color:e.lightIconColor,width:12,height:"auto"},createSprintRow:{display:"flex",gap:4},sprintRow:{display:"flex",maxHeight:22,alignItems:"center"},recordTitle:{...p&&{marginRight:12}}})),[p]),h="purple",v=(0,s.Fg)(),C=(0,F.KR)(v,h),b=n.useMemo((()=>{const e="actionId"===(null==c?void 0:c.type);return{key:"new_sprint",action:()=>{d({type:"actionId"}),a.close()},render:t=>(0,se.jsx)(H.Z,{...t,icon:(0,M.R)(f.plusIcon),title:(0,se.jsxs)("div",{style:f.createSprintRow,children:[(0,se.jsx)(l.FormattedMessage,{id:"completeAutomationSprintModal.selectSprintDropdown.createNew",defaultMessage:"New sprint"}),(0,se.jsx)(re.Z,{isRound:!0,showRemoveButton:!1,value:(0,se.jsx)(l.FormattedMessage,{id:"completeAutomationSprintModal.selectSprintDropdown.createNewToken",defaultMessage:"Next"}),format:x.lo.Medium,isSingle:!0,color:C.textColor,backgroundColor:C.backgroundColor,showColoredDot:h})]}),right:e&&(0,w.e)(f.checkIcon)})}}),[c,a,d,f,C]),k=(0,i.VK)((()=>t.map((e=>{const t={id:e,table:T.iU,spaceId:m},o=K.G.createChildStore(u,t),n=o.getIcon(),i="pointer"===(null==c?void 0:c.type)&&_.dr.isEqual(c.pointer,t);return{key:e,action:()=>{d({type:"pointer",pointer:t}),a.close()},render:e=>(0,se.jsx)(H.Z,{...e,icon:n&&(0,se.jsx)(J.Z,{disabled:!0,icon:n,isEmptyPage:!1,size:20}),title:(0,se.jsx)("div",{style:f.sprintRow,children:g.map((e=>"title"===e.property?(0,se.jsx)(ee.Z,{store:o,style:f.recordTitle},"title"):(0,se.jsx)(E.Z,{store:o,property:e.property,disabled:!1,locked:!1,format:W.C.Relation,tableWrap:!1,blockPropertyValueOverlayStore:S,collectionStore:u},e.property))).filter(B.$K)}),right:i&&(0,w.e)(f.checkIcon)})}}))),[u,S,a,c,g,m,d,f,t]),j=[{key:"sprints",items:n.useMemo((()=>k.length>0?k:[b]),[k,b]),render:e=>(0,se.jsx)(te.Z,{...e})}];let I;return I=p?{menuType:L.og.ActionSheet}:{menuType:L.og.Popup,maxHeight:"50vh",minWidth:230},(0,se.jsx)(G.Z,{...I,children:(0,se.jsx)($.Z,{type:$.i.Vertical,initialFocus:0,sections:j})})}function be(e){const{sprintDateRange:t,setSprintDateRange:o}=e,a=(0,l.useIntl)(),{isMobile:c}=(0,r.Fy)(),d=n.useMemo((()=>fe({sprintDateRange:t,intl:a})),[t,a]),u=pe({isMobile:c}),p=(0,s.yK)((e=>({button:{...!d&&{color:e.lightTextColor}}})),[d]),m=(0,i.VK)((()=>d||(0,se.jsx)(l.FormattedMessage,{id:"completeAutomationSprintModal.sprintSummary.nextSprintDate.placeholder",defaultMessage:"Select dates"})),[d]);return(0,se.jsx)(U.ZP,{popupType:c?U.Z4.SlideUp:U.Z4.Popup,alignmentToOrigin:U.vR.Start,placementToOrigin:U.pO.Bottom,render:e=>(0,se.jsx)(ke,{sprintDateRange:t,setSprintDateRange:o,onDismiss:()=>{e.close()}}),renderOrigin:e=>(0,se.jsxs)(Y.Z,{...e,style:{...u.dropdownButton,...p.button},children:[m,(0,b.i)(u.dropdownChevronIcon)]})})}function ke(e){const{sprintDateRange:t,setSprintDateRange:o,onDismiss:i}=e,{isMobile:s}=(0,r.Fy)(),a=n.useMemo((()=>({starting:null!=t&&t.start_date?{type:"date",start_date:t.start_date}:void 0,ending:null!=t&&t.end_date?{type:"date",start_date:t.end_date}:void 0})),[t]);let c;return c=s?{menuType:L.og.Modal,right:(0,se.jsx)(Q.DoneMenuText,{}),onClickRight:i}:{menuType:L.og.Popup,maxHeight:"50vh",paddingTop:6},(0,se.jsxs)(G.Z,{...c,children:[(0,se.jsx)(te.Z,{children:(0,se.jsx)(oe.Z,{title:void 0,disableMenuWrap:!0,allowRelativeRangeFilter:!0,value:a,onUpdate:e=>{var t,n;if(e.error)return;const i={...a,...e.value},r=null===(t=i.starting)||void 0===t?void 0:t.start_date,s=null===(n=i.ending)||void 0===n?void 0:n.start_date;o({type:"daterange",start_date:r,end_date:s})},onDismiss:i})}),(0,se.jsx)(te.Z,{topBorder:!0,children:(0,se.jsx)(H.Z,{focused:!1,onClick:()=>{o(void 0)},title:(0,se.jsx)(l.FormattedMessage,{id:"completeAutomationSprintModal.sprintSummary.datePicker.clear",defaultMessage:"Clear"})})})]})}var Me=o(842875),je=o(559054),_e=o(396367),Te=o(454642),Ie=o(139927),Ve=o(416732);function Fe(e){if(!e)return;if("aggregation"!==e.type)return;if("text"!==e.aggregationResult.type)return;const t=e.aggregationResult.value,o=null==t?void 0:t.split("/");if(!o||2!==o.length)return;const n=Number(o[0]),i=Number(o[1]);return{completedTaskCount:n,incompleteTaskCount:i-n,totalTaskCount:i,completedTaskPercent:0===i?0:n/i}}function Be(e){if(!e)return;const t=e.getPropertyMapping(),o=null==t?void 0:t[y.Es.TaskToSprintRelation];if(!o)return;return Ve.Ws.filter.property=o,{...Ve.Ws.filter,property:o}}function Re(e,t){if(!t)return;const o=t.getPropertyMapping(),n=Be(t);if(!n)return;const i=null==o?void 0:o[y.Es.Status];if(!i)return;const r=t.getSchema()[i];if(!r||"status"!==r.type)return;const s=(0,Ie.F_)(e,r);return s?{type:"aggregation",filter:{operator:"and",filters:[n]},aggregation:{aggregator:{operator:"count_per_group",groupName:s},property:i}}:void 0}class Pe extends f.default{getInitialState(){return{isLoading:!0,currentSprintId:void 0,querySprintsResult:void 0,currentSprintTaskSummary:void 0}}updateCurrentSprint(e){const{querySprintsResult:t,currentSprintTaskSummary:o}=this.state;void 0!==e&&void 0!==t&&void 0!==o?this.setState({isLoading:!1,currentSprintId:e,querySprintsResult:t,currentSprintTaskSummary:o}):e?this.setState({...this.state,currentSprintId:e}):this.setState({...this.state,isLoading:!0,currentSprintId:e})}updateNextAndFutureSprints(e){const{currentSprintId:t,currentSprintTaskSummary:o}=this.state;void 0!==t&&void 0!==e&&void 0!==o?this.setState({isLoading:!1,currentSprintId:t,querySprintsResult:e,currentSprintTaskSummary:o}):e?this.setState({...this.state,querySprintsResult:e}):this.setState({...this.state,isLoading:!0,querySprintsResult:e})}updateCurrentSprintTaskSummary(e){const{currentSprintId:t,querySprintsResult:o}=this.state;void 0!==t&&void 0!==o&&void 0!==e?this.setState({isLoading:!1,currentSprintId:t,querySprintsResult:o,currentSprintTaskSummary:e}):e?this.setState({...this.state,currentSprintTaskSummary:e}):this.setState({...this.state,isLoading:!0,currentSprintTaskSummary:e})}}const Ae=Pe;function Ze(e){const{taskCollectionContextStore:t,completeSprintAutomationContext:o,children:s,isModalOpen:a}=e,{sprintCollectionStore:c}=o,d=c.id,u=(0,r.O7)(),p=(0,i.VK)((()=>new Ae),[]),m=(0,i.VK)((()=>p.state),[p]),g=(0,i.VK)((()=>{var e;const o=t.relativeVariableStore.state;return null==o||null===(e=o[d])||void 0===e?void 0:e.current}),[d,t]);n.useEffect((()=>{p.updateCurrentSprint(g)}),[g,p]);const[{value:S}]=(0,je.r5)((async()=>await async function(e){var t;const{environment:o,completeSprintAutomationContext:n}=e,{sprintCollectionStore:i}=n,r=function(e){var t,o;const{sprintCollectionStore:n,sprintCollectionSchema:i}=e,r=n.getPropertyMapping(),s=null==r?void 0:r[y.b0.StatusV2];if(!s)return;const l=i[s];if(!l||"status"!==l.type)return;const a=null===(t=l.options)||void 0===t||null===(t=t.find((e=>e.id===y.YE)))||void 0===t?void 0:t.value,c=null===(o=l.options)||void 0===o||null===(o=o.find((e=>e.id===y.eH)))||void 0===o?void 0:o.value;if(!a||!c)return;const d=_e.qB[y.p$].next.reducer.getCombinatorFilter(i);if(!d)return;const u={type:"results",filter:d,limit:Le},p={type:"results",filter:{operator:"and",filters:[{property:s,filter:{operator:"status_is",value:{type:"is_option",value:c}}}]},limit:Le};return{[y.YE]:u,[y.eH]:p}}(n),s=i.getPropertyMapping(),l=null==s?void 0:s[y.b0.Dates],a=null==s?void 0:s[y.b0.UniqueId];if(!r||!l||!a)return;const c={userId:o.currentUser.id,userTimeZone:(0,Me.r)(),searchQuery:void 0,sort:[{property:l,direction:"ascending"},{property:a,direction:"ascending"}],reducers:r},d=null===(t=i.getParentBlockStore())||void 0===t?void 0:t.getCollectionViewStores()[0],u=i.getSpaceId();if(!d)return;const p=await Te.queryCollection(o,{source:{type:"collection",id:i.id,spaceId:u},collectionView:{id:d.id,spaceId:u},loader:c},void 0,{src:"complete_sprint_modal_sprint_picker"});if("success"!==p.type)return;const m=p.data.result.reducerResults[y.YE],g=p.data.result.reducerResults[y.eH];if("results"!==m.type||"results"!==g.type)return;const S=m.blockIds,f=g.blockIds;return{nextSprintIds:S,futureSprintIds:f}}({environment:u,completeSprintAutomationContext:o})),[g,u,o]);n.useEffect((()=>{p.updateNextAndFutureSprints(S)}),[S,p]);const f=(0,l.useIntl)(),[{value:h}]=(0,je.r5)((async()=>await async function(e){var t;const{environment:o,completeSprintAutomationContext:n,intl:i}=e,{taskCollectionStore:r}=n,s=Re(i,r);if(!s)return;const l=Be(r);if(!l)return;const a={filter:{operator:"and",filters:[l]},userId:o.currentUser.id,userTimeZone:(0,Me.r)(),searchQuery:"",sort:[],reducers:{completed_tasks_in_current_sprint:s}},c=null===(t=r.getParentBlockStore())||void 0===t?void 0:t.getCollectionViewStores()[0],d=r.getSpaceId();if(!c)return;const u=await Te.queryCollection(o,{source:{type:"collection",id:r.id,spaceId:d},collectionView:{id:c.id,spaceId:d},loader:a},void 0,{src:"complete_sprint_modal_sprint_picker"});if("success"!==u.type)return;return Fe(u.data.result.reducerResults.completed_tasks_in_current_sprint)}({intl:f,environment:u,completeSprintAutomationContext:o})),[g,u,o,a]);return n.useEffect((()=>{p.updateCurrentSprintTaskSummary(h)}),[h,p]),(0,se.jsx)(se.Fragment,{children:s({completeSprintAutomationState:m,onAutomationComplete:()=>{p.reset()}})})}const Le=5;var De=o(863296),Oe=o(397004),Ne=o(475498),Ke=o(56247);function Ee(e){const{percentage:t}=e;return(0,se.jsx)(Ke.b,{numberValue:t,numberFormat:void 0,numberShowAs:{type:"ring",maxValue:1,color:"blue",showValue:!1},shouldRenderTooltip:!1,progressSize:15})}var We=o(568785);const He=function(e){const{isLoading:t,taskSummary:o,styles:n}=e;return(0,se.jsx)("div",{style:{width:16,height:"auto",...n},children:t?(0,se.jsx)(We.Z,{}):(0,se.jsx)(Ee,{percentage:(null==o?void 0:o.completedTaskPercent)??0})})};function Ue(e){const{taskCollectionContextStore:t,children:o}=e,n=(0,i.VK)((()=>(0,Oe.Nq)(t)),[t]),r=(0,i.VK)((()=>t.collectionStore()),[t]),s=(0,l.useIntl)(),a=(0,i.VK)((()=>Re(s,r)),[r,s]);return!a||n?null:(0,se.jsx)(Ne.Z,{id:"completed_tasks_in_current_sprint_view",collectionContextStore:t,reducer:a,render:e=>{const t=Fe(e.state);return t?(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(ze,{currentSprintTasksInView:t}),o(t)]}):null}})}function ze(e){const{currentSprintTasksInView:t}=e,o=(0,s.yK)((e=>({summary:{display:"flex",alignItems:"center",justifyContent:"center",columnGap:5,color:e.lightTextColor,fontSize:a.Z.fontSize.UIRegular.desktop,fontWeight:a.Z.fontWeight.regular,whiteSpace:"nowrap"}})),[]),{isPhone:n}=(0,r.Fy)();return n?null:(0,se.jsxs)("div",{style:o.summary,children:[(0,se.jsx)(He,{styles:{paddingTop:1},isLoading:!1,taskSummary:t}),(0,se.jsx)(l.FormattedMessage,{id:"completeAutomationSprintAutomation.inlineSummary.completedPercentSummary",defaultMessage:"{completedTaskCount} / {totalTaskCount} tasks",values:{completedTaskCount:t.completedTaskCount,totalTaskCount:t.totalTaskCount}})]})}function qe(e){const{collectionContextStore:t,completeSprintAutomationContext:o}=e,s=(0,r.O7)(),[l,a]=n.useState(!1),[g,S]=n.useState(!1),f=n.useCallback((()=>{S(!1)}),[S]),h=(0,i.VK)((()=>o.permissionsContext.canEdit),[o.permissionsContext.canEdit]),y=(0,i.VK)((()=>m.default.state.currentUserSettingsStore),[]),x=()=>{S(!0);"complete-sprint-button-tooltip"===(0,p.wF)(y,"sprints-onboarding")&&d.tutorialGoToNextStep(s,"sprints-onboarding"),c.$X(s,{...(0,u.Pn)(t),action:"open_modal"})};return h?(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(Ze,{completeSprintAutomationContext:o,taskCollectionContextStore:t,isModalOpen:g,children:e=>{let{completeSprintAutomationState:n,onAutomationComplete:i}=e;return(0,se.jsx)(ae,{completeSprintAutomationContext:o,isOpen:g,onDismiss:f,setIsLoading:a,taskCollectionContextStore:t,completeSprintAutomationState:n,onAutomationComplete:i})}}),(0,se.jsx)(Ue,{taskCollectionContextStore:t,children:()=>(0,se.jsx)(Ge,{taskCollectionContextStore:t,onClick:x,isLoading:l})})]}):null}function Ge(e){const{taskCollectionContextStore:t,onClick:o,isLoading:c}=e,{isPhone:d}=(0,r.Fy)(),u=n.useRef(null),p=function(e){const{isPhone:t}=e;return(0,s.yK)((e=>({button:{height:26,marginLeft:8,fontWeight:a.Z.fontWeight.medium,...t&&{flexGrow:1,borderRadius:8,height:44}}})),[t])}({isPhone:d}),S=(0,i.VK)((()=>t.collectionViewBlockStore()),[t]),f=(0,i.VK)((()=>m.default.state.currentSpaceStore),[]),h=(0,i.VK)((()=>null==S?void 0:S.getSpaceId()),[S]);if(!S)return(0,se.jsx)(se.Fragment,{});const y=h===(null==f?void 0:f.id);return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(De.Z,{ref:u,onClick:o,style:p.button,disabled:c,disabledFeedback:c,children:(0,se.jsx)(l.FormattedMessage,{defaultMessage:"Complete sprint",id:"completeSprintAutomationButton.label"})}),y&&(0,se.jsx)(g.Yy,{origin:u})]})}var $e=o(730120);function Qe(e){var t;const{collectionContextStore:o,sprintAutomationContext:n}=e,l=(0,s.yK)((e=>({summary:{display:"flex",alignItems:"center",justifyContent:"center",marginLeft:17,columnGap:5,color:e.lightTextColor,fontSize:a.Z.fontSize.UIRegular.desktop,fontWeight:a.Z.fontWeight.regular,whiteSpace:"nowrap"},icon:{width:16,height:"auto",paddingTop:2}})),[]),{isPhone:c}=(0,r.Fy)(),d=(0,i.VK)((()=>{var e;const t=null===(e=n.automationContext)||void 0===e?void 0:e.automationStore.getRunAt();if(!t)return;const o=$e.ou.fromMillis(t,{zone:"utc"}).toLocal().startOf("day"),i=$e.ou.now().startOf("day"),r=o.diff(i,"days").days;return r<1?"soon":1===r?"today":2===r?"tomorrow":r-1}),[null===(t=n.automationContext)||void 0===t?void 0:t.automationStore]);return d?(0,se.jsx)(Ue,{taskCollectionContextStore:o,children:()=>c?null:(0,se.jsxs)("div",{style:l.summary,children:[(0,j.N)(l.icon),(0,se.jsx)(Ye,{daysRemaining:d})]})}):null}function Ye(e){const{daysRemaining:t}=e;return"soon"===t?(0,se.jsx)(l.FormattedMessage,{id:"completeAutomationSprintAutomation.inlineSummary.endingSoon",defaultMessage:"Ending soon"}):"today"===t?(0,se.jsx)(l.FormattedMessage,{id:"completeAutomationSprintAutomation.inlineSummary.endsToday",defaultMessage:"Ends today"}):"tomorrow"===t?(0,se.jsx)(l.FormattedMessage,{id:"completeAutomationSprintAutomation.inlineSummary.endsTomorrow",defaultMessage:"Ends tomorrow"}):(0,se.jsx)(l.FormattedMessage,{id:"completeAutomationSprintAutomation.inlineSummary.daysRemaining",defaultMessage:"Ends in {daysRemaining} days",values:{daysRemaining:t}})}const Xe=function(e){var t;const{collectionContextStore:o}=e,n=(0,i.VK)((()=>o.completeSprintButtonContextStore.state),[o]),r=(0,i.VK)((()=>{var e;return Boolean(null==n||null===(e=n.automationContext)||void 0===e?void 0:e.automationStore.isActive())}),[null==n||null===(t=n.automationContext)||void 0===t?void 0:t.automationStore]);return n?r?(0,se.jsx)(Qe,{collectionContextStore:o,sprintAutomationContext:n}):(0,se.jsx)(qe,{collectionContextStore:o,completeSprintAutomationContext:n}):null}},311335:(e,t,o)=>{o.d(t,{EF:()=>P,Li:()=>j,R4:()=>Z,Xd:()=>b,cB:()=>R,i1:()=>_,qM:()=>T,qk:()=>k,rU:()=>B,sA:()=>A,vM:()=>F,wB:()=>M});o(21703);var n=o(443261),i=o.n(n),r=o(603865),s=o(823290),l=o(576205),a=o(901274),c=o(335102),d=o(471924),u=o(186517),p=o(177420),m=o(606287),g=o(76233),S=o(653965),f=o(940470),h=o(401898),y=o(319385),x=o(206258),v=o(535057),C=o(623879),w=o(433929);function b(e){return e.isTriggerType("event")||e.isTriggerType("notification_event")}function k(e){const{automationContextStore:t,automationStore:o,collectionStore:n}=e,i=n.getSchema(),r=o.getKeyStore("properties").getKeyStore("name").getValue();if(null==r||!r.trim())return!1;const s=o.getTrigger(),l="event"===(null==s?void 0:s.type),a="notification_event"===(null==s?void 0:s.type);if(!l&&!a)return!1;const{pagesAdded:d,pagePropertiesEdited:u,source:p}=s.event;if(void 0===p)return!1;if("some"===u.type&&u.some.some((e=>I({collectionSchema:i,property:e.property})||V({collectionSchema:i,property:e.property,type:"trigger"}))))return!1;if(!d&&("none"===u.type||"some"===u.type&&0===u.some.length))return!1;const m=o.getActionStores().filter((e=>e.isDefined()));return 0!==m.length&&m.every((e=>function(e){const{actionStore:t,automationContextStore:o,collectionStore:n}=e,i=(null==o?void 0:o.getValidationErrorsForAction(t.id))||[];if(i.length>0)return!1;if(t.isType("slack_notification"))return(0,h.$K)(t.getConfigStore().getKeyStore("external_bot_id").getValue())&&(0,h.$K)(t.getConfigStore().getKeyStore("target").getValue());if(t.isType("update_pages")){const e=t.getConfigStore().getKeyStore("target").getValue(),i=t.getConfigStore().getKeyStore("properties").getValue()??[];if(!(0,h.$K)(e)||0===i.length)return!1;if("collection"===e.type){const t=x.NW.createChildStore(n,e.collection).getSchema();if(i.some((e=>I({property:e,collectionSchema:t})||V({collectionSchema:t,property:e,type:"action"}))))return!1}else if("variable"===e.type){const t=(0,c.MY)(e.id);if("global"===t.source&&"button_page"===t.global){const e=n.getSchema();if(i.some((t=>I({property:t,collectionSchema:e})||V({collectionSchema:e,property:t,type:"action"}))))return!1}else{const t=null==o?void 0:o.compilationResultStore.state;if(!t||f.x.isFail(t))return!1;const n=(0,c.vx)(t.value.valueTypes,e.id),r=n?M(n,o.context.parentRecordStore):void 0;if(!r)return!1;const s=r.getSchema();if(i.some((e=>I({property:e,collectionSchema:s})||V({collectionSchema:s,property:e,type:"action"}))))return!1}}else{if("page"===e.type)return!1;(0,h.t1)(e)}return!0}if(t.isType("create_page")){const e=t.getConfigStore().getKeyStore("collection").getValue();if(!(0,h.$K)(e))return!1;const o=x.NW.createChildStore(n,e).getSchema();return!(t.getConfigStore().getKeyStore("properties").getValue()??[]).some((e=>I({property:e,collectionSchema:o})||V({collectionSchema:o,property:e,type:"action"})))}if(t.isType("assistant"))return!0;if(t.isType("send_in_app_notification")){const e=t.getConfigStore(),o=e.getKeyStore("target").getValue(),n=e.getKeyStore("notification_message").getValue();if(!o||!n||(0,g.PgY)(n.value))return!1;switch(o.type){case"property":if(!o.propertyId||!o.collectionPointer)return!1;break;case"formula":if(!o.value||!o.value.value||S.xb(o.value.value))return!1}return!0}throw new Error(`isActionStoreComplete not implemented for ${t.getType()}`)}({actionStore:e,automationContextStore:t,collectionStore:n})))}function M(e,t){let o;return"block"===e.type.type&&e.type.collection?o=x.NW.createChildStore(t,e.type.collection):"array"===e.type.type&&"block"===e.type.of.type&&e.type.of.collection&&(o=x.NW.createChildStore(t,e.type.of.collection)),o}function j(e){const{collectionStore:t}=e;if(!t||L(t)||D(t))return!1;if((t.getFormat().automation_ids??[]).length>=s.ss&&!(0,v.sX)())return!1;const o=t.pointer,n=t.getSpaceId();return(0,a.IC)({targetTriggerType:"event",targetParentPointer:o,targetSpaceId:n}).every((e=>{let{pointer:o,minimumRequiredRole:n}=e;const i=t.getRecordRole(o);return!!i&&(0,u.yY)(i,n)}))}function _(e){const{automationStore:t,actionStores:o,collectionStore:n}=e,i=t.getParentStore();if(!i||L(i)||D(n))return!1;const r=t.getMinimumFieldsForPermissions();if(!r)return!1;if(!o.every((e=>e.isDefined())))return!1;const s=o.some((e=>!e.isType("slack_notification")));if(!(0,v.sX)()&&s)return!1;return(0,a.fz)({automationValue:r,actionValues:o.map((e=>({config:e.getConfig(),type:e.getType()})))}).every((e=>{let{pointer:o,minimumRequiredRole:n}=e;const i=t.getRecordRole(o);return!!i&&(0,u.yY)(i,n)}))}function T(e){const{automationStore:t,collectionStore:o}=e,n=t.getParentStore();if(!n||L(n)||D(o))return!1;const i=t.getMinimumFieldsForPermissions();if(!i)return!1;return(0,a.bM)(i).every((e=>{let{pointer:o,minimumRequiredRole:n}=e;const i=t.getRecordRole(o);return!!i&&(0,u.yY)(i,n)}))}function I(e){const{property:t,collectionSchema:o}=e;return!!o&&!o[t]}function V(e){const{collectionSchema:t,property:o,type:n}=e,i=null==t?void 0:t[o];return!i||("action"===n?!(0,r.SF)(i):!r.Ym[i.type])}function F(e){const{automationStore:t,collectionStore:o}=e;if(!t.isTriggerType("event")&&!t.isTriggerType("notification_event"))return!1;const n=t.getEventConfiguration();if(!n||void 0===n.source||n.source.type===m.vF||"filter"===n.source.type)return!1;const i=x.Xr.createChildStore(o,n.source.pointer);return function(e){const t=B(e);return(0,h.$K)(t)}({collectionSchema:o.getSchema(),collectionViewStore:i})}function B(e){var t;const{collectionViewStore:o,collectionSchema:n}=e,i=o.getPropertyFiltersStore().getValue()??[],s=null===(t=o.getQuery(n))||void 0===t?void 0:t.filter,a={operator:"and",filters:(0,l.OH)({propertyFilters:i,combinatorFilter:s,schema:n})},c=(0,l.SH)(a,(e=>{if((0,l.aN)(e)){const t=n[e.property];return!!t&&!(0,r.TX)(t)}return!1}));if(c)return(0,l.aN)(c)?c.property:(0,l.Mm)(c)?c.timestamp:void 0}function R(e){if("collectionTypedView"===e.contextType)return!1;const t=e.collectionStore();return!!t&&(!(t.isSyncedCollection()&&!y.default.checkGate({gateName:"support_synced_database_automations"}))&&void 0===e.collectionViewModuleContextStore.state)}function P(e){const{collectionSchema:t,propertyIds:o,searchTerm:n}=e;if(!n)return o.slice(0);const r=new Map,s=o.map((e=>{const o=t[e],n=o?`${o.name} ${C.SO[o.type]}`:"";return r.set(e,n),n})),l=i().filter(n,s).map((e=>{let{original:t}=e;return t}));return o.filter((e=>l.includes(r.get(e)??"")))}function A(e){const{automationId:t,automationName:o,collectionStore:n,userId:i}=e;return function(e){const{actionIds:t,automationId:o,collectionStore:n,eventConfiguration:i,lastEditedTime:r,properties:s,userId:l}=e,a=Date.now();return{action_ids:t,alive:!0,created_by_id:l,created_by_table:"notion_user",created_time:a,id:o,last_edited_by_id:l,last_edited_by_table:"notion_user",last_edited_time:r??a,parent_id:n.id,parent_table:m.vF,properties:s??{},space_id:n.getSpaceId(),status:"active",trigger:{event:i,id:d.Il(),type:"event"},version:1}}({actionIds:[],automationId:t,collectionStore:n,eventConfiguration:{pagesAdded:!1,pagePropertiesEdited:{type:"none"},source:{pointer:n.getSpaceShardedPointer(),type:m.vF}},properties:{name:o},userId:i})}function Z(e){const t=e.getActionStores().filter((0,h.AO)((e=>e.isType("slack_notification")?{true:e}:{false:e}))),o={};for(const n of t){const e=n.getConfig(),t=null==e?void 0:e.external_bot_id;if(!t)continue;const i=x.Qx.createChildStore(n,{id:t,spaceId:n.getSpaceId(),table:p.cZ}).getCreatedByStore();i&&(o[n.id]=i.getDisplayName(w.default.getIntl()))}return o}function L(e){if(!y.default.checkGate({gateName:"prevent_edits_trash"}))return!1;const t=e.getParentBlockStore();return!t||t.pathIsDead()}function D(e){const t=e.getParentBlockStore();return(null==t?void 0:t.isLocked())??!0}},880025:(e,t,o)=>{o.d(t,{Vn:()=>s,mF:()=>l,qf:()=>c});var n=o(709291),i=o(433929);const r=(0,n.defineMessages)({default:{defaultMessage:"Light gray",id:"colors.select.lightGray"},gray:{defaultMessage:"Gray",id:"colors.select.gray"},translucentGray:{defaultMessage:"Gray",id:"colors.select.gray"},brown:{defaultMessage:"Brown",id:"colors.select.brown"},orange:{defaultMessage:"Orange",id:"colors.select.orange"},yellow:{defaultMessage:"Yellow",id:"colors.select.yellow"},green:{defaultMessage:"Green",id:"colors.select.green"},blue:{defaultMessage:"Blue",id:"colors.select.blue"},purple:{defaultMessage:"Purple",id:"colors.select.purple"},pink:{defaultMessage:"Pink",id:"colors.select.pink"},red:{defaultMessage:"Red",id:"colors.select.red"}});function s(e){const t=r[e]||r.gray;return i.default.formatMessage(t)}const l=(0,n.defineMessages)({foregroundColorDefault:{id:"action.foregroundColor.default.name",defaultMessage:"Default"},foregroundColorGray:{id:"action.foregroundColor.gray.name",defaultMessage:"Gray"},foregroundColorBrown:{id:"action.foregroundColor.brown.name",defaultMessage:"Brown"},foregroundColorOrange:{id:"action.foregroundColor.orange.name",defaultMessage:"Orange"},foregroundColorYellow:{id:"action.foregroundColor.yellow.name",defaultMessage:"Yellow"},foregroundColorGreen:{id:"action.foregroundColor.green.name",defaultMessage:"Green"},foregroundColorBlue:{id:"action.foregroundColor.blue.name",defaultMessage:"Blue"},foregroundColorPurple:{id:"action.foregroundColor.purple.name",defaultMessage:"Purple"},foregroundColorPink:{id:"action.foregroundColor.pink.name",defaultMessage:"Pink"},foregroundColorRed:{id:"action.foregroundColor.red.name",defaultMessage:"Red"},backgroundColorGray:{id:"action.backgroundColor.gray.name",defaultMessage:"Gray background"},backgroundColorBrown:{id:"action.backgroundColor.brown.name",defaultMessage:"Brown background"},backgroundColorOrange:{id:"action.backgroundColor.orange.name",defaultMessage:"Orange background"},backgroundColorYellow:{id:"action.backgroundColor.yellow.name",defaultMessage:"Yellow background"},backgroundColorGreen:{id:"action.backgroundColor.green.name",defaultMessage:"Green background"},backgroundColorBlue:{id:"action.backgroundColor.blue.name",defaultMessage:"Blue background"},backgroundColorPurple:{id:"action.backgroundColor.purple.name",defaultMessage:"Purple background"},backgroundColorPink:{id:"action.backgroundColor.pink.name",defaultMessage:"Pink background"},backgroundColorRed:{id:"action.backgroundColor.red.name",defaultMessage:"Red background"},backgroundColorDefault:{id:"action.backgroundColor.default.name",defaultMessage:"Default background"}}),a={default:{...l.foregroundColorDefault},gray:{...l.foregroundColorGray},brown:{...l.foregroundColorBrown},orange:{...l.foregroundColorOrange},yellow:{...l.foregroundColorYellow},teal:{...l.foregroundColorGreen},blue:{...l.foregroundColorBlue},purple:{...l.foregroundColorPurple},pink:{...l.foregroundColorPink},red:{...l.foregroundColorRed},gray_background:{...l.backgroundColorGray},brown_background:{...l.backgroundColorBrown},orange_background:{...l.backgroundColorOrange},yellow_background:{...l.backgroundColorYellow},teal_background:{...l.backgroundColorGreen},blue_background:{...l.backgroundColorBlue},purple_background:{...l.backgroundColorPurple},pink_background:{...l.backgroundColorPink},red_background:{...l.backgroundColorRed}};function c(e){return a[e]}},305933:(e,t,o)=>{o.d(t,{Z:()=>r});var n=o(749085);class i extends n.default{getInitialState(){return!1}}const r=new i},67695:(e,t,o)=>{o.d(t,{Z:()=>r});var n=o(535431);class i extends n.Z{findTableHeaderCell(e,t){return this.find((o=>o.collectionContextStore===e&&o.property===t))}}const r=new i},943604:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o(749085).default.createValue({open:!1},{name:"ConfirmOverwriteModalStore"})},745483:(e,t,o)=>{o.d(t,{Z:()=>l});var n=o(749085),i=o(292595);class r extends n.default{getInitialState(){return{openModals:new Set}}}const s=new r,l=s;(0,i.exposeDebugValue)("GlobalModalStore",s)},361254:(e,t,o)=>{o.d(t,{Z:()=>r});var n=o(749085);class i extends n.default{getInitialState(){return{open:!1,openAnimationCompleted:!0,closeAnimationCompleted:!0}}}const r=i},156638:(e,t,o)=>{o.d(t,{Z:()=>r});var n=o(749085);class i extends n.default{getInitialState(){return{open:!1}}}const r=new i},240745:(e,t,o)=>{o.d(t,{M:()=>r});o(667294);var n=o(745238),i=o(785893);const r=(0,n.IU)("arrowDown",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M8 1.57715C7.5625 1.57715 7.25488 1.88477 7.25488 2.33594V10.8262L7.30957 12.3027L5.50488 10.2861L3.95312 8.75488C3.82324 8.625 3.63184 8.53613 3.42676 8.53613C3.0166 8.53613 2.70898 8.85059 2.70898 9.26758C2.70898 9.46582 2.78418 9.64355 2.94141 9.80762L7.44629 14.3193C7.59668 14.4697 7.79492 14.5586 8 14.5586C8.20508 14.5586 8.40332 14.4697 8.55371 14.3193L13.0586 9.80762C13.2158 9.64355 13.291 9.46582 13.291 9.26758C13.291 8.85059 12.9902 8.53613 12.5801 8.53613C12.3682 8.53613 12.1836 8.625 12.0469 8.75488L10.4951 10.2861L8.69043 12.2959L8.74512 10.8262V2.33594C8.74512 1.88477 8.44434 1.57715 8 1.57715Z"})})},808298:(e,t,o)=>{o.d(t,{N:()=>r});o(667294);var n=o(745238),i=o(785893);const r=(0,n.IU)("arrowDownThick",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M7.99316 1.52246C7.40527 1.52246 7.00195 1.93262 7.00195 2.54785V10.1357L7.07031 11.6191L5.69629 10.0332L4.1582 8.50195C3.98047 8.31738 3.74805 8.19434 3.44727 8.19434C2.91406 8.19434 2.51074 8.59082 2.51074 9.15137C2.51074 9.41113 2.61328 9.65039 2.81836 9.8623L7.26172 14.3125C7.44629 14.5039 7.72656 14.6133 7.99316 14.6133C8.2666 14.6133 8.54004 14.5039 8.72461 14.3125L13.1748 9.8623C13.3799 9.65039 13.4824 9.41113 13.4824 9.15137C13.4824 8.59082 13.0791 8.19434 12.5459 8.19434C12.252 8.19434 12.0195 8.31738 11.835 8.50195L10.2969 10.0332L8.92285 11.6191L8.98438 10.1357V2.54785C8.98438 1.93262 8.58789 1.52246 7.99316 1.52246Z"})})},340304:(e,t,o)=>{o.d(t,{w:()=>r});o(667294);var n=o(745238),i=o(785893);const r=(0,n.IU)("document",{viewBox:"0 0 23.5 23.5",svg:(0,i.jsx)("path",{d:"M9.14 8.156a.494.494 0 01-.5-.5c0-.14.047-.258.141-.351a.487.487 0 01.36-.14h5.718a.477.477 0 01.492.492.494.494 0 01-.14.35.464.464 0 01-.352.15H9.141zm0 2.664a.487.487 0 01-.359-.14.504.504 0 01-.14-.36c0-.135.046-.25.14-.343a.487.487 0 01.36-.141h5.718a.477.477 0 01.493.484c0 .14-.047.26-.141.36a.477.477 0 01-.352.14H9.141zm0 2.672a.487.487 0 01-.359-.14.468.468 0 01-.14-.344c0-.14.046-.258.14-.352a.473.473 0 01.36-.148h2.765c.146 0 .266.05.36.148a.48.48 0 01.14.352c0 .135-.047.25-.14.344a.487.487 0 01-.36.14H9.141zm-3.843 4.266V5.968c0-.838.213-1.473.64-1.905.428-.438 1.06-.657 1.899-.657h8.32c.839 0 1.472.219 1.899.656.427.433.64 1.068.64 1.907v11.789c0 .844-.213 1.482-.64 1.914-.427.432-1.06.648-1.899.648h-8.32c-.839 0-1.471-.216-1.899-.648-.427-.432-.64-1.07-.64-1.914zm1.539-.094c0 .36.094.635.281.828.188.193.472.29.852.29h8.062c.38 0 .664-.097.852-.29.187-.193.281-.469.281-.828V6.07c0-.364-.094-.643-.281-.836-.188-.198-.471-.296-.852-.296H7.97c-.38 0-.664.098-.852.296-.187.193-.281.472-.281.836v11.594z"})})},44643:(e,t,o)=>{o.d(t,{L:()=>r});o(667294);var n=o(745238),i=o(785893);const r=(0,n.IU)("eyeHidePadded",{viewBox:"0 0 24 24",svg:(0,i.jsx)("path",{d:"M17.3867 18.1074C17.6055 18.3193 17.9404 18.333 18.1592 18.1074C18.3848 17.875 18.3711 17.5469 18.1592 17.335L6.5791 5.76855C6.37402 5.55664 6.01855 5.5498 5.80664 5.76855C5.60156 5.97363 5.60156 6.3291 5.80664 6.53418L17.3867 18.1074ZM12 6.1582C10.8105 6.1582 9.73047 6.36328 8.72559 6.69141L9.81934 7.78516C10.5098 7.58691 11.2275 7.4707 12 7.4707C16.3682 7.4707 19.8408 11.2715 19.8408 12.0713C19.8408 12.6113 18.7334 14.0059 16.9766 15.1064L17.9883 16.125C20.1348 14.7168 21.3857 12.8779 21.3857 12.0713C21.3857 10.6699 17.6055 6.1582 12 6.1582ZM12 17.9912C13.2646 17.9912 14.4199 17.7725 15.4658 17.4102L14.3789 16.3232C13.6338 16.542 12.8477 16.6787 12 16.6787C7.63184 16.6787 4.15918 13.0283 4.15918 12.0713C4.15918 11.6133 5.32129 10.1299 7.19434 8.98145L6.16211 7.94922C3.92676 9.37109 2.60742 11.251 2.60742 12.0713C2.60742 13.4727 6.46973 17.9912 12 17.9912ZM15.4111 13.3906C15.5889 12.9873 15.6914 12.5361 15.6914 12.0713C15.6914 10.0137 14.0508 8.39355 12 8.39355C11.5283 8.39355 11.084 8.48242 10.6738 8.65332L15.4111 13.3906ZM12 15.7559C12.5332 15.7559 13.0322 15.6328 13.4766 15.4209L8.64355 10.5811C8.4248 11.0322 8.30176 11.5312 8.30176 12.0781C8.30859 14.0811 9.94238 15.7559 12 15.7559Z"})})},755964:(e,t,o)=>{o.d(t,{N:()=>r});o(667294);var n=o(745238),i=o(785893);const r=(0,n.IU)("eyePadded",{viewBox:"0 0 24 24",svg:(0,i.jsx)("path",{d:"M12 17.9912C17.6055 17.9912 21.3857 13.4727 21.3857 12.0713C21.3857 10.6699 17.5986 6.1582 12 6.1582C6.47656 6.1582 2.60742 10.6699 2.60742 12.0713C2.60742 13.4727 6.46973 17.9912 12 17.9912ZM12 16.6787C7.63184 16.6787 4.15918 13.0283 4.15918 12.0713C4.15918 11.2715 7.63184 7.4707 12 7.4707C16.3613 7.4707 19.8408 11.2715 19.8408 12.0713C19.8408 13.0283 16.3613 16.6787 12 16.6787ZM12 15.7559C14.0508 15.7559 15.6914 14.0811 15.6914 12.0713C15.6914 10.0137 14.0508 8.39355 12 8.39355C9.94238 8.39355 8.29492 10.0137 8.30176 12.0713C8.31543 14.0811 9.94238 15.7559 12 15.7559ZM12 13.2607C11.3369 13.2607 10.7969 12.7275 10.7969 12.0713C10.7969 11.415 11.3369 10.8818 12 10.8818C12.6631 10.8818 13.1963 11.415 13.1963 12.0713C13.1963 12.7275 12.6631 13.2607 12 13.2607Z"})})},253523:(e,t,o)=>{o.d(t,{N:()=>r});o(667294);var n=o(745238),i=o(785893);const r=(0,n.IU)("repeat",{viewBox:"0 0 16 14",svg:(0,i.jsx)("path",{d:"M1.185 7.317a.689.689 0 00.697-.704v-.601c0-1.19.806-1.942 2.064-1.942H9.23v1.573c0 .328.199.52.527.52a.66.66 0 00.403-.144l2.68-2.236c.253-.212.26-.547 0-.765L10.16.782A.62.62 0 009.757.64c-.328 0-.527.184-.527.52v1.53H4.05C1.875 2.69.48 3.9.48 5.875v.738c0 .397.308.704.705.704zm13.624-.649a.689.689 0 00-.698.704v.608c0 1.19-.806 1.942-2.064 1.942H6.763V8.35c0-.329-.199-.52-.527-.52a.66.66 0 00-.403.144l-2.68 2.242c-.26.212-.26.547 0 .759l2.68 2.242a.66.66 0 00.403.143c.328 0 .527-.191.527-.52v-1.544h5.181c2.174 0 3.569-1.21 3.569-3.179v-.745a.695.695 0 00-.704-.704z"})})},814601:(e,t,o)=>{o.d(t,{j:()=>r});o(667294);var n=o(745238),i=o(785893);const r=(0,n.IU)("sortPadded",{viewBox:"0 0 24 24",svg:(0,i.jsx)("path",{d:"M7.50879 5.80273L4.06348 9.32324C3.92676 9.4668 3.83789 9.67188 3.83789 9.85645C3.83789 10.2803 4.13184 10.5674 4.54883 10.5674C4.75391 10.5674 4.91797 10.499 5.04785 10.3623L6.46289 8.89941L7.37891 7.83984L7.32422 9.30273V17.8477C7.32422 18.2715 7.625 18.5723 8.04199 18.5723C8.45898 18.5723 8.75977 18.2715 8.75977 17.8477V9.30273L8.70508 7.83984L9.62793 8.89941L11.0361 10.3623C11.166 10.499 11.3369 10.5674 11.5352 10.5674C11.9521 10.5674 12.2461 10.2803 12.2461 9.85645C12.2461 9.67188 12.1641 9.4668 12.0205 9.32324L8.58203 5.80273C8.28125 5.48828 7.80957 5.48145 7.50879 5.80273ZM16.4912 18.3398L19.9365 14.8057C20.0732 14.6689 20.1621 14.4639 20.1621 14.2793C20.1621 13.8555 19.8682 13.5684 19.4512 13.5684C19.2461 13.5684 19.082 13.6367 18.9453 13.7734L17.5371 15.2295L16.6211 16.2959L16.6758 14.833V6.28809C16.6758 5.87109 16.375 5.56348 15.958 5.56348C15.541 5.56348 15.2334 5.87109 15.2334 6.28809V14.833L15.2881 16.2959L14.3721 15.2295L12.9639 13.7734C12.8271 13.6367 12.6631 13.5684 12.4648 13.5684C12.0479 13.5684 11.7539 13.8555 11.7539 14.2793C11.7539 14.4639 11.8359 14.6689 11.9727 14.8057L15.418 18.3398C15.7188 18.6475 16.1904 18.6543 16.4912 18.3398Z"})})}}]);