"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[67310],{454885:(e,t,r)=>{r.d(t,{X3:()=>a,XD:()=>l,XE:()=>n,d_:()=>s});var i=r(730459),o=r(319385);function n(e,t){i.K4(e,"app_preset_selection_shown",t),o.default.logEvent("app_preset_selection_shown",t.app_uri,t)}function a(e,t){i.K4(e,"onboarding_app_selection",t),o.default.logEvent("onboarding_app_selection",t.preset,t)}function s(e,t){i.K4(e,"app_preset_selection",t),o.default.logEvent("app_preset_selection",t.preset_uri,t)}function l(e,t){i.K4(e,"app_preset_accepted",t),o.default.logEvent("app_preset_accepted",t.preset_uri,t)}},933089:(e,t,r)=>{r.r(t),r.d(t,{applyUntypedFeature:()=>s});var i=r(401898),o=r(496802),n=r(272467),a=r(948083);function s(e){var t;const{environment:r,collectionStore:s,collectionViewBlockStore:l,feature:d,transaction:c}=e,p=d.dependencies,u=(null===(t=l.getFormat())||void 0===t?void 0:t.app_uri_map)??{};for(const g of p)if("property"===g.type)(0,a.P8)({environment:r,collectionStore:s,dependency:g,blockUriMap:u,allFeatures:n.T,transaction:c});else if("collection_view"===g.type){const e=(0,a.k0)({environment:r,collectionStore:s,collectionViewBlockStore:l,dependency:g,blockUriMap:u,transaction:c});o.FH({stores:[l],update:{app_uri_map:e},transaction:c})}else(0,i.t1)(g)}},272467:(e,t,r)=>{r.d(t,{T:()=>l});var i=r(494714),o=r(351259),n=r(841892),a=r(253877),s=r(842875);const l=[{uri:o.S7.priorityHmlFeature,name:"Priority",dependencies:[{uri:o.ti.priorityHmlProperty,type:"property",collectionUri:i.br,name:"Priority",description:"High, medium, or low",icon:n.Z.images.appPackages.featurePrioritySvg,propertySchema:{type:"select",name:"Priority",options:[{id:"priority_low",value:"Low",color:"green"},{id:"priority_medium",value:"Medium",color:"yellow"},{id:"priority_high",value:"High",color:"red"}]}}],collectionUri:i.br},{uri:o.S7.aiSummaryFeature,collectionUri:i.br,name:"AI Summary",description:"AI Summary of this DB page",icon:n.Z.images.appPackages.featureAiSummarizeSvg,tooltipImage:{img:n.Z.images.tooltips.properties.aiAutofillSummaryPng,scale:.5},isAi:!0,dependencies:[{uri:o.ti.aiSummaryProperty,type:"property",collectionUri:i.br,name:"AI Summary",propertySchema:{type:"text",name:"Summary",ai_inference:{type:"summarize",auto_update_on_edit:!0}}}]},{uri:o.S7.aiKeywordsFeature,collectionUri:i.br,name:"AI Keywords",description:"Extract keywords and assign them in multi-select property",icon:n.Z.images.appPackages.featureAiSummarizeSvg,isAi:!0,dependencies:[{uri:o.ti.aiKeywordsProperty,type:"property",collectionUri:i.br,name:"AI Keywords",propertySchema:{type:"multi_select",name:"AI Keywords",select_ai_inference:{type:"multi_select",add_options:!0,auto_update_on_edit:!1}}}]},{uri:o.S7.progressBarFeature,collectionUri:i.br,name:"Progress Bar",description:"Visual representation of progress",icon:n.Z.images.appPackages.featureStatusSvg,dependencies:[{uri:o.ti.progressBarCurrentProperty,type:"property",collectionUri:i.br,name:"Progress Bar Current",propertySchema:{type:"number",name:"Current"}},{uri:o.ti.progressBarTargetProperty,type:"property",collectionUri:i.br,name:"Progress Bar Target",propertySchema:{type:"number",name:"Target"}},{uri:o.ti.progressBarFormulaProperty,type:"property",collectionUri:i.br,name:"Progress Bar Progress Formula",propertySchema:{type:"formula",name:"Progress bar",formula2:{code:[["‣",[["fpp",{property:o.ti.progressBarCurrentProperty,collection:{id:i.br,table:"collection"}}]]],["/"],["‣",[["fpp",{property:o.ti.progressBarTargetProperty,collection:{id:i.br,table:"collection"}}]]]],result_type:{type:"number"}},show_as:{type:"bar",color:"green",maxValue:1,showValue:!1},version:"v2"}}]},{uri:o.S7.ganttChartFeature,collectionUri:i.br,name:"Gantt Chat",description:"Chart to show progress of a project's tasks over time.",icon:n.Z.images.appPackages.featureGanttSvg,dependencies:[{uri:o.ti.ganttInitiativeProperty,type:"property",collectionUri:i.br,name:"Initiative",description:"Initiatives associated with a specific project",icon:n.Z.images.appPackages.featurePrioritySvg,propertySchema:{type:"select",name:"Initiative",options:[{id:"initiative_a",value:"Initiative A",color:"purple"},{id:"initiative_b",value:"Initiative B",color:"green"},{id:"initiative_c",value:"Initiative C",color:"blue"}]}},{uri:o.ti.ganttDueDateProperty,type:"property",collectionUri:i.br,name:"Due Date",description:"When a project is due.",icon:n.Z.images.appPackages.featurePrioritySvg,propertySchema:{type:"date",name:"Due Date"}},{uri:o.ti.ganttTimelineView,type:"collection_view",collectionUri:i.br,description:"GANTT chart timeline view of projects",value:{type:"timeline",name:"Timeline",format:{collection_view_icon:"/icons/timeline_gray.svg",timeline_show_table:!0,timeline_table_properties:[{width:171,visible:!0,property:"title"},{width:200,visible:!0,property:o.ti.ganttInitiativeProperty}],timeline_preference:{zoomLevel:"month",centerTimestamp:(0,a.uO)((0,a.Lg)((0,s.r)()),(0,s.r)())},collection_group_by:{sort:{type:"manual"},type:"multi_select",property:o.ti.ganttInitiativeProperty,hideEmptyGroups:!0}},query2:{timeline_by:o.ti.ganttDueDateProperty}},collectionViewBlockUri:i.Sc}]}]},417202:(e,t,r)=>{r.r(t),r.d(t,{getMobilePreviewTemplates:()=>u,getSuggestedTemplatesForSearch:()=>p});var i=r(284465),o=r(173314),n=r(608055),a=r(433929),s=r(627249),l=r(194660),d=r(319385),c=r(665435);function p(e){const{persona:t,environment:r}=e,i=a.default.getIntl();return(0,s.ay)(d.default,t).map((e=>{const t=(0,o.G)(e,i);return{name:t.name,icon:e.emoji||e.icon||void 0,onClick:()=>{(e=>{const t=(0,l.W4)({templateGalleryItem:e.rootId});n.c4({environment:r,url:t})})(t)}}}))}function u(e){return Object.entries((0,c.it)(e)).map((e=>{let[t,r]=e;return{category:t,sectionHeaderMessage:i._5[t],templates:r}}))}},901927:(e,t,r)=>{r.r(t),r.d(t,{AppInitializationOverlay:()=>D});var i=r(667294),o=r(313991),n=r(800480),a=r(886628),s=r(724405),l=r(341612),d=r(895538),c=r(377058),p=r(421202),u=r(815047),g=r(429369),m=r(151454),f=r(709291),h=r(137810),v=r(454885),y=r(104617),x=r(210228),b=r(288833),S=r(486095),w=r(416536),k=r(174927),C=r(940663),Y=r(296994),P=r(628020),_=r(224646),B=r(80444),j=r(282136),I=r(206258),T=r(164921),V=r(362896),M=r(828451),A=r(568785),W=r(158297),Z=r(531192),U=r(785893);function D(e){var t;const{collectionViewBlockStore:r}=e,D=(0,n.O7)(),L=(0,s.yK)((e=>({overlay:{position:"absolute",top:0,left:0,overflow:"visible",height:"100vh",width:"100%",zIndex:m.mJ,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",backgroundColor:e.sidebarBackground,borderLeft:`1px solid ${e.lightDividerColor}`},welcome:{maxWidth:375,minWidth:320,maxHeight:"100%",flex:1,display:"flex",flexDirection:"column",alignItems:"stretch",marginLeft:"10%",marginRight:"10%",padding:"64px 16px"},welcomeLogo:{height:48,width:48},welcomeTitle:{marginTop:24,color:e.regularTextColor,fontFamily:h.Z.getHeaderFontFamily({locale:o.SP}),fontWeight:h.Z.fontWeight.bold,fontSize:28,flex:0,display:"flex",flexDirection:"row",alignItems:"center"},welcomeSubtitle:{marginTop:6,fontSize:18,color:e.mediumTextColor,fontWeight:400,flex:0},presets:{marginTop:32,marginBottom:32,gap:12,display:"flex",flexDirection:"column"},presetSelected:{background:"dark"===e.mode?e.popoverBackground:e.buttonBackground,boxShadow:e.outlineBlueInputBoxShadow},presetSelectedCheckmark:{width:24,height:24,color:e.blueButtonBackground,opacity:0,transform:"scale(0.8)",transition:"all 0.2s ease"},presetSelectedCheckmarkShown:{opacity:1,transform:"scale(1)"},preset:{display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"flex-start",padding:"16px 14px 16px 16px",background:"dark"===e.mode?e.accentColors.gray[200]:e.buttonBackground,borderRadius:7,boxShadow:e.elevatedButtonBoxShadow,cursor:"pointer",transition:"box-shadow 0.1s ease, background 0.1s ease"},scroller:{overflow:"auto",padding:4},presetHovered:{background:"dark"===e.mode?e.accentColors.gray[200]:e.accentColors.gray[30]},presetTextContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",flex:1},presetIcon:{flexShrink:0,marginTop:2,marginBottom:2,width:20,height:20,marginRight:12},presetTitle:{color:e.regularTextColor,fontWeight:h.Z.fontWeight.medium,fontSize:14,marginBottom:1},presetSubtitle:{color:e.mediumTextColor,fontWeight:h.Z.fontWeight.regular,fontSize:14},previewContainer:{flex:1,overflow:"auto",height:"70%",borderRadius:"8px 0 0 8px",border:e.lightDividerColor,boxShadow:e.largeLightBoxShadow,background:e.popoverBackground},previewImage:{width:"100%",height:"100%"},actionButton:{flex:0,zIndex:m.mJ+1},hamburgerButton:{position:"absolute",zIndex:m.mJ+1,margin:5}})),[]),[H,z]=i.useState(!1),F=(0,a.VK)((()=>B.default.state.currentSpaceViewStore),[]),E=(0,a.VK)((()=>{const e=r.getFormatStore().getKeyStore("app_config_uri").getValue();if(!e)return;return(0,C.Wo)((0,w.appConfigs)(),e)}),[r]),[K,R]=i.useState(void 0);i.useEffect((()=>{R(r.getFormatStore().getKeyStore("app_template_preset").getValue())}),[r,R]);const O=(0,a.VK)((()=>{var e;return(null==E||null===(e=E.presets)||void 0===e?void 0:e.filter((e=>"core"===e.type)))??[]}),[null==E?void 0:E.presets]),[G,N]=i.useState(K);i.useEffect((()=>{N(K)}),[K,N]),i.useEffect((()=>{E&&v.XE(D,{app_uri:E.uri})}),[E,D]);const X=i.useMemo((()=>null==E?void 0:E.presets.find((e=>e.uri===K))),[E,K]),J=i.useMemo((()=>{if(E&&X&&E.uri===l.Vr)return(0,k.L)(X)}),[E,X]),$=i.useMemo((()=>{if(!E)return;const t={};return E.presets.forEach((r=>{var i;const o=E.uri===l.Vr?(0,k.L)(r):null===(i=r.previews)||void 0===i?void 0:i.find((e=>"previewRootId"in e));o&&(t[r.uri]=I.G.createChildStore(e.collectionViewBlockStore,{id:o.previewRootId,table:p.iU,spaceId:o.spaceId}))})),t}),[E,e.collectionViewBlockStore]),q=(0,a.VK)((()=>{const e=(0,P.ui)(D);return{left:e,right:e,bottom:Z.ZP.paddingBottom(D),coverHeight:Z.ZP.defaultPageCoverHeight(D)}}),[D]),Q=(0,a.VK)((()=>{var e;const t=null==X||null===(e=X.previews)||void 0===e?void 0:e.find((e=>"url"in e&&!(0,d.xL)(e)));if(t&&"url"in t)return t.url}),[null==X?void 0:X.previews]),ee=(0,a.VK)((()=>D.device.isPhone),[D]),te=(0,a.VK)((()=>!!D.device.isMobileBrowser||!D.device.isMobileNative&&!(0,_.in)(D)),[D]);return i.useEffect((()=>{"rendered"!==B.default.state.renderPhase&&B.default.setState({...B.default.state,renderPhase:"rendered"})}),[]),E?(0,U.jsxs)(M.P,{calloutId:"better_template_initialization",children:[te&&(0,U.jsx)("div",{style:L.hamburgerButton,children:(0,U.jsx)(Y.oX,{})}),(0,U.jsxs)("div",{style:L.overlay,children:[(0,U.jsxs)("div",{style:L.welcome,children:[(0,U.jsxs)("div",{style:L.scroller,children:[(0,U.jsx)("div",{style:L.welcomeLogo,children:(0,U.jsx)("img",{src:E.logo,style:{height:"100%",width:"100%"}})}),(0,U.jsx)("div",{style:L.welcomeTitle,children:E.welcomeTitle??(0,U.jsx)(f.FormattedMessage,{id:"apps.AppInitializationOverlay.welcomeTitle.default",defaultMessage:"Welcome to {appName}",values:{appName:E.name}})}),(0,U.jsx)("div",{style:L.welcomeSubtitle,children:E.welcomeSubtitle??""}),(0,U.jsx)("div",{style:L.presets,children:O.map(((e,t)=>{var r;const i=null!==(r=e.icon)&&void 0!==r&&r.startsWith("/")?(0,U.jsx)("img",{src:e.icon,style:{height:"100%",width:"100%"}}):(0,U.jsx)(V.Z,{children:e.icon??""});return(0,U.jsxs)(T.Z,{style:{height:"auto",...L.preset,...K===e.uri?L.presetSelected:{}},disabled:H,hoveredStyle:L.presetHovered,onClick:()=>{R(e.uri),v.d_(D,{preset_uri:e.uri})},onMouseEnter:D.device.isMobile?void 0:()=>N(e.uri),onMouseLeave:D.device.isMobile?void 0:()=>N(K),children:[(0,U.jsx)("div",{style:L.presetIcon,children:i}),(0,U.jsxs)("div",{style:L.presetTextContainer,children:[(0,U.jsx)("div",{style:L.presetTitle,children:e.name}),(0,U.jsx)("div",{style:L.presetSubtitle,children:e.description})]}),(0,U.jsx)("div",{children:(0,c.$)({...L.presetSelectedCheckmark,...K===e.uri?L.presetSelectedCheckmarkShown:void 0})})]},t)}))})]}),(0,U.jsx)("div",{style:{padding:`0 4px ${D.device.isIOS?"32px":0} 4px`,alignSelf:"stretch"},children:(0,U.jsxs)(W.Z,{style:{alignSelf:"stretch",height:36,width:"100%"},disabled:H,onClick:async()=>{if(K){if(z(!0),J){const{currentSpaceStore:t,currentSpaceViewStore:r}=B.default.state;t&&r&&await y.Lf({environment:D,item:J,isPrivate:!1,spaceStore:t,spaceViewStore:r,useMinimalTemplates:!1,initializeStore:e.collectionViewBlockStore})}else{const t=e.collectionViewBlockStore.getParentStore();!t||t.table!==u.bx&&t.table!==g.e0&&t.table!==p.iU||x.createAndCommit({userAction:"initializeApp",environment:D,perform:r=>{if(F){const i=b.initializeApp({environment:D,spaceViewStore:F,appUri:E.uri,presetUri:K,appParentStore:t,temporaryContainerBlockStore:e.collectionViewBlockStore,transaction:r,from:"app_onboarding"});b.markTasksDatabaseTemplateIfNeeded(i),S.createSprintPage({environment:D,spaceViewStore:F,appParentStore:t,transaction:r,blockStores:i,creationEntryPoint:{type:"preset",presetUri:K}})}}})}v.XD(D,{preset_uri:K})}},children:[(0,U.jsx)(f.FormattedMessage,{id:"apps.AppInitializationOverlay.startButton",defaultMessage:"Get started"}),H&&(0,U.jsx)(A.Z,{style:{marginLeft:5},isWhite:!0})]})})]}),!ee&&(0,U.jsx)("div",{style:L.previewContainer,children:$&&G&&$[G]?(0,U.jsxs)("div",{style:{width:"108%",minWidth:900,height:"auto",minHeight:"100%",position:"relative",paddingTop:J?0:"10%"},children:[(0,U.jsx)("div",{style:{position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:1,zIndex:999}}),(0,U.jsx)(Z.ZP,{store:$[G],context:j.S.InAppTemplatePreview,titleStyle:{fontSize:28},paddingBottom:q.bottom,disabled:!0},null===(t=$[G])||void 0===t?void 0:t.id)]}):(0,U.jsx)("img",{src:Q,style:L.previewImage})})]})]}):null}},599134:(e,t,r)=>{r.r(t),r.d(t,{AppsSetup:()=>U});var i=r(667294),o=r(313991),n=r(800480),a=r(886628),s=r(724405),l=r(966673),d=r(421202),c=r(709291),p=r(653965),u=r(137810),g=r(454885),m=r(288833),f=r(416536),h=r(174927),v=r(940663),y=r(628020),x=r(555081),b=r(775538),S=r(318245),w=r(80444),k=r(282136),C=r(206258),Y=r(568785),P=r(158297),_=r(531192),B=r(964275),j=r(375071),I=r(698519),T=r(164921),V=r(785893);function M(e){const{appTemplate:t,isSelected:r}=e,[o,n]=(0,i.useState)(!1),l=(0,a.VK)((()=>(0,v.iX)((0,f.appConfigs)(),t.uri)),[t.uri]),d=(0,s.yK)((e=>({container:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center"},appButton:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:62,height:62,backgroundColor:e.whiteButtonBackground,boxShadow:e.lightBoxShadow,borderRadius:12,background:"dark"===e.mode?e.accentColors.gray[200]:e.whiteButtonBackground},selectedWrapper:{boxShadow:e.outlineBlueInputBoxShadow,background:"dark"===e.mode?e.accentColors.gray[200]:e.buttonBackground},logo:{width:32,height:32},logoSelected:{filter:"invert(41%) sepia(77%) saturate(2017%) hue-rotate(191deg) brightness(93%) contrast(89%)"},badge:{width:26,height:26,display:"inline-flex",alignItems:"center",justifyContent:"center",backgroundColor:e.invoiceGreen,borderRadius:50,position:"absolute",top:-9,right:-9,border:`2px solid ${e.sidebarBackground}`,webkitBackdropFilter:"blur(12px)",opacity:1,transform:"scale(1)",transition:"opacity 0.2s ease, transform 0.2s ease, background-color 0.1s linear"},selectBadge:{backgroundColor:e.invoiceGreen},selectedBadge:{backgroundColor:e.blueButtonBackground},deselectBadge:{backgroundColor:e.redBadgeBackground},appName:{marginTop:8,fontSize:14,fontWeight:500,textAlign:"center"},buttonBadgeIcon:{width:16,height:16,fill:"white"}})),[]),c=(0,i.useCallback)((()=>{r?e.onDeSelect(t.uri):e.onSelect(t.uri),n(!1)}),[t.uri,r,e]);return(0,V.jsxs)("div",{style:d.container,onMouseEnter:()=>{n(!0),e.onHover()},onMouseLeave:()=>{n(!1),e.onUnhover()},children:[(0,V.jsx)(T.Z,{style:{...d.appButton,...r?d.selectedWrapper:{}},onClick:c,ignoreLocalHoverState:!0,children:(0,V.jsx)("img",{style:{...d.logo,...r?d.logoSelected:{}},src:l?l.logo:t.icon})}),(0,V.jsx)(T.Z,{style:{...d.badge,...r?o?d.deselectBadge:d.selectedBadge:o?d.selectBadge:{opacity:0,transform:"scale(0.4)"}},onClick:c,ignoreLocalHoverState:!0,children:r?o?(0,B.D)({width:16,height:16,fill:"white"}):(0,I.k)({width:15,height:15,fill:"white"}):(0,j.f)({width:16,height:16,fill:"white"})}),(0,V.jsx)("div",{style:d.appName,children:l?l.name:t.shortName})]})}const A=p.oA(f.DEFAULT_PRESETS.map((e=>{var t;return null===(t=(0,v.iX)((0,f.appConfigs)(),e))||void 0===t?void 0:t.presets.find((t=>t.uri===e))})));function W(e){const t=(0,n.O7)(),r=(0,a.VK)((()=>{const e=(0,y.ui)(t);return{left:e,right:e,bottom:_.ZP.paddingBottom(t),coverHeight:_.ZP.defaultPageCoverHeight(t)}}),[t]),o=i.useMemo((()=>{const e={};return A.forEach((r=>{var i;const o=r.uri.startsWith("notion://wiki")?(0,h.L)(r):null===(i=r.previews)||void 0===i?void 0:i.find((e=>"previewRootId"in e));o&&(e[r.uri]=new C.G(t,{id:o.previewRootId,table:d.iU,spaceId:o.spaceId}))})),e}),[t]),s=e.presetUri.startsWith("notion://wiki"),l=o[e.presetUri];return l?(0,V.jsxs)("div",{style:{minWidth:900,height:"100%",position:"relative",paddingTop:s?0:"10%"},children:[(0,V.jsx)(_.ZP,{store:l,context:k.S.InAppTemplatePreview,titleStyle:s?{fontSize:28}:void 0,paddingBottom:r.bottom,disabled:!0},l.id),(0,V.jsx)("div",{style:{position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:1,zIndex:999,cursor:"pointer"}})]}):null}function Z(e){const t=(0,i.useCallback)(((e,t)=>(e%t+t)%t),[]),r=(0,l.Kt)(e.forceIndex,200,((e,t)=>e===t)),[o,n]=(0,i.useState)(0);(0,i.useEffect)((()=>{if(void 0===r)return;const i=t(-o,e.items.length),a=t(r-i,e.items.length);n((e=>e-a))}),[o,n,r,t,e.items.length]),(0,i.useEffect)((()=>{const t=setInterval((()=>{void 0===r&&n((e=>e-1))}),e.rotationDelayMs??2500);return()=>{clearInterval(t)}}),[n,r,e.rotationDelayMs]);const a=(0,s.yK)((e=>({item:{position:"absolute",top:0,left:0,bottom:0,right:0,background:"white",borderRadius:"8px 0 0 8px",border:"1px solid rgba(0, 0, 0, 0.05)",boxShadow:"0px 16px 24px rgba(0, 0, 0, 0.06), 0px 2px 6px rgba(0, 0, 0, 0.04), 0px 0px 1px rgba(0, 0, 0, 0.04)",overflow:"hidden",transition:"transform 0.5s ease-in-out, opacity 0.5s ease-out"}})),[]),d=e.items.length,c=t(-o,d),u=e.items[t(c-1,d)].node,g=e.items[c].node,m=[...p.DZ(d,(e=>({key:`before${e}`,node:null}))),...e.items,...p.DZ(d,(e=>({key:`after${e}`,node:null})))],f=m.map(((r,i)=>{let{key:n}=r;const s=t(i+o,m.length),l=s>=d&&s<2*d,c=`translateX(${(s-d)*(e.offset??12)}px) translateY(${(s-d)*(e.offset??16-1.5*(s-d))}px)`,p=l?1-.15*(s-d):0;return(0,V.jsx)("div",{style:{...a.item,zIndex:m.length-s,transform:c,opacity:p},children:s===d?g:s===d-1?u:void 0},n)}));return(0,V.jsx)("div",{style:{position:"relative",...e.style},children:f})}function U(e){const[t]=(0,a.AF)(b.default),{currentUserRootStore:r,currentSpaceViewStore:l,currentSpaceStore:d,currentUserSettingsStore:f}=(0,a.VK)((()=>{const{currentUserRootStore:e,currentSpaceViewStore:t,currentSpaceStore:r,currentUserSettingsStore:i}=w.default.state;return{currentUserRootStore:e,currentSpaceViewStore:t,currentSpaceStore:r,currentUserSettingsStore:i}}),[]),h=(0,n.O7)(),[v,y]=(0,i.useState)(!1),[k,_]=(0,i.useState)(void 0),B=(0,s.yK)((e=>({container:{backgroundColor:e.sidebarBackground,width:"100%",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",borderLeft:`1px solid ${e.lightDividerColor}`},left:{maxWidth:375,minWidth:320,maxHeight:"100%",flex:1,display:"flex",flexDirection:"column",alignItems:"stretch",marginLeft:"10%",marginRight:"10%",padding:"42px 16px",overflowX:"visible",overflowY:"auto"},right:{flex:1,height:"70%",overflow:"visible"},header:{position:"relative",textAlign:"left",paddingBottom:42},title:{fontWeight:u.Z.fontWeight.semibold,fontSize:28,lineHeight:1.2,color:e.regularTextColor,fontFamily:u.Z.getHeaderFontFamily({locale:o.SP}),marginBottom:16,width:"90%"},subtitle:{fontSize:18,lineHeight:1.45,paddingTop:2,color:e.mediumTextColor,fontWeight:u.Z.fontWeight.regular},apps:{marginBottom:48,display:"inline-flex",flexWrap:"wrap",justifyContent:"space-between"},previewImage:{width:"100%",height:"100%"}})),[]),j=(0,a.VK)((()=>h.device.isPhone),[h]);if(!l||!r||!f)return null;if(!t.isOnboarding||"workspace_setup"!==t.stage)return null;const I=e=>{const r=p.jj([...t.selectedPresets,e]),i=p.MR(r,(e=>A.findIndex((t=>t.uri===e))));b.default.setState({...t,selectedPresets:i}),g.X3(h,{action:"select",preset:e})},T=e=>{const r=t.selectedPresets.filter((t=>t!==e));b.default.setState({...t,selectedPresets:r}),g.X3(h,{action:"deselect",preset:e})},U=t.selectedPresets.length>0?t.selectedPresets:A.map((e=>e.uri)),D=U.findIndex((e=>(null==k?void 0:k.uri)===e)),L=(0,V.jsx)(Z,{style:{width:"100%",height:"100%"},items:U.map((e=>({key:e,node:(0,V.jsx)(W,{presetUri:e})}))),forceIndex:D>-1?D:void 0});return(0,V.jsx)(V.Fragment,{children:(0,V.jsxs)("div",{style:B.container,children:[(0,V.jsx)("div",{style:B.left,children:(0,V.jsxs)("div",{style:{display:"flex",alignItems:"stretch",flexDirection:"column"},children:[(0,V.jsxs)("div",{style:B.header,children:[(0,V.jsx)("div",{style:B.title,children:(0,V.jsx)(c.FormattedMessage,{id:"apps.workspacesetup.header.title",defaultMessage:"Get started with Notion"})}),(0,V.jsx)("div",{style:B.subtitle,children:(0,V.jsx)("div",{children:(0,V.jsx)(c.FormattedMessage,{id:"apps.workspacesetup.header.description",defaultMessage:"Add templates to your workspace, and customize them in a few simple steps."})})})]}),(0,V.jsx)("div",{style:B.apps,children:A.map(((e,r)=>(0,V.jsx)(M,{appTemplate:e,isSelected:t.selectedPresets.includes(e.uri),onSelect:I,onDeSelect:T,onHover:()=>_(e),onUnhover:()=>_(void 0)},r)))}),t.selectedPresets.length>0?(0,V.jsx)(P.Z,{isLarge:!0,style:{height:40},onClick:async()=>{var e;if(!d||!l)return;y(!0);const r=S.default.mark("continue_with_apps"),i=null===(e=l.getTeamsStores()[0])||void 0===e?void 0:e.id,o=C.zX.createChildStore(d,{table:"team",id:i,spaceId:d.id}),n=l.getCreatedOnboardingTemplates()?[]:await m.installAppsInTeam({environment:h,presets:t.selectedPresets,spaceStore:d,spaceViewStore:l,teamStore:o});n.length>0&&(t.redirectData={type:"redirect_page",pageId:n[0].id,spaceId:d.id},b.default.setState(t)),await x.lp(h,t),S.default.measure(r,{environment:h,data:{appsSelected:t.selectedPresets}})},disabled:v,children:v?(0,V.jsx)(Y.Z,{isWhite:!0}):(0,V.jsx)(c.FormattedMessage,{id:"apps.workspacesetup.button.continueWithChosenApps",defaultMessage:"{num, plural, one {Continue with 1 template} other {Continue with {num} templates}}",values:{num:t.selectedPresets.length}})}):(0,V.jsx)(P.Z,{isLarge:!0,style:{height:40},onClick:async()=>{y(!0),await x.lp(h,t)},disabled:v,children:v?(0,V.jsx)(Y.Z,{isWhite:!0}):(0,V.jsx)(c.FormattedMessage,{id:"apps.workspacesetup.button.continueWithoutChoosingApps",defaultMessage:"I'll add templates later"})})]})}),!j&&(0,V.jsx)("div",{style:B.right,children:L})]})})}},536420:(e,t,r)=>{r.d(t,{n:()=>l,y:()=>s});r(21703);var i=r(667294),o=(r(277744),r(926249));let n,a;function s(e){n=n??new Map,a=a??function(e){let t=!1,r=[];return new ResizeObserver((i=>{r=r.concat(i),t||(t=!0,window.requestAnimationFrame((()=>{const i=new Set;[...r].reverse().filter((e=>{const t=i.has(e.target);return i.add(e.target),!t})).forEach((t=>{const r=e.get(t.target);null==r||r.forEach((e=>{const r=t.borderBoxSize[0];e({width:r.inlineSize,height:r.blockSize})}))})),r=[],t=!1})))}))}(n);const[t,r]=(0,i.useState)(void 0),s=(0,i.useCallback)((e=>{r((t=>(0,o.Z)(t,e)?t:e))}),[]);return(0,i.useLayoutEffect)((()=>{const t=e.current;if(!t)return;a.observe(t);const r=[...n.get(t)??[],s];return n.set(t,r),()=>{a.unobserve(t);const e=(n.get(t)??[]).filter((e=>e!==s));0===e.length?n.delete(t):n.set(t,e)}}),[s,e]),t}function l(e){const{children:t,onSizeChange:r}=e,o=(0,i.useRef)(null),n=s(o);(0,i.useEffect)((()=>{r&&n&&r(n)}),[n,r]);const a=i.Children.only(t);return i.cloneElement(a,{ref:o})}},627249:(e,t,r)=>{r.d(t,{CN:()=>d,H_:()=>s,ay:()=>l});var i=r(811002),o=r(284465),n=r(194952),a=r(173314);function s(e){let{persona:t,defaultToLife:r}=e;if(!t)return;if(t in o._5)return t;const i={customer_support:"support",designer:"design",educator:"student",entrepreneur:"hr",freelancer:"design",hr_recruiting:"hr",it:"eng",marketing_sales:"marketing",media:"marketing",operations:"hr",operations_hr:"hr",personal:"life",product_manager:"product",programmer:"eng",other:r?"life":void 0,unfilled:r?"life":void 0,undefined:r?"life":void 0,creative:"design",founderCeo:"hr",internalCommunication:"hr",productDesign:"design",projectProgramMgmt:"product",finance:void 0,itAdmin:"eng",knowledgeManagement:"hr"};return(null==i?void 0:i[t])??void 0}function l(e,t){const r=s({persona:t,defaultToLife:!0});return(r?null==c?void 0:c[r]:[]).filter((t=>(0,n.G)(t,e)))}function d(e,t,r){return function(e,t){const r=s({persona:e,defaultToLife:!1});return(r?null===o.J9||void 0===o.J9?void 0:o.J9[r]:[]).filter((e=>(0,n.G)(e,t)))}(e,t).map((e=>(0,a.G)(e,r)))}const c={...o.J9,design:[i.Yt.designSprint,i.Yt.designPortfolio],product:[i.Yt.productSpec,i.Yt.productWiki,i.Yt.visionAndStrategy],marketing:[i.Yt.blogEditorialCalendar,i.Yt.socialMediaCalendar,i.Yt.presentation],hr:[i.Yt.companyHome,i.Yt.employeeBenefits,i.Yt.peopleDirectory],sales:[i.Yt.salesWiki,i.Yt.presentation,i.Yt.oneOnOneNotes],support:[],life:[]}},156638:(e,t,r)=>{r.d(t,{Z:()=>n});var i=r(749085);class o extends i.default{getInitialState(){return{open:!1}}}const n=new o},665435:(e,t,r)=>{r.d(t,{D2:()=>w,Io:()=>y,JL:()=>b,cY:()=>f,it:()=>x,oO:()=>h,vY:()=>S});var i=r(647425),o=r(284465),n=r(194952),a=r(173314),s=r(709291),l=r(401898),d=r(95477),c=r(304708),p=r(433929),u=r(627249),g=r(319385),m=r(359307);const f=(0,s.defineMessages)({addToTeamspace:{id:"templateGalleryHelpers.addToTeamspace",defaultMessage:"Add to a teamspace"},addToPrivate:{id:"teamPickerButton.addToPrivate",defaultMessage:"Add to Private"}});function h(e){var t;const{data:r}=m.Z.state;if(r&&null!==(t=r.topCategories)&&void 0!==t&&t.length)return r.topCategories.find((t=>t.id===e))}const v=Object.keys(o.J9);function y(e){let{userPersona:t,subscriptionTier:r}=e;return[...v].sort(((e,o)=>function(e,t,r,o){const n=(0,i.QA)(o),a=(0,u.H_)({persona:r,defaultToLife:n});if("suggested"===e||"suggested"===t)return"suggested"===e?-1:1;if(a===e||a===t)return a===e?-1:1;if(("life"===e||"life"===t)&&n)return"life"===e?-1:1;if(("student"===e||"student"===t)&&function(e){let{persona:t,isPersonalishPlan:r}=e;const i=r?["other","unfilled","personal","undefined"]:["personal"];return i.includes(t??"undefined")}({persona:r,isPersonalishPlan:n}))return"student"===e?-1:1;return 0}(e,o,t,r)))}function x(e){let{userPersona:t,subscriptionTier:r,environment:s}=e;const l=p.default.getIntl(),d=(0,c.xf)(s)?function(e){return(0,i.QA)(e)?o.d6:o.e8}(r):o.J9.suggested;return Object.fromEntries(y({userPersona:t,subscriptionTier:r}).map((e=>"suggested"===e?["suggested",d.map((e=>(0,a.G)(e,l)))]:[e,[...o.J9[e].filter((e=>(0,n.G)(e,g.default))).filter((e=>!d.includes(e))).map((e=>(0,a.G)(e,l)))]])).filter((e=>{let[t,r]=e;return(null==r?void 0:r.length)>0})))}function b(e){const t=(0,l.Yd)(e).map((e=>[e,!0]));return Object.fromEntries(t)}function S(e){var t;const{data:r}=m.Z.state;if(!r||null===(t=r.topCategories)||void 0===t||!t.length)return;const i=r.topCategories.find((t=>{var r;return null===(r=t.subcategories)||void 0===r?void 0:r.find((t=>{var r;return null===(r=t.templates)||void 0===r?void 0:r.find((t=>"pageTemplate"===t.type&&t.template.rootId===e||"preset"===t.type&&t.uri===e))}))}));return null==i?void 0:i.id}function w(e){return`${d.default.domainBaseUrl}/@${e}`}},359307:(e,t,r)=>{r.d(t,{Z:()=>n});var i=r(749085);class o extends i.default{getInitialState(){return{}}getTopTemplateCategories(){var e;const{data:t}=this.state;return t&&null!==(e=t.topCategories)&&void 0!==e&&e.length?Array.from(t.topCategories).filter((e=>{const t=e.subcategories||[];for(const i of t){var r;if(null!==(r=i.templates)&&void 0!==r&&r.length)return!0}return!1})):[]}}const n=new o},377058:(e,t,r)=>{r.d(t,{$:()=>n});r(667294);var i=r(745238),o=r(785893);const n=(0,i.IU)("checkmark",{viewBox:"0 0 20 20",svg:(0,o.jsx)("path",{d:"M10.0693 18.166C14.7759 18.166 18.6606 14.2812 18.6606 9.58301C18.6606 4.88477 14.7676 1 10.061 1C5.36279 1 1.48633 4.88477 1.48633 9.58301C1.48633 14.2812 5.37109 18.166 10.0693 18.166ZM9.13965 13.6836C8.82422 13.6836 8.56689 13.5508 8.33447 13.2437L6.30078 10.7783C6.15137 10.5874 6.07666 10.3965 6.07666 10.189C6.07666 9.75732 6.41699 9.40869 6.84863 9.40869C7.10596 9.40869 7.30518 9.5 7.521 9.77393L9.11475 11.791L12.5347 6.3125C12.7173 6.02197 12.9497 5.88086 13.2153 5.88086C13.6387 5.88086 14.0205 6.17139 14.0205 6.61133C14.0205 6.80225 13.9209 7.00977 13.8047 7.19238L9.91162 13.2437C9.729 13.5342 9.45508 13.6836 9.13965 13.6836Z"})})},375071:(e,t,r)=>{r.d(t,{f:()=>n});r(667294);var i=r(745238),o=r(785893);const n=(0,i.IU)("plusThick",{viewBox:"0 0 14 14",svg:(0,o.jsx)("path",{d:"M2 7.16357C2 7.59692 2.36011 7.95093 2.78735 7.95093H6.37622V11.5398C6.37622 11.9731 6.73022 12.3271 7.16357 12.3271C7.59692 12.3271 7.95093 11.9731 7.95093 11.5398V7.95093H11.5398C11.9731 7.95093 12.3271 7.59692 12.3271 7.16357C12.3271 6.73022 11.9731 6.37622 11.5398 6.37622H7.95093V2.78735C7.95093 2.36011 7.59692 2 7.16357 2C6.73022 2 6.37622 2.36011 6.37622 2.78735V6.37622H2.78735C2.36011 6.37622 2 6.73022 2 7.16357Z"})})},284465:(e,t,r)=>{r.d(t,{J9:()=>c,_5:()=>a,d6:()=>l,e8:()=>d,gh:()=>s});var i=r(371663),o=r(811002),n=r(598251);const a={suggested:n.sY.suggestedCategory,design:n.sY.designer,eng:n.sY.engineering,product:n.sY.productManagement,marketing:n.sY.marketing,sales:n.sY.sales,support:n.sY.support,hr:n.sY.hr,life:n.sY.life,student:n.sY.student},s={suggested:[i.Ll,i.Yb,i.tt,i.KW,i.r],product:[i.tt],design:[i.Yb],eng:[i.tt],marketing:[i.Yb],hr:[i.Yb],sales:[i.Yb],support:[i.Yb],life:[],student:[]},l=[o.Yt.taskList,o.Yt.quickNoteV2,o.Yt.habitTrackerV2,o.Yt.journalV2,o.Yt.weeklyTodoV2,o.Yt.classNotesV2],d=[o.Yt.taskList,o.Yt.quickNoteV2,o.Yt.oneOnOneNotesV2,o.Yt.weeklyTodoV2],c={suggested:[o.Yt.defaultWiki],product:[o.Yt.oneOnOneNotes,o.Yt.productWiki,o.Yt.productSpec,o.Yt.visionAndStrategy,o.Yt.presentation,o.Yt.investorUpdate,o.Yt.userResearch,o.Yt.experimentResults,o.Yt.brainstorm,o.Yt.productLaunchBrief],design:[o.Yt.designSprint,o.Yt.designSystem,o.Yt.designPortfolio,o.Yt.userResearch,o.Yt.brainstorm],eng:[o.Yt.engineeringWiki,o.Yt.engineeringTechSpec,o.Yt.experimentResults,o.Yt.brainstorm],marketing:[o.Yt.presentation,o.Yt.brandAssets,o.Yt.brainstorm,o.Yt.contentCalendar,o.Yt.blogEditorialCalendar,o.Yt.socialMediaCalendar,o.Yt.campaignBrief,o.Yt.moodBoard,o.Yt.mediaList],hr:[o.Yt.companyHome,o.Yt.newHireOnboarding,o.Yt.employeeBenefits,o.Yt.interviewGuide,o.Yt.recruitingTracker,o.Yt.jobBoard,o.Yt.applicantTracker,o.Yt.peopleDirectory],sales:[o.Yt.salesWiki,o.Yt.salesCRM,o.Yt.salesAssets,o.Yt.competitiveAnalysis],support:[o.Yt.productFAQs,o.Yt.helpCenter],life:[o.Yt.readingListV2,o.Yt.habitTrackerV2,o.Yt.simpleBudgetV2,o.Yt.weeklyTodoV2,o.Yt.travelPlannerV2,o.Yt.journalV2,o.Yt.resumeV2,o.Yt.personalHomeV3,o.Yt.quickNoteV2,o.Yt.jobApplicationsV2,o.Yt.lifeWikiV2,o.Yt.moodBoardV2,o.Yt.blogPostV2,o.Yt.personalCRMV2],student:[o.Yt.studentPlanner,o.Yt.classNotesV2,o.Yt.courseScheduleV2,o.Yt.gradeCalculatorV2,o.Yt.cornellNotesSystemV2,o.Yt.syllabusV2,o.Yt.lessonPlansV2,o.Yt.classDirectoryV2,o.Yt.classroomHomeV2,o.Yt.clubHomepageV2]}}}]);