"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[65645],{63736:(e,t,o)=>{o.r(t),o.d(t,{AutomationModal:()=>k});var n=o(667294),r=o(800480),a=o(886628),i=o(724405),c=o(102647),l=o(709291),s=o(137810),u=o(768657),d=o(249394),p=o(563474),m=o(558454),f=o(206258),g=o(301743),h=o(550506),x=o(489728),b=o(158297),C=o(731278),y=o(965187),v=o(785893);const S=(0,l.defineMessages)({confirmationDialogAriaLabel:{defaultMessage:"Confirmation",id:"automations.ConfirmationDialog.ariaLabel"}});function k(){const e=(0,a.VK)((()=>m.Z.state),[]),t=(0,r.Fy)(),o=(0,a.VK)((()=>t.isPhone),[t]),l=(0,i.yK)((e=>({innerStyle:{padding:24,width:o?"calc(100% - 20px)":320}})),[o]),s=(0,p.D)(),u=(0,n.useCallback)((e=>{m.Z.setState({open:!1,result:e});const t=m.Z.state;(0,c.W5)(s,{automation_id:t.open&&t.recordStore instanceof f.Mz?t.recordStore.id:void 0,option:e})}),[s]),d=(0,n.useCallback)((()=>u("cancel")),[u]),g=function(){const e=(0,a.VK)((()=>m.Z.state),[]),[t,o]=(0,n.useReducer)(((e,t)=>e+1),1),r=(0,n.useRef)(void 0);return(0,n.useEffect)((()=>{e.open&&e.format!==r.current&&(o(void 0),r.current=e.format)}),[e,r]),t}();return(0,v.jsx)(h.Z,{open:e.open,keepFocus:!0,innerStyle:l.innerStyle,disableAnimation:!0,onDismiss:d,render:()=>e.open&&(0,v.jsx)(M,{id:`${g}`,modalState:e,onDismiss:u},`${g}`)})}function M(e){const{id:t,modalState:o,onDismiss:r}=e,{icon:a}=o.format,c=(0,l.useIntl)(),p=(0,n.useRef)(null);(0,n.useEffect)((()=>{null!==p.current&&p.current.focus()}),[]);const m=(0,i.yK)((e=>({wrap:{display:"flex",flexDirection:"column"},buttonWrap:{display:"flex",flexDirection:"column",gap:10,marginTop:10},textWrap:{whiteSpace:"pre-wrap",wordBreak:"break-word",textAlign:"center",fontWeight:s.Z.fontWeight.medium,marginTop:10,marginBottom:10,display:"flex",flexDirection:"column",alignItems:"center"},icon:{marginBottom:10},cancelButton:{justifyContent:"center"}})),[]),{store:f}=(0,u.Cl)({initialValue:o.format.text,onChange:()=>{}}),h=[(0,v.jsx)(b.Z,{isLarge:!0,onClick:()=>r("continue"),ref:p,children:o.format.continueButtonText},"continue"),(0,v.jsx)(x.Z,{isLarge:!0,onClick:()=>r("cancel"),isLightGray:!0,style:m.cancelButton,children:o.format.cancelButtonText},"cancel")],k=`automation-modal-dialog-${t}`;return(0,v.jsx)(g.Z,{debugName:"AutomationModal",capture:!0,allowEsc:!0,children:(0,v.jsxs)("div",{"aria-modal":"true","aria-label":c.formatMessage(S.confirmationDialogAriaLabel),"aria-describedby":k,role:"dialog",style:m.wrap,children:[(0,v.jsxs)("div",{style:m.textWrap,children:[a&&(0,v.jsx)("div",{style:m.icon,children:(0,v.jsx)(C.Z,{size:50,icon:{icon:a,pointer:o.recordStore.pointer},disabled:!0,isEmptyPage:!1,bucket:"public",onChange:()=>{}})}),(0,v.jsx)("div",{id:k,children:(0,v.jsx)(y.Z,{disabled:!0,store:f,parentStore:o.recordStore,inPageFind:d.B3.none})})]}),(0,v.jsx)("div",{style:m.buttonWrap,children:h})]})})}},768657:(e,t,o)=>{o.d(t,{Cl:()=>m,NY:()=>f});var n=o(667294),r=o(800480),a=o(886628),i=o(471924),c=o(421202),l=(o(76233),o(653965)),s=o(307032),u=o(484398),d=o(319385),p=o(206258);function m(e){const{initialValue:t,onChange:o,source:d="title",parentCollectionStore:m}=e,f=(0,r.O7)(),g=(0,u.$)("formulaPrototypeHelpers.useMockTextStore",{isMockTextStore:!0,overrideDefaultRecordCache:!0}),h=function(e){const{initialValue:t,inMemoryRecordCache:o,source:a,parentCollectionStore:l}=e,u=(0,r.O7)(),d=(0,n.useMemo)((()=>t),[]);return(0,n.useMemo)((()=>{const e={id:i.Il(),table:c.iU};o.setRecord({pointer:e,userId:u.currentUser.id},{value:{alive:!0,id:e.id,parent_id:(null==l?void 0:l.id)??s._6,parent_table:"block",properties:{[a]:d},space_id:(null==l?void 0:l.getSpaceId())??s._6,type:"page",version:0},role:"editor"});const t=new p.ST({environment:u,path:["properties",a],pointer:e,recordStoreOptions:{inMemoryRecordCache:o,userId:u.currentUser.id}});return o.emitRecord(e,[]),t}),[u,o,d,l,a])}({initialValue:t,inMemoryRecordCache:g,source:d,parentCollectionStore:m}),x=(0,n.useRef)(t),b=(0,n.useCallback)((e=>{const t=f.currentUser.id,o=h.getRecordStoreAtRootPath();if(o instanceof p.G){const n=o.getValue();n&&(g.setRecord({pointer:h.pointer,userId:t},{role:"editor",value:{...n,properties:{...null==n?void 0:n.properties,[d]:e}}}),g.emitRecord(h.pointer,[]))}}),[f.currentUser.id,h,g,d]);return(0,a.VK)((()=>{const e=h.getValue();l.Xy(x.current,e)||(x.current=e,null==o||o(e))}),[h,o]),{store:h,setValue:b}}function f(){return d.default.checkGate({gateName:"formula_buttons"})}},484398:(e,t,o)=>{o.d(t,{$:()=>i});var n=o(667294),r=o(126263),a=o(800480);function i(e,t){const{cacheFallback:o,isMockTextStore:i,isTemporaryData:c,onOperationCallback:l,overrideDefaultRecordCache:s}=t??{},u=(0,a.O7)(),{inMemoryRecordCache:d}=u.defaultRecordCache,p=(0,n.useMemo)((()=>{const t=new r.Z({isTemporaryData:Boolean(c),name:e,onOperationCallback:l});return t.isMockTextStore=Boolean(i),o&&t.addCacheFallback(o),s&&d.addCacheOverride(t),t}),[o,d,i,c,e,l,s]);return(0,n.useEffect)((()=>function(){o&&p.removeCacheFallback(o),s&&d.removeCacheOverride(p)}),[o,d,p,s]),p}},558454:(e,t,o)=>{o.d(t,{Z:()=>c});var n=o(749085),r=o(292595);class a extends n.default{getInitialState(){return{open:!1}}}const i=new a;(0,r.exposeDebugValue)("AutomationModalStore",i);const c=i}}]);