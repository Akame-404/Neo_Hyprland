"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[47433],{691770:(e,t,n)=>{n.r(t),n.d(t,{ExternalImportAndSyncIndicator:()=>F});var l=n(667294),s=n(313991),i=n(800480),a=n(886628),o=n(724405),d=n(407057),r=n(379362),c=n(660291),g=n(606287),y=n(709291),p=n(531701),u=n(137810),x=n(292283),h=n(433929),m=n(918514),v=n(816402),S=n(825464),f=n(690403),j=n(316354),T=n(526388),M=n(785893);function F(e){var t;const n=(0,i.O7)(),F=(0,a.VK)((()=>e.store.isCollectionView()),[e.store]),P=(0,a.VK)((()=>{const t=F?e.store.getCollectionStore():e.store.getParentStore();if((null==t?void 0:t.table)===g.vF){return null==t?void 0:t.getFormat()}}),[e.store,F]),{lastEditedTime:E,lastEditedTimeNormalized:C}=(0,a.VK)((()=>{var t;const n=F?null==P||null===(t=P.sync_state)||void 0===t?void 0:t.last_synced_at:e.store.getLastEditedTime();if(n){const e=h.default.getIntl();return{lastEditedTime:n,lastEditedTimeNormalized:(0,d.$b)(n,s.SP,e)}}return{}}),[F,e.store,P]),b=F&&Boolean(null==P||null===(t=P.error)||void 0===t?void 0:t.status_code),_=(0,o.yK)((e=>({wrapper:{display:"flex",alignItems:"center",gap:6},syncIcon:{width:14,height:14,position:"relative",color:b?e.icon.uiYellowPrimary:e.blueColor},syncProgress:{fontWeight:u.Z.fontWeight.medium,fontSize:14,color:b?e.text.primary:e.blueColor},syncAge:{fontWeight:u.Z.fontWeight.regular,color:p.ZP.blueWithAlpha(.7)},badge:{background:"light"===e.mode?b?e.fill.yellow:p.ZP.diffBackground:"rgba(35, 131, 226, 0.2)",whiteSpace:"nowrap",width:"fit-content",height:28,display:"flex",marginBottom:3,borderRadius:20,padding:"2px 6px",...!F&&{marginTop:8}},tooltipHeading:{fontSize:u.Z.fontSize.UISmall.desktop,fontWeight:u.Z.fontWeight.medium},tooltipCaption:{fontSize:u.Z.fontSize.UISmall.desktop,color:r.Lr.dark.gray,fontWeight:u.Z.fontWeight.regular}})),[F,b]),w=(0,l.useCallback)((()=>{if(F){var e;const t=Boolean(null==P||null===(e=P.sync_state)||void 0===e?void 0:e.syncing);return b?{syncBadgeContent:(0,M.jsx)(M.Fragment,{children:(0,M.jsx)("span",{style:_.syncProgress,children:(0,M.jsx)(y.FormattedMessage,{id:"PageTitle.ExternalSync.syncFailed.title",defaultMessage:"Sync is stuck",values:{integration:null==P?void 0:P.external_collection_type}})})}),syncBadgeTooltipContent:(0,M.jsxs)(M.Fragment,{children:[C&&(0,M.jsx)("div",{style:_.tooltipHeading,children:(0,M.jsx)(y.FormattedMessage,{id:"PageTitle.ExternalSync.syncFailed.tooltip.heading",defaultMessage:"Last synced at {lastEditedTimeNormalized}",values:{lastEditedTimeNormalized:C}})}),(0,M.jsx)("div",{style:_.tooltipCaption,children:(0,M.jsx)(y.FormattedMessage,{id:"PageTitle.ExternalSync.syncFailed.tooltip.caption",defaultMessage:"Click to view the help center"})})]})}:t?{syncBadgeContent:(0,M.jsx)(M.Fragment,{children:(0,M.jsx)("span",{style:_.syncProgress,children:(0,M.jsx)(y.FormattedMessage,{id:"PageTitle.ExternalSync.syncInProgress.title",defaultMessage:"Sync in progress",values:{integration:null==P?void 0:P.external_collection_type}})})}),syncBadgeTooltipContent:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("div",{style:_.tooltipHeading,children:(0,M.jsx)(y.FormattedMessage,{id:"PageTitle.ExternalSync.syncInProgress.tooltip.heading",defaultMessage:"Syncing projects and issues"})}),(0,M.jsx)("div",{style:_.tooltipCaption,children:(0,M.jsx)(y.FormattedMessage,{id:"PageTitle.ExternalSync.syncInProgress.tooltip.caption",defaultMessage:"from {site}",values:{site:(0,x.D1)((null==P?void 0:P.synced_collection_external_url)||"")}})})]})}:{syncBadgeContent:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("span",{style:_.syncProgress,children:(0,M.jsx)(y.FormattedMessage,{id:"PageTitle.ExternalSync.collectionLastSynced.title",defaultMessage:"Synced with {integration}",values:{integration:null==P?void 0:P.external_collection_type}})}),E&&(0,M.jsx)("span",{style:_.syncAge,children:(0,M.jsx)(y.FormattedMessage,{id:"PageTitle.ExternalSync.collectionLastSynced.subtitle",defaultMessage:"{lastUpdated}",values:{lastUpdated:(0,v.IS)(E,{useLowercase:!0})}})})]}),syncBadgeTooltipContent:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("div",{style:_.tooltipHeading,children:(0,M.jsx)(y.FormattedMessage,{id:"PageTitle.ExternalSync.collectionLastSynced.tooltip.heading",defaultMessage:"Last synced at {lastEditedTimeNormalized}",values:{lastEditedTimeNormalized:C}})}),(0,M.jsx)("div",{style:_.tooltipCaption,children:(0,M.jsx)(y.FormattedMessage,{id:"PageTitle.ExternalSync.collectionLastSynced.tooltip.caption",defaultMessage:"Click to view the help center"})})]})}}return{syncBadgeContent:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("span",{style:_.syncProgress,children:(0,M.jsx)(y.FormattedMessage,{id:"PageTitle.ExternalSync.pageLastSynced.title",defaultMessage:"Synced with {integration}",values:{integration:null==P?void 0:P.external_collection_type}})}),E&&(0,M.jsx)("span",{style:_.syncAge,children:(0,M.jsx)(y.FormattedMessage,{id:"PageTitle.ExternalSync.pageLastSynced.subtitle",defaultMessage:"{lastUpdated}",values:{lastUpdated:(0,v.IS)(E,{useLowercase:!0})}})})]}),syncBadgeTooltipContent:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("div",{style:_.tooltipHeading,children:(0,M.jsx)(y.FormattedMessage,{id:"PageTitle.ExternalSync.pageLastSynced.tooltip.heading",defaultMessage:"Last synced at {lastEditedTimeNormalized}",values:{lastEditedTimeNormalized:C}})}),(0,M.jsx)("div",{style:_.tooltipCaption,children:(0,M.jsx)(y.FormattedMessage,{id:"PageTitle.ExternalSync.pageLastSynced.tooltip.caption",defaultMessage:"Click to view the help center"})})]})}}),[P,F,_,E,C,b]);if(!P||!P.external_collection_type||n.device.isMobile)return null;const{syncBadgeContent:k,syncBadgeTooltipContent:B}=w();return(0,M.jsx)(T.Z,{renderTooltip:()=>B,render:e=>(0,M.jsx)("div",{...e,style:{alignSelf:"end",display:"inline-block"},children:(0,M.jsx)(j.Z,{className:"notion-print-ignore",href:(0,m.UY)("guides.externalImportAndSync"),external:!0,children:(0,M.jsx)(f.Z,{style:_.badge,content:(0,M.jsxs)("div",{style:_.wrapper,children:[(0,c.b)(_.syncIcon),k]})})})}),placement:S.u.Bottom})}}}]);