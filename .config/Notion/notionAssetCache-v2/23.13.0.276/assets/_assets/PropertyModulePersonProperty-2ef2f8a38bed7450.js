"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[72001],{289845:(e,t,o)=>{o.d(t,{Z:()=>f});var r=o(667294),n=o(313991),s=o(720294),i=o(886628),l=o(724405),a=o(407057),d=o(253877),p=o(842875),u=o(136700),c=o(709291),h=o(531701),m=o(619584),x=o(541056),y=o(526388),g=o(785893);const f=function(e){const t=(0,c.useIntl)(),o=(0,l.Fg)(),f=(0,s.k)(),C=(0,r.useRef)(),S=(0,r.useCallback)((()=>{const t=e.value;if(!t)return;const o=d.KR(t,(0,p.r)());if(!o)return;const r=o.valueOf(),n=r-Date.now();n<0||n>m.A0||C.current&&C.current.timestamp===r||(C.current&&clearTimeout(C.current.timer),C.current={timestamp:r,timer:setTimeout(f,n)})}),[f,e.value]),k=(0,r.useCallback)((()=>{C.current&&(clearTimeout(C.current.timer),C.current=void 0)}),[]);(0,r.useEffect)((()=>{S()}),[S]),(0,r.useEffect)((()=>()=>{k()}),[k]);const{value:j,withComma:w}=e,R=(0,i.VK)((()=>j?(0,a.ZV)({value:j,date_format:e.dateFormat,time_format:e.timeFormat,userTimeZone:(0,p.r)(),allowRelativeDates:!0,intl:t,shortenDateAndRange:e.shortenDateAndRange,displayInUserTimezone:e.displayInUserTimezone,getToday:x.HL}):void 0),[t,e.dateFormat,e.displayInUserTimezone,e.shortenDateAndRange,e.timeFormat,j]);if(!j)return null;const T=d.NK(j,(0,p.r)(),n.SP);let Z;if(j.reminder){const e=d.Nm(j,(0,p.r)());Z=e?{color:o.errorText}:{color:h.ZP.blue}}const M=(0,g.jsxs)(g.Fragment,{children:[R,j.reminder&&(0,u.m)({display:"inline-block",width:"1em",marginLeft:6,marginRight:2,paddingBottom:4,verticalAlign:"middle"}),w?", ":null]});return e.disableTooltip?(0,g.jsx)("div",{style:{...e.style,...Z},children:M}):(0,g.jsx)(y.Z,{renderTooltip:()=>(0,g.jsxs)(g.Fragment,{children:[e.tooltipHeader,(0,g.jsxs)("div",{style:b(o,e.tooltipHeader),children:[v(T.start),T.end?` â†’ ${v(T.end)}`:""]})]}),render:t=>(0,g.jsx)("div",{style:{...e.style,...Z},...t,children:M}),placement:e.tooltipPlacement})};function v(e){return(0,a.ZW)(e,"medium")}function b(e,t){return t?{color:e.mediumInvertedTextColor}:{}}},793289:(e,t,o)=>{o.d(t,{Z:()=>l});var r=o(667294),n=o(313991),s=o(296994),i=o(785893);const l=function(e){let{firstDayOfWeek:t,value:o,selectValue:l=!0,onChange:a,disabledDays:d}=e;const p=(0,r.useMemo)((()=>new Date(o)),[o]),[u,c]=(0,r.useState)(p),h=(0,r.useRef)(o);(0,r.useLayoutEffect)((()=>{h.current!==o&&(c(new Date(o)),h.current=o)}),[o]);const m=(0,r.useCallback)(((e,t,o)=>{a(e.getTime())}),[a]);return(0,i.jsx)(s.yG,{locale:n.SP,className:"notion-calendar-picker",numberOfMonths:1,weekStartsOn:t,modifiers:l?{value:p}:{},showOutsideDays:!0,fixedWeeks:!0,onDayClick:m,onMonthSelected:c,disabled:d,month:u})}},278948:(e,t,o)=>{o.d(t,{Z:()=>i});o(667294);var r=o(568785),n=o(828992),s=o(785893);const i=function(){return(0,s.jsx)(n.Z,{title:(0,s.jsx)(r.Z,{})})}},69872:(e,t,o)=>{o.d(t,{L:()=>u,Z:()=>c});o(667294);var r=o(800480),n=o(724405),s=o(12396),i=o(698519),l=o(623879),a=o(552275),d=o(828992),p=o(785893);let u=function(e){return e[e.Name=0]="Name",e[e.Type=1]="Type",e}({});const c=function(e){const{propertySchema:t,format:o,locked:c}=e,h=(0,n.Fg)(),m=(0,r.O7)(),{name:x,type:y,icon:g}=t,f=o===u.Name?x:l.SO[y];return c?(0,p.jsx)(d.Z,{title:f,icon:(0,p.jsx)(s.ZP,{icon:g,type:y,size:m.device.isMobile?18:16,theme:h,style:{fill:h.regularIconColor}}),...e}):(0,p.jsx)(a.Z,{title:f,icon:(0,p.jsx)(s.ZP,{icon:g,type:y,size:m.device.isMobile?18:16,theme:h,style:{fill:h.regularIconColor,marginLeft:6,marginRight:2}}),right:e.selected?(0,i.k)({width:14,height:14}):null,...e})}},147082:(e,t,o)=>{o.d(t,{UR:()=>C,ZP:()=>k,go:()=>b});var r=o(667294),n=o(883355),s=o(800480),i=o(724405),l=o(853465),a=o(653965),d=o(460709),p=o(98742),u=o(434859),c=o(964113),h=o(164921),m=o(437601),x=o(374194),y=o(203386),g=o(953336),f=o(164369),v=o(785893);const b="20px";let C=function(e){return e[e.Select=0]="Select",e[e.Person=1]="Person",e[e.Relation=2]="Relation",e[e.FilterValue=3]="FilterValue",e[e.Share=4]="Share",e[e.Group=5]="Group",e}({});class S extends n.Z{constructor(){super(...arguments),this.inputRef=r.createRef(),this.storeTypes={store:c.Z},this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleFocused=()=>{this.stores.store.setState({focused:!0})},this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleBlurred=()=>{this.stores.store.setState({focused:!1})},this.handleContainerClick=()=>{var e,t,o;this.props.disabled||(null===(e=this.inputRef.current)||void 0===e||e.focusInput(),null===(t=(o=this.props).onClick)||void 0===t||t.call(o))}}UNSAFE_willMount(){(this.props.focus||this.props.focusInitial)&&this.stores.store.setState({focused:!0})}UNSAFE_willUpdate(){void 0!==this.props.focus&&this.stores.store.setState({focused:this.props.focus})}renderComponent(){const{disabled:e}=this.props;return(0,v.jsx)(y.Z,{debugName:"TokenInputMenuItem",capture:!e,onLeft:a.yR,onRight:a.yR,onSelectAll:a.yR,onRedo:a.yR,onUndo:a.yR,onToggleBold:a.yR,onToggleItalics:a.yR,onToggleCode:a.yR,onCut:a.yR,onCopy:a.yR,onPaste:a.yR,onKeypress:a.yR,children:(0,v.jsx)(y.Z,{debugName:"TokenInputMenuItem",capture:!e&&this.props.value.length>0,onDelete:a.yR,onBackspace:a.yR,children:(0,v.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"stretch",flex:1,minWidth:0,gap:this.props.message?4:void 0},children:[this.renderTokenInput(),this.props.message&&(0,v.jsx)(f.Z,{isSmall:!0,children:this.props.message})]})})})}renderTokenInput(){const{right:e,showClearButton:t}=this.props;return e||t?(0,v.jsxs)(g.Z,{type:u.Z.All,style:{...M(this.environment,this.theme,this.props.format,this.props.focus,this.props.dontShowBorderBottom,this.props.disabled,this.props.showBorder,this.context.menu),flexWrap:"nowrap",...this.props.style},onClick:this.handleContainerClick,children:[(0,v.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",flexGrow:1,minWidth:0,...this.props.inputAndTokenWrapRightStyle},children:[this.props.tokens,!this.props.hideInput&&this.renderInput()]}),(0,v.jsx)("div",{style:{flexShrink:0},children:(0,v.jsx)(Z,{showClearButton:this.props.showClearButton,right:this.props.right,onClearButtonClick:this.props.onClearButtonClick,tokens:this.props.tokens,value:this.props.value})})]}):this.environment.device.isMobile?(0,v.jsxs)("div",{style:{...M(this.environment,this.theme,this.props.format,this.props.focus,this.props.dontShowBorderBottom,this.props.disabled,this.props.showBorder,this.context.menu),flexWrap:"nowrap",...this.props.style},onClick:this.handleContainerClick,children:[(0,v.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",flexGrow:1,minWidth:0,overflow:"hidden",marginRight:j(this.props.format)?6:0},children:[this.props.tokens,!this.props.hideInput&&this.renderInput()]}),(0,v.jsx)(m.Z,{show:this.stores.store.state.focused})]}):(0,v.jsxs)(g.Z,{type:u.Z.All,style:{...M(this.environment,this.theme,this.props.format,this.props.focus,this.props.dontShowBorderBottom,this.props.disabled,this.props.showBorder,this.context.menu),...this.props.style},onClick:this.handleContainerClick,children:[this.props.tokens,!this.props.hideInput&&this.renderInput()]})}renderInput(){const e=0===this.props.tokens.length;return(0,v.jsx)(x.Z,{disabled:this.props.disabled,format:x.B.Transparent,...(0,p.Z)({onKeyDown:e=>function(e,t,o,r){"Backspace"===e.key&&0===t.length&&o();r&&r(e)}(e,this.props.value,this.props.onRemoveLastToken,this.props.onKeyDown)},{onChange:this.props.onChange}),value:this.props.value,focus:this.props.focus,focusInitial:this.props.focusInitial,focusAfterAnimation:this.props.focusAfterAnimation,style:(t=this.props.format,o=this.environment,r=this.theme,n=this.props.inputFullWidth,s=this.props.inputDivStyle,{flexGrow:1,flexShrink:1,flexBasis:n?"100%":60,minWidth:60,width:"auto",lineHeight:b,...o.device.isMobile?{margin:"0 8px 8px 0"}:T(r)[t].inputDivDesktopStyle,...s}),inputStyle:this.props.inputStyle||{height:this.environment.device.isMobile?24:j(this.props.format)?20:18},size:1,ref:this.inputRef,type:this.props.type,placeholder:e?this.props.placeholder:"",onSubmit:e=>function(e,t,o,r){0===t.length&&o&&o();r&&r(e)}(e,this.props.value,this.props.onEmptySubmit,this.props.onSubmit),onFocus:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleFocused,onBlur:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleBlurred,textarea:this.props.textarea,autoComplete:this.props.autoComplete});var t,o,r,n,s}}S.displayName="TokenInputMenuItem",S.contextTypes={...d.mw,...n.w};const k=S;function j(e){return e===C.Group}function w(e,t){return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",background:t?"none":e.tokenInputMenuItemBackground,cursor:"text",overflow:"hidden"}}function R(e){return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",flexShrink:0,minHeight:44,borderBottom:`1px solid ${e.regularDividerColor}`,fontSize:16,background:e.popoverBackground}}function T(e){const t={desktopWrapStyle:{padding:"8px 9px 1px",width:"100%",minHeight:34,fontSize:14},inputDivDesktopStyle:{margin:"0 6px 6px 0",borderTopLeftRadius:4,borderTopRightRadius:4},inputDivDesktopFocusStyle:{}};return{[C.Select]:t,[C.Person]:t,[C.Relation]:t,[C.Group]:t,[C.FilterValue]:{desktopWrapStyle:{padding:"6px 6px 1px",boxShadow:e.inputBoxShadow,background:e.inputBackground,margin:"6px 8px 2px 8px",minHeight:30,fontSize:12,borderRadius:4},inputDivDesktopStyle:{margin:"0 6px 4px 0"},inputDivDesktopFocusStyle:{boxShadow:"rgba(35, 131, 226, 0.57) 0px 0px 0px 1px inset, rgba(35, 131, 226, 0.35) 0px 0px 0px 2px"}},[C.Share]:{desktopWrapStyle:{padding:"8px 9px 1px",width:"100%",minHeight:34,fontSize:14},inputDivDesktopStyle:{margin:"0 0 0 2px",borderTopLeftRadius:4,borderTopRightRadius:4},inputDivDesktopFocusStyle:{}}}}function Z(e){let{showClearButton:t,right:o,onClearButtonClick:r,tokens:n,value:a}=e;const d=(0,i.Fg)(),p=(0,s.O7)(),{isMobile:u}=p.device;return o?(0,v.jsx)(v.Fragment,{children:o}):t&&(n.length>0||a.length>0)?(0,v.jsx)(h.Z,{onClick:r,style:{flexShrink:0,flexGrow:0,borderRadius:u?24:20,marginTop:2},children:(0,l.X)({width:u?16:14,height:u?16:14,fill:d.lightIconColor})}):null}function M(e,t,o,r,n,s,i,l){const{WindowSizeStore:a}=e;return{...e.device.isMobile?{...R(t),paddingTop:14,paddingBottom:8,paddingLeft:(null==l?void 0:l.menuType)!==d.og.Popup?a.getSafePaddingLeftCSS(16):16,paddingRight:(null==l?void 0:l.menuType)!==d.og.Popup?a.getSafePaddingRightCSS(16):16,...n&&{borderBottom:"none"}}:{...w(t,s),...T(t)[o].desktopWrapStyle},...i&&{boxShadow:"rgba(15, 15, 15, 0.1) 0px 0px 0px 1px inset"},...i&&r&&{boxShadow:"rgba(35, 131, 226, 0.57) 0px 0px 0px 1px inset, rgba(35, 131, 226, 0.35) 0px 0px 0px 2px"},...!e.device.isMobile&&r&&T(t)[o].inputDivDesktopFocusStyle}}},197680:(e,t,o)=>{o.d(t,{Z:()=>g});var r=o(667294),n=o(800480),s=o(886628),i=o(266897),l=o(709291),a=o(401898),d=o(98742),p=o(825464),u=o(552275),c=o(526388),h=o(670301),m=o(45653),x=o(785893);const y=r.forwardRef(((e,t)=>{const{actor:o,userTitle:r,useEmailAsTooltip:y,tooltip:g,tooltipPlacement:f}=e,v=(0,n.O7)(),b=(0,l.useIntl)(),C=(0,s.VK)((()=>o.asActor&&o.isUser()?o.email:void 0),[o]),S=y&&C?C:g,k=v.device.isMobile?24:20;let j;return(0,i.YU)(o)?j=(0,x.jsx)(h.Z,{botValue:null==o?void 0:o.asActor,size:k}):(0,i.$S)(o)?j=(0,x.jsx)(m.Z,{userValue:null==o?void 0:o.asActor,size:k}):(0,i.Iq)(o)?j=(0,x.jsx)(m.Z,{userValue:void 0,size:k}):(0,a.t1)(o),(0,x.jsx)(c.Z,{ref:t,placement:f??p.u.Bottom,alignment:p.v.Start,textWrap:!0,render:t=>(0,x.jsx)(u.Z,{...(0,d.Z)(t,e),icon:j,title:r??(0,i.$4)(b,o),className:"notranslate",right:e.right}),disableTooltip:!S,renderTooltip:()=>S})}));y.displayName="UserMenuItem";const g=y},971086:(e,t,o)=>{o.r(t),o.d(t,{PersonPropertyModule:()=>Y});o(757658);var r=o(667294),n=o(800480),s=o(886628),i=o(724405),l=o(266897),a=o(180951),d=o(559054),p=o(213148),u=o(222686),c=o(747453),h=o(912398),m=o(519889),x=o(76233),y=o(709291),g=o(653965),f=o(401898),v=o(137810),b=o(619584),C=o(108406),S=o(137231),k=o(210228),j=o(296994),w=o(212534),R=o(460709),T=o(135314),Z=o(305971),M=o(735948),B=o(494043),O=o(825464),P=o(61766),I=o(949068),N=o(69582),_=o(508606),V=o(164921),L=o(552275),A=o(231945),F=o(573063),D=o(268894),W=o(568785),H=o(478140),U=o(632163),z=o(743765),E=o(672495),K=o(670301),$=o(164369),G=o(45653),q=o(197680),X=o(785893);const Y=r.memo((function(e){let{property:t,store:o,propertyValues:n,propertySchema:s,module:l}=e;const[a,d]=(0,T.e)(),p={style:"large"};(0,Z.E)("page_layouts")&&(0,h.xV)(l)&&l.style&&(p.style=l.style);const u="large"===p.style?200:164,c=(0,r.useMemo)((()=>Math.floor((d+8)/(u+8))),[u,d]),m="person"===(null==s?void 0:s.type)&&((0,f.$K)(s.limit)&&0===n.length||(0,b.z4)(s.limit)),[x,g]=(0,r.useState)(!1),C=5*c-(m?1:0),S=(0,i.yK)((e=>({showAllFewerButton:{borderRadius:6,padding:"2px 8px",marginTop:10,display:"inline-flex",flexWrap:"nowrap",gap:8,color:e.mediumTextColor,fontWeight:v.Z.fontWeight.medium,fontSize:14,alignItems:"center",justifyContent:"start"}})),[]),k=(0,X.jsx)(V.Z,{onClick:()=>g(!x),style:S.showAllFewerButton,children:x?(0,X.jsx)(y.FormattedMessage,{id:"PersonPropertySectionValues.showMoreButton.text",defaultMessage:"Show fewer"}):(0,X.jsx)(y.FormattedMessage,{id:"PersonPropertySectionValues.showFewerButton.text",defaultMessage:"Show more"})});return(0,X.jsxs)("div",{ref:a,children:[(0,X.jsx)(B.a3,{minWidth:u,style:{gridGap:8},children:(0,X.jsx)(Q,{values:n,blockStore:o,propertyId:t,propertySchema:s,itemsShownPerRow:c,showAddButton:m,limit:x?void 0:C,setShowingAllValues:g,renderOptions:p})}),n.length>C&&k]})}));function Q(e){let{values:t,blockStore:o,propertyId:i,propertySchema:d,itemsShownPerRow:p,showAddButton:u,limit:c,setShowingAllValues:h,renderOptions:m}=e;const y=(0,n.O7)(),v=(0,n.Fy)(),{collectionContextStore:j}=(0,r.useContext)(_.O),w=(0,r.useCallback)((function(e){k.createAndCommit({userAction:"PersonPropertyModule.updateValue",environment:y,perform:t=>{const r=a.BY(e);S.sO({environment:y,store:o.getNormalizedPropertyStore(i),value:r,transaction:t})}});const t=o.getAssociatedCollectionStore();j&&d&&t&&C.rv({environment:y,collectionContextStore:j,block_id:o.id,property:i,property_type:null==d?void 0:d.type,from:"property_module",collection_id:t.id,isFromBulkActionsToolbar:!1})}),[o,j,y,i,d]),R=(0,r.useCallback)((function(e){w(t.filter((t=>(0,l.Wk)(e)?(0,x.D4X)(t)||e.id!==t.id:e!==t)))}),[w,t]),T=(0,r.useCallback)((function(e){w([e,...t])}),[w,t]),Z=(0,r.useCallback)((function(e){w([e])}),[w]),[M,B]=(0,r.useState)(""),I=(0,r.useMemo)((()=>new P.Z),[]),N=t.length<=p-1?(0,g.w6)(p-t.length).map((e=>(0,X.jsx)("div",{},e))):[],L=(0,s.VK)((()=>o.isTemplate()),[o]),F=(0,s.VK)((()=>o.canEdit()),[o]);if((0,b.z4)(d))return null;if("created_by"===(null==d?void 0:d.type)||"last_edited_by"===(null==d?void 0:d.type))return(0,X.jsx)(te,{personValues:t,disabled:!0,onRemove:g.ZT,renderOptions:m});const D=c?t.slice(0,c):t;return F?(0,X.jsxs)(X.Fragment,{children:[u?(0,X.jsx)(J,{renderOptions:m,menu:(0,X.jsx)(ee,{query:M,setQuery:B,current:t,onAdd:T,inTemplate:L,limit:d.limit}),onClose:()=>{B(""),h(!1)},onClick:()=>{(0,f.$K)(c)&&h(!0)}}):null,(0,f.$K)(d.limit)?(0,X.jsx)(X.Fragment,{children:(0,X.jsx)(A.ZP,{buttonPopupStore:I,alignmentToOrigin:O.v.Start,onClose:()=>{B("")},popupType:v.isMobile?A.Z4.SlideUp:A.Z4.Popup,renderOrigin:e=>(0,X.jsx)(V.Z,{...e,children:(0,X.jsx)(te,{personValues:t,onRemove:R,disabled:!F,renderOptions:m})}),render:()=>(0,X.jsx)(ee,{query:M,setQuery:B,current:t,onAdd:e=>{Z(e),I.setState({open:!1})},inTemplate:L,limit:d.limit})})}):(0,X.jsx)(te,{personValues:D,onRemove:R,disabled:!F,renderOptions:m}),N]}):(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(te,{personValues:D,disabled:!0,onRemove:g.ZT,renderOptions:m}),N]})}const J=r.memo((function(e){let{menu:t,onClick:o,onClose:r,renderOptions:s}=e;const l=(0,n.Fy)(),a=(0,i.yK)((e=>({button:{borderRadius:6,padding:"5px 0 5px 4px",display:"flex",flexWrap:"nowrap",gap:8,color:e.lightTextColor,fontSize:14,alignItems:"center"},buttonBorder:{padding:"large"===s.style?8:4,borderRadius:9999,border:`1px dashed ${e.lightTextColor}`}})),[s.style]);return(0,X.jsx)(A.ZP,{alignmentToOrigin:O.v.Start,onClick:o,onClose:r,popupType:l.isMobile?A.Z4.SlideUp:A.Z4.Popup,renderOrigin:e=>(0,X.jsxs)(V.Z,{...e,style:a.button,testId:"person_property_module__add_button",children:[(0,X.jsx)("div",{style:a.buttonBorder,children:(0,c.R)({width:14})}),(0,X.jsx)(y.FormattedMessage,{id:"personProperty.addPersonButtonText",defaultMessage:"Add person"})]}),render:()=>t})}));function ee(e){let{query:t,setQuery:o,onAdd:s,current:i,inTemplate:a,limit:p}=e;const u=(0,n.Fy)(),c=(0,y.useIntl)(),h=function(e){let{query:t}=e;const o=(0,n.O7)(),[r]=(0,d.r5)((async()=>{const e=await j.FF.searchActions.load(),{users:r}=await e.searchSpaceActors({environment:o,query:t,membersOnly:!1});return r.map((e=>(0,l.LU)({table:m.KJ,value:e})))}),[o,t]);return r}({query:t}),v=(0,r.useMemo)((()=>new Set(i.map((e=>{if((0,l.Wk)(e))return e.id})).filter(f.$K))),[i]),b=(0,r.useCallback)((e=>e.filter((e=>!v.has(e.id)))),[v]),C=(0,X.jsx)(E.Z,{isInput:!0,style:{padding:8},children:(0,X.jsx)(D.ZP,{customElementAttributes:{"data-testid":"person_property_module__search_input"},textWrapperStyle:{margin:0},focus:!u.isMobile||void 0,focusAfterAnimation:!0,value:t||"",onChange:e=>o(e.target.value),placeholder:c.formatMessage({id:"personPropertySectionValues.search.placeholder",defaultMessage:"Search for a person..."})})}),S=x.s8k.filter((e=>!i.includes(e))),k={key:"shortcuts",items:S.length>0?S.map((e=>({key:`relative_person_shortcut_${e}`,action:()=>{},render:t=>(0,X.jsx)(L.Z,{...t,title:(0,X.jsx)(N.w,{templateVariableType:e}),inline:!0,onClick:()=>{s(e)}})}))):[{key:"no_template_variables",action:()=>{},render:e=>(0,X.jsx)(z.Z,{...e,style:{margin:"2px 0px 2px 6px",fontSize:12},title:(0,X.jsx)(y.FormattedMessage,{id:"database.personPropertyMenu.noShorcuts.message",defaultMessage:"No shortcuts"})})}],render:e=>(0,X.jsx)(E.Z,{...e,title:"Shortcuts"})},[w,T]=(0,r.useMemo)((()=>{const e=[];let t;if("pending"===h.status||"idle"===h.status)e.push({key:"loading",action:()=>{},render:e=>(0,X.jsx)(z.Z,{...e,title:(0,X.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,X.jsx)(W.Z,{})})})});else if("resolved"===h.status){const r=b(h.value??[]);t=r.length>0?0:void 0,0===r.length?e.push({key:"no_results",action:()=>{},render:e=>(0,X.jsx)(z.Z,{...e,title:(0,X.jsx)(y.FormattedMessage,{id:"PersonPropertySectionValues.searchMenu.noResults",defaultMessage:"No results."})})}):e.push(...r.map((e=>({key:e.id,action:()=>{s(e.pointer),o("")},render:t=>(0,X.jsx)(q.Z,{...t,actor:(0,l.dp)(e)})}))))}else"rejected"===h.status?e.push({key:"no_results",action:()=>{},render:e=>(0,X.jsx)(z.Z,{...e,title:(0,X.jsx)(y.FormattedMessage,{id:"PersonPropertySectionValues.searchMenu.somethingWentWrong",defaultMessage:"Something went wrong."})})}):(0,f.t1)(h);return[e,t]}),[s,b,o,h]);return(0,X.jsx)(H.Z,{menuType:u.isMobile?R.og.ActionSheet:R.og.Popup,header:C,width:275,maxHeight:400,minWidth:275,children:(0,X.jsx)(U.Z,{type:U.i.Vertical,sections:(0,g.oA)([a?k:void 0,{key:"results",items:w.slice(0,20),render:e=>(0,X.jsx)(E.Z,{...e,title:(0,I.$)(p)})}]),initialFocus:T})})}const te=r.memo((function(e){let{personValues:t,onRemove:o,disabled:r,renderOptions:n}=e;return(0,X.jsx)(X.Fragment,{children:t.map((e=>(0,l.Wk)(e)?(0,X.jsx)(re,{actorPointer:e,handleRemove:o,disabled:r,renderOptions:n},e.id):(0,x.D4X)(e)?(0,X.jsx)(oe,{value:e,handleRemove:o,disabled:r},`template_variable_${e}`):void(0,f.t1)(e)))})})),oe=r.memo((function(e){let{value:t,handleRemove:o,disabled:r}=e;const[n,s]=(0,M.C)(),l=(0,i.yK)((e=>({actorName:{fontWeight:v.Z.fontWeight.regular,color:e.blueColor,lineHeight:1.1},uiToken:{display:"flex",gap:10,alignItems:"center",background:s&&!r?e.outlineBlueButtonPressedBackground:e.outlineBlueButtonHoveredBackground,color:e.blueColor,justifyContent:"space-between",position:"relative",padding:"5px 28px 5px 5px",borderRadius:4},avatar:{borderRadius:6,display:"flex",flexWrap:"nowrap",gap:8,fontSize:14,alignItems:"center"},avatarBorder:{padding:8,borderRadius:9999,background:e.accentColors.uiBlue[s&&!r?100:200],color:e.accentColors.uiBlue[600]}})),[r,s]);return(0,X.jsx)(X.Fragment,{children:(0,X.jsxs)("div",{ref:n,style:l.uiToken,children:[(0,X.jsx)("div",{style:l.avatar,children:(0,X.jsx)("div",{style:l.avatarBorder,children:(0,u.f)({width:14})})}),(0,X.jsx)("div",{style:{display:"flex",gap:4,flexGrow:1},children:(0,X.jsx)($.Z,{className:"notranslate",style:l.actorName,isMultiline:!0,children:(0,X.jsx)(y.FormattedMessage,{id:"PropertyModulePersonTemplateVariableValue.templateVariables.text.me",defaultMessage:"Person who{br}duplicated page",values:{br:(0,X.jsx)("br",{})}})})}),s&&!r?(0,X.jsx)(F.Z,{icon:p.U,ariaLabel:"Close",style:{position:"absolute",right:4,top:"50%",transform:"translateY(-50%)",width:20,height:20},iconStyle:{width:11},onClick:()=>o(t)}):null]})})})),re=r.memo((function(e){let{actorPointer:t,handleRemove:o,disabled:n,renderOptions:a}=e;const d=(0,y.useIntl)(),{store:u}=(0,r.useContext)(_.O),c="large"===a.style?32:24,h="large"===a.style?10:4,m=(0,s.VK)((()=>{const e=null==u?void 0:u.getRecordModel;if(e)return(0,l.Hl)({pointer:t,getRecordModel:e})}),[t,null==u?void 0:u.getRecordModel]),x=null==m?void 0:m.asActor,f=(0,s.VK)((()=>null==x?void 0:x.getDisplayName(d)),[x,d]),b=(0,i.yK)((()=>({actorName:{fontWeight:v.Z.fontWeight.medium}})),[]),C=(0,s.VK)((()=>null!=x&&x.isUser()?(0,X.jsx)(G.Z,{userValue:x,size:c}):null!=x&&x.isBot()?(0,X.jsx)(K.Z,{botValue:x,size:c}):null),[c,x]),[S,k]=(0,M.C)(),j=(0,r.useCallback)((e=>{(0,w.ZP)({event:e,context:w.Af.EditorClick,callback:g.ZT})}),[]);return(0,X.jsx)(X.Fragment,{children:(0,X.jsxs)("div",{ref:S,onClick:j,style:{display:"flex",gap:h,alignItems:"center",justifyContent:"space-between",position:"relative",padding:"5px 28px 5px 5px",borderRadius:4,background:k&&!n?"rgba(0,0,0,0.05)":void 0},children:[C,(0,X.jsx)("div",{style:{display:"flex",gap:4,flexGrow:1,...v.Z.textOverflowStyle},children:(0,X.jsx)($.Z,{className:"notranslate",style:b.actorName,showTooltipWhenTruncated:!0,children:f})}),k&&!n?(0,X.jsx)(F.Z,{icon:p.U,ariaLabel:d.formatMessage({id:"PropertyModulePersonValue.removeUser.ariaLabel",defaultMessage:"Remove {name}"},{name:f}),style:{position:"absolute",right:4,top:"50%",transform:"translateY(-50%)",width:20,height:20},iconStyle:{width:11},onClick:()=>o(t)}):null]})})}))},735948:(e,t,o)=>{o.d(t,{C:()=>n});var r=o(667294);function n(){const e=(0,r.useRef)(null),[t,o]=(0,r.useState)(!1),n=(0,r.useCallback)((()=>{const t=e.current;t&&o(t.matches(":hover"))}),[]),s=(0,r.useCallback)((t=>{e.current=t,n()}),[n]);return(0,r.useEffect)((()=>{const t=e.current;if(t)return t.addEventListener("mouseenter",n),t.addEventListener("mouseleave",n),()=>{t.removeEventListener("mouseenter",n),t.removeEventListener("mouseleave",n)}}),[n]),[s,t]}},494043:(e,t,o)=>{o.d(t,{Nx:()=>I,Pb:()=>P,Vc:()=>w,Vw:()=>_,Xg:()=>j,a3:()=>A,bj:()=>N,dp:()=>L,uI:()=>F,us:()=>B,w3:()=>R});var r=o(294184),n=o.n(r),s=o(667294),i=o(724405),l=o(831103),a=o(973420),d=o(60217),p=o(785893);const u="layout-wide",c="layout-wide-right-margin-expanded",h="layout-side-peek",m="layout-center-peek",x="layout-home",y="layout-form",g="layout-home-phone",f="layout-phone",v="layout-tablet",b="layout-template-preview",C="layout-chat",S="layout-layout-editor",k="layout-layout-editor-wide";function j(e){let{children:t,type:o,gap:r,withBottomPadding:s,style:i}=e;const l=(0,d.n1)(o);return(0,p.jsx)("div",{className:n()("layout",{[u]:"wide"===o,[c]:"wide-right-margin-expanded"===o,[h]:"side-peek"===o,[m]:"center-peek"===o,[x]:"home"===o,[g]:"home-phone"===o,[y]:"form"===o,[f]:"phone"===o,[v]:"tablet"===o,[b]:"template-preview"===o,[C]:"chat"===o,[S]:"layout-editor"===o,[k]:"layout-editor-wide"===o}),style:{paddingBottom:s?l:void 0,gap:r,...i},children:t})}const w="layout-content",R="layout-full",T="layout-margin-left",Z="layout-margin-right",M="layout-nested-grid",B="hide-scrollbar",O="layout-column";function P(e){return(0,p.jsx)("div",{className:n()(w,e.className),style:e.style,children:e.children})}function I(e){return(0,p.jsx)("div",{className:R,style:e.style,children:e.children})}function N(e){return(0,p.jsx)("div",{className:T,style:e.style,children:e.children})}function _(e){return(0,p.jsx)("div",{className:Z,style:e.style,children:e.children})}const V=(0,s.forwardRef)((function(e,t){return(0,p.jsx)("div",{className:n()(M,e.className),onClick:e.onClick,style:e.style,role:e.role,id:e.id,"aria-labelledby":e["aria-labelledby"],ref:t,children:e.children})}));function L(e){let{items:t,style:o}=e;const[r,n]=s.useState(0),d=(0,s.useRef)([]),u=(0,i.yK)((e=>({icon:{width:16,height:16,fill:"currentColor"},label:{fontSize:14,fontWeight:600},tab:"centered"===o?{cursor:"pointer",border:"none",padding:"6px 12px",borderRadius:20,color:e.text.secondary,background:"none"}:{cursor:"pointer",border:"none",borderBottom:"2px solid",borderColor:"transparent",padding:"6px 8px 12px",color:e.text.secondary,background:"none"},tabSelected:"centered"===o?{color:e.text.primary,background:e.tint.regular}:{color:e.text.primary,borderColor:e.regularTextColor}})),[o]),c=(0,s.useId)(),h=(0,s.useCallback)((e=>`${c}-tab-${e}`),[c]),m=(0,s.useCallback)((e=>`${c}-tabpanel-${e}`),[c]),x=(0,s.useCallback)((e=>{let o;var s;("ArrowLeft"===e.key?(e.preventDefault(),o=(r+t.length-1)%t.length):"ArrowRight"===e.key&&(e.preventDefault(),o=(r+1)%t.length),void 0!==o)&&(n(o),null===(s=d.current[o])||void 0===s||s.focus())}),[r,t.length]);return(0,p.jsx)(l.Z,{name:"PageLayoutTabs",children:(0,p.jsxs)(V,{children:[(0,p.jsx)(P,{children:(0,p.jsx)("div",{role:"tablist",children:(0,p.jsx)(a.X2,{justifyContent:"centered"===o?"center":"flex-start",children:t.map(((e,t)=>{var o;return(0,p.jsx)("button",{ref:e=>{e&&(d.current[t]=e)},id:h(t),role:"tab","aria-controls":m(t),"aria-selected":t===r,tabIndex:t===r?void 0:-1,onKeyDown:x,style:{...u.tab,...t===r&&u.tabSelected},onClick:e=>{e.stopPropagation(),n(t)},children:(0,p.jsxs)(a.X2,{gap:4,alignItems:"center",children:[null===(o=e.icon)||void 0===o?void 0:o.call(e,u.icon),e.label&&(0,p.jsx)("div",{style:u.label,children:e.label})]})},e.key)}))})})}),(0,p.jsx)(V,{id:m(r),role:"tabpanel","aria-labelledby":h(r),children:t[r]?t[r].children:null})]})})}function A(e){return(0,p.jsx)("div",{className:n()(O,e.className),style:{"--min-column-width":`${e.minWidth}px`,...e.style},children:e.children})}function F(e){return(0,p.jsxs)(A,{minWidth:e.minWidth,className:e.className,style:e.style,children:[e.left,e.right]})}},213148:(e,t,o)=>{o.d(t,{U:()=>s});o(667294);var r=o(745238),n=o(785893);const s=(0,r.IU)("close",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M2.89795 13.3428C3.18799 13.6262 3.6626 13.6262 3.93945 13.3494L7.99341 9.29541L12.0474 13.3494C12.3308 13.6262 12.8054 13.6328 13.0889 13.3428C13.3723 13.0593 13.3723 12.5847 13.0955 12.3079L9.0415 8.24731L13.0955 4.19336C13.3723 3.9165 13.3789 3.4353 13.0889 3.15845C12.7988 2.875 12.3308 2.875 12.0474 3.15186L7.99341 7.20581L3.93945 3.15186C3.6626 2.875 3.1814 2.86841 2.89795 3.15186C2.6145 3.44189 2.62109 3.9231 2.89795 4.19336L6.9519 8.24731L2.89795 12.3079C2.62109 12.5781 2.6145 13.0659 2.89795 13.3428Z"})})},762208:(e,t,o)=>{o.d(t,{z:()=>s});o(667294);var r=o(745238),n=o(785893);const s=(0,r.IU)("loop",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M5.80371 3.12305C5.81006 3.50391 6.05762 3.74512 6.47656 3.74512H11.3643C11.9546 3.74512 12.2783 4.0498 12.2783 4.66553V11.2925L11.377 10.3149L10.8628 9.80078C10.5962 9.54688 10.2344 9.52783 9.96777 9.78809C9.71387 10.0483 9.72021 10.4229 9.98047 10.6831L12.145 12.8413C12.6211 13.311 13.167 13.311 13.6431 12.8413L15.8076 10.6831C16.0679 10.4229 16.0742 10.0483 15.8203 9.78809C15.5537 9.52783 15.1919 9.54688 14.9253 9.80078L14.4111 10.3149L13.5161 11.2861V4.56396C13.5161 3.20557 12.8052 2.50098 11.4341 2.50098H6.47656C6.05762 2.50098 5.79736 2.74219 5.80371 3.12305ZM0.186035 7.05859C0.446289 7.3252 0.808105 7.30615 1.07471 7.0459L1.59521 6.53809L2.48389 5.56689V12.2891C2.48389 13.6475 3.19482 14.3521 4.56592 14.3521H9.52344C9.94238 14.3521 10.2026 14.1108 10.1963 13.73C10.1899 13.3428 9.94238 13.1079 9.52344 13.1079H4.64209C4.05176 13.1079 3.72803 12.7969 3.72803 12.1812V5.5542L4.62305 6.53809L5.14355 7.0459C5.40381 7.30615 5.77197 7.3252 6.03223 7.05859C6.29248 6.79834 6.28613 6.43018 6.01953 6.16992L3.85498 4.01172C3.37891 3.53564 2.83936 3.53564 2.36328 4.01172L0.19873 6.16992C-0.0678711 6.43018 -0.0742188 6.79834 0.186035 7.05859Z"})})},38715:(e,t,o)=>{o.d(t,{N:()=>s});o(667294);var r=o(745238),n=o(785893);const s=(0,r.IU)("save",{viewBox:"0 0 16 16",svg:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("path",{d:"M7.99316 10.8877C7.8291 10.8877 7.67871 10.833 7.52148 10.6758L5.22461 8.46094C5.1084 8.34473 5.04004 8.22168 5.04004 8.05762C5.04004 7.74316 5.29297 7.51074 5.60059 7.51074C5.75781 7.51074 5.92188 7.5791 6.03125 7.70215L6.98828 8.7207L7.43262 9.22656L7.36426 8.20801V1.11914C7.36426 0.78418 7.65137 0.49707 7.99316 0.49707C8.3418 0.49707 8.62891 0.78418 8.62891 1.11914V8.20801L8.56055 9.21973L8.99805 8.7207L9.96191 7.70215C10.0713 7.5791 10.2285 7.51074 10.3857 7.51074C10.6934 7.51074 10.9463 7.74316 10.9463 8.05762C10.9463 8.22168 10.8848 8.34473 10.7686 8.46094L8.47168 10.6758C8.31445 10.833 8.16406 10.8877 7.99316 10.8877ZM4.0625 15.3174C2.58594 15.3174 1.82031 14.5586 1.82031 13.1025V6.36914C1.82031 4.91309 2.58594 4.1543 4.0625 4.1543H6.04492V5.49414H4.14453C3.50879 5.49414 3.16016 5.82227 3.16016 6.48535V12.9863C3.16016 13.6494 3.50879 13.9775 4.14453 13.9775H11.8486C12.4775 13.9775 12.833 13.6494 12.833 12.9863V6.48535C12.833 5.82227 12.4775 5.49414 11.8486 5.49414H9.94824V4.1543H11.9307C13.4072 4.1543 14.1729 4.91309 14.1729 6.36914V13.1025C14.1729 14.5586 13.4072 15.3174 11.9307 15.3174H4.0625Z"})})})}}]);