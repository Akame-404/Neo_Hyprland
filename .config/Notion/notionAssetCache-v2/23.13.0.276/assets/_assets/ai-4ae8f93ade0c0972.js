"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[45741],{547801:(e,t,o)=>{o.d(t,{Pz:()=>d,fF:()=>a,vE:()=>r,vW:()=>c});var n=o(119037),i=o(319124),s=o(521273);const a=[function(e){return(0,i.GD)(e.publicEditMode)},n.J5S,n.ffD(n.ypk)],r=[...a,n.ffD(n.OPg),n.ffD(n.OXD)];function l(e){return!s.Z.isAssistantInWriterEnabled()}const d=[...r,l],c=[...r,e=>!l()]},911969:(e,t,o)=>{o.d(t,{K:()=>i,y:()=>s});var n=o(730459);function i(e,t){const{from:o}=t;n.K4(e,"show_tooltip",{from:o,time:Date.now()})}function s(e,t){const{from:o}=t;n.K4(e,"dismiss_tooltip",{from:o,time:Date.now()})}},79474:(e,t,o)=>{o.d(t,{r:()=>i});var n=o(943604);async function i(e){return new Promise((t=>{n.Z.setState({open:!0,onClose:()=>{n.Z.setState({open:!1}),t(!1)},onConfirm:()=>{n.Z.setState({open:!1}),t(!0)},...e})}))}},718250:(e,t,o)=>{o.d(t,{K:()=>s,O:()=>i});var n=o(745483);function i(e){n.Z.state.openModals.has(e)||(n.Z.state.openModals.add(e),n.Z.emit())}function s(e){n.Z.state.openModals.has(e)&&(n.Z.state.openModals.delete(e),n.Z.emit())}},416091:(e,t,o)=>{o.d(t,{ND:()=>j,RD:()=>P,gc:()=>U,gl:()=>T,u7:()=>F});var n=o(667294),i=o(336769),s=o(800480),a=o(886628),r=o(541432),l=o(44317),d=o(709291),c=o(401898),p=o(911969),u=o(210228),f=o(237181),g=o(481415),_=(o(95477),o(319124)),m=o(268056),A=o(489086),h=o(828685),y=o(80444),C=o(521273),I=o(896026),v=o(206258),S=o(924666),b=o(244458),M=o(453365),k=o(489626),w=o(785893);const O=1,L=1,x=(0,d.defineMessages)({spaceForAiHeader:{id:"AiOnboardingTooltips.spaceForAi.header",defaultMessage:"Press ‘space’ for AI"},spaceForAiContent:{id:"AiOnboardingTooltips.spaceForAi.content",defaultMessage:"On a new line or page, press ‘space’ on your keyboard for AI to generate or edit the page. Try it now!"},askAiAnythingHeader:{id:"AiOnboardingTooltips.askAiAnything.header",defaultMessage:"Ask AI anything"},askAiAnythingContent:{id:"AiOnboardingTooltips.askAiAnything.content",defaultMessage:"Just tell AI what to do — the more details, the better. You can also start from an example in the menu."},refineAiResponseHeader:{id:"AiOnboardingTooltips.refineAiResponse.header",defaultMessage:"Tell AI what to do next"},refineAiResponseContent:{id:"AiOnboardingTooltips.refineAiResponse.content",defaultMessage:"How was it? Give AI further instructions to improve what it wrote, or hit ‘Done’ when finished."},showAssistantLocationHeader:{id:"AiOnboardingTooltips.showAssistantLocation.answersToYourQuestionHeader",defaultMessage:"Ask AI when searching"},showAssistantLocationContent:{id:"AiOnboardingTooltips.showAssistantLocation.askQuestionBody",defaultMessage:"AI can find pages and synthesize a quick, concise answer for you. Try it now."},showAssistantOriginElementLocationHeader:{id:"AiOnboardingTooltips.ShowAssistantOriginElementLocationTooltip.header",defaultMessage:"Start by asking a question"},showAssistantOriginElementLocationContent:{id:"AiOnboardingTooltips.ShowAssistantOriginElementLocationTooltip.content",defaultMessage:"Notion AI will find pages and compose a concise answer for you. Try it now."}});function F(){const e=(0,s.O7)(),t=function(){const e=(0,s.O7)(),t=(0,a.VK)((()=>{var e;return null===(e=y.default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),o=(0,a.VK)((()=>{const t=y.default.state.mainEditorCurrentBlockStore;return t&&I.Z.getMode(e,t)}),[e]);return(0,a.VK)((()=>{if(e.device.isMobile)return;const{currentUserSettingsStore:n,inAppCalloutStore:i}=y.default.state;if(!i.getCalloutVisibility("ai_onboarding_tooltip").canShow)return;if(C.Z.showAssistantOnboardingAssets()){const o=null==n?void 0:n.getSettings();if(!o)return;if((0,c.$K)(o.last_used_ai_writer_at))return;if("tooltip"!==o.ai_assistant_onboarding_phase)return;if((0,M.$_)(e,t)){if(!(0,c.$K)(o.ai_sales_assisted_extra_notification_seen_at)||(0,l.O5)(o.ai_sales_assisted_extra_notification_seen_at)<L)return}else if((0,c.$K)(o.ai_assistant_onboarding_phase_last_set_at)&&(0,l.O5)(o.ai_assistant_onboarding_phase_last_set_at)<O)return}else{const e=null==n?void 0:n.getSettings();if(!e)return;const t=16770636e5;if(e.signup_time&&e.signup_time>t)return}if("space_for_ai"!==(0,k.sy)())return;if(!(0,_.GD)(o))return;const s=S.default.state;if("editing"===s.mode){const e=(0,m.QY)(s.multiSelection);if(e&&(0,A.wd)(e.selection)){const t=e.store,o=h.E.findEditableWithStore(t);if(o){const e="block"===t.pointer.table?v.G.createChildStore(t,t.pointer):void 0,n=e&&e.getType(),i=Boolean(n&&(0,r.hD)(n)),s=t.getValue();if(i&&!s)return o}}}}),[e,o,t])}();return t?(0,w.jsx)(g.U,{origin:()=>t.getNode(),placementToOrigin:"bottom",header:(0,w.jsx)(d.FormattedMessage,{...x.spaceForAiHeader}),content:(0,w.jsx)(d.FormattedMessage,{...x.spaceForAiContent}),onCloseClick:()=>(0,k.fz)(e)}):null}function P(e){const{originRef:t,openState:o}=e,n=(0,s.O7)(),i=(0,a.VK)((()=>(0,k.sy)()),[]);if(n.device.isMobile)return null;return"ask_ai_anything"===i&&"initialPrompt"===o.stage?(0,w.jsx)(g.U,{origin:t,placementToOrigin:"top",header:(0,w.jsx)(d.FormattedMessage,{...x.askAiAnythingHeader}),content:(0,w.jsx)(d.FormattedMessage,{...x.askAiAnythingContent}),onCloseClick:()=>(0,k.fz)(n)}):null}function T(e){const{originRef:t,openState:o,isInputEmpty:n}=e,i=(0,s.O7)(),r=(0,a.VK)((()=>(0,k.sy)()),[]);if(i.device.isMobile)return null;const l="refine_ai_response"===r&&"results"===o.stage&&!o.loading&&"cursor"===o.context.type&&n;return(0,w.jsx)(g.U,{origin:l?t:void 0,placementToOrigin:"right",pointerOffset:-4,pointerLength:25,header:(0,w.jsx)(d.FormattedMessage,{...x.refineAiResponseHeader}),content:(0,w.jsx)(d.FormattedMessage,{...x.refineAiResponseContent}),onCloseClick:()=>(0,k.fz)(i)})}function j(e){const{origin:t}=e,o=(0,s.O7)();(0,n.useEffect)((()=>{p.K(o,{from:"qna_button"})}),[o]);const i=(0,n.useCallback)((()=>{const{currentUserSettingsStore:e}=y.default.state;e&&(p.y(o,{from:"qna_button"}),(0,b.setQnaOnboardingPhase)(o,{phase:"complete",transactionUserAction:"AiQnaIntroModal.debug.clickTooltipComplete",userSettingsStore:e}))}),[o]);return(0,w.jsx)(g.U,{style:{width:250},pointerLength:25,pointerPosition:"94%",origin:t,placementToOrigin:"top",header:(0,w.jsx)(d.FormattedMessage,{...x.showAssistantOriginElementLocationHeader}),content:(0,w.jsx)(d.FormattedMessage,{...x.showAssistantOriginElementLocationContent}),onCloseClick:i})}function U(e){const{origin:t}=e,o=(0,s.O7)();(0,n.useEffect)((()=>{p.K(o,{from:"qna_search"})}),[o]);const i=(0,n.useCallback)((()=>{const{currentUserSettingsStore:e}=y.default.state;e&&(p.y(o,{from:"qna_search"}),(0,b.setQnaOnboardingPhase)(o,{phase:"complete",transactionUserAction:"AiQnaIntroModal.debug.clickTooltipComplete",userSettingsStore:e}))}),[o]);return(0,w.jsx)(g.U,{style:{width:250},pointerLength:25,pointerPosition:"5%",origin:t,placementToOrigin:"bottom",header:(0,w.jsx)(d.FormattedMessage,{...x.showAssistantLocationHeader}),content:(0,w.jsx)(d.FormattedMessage,{...x.showAssistantLocationContent}),onCloseClick:i})}(0,i.exposeDebugEnvironmentValue)("resetAIOnboarding",(e=>()=>{const{currentUserSettingsStore:t}=y.default.state;t&&u.createAndCommit({userAction:"AiIntroModal.debugging.resetAIOnboarding",environment:e,perform:e=>{f.d2({userSettingsStore:t,transaction:e,data:{ai_onboarding_phase:"space_for_ai"}})},userId:t.id})}))},644866:(e,t,o)=>{o.r(t),o.d(t,{autofillPropertyForBlocks:()=>Y,autofillPropertyForCollection:()=>X,fillAllPagesMessages:()=>R,getDefaultAiInference:()=>te,getPropertyCompletionForBlock:()=>ee,saveOrRemovePropertyAiInference:()=>J,submitFeedbackForAiAutofill:()=>$,triggerAiAutofillUpsell:()=>Q});o(757658);var n=o(667294),i=o(126263),s=o(399036),a=o(180951),r=o(471924),l=o(300482),d=o(803791),c=o(709291),p=o(598151),u=o(401898),f=o(10910),g=o(108406),_=o(454642),m=o(800893),A=o(79474),h=o(547307),y=o(496802),C=o(164964),I=o(137231),v=o(210228),S=o(710274),b=o(886628),M=o(698519),k=o(452423),w=o(679576),O=o(973420),L=o(568785),x=o(606854),F=o(785893);const P=function(e){let{environment:t,inferenceIds:o,aiInference:i}=e;const s=(0,b.VK)((()=>{const{state:e}=w.W;return"uninitialized"===e.type?null:{numBlocksToAutofill:e.numBlocksToAutofill,numBlocksAutofilled:e.numBlocksAutofilled,propertySchema:e.propertySchema,collectionId:e.collectionId,sessionId:e.sessionId,haveAllBlocksCompletedAutofill:e.haveAllBlocksCompletedAutofill}}),[]),a=(0,n.useCallback)((()=>{s&&(o.forEach((e=>{f.qG(t,{ai_inference_type:i.type,type:"undo_from_snackbar",inference_id:e,collection_id:s.collectionId,session_id:s.sessionId})})),k.Yw(t,!0),C.rN(),w.W.setState({type:"filling",...s,didInterruptStreaming:!0}))}),[s,t,i,o]);if(!s)return null;const{numBlocksToAutofill:r,numBlocksAutofilled:l,propertySchema:{name:d}}=s;return l===r?(0,F.jsxs)(O.X2,{gap:4,alignItems:"center",children:[(0,M.k)({width:16}),(0,F.jsx)(c.FormattedMessage,{defaultMessage:'AI updated "{propertyName}" on {numPages, plural, one {1 page} other {# pages}}',id:"snackbar.aiAutofill.autofillInProgress",values:{propertyName:d,numPages:r}}),(0,F.jsx)(x.Pn,{onClick:a,children:(0,F.jsx)(c.FormattedMessage,{defaultMessage:"Undo",id:"snackbar.aiAutofill.undo"})}),(0,F.jsx)(x.Pn,{onClick:()=>{C.rN()},children:(0,F.jsx)(c.FormattedMessage,{defaultMessage:"Close",id:"snackbar.aiAutofill.close"})})]}):(0,F.jsxs)(O.X2,{gap:4,alignItems:"center",children:[(0,F.jsx)(L.Z,{}),0===l?(0,F.jsx)(c.FormattedMessage,{defaultMessage:'AI updating "{propertyName}" on {numPages, plural, one {1 page} other {# pages}}',id:"snackbar.aiAutofill.autofillStarting",values:{propertyName:d,numPages:r}}):(0,F.jsx)(c.FormattedMessage,{defaultMessage:'AI updated "{propertyName}" on {numFilledPages} of {numTotalPages} pages',id:"snackbar.aiAutofill.completedAutofill",values:{propertyName:d,numFilledPages:l,numTotalPages:r}}),(0,F.jsx)(x.Pn,{onClick:a,children:(0,F.jsx)(c.FormattedMessage,{defaultMessage:"Stop & undo",id:"snackbar.aiAutofill.undoAndStop"})})]})};var T=o(296994),j=o(433929),U=o(80444),N=o(206258),B=o(801310),E=o(44041),W=o(535057),q=o(288280),D=o(484654);const R=(0,c.defineMessages)({fillAllPagesTooltip:{defaultMessage:"{hasNames, select, true {Autofill {propertyName} for all pages in {collectionName}} other {Autofill this property for all pages in the database}}",id:"aiAutofill.fillAllPages.buttonTooltip"},fillAllPagesAddOnMessage:{defaultMessage:"Only with Notion AI add-on",id:"aiAutofill.fillAllPages.onlyWithAiAddOnMessageInTooltip"}});function V(e){let{environment:t,propertyId:o,propertySchema:n,storesWithCompletions:i,blockIdToInferenceId:r,useTemporaryStore:l,markdownLinkifyIt:d,tinyMceMicrosoftWordPasteFilter:c,doneStreaming:p,aiInferenceOverride:f}=e;v.createAndCommit({userAction:"BlockPropertyValue.handleActionButtonClick.aiAutofill",environment:t,canUndo:!Boolean(l),undoCheckpoint:!0,perform:e=>{var g;for(const{store:_,temporaryStore:A,completion:h}of i){const i=l?A:_;let C;switch(n.type){case"text":C=m.of({text:h.trim(),stripText:!1,stripSurroundingWhitespace:!0,markdownLinkifyIt:d,tinyMceMicrosoftWordPasteFilter:c});break;case"multi_select":case"select":const t=l?null===(g=_.getAssociatedCollectionStore())||void 0===g?void 0:g.clone(A.inMemoryRecordCache):_.getAssociatedCollectionStore(),i=f??n.select_ai_inference;let r=h.trim().split(",").map((e=>e.trim()));if(p||(r=r.slice(0,-1)),t&&null!=i&&i.add_options){const i=(0,s.RR)({newTokenValues:r.length>0&&"select"===n.type?[[r[0]]]:[r],property:o,propertySchema:n,collectionId:t.id});if(i)for(const o of i)v.applyOperation({store:t,operation:o,transaction:e})}null!=i&&i.add_options||(r=r.filter((e=>{var t;return null===(t=n.options)||void 0===t?void 0:t.find((t=>t.value===e))}))),C=(0,a.zq)(r);break;default:(0,u.t1)(n)}I.sO({environment:t,store:i.getNormalizedPropertyStore(o),value:C,transaction:e});const S=i.getFormat().ai_property_inference_map??{},b=r[_.id]??"";y.FH({stores:[i],update:{ai_property_inference_map:{...S,[o]:{inference_id:b,created_time:Date.now()}}},transaction:e})}}})}const Z=(0,c.defineMessages)({FAILED_TO_AUTOFILL:{defaultMessage:"Something went wrong. Please try again later",id:"propertyCompletionActions.error.unableToAutofill"},INVALID_PROPERTY_FOR_AUTOFILL:{defaultMessage:"Invalid property configuration for AI autofill",id:"propertyCompletionActions.error.invalidPropertyForAutofill"},NO_BLOCKS_TO_AUTOFILL:{defaultMessage:"Nothing to update with AI",id:"propertyCompletionActions.error.noBlocksToAutofill"}}),H=(0,c.defineMessages)({featureUnavailable:{id:"completionActions.featureNotEnabledError",defaultMessage:"This feature is not currently enabled"}});function K(e){let{autofillPropertyResult:t}=e;const o=j.default.formatMessage(Z[t]);C.rN(),h.deprecatedShowErrorMessage(o)}const z={ai_limit_property_autofill:(0,F.jsx)(c.FormattedMessage,{defaultMessage:"This workspace has used all of its free AI responses. Contact your workspace owner to add Notion AI.",id:"aiAutofill.outOfAiUpsellDialogMessage"}),ai_autofill_on_page_edit:(0,F.jsx)(c.FormattedMessage,{defaultMessage:"Auto-update requires the Notion AI Add-on. Contact your workspace owner to add Notion AI.",id:"aiAutofill.autoUpdateOnPageEditUpsellDialogMessage"}),ai_autofill_fill_all_pages:(0,F.jsx)(c.FormattedMessage,{defaultMessage:"Updating all pages requires the Notion AI Add-on. Contact your workspace owner to add Notion AI.",id:"aiAutofill.fillAllPagesUpsellDialogMessage"}),ai_autofill_bulk_fill:(0,F.jsx)(c.FormattedMessage,{defaultMessage:"Filling more pages at once requires the Notion AI Add-on. Contact your workspace owner to add Notion AI.",id:"aiAutofill.bulkFillUpsellDialogMessage"})};function Q(e){var t;let{environment:o,from:n}=e;null!==(t=U.default.state.currentSpaceStore)&&void 0!==t&&t.canAdmin()||h.deprecatedShowErrorMessage(z[n]),E.y(o,{from:n,for:(0,W.zt)(),addOnFeature:"ai"})}function G(e){let{errorCode:t,environment:o}=e;return 405===t?C.oV({label:j.default.formatMessage(H.featureUnavailable)}):(402===t&&(C.rN(),Q({environment:o,from:"ai_limit_property_autofill"})),D.showCompletionErrorWithCode(t))}async function Y(e){var t;let{environment:o,stores:n,property:a,propertySchema:l,userEventForAnalytics:d,sessionIdForAnalytics:c,collectionContextStore:m,from:A,isBulkAction:h,aiInferenceOverride:y}=e;const I=c||r.Il(),v=a,S=n.map((e=>({spaceId:e.getSpaceId(),...e.pointer,propertyId:v,inferenceId:r.Il()}))),b=n[0].getAssociatedCollectionId()??(null===(t=n[0].getCollectionViewCollectionStore())||void 0===t?void 0:t.id),M=new i.Z({name:"propertyCompletionActions.autofillPropertyForBlocks"});if(w.W.setIsWriting({stores:n,propertySchema:l,sessionIdForAnalytics:c}),"uninitialized"!==w.W.state.type&&(0,s.qQ)(l)&&b){C.oV({label:(0,F.jsx)(P,{environment:o,inferenceIds:S.map((e=>e.inferenceId)),aiInference:(0,s.q3)(l)}),durationMs:B.JY});try{var k;if(o.defaultRecordCache.inMemoryRecordCache.addCacheOverride(M),!(0,u.Of)(S))return K({autofillPropertyResult:"NO_BLOCKS_TO_AUTOFILL"});const e=y||(0,s.q3)(l);if(!e)return K({autofillPropertyResult:"INVALID_PROPERTY_FOR_AUTOFILL"});S.forEach((t=>{f.qG(o,{type:d,inference_id:t.inferenceId,ai_inference_type:e.type,collection_id:b,session_id:I})})),null!==(k=U.default.state.currentSpaceStore)&&void 0!==k&&k.id&&_.publishAiSession(o,{inference_type:"autofill",id:I,spaceId:U.default.state.currentSpaceStore.id,metadata:{blockPropertyPointers:S,aiInference:e,collection_id:b}});const t=await _.getCompletionForProperty(o,{blockPropertyPointers:S,aiInference:e,aiSessionId:I,model:"default"});if("success"!==t.type)return K({autofillPropertyResult:"FAILED_TO_AUTOFILL"});m&&g.rv({block_id:n[0].pointer.id,property:v,property_type:l.type,from:A,environment:o,collectionContextStore:m,isFromBulkActionsToolbar:h});const i=Object.fromEntries(n.map((e=>[e.pointer.id,{store:e,temporaryStore:e.clone(M),completion:""}]))),a=Object.fromEntries(S.map((e=>[e.id,e.inferenceId]))),r=new Set,[c,C]=await Promise.all([T.FF.markdownLinkifyIt.load(),T.FF.tinyMceMicrosoftWordPasteFilter.load()]);if(p.H1.is(t.data)){for await(const e of t.data){if("error"===e.type)return w.W.setState({...w.W.state,didInterruptStreaming:!0}),G({errorCode:e.errorCode,environment:o});if(w.W.state.didInterruptStreaming)return;const t=i[e.blockPropertyPointer.id],n=t.completion+e.completion;i[e.blockPropertyPointer.id]={...t,completion:n},r.add(e.blockPropertyPointer.id),V({environment:o,propertyId:v,propertySchema:l,storesWithCompletions:Object.values(i),blockIdToInferenceId:a,useTemporaryStore:!0,markdownLinkifyIt:c,tinyMceMicrosoftWordPasteFilter:C,aiInferenceOverride:y}),w.W.setState({...w.W.state,numBlocksAutofilled:r.size})}w.W.setState({...w.W.state,haveAllBlocksCompletedAutofill:!0})}o.defaultRecordCache.inMemoryRecordCache.removeCacheOverride(M),V({environment:o,propertyId:v,propertySchema:l,storesWithCompletions:Object.values(i),blockIdToInferenceId:a,useTemporaryStore:!1,markdownLinkifyIt:c,tinyMceMicrosoftWordPasteFilter:C,doneStreaming:!0,aiInferenceOverride:y})}finally{o.defaultRecordCache.inMemoryRecordCache.hasCacheOverride(M)&&o.defaultRecordCache.inMemoryRecordCache.removeCacheOverride(M)}}}function $(e){const{environment:t,inferenceId:o,feedbackType:n,userContent:i,shareWithNotion:s}=e;f.NF(t,{type:"property_autofill",inference_id:o,feedback_type:n,timestamp:(new Date).toUTCString(),user_comment:i,share_with_notion:s})}async function X(e){var t,o;let{environment:n,collectionStore:i,propertySchema:a,property:c,sessionIdForAnalytics:p}=e;if(!(0,s.qQ)(a))return;const u=(0,s.q3)(a);if(!i||!a||!u)return;const g=(null===(t=q.subscriptionDataStoreInstance.state)||void 0===t?void 0:t.addOns)??[];if(!(0,d.de)(g))return void Q({environment:n,from:"ai_autofill_fill_all_pages"});if(!(await A.r({sourceAction:"fill_all_pages",propertyName:a.name,collectionName:(null===(o=i.getName())||void 0===o?void 0:o.toString())||""})))return;f.qG(n,{type:"generate_from_fill_all_pages",inference_id:r.Il(),ai_inference_type:u.type,collection_id:i.id,session_id:p??r.Il()});const _=[];_.push(l.op.update({pointer:i.pointer,path:["format","update_ai_inferences_status"],args:{[c]:{type:"requested",created_time:Date.now()}}})),S.HW({environment:n,collectionStore:i,performTransaction:e=>{for(const t of _)v.applyOperation({store:(0,N.Kv)(i,t.pointer),operation:t,transaction:e})}})}function J(e){const{environment:t,propertySchema:o,collectionStore:n,property:i,draftAiInference:a}=e;let r="";switch(o.type){case"text":r="ai_inference";break;case"select":case"multi_select":r="select_ai_inference";break;default:return}const l=[];if(l.push({pointer:n.pointer,command:"set",path:["schema",i,r],args:a}),a)f._e(t,{type:"set_ai_inference",ai_inference_type:a.type,collection_id:n.id});else{const e=(0,s.q3)(o);f._e(t,{type:"remove_ai_inference",ai_inference_type:null==e?void 0:e.type,collection_id:n.id})}S.HW({environment:t,collectionStore:n,performTransaction:e=>{for(const t of l)v.applyOperation({store:(0,N.Kv)(n,t.pointer),operation:t,transaction:e})}})}async function ee(e){var t;let{environment:o,store:n,property:i,propertySchema:s,userEventForAnalytics:a,sessionIdForAnalytics:l}=e;const d=l||r.Il(),c=i,u={spaceId:n.getSpaceId(),...n.pointer,propertyId:c,inferenceId:r.Il()},g=n.getAssociatedCollectionId()??(null===(t=n.getCollectionViewCollectionStore())||void 0===t?void 0:t.id),m=te(s,!1);if(!m)return"";f.qG(o,{type:a,inference_id:u.inferenceId,ai_inference_type:m.type,collection_id:g,session_id:d});const A=r.Il();_.publishAiSession(o,{inference_type:"autofill",id:A,metadata:{blockPropertyPointers:[u],aiInference:m,collection_id:g}});const h=await _.getCompletionForProperty(o,{blockPropertyPointers:[u],aiInference:m,aiSessionId:A,model:"default"});if("success"!==h.type)return"";let y="";if(p.H1.is(h.data))for await(const r of h.data)"error"!==r.type&&(y+=r.completion);return y}function te(e,t){if(!(0,s.qQ)(e))return;const o=(0,s.q3)(e);return!o&&(0,s.cu)(e)?{type:e.type,auto_update_on_edit:t,add_options:!1}:o}},453365:(e,t,o)=>{o.d(t,{$_:()=>u,lV:()=>c});var n=o(336769),i=o(44317),s=o(401898),a=o(80444),r=o(521273),l=o(88893);const d=1;function c(e){const{currentUserSettingsStore:t,currentSpaceStore:o}=a.default.state,n=null==t?void 0:t.getSettings();return!(!n||!o)&&(!e.device.isMobile&&(!!r.Z.showAssistantNotionAiCopy()&&(!!r.Z.isAiEnabled()&&(!!u(e,o.id)&&(!(0,s.$K)(n.ai_sales_assisted_extra_notification_seen_at)&&!("tooltip"!==n.ai_assistant_onboarding_phase||(0,s.$K)(n.ai_assistant_onboarding_phase_last_set_at)&&(0,i.O5)(n.ai_assistant_onboarding_phase_last_set_at)<d))))))}const p={isSalesAssisted:void 0};function u(e,t){return p.isSalesAssisted??(0,l.ro)(e,t)}(0,n.exposeDebugEnvironmentValue)("getAssistantOnboardingDebugInfo",(e=>()=>{const{currentUserSettingsStore:t,currentSpaceStore:o}=a.default.state,n=null==t?void 0:t.getSettings();if(!n||!o)return;const{ai_qna_intro_onboarding_phase:i,ai_assistant_onboarding_phase:s,ai_assistant_onboarding_phase_last_set_at:r,ai_assistant_tooltips_onboarding_phase:l,ai_sales_assisted_extra_notification_seen_at:d,last_exposed_to_ai_qna_at:c,qna_reminders_shown_at:p}=n;return{isSalesAssisted:u(e,o.id),relevantUserSettings:{ai_qna_intro_onboarding_phase:i,ai_assistant_onboarding_phase:s,ai_assistant_tooltips_onboarding_phase:l,ai_assistant_onboarding_phase_last_set_at:r,ai_sales_assisted_extra_notification_seen_at:d,last_exposed_to_ai_qna_at:c,qna_reminders_shown_at:p}}}))},895083:(e,t,o)=>{o.d(t,{D:()=>i,d:()=>n});const n={text:!0,bulleted_list:!0,numbered_list:!0,quote:!0,to_do:!0,header:!0,sub_header:!0,sub_sub_header:!0,callout:!0,toggle:!0,table:!0,equation:!0,code:!0},i={...n}},679576:(e,t,o)=>{o.d(t,{W:()=>a});var n=o(749085),i=o(471924);class s extends n.default{getInitialState(){return{type:"uninitialized"}}isWriting(){return"filling"===this.state.type&&!this.state.haveAllBlocksCompletedAutofill&&!this.state.didInterruptStreaming}setIsWriting(e){var t;const{propertySchema:o,stores:n,sessionIdForAnalytics:s}=e,a=n[0].getAssociatedCollectionId()??(null===(t=n[0].getCollectionViewCollectionStore())||void 0===t?void 0:t.id),r=s||i.Il();return this.setState({type:"filling",propertySchema:o,collectionId:a,numBlocksToAutofill:n.length,numBlocksAutofilled:0,sessionId:r,didInterruptStreaming:!1,haveAllBlocksCompletedAutofill:!1}),r}}const a=new s},943604:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o(749085).default.createValue({open:!1},{name:"ConfirmOverwriteModalStore"})},745483:(e,t,o)=>{o.d(t,{Z:()=>r});var n=o(749085),i=o(292595);class s extends n.default{getInitialState(){return{openModals:new Set}}}const a=new s,r=a;(0,i.exposeDebugValue)("GlobalModalStore",a)},361254:(e,t,o)=>{o.d(t,{Z:()=>s});var n=o(749085);class i extends n.default{getInitialState(){return{open:!1,openAnimationCompleted:!0,closeAnimationCompleted:!0}}}const s=i},213148:(e,t,o)=>{o.d(t,{U:()=>s});o(667294);var n=o(745238),i=o(785893);const s=(0,n.IU)("close",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M2.89795 13.3428C3.18799 13.6262 3.6626 13.6262 3.93945 13.3494L7.99341 9.29541L12.0474 13.3494C12.3308 13.6262 12.8054 13.6328 13.0889 13.3428C13.3723 13.0593 13.3723 12.5847 13.0955 12.3079L9.0415 8.24731L13.0955 4.19336C13.3723 3.9165 13.3789 3.4353 13.0889 3.15845C12.7988 2.875 12.3308 2.875 12.0474 3.15186L7.99341 7.20581L3.93945 3.15186C3.6626 2.875 3.1814 2.86841 2.89795 3.15186C2.6145 3.44189 2.62109 3.9231 2.89795 4.19336L6.9519 8.24731L2.89795 12.3079C2.62109 12.5781 2.6145 13.0659 2.89795 13.3428Z"})})},964275:(e,t,o)=>{o.d(t,{D:()=>s});o(667294);var n=o(745238),i=o(785893);const s=(0,n.IU)("closeSmall",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M3.732 11.052c-.303.308-.32.877.011 1.202.33.33.894.32 1.203.011L8 9.21l3.05 3.05c.32.325.872.32 1.197-.011a.857.857 0 00.01-1.197L9.21 8.002l3.05-3.056a.857.857 0 00-.01-1.197.857.857 0 00-1.198-.01L8 6.788 4.946 3.732c-.31-.303-.878-.32-1.203.01-.325.331-.314.895-.01 1.203l3.055 3.056-3.056 3.05z"})})},664878:(e,t,o)=>{o.d(t,{h:()=>s});o(667294);var n=o(745238),i=o(785893);const s=(0,n.IU)("dot",{viewBox:"0 0 5 4",svg:(0,i.jsx)("circle",{cx:"2.5",cy:"2",r:"2"})})},222686:(e,t,o)=>{o.d(t,{f:()=>s});o(667294);var n=o(745238),i=o(785893);const s=(0,n.IU)("person",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M7.7832 8.00195C9.27344 8.00195 10.5381 6.67578 10.5381 4.95996C10.5381 3.28516 9.2666 2 7.7832 2C6.29297 2 5.01465 3.30566 5.02148 4.97363C5.02148 6.67578 6.28613 8.00195 7.7832 8.00195ZM3.51758 14.3594H12.0352C13.1631 14.3594 13.5527 14.0176 13.5527 13.3887C13.5527 11.6318 11.3242 9.21191 7.77637 9.21191C4.23535 9.21191 2 11.6318 2 13.3887C2 14.0176 2.38965 14.3594 3.51758 14.3594Z"})})},414734:(e,t,o)=>{o.d(t,{X:()=>s});o(667294);var n=o(745238),i=o(785893);const s=(0,n.IU)("personCrossedOut",{viewBox:"0 0 44 44",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M5.4857 44H0L44 8.56549V13.0061L5.4857 44Z"}),(0,i.jsx)("path",{d:"M39.8048 44H8.66491L25.6448 30.4378C26.9394 30.6489 28.1581 30.9719 29.3009 31.4067C31.5362 32.2374 33.4346 33.326 34.9964 34.6723C36.5725 36.0044 37.7761 37.4367 38.6071 38.9692C39.4525 40.5018 39.8752 41.9555 39.8752 43.3305C39.8752 43.5675 39.8517 43.7906 39.8048 44Z"}),(0,i.jsx)("path",{d:"M30.3971 16.7973C30.3971 16.8668 30.3965 16.9359 30.3952 17.0048L19.3828 25.9192C18.7467 25.7134 18.1339 25.4228 17.5446 25.0473C16.2408 24.2023 15.1876 23.0708 14.3853 21.6528C13.5972 20.2205 13.2032 18.6163 13.2032 16.8403C13.2032 15.0929 13.5972 13.5174 14.3853 12.1137C15.1876 10.7101 16.2408 9.60007 17.5446 8.78366C18.8485 7.96725 20.267 7.55905 21.8001 7.55905C23.3332 7.55905 24.7517 7.96009 26.0556 8.76218C27.3595 9.56426 28.4054 10.6671 29.1935 12.0708C29.9959 13.4601 30.3971 15.0356 30.3971 16.7973Z"})]})})},38715:(e,t,o)=>{o.d(t,{N:()=>s});o(667294);var n=o(745238),i=o(785893);const s=(0,n.IU)("save",{viewBox:"0 0 16 16",svg:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("path",{d:"M7.99316 10.8877C7.8291 10.8877 7.67871 10.833 7.52148 10.6758L5.22461 8.46094C5.1084 8.34473 5.04004 8.22168 5.04004 8.05762C5.04004 7.74316 5.29297 7.51074 5.60059 7.51074C5.75781 7.51074 5.92188 7.5791 6.03125 7.70215L6.98828 8.7207L7.43262 9.22656L7.36426 8.20801V1.11914C7.36426 0.78418 7.65137 0.49707 7.99316 0.49707C8.3418 0.49707 8.62891 0.78418 8.62891 1.11914V8.20801L8.56055 9.21973L8.99805 8.7207L9.96191 7.70215C10.0713 7.5791 10.2285 7.51074 10.3857 7.51074C10.6934 7.51074 10.9463 7.74316 10.9463 8.05762C10.9463 8.22168 10.8848 8.34473 10.7686 8.46094L8.47168 10.6758C8.31445 10.833 8.16406 10.8877 7.99316 10.8877ZM4.0625 15.3174C2.58594 15.3174 1.82031 14.5586 1.82031 13.1025V6.36914C1.82031 4.91309 2.58594 4.1543 4.0625 4.1543H6.04492V5.49414H4.14453C3.50879 5.49414 3.16016 5.82227 3.16016 6.48535V12.9863C3.16016 13.6494 3.50879 13.9775 4.14453 13.9775H11.8486C12.4775 13.9775 12.833 13.6494 12.833 12.9863V6.48535C12.833 5.82227 12.4775 5.49414 11.8486 5.49414H9.94824V4.1543H11.9307C13.4072 4.1543 14.1729 4.91309 14.1729 6.36914V13.1025C14.1729 14.5586 13.4072 15.3174 11.9307 15.3174H4.0625Z"})})})},291427:(e,t,o)=>{o.d(t,{e:()=>s});o(667294);var n=o(745238),i=o(785893);const s=(0,n.IU)("star",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M3.2627 14.7637C3.58398 15.0098 3.98047 14.9277 4.44531 14.5928L8 11.9814L11.5547 14.5928C12.0195 14.9277 12.4229 15.0098 12.7441 14.7637C13.0586 14.5244 13.127 14.1279 12.9424 13.5879L11.541 9.41113L15.1299 6.83398C15.5879 6.50586 15.7861 6.14355 15.6562 5.76074C15.5264 5.38477 15.1641 5.2002 14.5967 5.20703L10.1943 5.23438L8.85449 1.03711C8.68359 0.490234 8.40332 0.196289 8 0.196289C7.60352 0.196289 7.32324 0.490234 7.14551 1.03711L5.80566 5.23438L1.40332 5.20703C0.835938 5.2002 0.480469 5.38477 0.350586 5.76074C0.220703 6.14355 0.412109 6.50586 0.876953 6.83398L4.46582 9.41113L3.05762 13.5879C2.87305 14.1279 2.94141 14.5244 3.2627 14.7637ZM4.45898 13.1162C4.45215 13.1025 4.45215 13.0957 4.45898 13.0615L5.75781 9.39062C5.87402 9.05566 5.83301 8.84375 5.52539 8.63867L2.3125 6.4375C2.28516 6.42383 2.27148 6.41016 2.27832 6.38965C2.29199 6.37598 2.30566 6.36914 2.33984 6.36914L6.22949 6.45801C6.58496 6.47168 6.7627 6.35547 6.86523 6.01367L7.96582 2.28125C7.97266 2.24023 7.98633 2.2334 8 2.2334C8.02051 2.2334 8.02734 2.24023 8.04102 2.28125L9.13477 6.01367C9.2373 6.35547 9.42188 6.47168 9.77051 6.45801L13.6602 6.36914C13.7012 6.36914 13.7148 6.37598 13.7217 6.38965C13.7285 6.41016 13.7217 6.41699 13.6875 6.4375L10.4814 8.63867C10.167 8.85059 10.126 9.05566 10.2422 9.39062L11.541 13.0615C11.5547 13.0957 11.5547 13.1025 11.541 13.1162C11.5273 13.1367 11.5137 13.123 11.4863 13.1094L8.40332 10.7305C8.12305 10.5117 7.87695 10.5117 7.60352 10.7305L4.52051 13.1094C4.49316 13.123 4.47266 13.1367 4.45898 13.1162Z"})})}}]);