"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[65548],{202517:(e,t,i)=>{i.r(t),i.d(t,{default:()=>le});var r=i(667294),n=i(800480),s=i(886628),o=i(724405),l=i(137810),a=i(304708),c=i(394841),d=i(356437),u=i(80444),h=i(798165),x=i(195697),g=i(206258),m=i(709291),f=i(164921),p=i(231945),v=i(478140),j=i(632163),b=i(840721),M=i(489728),y=i(460709),S=i(287686),W=i(815145),k=i(275754),Z=i(511470),w=i(672495),P=i(973744),C=i(783105),R=i(785893);const V=function(e,t){return[{key:"results",render:e=>(0,R.jsx)(w.Z,{...e}),items:t.map(((t,i)=>({key:t.id,render:e=>(0,R.jsx)(Z.Z,{...e,isSubpage:0!==i,store:t,hidePath:!0}),action:i=>{let{event:r}=i;const n=P.DJ(r);t instanceof g.G&&k._c({environment:e,store:t,openInNew:n,visitType:C.vu.Link,pageVisitSource:W.tY.Breadcrumb})}})))}]};const D=function(e){const{isMobile:t,stores:i}=e,r=(0,n.O7)(),s={display:"flex",alignItems:"center",flexShrink:0};return(0,R.jsx)(p.ZP,{popupType:t?p.Z4.SlideUp:p.Z4.Popup,renderOrigin:e=>t?(0,R.jsxs)(f.Z,{style:{...s},mobileFeedback:!0,...e,children:[(0,R.jsx)(S.f,{}),(0,R.jsx)("div",{style:{marginLeft:8,marginRight:8},children:"..."}),(0,R.jsx)(S.f,{})]}):(0,R.jsxs)("div",{style:s,children:[(0,R.jsx)(M.Z,{isSmall:!0,...e,children:"..."}),(0,R.jsx)(S.f,{})]}),render:e=>{let n;return n=t?{menuType:y.og.Modal,title:(0,R.jsx)(m.FormattedMessage,{defaultMessage:"Breadcrumb",id:"breadcrumb.mobileBreadcrumbMenu.title"}),right:(0,R.jsx)(b.DoneMenuText,{}),onClickRight:e.close}:{menuType:y.og.Popup,width:240},(0,R.jsx)(v.Z,{...n,children:(0,R.jsx)(j.Z,{type:j.i.Vertical,onAccept:e.close,initialFocus:void 0,sections:V(r,i)})})}})};var K=i(607692),T=i(24946);function O(e){const{ancestorMaxWidth:t,showDivider:i,store:r}=e;return r instanceof g.zX?(0,R.jsx)(T.Z,{store:r,showDivider:i,maxWidth:t}):(0,R.jsx)(K.Z,{store:r,showDivider:i,maxWidth:t})}function I(e){const{ancestorMaxWidth:t,isMobile:i,homeStore:r,store:n,maxAncestorCount:o}=e,[l,a]=(0,s.VK)((()=>{const e=h.uJ(n),t=n.isNavigableBlock()?e.slice(1):[...e];return t.reverse(),e.reverse(),[t,e]}),[n]),d=(0,s.VK)((()=>(0,c.Kj)(n.id)),[n]),u=(0,s.VK)((()=>x.bq()),[]);if(d&&void 0!==r)return(0,R.jsx)(O,{ancestorMaxWidth:t,showDivider:l.length>0,store:r},r.id);if(l.length>o){const[e,r,n]=[l[0],l.slice(1,l.length-o+1),l.slice(l.length-o+1)];if(u)return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(O,{ancestorMaxWidth:t,showDivider:!i,store:e},e.id),(0,R.jsx)(D,{isMobile:i,stores:i?a:r},"pages-popup"),n.map((e=>e instanceof g.zX?(0,R.jsx)(T.Z,{store:e,showDivider:!0,maxWidth:t},e.id):(0,R.jsx)(K.Z,{store:e,showDivider:!0,maxWidth:t},e.id)))]});{const e=l.filter((e=>e instanceof g.G)),r=l.filter((e=>e instanceof g.G));return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(K.Z,{store:e[0],showDivider:!i,maxWidth:t},e[0].id),(0,R.jsx)(D,{isMobile:i,stores:i?r:e.slice(1,e.length-o+1)},"pages-popup"),e.slice(e.length-o+1).map((e=>(0,R.jsx)(K.Z,{store:e,showDivider:!0,maxWidth:t},e.id)))]})}}return(0,R.jsx)(R.Fragment,{children:l.map((e=>(0,R.jsx)(O,{ancestorMaxWidth:t,showDivider:!0,store:e},e.id)))})}var B=i(436610),F=i(552771),L=i(731278),N=i(776798),E=i(450627),z=i(645010),A=i(188923),U=i(25238);const H=function(e){const{ancestorMaxWidth:t,ignoreMaxLength:i,showDivider:r,store:n}=e,s=(0,o.yK)((()=>({homeBreadCrumbWrapper:{marginLeft:-4},wrapper:{display:"flex",alignItems:"center",flexShrink:1,marginLeft:6,minWidth:0,maxWidth:i?void 0:"100%"}})),[i]);return(0,R.jsxs)("div",{style:s.wrapper,children:[(0,R.jsx)(U.Z,{store:n,maxWidth:t,ignoreMaxLength:i}),r&&(0,R.jsx)(S.f,{})]})};function _(e,t,i,n){return(0,r.useCallback)((()=>{const r=A.default.isCenterPeekOpen()?z.Z.PeekViewScroller:z.Z.PageScroller;if(r&&!r.atScrollStart())return r.scrollToTop({animate:!0}),void B.Op(e);const s=n.canEdit(),o=n.isNonEditableState(),l=n.getCollectionViewCollectionStore(),a=null==l?void 0:l.isSyncedCollection(),c=n.isExternalObjectInstancePageBlockStore(),d=(0,E.Wt)(n);if(t||A.default.isCenterPeekOpen()||!i||!s||o||c||a||d)return;const u=i.current;if(!u)return;if(!(u instanceof Element))return;const h=u.getBoundingClientRect();F.$({blockStore:n,originRect:h}),B.V(e)}),[e,t,i,n])}function J(e,t){const{currentPageMaxWidth:i,isMobile:r,currentPageRef:o,store:l}=e,a=(0,n.O7)(),d=(0,s.VK)((()=>(0,c.Kj)(l.id)),[l]),u=(0,s.VK)((()=>l.isEmptyPage()),[l]),h=(0,s.VK)((()=>l.getIcon()),[l]),x=r?24:20,g=_(a,r,o,l);return(0,R.jsxs)(M.Z,{shouldShrink:!0,onClick:g,isSmall:!0,ref:t,disabled:d,children:[Boolean(h)&&(0,R.jsx)(L.Z,{disabled:!0,icon:h,isEmptyPage:u,size:x,style:{marginRight:6},largeIcon:!0}),(0,R.jsx)(N.Z,{store:l,style:{maxWidth:i},enableHover:!0})]})}const q=(0,r.forwardRef)(J);function G(e){const{ancestorMaxWidth:t,isMobile:i,currentPageRef:r,store:o}=e,l=(0,n.O7)(),{mobileNative:a}=l,d=(0,s.VK)((()=>(0,c.WE)(o)),[o]),u=_(l,i,r,o),x=(0,s.VK)((()=>{const e=h.uJ(o);return 0===(o.isNavigableBlock()?e.slice(1):[...e]).length}),[o]);return d?null:i?(0,R.jsx)(M.Z,{shouldShrink:!0,onClick:u,isSmall:!0,style:null!=a&&a.supportsNativeHomeOnPhone()?{paddingLeft:0}:void 0,children:(0,R.jsx)(H,{store:o,showDivider:!1,ignoreMaxLength:x,ancestorMaxWidth:t})}):(0,R.jsx)(M.Z,{shouldShrink:!0,onClick:u,isSmall:!0,style:{fontSize:"inherit"},children:(0,R.jsx)(H,{store:o,showDivider:!1,ancestorMaxWidth:t})})}function X(e){const{ancestorMaxWidth:t,store:i}=e,r=(0,n.O7)(),o={display:"flex",alignItems:"center",flexShrink:0},l=(0,s.VK)((()=>{const e=h.uJ(i);return e.reverse(),e}),[i]);return(0,R.jsx)(p.ZP,{popupType:p.Z4.SlideUp,renderOrigin:e=>(0,R.jsx)(f.Z,{style:{...o,maxWidth:"100%"},mobileFeedback:!0,...e,children:(0,R.jsx)(H,{store:i,showDivider:!1,ignoreMaxLength:!0,ancestorMaxWidth:t})}),render:e=>{const t={menuType:y.og.Modal,title:(0,R.jsx)(m.FormattedMessage,{defaultMessage:"Breadcrumb",id:"breadcrumb.mobileBreadcrumbMenu.title"}),right:(0,R.jsx)(b.DoneMenuText,{}),onClickRight:e.close};return(0,R.jsx)(v.Z,{...t,children:(0,R.jsx)(j.Z,{type:j.i.Vertical,onAccept:e.close,initialFocus:void 0,sections:V(r,l)})})}},"pages-popup")}var Q=i(973935),Y=i(542853),$=i(16184),ee=i(772141),te=i(73990),ie=i(211302),re=i(526388),ne=i(825464),se=i(535057);function oe(e){const{store:t}=e,i=(0,n.O7)(),l=(0,s.VK)((()=>{if(!(0,x.bq)())return!1;if(!(0,se.mq)())return!1;const{currentSpaceViewStore:e}=u.default.state,r=null==e?void 0:e.getPrivatePages(i);return null==r?void 0:r.some((e=>e.id===t.id))}),[i,t]),a=(0,s.VK)((()=>{const e=i.currentUser.id;return t.getPermissionItems().every((t=>(0,ee.jg)(t)&&e===t.user_id))}),[i,t]),c=(0,o.Fg)(),d=(0,r.useRef)(null),h=(0,r.useCallback)((()=>{if(!d)return;const e=Q.findDOMNode(d.current);if(!(e&&e instanceof Element))return;const r=e.getBoundingClientRect(),n=new DOMRect(r.x,r.y,r.width,r.height+5);te.Fo(i),ie.bA({environment:i,blocks:[t],originRect:n,moveToContext:"topbar_breadcrumb"})}),[i,d,t]);return l&&a?(0,R.jsx)(re.Z,{placement:ne.u.Right,renderTooltip:e=>(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{children:(0,R.jsx)(m.FormattedMessage,{defaultMessage:"Only you have access",id:"breadcrumb.moveTo.hasPermission.title"})}),(0,R.jsx)("div",{style:{color:c.mediumInvertedTextColor},children:(0,R.jsx)(m.FormattedMessage,{defaultMessage:"Click to move",id:"breadcrumb.moveTo.hasPermission.subtitle"})})]}),render:e=>(0,R.jsxs)(M.Z,{isSmall:!0,disabled:!1,onClick:h,ref:d,...e,children:[(0,$.Q)({width:16,fill:c.lightIconColor}),(0,R.jsx)("span",{style:{color:c.lightTextColor,marginLeft:4,marginRight:5},children:(0,R.jsx)(m.FormattedMessage,{defaultMessage:"Private",id:"breadcrumb.moveTo.privatePages"})}),(0,Y.i)({width:9,fill:c.lightIconColor})]})}):null}const le=function(e){const{ancestorMaxWidth:t,maxAncestorCount:i,currentPageMaxWidth:h,isMobile:x,showCurrentPageControls:g,store:m,style:f}=e,p=(0,r.useRef)(null),v=(0,n.O7)(),j=(0,o.yK)((()=>({container:{display:"flex",alignItems:"center",lineHeight:1.2,fontSize:x?l.Z.fontSize.UIRegular.mobile:l.Z.fontSize.UIRegular.desktop,...f},enforceMaxLength:{maxWidth:"100%"}})),[x,f]),b=(0,s.VK)((()=>{var e;return!(null===(e=m.getTitleStore())||void 0===e||!e.isReady())}),[m]),M=(0,s.VK)((()=>{const{currentSpaceViewStore:e}=u.default.state;let t;return e&&e.isReady()&&(t=(0,c.Al)(e)),t}),[]),y=(0,s.VK)((()=>!(0,c.WE)(m)&&g&&m.isReady()),[g,m]),S=(0,s.VK)((()=>{var e;return null===(e=v.mobileNative)||void 0===e?void 0:e.supportsNativeHomeOnPhone()}),[v]);return(0,s.VK)((()=>{var e;if(!a.Pr())return!1;if(Boolean(v.currentUser.isLoggedIn()||v.publicDomainUserId))return!1;const t=d.gR(m);return null==t||null===(e=t.getSiteStore())||void 0===e||null===(e=e.getHeader())||void 0===e?void 0:e.hideBreadcrumbs}),[v,m])?null:b?S?(0,R.jsx)("div",{style:{...j.container,...j.enforceMaxLength},className:"notranslate",children:(0,R.jsx)(X,{store:m,ancestorMaxWidth:t})}):(0,R.jsxs)("div",{style:j.container,className:"notranslate shadow-cursor-breadcrumb",children:[(0,R.jsx)(I,{ancestorMaxWidth:t,maxAncestorCount:i,isMobile:x,homeStore:M,store:m}),y?(0,R.jsx)(q,{currentPageMaxWidth:h,isMobile:x,currentPageRef:p,ref:p,store:m}):(0,R.jsx)(G,{ancestorMaxWidth:t,isMobile:x,currentPageRef:p,store:m}),(0,R.jsx)(oe,{store:m})]}):null}}}]);