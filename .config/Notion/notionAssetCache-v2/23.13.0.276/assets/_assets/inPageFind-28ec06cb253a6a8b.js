"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[9901],{248589:(e,t,n)=>{n.r(t),n.d(t,{InPageFind:()=>Y});var o=n(365820),i=n(733993),r=n(667294),a=n(174725),s=n(800480),l=n(886628),c=n(724405),d=n(966673),u=n(240745),p=n(84810),h=n(908597),g=n(213148),f=n(775e3),m=n(76233),v=n(380503),x=n(709291),C=n(653965),y=n(137810),S=n(554564),w=n(52606),k=n(81598),I=n(628020),M=n(843250),P=n(249394),R=n(268056),j=n(165598),b=n(277907),E=n(825464),L=n(521273),F=n(798180),Z=n(400807),B=n(469316),V=n(985526),A=n(623063),D=n(973420),_=n(573063),T=n(301743),K=n(374194),z=n(203386),Q=n(58261),H=n(685740),O=n(158297),U=n(526388),W=n(80444),$=n(188923),G=n(27724);const N=(0,x.defineMessages)({inputPlaceHolder:{id:"inPageFind.find.inputPlaceholder",defaultMessage:"Find, replace, ask..."},replaceInputPlaceHolder:{id:"inPageFind.replace.inputPlaceHolder",defaultMessage:"Replace with..."},close:{id:"inPageFind.close",defaultMessage:"Close"},previousMatch:{id:"inPageFind.navigation.previousMatch",defaultMessage:"Previous match"},nextMatch:{id:"inPageFind.navigation.nextMatch",defaultMessage:"Next match"},toggleReplace:{id:"inPageFind.navigation.replaceToggle",defaultMessage:"Toggle replace"},replaceAll:{id:"inPageFind.matches.replaceAll",defaultMessage:"Replace all"},replace:{id:"inPageFind.matches.individualReplace",defaultMessage:"Replace"},noMatches:{id:"inPageFind.noMatches",defaultMessage:"Not found"},askAi:{id:"inPageFind.askAi",defaultMessage:"Ask AI"},ofSpacer:{id:"inPageFind.ofSpacer",defaultMessage:"of"}});var X=n(785893);function Y(){const{activePageDetails:e,secondaryPageDetails:t}=function(){const{mainPageDetails:e,peekPageDetails:t}=(0,l.VK)((()=>{const e=W.default.state.mainEditorCurrentBlockStore,t=$.default.peekTargetStore.state;return{mainPageDetails:e?{store:e,view:"main"}:void 0,peekPageDetails:t?{store:t,view:$.default.state.mode}:void 0}}),[]),n=(0,l.VK)((()=>{var e;return Boolean(null===(e=G.default.getCurrentDefaultContainer())||void 0===e?void 0:e.isPeekRenderer())}),[]);return{activePageDetails:n?t:e,secondaryPageDetails:n?e:t}}();return e?(0,X.jsx)(q,{activePageDetails:e,secondaryPageDetails:t}):null}function q(e){const{activePageDetails:t,secondaryPageDetails:n}=e,[o,i]=(0,r.useState)(-1),[u,p]=(0,r.useState)(""),h=(0,r.useRef)(null),f=(0,s.O7)(),y=(0,x.useIntl)(),{focused:E,findQuery:D,showReplaceInput:_,open:Q,textSelection:H}=(0,l.VK)((()=>B.Z.state),[]),O=(0,d.D9)(D),U=(0,d.D9)(H),W=(0,d.D9)(o),$=D===O,G=(0,l.VK)((()=>t.store.id),[t.store.id]),Y=(0,d.D9)(G),q=(0,r.useRef)();(0,r.useEffect)((()=>{0!==D.length&&Y!==G&&w.xv({clearQuery:!0})}),[t.store.id,D.length,G,Y]),(0,a.O)({active:Q,closeHandler:()=>{w.xv({clearQuery:!1})},ref:h,ignoreKeydown:!0,excludedSelectors:[`.${M.S9A}`,`.${M.wFE}`]});const ie=(0,l.VK)((()=>{if(!Q)return!1;const e=null==H?void 0:H.multiSelection,t=!(0,R._v)(e,null==U?void 0:U.multiSelection),n=!!e&&((0,R.qS)(e)&&e.start.index!==e.end.index);return t&&n}),[Q,U,H]),re=(0,r.useCallback)((async e=>{var i;const r=null===(i=[t,n].find((t=>(null==t?void 0:t.view)===(null==e?void 0:e.view))))||void 0===i?void 0:i.store;if(!e||!r)return B.Z.update((e=>({...e,currentFocusedResult:void 0})));const a=V.m.state.pagePropertiesStore,s="comment"===q.current&&(!e||"comment"!==e.type),l=a&&a.state.forceShowProperties&&("page_property_name"===q.current||"page_property_value"===q.current)&&(!e||"page_property_name"!==e.type&&"page_property_value"!==e.type);if(s?S.LZ():l&&a.reset(),"block"===e.type)B.Z.update((t=>({...t,currentFocusedResult:{type:"block",id:e.blockStore.id,selection:e.selection}})));else if("page_property_name"===e.type){const t=e.propertyId;B.Z.update((e=>({...e,currentFocusedResult:{type:"page_property_name",propertyId:t}})))}else"page_property_value"===e.type?B.Z.update((t=>({...t,currentFocusedResult:{type:"page_property_value",id:e.blockStore.id,inlineCollectionId:e.inlineCollectionId,inlineCollectionViewId:e.inlineCollectionViewId,propertyId:e.propertyId,selection:e.selection}}))):"comment"===e.type&&B.Z.update((t=>({...t,currentFocusedResult:{type:"comment",id:e.commentId,selection:e.selection}})));q.current=e.type,$&&o===W||await w.w3({environment:f,match:e,pageStore:r,pagePropertiesStore:a})}),[t,n,o,W,$,f]),ae=(0,l.VK)((()=>{if(!Q||0===D.length)return[];const e=C.oA([t,n]).flatMap((e=>{const t=e.store,n=(0,P.jd)({find:D,pageStore:t,intl:y}),o=(0,j.MI)({blockStore:t,traverseTransclusionReferences:!0}),i=(0,P.tn)({find:D,childBlocks:o,intl:y}),r=[...(0,P.tn)({find:D,childBlocks:[t],intl:y}),...n,...i,...(0,P.En)({pageStore:t,find:D,intl:y})].map((t=>({...t,view:e.view})));return r}));if(0===e.length)return i(-1),B.Z.update((e=>({...e,currentFocusedResult:void 0}))),[];if(ie){const t=e.findIndex((e=>{const t=null==H?void 0:H.multiSelection;if("block"!==e.type||!t||e.blockStore.id!==t.start.store.id)return!1;const{startIndex:n,endIndex:o}=e.selection;return n===t.start.index&&o===t.end.index}));i(-1!==t?t:0)}else $?o>=e.length&&i(e.length-1):i(0);const r=e[o];return re(r),e}),[Q,D,t,n,ie,$,o,re,y,null==H?void 0:H.multiSelection]),{value:se}=(0,b.XJ)(k.assistantDependency),le=(0,l.VK)((()=>L.Z.isInPageFindQnaOptionEnabledForUser()),[]),ce=(0,r.useCallback)((async e=>{if(!se||!le)return;const n=await se.assistantActions.resetAndInitializeAssistantSession({environment:f,makeActiveSession:!0});if(!n)return;const o=F.default.getSessionContext(n.sessionId);o&&(o.assistantConfigurationStore.setSearchScope({pageId:t.store.id,type:"page"}),w.xv({clearQuery:!1}),se.assistantMenuStore.setState({open:!0,currentView:"chat"}),e&&e.length>0&&await se.handleSubmitNewQuestion({currentClientSkillWithSettings:void 0,newValue:(0,m.TPx)(D),environment:f,shouldForceStartNewSession:!1,source:"in_page_find",assistantSurfaceType:"corner"}))}),[se,le,f,t.store.id,D]),de=C.Ds((e=>B.Z.update((t=>({...t,findQuery:e,currentFocusedResult:void 0})))),300),ue=(0,r.useCallback)((async e=>{var r;const{location:a}=e;if(!ae||0===ae.length)return;if(1===ae.length)return void(await w.Z8(ae[0]));const s="next"===a?1:-1,l=ae[o+s],c="next"===a?0:ae.length-1;i((e=>l?e+s:c));const d=ae[o],u=null===(r=[t,n].find((e=>(null==e?void 0:e.view)===d.view)))||void 0===r?void 0:r.store,p=V.m.state.pagePropertiesStore;u&&("page_property_name"!==d.type||p)&&await w.w3({environment:f,match:d,pagePropertiesStore:p,pageStore:u})}),[ae,o,t,n,f]),pe=(0,l.VK)((()=>Q?{main:Z.Z.getMode(t.store),side_peek:n?Z.Z.getMode(n.store):void 0}:{main:void 0,side_peek:void 0}),[t,Q,n]),he=(0,l.VK)((()=>I.tu.state?0:(0,v.R6)(f.device.isElectronMac)),[f.device.isElectronMac]),ge=(0,c.yK)((e=>({findInputContainer:{display:"flex",alignItems:"center",gap:10,padding:"0px 10px"},container:{boxShadow:e.largeLightBoxShadow,position:"absolute",top:0,right:26,zIndex:999,backgroundColor:"light"===e.mode?e.accentColors.gray[0]:e.accentColors.gray[200],borderRadius:12,width:280,outline:`3px solid ${"light"===e.mode?e.accentColors.uiBlue[200]:e.accentColors.uiBlue[400]}`},inputContainer:{boxShadow:"none",border:"none",outline:"none",flexGrow:1},findInput:{paddingTop:10,paddingBottom:10},input:{fontSize:14}})),[]);return(0,X.jsx)(A.Z,{isVisible:Q,enterAnimationStyle:{opacity:0,translateY:0},animationStyle:{opacity:1,translateY:he+10},animationConfig:{durationMS:150},exitAnimationStyle:{translateY:he,opacity:0},render:()=>(0,X.jsxs)("div",{style:ge.container,ref:h,children:[(0,X.jsx)("div",{style:ge.findInputContainer,children:(0,X.jsx)(T.Z,{debugName:"FindAndReplace",capture:!0,allowSearch:!0,allowOpenLinkMenu:!0,children:(0,X.jsxs)(z.Z,{debugName:"FindAndReplace",capture:!0,onShiftEnter:()=>ue({location:"previous"}),onUp:()=>ue({location:"previous"}),onDown:()=>ue({location:"next"}),onGroup:e=>{e.preventDefault&&e.preventDefault(),ue({location:"next"})},onUngroup:e=>{e.preventDefault&&e.preventDefault(),ue({location:"previous"})},onEsc:()=>{w.xv({clearQuery:!1})},onCommandJ:()=>ce(),onCommandEnter:()=>ce(D),onToggleInPageFindReplace:()=>{0===D.length&&!_||D.length>0&&0===ae.length&&!_||w.AW()},children:[(0,X.jsx)(K.Z,{value:D,onChange:e=>{const t=e.target.value;de.cancel(),t.length>0?de(e.target.value):B.Z.update((e=>({...e,findQuery:"",currentFocusedResult:void 0})))},format:K.B.Transparent,placeholder:y.formatMessage(N.inputPlaceHolder),selectAll:!0,focus:E,onFocus:()=>w.Du(),focusInitial:!0,onBlur:()=>B.Z.update((e=>({...e,focused:!1}))),onSubmit:()=>ue({location:"next"}),inputStyle:{...ge.input,...ge.findInput},style:ge.inputContainer},"find-input-element"),0===ae.length?(0,X.jsx)(ee,{hasQuery:D.length>0,isQnaEnabled:le,onClick:()=>ce(D),isShowingReplaceInput:_}):(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(oe,{currentSelectionIndex:o,numberOfMatches:ae.length}),(0,X.jsx)(te,{jumpToBlockFn:ue,numberOfMatches:ae.length,isShowingReplaceInput:_,onReplaceIconClick:()=>w.AW(),hasFindQuery:D.length>0})]}),(0,X.jsx)(ne,{onClick:()=>w.xv({clearQuery:!1}),icon:g.U,shortcut:"esc",caption:N.close,active:!1})]})})}),(0,X.jsx)(J,{currentSelectedMatchIndex:o,findInput:D,replaceInput:u,setReplaceInput:p,highlightMatches:ae,shouldShow:_,editorViewEditorModeMap:pe})]})})}function J(e){const{findInput:t,replaceInput:n,setReplaceInput:r,highlightMatches:a,currentSelectedMatchIndex:d,shouldShow:u,editorViewEditorModeMap:p}=e,h=(0,x.useIntl)(),g=(0,s.O7)(),m=(0,l.VK)((()=>t===n),[t,n]),v=(0,l.VK)((()=>-1!==d?a[d]:void 0),[d,a]),C=(0,l.VK)((()=>{if(!v)return"default";return("side_peek"===v.view||"center_peek"===v.view?p.side_peek:"main"===v.view?p.main:"default")??"default"}),[v,p]),S=(0,l.VK)((()=>!(0===t.length||m||!v)&&(0,P.uk)(v)),[v,t.length,m]),k=(0,c.yK)((e=>({divider:{height:1,backgroundColor:e.lightDividerColor},replaceButton:{fontSize:13,display:"flex",borderRadius:8,height:void 0,paddingTop:7,paddingBottom:7,cursor:S?"pointer":"not-allowed"},replaceAll:{fontWeight:y.Z.fontWeight.regular,color:e.text.secondary},replaceInputContainer:{display:"flex",padding:10,flexDirection:"column",alignItems:"flex-end",gap:3},inputContainer:{boxShadow:"none",border:"none",outline:"none",flexGrow:1},input:{fontSize:14}})),[S]);return(0,X.jsx)(o.M,{children:u&&(0,X.jsxs)(i.E.div,{initial:{height:0},animate:{height:"auto"},exit:{height:0},style:{overflowY:"hidden"},transition:{duration:.1},children:[(0,X.jsx)("div",{style:k.divider}),(0,X.jsxs)("div",{style:k.replaceInputContainer,children:[(0,X.jsx)(K.Z,{value:n,onChange:e=>{r(e.target.value)},format:K.B.Transparent,placeholder:h.formatMessage(N.replaceInputPlaceHolder),inputStyle:k.input,style:k.inputContainer,focusInitial:!0,onSubmit:()=>{S&&v&&w.gx({match:a[d],environment:g,replace:n,editorMode:C})}},"replace-input-element"),(0,X.jsxs)(D.X2,{gap:4,children:[(0,X.jsx)(H.Z,{onClick:()=>w.ko({matches:a,environment:g,replace:n,find:t,intl:h,editorViewEditorModeMap:p}),style:{...k.replaceButton,...k.replaceAll},disabled:0===t.length||m,isLightGray:0===t.length||m,children:h.formatMessage(N.replaceAll)}),(0,X.jsx)(O.Z,{onClick:()=>{v&&w.gx({match:v,environment:g,replace:n,editorMode:C})},style:k.replaceButton,disabled:!S,children:(0,X.jsxs)(D.X2,{gap:4,alignItems:"center",children:[h.formatMessage(N.replace),(0,X.jsx)("span",{children:(0,f.U)({height:14,width:14})})]})})]})]})]})})}function ee(e){const{hasQuery:t,isQnaEnabled:n,onClick:o,isShowingReplaceInput:i}=e,r=(0,x.useIntl)(),a=(0,c.yK)((e=>({container:{fontSize:13,display:"flex",borderRadius:8,height:void 0,paddingTop:7,paddingBottom:7},icon:{width:12,height:12},notFound:{whiteSpace:"nowrap",fontSize:12,color:e.text.tertiary}})),[]);return t?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)("span",{style:a.notFound,children:r.formatMessage(N.noMatches)}),n&&!i?(0,X.jsx)(U.Z,{placement:E.u.Bottom,originGap:18,renderTooltip:()=>(0,X.jsx)(Q.Z,{name:"commandEnter"}),allowHover:!1,render:e=>(0,X.jsx)(O.Z,{style:a.container,...e,onClick:o,children:r.formatMessage(N.askAi)})}):null]}):null}function te(e){const{jumpToBlockFn:t,isShowingReplaceInput:n,onReplaceIconClick:o}=e;return(0,X.jsxs)(D.X2,{alignItems:"center",gap:2,children:[(0,X.jsx)(ne,{active:!1,caption:N.previousMatch,icon:h.Z,onClick:()=>t({location:"previous"}),shortcut:"shiftEnter"}),(0,X.jsx)(ne,{active:!1,caption:N.nextMatch,icon:u.M,onClick:()=>t({location:"next"}),shortcut:"enter"}),(0,X.jsx)(ne,{active:n,icon:p.h,onClick:o,caption:N.toggleReplace,shortcut:"toggleInPageFindReplace",overrideIconStyle:{width:14,height:14,strokeWidth:.6}})]})}function ne(e){const{onClick:t,caption:n,icon:o,active:i,shortcut:r,overrideIconStyle:a}=e,s=(0,x.useIntl)(),l=(0,c.yK)((e=>({icon:{width:12,height:12,color:e.icon.secondary,cursor:"pointer",strokeWidth:.4,stroke:"currentcolor",...a},iconWrapper:{padding:3,width:void 0,height:void 0},description:{color:e.mediumInvertedTextColor},hoveredBackground:{background:i?e.accentColors.uiBlue[100]:e.buttonHoveredBackground},active:{color:i?e.accentColors.uiBlue[600]:e.icon.secondary,cursor:"pointer"}})),[i,a]);return(0,X.jsx)(U.Z,{placement:E.u.Bottom,originGap:18,renderTooltip:e=>(0,X.jsxs)("div",{...e,children:[(0,X.jsx)("div",{children:s.formatMessage(n)}),(0,X.jsx)("div",{style:l.description,children:(0,X.jsx)(Q.Z,{name:r})})]}),allowHover:!1,render:e=>(0,X.jsx)(_.Z,{...e,icon:e=>o({...l.icon,...l.active}),ariaLabel:"Button to navigate to the previous result",hoveredStyle:l.hoveredBackground,onClick:()=>t(),style:l.iconWrapper})})}function oe(e){const{numberOfMatches:t,currentSelectionIndex:n}=e,o=(0,x.useIntl)(),i=(0,c.yK)((e=>({container:{fontSize:".8rem",color:e.text.tertiary,userSelect:"none",cursor:"default"}})),[]);return 0===t?null:(0,X.jsx)("div",{style:i.container,children:(0,X.jsxs)(D.X2,{gap:4,alignItems:"center",children:[(0,X.jsx)("span",{children:n+1}),o.formatMessage(N.ofSpacer),(0,X.jsx)("span",{children:t})]})})}},240745:(e,t,n)=>{n.d(t,{M:()=>r});n(667294);var o=n(745238),i=n(785893);const r=(0,o.IU)("arrowDown",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M8 1.57715C7.5625 1.57715 7.25488 1.88477 7.25488 2.33594V10.8262L7.30957 12.3027L5.50488 10.2861L3.95312 8.75488C3.82324 8.625 3.63184 8.53613 3.42676 8.53613C3.0166 8.53613 2.70898 8.85059 2.70898 9.26758C2.70898 9.46582 2.78418 9.64355 2.94141 9.80762L7.44629 14.3193C7.59668 14.4697 7.79492 14.5586 8 14.5586C8.20508 14.5586 8.40332 14.4697 8.55371 14.3193L13.0586 9.80762C13.2158 9.64355 13.291 9.46582 13.291 9.26758C13.291 8.85059 12.9902 8.53613 12.5801 8.53613C12.3682 8.53613 12.1836 8.625 12.0469 8.75488L10.4951 10.2861L8.69043 12.2959L8.74512 10.8262V2.33594C8.74512 1.88477 8.44434 1.57715 8 1.57715Z"})})},84810:(e,t,n)=>{n.d(t,{h:()=>r});n(667294);var o=n(745238),i=n(785893);const r=(0,o.IU)("arrowSquarePath",{viewBox:"0 0 30 22",svg:(0,i.jsx)("path",{d:"M0.773438 8.39062C0.578125 8.19531 0.484375 7.96875 0.492188 7.71094C0.5 7.45312 0.605469 7.22656 0.808594 7.03125L4.75781 3.09375C5.14062 2.71875 5.53516 2.53125 5.94141 2.53125C6.35547 2.53125 6.75391 2.71875 7.13672 3.09375L11.0859 7.03125C11.2891 7.22656 11.3906 7.45312 11.3906 7.71094C11.3984 7.96875 11.3047 8.19531 11.1094 8.39062C10.9062 8.59375 10.6797 8.69141 10.4297 8.68359C10.1797 8.66797 9.95312 8.5625 9.75 8.36719L8.625 7.25391L6.87891 5.39062V18.1172C6.87891 18.7266 7.03516 19.1875 7.34766 19.5C7.66797 19.8047 8.12109 19.957 8.70703 19.957H18.2109C18.5469 19.957 18.8047 20.0391 18.9844 20.2031C19.1641 20.3672 19.2539 20.6016 19.2539 20.9062C19.2617 21.2031 19.1719 21.4336 18.9844 21.5977C18.8047 21.7617 18.5469 21.8438 18.2109 21.8438H8.67188C7.45312 21.8438 6.53516 21.5391 5.91797 20.9297C5.30078 20.3281 4.99219 19.4219 4.99219 18.2109V5.41406L3.25781 7.25391L2.13281 8.36719C1.9375 8.5625 1.71094 8.66797 1.45312 8.68359C1.20312 8.69141 0.976562 8.59375 0.773438 8.39062ZM10.7461 1.20703C10.7383 0.910156 10.8281 0.679688 11.0156 0.515625C11.2031 0.351562 11.4609 0.269531 11.7891 0.269531H21.3281C22.5547 0.269531 23.4727 0.574219 24.082 1.18359C24.6992 1.78516 25.0078 2.69141 25.0078 3.90234V16.6992L26.7422 14.8477L27.8672 13.7461C28.0703 13.5508 28.2969 13.4492 28.5469 13.4414C28.7969 13.4258 29.0234 13.5156 29.2266 13.7109C29.4219 13.9141 29.5156 14.1445 29.5078 14.4023C29.5 14.6523 29.3945 14.8789 29.1914 15.082L25.2539 19.0078C24.8711 19.3906 24.4727 19.582 24.0586 19.582C23.6445 19.582 23.2461 19.3906 22.8633 19.0078L18.9141 15.082C18.7109 14.8789 18.6055 14.6523 18.5977 14.4023C18.5977 14.1445 18.6953 13.9141 18.8906 13.7109C19.0938 13.5156 19.3203 13.4258 19.5703 13.4414C19.8203 13.4492 20.0469 13.5508 20.25 13.7461L21.375 14.8477L23.1211 16.7227V3.99609C23.1211 3.38672 22.9648 2.92969 22.6523 2.625C22.3398 2.3125 21.8906 2.15625 21.3047 2.15625H11.7891C11.4609 2.15625 11.207 2.07422 11.0273 1.91016C10.8477 1.74609 10.7539 1.51172 10.7461 1.20703Z"})})},908597:(e,t,n)=>{n.d(t,{Z:()=>r});n(667294);var o=n(745238),i=n(785893);const r=(0,o.IU)("arrowUp",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M8 14.5586C8.44434 14.5586 8.74512 14.251 8.74512 13.7998V5.30957L8.69043 3.83984L10.4951 5.84961L12.0469 7.38086C12.1836 7.51074 12.3682 7.59961 12.5801 7.59961C12.9902 7.59961 13.291 7.28516 13.291 6.86816C13.291 6.66992 13.2158 6.49219 13.0586 6.32812L8.55371 1.81641C8.40332 1.66602 8.20508 1.57715 8 1.57715C7.79492 1.57715 7.59668 1.66602 7.44629 1.81641L2.94141 6.32812C2.78418 6.49219 2.70898 6.66992 2.70898 6.86816C2.70898 7.28516 3.0166 7.59961 3.42676 7.59961C3.63184 7.59961 3.82324 7.51074 3.95312 7.38086L5.50488 5.84961L7.30957 3.83301L7.25488 5.30957V13.7998C7.25488 14.251 7.5625 14.5586 8 14.5586Z"})})},365820:(e,t,n)=>{n.d(t,{M:()=>v});var o=n(667294),i=n(158868);function r(){const e=(0,o.useRef)(!1);return(0,i.L)((()=>(e.current=!0,()=>{e.current=!1})),[]),e}var a=n(902074);var s=n(400240),l=n(996681);class c extends o.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function d({children:e,isPresent:t}){const n=(0,o.useId)(),i=(0,o.useRef)(null),r=(0,o.useRef)({width:0,height:0,top:0,left:0});return(0,o.useInsertionEffect)((()=>{const{width:e,height:o,top:a,left:s}=r.current;if(t||!i.current||!e||!o)return;i.current.dataset.motionPopId=n;const l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`\n          [data-motion-pop-id="${n}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${o}px !important;\n            top: ${a}px !important;\n            left: ${s}px !important;\n          }\n        `),()=>{document.head.removeChild(l)}}),[t]),o.createElement(c,{isPresent:t,childRef:i,sizeRef:r},o.cloneElement(e,{ref:i}))}const u=({children:e,initial:t,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:a,mode:c})=>{const u=(0,l.h)(p),h=(0,o.useId)(),g=(0,o.useMemo)((()=>({id:h,initial:t,isPresent:n,custom:r,onExitComplete:e=>{u.set(e,!0);for(const t of u.values())if(!t)return;i&&i()},register:e=>(u.set(e,!1),()=>u.delete(e))})),a?void 0:[n]);return(0,o.useMemo)((()=>{u.forEach(((e,t)=>u.set(t,!1)))}),[n]),o.useEffect((()=>{!n&&!u.size&&i&&i()}),[n]),"popLayout"===c&&(e=o.createElement(d,{isPresent:n},e)),o.createElement(s.O.Provider,{value:g},e)};function p(){return new Map}var h=n(325364),g=n(865411),f=n(45487);const m=e=>e.key||"";const v=({children:e,custom:t,initial:n=!0,onExitComplete:s,exitBeforeEnter:l,presenceAffectsLayout:c=!0,mode:d="sync"})=>{(0,f.k)(!l,"Replace exitBeforeEnter with mode='wait'");const p=(0,o.useContext)(h.p).forceRender||function(){const e=r(),[t,n]=(0,o.useState)(0),i=(0,o.useCallback)((()=>{e.current&&n(t+1)}),[t]);return[(0,o.useCallback)((()=>a.Wi.postRender(i)),[i]),t]}()[0],v=r(),x=function(e){const t=[];return o.Children.forEach(e,(e=>{(0,o.isValidElement)(e)&&t.push(e)})),t}(e);let C=x;const y=(0,o.useRef)(new Map).current,S=(0,o.useRef)(C),w=(0,o.useRef)(new Map).current,k=(0,o.useRef)(!0);if((0,i.L)((()=>{k.current=!1,function(e,t){e.forEach((e=>{const n=m(e);t.set(n,e)}))}(x,w),S.current=C})),(0,g.z)((()=>{k.current=!0,w.clear(),y.clear()})),k.current)return o.createElement(o.Fragment,null,C.map((e=>o.createElement(u,{key:m(e),isPresent:!0,initial:!!n&&void 0,presenceAffectsLayout:c,mode:d},e))));C=[...C];const I=S.current.map(m),M=x.map(m),P=I.length;for(let o=0;o<P;o++){const e=I[o];-1!==M.indexOf(e)||y.has(e)||y.set(e,void 0)}return"wait"===d&&y.size&&(C=[]),y.forEach(((e,n)=>{if(-1!==M.indexOf(n))return;const i=w.get(n);if(!i)return;const r=I.indexOf(n);let a=e;if(!a){const e=()=>{y.delete(n);const e=Array.from(w.keys()).filter((e=>!M.includes(e)));if(e.forEach((e=>w.delete(e))),S.current=x.filter((t=>{const o=m(t);return o===n||e.includes(o)})),!y.size){if(!1===v.current)return;p(),s&&s()}};a=o.createElement(u,{key:m(i),isPresent:!1,onExitComplete:e,custom:t,presenceAffectsLayout:c,mode:d},i),y.set(n,a)}C.splice(r,0,a)})),C=C.map((e=>{const t=e.key;return y.has(t)?e:o.createElement(u,{key:m(e),isPresent:!0,presenceAffectsLayout:c,mode:d},e)})),o.createElement(o.Fragment,null,y.size?C:C.map((e=>(0,o.cloneElement)(e))))}},865411:(e,t,n)=>{n.d(t,{z:()=>i});var o=n(667294);function i(e){return(0,o.useEffect)((()=>()=>e()),[])}}}]);