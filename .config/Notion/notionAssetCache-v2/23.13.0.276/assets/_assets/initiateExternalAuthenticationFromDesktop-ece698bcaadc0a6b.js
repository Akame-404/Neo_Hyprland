"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[73871],{894810:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var i=n(667294),o=n(800480),s=n(886628),r=n(519889),a=n(598275),l=n(401898),d=n(218265),u=n(95477),c=n(296994),h=n(80444),p=n(568785),f=n(785893);function g(e){const{redirectUri:t}=e,[n,g]=(0,i.useState)(!0),[v,x]=(0,i.useState)(!1),m=(0,o.O7)(),y=(0,s.VK)((()=>m.currentUser.loggedInUserIds),[m]),b=(0,s.VK)((()=>h.default.state.currentUserStore),[]),I=(0,s.VK)((()=>b?y.map((e=>b.getRecordModel({table:r.KJ,id:e}))).filter(l.$K):[]),[b,y]),U=(0,i.useCallback)((()=>{y.length!==I.length||v||g(!1)}),[y,I,v]);return(0,i.useEffect)((()=>{var e;if(!t)return void g(!1);const n=decodeURIComponent(t),i=d.gy(n)&&d.Qc(n);if(!i||(o=i,s=u.default,!o.host||"local"!==s.env&&!s.domainBaseUrl.includes(o.host)&&!a.S3[s.env].includes(o.host)))return void g(!1);var o,s;let r;if(null!==(e=i.path)&&void 0!==e&&e.includes("/eap/app")){const e=decodeURIComponent(n),t=d.Qc(e).query.notion_state,i=t&&JSON.parse(t);r=i?i.userId:void 0}else r=i.query.notion_user_id;I.some((e=>e.id===r))?(x(!0),window.location.href=n):U()}),[t,I,U]),(0,f.jsx)("div",{style:{height:"100%"},children:n?(0,f.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexWrap:"wrap",height:"100%"},children:(0,f.jsx)(p.Z,{style:{height:20,width:20}})}):(0,f.jsx)(c.Ie,{route:{name:"initiateExternalAuthenticationFromDesktop"},publicPageData:void 0})})}}}]);