(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[85906],{115944:(e,t,n)=>{"use strict";n.d(t,{o:()=>p,q:()=>m});var i=n(886628),o=n(268056),r=n(489086),s=n(828685),a=n(80444),l=n(924666),c=n(210228),d=n(237181);function u(){const e=l.default.state;if("editing"===e.mode){const t=(0,o.QY)(e.multiSelection);if(t&&(0,r.wd)(t.selection)){const e=t.store,n=s.E.findEditableWithStore(e);if(n){return e.getValue()?void 0:n}}}}function p(){return(0,i.VK)(u,[])}function m(e){const{currentUserSettingsStore:t}=a.default.state;t&&c.createAndCommit({userAction:"educationTooltipsActions.completePressSlashTooltip",environment:e,perform:e=>{d.d2({userSettingsStore:t,transaction:e,data:{pressed_slash_tooltip:!0}})},userId:t.id})}},718250:(e,t,n)=>{"use strict";n.d(t,{K:()=>r,O:()=>o});var i=n(745483);function o(e){i.Z.state.openModals.has(e)||(i.Z.state.openModals.add(e),i.Z.emit())}function r(e){i.Z.state.openModals.has(e)&&(i.Z.state.openModals.delete(e),i.Z.emit())}},73966:(e,t,n)=>{"use strict";n.d(t,{k2:()=>l,l6:()=>a,wk:()=>s});var i=n(842875),o=n(210228),r=n(237181);function s(e){const{environment:t,userSettingsStore:n}=e,o=n.getSettings(),r=null==o?void 0:o.time_zone,s=(0,i.r)();r!==s&&a({environment:t,userSettingsStore:n,timeZone:s})}function a(e){const{environment:t,userSettingsStore:n,timeZone:i}=e;o.createAndCommit({userAction:"checkUserTimeZoneAction.updateTimeZone",environment:t,perform:e=>{r.d2({userSettingsStore:n,transaction:e,data:{time_zone:i}})},userId:n.id})}function l(e){const{environment:t,userSettingsStore:n,disableAutoSetTimezone:i}=e;o.createAndCommit({userAction:"checkUserTimeZoneAction.updateDisableAutoSetTimezone",environment:t,perform:e=>{r.d2({userSettingsStore:n,transaction:e,data:{disable_auto_set_timezone:i}})},userId:n.id})}},841464:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var i=n(667294),o=n(800480),r=n(336154),s=n(436610),a=n(296994),l=n(68204),c=n(635328),d=n(277907),u=n(95802),p=n(708949),m=n(319385),h=n(222294),g=n(186486),v=n(27724),f=n(138870),S=n(785893);function b(e){const t=(0,o.O7)(),{value:n}=(0,d.XJ)(a.FF.markdownLinkifyIt),{value:s}=(0,d.XJ)(a.FF.tinyMceMicrosoftWordPasteFilter),l=(0,i.useRef)(),c=(0,i.useRef)();(0,i.useEffect)((()=>{function e(e){e.clientX===l.current&&e.clientY===c.current||(l.current=e.clientX,c.current=e.clientY,h.Z.setKeyboardMode(!1))}return window.addEventListener("mousemove",e),()=>{window.removeEventListener("mousemove",e)}}),[]);const u=(0,i.useMemo)((()=>function(e,t,n){const i={};for(const o of r.L6)for(const r of o.shortcuts)i[r]=i=>y(r,i,e,t,n);return i}(n,s,t)),[t,n,s]);return(0,S.jsx)(f.Z,{debugName:e.debugName,priority:e.priority,enable:e.capture,shortcuts:u})}function x(){return!function(){const e=document.querySelector("#intercom-container");return!(!e||!e.contains(document.activeElement))}()&&!(p.Z.state.isActive&&!m.default.checkGate({gateName:"block_menu_shortcut_fix"}))}function y(e,t,n,i,o){if(!x())return;const a=v.default.state.stores,d=v.default.state.pivot||a[0],f=d&&u.C.getRectFromStore(d),S=r.L6.find((t=>!!t.shortcuts.some((t=>t===e))&&l.vG(t,{environment:o,blocks:a,originRect:f,publicEditMode:void 0})));if(S){"keydown"===t.type&&t.preventDefault&&t.preventDefault();const e=p.Z.state.isActive;S.action({environment:o,blocks:a,originRect:f,publicEditMode:void 0,lazyDependencies:{markdownLinkifyIt:n,tinyMceMicrosoftWordPasteFilter:i}},t);const r=a[0];let l,d,u,v;var b;if(r)l=r.getType(),d=l?(0,c._A)(l,r.getFormat()):void 0,u=null===(b=r.getCollectionViewCollectionStore())||void 0===b?void 0:b.id,v=r.getParentCollectionIdUpToTwoLevels();s.dh(o,{analyticsName:S.analyticsName,action_type:S.analyticsActionType,from:"keyboard_shortcut",block_id:null==r?void 0:r.id,block_type:l,is_toggleable:d,collection_id:u,parent_collection_id:v}),y={resetBlockMenuStore:e},h.Z.setKeyboardMode(!0),g.default.reset(),m.default.checkGate({gateName:"block_menu_shortcut_fix"})&&y.resetBlockMenuStore&&p.Z.reset()}var y}},3403:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(667294),o=n(724405),r=n(134232),s=n(568785),a=n(785893);function l(e){let{loadingMessage:t}=e;const n=(0,o.Fg)(),l=(0,r.Z)(!0,400);return(0,a.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:l&&(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)(s.Z,{}),t&&(0,a.jsx)("div",{style:{marginLeft:8,color:n.text.secondary},children:t})]})})}},977207:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});n(667294);var i=n(800480),o=n(886628),r=n(155367),s=n(480796),a=n(569784),l=n(785893);const c=function(e){const t=(0,i.Fy)(),n=(0,o.VK)((()=>({initiator:s.Z.state.initiator,isDragging:r.ZP.state.isDragging})),[]),c=(0,o.VK)((()=>({active:a.default.state.isActive,moved:!!a.default.state.isActive&&a.default.state.moved})),[]),d=c.moved?"default":n.isDragging?"-webkit-grabbing":"text";let u="notion-cursor-listener";return"-webkit-grabbing"===d&&(u+=" notion-disable-local-cursor"),t.isIOS&&("touch"===n.initiator||n.isDragging||c.active?document.body.classList.add("notion-disable-webkit-user-select"):document.body.classList.remove("notion-disable-webkit-user-select")),(0,l.jsx)("div",{style:{...e.style,cursor:d},className:u,children:e.children})}},802159:(e,t,n)=>{"use strict";n.d(t,{m:()=>d});n(667294);var i=n(460651),o=n(709291),r=n(247839),s=n(573063),a=n(934700),l=n(785893);const c=(0,o.defineMessages)({menu:{defaultMessage:"Menu",id:"topbar.appMenuButton.title"}});function d(){const e=(0,o.useIntl)();return(0,l.jsx)(s.Z,{style:{position:"absolute",top:"10px",left:"14px",width:24,height:24,zIndex:1e5,...(0,a.X)({noDrag:!0})},iconStyle:{width:16,height:16},isDarkIconColor:!0,onClick:()=>{r.openAppMenu()},icon:i.h,ariaLabel:e.formatMessage(c.menu)})}},925629:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ms});var i=n(667294),o=n(734958),r=n(113351),s=n(522974),a=n(277907);const l={DebuggingToolbar:new a.Ss("DebuggingToolbar",(()=>n.e(30528).then(n.bind(n,114256))))},c=(0,a.kF)(l.DebuggingToolbar,(e=>e.DebuggingToolbar));var d=n(886628),u=n(95477),p=(n(259139),n(319385));function m(e){return(0,d.VK)((()=>!1),[e])}var h=n(883355),g=n(313991),v=n(779946),f=n(949271),S=n(825278),b=n(599405),x=n(89101),y=n(429369),k=n(109852),w=n(712139),j=n(709291),I=n(531701),C=n(215828),M=n(203303),T=n(218265),P=n(117224),L=n(247839),_=n(532603),Z=n(91376),E=n(132953),A=n(608055),R=n(652461),B=n(73966),V=n(970782),F=n(139634),U=n(237181),D=n(296994);const O=(0,a.kF)(D.FF.CreatorProfile,(e=>e.CreatorProfile)),N=(0,a.kF)(D.FF.LocalizedTemplates,(e=>e.LocalizedTemplates)),z=(0,a.kF)(D.FF.StartupsApplication,(e=>e.default));var q=n(80444),W=n(661802),K=n(206258);const $=(0,a.kF)(D.FF.StudentGroupSignup,(e=>e.default));var H=n(800480),G=n(724405),Y=n(559054),Q=n(949204),X=n(137810),J=n(661519),ee=n(863296),te=n(158297),ne=n(164369),ie=n(274016),oe=n(785893);const re=function(e){const{teamStore:t}=e,n=(0,H.O7)(),{teamName:i}=(0,d.VK)((()=>({teamName:t.getName()})),[t]),o=(0,G.yK)((e=>({buttonContainer:{marginTop:15,display:"flex",justifyContent:"space-between"},container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"},title:{fontWeight:X.Z.fontWeight.semibold,fontSize:20,margin:10},subtitle:{color:e.mediumTextColor,fontSize:18},divider:{maxWidth:280},rightButton:{fontWeight:X.Z.fontWeight.semibold,marginLeft:10}})),[]);return(0,oe.jsxs)("div",{style:o.container,children:[(0,oe.jsx)(ie.p,{store:t,disabled:!0,size:55}),(0,oe.jsx)("div",{style:o.title,children:(0,oe.jsx)(j.FormattedMessage,{id:"teamInviteLinkJoinPage.page.title",defaultMessage:"You've been invited to join {teamName}",values:{teamName:i}})}),(0,oe.jsx)("div",{style:o.subtitle,children:(0,oe.jsx)(j.FormattedMessage,{id:"teamInviteLinkJoinPage.page.subtitle",defaultMessage:"You can access the content in the teamspace if you join the teamspace."})}),(0,oe.jsxs)("div",{style:o.buttonContainer,children:[(0,oe.jsx)(te.Z,{isLarge:!0,onClick:async()=>{const e=n.currentUser.id;if(!e)return;const i=[{type:"member",entity_type:"user",user_id:e}];await Q.um({environment:n,userId:e,teamStore:t,user:i}),P.Ph(n,{store:t,selection:"yes"})},children:(0,oe.jsx)(j.FormattedMessage,{id:"teamInviteLinkJoinPage.joinTeam.label",defaultMessage:"Join teamspace"})}),(0,oe.jsx)(ee.Z,{isLarge:!0,style:o.rightButton,onClick:async()=>{P.Ph(n,{store:t,selection:"no"}),await Q.Id({environment:n})},children:(0,oe.jsx)(j.FormattedMessage,{id:"teamInviteLinkJoinPage.backToMyContentButton.label",defaultMessage:"Back to my content"})})]}),(0,oe.jsx)(J.Z,{size:48,innerStyle:o.divider}),(0,oe.jsx)(ne.Z,{isSmall:!0,children:(0,oe.jsx)(j.FormattedMessage,{id:"teamInviteLinkJoinPage.contact.message",defaultMessage:"Please contact your workspace owner for any questions."})})]})};var se=n(314889);function ae(e){const{teamStore:t,teamName:n,onRequestClick:i}=e,o=(0,H.O7)(),r=(0,G.yK)((e=>({buttonContainer:{marginTop:15,display:"flex",justifyContent:"space-between"},container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"},title:{fontWeight:X.Z.fontWeight.semibold,fontSize:20,margin:10},subtitle:{color:e.mediumTextColor,fontSize:18},divider:{maxWidth:280},rightButton:{fontWeight:X.Z.fontWeight.semibold,marginLeft:10}})),[]);return(0,oe.jsxs)("div",{style:r.container,children:[(0,oe.jsx)(ie.p,{store:t,disabled:!0,size:55}),(0,oe.jsx)("div",{style:r.title,children:(0,oe.jsx)(j.FormattedMessage,{id:"teamInviteLinkRequestPage.requestAccess.title",defaultMessage:"Request access to {teamName}",values:{teamName:n??le()}})}),(0,oe.jsx)("div",{style:r.subtitle,children:(0,oe.jsx)(j.FormattedMessage,{id:"teamInviteLinkRequestPage.requestAccess.subtitle",defaultMessage:"You can access this teamspace if a teamspace owner approves your request."})}),(0,oe.jsxs)("div",{style:r.buttonContainer,children:[(0,oe.jsx)(te.Z,{isLarge:!0,onClick:i,children:(0,oe.jsx)(j.FormattedMessage,{id:"teamInviteLinkRequestPage.requestAccess.label",defaultMessage:"Request access"})}),(0,oe.jsx)(ee.Z,{isLarge:!0,style:r.rightButton,onClick:async()=>{await Q.Id({environment:o})},children:(0,oe.jsx)(j.FormattedMessage,{id:"teamInviteLinkRequestPage.backToMyContentButton.label",defaultMessage:"Back to my content"})})]}),(0,oe.jsx)(J.Z,{size:48,innerStyle:r.divider}),(0,oe.jsx)(ne.Z,{isSmall:!0,children:(0,oe.jsx)(j.FormattedMessage,{id:"teamInviteLinkRequestPage.contact.message",defaultMessage:"Please contact your workspace owner for any questions."})})]})}function le(){return(0,oe.jsx)(j.FormattedMessage,{id:"teamInviteLinkRequestPage.privateTeamspace.label",defaultMessage:"Private Teamspace"})}const ce=function(e){const{teamStore:t}=e,[n,o]=(0,i.useState)(!1),{teamName:r}=(0,d.VK)((()=>({teamName:t.getName()})),[t]);return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(ae,{teamStore:t,teamName:r,onRequestClick:()=>o(!0)}),(0,oe.jsx)(se.Z,{teamStore:t,teamName:r??le(),teamId:t.id,isModalOpen:n,onDismiss:()=>o(!1)})]})};function de(e){const{teamAccessLevel:t,teamStore:n}=e;switch(t){case"open":return(0,oe.jsx)(re,{teamStore:n});case"closed":case"private":return(0,oe.jsx)(ce,{teamStore:n})}}const ue=function(e){const{teamId:t}=e,n=(0,H.O7)(),{teamAccessLevel:o,teamStore:r}=(0,d.VK)((()=>{const e=new K.zX(n,{table:y.e0,id:t});return{teamAccessLevel:e.getTeamAccessLevel(),teamStore:e}}),[n,t]),[{value:s}]=(0,Y.r5)((async()=>await Q.Ng({environment:n,teamId:t})),[n,t]);(0,i.useEffect)((()=>{!0===(null==s?void 0:s.isValidTeamRequest)&&null!=s&&s.isTeamMember&&(async()=>{var e;const t=null===(e=n.currentUser)||void 0===e?void 0:e.id;t&&r&&await Q.t_({environment:n,userId:t,teamStore:r})})()}),[n,r,s]);const a=(0,G.yK)((()=>({container:{display:"flex",justifyContent:"center",height:"100%"}})),[]);return s?(0,oe.jsx)("div",{style:a.container,children:s.isValidTeamRequest?(0,oe.jsx)(de,{teamStore:r,teamAccessLevel:o}):"nonSpaceMember"===s.invalidRequestReason?(0,oe.jsx)(D.Ie,{route:{name:"teamsInvite",teamId:t},publicPageData:void 0}):(0,oe.jsx)(D.Ie,{route:{name:"notFound"},publicPageData:void 0})}):null};var pe=n(384549),me=n(837167);var he=n(535061),ge=n(211342);function ve(e,t){const n=t.deviceType,i=t.mobileAppVersion;if(!(0,he.wv)(e)||"local"===e||!t.isMobileNative||!i)return!1;const o=function(e){const{environmentName:t,deviceType:n,mobileAppVersion:i,androidVersions:o,iosVersions:r}=e,s=(0,ge.parseMobileAppVersion)(i,"android"===n);if(!s)return!1;if("android"===n&&!o||"ios"===n&&!r)return!1;let a;if("android"===n){if(!o)return!1;a=(0,ge.parseMobileAppVersion)(o[t],!0)}else{if(!r)return!1;a=(0,ge.parseMobileAppVersion)(r[t],!1)}return!!a&&(0,ge.isLessThanVersion)(s,a)}({environmentName:e,deviceType:n,mobileAppVersion:i,iosVersions:{staging:"0.1.1022",development:"0.5.1168",production:"0.4.1021"}});return o}var fe=n(151454),Se=n(950950),be=n(365729),xe=n(772899),ye=n(416091),ke=n(81598);const we=(0,a.kF)(new a.Ss("UniversalQnaModals",(async()=>await Promise.all([n.e(62743),n.e(58183)]).then(n.bind(n,868411)))),(e=>e.UniversalQnaModals));var je=n(969098),Ie=n(107401),Ce=n(930106),Me=n(628020),Te=n(319124),Pe=n(764286),Le=n(367669),_e=n(918514);const Ze=D.FF.imageEdit,Ee=(0,a.kF)(Ze,(e=>e.ImageEditModal)),Ae=(0,a.kF)(D.FF.Marketplace,(e=>e.Marketplace));var Re=n(797448);const Be=(0,a.kF)(D.FF.moveTo,(e=>e.MoveToMenuRenderer));var Ve=n(448451),Fe=n(334017),Ue=n(534987),De=n(394841),Oe=n(861931),Ne=n(552389);const ze={LockInModal:new a.Ss("PriceChangeLockInModal",(async()=>await Promise.all([n.e(62743),n.e(33993),n.e(79249),n.e(16732),n.e(11002),n.e(16536),n.e(4617),n.e(88833),n.e(46470),n.e(4973),n.e(66550),n.e(62483),n.e(5289)]).then(n.bind(n,339946))))},qe=(0,a.kF)(ze.LockInModal,(e=>e.default));var We=n(776687),Ke=n(614720),$e=n(966324);const He=[[2,1,3,1],[1,0,2,0],[0,2,0,3],[3,3,0,2],[1,1,2,2]];var Ge=n(636596),Ye=n(938676);function Qe(e){let{skipFadeinDelay:t}=e;const n=(0,d.VK)((()=>Ye.sidebarExpandedStore.state),[]),i=(0,d.VK)((()=>n?Ye.sidebarWidthStore.state:0),[n]),o=(0,G.yK)((e=>{const t={width:20,height:20,borderRadius:4},o={height:10,minHeight:10,borderRadius:10};return{sidebar:{backgroundColor:e.sidebarBackground,boxShadow:e.sidebarBoxShadow,display:n?"flex":"none",minWidth:i,flexDirection:"column",padding:"12px 14px",overflow:"hidden"},heroSection:{marginBottom:22,display:"flex",alignItems:"center"},heroSectionIcon:{padding:"1px",...t,width:22,height:22},heroSectionTitle:{width:177,marginLeft:8,...o},toplevelMenu:{marginBottom:20,width:78,...o},toplevelMenuLast:{marginBottom:36,width:135,...o},sectionHeader:{marginBottom:14,width:56,...o},pageRow:{display:"flex",alignItems:"center",marginBottom:11},pageIcon:{...t},pageTitle:{marginLeft:8,...o}}}),[n,i]),r=(0,oe.jsxs)("div",{style:o.heroSection,children:[(0,oe.jsx)(Ge.Z,{style:o.heroSectionIcon,emphasized:!0}),(0,oe.jsx)(Ge.Z,{style:o.heroSectionTitle,emphasized:!0})]}),s=(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(Ge.Z,{style:o.toplevelMenu,emphasized:!0}),(0,oe.jsx)(Ge.Z,{style:o.toplevelMenu,emphasized:!0}),(0,oe.jsx)(Ge.Z,{style:o.toplevelMenu,emphasized:!0}),(0,oe.jsx)(Ge.Z,{style:o.toplevelMenuLast,emphasized:!0})]}),a=(0,oe.jsx)(Ge.Z,{style:o.sectionHeader,emphasized:!0}),l=He.map(((e,n)=>e.map(((e,i)=>(0,oe.jsxs)("div",{style:{...!t&&Xe(n),...o.pageRow},children:[(0,oe.jsx)(Ge.Z,{style:o.pageIcon,emphasized:!0}),(0,oe.jsx)(Ge.Z,{style:{...o.pageTitle,width:80+20*e},emphasized:!0})]},`${n}-${i}`)))));return(0,oe.jsxs)("div",{style:o.sidebar,children:[r,s,a,l]})}function Xe(e){return 0===e?{}:{animation:`1s ease-in ${e}s 1 normal both running fadein`}}var Je=n(224646);const et={SitesLaunchModal:new a.Ss("SitesLaunchModal",(()=>Promise.all([n.e(62743),n.e(25713)]).then(n.bind(n,671316))))},tt=(0,a.kF)(et.SitesLaunchModal,(e=>e.SitesLaunchModal));var nt=n(905162),it=n(600051),ot=n(521273),rt=n(943604),st=n(424042),at=n(997156),lt=n(327242),ct=n(712309),dt=n(964275),ut=n(401898),pt=n(164921),mt=n(550506),ht=n(433929),gt=n(361254);function vt(e){const{isOpen:t,children:n,onDismiss:o,onClosed:r,style:s,dismissUsing:a}=e,l=function(e){switch(e){case"onlyCloseButton":case"closeButtonOrEscape":return!0;case"onlyEscape":case"none":return!1;default:(0,ut.t1)(e)}}(a),[c,u]=function(e,t,n){const o=(0,i.useMemo)((()=>new gt.Z),[]),[r,s]=(0,i.useState)(t),a=(0,d.VK)((()=>o.state.open),[o]);return(0,i.useEffect)((()=>{e?s(t):a||(s(void 0),n&&n())}),[e,a,t,n]),[o,r]}(t,n,r),p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,G.yK)((t=>({cancelButton:{alignItems:"center",background:t.buttonHoveredBackground,borderRadius:"100%",display:"flex",height:20,justifyContent:"center",position:"absolute",right:12,top:12,width:20,zIndex:10},cancelButtonHovered:{background:t.buttonPressedBackground},cancelIcon:{fill:t.mediumTextColor,width:14},innerModal:{borderRadius:10,height:"auto",overflow:"auto",width:300,minHeight:40,padding:"12px 16px",position:"relative",...e}})),[e])}(s),m=(0,i.useCallback)((()=>(0,oe.jsxs)(oe.Fragment,{children:[l?(0,oe.jsx)(pt.Z,{hoveredStyle:p.cancelButtonHovered,onClick:()=>o(),style:p.cancelButton,ariaLabel:ht.default.formatMessage(ft.closeModalAriaLabel),children:(0,dt.D)(p.cancelIcon)}):null,u]})),[u,o,l,p.cancelButton,p.cancelButtonHovered,p.cancelIcon]),h=(0,i.useCallback)((()=>{(function(e){switch(e){case"closeButtonOrEscape":case"onlyEscape":return!0;case"onlyCloseButton":case"none":return!1;default:(0,ut.t1)(e)}})(a)&&o()}),[a,o]);return(0,oe.jsx)(mt.Z,{innerStyle:p.innerModal,onDismiss:h,open:t,preventHideChildrenWhileOpening:!0,render:m,store:c,trapFocus:!0})}const ft=(0,j.defineMessages)({closeModalAriaLabel:{id:"subscriptions.BillingModal.closeButtonLabel",defaultMessage:"Close modal"}});function St(){const e=(0,d.VK)((()=>ct.Z.state.modalInfoById),[]);return(0,oe.jsx)(oe.Fragment,{children:Object.entries(e).map((e=>{let[t,n]=e;const{content:i,dismissUsing:o,isOpen:r,modalStyle:s,onClosed:a,onDismiss:l}=n;return(0,oe.jsx)(vt,{dismissUsing:o,isOpen:r,onClosed:a,onDismiss:l,style:s,children:i},t)}))})}var bt=n(915328),xt=(n(21703),n(730120)),yt=n(292595),kt=n(454642);async function wt(e,t){const n=await kt.stripeGetTestClock(t,{spaceId:e});if("success"===n.type){if("advancing"===n.data.status)throw new Error("Test clock is advancing. Please try again in a few seconds.");return n.data.epochSeconds}}async function jt(e){const{environment:t,spaceId:n,advanceTestClockArgument:i}=e;if(i)return"number"==typeof i?i:"function"==typeof i?await async function(e){const{environment:t,spaceId:n,callback:i}=e,o=await wt(n,t);if(o)return i(o)}({environment:t,spaceId:n,callback:i}):"object"==typeof i?await async function(e){const{environment:t,spaceId:n,durationLike:i}=e,o=await wt(n,t);if(!o)return;const r=xt.ou.fromSeconds(o),s=xt.nL.fromDurationLike(i);return r.plus(s).toSeconds()}({environment:t,spaceId:n,durationLike:i}):void 0}const It=function(){const e=["local","staging","development"].includes("production"),t=(0,H.O7)();return(0,i.useEffect)((()=>{e&&((0,yt.exposeDebugValue)("refreshTestClock",(async()=>{var e;const n=null===(e=q.default.state.currentSpaceStore)||void 0===e?void 0:e.id;if(n){const e=await wt(n,t);if(e){const t=xt.ou.fromSeconds(e);console.log(`Test clock time is ${t.toString()} (${e} seconds)`)}}})),(0,yt.exposeDebugValue)("advanceTestClock",(async e=>{var n;if(!e)throw new Error("advanceTestClock requires an argument. You can pass an epoch timestamp in seconds, a relative DurationLike object like { months: 2 }, or a function that takes the current epoch seconds and returns the new epoch seconds.");const i=null===(n=q.default.state.currentSpaceStore)||void 0===n?void 0:n.id;if(!i)return;const o=await jt({environment:t,spaceId:i,advanceTestClockArgument:e});o&&await kt.stripeAdvanceTestClock(t,{spaceId:i,epochSeconds:o})})))}),[e,t]),null};var Ct=n(367181),Mt=n(159260),Tt=n(962142),Pt=n(530221),Lt=n(288280),_t=(n(757658),n(619584)),Zt=n(299334);const Et=!1,At=(Et?1:10)*_t.C0,Rt=5*At;function Bt(){Et&&console.log(...arguments)}function Vt(){return(0,i.useEffect)((()=>{if(!window.BroadcastChannel)return;const e=(0,k.c$)(),t=new Map,n=new BroadcastChannel("notion_tab_tracker");n.onmessage=e=>{const n=e.data;"string"==typeof n&&t.set(n,Date.now())};const i=window.setInterval((()=>{(()=>{const e=[],n=Date.now();for(const[i,o]of t.entries())n-o>Rt&&e.push(i);e.length&&Bt("Removing tab ids:",e);for(const i of e)t.delete(i)})(),n.postMessage(e);const i=t.size+1;Bt("Tab count is",i),(0,Zt.$)(i)}),At);return()=>{n.close(),window.clearInterval(i)}}),[]),null}const Ft=(0,a.kF)(new a.Ss("AutomationModal",(()=>n.e(65645).then(n.bind(n,63736)))),(e=>e.AutomationModal));var Ut=n(222491),Dt=n(76233),Ot=n(744805),Nt=n(653965),zt=n(992120),qt=n(843250),Wt=n(62740),Kt=n(524229),$t=n(148588);function Ht(e){const{discussionId:t,level:n}=e;return`\n\t\t.${(0,Ut.vE)({level:n})}.${(0,Ut.dk)({discussionId:t})}.${Ot.kB} {\n\t\t\tbackground: ${(0,I.Hu)(e)} !important;\n\t\t\topacity: unset !important;\n\t\t\tborder-bottom: 2px solid ${(0,I.hI)(e)} !important;\n\t\t}\n\t`}function Gt(e){const{theme:t,selected:n,hovered:i}=e;return`background: ${(0,I._o)({annotationType:"update",type:"background",selected:n,hovered:i,overlapping:!1,mode:t.mode})} !important;\n\t\t\tbox-shadow: 0 2px 0 0 ${(0,I._o)({annotationType:"update",type:"underline",selected:!1,hovered:!0,overlapping:!1,mode:t.mode})} !important;`}function Yt(e){const{discussionId:t,theme:n,selected:i,hovered:o}=e;return`\n\t\t.${(0,Ut.Ws)({type:"update"})}.${(0,Ut.dk)({discussionId:t})}.${Ot.kB} {\n\t\t\t${Gt({theme:n,selected:i,hovered:o})}\n\t\t}\n\t\t.${(0,Ut.Ws)({type:"remove"})}.${(0,Ut.dk)({discussionId:t})}.${Ot.kB} {\n\t\t\t${function(e){const{theme:t,selected:n,hovered:i}=e,o=(0,I._o)({annotationType:"remove",type:"background",selected:n,hovered:i,overlapping:!1,mode:t.mode}),r=(0,I._o)({annotationType:"remove",type:"underline",selected:n,hovered:i,overlapping:!1,mode:t.mode});return`background: ${o} !important;\n\t\t\tcolor: ${t.text.secondary} !important;\n\t\t\ttext-decoration: none !important;\n\t\t\tbox-shadow: 0 2px 0 0 ${r} !important;`}({theme:n,selected:i,hovered:o})}\n\t\t}\n\t`}function Qt(e){var t,n,i;const o=(null===(t=zt.Z.state)||void 0===t?void 0:t.discussionIds)||[],r=null!==(n=Kt.Z.state)&&void 0!==n&&n.open&&(null===(i=Kt.Z.state)||void 0===i?void 0:i.discussionIds)||[];return[...o.flatMap((t=>Nt.DZ(Ut.nB).map((n=>Ht({discussionId:t,level:n+1,hovered:!0,selected:!1,mode:e.mode}))))),...r.flatMap((t=>Nt.DZ(Ut.nB).map((n=>Ht({discussionId:t,level:n+1,hovered:!1,selected:!0,mode:e.mode})))))].join("\n")}function Xt(e){var t,n,i;const o=(null===(t=zt.Z.state)||void 0===t?void 0:t.discussionIds)||[],r=null!==(n=Kt.Z.state)&&void 0!==n&&n.open&&(null===(i=Kt.Z.state)||void 0===i?void 0:i.discussionIds)||[];return[...o.map((t=>Yt({theme:e,discussionId:t,selected:!1,hovered:!0}))),...r.map((t=>Yt({theme:e,discussionId:t,selected:!0,hovered:!1})))].join("\n")}function Jt(){var e,t;const n=null===(e=$t.Z.state)||void 0===e?void 0:e.store,i=null===(t=$t.Z.state)||void 0===t||null===(t=t.annotations)||void 0===t?void 0:t.find(Dt.j0F);if(!i)return"";const o=(0,Dt.zW$)(i);return"block"!==(null==n?void 0:n.table)?"":`\n\t\t\t.${(0,Ut.S$)({href:o,blockId:n.id})}.${Ot.kB} {\n\t\t\t\ttransition: border-color 100ms ease-in, opacity 100ms ease-in;\n\t\t\t\tborder-color: currentColor !important;\n\t\t\t\topacity: 1 !important;\n\t\t\t}\n\t\t`}function en(e){let t="";const n=Wt.Z.getHoveredEdit();n&&(t=`\n\t\t\t.${(0,Ut.EO)({type:"insert",editId:n.editId})} {\n\t\t\t\t${Gt({theme:e,selected:!1,hovered:!0})}\n\t\t\t}\n\t\t\t.${(0,Ut.EO)({type:"remove",editId:n.editId})} {\n\t\t\t\t${function(e){return`background: ${(0,I._o)({annotationType:"remove",type:"background",selected:!1,hovered:!0,overlapping:!1,mode:e.mode})} !important;\n\t\t\tcolor: ${e.text.secondary} !important;\n\t\t\ttext-decoration-color: rgba(0, 0, 0, 0) !important;`}(e)}\n\t\t\t}\n\t\t`);return`\n\t\t${t}\n\t\t${`\n\t\t.${qt.Y3l} .${(0,Ut.jN)("insert")} {\n\t\t\tbackground: initial !important;\n\t\t\tborder-bottom: initial !important;\n\t\t\tcolor: ${e.regularTextColor} !important;\n\t\t}\n\n\t\t.${qt.Y3l} .${(0,Ut.jN)("remove")} {\n\t\t\tbackground: initial !important;\n\t\t\tborder-bottom: initial !important;\n\t\t\tcolor: ${e.text.quaternary} !important;\n\t\t}\n\t`}\n\t`}function tn(){const e=(0,G.Fg)(),t=(0,d.VK)((()=>[Qt(e),Xt(e),Jt(),en(e)].filter(Boolean).join("\n")),[e]),n=(0,i.useRef)(null);return(0,i.useLayoutEffect)((()=>{if(!n.current){const e=document.createElement("style");n.current=e,document.head.appendChild(e)}n.current.innerHTML=t}),[t]),null}var nn=n(977207),on=n(574055),rn=n(807339);function sn(e){return(0,oe.jsx)("div",{id:"test-customer-io",style:{width:334,height:200,position:"absolute",bottom:64,right:21,zIndex:1,display:e?void 0:"none"}})}const an=function(){const e=(0,H.O7)(),{currentUser:t}=e,n=(0,d.VK)((()=>rn.C.isReadyWithUserAndSpaceId()),[]),o=(0,d.VK)((()=>t.isLoggedIn()&&n&&p.default.checkGate({gateName:"customerio"})),[t,n]),r=(0,d.VK)((()=>q.default.state.inAppCalloutStore),[]),s=(0,d.VK)((()=>"dark"!==e.ThemeStore.state.mode),[e]);(0,i.useEffect)((()=>{o&&(r.getCalloutVisibility("customer_io").canShow?s?on.Z.state.suppressReason===on.V.IN_APP_CALLOUT_CONFLICT?on.Z.setState({...on.Z.state,isVisible:!0,suppressReason:void 0}):on.Z.setState({...on.Z.state,suppressReason:void 0}):on.Z.setState({isVisible:!1,suppressReason:on.V.DARK_MODE}):on.Z.setState({isVisible:!1,suppressReason:on.V.IN_APP_CALLOUT_CONFLICT}))}),[r,o,s]);const a=(0,d.VK)((()=>on.Z.state.isVisible&&r.getCalloutVisibility("customer_io").canShow),[r]);return(0,i.useEffect)((()=>{if(a)return r.updateCalloutStatus({calloutId:"customer_io",visible:!0}),()=>{r.updateCalloutStatus({calloutId:"customer_io",visible:!1})}}),[r,a]),o?sn(!!a):null};var ln=n(641741),cn=n(541056);function dn(e){return(0,i.useEffect)((()=>{const e=window.setInterval((()=>{(0,ln.xK)(),(0,cn.u6)()}),5e3);return()=>{window.clearInterval(e)}}),[]),null}var un=n(698938),pn=n(841892);function mn(){const e=(0,H.Fy)(),[t,n]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{if(e.isDesktop){const e=function(e){const t={addEvent:function(e,t,n){e.addEventListener(t,n,!1)},removeEvent:function(e,t,n){e.removeEventListener(t,n)},input:"",pattern:"38384040373937396665",keydownHandler:function(n){t.input+=n.keyCode,t.input.length>t.pattern.length&&(t.input=t.input.substr(t.input.length-t.pattern.length)),t.input===t.pattern&&(e(),t.input="")},load:function(){this.addEvent(document,"keydown",this.keydownHandler)},unload:function(){this.removeEvent(document,"keydown",this.keydownHandler)}};return t.load(),t}((()=>{n(!0)}));return()=>{e.unload()}}}),[e.isDesktop]),t?(0,oe.jsx)("img",{className:"nyan",style:{position:"fixed",top:"calc(50vh - 100px)",zIndex:1e3,left:"50%",animationName:"leftOrRight",animationDuration:"9s",animationIterationCount:"infinite",pointerEvents:"none",userSelect:"none"},src:pn.Z.images.nyancatGif}):null}var hn=n(115944),gn=n(481415);const vn=(0,j.defineMessages)({pressSlashHeader:{id:"EducationTooltips.pressSlash.header",defaultMessage:"Press {slashkey} for commands"}});function fn(e){return(0,oe.jsx)("div",{style:{background:I.ZP.whiteWithAlpha(.1),padding:3,paddingRight:8,paddingLeft:8,marginRight:6,marginLeft:6,borderRadius:4},children:e.char})}function Sn(){const e=(0,H.O7)(),t=hn.o();return(0,d.VK)((()=>{const{currentUserSettingsStore:e}=q.default.state;var t;return!e||!e.isReady()||Boolean(null===(t=e.getSettings())||void 0===t?void 0:t.pressed_slash_tooltip)}),[])||e.device.isMobile||!t?null:(0,oe.jsx)(gn.U,{hideCloseButton:!0,origin:()=>t.getNode(),placementToOrigin:"bottom",header:(0,oe.jsx)(j.FormattedMessage,{...vn.pressSlashHeader,values:{slashkey:(0,oe.jsx)(fn,{char:"/"})}}),content:null,onCloseClick:()=>hn.q(e)})}const bn=new a.Ss("InPageFind",(async()=>Promise.all([n.e(52774),n.e(33993),n.e(9901)]).then(n.bind(n,248589)))),xn=(0,a.kF)(bn,(e=>e.InPageFind));var yn=n(356638),kn=n(530664),wn=n(436610),jn=n(965556);function In(){const e=(0,H.O7)();return(0,i.useEffect)((()=>{function t(t){wn.f7(e,{reason:t})}return jn.showConfirmationDialogEventEmitter.addListener(t),()=>{jn.showConfirmationDialogEventEmitter.removeListener(t)}}),[e]),null}var Cn=n(782540),Mn=n(815145),Tn=n(150475),Pn=n(570096),Ln=n(492973),_n=n(587420),Zn=n(275754),En=n(761045),An=n(110906),Rn=n(922705),Bn=n(368585),Vn=n(785957),Fn=n(645010),Un=n(529294),Dn=n(572530),On=n(318245),Nn=n(434859),zn=n(304926),qn=n(242330),Wn=n(282136),Kn=n(188923),$n=n(542057),Hn=n(896026),Gn=n(27724),Yn=n(924666),Qn=n(841464),Xn=n(623063),Jn=n(203386),ei=n(568785),ti=n(804827),ni=n(953336),ii=n(126957),oi=n(369206),ri=n(531192),si=n(178901),ai=n(903553),li=n(555064),ci=n(371663),di=n(840654),ui=n(882855),pi=n(516880),mi=n(207525),hi=n(926999),gi=n(380503);function vi(e){const{theme:t,isSidePeekOpen:n,borderRadius:i,isUnifiedTitleBarEnabled:o,isElectronWindows:r,isShowingTabBar:s,zoomFactor:a}=e;return{zIndex:n?fe.LI:fe.Bh,background:t.peekModalBackground,borderTopLeftRadius:i??5,borderTopRightRadius:i??5,paddingRight:o&&r&&n&&!s?(0,di.RO)(a):void 0}}function fi(e){const{environment:t,padding:n,height:i}=e,o=t.device.isMobile?4:n??12;return{height:i??gi.R6(t.device.isElectronMac),display:"flex",justifyContent:"space-between",alignItems:"center",paddingLeft:o,paddingRight:o}}var Si=n(99340),bi=n(881170),xi=n(691551);const yi=new(n(61766).Z);var ki=n(170210),wi=n(398452),ji=n(799332),Ii=n(724612),Ci=n(573063),Mi=n(58261),Ti=n(526388),Pi=n(458493),Li=n(542853),_i=n(211302),Zi=n(172111),Ei=n(658239);var Ai=n(548779),Ri=n(489728),Bi=n(731278),Vi=n(776798),Fi=n(45653);const Ui={display:"flex",alignItems:"center",fontSize:14,minWidth:0};function Di(e,t){return e&&e instanceof K.H2&&t&&e.id===t.id}function Oi(e){const{parentStore:t,prefixText:n}=e,i=(0,H.O7)(),o=(0,d.VK)((()=>(0,Me.B7)(i)),[i]),r=(0,d.VK)((()=>t instanceof K.G&&t.isEmptyPage()),[t]),s=(0,d.VK)((()=>t instanceof K.H2?(0,Ai.Wd)(i,t):t.getIcon()),[i,t]),a=(0,d.VK)((()=>t instanceof K.H2?(0,Ai.rn)(i,t):void 0),[i,t]),l=(0,d.VK)((()=>{const{currentSpaceStore:e}=q.default.state;return Di(t,e)}),[t]),c=(0,G.yK)((()=>({privatePagesText:{fontWeight:X.Z.fontWeight.medium,marginLeft:4,...X.Z.textOverflowStyle,overflow:"hidden"},icon:{marginRight:4,marginTop:1},title:{fontWeight:X.Z.fontWeight.semibold}})),[]);return(0,oe.jsx)(oe.Fragment,{children:l?(0,oe.jsxs)(oe.Fragment,{children:[n,(0,oe.jsx)(Fi.Z,{size:22,avatarShouldShowShadow:!0,userStore:o}),(0,oe.jsx)("span",{style:c.privatePagesText,children:(0,oe.jsx)(j.FormattedMessage,{defaultMessage:"Private pages",id:"peekMoveToMenu.addTo.privatePages"})})]}):(0,oe.jsxs)(oe.Fragment,{children:[n,(0,oe.jsx)(Bi.Z,{disabled:!0,icon:s,isEmptyPage:r,title:a,size:18,style:c.icon}),(0,oe.jsx)(Vi.Z,{style:c.title,store:t})]})})}const Ni=function(e){let{store:t,prefix:n,buttonStyle:o,saveParent:r,pageType:s,forceUntyped:a}=e;const l=(0,G.Fg)(),c=(0,H.O7)(),u=(0,d.VK)((()=>{const e=q.default.state.mainEditorCurrentBlockStore;return e&&(0,De.WE)(e)?"home_tab":e&&(0,Me.qG)(e.id)?"aggregated_type":"quick_add"}),[]),p=(0,d.VK)((()=>t.getParentStore()),[t]),m=(0,i.useRef)(null),h=(0,i.useCallback)((e=>function(e,t,n,i,o,r,s,a){e.preventDefault(),t&&_i.bA({environment:n,blocks:[i],originRect:t.getBoundingClientRect(),moveToContext:r,onAccept:e=>function(e,t,n,i){const{currentSpaceStore:o}=q.default.state;if(o&&t){let t;!function(e){const{pageType:t,spaceStore:n,currentUserId:i,result:o}=e;(0,Ei.rq)({currentUserId:i,spaceId:n.id,value:o}),t&&(0,Ei.ZT)({currentUserId:i,spaceId:n.id,databaseType:Zi.wg[t],parent:o})}({pageType:t||i,spaceStore:o,currentUserId:n.currentUser.id,result:e})}}(e,o,n,s),isAddTo:!0,isDefaultPrivateLocation:zi(i),disableSuccessToast:!0,forceUntyped:a||qi(s)})}(e,m.current,c,t,r,u,s,a)),[m,c,t,r,u,s,a]);if(p&&!(p instanceof K.T5)&&!(p instanceof K.zq)&&!(p instanceof K.Vf)&&!(p instanceof K.Xr)){const e=n?(0,oe.jsx)("span",{style:{color:l.mediumTextColor,marginRight:4},children:(0,oe.jsx)(j.FormattedMessage,{...n})}):void 0;return(0,oe.jsx)(Jn.Z,{debugName:"PeekMoveToMenu",capture:!0,onMoveTo:h,children:(0,oe.jsx)("div",{style:Ui,children:(0,oe.jsx)(Ti.Z,{renderTooltip:()=>(0,oe.jsxs)("div",{children:[(0,oe.jsx)(j.FormattedMessage,{defaultMessage:"Set the default page or database",id:"peekMoveToMenu.tooltip"}),(0,oe.jsx)("br",{}),(0,oe.jsx)(Mi.Z,{style:{color:l.mediumInvertedTextColor},name:"moveTo"})]}),render:t=>(0,oe.jsxs)(Ri.Z,{onClick:h,ref:m,shouldShrink:!0,style:o,...t,children:[(0,oe.jsx)(Oi,{parentStore:p,prefixText:e}),(0,Li.i)({width:10,marginLeft:4,fill:l.lightTextColor})]})})})})}return null};function zi(e){const t=e.getParentStore(),{currentSpaceStore:n}=q.default.state;return Di(t,n)}function qi(e){return!e||"page"===e}var Wi=n(139998),Ki=n(228311),$i=n(326399),Hi=n(843377),Gi=n(705002),Yi=n(184747),Qi=n(568626),Xi=n(64530),Ji=n(552629),eo=n(108406),to=n(805149),no=n(248543),io=n(484210),oo=n(460709),ro=n(798165),so=n(552275),ao=n(231945),lo=n(316354),co=n(478140),uo=n(632163),po=n(953437),mo=n(672495),ho=n(213148),go=n(803418);const vo=i.memo((function(e){const{origin:t}=e,n=(0,H.O7)(),[o,r]=(0,i.useState)(!1),s=(0,d.VK)((()=>{const{device:e}=n;if(e.isPhone)return!1;if(go.Z.state.openPopups.size>0)return!1;const{currentUserSettingsStore:t}=q.default.state;if(!t||!t.isReady())return!1;const i=t.getSettings();return!(null!=i&&i.signup_time&&(null==i?void 0:i.signup_time)>165888e7)&&(null==i||!i.seen_peek_mode_tooltip)}),[n]);(0,i.useEffect)((()=>{if(s){const e=setTimeout((()=>{r(!0)}),500);return()=>{clearTimeout(e),r(!1)}}r(!1)}),[n,s]);const a=(0,G.yK)((e=>({popupContainer:{fontSize:12,color:I.ZP.white,position:"absolute",top:"calc(100% + 12px)",left:"calc(50% - 110px)",background:I.ZP.blue,borderRadius:6,padding:"8px 12px 12px 12px",width:220,boxShadow:e.largeLightBoxShadow,zIndex:99},popupCircle:{position:"absolute",top:-12,left:"calc(50% - 2.5px)",background:I.ZP.blue,width:5,height:5,borderRadius:5,boxShadow:`0 0 0 1.5px ${e.contentBackground}`},popupVerticalLine:{position:"absolute",top:-12,left:"calc(50% - 1px)",background:I.ZP.blue,width:2,height:12},popupTitle:{width:"90%",fontWeight:500,marginBottom:2},popupMessage:{opacity:.8,lineHeight:1.35},popupIconButton:{position:"absolute",top:4,right:4,opacity:.8},popupIcon:{width:12,fill:I.ZP.white}})),[]),{device:l}=n;return l.isMobile?(0,oe.jsx)(oe.Fragment,{children:t}):(0,oe.jsxs)("div",{style:{position:"relative"},children:[t,(0,oe.jsx)(Xn.Z,{isVisible:o,animationStyle:{opacity:1},enterAnimationStyle:{opacity:0},exitAnimationStyle:{opacity:0},render:()=>(0,oe.jsxs)("div",{style:a.popupContainer,children:[(0,oe.jsx)("div",{style:a.popupCircle}),(0,oe.jsx)("div",{style:a.popupVerticalLine}),(0,oe.jsx)("div",{style:a.popupTitle,children:(0,oe.jsx)(j.FormattedMessage,{defaultMessage:"New! Open pages in side peek",id:"peekModeIntroTooltip.title"})}),(0,oe.jsx)("div",{style:a.popupMessage,children:(0,oe.jsx)(j.FormattedMessage,{defaultMessage:"Use Tables, Boards, Lists and Timelines while opening pages on the side for faster workflows. Switch to other peek modes here.",id:"peekModeIntroTooltip.subtitle"})}),(0,oe.jsx)(Ci.Z,{icon:ho.U,style:a.popupIconButton,iconStyle:a.popupIcon,onClick:()=>function(e){_n.Om({environment:e,seen:!0})}(n)})]})})]})}));const fo=(0,j.defineMessages)({changeForThisView:{id:"peekTopbar.changePeekOption.changeForThisView",defaultMessage:"Edit view default"}});const So=function(e){let{store:t,onClose:n}=e;const i=(0,G.Fg)(),o=(0,H.O7)();(0,Yi.Z)((()=>{const e=xo(i),t=Kn.default.getPeekMode();e.find((e=>Nt.Xy(e.key,t)))||Qi.log({level:"warning",from:"TopbarPeekModeButton",type:"InvalidSelectedPeekMode",error:(0,Ji.Ui)("Selected key is invalid.")})}));const r=(0,H.Fy)(),s=xo(i),a=(0,d.VK)((()=>Kn.default.getPeekMode()),[]);return a?(0,oe.jsx)(ao.ZP,{popupType:r.isMobile?po.kQ.SlideUp:po.kQ.Popup,alignmentToOrigin:ao.vR.Center,placementToOrigin:ao.pO.Bottom,style:{minWidth:190},originGap:0,onClick:()=>function(e){if(!Kn.default.state.open)return;const t=Kn.default.state.collectionContextStore;t?eo.nS({environment:e,collectionContextStore:t,from:"peek_topbar",peek_target_id:Kn.default.state.targetStore.id,from_peek_mode:Kn.default.state.mode}):Ln.v2(e,{from:"peek_topbar",peek_target_id:Kn.default.state.targetStore.id,from_peek_mode:Kn.default.state.mode})}(o),renderOrigin:e=>(0,oe.jsx)(vo,{origin:(0,oe.jsx)(Ti.Z,{renderTooltip:()=>(0,oe.jsx)(oe.Fragment,{children:(0,oe.jsx)(j.FormattedMessage,{defaultMessage:"Switch peek mode",id:"peekTopbar.openPagesAs.button"})}),render:t=>(0,oe.jsx)(Ci.Z,{...e,...t,icon:(0,no.RO)(a),iconStyle:{fill:i.mediumIconColor}})})}),render:e=>(0,oe.jsx)(bo,{parent:e,currentPeekMode:a,options:s,store:t,onClose:n})}):null};function bo(e){let{currentPeekMode:t,options:n,store:i,onClose:o,parent:r}=e;const s=(0,H.O7)(),a=(0,H.Fy)(),l=(0,G.Fg)();let c;c=a.isMobile?{menuType:oo.og.ActionSheet}:{menuType:oo.og.Popup,width:220};const u=(0,d.VK)((()=>Nt.oA([...n.map(((e,n)=>{const o=e.key,a="full_page"===o?(0,io.ZP)({store:i,fullyQualified:!1,pageVisitSource:Mn.tY.Expand}):function(e,t){const{mainEditorCurrentBlockStore:n}=q.default.state,i=ro.uJ(t),o=t.isNavigableBlock()?i.slice(1):[...i],r=o.length>0?o[0]:void 0;return(0,An.mb)({store:t,mainEditorCurrentBlockStore:r instanceof K.G&&!Kn.default.state.open?r:n,collectionContextStore:Kn.default.state.collectionContextStore,fullyQualified:!1,overridePeekMode:(0,Kn.getPeekModeFromCollectionPeekModeFormat)(e)})}(o,i);return{key:n,render:n=>(0,oe.jsx)(lo.Z,{href:a,onClick:()=>{var e;_n.Om({environment:s,seen:!0}),Ln.UZ(s,{from:"peek_topbar",peek_mode:o,from_peek_mode:t,target_page_id:null===(e=Kn.default.peekTargetStore.state)||void 0===e?void 0:e.id}),r.close()},children:(0,oe.jsx)(so.Z,{...n,disabled:!1,title:e.title,icon:e.icon,caption:e.caption,body:e.body,checkState:Nt.Xy(e.key,t)})}),action:()=>{}}}))])),[n,t,s,i,r]),p=(0,d.VK)((()=>Kn.default.state.open?Kn.default.state.collectionContextStore:void 0),[]),m=(0,d.VK)((()=>Kn.default.state.open?Kn.default.state.targetStore:void 0),[]),h=(0,d.VK)((()=>q.default.state.mainEditorCurrentBlockStore),[]),g=(0,d.VK)((()=>{var e,t,n;const i=h&&h.id===(null==p||null===(e=p.collectionViewBlockStore())||void 0===e?void 0:e.getRecordStoreUIRoot().id);return(null==p||null===(t=p.collectionStore())||void 0===t?void 0:t.id)===(null==m||null===(n=m.getAssociatedCollectionStore())||void 0===n?void 0:n.id)&&(null==p?void 0:p.permissionScopesStore.state.canConfigureBlock)&&i}),[h,p,m]);return(0,oe.jsx)(co.Z,{...c,children:(0,oe.jsx)(uo.Z,{type:uo.i.Vertical,sections:Nt.oA([{key:0,render:e=>(0,oe.jsx)(mo.Z,{enableActionSheetTitle:!0,...e}),items:u},g&&{key:1,render:e=>(0,oe.jsx)(mo.Z,{enableActionSheetTitle:!0,topBorder:!0,...e}),items:[{key:"change_for_view",render:e=>(0,oe.jsx)(so.Z,{...e,disabled:!1,title:ht.default.formatMessage(fo.changeForThisView),icon:(0,Xi.y)({width:16,height:16,fill:l.regularIconColor})}),action:e=>{!function(e,t){const n=Kn.default.state.open?Kn.default.state.collectionContextStore:void 0;n&&(_n.Om({environment:e,seen:!0}),Kn.default.isCenterPeekOpen()&&t&&t(),to.r$({collectionContextStore:n,collectionSettingsStore:n.settingsStore}),to.H4({collectionSettingsStore:n.settingsStore,item:{type:"layout"}}),n.settingsStore.setState({...n.settingsStore.state,openButtonPopup:"peekModeFormat"}))}(s,o),r.close()}}]}]),initialFocus:0})})}function xo(e){return["side_peek","center_peek","full_page"].map((t=>({key:t,title:(0,no.LQ)(t),icon:(0,no.RO)(t)({width:16,fill:e.mediumTextColor})})))}var yo=n(949019);const ko=function(e){const{store:t,shouldShowMoveToMenu:n}=e,o=(0,H.O7)(),r=(0,j.useIntl)(),s=(0,d.VK)((()=>(0,io.ZP)({store:t,fullyQualified:!1,pageVisitSource:Mn.tY.Expand})),[t]),a=(0,G.yK)((e=>({keyboardShortcut:{color:e.mediumInvertedTextColor},iconButtonWrapper:{height:24}})),[]),l=(0,i.useCallback)((()=>{var e,t,i;Ln.sx(o,{isNewPage:n,peek_mode:Kn.default.state.mode,from:"topbar_button",target_page_id:null===(e=Kn.default.peekTargetStore.state)||void 0===e?void 0:e.id}),Ln.$C(o,{peek_mode:Kn.default.state.mode,from:"topbar_open_as_page_button",target_page_id:null===(t=Kn.default.peekTargetStore.state)||void 0===t?void 0:t.id,target_parent_id:null===(i=Kn.default.peekTargetStore.state)||void 0===i?void 0:i.getParentId()})}),[o,n]);return(0,oe.jsx)(Ti.Z,{renderTooltip:()=>(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)("div",{children:(0,oe.jsx)(j.FormattedMessage,{defaultMessage:"Open in full page",id:"peekTopbar.navigateToPage.tooltip"})}),(0,oe.jsx)(Mi.Z,{style:a.keyboardShortcut,name:"commandEnter"})]}),render:e=>(0,oe.jsx)("div",{style:a.iconButtonWrapper,children:(0,oe.jsx)(Ci.Z,{...e,icon:yo.Z,iconStyle:{width:16,height:16},href:s,onClick:l,ariaLabel:r.formatMessage({id:"peekTopbar.navigateToPage.tooltip",defaultMessage:"Open in full page"})})})})};var wo=n(486467),jo=n(507715),Io=n(204341);const Co=(0,j.defineMessages)({moveToPrefixText:{id:"peekMoveToMenu.moveTo.moveTo",defaultMessage:"Move to"},addToPrefixText:{id:"peekMoveToMenu.addTo.addTo",defaultMessage:"Add to"},closeButton:{defaultMessage:"Close",id:"peekTopbar.close.button"},previousPageTooltip:{defaultMessage:"Previous page",id:"peekTopbar.peekNavUpArrow.tooltip"},nextPageTooltip:{defaultMessage:"Next page",id:"peekTopbar.peekNavDownArrow.tooltip"}});const Mo=function(e){let{store:t,shouldShowMoveToMenu:n,onClose:i,spaceStore:o,spaceViewStore:r,pageVisitStore:s,presenceStore:a}=e;const l=(0,G.Fg)(),c=(0,H.O7)(),u=(0,d.VK)((()=>Kn.default.isSidePeekOpen()),[]),p=(0,d.VK)((()=>xi.Z.state.banners),[]),m=(0,d.VK)((()=>t.canEdit()),[t]),{isShowingTabBar:h,isUnifiedTitleBarEnabled:g,zoomFactor:v}=(0,d.VK)((()=>{var e;return{isShowingTabBar:Boolean(st.Z.state.isShowingTabBar),isUnifiedTitleBarEnabled:Boolean(null===(e=st.Z.state.preferences)||void 0===e?void 0:e.isUnifiedTitleBarEnabled),zoomFactor:st.Z.state.zoomFactor||di.lO}}),[]),f=g?c.device.isElectron&&!h&&u:c.device.isElectronMac&&!h&&u;return(0,oe.jsx)(ai.Z,{store:t,disableRectangularSelection:!0,disableEditNearestBlock:!0,isPeekRenderer:!0,render:e=>{let{selectableEvents:d}=e;return(0,oe.jsxs)("div",{...d,style:vi({theme:l,isSidePeekOpen:u,isUnifiedTitleBarEnabled:g,isElectronWindows:c.device.isElectronWindows,isShowingTabBar:h,zoomFactor:v}),className:f?qt.pMC:void 0,children:[(0,oe.jsxs)("div",{style:fi({environment:c}),children:[(0,oe.jsxs)("div",{style:{display:"grid",gridAutoFlow:"column",gridColumnGap:2,alignItems:"center"},children:[(0,oe.jsx)(Lo,{onClose:i}),(0,oe.jsx)(ko,{store:t,shouldShowMoveToMenu:n}),Kn.default.state.open&&(0,oe.jsx)(So,{store:t,onClose:i}),(0,oe.jsx)(_o,{shouldShowMoveToMenu:n}),(0,oe.jsx)(To,{store:t,shouldShowMoveToMenu:n}),m&&(0,oe.jsx)(Pi.Z,{store:t,isMobile:!1,buttonStyle:{...!n&&{marginLeft:12}}})]}),(0,oe.jsx)("div",{style:{flexGrow:1,flexShrink:1}}),(0,oe.jsx)(Po,{store:t,spaceStore:o,spaceViewStore:r,pageVisitStore:s,presenceStore:a})]}),(0,oe.jsx)(D.t$,{banners:p,isMobile:!1,isInPeekRenderer:!0})]})}})};function To(e){let{store:t,shouldShowMoveToMenu:n}=e;const{open:i,saveParent:o,pageVisitSource:r,collectionContextStore:s}=(0,d.VK)((()=>({open:Kn.default.state.open,saveParent:!!Kn.default.state.open&&Kn.default.state.saveParent,pageVisitSource:Kn.default.state.open?Kn.default.state.pageVisitSource:void 0,collectionContextStore:Kn.default.state.collectionContextStore})),[]),a=(0,d.VK)((()=>{const e=t.getAssociatedCollectionStore();return(null==e?void 0:e.getDatabaseType())===ci.iS?"tasks":void 0}),[t]),l=(0,d.VK)((()=>"collectionTypedView"===(null==s?void 0:s.contextType)),[s]);return i&&n?(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(Gi.Z,{}),(0,oe.jsx)(Ni,{store:t,saveParent:o,prefix:l?Co.moveToPrefixText:Co.addToPrefixText,pageType:a,forceUntyped:r===Mn.tY.SidebarQuickAdd})]}):null}function Po(e){let{store:t,spaceStore:n,spaceViewStore:i,pageVisitStore:o,presenceStore:r}=e;const s=(0,H.O7)(),{device:a}=s,l=(0,d.VK)((()=>(0,Le.IJ)(s,t)),[s,t]),c=(0,d.VK)((()=>Me.qG(t.id)),[t]),u=(0,d.VK)((()=>(0,De.Kj)(t.id)),[t]),m=(0,d.VK)((()=>t.isFormBlock()),[t]),h=(0,d.VK)((()=>t.isPageBlock()),[t]),g=!a.isMobile&&n&&i&&!l&&!u,v=(0,d.VK)((()=>Boolean(n&&!n.canEdit())),[n]),f=(0,d.VK)((()=>t.canEdit()),[t]),S=(0,d.VK)((()=>t.isRestricted()),[t]),b=(0,d.VK)((()=>!a.isMobile&&p.default.checkGate({gateName:"page_layouts"})&&h),[a.isMobile,h]),x=n&&i&&!l&&(0,Wi.UP)({isSpaceGuest:v,canEditPage:f,isFormBlock:m,isPersonalHomePage:u}),y=(0,Si.cR)(t);return(0,oe.jsxs)("div",{style:{display:"flex",alignItems:"center",flexGrow:0,flexShrink:0,zIndex:1},children:[S&&(0,oe.jsx)(jo.Z,{style:{marginRight:14},onClick:()=>{ji.Z.setState({open:!0})}}),f&&(0,oe.jsx)(wo.ZP,{rootStore:t,pageVisitStore:o,presenceStore:r}),x&&(0,oe.jsx)(D.jZ,{store:t,buttonPopupStore:ji.Z}),g&&(0,oe.jsx)(Ki.Z,{blockStore:t,spaceStore:n,buttonPopupStore:yi}),g&&f&&(0,oe.jsx)(Io.ZP,{blockStore:t,spaceStore:n,buttonPopupStore:Ii.Z}),b&&(0,oe.jsx)(Hi.b,{blockStore:t,buttonPopupStore:ki.Z}),n&&i&&!l&&!y&&(0,oe.jsx)($i.Z,{store:t,spaceViewStore:i}),c&&(0,oe.jsx)(bi.Z,{}),g&&(0,oe.jsx)(D.KA,{store:t,buttonPopupStore:wi.Z})]})}function Lo(e){let{onClose:t}=e;const n=(0,j.useIntl)(),i=(0,G.Fg)();return(0,d.VK)((()=>Kn.default.isSidePeekOpen()),[])?(0,oe.jsx)(Ti.Z,{renderTooltip:()=>(0,oe.jsxs)("div",{children:[n.formatMessage(Co.closeButton),(0,oe.jsx)("br",{}),(0,oe.jsx)(Mi.Z,{style:{color:i.mediumInvertedTextColor},name:"esc"})]}),render:e=>(0,oe.jsx)(Ci.Z,{...e,ariaLabel:n.formatMessage(Co.closeButton),icon:mi.t,iconStyle:{width:16,height:16},onClick:()=>t("close_button")})}):null}function _o(e){let{shouldShowMoveToMenu:t}=e;const n=(0,j.useIntl)(),i=(0,G.Fg)(),o=(0,d.VK)((()=>Kn.default.state),[]),{resultsStore:r}=o,s=(0,d.VK)((()=>null==r?void 0:r.getState()),[r]);if(!o.open)return null;if(t)return null;const a=o.targetStore.id;return s&&s.length>0&&s.some((e=>e.id===a))?(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(Gi.Z,{}),(0,oe.jsx)(Ti.Z,{renderTooltip:()=>(0,oe.jsxs)("div",{children:[n.formatMessage(Co.previousPageTooltip),(0,oe.jsx)("br",{}),(0,oe.jsx)(Mi.Z,{style:{color:i.mediumInvertedTextColor},name:"peekUp"})]}),render:e=>(0,oe.jsx)(Ci.Z,{...e,ariaLabel:n.formatMessage(Co.previousPageTooltip),disabled:a===s[0].id,icon:pi.R,onClick:()=>hi.Qk(),iconStyle:{fill:i.mediumIconColor}})}),(0,oe.jsx)(Ti.Z,{renderTooltip:()=>(0,oe.jsxs)("div",{children:[n.formatMessage(Co.nextPageTooltip),(0,oe.jsx)("br",{}),(0,oe.jsx)(Mi.Z,{style:{color:i.mediumInvertedTextColor},name:"peekDown"})]}),render:e=>(0,oe.jsx)(Ci.Z,{...e,ariaLabel:n.formatMessage(Co.nextPageTooltip),disabled:a===s[s.length-1].id,icon:ui.E,onClick:()=>hi.OW(),iconStyle:{fill:i.mediumIconColor}})})]}):null}function Zo(){const e=(0,d.VK)((()=>Kn.default.state.open),[]),t=(0,d.VK)((()=>zn.Z.state),[]),n=(0,G.yK)((e=>({containerStyles:{position:"fixed",top:0,right:0,bottom:0,left:0,zIndex:fe.Nn,background:e.overlaySmokescreen},contentStyles:{...Fo(e),top:Kn.PeekModeOuterPadding,left:Kn.PeekModeOuterPadding,right:Kn.PeekModeOuterPadding,marginRight:"auto",height:`calc(100% - ${Kn.PeekModeOuterPadding}px*2)`,maxWidth:Kn.CenterPeekModeOuterWidth+t,borderRadius:4}})),[t]);return(0,oe.jsx)(ti.Z,{open:e,children:(0,oe.jsx)(Ro,{enableCaptureClick:!0,priority:void 0,showResizer:!1,styles:n})})}function Eo(){const e=(0,H.O7)(),t=(0,d.VK)((()=>Kn.default.state),[]),n=(0,d.VK)((()=>Kn.default.getSidePeekWidth(e.WindowSizeStore.state.width)),[e]),i=(0,G.yK)((e=>({containerStyles:{position:"fixed",top:0,right:0,bottom:0,translateX:n,width:n,zIndex:fe.YO},contentStyles:{...Fo(e),top:0,right:0,width:"100%",height:"100%",borderRadius:0}})),[n]);return(0,oe.jsx)(Xn.Z,{isVisible:!0,useCompositeLayer:!0,animationStyle:{translateX:t.open&&!t.isClosing?0:n},render:()=>(0,oe.jsx)(Ro,{enableCaptureClick:!1,priority:-1,showResizer:!0,styles:i}),enterAnimationStyle:{translateX:t.open?0:n},onAnimationEnd:()=>{t.open&&t.isClosing?(Kn.default.setState({...t,isClosing:!1}),_n.ME()):t.open&&t.isOpening&&Kn.default.setState({...t,isOpening:!1})}})}function Ao(){const e=(0,H.O7)(),t=(0,d.VK)((()=>Kn.default.state),[]),{currentSpaceStore:n,currentSpaceViewStore:i}=(0,d.VK)((()=>{const{currentSpaceStore:e,currentSpaceViewStore:t}=q.default.state;return{currentSpaceStore:e,currentSpaceViewStore:t}}),[]),o=(0,d.VK)((()=>{var e;return!!t.open&&(t.showMoveTo||"collectionTypedView"===(null===(e=t.collectionContextStore)||void 0===e?void 0:e.contextType))}),[t]);return t.open?(0,oe.jsx)(Mo,{store:t.targetStore,spaceStore:n,spaceViewStore:i,pageVisitStore:t.pageVisitStore,presenceStore:t.presenceStore,shouldShowMoveToMenu:o,onClose:t=>{zo(e,t)}}):null}function Ro(e){const{priority:t}=e,n=(0,H.O7)(),o=(0,d.VK)((()=>Kn.default.state),[]),{shouldShowFrame:r}=(0,d.VK)((()=>(0,Me.h1)(n)),[n]),s=(0,d.VK)((()=>Vn.Tx()),[]),a=(0,d.VK)((()=>o.open&&0===Gn.default.state.stores.length&&!Gn.default.state.pivot&&"editing"!==Yn.default.state.mode&&!qn.ZP.state.isOpen),[o.open]),l=(0,i.useCallback)((()=>{qo(n)}),[n]),c=(0,i.useCallback)((()=>{!function(e){Kn.default.peekTargetStore.state&&(Zn._c({environment:e,store:Kn.default.peekTargetStore.state,pageVisitSource:Mn.tY.Expand}),Ln.sx(e,{isNewPage:Kn.default.state.open&&Kn.default.state.showMoveTo,peek_mode:Kn.default.state.mode,from:"command_enter",target_page_id:Kn.default.peekTargetStore.state.id}),Ln.$C(e,{peek_mode:Kn.default.state.mode,from:"command_enter",target_page_id:Kn.default.peekTargetStore.state.id,target_parent_id:Kn.default.peekTargetStore.state.getParentId()}))}(n)}),[n]);return r?o.open?(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(Qn.Z,{debugName:"PeekRenderer",priority:t,capture:s}),(0,oe.jsx)(Jn.Z,{debugName:"PeekRenderer",capture:a,onEsc:l,onCommandEnter:c,children:(0,oe.jsx)(Bo,{...e})},o.targetStore.id)]}):(0,oe.jsx)(Bo,{...e}):null}function Bo(e){const{enableCaptureClick:t,bottomBar:n,showResizer:o,styles:r}=e,s=(0,i.useCallback)((e=>{Fn.Z.PeekViewScroller=e??void 0}),[]),a=(0,j.useIntl)(),l=(0,H.O7)(),c=(0,d.VK)((()=>Kn.default.state),[]),u=(0,d.SI)((()=>c.open?Hn.Z.getMode(l,c.targetStore):Hn.m.disabled),[l,c]),p=(0,d.VK)((()=>{if(!c.open)return;const{currentSpaceStore:e,currentSpaceViewStore:t}=q.default.state;return{pageStore:c.targetStore,spaceStore:e,spaceViewStore:t,presenceStore:c.presenceStore,pageVisitStore:c.pageVisitStore,publicEditModeStore:u}}),[c,u]),m=(0,d.VK)((()=>{var e;return null==p||null===(e=p.pageStore)||void 0===e?void 0:e.getAssociatedCollectionStore()}),[null==p?void 0:p.pageStore]),{modules:h}=(0,Dn.V)(null==p?void 0:p.pageStore),g=(0,i.useCallback)((()=>{qo(l)}),[l]),v=(0,i.useCallback)((e=>{let{startTime:t,endTime:n}=e;const i=c.open?An.fm(c.targetStore):void 0;On.default.measure({metricName:"collections.max_scroll_lag_in_session",startTime:t,endTime:n},{environment:l,data:Bn.vS(i)})}),[l,c]),f=(0,i.useCallback)((()=>{!function(e){zo(e,"empty_space_click")}(l)}),[l]);(0,i.useEffect)((()=>{c.open&&c.mode===Pn.l?L.setOverlay(!0):L.setOverlay(!1)}),[c.open,c.mode]);const S=(0,d.VK)((()=>Rn.QH.state),[]),b=(0,d.VK)((()=>Kn.default.isSidePeekOpen()&&Rn.ht.state),[]),x=(0,d.VK)((()=>(null==m?void 0:m.id)&&(0,Un.Bm)(m.id)),[null==m?void 0:m.id]);return(0,oe.jsx)(Cn.Mi,{value:p,children:(0,oe.jsx)("div",{role:"region","aria-label":a.formatMessage({id:"peekRenderer.ariaLabel",defaultMessage:"Side Peek"}),"aria-hidden":!c.open||void 0,style:r.containerStyles,className:qt.p1Q,children:c.open&&(0,oe.jsxs)(oe.Fragment,{children:[t&&(0,oe.jsx)("div",{style:{width:"100%",height:"100%"},onClick:f}),(0,oe.jsxs)("div",{style:r.contentStyles,children:[b&&(0,oe.jsx)("div",{style:{position:"absolute",top:10,transform:"translateX(-100%)",left:-10},children:(0,oe.jsx)(Ie.at,{rootStore:S})}),o&&(0,oe.jsx)(li.Z,{type:"peek"}),(0,oe.jsx)(Ao,{}),(0,oe.jsx)(ai.Z,{store:c.targetStore,isDefaultContainer:!0,droppable:!0,isPeekRenderer:!0,render:e=>{let{selectableEvents:t,selectableHoverMenuOverlay:n}=e;return(0,oe.jsx)(i.Suspense,{fallback:(0,oe.jsx)(ii.Z,{peekMode:Kn.default.getPeekMode(),isVisible:!0,store:c.targetStore}),children:(0,oe.jsx)(oi.Z,{pageStore:c.targetStore,pageVisitStore:c.pageVisitStore,initialChunkSize:25,incrementChunkSize:25,store:c.loadingContainerStore,render:e=>{let{ready:o,initialRequestCompleted:r,endOfResultsReached:a,isCollectionInPage:d}=e;return(0,oe.jsxs)(i.Fragment,{children:[(0,oe.jsxs)("div",{style:{display:"flex",overflowY:"hidden"},children:[(0,oe.jsxs)(ni.Z,{ref:s,onScrollLagMeasure:d?v:void 0,preventType:o?En.Q7(l):Nn.Z.All,type:Nn.Z.Y,style:o?Uo:Do,store:$n.Z,...t,children:[n,(0,Te.GD)(u.state)&&(0,oe.jsx)(xe.LazyCompletionPopup,{scrollerStore:$n.Z}),(0,oe.jsx)(Ie.vo,{scrollerStore:$n.Z}),r&&(0,oe.jsxs)(i.Fragment,{children:[(0,oe.jsx)(D.gW,{blockStore:c.targetStore}),(0,oe.jsx)("div",{style:{display:"flex"},children:(0,oe.jsx)(ri.ZP,{context:Wn.S.PeekView,store:c.targetStore,onTitleEsc:g,forceSelectTitleOnMount:!0,paddingBottom:80,styleOverrides:Vo,disabled:!c.open||c.isClosing})}),(0,oe.jsx)(si.Z,{pageVisitStore:c.pageVisitStore,presenceStore:c.presenceStore,isPeekView:!0})]}),o&&!a&&(0,oe.jsx)(ei.Z,{style:No})]}),m&&x?(0,oe.jsx)("div",{style:{minWidth:Un.wJ,width:Un.wJ,maxWidth:Un.wJ},children:(0,oe.jsx)(D.Jc,{modules:h,store:c.targetStore,context:Wn.S.Frame,disabled:!c.open||c.isClosing,shownAs:"sidebar"})}):null]}),(0,oe.jsx)(ii.Z,{peekMode:Kn.default.getPeekMode(),isVisible:!o,store:c.targetStore})]})}})})}},c.targetStore.id),n]})]})})})}const Vo={pageCoverHeight:"20vh"};function Fo(e){return{flexDirection:"column",position:"absolute",display:"flex",marginLeft:"auto",background:e.peekModalBackground,boxShadow:e.largeLightBoxShadow}}const Uo={display:"flex",flexDirection:"column",flexGrow:1,position:"relative",transform:"translateZ(0)"},Do={...Uo,opacity:0,pointerEvents:"none",height:0},Oo="1.375em",No={zIndex:1,opacity:.5,width:Oo,height:Oo,marginTop:0,marginBottom:24,marginLeft:"auto",marginRight:"auto"};function zo(e,t){_n.xv(e,t)}function qo(e){zo(e,"esc")}const Wo=function(){const e=(0,H.O7)(),t=(0,d.VK)((()=>{const e=Kn.default.state.open?Kn.default.state.targetStore:void 0;return null==e?void 0:e.getSystemBlockTypeStore().getValue()}),[]),n=(0,i.useCallback)((()=>{Kn.default.state.open&&Kn.default.isSidePeekOpen()&&($e.toggleLeftSidebarByWindowSize(e),Kn.default.setState({...Kn.default.state,isOpening:!1}))}),[e]);switch((0,i.useEffect)((()=>(e.WindowSizeStore.addListener(n),()=>e.WindowSizeStore.removeListener(n))),[e.WindowSizeStore,n]),(0,i.useEffect)((()=>{(0,Tn.u7)(t)&&_n.xv(e,"invalid_peek_page")}),[e,t]),(0,d.VK)((()=>Kn.default.getPeekMode()),[])){case Pn.l:return(0,oe.jsx)(Zo,{});case Pn.R:return(0,oe.jsx)(Eo,{})}};var Ko=n(666605);const $o={SlackUniversalQnaAnnouncementModal:new a.Ss("SlackUniversalQnaAnnouncementModal",(async()=>await Promise.all([n.e(62743),n.e(33993),n.e(5242),n.e(71891),n.e(84885),n.e(69343),n.e(93270),n.e(16732),n.e(11002),n.e(16536),n.e(4617),n.e(23879),n.e(29657),n.e(99417),n.e(84654),n.e(61105),n.e(75306),n.e(44500),n.e(98530),n.e(10358),n.e(83264),n.e(35691),n.e(34232),n.e(18240),n.e(62069),n.e(14418),n.e(8077),n.e(1313),n.e(31658),n.e(24207),n.e(24199),n.e(86712)]).then(n.bind(n,600044))))},Ho=(0,a.kF)($o.SlackUniversalQnaAnnouncementModal,(e=>e.default));var Go=n(520993),Yo=n(590965);function Qo(e){let{}=e;const t=(0,d.VK)((()=>q.default.state.currentSpaceStore),[]),n=(0,d.VK)((()=>{var e;if(!t)return;const n=null===(e=t.getSettings())||void 0===e?void 0:e.space_request;return(0,Yo.DI)(n)?n:void 0}),[t]);return n?(0,oe.jsx)(D.g0,{workspaceTransfer:n}):null}class Xo extends h.Z{constructor(){super(...arguments),this.appRenderStore=this.createComputedStore((()=>Me.h1(this.environment))),this.showHelpButtonStore=this.createComputedStore((()=>{if(!this.environment.currentUser.isLoggedIn())return!1;if(this.environment.device.isMobile)return!1;const{mainEditorCurrentBlockStore:e,currentSpaceStore:t}=q.default.state;return!(!e||!t)&&(!(0,Le.IJ)(this.environment,e)&&(!this.shouldIncludeAssistantButtonStore.state&&(!this.isPageLayoutEditorOpenStore.state&&!this.isSiteSettingsLayoutEditorOpenStore.state)))})),this.isFullPageAssistantChatEnabledStore=this.createComputedStore((()=>ot.Z.isFullPageAssistantChatEnabled(this.environment.device))),this.shouldMountAssistantPendingEditsElementStore=this.createComputedStore((()=>{const{device:e}=this.environment;if(!e.isMobileNative)return!1;const{RouterStore:t}=this.environment,{route:n}=t.state;return"page"===n.name?ot.Z.isXMLAssistantEnabled():void 0})),this.shouldIncludeAssistantButtonStore=this.createComputedStore((()=>{const{device:e}=this.environment,{RouterStore:t}=this.environment,{route:n}=t.state;return"chat"!==n.name&&(!this.isPageLayoutEditorOpenStore.state&&(!this.isSiteSettingsLayoutEditorOpenStore.state&&ot.Z.shouldShowAssistantInCorner(e)))})),this.shouldShowAssistantEphemeralViewModalStore=this.createComputedStore((()=>ot.Z.isEphemeralViewDatabaseQueryingEnabled())),this.isPageLayoutEditorOpenStore=this.createComputedStore((()=>{const e=Fe.Z.getState();return e.isOpen&&"layout-editor"===e.mode&&(0,Re.fastCheckGate)("page_layouts")})),this.isSiteSettingsLayoutEditorOpenStore=this.createComputedStore((()=>{const e=Fe.Z.getState();return e.isOpen&&"site-settings-editor"===e.mode&&(0,Re.fastCheckGate)("sites_phase_2")})),this.canShowUniversalSearchStore=this.createComputedStore((()=>ot.Z.canShowUniversalSearchScopes())),this.isMarketplaceStore=this.createComputedStore((()=>(0,Re.fastCheckGate)("inapp_mui")))}UNSAFE_willMount(){Me.rq()}didMount(){var e;null!==(e=this.environment.mobileNative)&&void 0!==e&&e.api.appComponentMountState&&this.environment.mobileNative.api.appComponentMountState(!0)}willUnmount(){var e;null!==(e=this.environment.mobileNative)&&void 0!==e&&e.api.appComponentMountState&&this.environment.mobileNative.api.appComponentMountState(!1)}renderComponent(){const{isElectronMac:e,isMobile:t}=this.environment.device,{RouterStore:n}=this.environment,{route:i}=n.state,{mainEditorCurrentBlockStore:o,currentSpaceStore:r,currentUserRootStore:s,currentCollectionViewStore:a,currentSpaceViewStore:l}=q.default.state,{publicPageData:c}=it.Z.state,d=this.environment.currentUser.isLoggedIn(),p=Ye.sidebarOpenStore.state,m=(0,Je.in)(this.environment),{state:{shouldShowSidebar:h,shouldShowFrame:g,shouldShowError:v,shouldRedirectFromHome:f}}=this.appRenderStore,S="page"===i.name&&Ce.Z.state.open&&(0,Le.S4)(Ce.Z.state.blockStore),y=!d&&"modal"===i.name&&(i.templateGalleryItem||i.projectManagementLaunch),k=(0,b.routeWithoutSpecificBlock)(i)&&s||"nativeTab"===i.name&&s||"quickSearch"===i.name&&s||s||o,w="nativeTab"===i.name&&"search"===i.tab||"quickSearch"===i.name,j=this.isFullPageAssistantChatEnabledStore.state&&"chat"===i.name,I=this.isMarketplaceStore.state,M="quickSearch"===i.name,P="nativeTab"===i.name,L=(0,nt.Y)("supportsNativeHome"),_=ve("production",this.environment.device)||!(0,nt.Y)("supportsNativeSearch"),Z=(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(D.Ao,{}),(0,oe.jsx)(D.w3,{}),(0,oe.jsx)(D.lG,{}),(0,oe.jsx)(D.jK,{})]});Se.wk({environment:this.environment});const E=Lt.subscriptionDataStoreInstance.state;if(y){const{environment:e}=this;return i.projectManagementLaunch?be.j({currentUserId:void 0,params:{tg:"gallery"}}):i.templateGalleryItem&&be.j({currentUserId:void 0,params:{tg:i.templateGalleryItem}}),void A.c4({environment:e,url:x._j.login})}if("chat"!==i.name||d){if("marketplace"!==i.name||d&&I)return M?(0,oe.jsxs)(nn.Z,{style:tr(this.environment,this.theme),children:[k&&!v&&_&&(0,oe.jsx)(D.yM,{parentStore:k,renderAsPage:!0,renderId:(0,C.ZP)(),quickSearchMode:!0}),"rendered"===q.default.state.renderPhase&&(0,oe.jsx)(D.T3,{})]}):(0,oe.jsxs)(nn.Z,{style:tr(this.environment,this.theme),children:[h&&!t&&(0,oe.jsx)(Jo,{isElectronMac:e,isExpanded:m}),h&&t&&!L&&(0,oe.jsx)(Ke.wT,{}),h&&t&&L&&(0,oe.jsx)(D.nP,{}),(0,oe.jsx)(tn,{}),(0,oe.jsx)(pe.R,{}),"workspaceSetup"===i.name&&(0,oe.jsx)(D.a3,{}),o&&g&&(this.isPageLayoutEditorOpenStore.getState()?(0,oe.jsx)(D.H1,{}):this.isSiteSettingsLayoutEditorOpenStore.getState()?(0,oe.jsx)(D.fo,{}):(0,oe.jsx)(yn.Z,{routerState:this.props.routerState,store:o,collectionViewStore:a})),j&&"chat"===i.name&&(0,oe.jsx)(ke.LazyAssistantFullPageChat,{}),"marketplace"===i.name&&I&&(0,oe.jsx)(Ae,{}),h&&(0,oe.jsx)(D.Fj,{}),S&&(0,oe.jsx)(D.GM,{}),(v||f)&&c&&!S&&(0,oe.jsx)(D.Ie,{route:this.props.routerState.route,publicPageData:c,shouldRedirectFromHome:f}),h&&!(0,Je.Jr)(this.environment)&&p&&(0,oe.jsx)(ir,{}),(0,oe.jsx)(an,{}),this.showHelpButtonStore.state&&(0,oe.jsx)(kn.Z,{}),this.shouldIncludeAssistantButtonStore.state&&(0,oe.jsx)(ke.LazyAssistantMenuPopup,{}),t&&(0,oe.jsx)(Ie.wI,{}),this.shouldMountAssistantPendingEditsElementStore.state&&(0,oe.jsx)(ke.LazyMobileAssistantPendingOperationsCollapsedElement,{}),this.shouldIncludeAssistantButtonStore.state&&(0,oe.jsx)(ke.LazyAssistantOriginElement,{}),this.shouldShowAssistantEphemeralViewModalStore.state&&(0,oe.jsx)(ke.LazyModalOverlayCollectionListView,{}),(0,oe.jsx)(xn,{}),(0,Te.GD)(void 0)&&(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(ye.u7,{}),(0,oe.jsx)(xe.LazyAiEligibilityUpdater,{})]}),(0,Pe.u)(this.environment)&&(0,oe.jsx)(Sn,{}),!t&&"nativeTab"!==this.props.routerState.route.name&&"workspaceSetup"!==this.props.routerState.route.name&&(0,oe.jsx)(Wo,{}),(0,oe.jsx)(Ko.default,{}),"rendered"===q.default.state.renderPhase&&(0,oe.jsxs)(oe.Fragment,{children:[d&&(0,oe.jsxs)(oe.Fragment,{children:[Z,(0,oe.jsx)(Ee,{}),(0,oe.jsx)(Be,{}),(0,oe.jsx)(D.db,{}),(0,oe.jsx)(D.q4,{}),(0,oe.jsx)(D.Q3,{}),(0,oe.jsx)(D.AU,{}),(0,oe.jsx)(D.gS,{}),(0,oe.jsx)(D.aL,{}),(0,oe.jsx)(D.qP,{}),(0,oe.jsx)(D.pn,{}),(0,oe.jsx)(D.ZH,{}),(0,oe.jsx)(D.op,{}),(0,oe.jsx)(D.oC,{}),(0,oe.jsx)(ke.LazyAssistantScopedSearchMenuPopup,{}),Pt.Z.state.open&&(0,oe.jsx)(D.xK,{...Pt.Z.state}),Pt.Z.state.open&&(0,oe.jsx)(D.xK,{...Pt.Z.state}),rt.Z.state.open&&(0,oe.jsx)(D.Tz,{...rt.Z.state}),Ne.Z.state.open&&(0,oe.jsx)(Ue.k,{...Ne.Z.state}),at.Z.state.open&&(0,oe.jsx)(D.EN,{}),(0,oe.jsx)(D.aP,{}),(0,oe.jsx)(D.iL,{}),r&&l&&E&&lt.Z.state.open&&(0,oe.jsx)(D.xm,{data:E,spaceStore:r,spaceViewStore:l}),(0,oe.jsx)(D.V0,{}),r&&E&&Tt.Z.state.open&&(0,oe.jsx)(D.KO,{spaceStore:r,data:E}),r&&E&&(0,oe.jsx)(D.jF,{data:E}),r&&E&&(0,oe.jsx)(D.bj,{data:E}),r?(0,oe.jsx)(D.c5,{}):null,g&&(0,oe.jsx)(D.x1,{}),g&&(0,oe.jsx)(D.mN,{}),g&&(0,oe.jsx)(D.lr,{}),g&&(0,oe.jsx)(D.C6,{}),g&&(0,oe.jsx)(D.c4,{}),g&&(0,oe.jsx)(D.RG,{}),g&&(0,oe.jsx)(Ho,{}),g&&(0,oe.jsx)(D.F7,{}),g&&(0,oe.jsx)(D.vK,{}),g&&(0,oe.jsx)(D.r4,{}),g&&(0,oe.jsx)(tt,{}),g&&(0,oe.jsx)(D.pj,{})]}),(0,oe.jsx)(Ft,{}),(0,oe.jsx)(D.Lq,{}),(0,oe.jsx)(ke.LazyReportBadQnAForm,{}),k&&!v&&_&&(0,oe.jsx)(D.yM,{parentStore:k,renderAsPage:w,renderId:w?(0,C.ZP)():void 0,quickSearchMode:!1}),P&&(0,oe.jsx)(D.Wq,{route:i}),(0,oe.jsx)(D.DG,{}),void 0,(0,oe.jsx)(Qo,{}),void 0]}),(0,oe.jsx)(un.Z,{}),"rendered"===q.default.state.renderPhase&&(0,oe.jsx)(dn,{}),"rendered"===q.default.state.renderPhase&&(0,oe.jsx)(D.T3,{}),(0,oe.jsx)(mn,{}),h&&!t&&o&&(0,oe.jsx)(Ve.$H,{currentBlockStore:o,isElectronMac:e}),(0,oe.jsx)(D.ov,{}),(0,oe.jsx)(bt.Z,{}),(0,oe.jsx)(Ct.Z,{}),(0,oe.jsx)(Mt.Z,{}),(0,oe.jsx)(Go.Z,{subscriptionDataStore:Lt.subscriptionDataStoreInstance}),(0,oe.jsx)(It,{}),(0,oe.jsx)(St,{}),(0,oe.jsx)(je.j,{}),(0,oe.jsx)(Vt,{}),(0,oe.jsx)(In,{}),(0,oe.jsx)(Ie.AZ,{}),this.canShowUniversalSearchStore&&(0,oe.jsx)(we,{}),We.I.state.open&&(0,oe.jsx)(qe,{...We.I.state})]});{const e=function(e){const t=x._j.marketplace;return(0,T.bf)({url:t,query:{}})}(),t=(0,T.bf)({url:`${u.default.domainBaseUrl}${x._j.login}`,query:{redirectURL:e}});A.c4({environment:this.environment,url:t,redirect:!0})}}else{const e=(0,me.u3)(i),t=(0,T.bf)({url:`${u.default.domainBaseUrl}${x._j.login}`,query:{redirectURL:e}});A.c4({environment:this.environment,url:t,redirect:!0})}}}function Jo(e){let{isElectronMac:t,isExpanded:n}=e;const o=(0,H.O7)(),r=(0,d.VK)((()=>void 0!==Me.k_(o).state),[o]),s=(0,d.VK)((()=>(0,_e.Sr)(o)),[o]),a=(0,i.useCallback)((()=>(0,oe.jsx)(Qe,{skipFadeinDelay:!0})),[]);return(0,oe.jsx)(Ke.wU,{isElectronMac:t,isExpanded:n,renderLoading:a,forceRenderLoading:!r&&!s})}Xo.displayName="App";const er=Xo;function tr(e,t){var n;const{mainEditorCurrentBlockStore:i}=q.default.state,o=(0,De.WE)(i),r=e.device.isPhone;return{width:"100vw",height:"100%",position:"relative",display:"flex",flex:1,background:Boolean(null===(n=st.Z.state.preferences)||void 0===n?void 0:n.isVibrancyEnabled)?"rgba(0, 0, 0, 0)":o?(0,Oe.$1)({theme:t,isPhone:r}):t.contentBackground}}function nr(){$e.close()}function ir(){const e=(0,H.O7)(),t=(0,d.VK)((()=>function(e){return{position:"absolute",top:0,left:(0,Je.qG)(e),right:0,bottom:0,zIndex:fe.l6}}(e)),[e]);return(0,oe.jsx)("div",{style:t,onClick:nr})}var or=n(3403);var rr=n(940754);function sr(e){let{payload:t}=e;const n=(0,H.O7)(),[o,r]=(0,i.useState)(t?{type:"unconfirmed"}:{type:"error"}),s=(0,i.useCallback)((async()=>{if(!t)return void r({type:"error"});r({type:"loading"});const e=await async function(e){let{environment:t,payload:n}=e;const i=await kt.unsubscribeFromEmails(t,{payload:n});return"success"===i.type?{type:"success",spaceName:i.data.spaceName}:{type:"error"}}({environment:n,payload:t});r("error"===e.type?{type:"error"}:{type:"confirmed",spaceName:e.spaceName})}),[n,t]),a=(0,G.yK)((()=>({confirmUnsubscribeDescription:{marginBottom:10}})),[]);switch(o.type){case"loading":return(0,oe.jsx)(rr.Z,{children:(0,oe.jsx)(j.FormattedMessage,{defaultMessage:"Loading…",id:"confirmUnsubscribePage.loadingMessage"})});case"unconfirmed":return(0,oe.jsxs)(rr.Z,{children:[(0,oe.jsx)("div",{style:a.confirmUnsubscribeDescription,children:(0,oe.jsx)(j.FormattedMessage,{defaultMessage:"Are you sure you want to unsubscribe from this list?",id:"unsubscribeFromEmails.workspace.confirmUnsubscribeDescription"})}),(0,oe.jsx)(te.Z,{isLarge:!0,onClick:s,analyticsName:"unsubscribe_confirm",children:(0,oe.jsx)(j.FormattedMessage,{id:"confirmUnsubscribePage.confirmButton",defaultMessage:"Unsubscribe"})})]});case"confirmed":return(0,oe.jsx)(rr.Z,{children:(0,oe.jsx)(j.FormattedMessage,{defaultMessage:"You have successfully unsubscribed from emails for {workspaceName}",values:{workspaceName:(0,oe.jsx)("b",{children:o.spaceName})},id:"unsubscribeFromEmails.workspace.message"})});case"error":return(0,oe.jsx)(rr.Z,{children:(0,oe.jsx)(j.FormattedMessage,{id:"confirmUnsubscribePage.errorMessage",defaultMessage:"Could not unsubscribe."})});default:(0,ut.t1)(o)}}n(782801);var ar=n(632441),lr=n(973420);const cr=(0,j.defineMessages)({pageTitle:{id:"desktopEmailConfirmPage.title",defaultMessage:"Please check your email to confirm"},pageCaption:{id:"desktopEmailConfirmPage.subtitle",defaultMessage:"Almost there!"},pageDescription1:{id:"desktopEmailConfirmPage.description1",defaultMessage:"Please check your email and click the link to confirm."},pageDescription2:{id:"desktopEmailConfirmPage.description2",defaultMessage:"Once confirmed, you'll be able to return to the desktop app to complete signup."},checkYourGmail:{id:"desktopEmailConfirmPage.button.checkYourGmail",defaultMessage:"Check your Gmail inbox"}});function dr(){return(0,oe.jsxs)("svg",{style:{display:"block",height:42},viewBox:"0 0 87 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,oe.jsx)("path",{d:"M1.805 1.294l16.6-1.226c2.039-.175 2.563-.057 3.845.875l5.299 3.733c.874.642 1.165.817 1.165 1.516v20.473c0 1.283-.466 2.042-2.097 2.158L7.34 29.99c-1.224.058-1.807-.117-2.448-.934L.99 23.982c-.7-.934-.99-1.633-.99-2.45V3.334c0-1.049.466-1.924 1.805-2.04z",fill:"#fff"}),(0,oe.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.405.068l-16.6 1.226C.466 1.41 0 2.285 0 3.334v18.198c0 .817.29 1.516.99 2.45l3.902 5.074c.641.817 1.224.992 2.448.934l19.277-1.167c1.63-.116 2.097-.875 2.097-2.158V6.192c0-.663-.262-.854-1.033-1.42a85.473 85.473 0 01-.133-.096L22.25.943c-1.282-.932-1.806-1.05-3.845-.875zM7.776 5.857c-1.574.106-1.931.13-2.825-.597L2.678 3.452c-.231-.234-.115-.526.467-.584l15.958-1.166c1.34-.117 2.038.35 2.562.758l2.737 1.983c.117.059.408.408.058.408l-16.48.992-.204.014zM5.941 26.49V9.11c0-.759.233-1.109.931-1.168L25.8 6.834c.642-.058.932.35.932 1.108v17.264c0 .759-.117 1.401-1.165 1.459l-18.113 1.05c-1.048.058-1.513-.291-1.513-1.225zm17.88-16.448c.116.525 0 1.05-.525 1.11l-.873.173v12.832c-.758.408-1.456.641-2.039.641-.932 0-1.165-.292-1.863-1.166l-5.709-8.982v8.69l1.806.409s0 1.05-1.457 1.05l-4.017.233c-.117-.234 0-.817.407-.933l1.049-.291v-11.49L9.144 12.2c-.117-.525.174-1.283.99-1.342l4.31-.29 5.94 9.098v-8.049l-1.514-.174c-.117-.643.349-1.11.931-1.167l4.02-.234z",fill:"#000"}),(0,oe.jsx)("path",{className:"fill",d:"M41.434 21.251v-7.91h.137l5.704 7.91h1.796V9.627h-1.997v7.902h-.137l-5.704-7.902H39.43V21.25h2.005zM54.715 21.429c2.635 0 4.238-1.724 4.238-4.584 0-2.852-1.611-4.584-4.238-4.584-2.618 0-4.237 1.74-4.237 4.584 0 2.86 1.595 4.584 4.237 4.584zm0-1.676c-1.393 0-2.19-1.063-2.19-2.908 0-1.837.797-2.908 2.19-2.908 1.386 0 2.183 1.071 2.183 2.908 0 1.845-.789 2.908-2.183 2.908zM60.778 10.28v2.215h-1.393v1.595h1.393v4.809c0 1.708.806 2.393 2.828 2.393.386 0 .757-.04 1.047-.097v-1.563c-.242.024-.395.04-.677.04-.837 0-1.208-.386-1.208-1.256V14.09h1.885v-1.595h-1.885v-2.216h-1.99zM65.85 21.251h1.99v-8.813h-1.99v8.813zm.991-10.27c.66 0 1.192-.533 1.192-1.201 0-.669-.531-1.209-1.192-1.209-.652 0-1.192.54-1.192 1.209 0 .668.54 1.2 1.192 1.2zM73.299 21.429c2.634 0 4.237-1.724 4.237-4.584 0-2.852-1.611-4.584-4.237-4.584-2.619 0-4.238 1.74-4.238 4.584 0 2.86 1.595 4.584 4.238 4.584zm0-1.676c-1.394 0-2.192-1.063-2.192-2.908 0-1.837.798-2.908 2.192-2.908 1.385 0 2.183 1.071 2.183 2.908 0 1.845-.79 2.908-2.183 2.908zM78.725 21.251h1.998V16.12c0-1.297.75-2.119 1.941-2.119 1.217 0 1.78.677 1.78 2.022v5.228h1.999v-5.703c0-2.103-1.072-3.287-3.037-3.287-1.314 0-2.2.604-2.619 1.587h-.137v-1.41h-1.925v8.813z",fill:"#000"})]})}function ur(){return(0,oe.jsx)("div",{style:{padding:24},children:(0,oe.jsx)(dr,{})})}function pr(e){const{experimentVariant:t}=e;return(0,oe.jsx)("div",{style:{width:800,height:"80vh",margin:"0 auto"},children:(0,oe.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"80vh"},children:[(0,oe.jsxs)(lr.sg,{gap:16,padding:16,children:[(0,oe.jsx)("div",{style:{fontSize:36,fontWeight:X.Z.fontWeight.bold},children:(0,oe.jsx)(j.FormattedMessage,{...cr.pageTitle})}),(0,oe.jsx)("div",{style:{fontWeight:X.Z.fontWeight.bold},children:(0,oe.jsx)(j.FormattedMessage,{...cr.pageCaption})}),(0,oe.jsx)("div",{children:(0,oe.jsx)(j.FormattedMessage,{...cr.pageDescription1})}),(0,oe.jsx)("div",{children:(0,oe.jsx)(j.FormattedMessage,{...cr.pageDescription2})}),"with_gmail_cta"===t&&(0,oe.jsx)(te.Z,{style:{width:"fit-content"},isLarge:!0,onClick:()=>{window.location.href="https://mail.google.com/mail/u/0/#search/Your+Notion+signup+code+is"},children:(0,oe.jsx)(j.FormattedMessage,{...cr.checkYourGmail})})]}),(0,oe.jsx)(lr.sg,{children:(0,oe.jsx)("img",{style:{width:350},src:pn.Z.images.onboarding.couch2Png})})]})})}function mr(){const e=(0,H.O7)(),[t,n]=(0,i.useState)(null);return(0,i.useEffect)((()=>{try{const t=new URLSearchParams(window.location.search).get("state");if(!t)return;const i=JSON.parse(atob(t));i.experimentVariant&&n(i.experimentVariant),i.email&&i.deviceId&&ar.$k(e,{desktopAppRerouteEmail:i.email,desktopAppDeviceId:i.deviceId})}catch(t){}}),[e,n]),(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(ur,{}),(0,oe.jsx)(pr,{experimentVariant:t})]})}n(842875),n(823586),n(333626),n(15950);var hr=n(813559),gr=n(44819);function vr(e){const{preventFrontRedirect:t}=e,n=(0,H.O7)(),{pathname:i,search:o,hash:r}=window.location;if(!t&&(0,gr.XR)(n,i)){const e=o.length>0?`${o}&${hr.AM}=1`:`?${hr.AM}=1`;return window.location.href=i+e+r,null}return(0,oe.jsx)(D.TG,{isSignup:!n.currentUser.isLoggedIn()})}var fr=n(966673),Sr=n(426198);function br(e){const t=(0,i.useRef)(new Map),n=(0,i.useCallback)((()=>{const n=Array.from(t.current.values()).filter((e=>e.isSpawned)),i=n.length-e.maxPreferredIFrames;if(i<=0)return;const o=n.filter((e=>!e.isVisible));o.sort(((e,t)=>e.latestTimestamp-t.latestTimestamp));for(const e of o.slice(0,i))e.isSpawned=!1,e.onVisibilityChange(!1)}),[e.maxPreferredIFrames]),o=(0,i.useCallback)((e=>{for(const n of e){if(!(n.target instanceof HTMLElement))continue;const e=t.current.get(n.target);e&&(e.isVisible=n.isIntersecting,e.latestTimestamp=n.time,e.isVisible&&!e.isSpawned&&(e.isSpawned=!0,e.onVisibilityChange(!0)))}n()}),[n]),r=(0,i.useRef)(void 0!==window.IntersectionObserver?new IntersectionObserver(o):null);(0,i.useEffect)((()=>()=>{r.current&&(r.current.disconnect(),r.current=null)}),[]);const s=(0,fr.D9)(e.maxPreferredIFrames);(0,i.useEffect)((()=>{s&&e.maxPreferredIFrames<s&&n()}),[n,e.maxPreferredIFrames,s]);const a=(0,i.useMemo)((()=>({track:(e,n)=>{r.current?(t.current.set(e,{isVisible:!1,isSpawned:!1,latestTimestamp:0,onVisibilityChange:Nt.Ds(n,50)}),r.current.observe(e)):Sr.uf.track(e,n)},untrack:e=>{r.current?(r.current.unobserve(e),t.current.delete(e)):Sr.uf.untrack(e)}})),[]);return(0,oe.jsx)(Sr.Lr.Provider,{value:a,children:e.children})}function xr(e){let t=e.isMobile?10:50;return e.ramSizeInGB&&(t=Math.floor(2*e.ramSizeInGB)),{maxPreferredIFrames:t}}var yr=n(825777);const kr=function(e){const t={position:"absolute",top:0,left:0,bottom:0,right:0};return(0,H.O7)().currentUser.isLoggedIn()?(0,oe.jsx)("div",{style:t,children:(0,oe.jsx)(yr.Z,{style:{width:"100%",height:"100%"},spinnerSize:yn.T,showSpinnerTimeout:500})}):null};var wr=n(942402),jr=n(483785),Ir=n(584076);const Cr=function(e){let{redirect:t}=e;const n=(0,G.Fg)(),o=(0,H.O7)();return(0,i.useEffect)((()=>{Mr(t,o)}),[o,t]),(0,oe.jsxs)(rr.Z,{children:[(0,oe.jsx)("div",{style:{color:n.regularTextColor},children:(0,oe.jsx)(j.FormattedMessage,{defaultMessage:"Redirecting to your Notion app…",id:"webApp.redirectingToDesktop.message"})}),(0,oe.jsx)(Ir.Z,{onClick:()=>Mr(t,o),style:{maxWidth:300,textAlign:"center",textDecoration:"underline",color:n.lightTextColor},children:(0,oe.jsx)(j.FormattedMessage,{defaultMessage:"If you weren't redirected, click here.",id:"webApp.redirectingToDesktop.directLink.message"})}),(0,oe.jsx)(Ir.Z,{href:t,style:{maxWidth:300,textAlign:"center",textDecoration:"underline",color:I.ZP.uiGray},children:(0,oe.jsx)(j.FormattedMessage,{defaultMessage:"Or, continue in your browser",id:"webApp.redirectingToDesktop.continueInBrowser.message"})})]})};function Mr(e,t){A.RX({url:e,environment:t})}var Tr=n(593214),Pr=n(924211),Lr=n(696454),_r=n(547307),Zr=n(957400),Er=n(24201),Ar=n(730459),Rr=n(468695),Br=n.n(Rr),Vr=n(318937),Fr=n(512955),Ur=n(535057);const Dr=(0,Re.shouldUseNewStatsigInit)()?function(){const e=(0,H.O7)(),t=e.currentUser.id,[n]=(0,Y.r5)((async()=>await Fr.getExperimentDeviceId(e)),[e]),[o]=(0,Y.r5)((async()=>await Fr.getBrowserId(e)),[e]),[{value:r}]=(0,Y.r5)((async()=>await Vr.s({environment:e,userId:t})),[e,t]),s=(0,d.VK)((()=>{if("resolved"===n.status&&"resolved"===o.status)return(0,Re.createStatsigUser)(function(e){var t,n,i;const{environment:o,deviceId:r,browserId:s,userSophisticationLevel:a}=e,{device:l,currentUser:c}=o,{currentUserStore:d,currentUserSettingsStore:u,currentSpaceStore:p}=q.default.getState(),m=c.id,h=null==d?void 0:d.getEmail(),g=null==p?void 0:p.id,{function:v,role:f,companySize:S,useCases:b}=Ai.kO();return{userId:m,device:l,spaceId:g,userEmail:h,deviceId:r,browserId:s,locale:null==u||null===(t=u.getSettings())||void 0===t?void 0:t.preferred_locale,spaceCreatedTime:null==p?void 0:p.getCreatedTime(),spaceCreatedDate:null!=p&&p.getCreatedTime()?xt.ou.fromMillis(null==p?void 0:p.getCreatedTime()).toFormat("yyyy-MM-dd"):void 0,subscriptionTier:Ur.zt(),isSalesAssistedPlan:Ur.lz(),planType:null==p?void 0:p.getPlanType(),signupTime:null==u||null===(n=u.getSettings())||void 0===n?void 0:n.signup_time,domainType:null==u||null===(i=u.getSettings())||void 0===i?void 0:i.domain_type,persona:v,teamRole:f,useCases:b,companySize:S,userSophisticationLevel:a}}({environment:e,deviceId:n.value,browserId:o.value,userSophisticationLevel:r}))}),[e,n,o,r]),a=(0,i.useRef)(Re.StatsigInitializer.statsigUserOnInitialize);(0,i.useEffect)((()=>{!async function(){s&&(Nt.Xy(s,a.current)||(a.current=s,await Br().updateUser(s)))}()}),[s])}:()=>{};var Or=n(978354),Nr=n(977788),zr=n(745483);function qr(e){const t=(0,H.Fy)(),n=(0,d.VK)((()=>p.default.checkGate({gateName:"inert_html_attribute"})),[]),i=(0,d.VK)((()=>zr.Z.state.openModals.size>0),[]),o={inert:!t.isMobile&&n&&i?"true":null};return(0,oe.jsx)("div",{style:e.style,...o,children:e.children})}var Wr=n(591948),Kr=n(231104),$r=n(917294);const Hr=function(){const e=(0,d.VK)((()=>Kr.Z.state),[]);return(0,oe.jsx)(mt.Z,{open:e.open,render:()=>(0,oe.jsx)(Qr,{}),overlayZIndex:fe._})};function Gr(e){return{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minWidth:180,padding:"18px 24px 20px",textAlign:"center",maxWidth:e.device.isMobile?"300px":"100%"}}function Yr(e){return{display:"flex",alignItems:"center",fontSize:14,color:e.mediumTextColor}}function Qr(){const e=(0,G.Fg)(),t=(0,H.O7)(),n=(0,d.VK)((()=>Kr.Z.state),[]),{targetRecordId:i}=n,o=(0,d.VK)((()=>function(e){return void 0!==e&&Boolean($r.Z.state[e])}(i)),[i]);return n.open?(0,oe.jsxs)("div",{style:Gr(t),children:[(0,oe.jsxs)("div",{style:Yr(e),children:[n.message,(0,oe.jsx)(ei.Z,{style:{marginLeft:6}})]}),o&&i&&(0,oe.jsx)(Wr.Z,{targetRecordId:i,style:{marginTop:10}})]}):null}var Xr=n(118466),Jr=n(845369),es=n(476870);function ts(){return 1}function ns(e){let{id:t,targetRenderPhase:n="all",samplePercent:o=ts(),children:r}=e;const s=(0,H.O7)(),a=(0,i.useCallback)(((e,t,i,r,a,l)=>{(0,es.lB)(o)&&("all"!==n&&t!==n||Ar.K4(s,`${Jr.Pu}.${e}`,{time:i,render_phase:t}))}),[s,n,o]),[l]=(0,i.useState)(Xr.Z.withListenerIgnored((()=>p.default.checkGate({gateName:"client-performance-profiler"}))));return l?(0,oe.jsx)(i.Profiler,{id:t,onRender:a,children:r}):(0,oe.jsx)(oe.Fragment,{children:r})}function is(e){let{children:t}=e;const n=(0,j.useIntl)(),o=(0,H.O7)(),r=(0,G.Fg)();(0,Yi.Z)((()=>{const{device:e,mobileNative:t}=o;if(Lr.mc(o),Zr.Yh(o),t&&t.hideSplashscreen(),e.isMobile){const e=document.body.parentElement;e&&e.classList.add(qt.aiP)}Ar.pH(o),v.rQ({device:e,config:u.default,cookieService:o.cookieService}),e.isElectronMac&&L.getAppPath().then((e=>{e&&(e.startsWith("/Volumes/Notion Installer")||e.startsWith("/Volumes/Notion Dev Installer")||e.startsWith("/Volumes/Notion Stg Installer"))&&_r.showMessage({message:n.formatMessage({defaultMessage:"Please move the Notion.app into the /Applications folder for the auto-updater to work.",id:"notionAppContainer.dialog.notionAppNotInApplications.message"})})})),Pr.DM(g.SP),(0,Tr.yN)(window.location.href)})),Dr(),(0,i.useEffect)((()=>{const{device:e}=o;"external"===(0,b.parseRoute)({url:window.location.href,isMobile:e.isMobile,baseUrl:u.default.domainBaseUrl,publicDomainName:u.default.publicDomainName,protocol:u.default.protocol,currentUrl:window.location.href}).name&&_r.showDialog({message:"Mismatch between origin and baseUrl (dev).",showCancel:!1,keepFocus:!1,items:[{label:(0,oe.jsx)(j.FormattedMessage,{defaultMessage:"Okay",id:"notionAppContainer.dialog.mismatchedOriginURL.okayButton.label"}),onAccept:()=>{const e=T.O_({relativeUrl:T.T1(window.location.href),baseUrl:u.default.domainBaseUrl}),t=T.Qc(e);t.protocol=T.Qc(window.location.href).protocol,window.location.href=T.WU(t)}}]})}),[o]),(0,i.useEffect)((()=>{const{mobileNative:e}=o;null==e||e.markTransitionReady({type:"mount"})}),[o]);const s="light"===r.mode?qt.MsS:qt.Xj_,a=m(o),l=(0,G.yK)((e=>({root:{...(0,f.N7)(g.SP),color:e.regularTextColor,WebkitFontSmoothing:"auto",backgroundColor:"rgba(0,0,0,0)",...a&&{height:"calc(100% - 32px)"}}})),[a]);return(0,oe.jsxs)(ns,{id:"app",targetRenderPhase:"mount",children:[(0,oe.jsx)(Er.Z,{}),(0,oe.jsxs)("div",{style:l.root,className:["notion-app-inner",s].join(" "),children:[(0,oe.jsx)(qr,{style:{height:"100%"},children:t}),(0,oe.jsx)(Nr.Z,{}),(0,oe.jsx)(Or.Z,{}),(0,oe.jsx)(Hr,{})]})]})}var os=n(294273),rs=n(412714);function ss(){const e=(0,H.O7)();return(0,Yi.Z)((()=>{const t=M.u5({schemeUrl:window.location.href,baseUrl:u.default.domainBaseUrl});rs.D({environment:e,url:t}),os.vq(),A.c4({environment:e,url:x._j.root,redirect:!0})})),null}class as extends h.Z{constructor(){super(...arguments),this.didCatchError=!1,this.caughtErrorId=void 0,this.openSupportMessages=()=>{F.j({environment:this.environment,from:"page_error"})},this.handleOpenNativeLink=e=>{"string"==typeof e?this.handleOpenNativeLinkV2(e,!1,!1):this.handleOpenNativeLinkV2(e.url,!1,!1)},this.handleOpenNativeLinkV2=(e,t,n)=>{const{RouterStore:i}=this.environment,o=M.RD({url:e,protocol:u.default.protocol,baseUrl:u.default.domainBaseUrl}),r=M.u5({schemeUrl:o,baseUrl:u.default.domainBaseUrl}),s=b.parseRoute({url:r,baseUrl:u.default.domainBaseUrl,publicDomainName:u.default.publicDomainName,isMobile:this.environment.device.isMobile,protocol:u.default.protocol,currentUrl:window.location.href});(this.environment.device.isAndroid||t)&&E.Hu({RouterStore:i,currentUserId:this.environment.currentUser.id}),this.environment.mobileNative&&this.environment.mobileNative.closeInAppBrowser(),"googleAuthCallback"!==s.name&&"samlAuthCallback"!==s.name?A.c4({environment:this.environment,url:r,redirect:t,updateMobileTabbedRouterArgs:{clearNativeRootPageOverride:n},queryId:"page"===s.name?s.queryId:void 0}):A.c4({environment:this.environment,url:r})}}didMount(){this.environment.currentUser.isLoggedIn()&&q.default.waitUntil((()=>{const e=q.default.state.currentUserSettingsStore,t=(null==e?void 0:e.isDefined())??!1;if(e&&t){const t=e.getSettings(),n=null==t?void 0:t.disable_auto_set_timezone;t&&!n&&B.wk({environment:this.environment,userSettingsStore:e})}return t}))}UNSAFE_willMount(){const{RouterStore:e,currentUser:t}=this.environment,n=t.id;window.addEventListener("beforeunload",(()=>{E.Vz({historyId:e.state.id,currentUserId:n})})),window.onpopstate=async t=>{const n=window.location.href,i=t.state?t.state.currentUserId:void 0;let o=this.environment;i&&i!==this.environment.currentUser.id&&(o=await V.x({environment:o,newCurrentUserId:i})),W.Z.reset();const r=e.state.route,s=b.parseRoute({url:n,isMobile:o.device.isMobile,baseUrl:u.default.domainBaseUrl,publicDomainName:u.default.publicDomainName,protocol:u.default.protocol,currentUrl:window.location.href}),a="page"===r.name&&"page"===s.name&&r.blockId===s.blockId,l="onboarding"!==r.name&&"onboarding"===s.name;E.Vz({historyId:e.state.id,currentUserId:i}),await R.ep({environment:o,id:t.state&&t.state.id||(0,C.ZP)(),action:"pop",href:n}),l&&!this.environment.device.isMobileNative&&A.c4({environment:o,url:x._j.root}),a&&A.Oj(o)},this.environment.mobileNative&&this.environment.mobileNative.subscribeToOpenLink(this.handleOpenNativeLinkV2),L.subscribeToProtocolUrl(this.handleOpenNativeLink),L.subscribeToSettingsMenuItem(ps),L.navigationReady(!0),L.onNewWindow(((e,t)=>{e.preventDefault(),A.c4({environment:this.environment,url:t,openInNew:"tab"})}))}componentDidCatch(e,t){console.error("Client crash during React render:",e),this.caughtErrorId=w.rn(e,{from:"Router",type:"ClientCrash",data:{miscDataToConvertToString:t}}),this.didCatchError=!0,this.forceUpdate(),L.navigationReady(!1)}renderComponent(){return(0,oe.jsx)(j.IntlProvider,{defaultLocale:"en-US",locale:g.SP,messages:g.sY,children:(0,oe.jsx)(br,{...xr(this.environment.device),children:this.renderRouteOrError()})})}renderRouteOrError(){return this.didCatchError?(0,oe.jsxs)("div",{style:cs,children:[(0,S.H)({width:42,height:42}),(0,oe.jsxs)("div",{style:ds,children:[(0,oe.jsx)("div",{children:(0,oe.jsx)(j.FormattedMessage,{defaultMessage:"Oops! Something went wrong.",id:"router.renderErrorPage.message.part1"})}),(0,oe.jsx)("div",{children:(0,oe.jsx)(j.FormattedMessage,{defaultMessage:"Please refresh and try again or <textlink>message support</textlink>.",id:"router.renderErrorPage.message.part2",values:{textlink:e=>(0,oe.jsx)(wr.Z,{onClick:this.openSupportMessages,children:e})}})}),this.caughtErrorId&&(0,oe.jsx)("div",{style:us,children:(0,oe.jsx)(j.FormattedMessage,{defaultMessage:"Error ID: {errorId}",id:"router.renderErrorPage.message.errorId",values:{errorId:this.caughtErrorId.slice(0,8)}})})]}),(0,oe.jsx)(te.Z,{isLarge:!0,onClick:()=>window.location.reload(),children:(0,oe.jsx)(j.FormattedMessage,{defaultMessage:"Refresh",id:"router.renderErrorPage.reloadButton.label"})})]}):(0,oe.jsx)(is,{children:this.renderRoute()})}renderRoute(){const{RouterStore:e}=this.environment,t=e.state;if("root"!==t.route.name&&"page"!==t.route.name&&"space"!==t.route.name&&(_.setInitialRenderCompleted(),q.default.setState({...q.default.state,renderPhase:"rendered"})),this.environment.currentUser.isLoggedIn()||"page"===t.route.name||"space"===t.route.name||v.j({device:this.environment.device,event:{facebook:{eventName:"PageView",data:{content_name:window.location.href}},google:{eventName:"pageView",path:window.location.pathname}},cookieService:this.environment.cookieService}),this.environment.currentUser.isLoggedIn()&&q.default.state.currentUserSettingsStore){const{currentUserSettingsStore:e}=q.default.state;U.dM(this.environment,e)}const{device:i}=this.environment;if(i.isNative&&b.nonNativeRoutes[t.route.name])return(0,oe.jsx)(ss,{});if("front"===t.route.name)return(0,oe.jsx)(vr,{preventFrontRedirect:t.route.alreadyRedirected});if("root"===t.route.name)return(0,oe.jsx)(kr,{route:t.route});if("nativeRedirect"===t.route.name)return(0,oe.jsx)(Cr,{redirect:t.route.redirect});if("login"===t.route.name)return(0,oe.jsx)(D.R7,{isSignup:!1,email:t.route.email,redirectURL:t.route.redirectURL});if("marketplacePurchase"===t.route.name)return(0,oe.jsx)(D.Rc,{productId:t.route.productId});if("desktopEmailConfirm"===t.route.name)return(0,oe.jsx)(mr,{});if("teamsInvite"===t.route.name){const{teamId:e}=t.route;return P.uA(this.environment,{teamId:e}),(0,oe.jsx)(jr.Z,{fetch:async()=>{const t=new K.zX(this.environment,{table:y.e0,id:e});await t.load()},render:()=>(0,oe.jsx)(ue,{teamId:e})})}if("signup"===t.route.name)return(0,oe.jsx)(D.R7,{isSignup:!0,email:t.route.email});if("unsubscribe"===t.route.name)return(0,oe.jsx)(sr,{payload:t.route.payload});if("onboarding"===t.route.name)return(0,oe.jsx)(D._C,{});if("upcomingInvoice"===t.route.name)return(0,oe.jsx)(D.AM,{route:t.route});if("invoiceById"===t.route.name)return(0,oe.jsx)(D.AM,{route:t.route});if("settingsConsoleOrganization"===t.route.name){if(this.environment.currentUser.isLoggedIn())return(0,oe.jsx)(D.hq,{organizationId:t.route.organizationId,tabRoute:t.route.tabRoute,properties:t.route.properties,params:t.route.params});{const e=T.bf({url:`${x._j.settingsConsoleOrganization}/${t.route.organizationId}`}),n=T.bf({url:`${u.default.domainBaseUrl}${x._j.login}`,query:{redirectURL:e}});A.c4({environment:this.environment,url:n,redirect:!0})}}if("settingsConsoleWorkspace"===t.route.name&&A.c4({environment:this.environment,url:x._j.root}),t.route.name,t.route.name,"admin"===t.route.name&&u.default.isAdminMode)return(0,oe.jsx)(jr.Z,{fetch:()=>Promise.all([n.e(62743),n.e(40782),n.e(62069),n.e(28971),n.e(84162),n.e(10637),n.e(12328)]).then(n.bind(n,168611)),render:e=>{let{default:t}=e;return(0,oe.jsx)(t,{})}});if("adminListData"===t.route.name){const{category:e}=t.route;if(u.default.isAdminMode)return(0,oe.jsx)(jr.Z,{fetch:()=>Promise.all([n.e(62743),n.e(40782),n.e(62069),n.e(28971),n.e(84162),n.e(10637),n.e(12328)]).then(n.bind(n,665585)),render:t=>{let{default:n}=t;return(0,oe.jsx)(n,{category:e})}})}if("adminSingleRecord"===t.route.name&&u.default.isAdminMode){const{id:e,table:i}=t.route;return(0,oe.jsx)(jr.Z,{fetch:()=>Promise.all([n.e(62743),n.e(40782),n.e(62069),n.e(28971),n.e(84162),n.e(10637),n.e(33854)]).then(n.bind(n,348807)),render:t=>{let{default:n}=t;return(0,oe.jsx)(n,{table:i,id:e})}})}if("oauthAuthorization"===t.route.name){const{responseType:e,redirectUri:i,integrationId:o,state:r,owner:s,userId:a,spaceId:l}=t.route;return(0,oe.jsx)(jr.Z,{fetch:()=>Promise.all([n.e(62743),n.e(52774),n.e(22709),n.e(86993),n.e(3370)]).then(n.bind(n,818330)),render:t=>{let{default:n}=t;return(0,oe.jsx)(n,{responseType:e,redirectUri:i,integrationId:o,state:r,owner:s,userId:a,spaceId:l})}})}if("notionCalendarAuthorization"===t.route.name){const{csrf:e,calendarCsrf:i,redirectUri:o,spaceId:r,state:s}=t.route;return(0,oe.jsx)(jr.Z,{fetch:()=>n.e(7304).then(n.bind(n,367943)),render:t=>{let{default:n}=t;return(0,oe.jsx)(n,{csrf:e,calendarCsrf:i,redirectUri:o,spaceId:r,state:s})}})}if("initiateExternalAuthentication"===t.route.name){const{notion_user_id:e,notion_workspace_id:i,notion_last_visited_url:o,notion_authorization_code:r,external_object_instance_block_id:s,callback_type:a,integration_id:l,redirectToAuth:c}=t.route;return(0,oe.jsx)(jr.Z,{fetch:()=>n.e(91023).then(n.bind(n,384750)),render:t=>{let{default:n}=t;return(0,oe.jsx)(n,{notion_user_id:e,notion_workspace_id:i,notion_last_visited_url:o,notion_authorization_code:r,external_object_instance_block_id:s,callback_type:a,integration_id:l,redirectToAuth:c})}})}if("initiateExternalAuthenticationFromDesktop"===t.route.name){const{redirectUri:e}=t.route;if(this.environment.currentUser.isLoggedIn())return(0,oe.jsx)(jr.Z,{fetch:()=>n.e(73871).then(n.bind(n,894810)),render:t=>{let{default:n}=t;return(0,oe.jsx)(n,{redirectUri:e})}});{const t=T.bf({url:`${u.default.domainBaseUrl}${x._j.initiateExternalAuthenticationFromDesktop}`,query:{redirectUri:e}}),n=T.bf({url:`${u.default.domainBaseUrl}${x._j.login}`,query:{redirectURL:t}});k.hw(),A.c4({environment:this.environment,url:n,redirect:!0})}}if("myIntegrations"===t.route.name)return"pointer"in t.route?(0,oe.jsx)(D.FN,{botOrIntegrationPointer:t.route.pointer}):(0,oe.jsx)(D.UM,{});if("myIntegrationsLab"===t.route.name)return(0,oe.jsx)(D.pD,{integrationPointer:t.route.pointer});if("inAppTemplateSubmission"===t.route.name&&A.c4({environment:this.environment,url:x._j.creatorProfileTemplates,redirect:!0}),"inAppTemplateCreatorSubmission"===t.route.name&&A.c4({environment:this.environment,url:x._j.creatorProfile,redirect:!0}),"creatorProfileAnalytics"===t.route.name&&A.c4({environment:this.environment,url:x._j.creatorProfile,redirect:!0}),"creatorProfile"===t.route.name||"creatorProfileTemplates"===t.route.name||"creatorProfileIntegrations"===t.route.name){if(this.environment.currentUser.isLoggedIn())return"pointer"in t.route?(0,oe.jsx)(O,{botOrIntegrationPointer:t.route.pointer}):(0,oe.jsx)(O,{botOrIntegrationPointer:void 0});{const e=T.bf({url:`${x._j[t.route.name]}`}),n=T.bf({url:`${u.default.domainBaseUrl}${x._j.login}`,query:{redirectURL:e}});A.c4({environment:this.environment,url:n,redirect:!0})}}if("localizedTemplates"===t.route.name){if(this.environment.currentUser.isLoggedIn())return(0,oe.jsx)(N,{});{const e=T.bf({url:`${x._j[t.route.name]}`}),n=T.bf({url:`${u.default.domainBaseUrl}${x._j.login}`,query:{redirectURL:e}});A.c4({environment:this.environment,url:n,redirect:!0})}}return"studentGroupSignup"===t.route.name?(0,oe.jsx)($,{}):"startupsApplication"===t.route.name?(0,oe.jsx)(z,{formType:"startups"}):"notFound"===t.route.name?(0,oe.jsx)(D.Ie,{route:t.route,publicPageData:void 0}):"blank"===t.route.name?(0,oe.jsx)(D.Lf,{}):"page"===t.route.name||"space"===t.route.name||"nativeTab"===t.route.name||"workspaceSetup"===t.route.name||"modal"===t.route.name||"quickSearch"===t.route.name||"chat"===t.route.name||"form"===t.route.name||"marketplace"===t.route.name?(0,oe.jsx)(er,{routerState:t}):(0,oe.jsx)(or.Z,{})}}as.displayName="Router";const ls=as,cs={width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",paddingBottom:100,...(0,f.N7)(g.SP)},ds={fontSize:14,textAlign:"center",marginTop:6,marginBottom:12,color:I.ZP.uiGray},us={fontSize:10,marginTop:8};function ps(e){Z.r$({currentTab:e})}function ms(e){let{environment:t,onMount:n}=e;const a=(0,i.useRef)(!1);(0,i.useEffect)((()=>{a.current||(a.current=!0,null==n||n())}),[n]);const l="system"===window.notionTheme?s.vn(t):window.notionTheme,d=m(t);return(0,oe.jsx)(o.B9,{value:t,children:(0,oe.jsxs)(r.ze,{value:{mode:l},children:[(0,oe.jsx)(ls,{}),d&&(0,oe.jsx)(c,{})]})})}},314694:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});n(667294);var i=n(800480),o=n(886628),r=n(724405),s=n(439567),a=n(950659),l=n(224646),c=n(785893);function d(){const e=(0,r.yK)((e=>({icon:{position:"absolute",width:"50%",height:"50%",right:0,bottom:0,fill:"dark"===e.mode?e.regularTextColor:"#3E3C38",stroke:"dark"===e.mode?e.sidebarBackground:"white",strokeWidth:"dark"===e.mode?"1.85px":"1.5px"}})),[]);return(0,c.jsx)("div",{children:(0,s.Y)(e.icon)})}function u(e){var t;const n=(0,i.O7)(),s=n.device.isMobile,u=(0,o.VK)((()=>{var t,i;if(s)return n.WindowSizeStore.getSafePaddingLeftCSS("number"==typeof(null===(t=e.style)||void 0===t?void 0:t.paddingLeft)?null===(i=e.style)||void 0===i?void 0:i.paddingLeft:10)}),[n.WindowSizeStore,s,null===(t=e.style)||void 0===t?void 0:t.paddingLeft]),p=(0,o.VK)((()=>(0,l.BH)(n)),[n]),m=(0,o.VK)((()=>(0,a.MF)(n)),[n]),h=(0,r.yK)((t=>({wrapper:{...s?{display:"flex",alignItems:"center",width:"100%",minHeight:26,fontSize:16,paddingTop:8,paddingBottom:8,paddingLeft:u,paddingRight:10,userSelect:"none",WebkitUserSelect:"none",boxShadow:e.disableMobileBorder?void 0:`0 1px 0 ${t.regularDividerColor}`,marginBottom:e.shouldShowMobileMarginBottom?12:1}:{display:"flex",alignItems:"center",width:"100%",fontSize:14,minHeight:e.isBottomItem?24:27,paddingTop:2,paddingBottom:2,...p&&{height:l.H3,paddingTop:4,paddingBottom:4},...!p&&{marginTop:1,marginBottom:1},...m},...e.style},icon:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,width:s?28:22,height:s?24:18,marginLeft:p?void 0:-3,marginRight:p?8:4,position:"relative"},right:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,height:"100%",...e.rightStyle},left:{flexShrink:0,flexGrow:0,borderRadius:4,color:t.mediumTextColor,width:s?24:p?l.MY:22,height:s?24:p?l.MY:22,display:"flex",alignItems:"center",justifyContent:"center",marginRight:e.icon?0:8},children:{flexGrow:1,flexShrink:1,flexBasis:"auto",whiteSpace:"nowrap",minWidth:0,overflow:"hidden",textOverflow:e.right&&!s?"clip":"ellipsis",...e.childrenStyle}})),[s,u,e.disableMobileBorder,e.shouldShowMobileMarginBottom,e.isBottomItem,e.style,e.rightStyle,e.icon,e.right,e.childrenStyle,p,m]);return(0,c.jsxs)("div",{role:e.role,"aria-current":e["aria-current"],"aria-expanded":e["aria-expanded"],"aria-owns":e["aria-owns"],"aria-labelledby":e["aria-labelledby"],style:h.wrapper,onFocus:e.onFocus,onBlur:e.onBlur,onMouseMove:e.onMouseMove,onMouseLeave:e.onMouseLeave,onClick:e.onClick,className:e.className,children:[e.left&&(0,c.jsx)("div",{style:h.left,children:e.left}),e.icon&&(0,c.jsxs)("div",{style:h.icon,children:[e.icon,e.isAlias&&(0,c.jsx)(d,{})]}),(0,c.jsx)("div",{style:h.children,children:e.children}),e.right&&(0,c.jsx)("div",{style:h.right,children:e.right})]})}},555064:(e,t,n)=>{"use strict";n.d(t,{Z:()=>L});var i=n(667294),o=n(800480),r=n(886628),s=n(724405),a=n(151454),l=n(709291),c=n(401898),d=n(587420),u=n(524677),p=n(128651),m=n(98742),h=n(389224),g=n(823376),v=n(48276),f=n(828161),S=n(116746),b=n(966324),x=n(224646),y=n(938676),k=n(436391),w=n(825464),j=n(896049),I=n(188923),C=n(706685),M=n(58261),T=n(526388),P=n(785893);const L=function(e){let{type:t}=e;const n=(0,o.O7)(),s=(0,r.VK)((()=>(0,x.BH)(n)),[n]),l=(0,r.qz)(void 0,p.Z),S=(0,i.useRef)(!1),M=(0,i.useCallback)((()=>function(e,t){t.setState({...t.state,mousePressed:!1}),_({isResizing:!1},e)}(t,l)),[t,l]),L=(0,i.useCallback)((()=>function(e,t,n,i){if(!i.current){switch(t){case"page":b.setExpand({environment:e,isExpanded:!y.sidebarExpandedStore.state,from:"sidebar_resizer"}),y.sidebarOpenStore.setState(!1);break;case"update":b.setUpdateExpand({environment:e,isExpanded:!(0,x.Sx)(e),from:"drag"});break;case"peek":d.xv(e,"resizer_click");break;case"secondary_sidebar":g.TN({environment:e});break;default:(0,c.t1)(t)}n.setState({...n.state,mouseEntered:!1})}n.setState({...n.state,mousePressed:!1}),_({isResizing:!1},t)}(n,t,l,S)),[n,t,l]),E=(0,i.useCallback)((e=>function(e,t,n,i){switch(h.clear(t),i.current=!0,n){case"page":b.setWidth({width:Z(e.currentX,n,t),environment:t});break;case"update":b.setUpdateWidth({width:Z(e.currentX,n,t),environment:t});break;case"peek":b.setPeekWidth({width:Z(e.currentX,n,t),environment:t});break;case"secondary_sidebar":f.ZP.setWidth(Z(e.currentX,n,t));break;default:(0,c.t1)(n)}}(e,n,t,S)),[n,t]),V=(0,i.useCallback)((()=>function(e,t,n,i){u.ZH({debug:{userAction:"SidebarResizer.handleDragStart"},environment:e}),n.setState({...n.state,mousePressed:!0}),i.current=!1,_({...y.sidebarResizingStore.state,isResizing:!0},t)}(n,t,l,S)),[n,t,l]),{device:F}=n,U=(0,r.VK)((()=>function(e){const t=function(e){switch(e){case"page":return y.sidebarWidthStore.state;case"secondary_sidebar":const t=y.sidebarExpandedStore.state,n=v.l_();return t?y.sidebarWidthStore.state+n:n;case"update":return k.ZP.state.width;case"peek":return I.default.state.preferredSidePeekWidth;default:(0,c.t1)(e)}}(e);switch(e){case"page":case"secondary_sidebar":return t;case"peek":case"update":return window.innerWidth-t;default:(0,c.t1)(e)}}(t)),[t]),D=(0,r.VK)((()=>y.sidebarMouseEnterYStore.state),[]),O=(0,r.VK)((()=>j.Z.state),[]),N=(0,r.VK)((()=>function(e){return{cursor:"col-resize",height:"100%",width:12,marginLeft:"update"===e?-k.ZP.state.width:-6}}(t)),[t]),z=(0,r.VK)((()=>function(e,t){const n=(0,x.in)(t);return{position:"absolute",left:"peek"===e?0:void 0,right:"peek"!==e?0:void 0,width:0,flexGrow:0,zIndex:"peek"===e?a.YO:1,top:n?0:-1,bottom:n?0:-1,pointerEvents:"auto"}}(t,n)),[t,n]);return O||F.isChromebook?null:(0,P.jsx)(T.Z,{renderTooltip:()=>s?(0,P.jsx)(R,{type:t}):(0,P.jsx)(A,{type:t}),originRect:new DOMRect(U,D,0,0),delayThreshold:s?0:500,placement:"page"===t||"secondary_sidebar"===t?w.u.Right:w.u.Left,originGap:10,render:e=>(0,P.jsx)(P.Fragment,{children:(0,P.jsx)("div",{style:z,...(0,m.Z)(e,{onMouseMove:()=>function(e){_({isResizerHovered:!0},e)}(t),onMouseLeave:()=>function(e){_({isResizerHovered:!1},e)}(t),onMouseEnter:B}),children:(0,P.jsx)(C.Z,{onDraggableDragStart:V,onDraggableDragMove:E,onDraggableDragEnd:L,onDraggableDragCancel:M,disableVerticalEdgeScroll:!0,disableHorizontalEdgeScroll:!0,render:e=>(0,P.jsx)("div",{style:N,...e})})})})})};function _(e,t){switch(t){case"page":y.sidebarResizingStore.update((t=>({...t,...e})));break;case"update":k.ZP.update((t=>({...t,...e})));break;case"secondary_sidebar":S.Z.update((t=>({...t,...e})));break;case"peek":break;default:(0,c.t1)(t)}}function Z(e,t,n){let i;switch(t){case"page":i=e;break;case"secondary_sidebar":i=e-(y.sidebarExpandedStore.state?y.sidebarWidthStore.state:0);break;case"peek":case"update":i=window.innerWidth-e;break;default:(0,c.t1)(t)}const o=function(e){const t=window.innerWidth;switch(e){case"page":return 480;case"update":return Math.min(t/2,x.Nc);case"peek":return t>2*I.sidePeekMinWidth?t/1.5:t;case"secondary_sidebar":return f.o$;default:(0,c.t1)(e)}}(t),r=function(e,t){const n=(0,x.BH)(t);switch(e){case"page":return n?y.SIDEBAR_MIN_WIDTH:y.LEGACY_SIDEBAR_MIN_WIDTH;case"update":return k.AO;case"peek":return I.sidePeekMinWidth;case"secondary_sidebar":return f.um;default:(0,c.t1)(e)}}(t,n);return i>o?o:i<r?r:i}function E(e,t){switch(e){case"page":return(0,x.in)(t);case"update":return(0,x.Sx)(t);case"peek":return I.default.state.open;case"secondary_sidebar":return S.Z.isOpen();default:(0,c.t1)(e)}}function A(e){let{type:t}=e;const n=(0,s.Fg)(),a=(0,o.O7)(),c=(0,r.VK)((()=>E(t,a)),[t,a]),d=n.mediumInvertedTextColor;return(0,P.jsxs)("div",{style:{textAlign:"center"},children:[(0,P.jsx)(l.FormattedMessage,{defaultMessage:"Drag <invertedcolor>to resize</invertedcolor>",id:"sidebarResizer.tooltip.dragMessage",values:{invertedcolor:e=>(0,P.jsx)("span",{style:{color:d},children:e})}}),(0,P.jsxs)(i.Fragment,{children:[(0,P.jsx)("br",{}),(0,P.jsx)(l.FormattedMessage,{defaultMessage:"Click <invertedcolor>to {expanded, select, true {close} other {lock open}}</invertedcolor>",id:"sidebarResizer.clickToToggleSidebar.message",values:{expanded:c,invertedcolor:e=>(0,P.jsx)("span",{style:{color:d},children:e})}})]})]})}function R(e){let{type:t}=e;const n=(0,s.Fg)(),i=(0,o.O7)(),a=(0,r.VK)((()=>E(t,i)),[t,i]),c=n.mediumInvertedTextColor,d=(0,P.jsx)(M.Z,{name:"toggleSidebar"}),u="secondary_sidebar"===t||"update"===t?(0,P.jsx)(l.FormattedMessage,{defaultMessage:"Close <invertedcolor>Click</invertedcolor>",id:"sidebarResizer.tooltip.closeMessage.noShortcut",values:{invertedcolor:e=>(0,P.jsx)("span",{style:{color:c},children:e}),keyboardShortcut:d}}):(0,P.jsx)(l.FormattedMessage,{defaultMessage:"Close <invertedcolor>Click or {keyboardShortcut}</invertedcolor>",id:"sidebarResizer.tooltip.closeMessage",values:{invertedcolor:e=>(0,P.jsx)("span",{style:{color:c},children:e}),keyboardShortcut:d}});return(0,P.jsxs)(P.Fragment,{children:[a?u:(0,P.jsx)(l.FormattedMessage,{defaultMessage:"Lock open <invertedcolor>Click or {keyboardShortcut}</invertedcolor>",id:"sidebarResizer.tooltip.lockMessage",values:{invertedcolor:e=>(0,P.jsx)("span",{style:{color:c},children:e}),keyboardShortcut:d}}),(0,P.jsx)("br",{}),(0,P.jsx)(l.FormattedMessage,{defaultMessage:"Resize <invertedcolor>Drag</invertedcolor>",id:"sidebarResizer.tooltip.resizeMessage",values:{invertedcolor:e=>(0,P.jsx)("span",{style:{color:c},children:e}),keyboardShortcut:d}})]})}function B(e){y.sidebarMouseEnterYStore.setState(e.clientY)}},530664:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var i=n(667294),o=n(800480),r=n(706740),s=n(886628),a=n(724405),l=n(584169),c=n(709291),d=n(225888),u=n(313991),p=n(188642),m=n(139634),h=n(730459),g=n(679897),v=n(258455),f=n(319385);var S=n(296994),b=n(843250),x=n(98742),y=n(100475),k=n(216194),w=n(955031),j=n(164921),I=n(231945),C=n(526388),M=n(314694),T=n(785893);const P="?";function L(e){const t=(0,o.O7)(),{isMobile:n}=t.device,d=(0,c.useIntl)(),u=(0,s.VK)((()=>y.Z.state.open),[]),p=(0,w.r)({environment:t,rightEdgeDistance:16,isInPeekRenderer:!1}),m=(0,a.yK)((e=>({helpIcon:{fill:e.mediumIconColor,width:16,height:16},hoveredStyle:{background:e.whiteButtonHoveredBackground},pressedStyle:{background:e.whiteButtonPressedBackground}})),[]),h=(0,i.useCallback)((e=>{const t=e.target;t instanceof HTMLElement&&(0,r.E)(t)&&k.Z.setState(!0)}),[]),g=(0,i.useCallback)((()=>{k.Z.setState(!1)}),[]);if(n)return(0,T.jsx)(j.Z,{hovered:u,testId:b.lmr,mobileFeedback:n,...e,children:(0,T.jsx)(M.Z,{left:(0,l.m)(m.helpIcon),disableMobileBorder:!0,children:(0,T.jsx)(c.FormattedMessage,{defaultMessage:"Help & feedback",id:"helpButton.mobileHelpFeedbackButton.label"})})});const v=d.formatMessage({defaultMessage:"Help, feedback, and keyboard shortcuts",id:"helpButton.desktopHelpButton.ariaLabel"}),f=(0,x.Z)(e,{onFocus:h,onBlur:g});return(0,T.jsx)(T.Fragment,{children:(0,T.jsx)(C.Z,{renderTooltip:()=>(0,T.jsx)("span",{children:(0,T.jsx)(c.FormattedMessage,{defaultMessage:"Help, feedback, and {br}keyboard shortcuts",id:"helpButton.desktopHelpButton.tooltip",values:{br:(0,T.jsx)("br",{})}})}),render:e=>(0,T.jsx)(j.Z,{ariaLabel:v,className:b.lmr,testId:b.lmr,style:p,hoveredStyle:m.hoveredStyle,pressedStyle:m.pressedStyle,...(0,x.Z)(f,e),children:P})})})}const _=(0,c.injectIntl)((function(){const e=(0,o.O7)(),{isMobile:t}=e.device,n=(0,s.VK)((()=>{var t;return(null===(t=e.mobileNative)||void 0===t?void 0:t.supportsNativeHomeOnPhone())||!1}),[e]),r=(0,i.useCallback)((()=>{d.Ar(e,{from:"corner"}),function(e){const t=v.default.state;if((0,h.Ug)()&&t.isZendeskEnabled){const{userHighestPlanType:n,isSalesAssistedPlan:i}=(0,g.rf)(e);p.j({locale:u.SP,analyticsSettings:t,isForethoughtEnabled:f.default.checkGate({gateName:"forethought"}),forethoughtInitializeArgs:m.z(e),userHighestPlanType:n,isSalesAssistedPlan:i,cookieService:e.cookieService})}}(e)}),[e]);return(0,T.jsx)(I.ZP,{popupType:t?I.Z4.SlideUp:I.Z4.Popup,hidesMobileNativeBottomBar:n,preventSlideUpTransition:n,renderOrigin:e=>(0,T.jsx)(L,{...e}),originGap:t?0:12,placementToOrigin:t?I.pO.Right:I.pO.Top,alignmentToOrigin:t?I.vR.Center:I.vR.End,buttonPopupStore:y.Z,onClick:r,render:()=>(0,T.jsx)(S.FD,{shouldRenderAsStaticModal:n})})}))},666605:(e,t,n)=>{"use strict";n.r(t),n.d(t,{FPSMonitorEnabledStore:()=>d,default:()=>u});var i=n(667294),o=n(886628),r=n(724405),s=n(749085),a=n(668709),l=n(297834),c=n(785893);const d=s.default.createValue(!1,{name:"FPSMonitorEnabledStore"});function u(){const e=(0,o.VK)((()=>d.state),[]),t=(0,r.yK)((e=>({root:{position:"absolute",bottom:20,right:20,transform:"translateX(-50%)",zIndex:999}})),[]);return e?(0,c.jsx)(p,{width:300,height:80,styles:t}):null}function p(e){const{width:t,height:n,styles:o}=e,{fpsHistory:r,fps:s}=(0,l.U)(),[d,u]=(0,i.useState)(""),p=(0,i.useCallback)((e=>{const t=(e-0)/144*n;return Math.min(n,Math.max(0,t))}),[n]);return(0,i.useEffect)((()=>{if(0===r.length)return;const e=r.map(((e,i)=>`${i/r.length*t},${n-p(e)}`));u(`M${e.join(" L")}`)}),[r,n,t,p]),(0,c.jsx)(a.p,{allowSelectionWithin:!1,children:void 0===s?null:(0,c.jsx)("div",{style:o.root,children:(0,c.jsxs)("svg",{width:t,height:n,viewBox:`-20 0 ${t} ${n}`,children:[(0,c.jsx)("path",{d,fill:"none",stroke:"black",strokeWidth:"1"}),(0,c.jsx)("path",{d:`M0,${n} L${t},${n}`,stroke:"black"}),(0,c.jsx)("path",{d:`M0,0 L0,${n}`,stroke:"black"}),(0,c.jsx)("path",{d:`M0,${n-p(30)} L${t},${n-p(30)}`,strokeDasharray:"2 2",stroke:"black"}),(0,c.jsx)("text",{x:-12,y:n-p(30)+3,fontSize:"8",children:"30"}),(0,c.jsx)("path",{d:`M0,${n-p(60)} L${t},${n-p(60)}`,strokeDasharray:"2 2",stroke:"black"}),(0,c.jsx)("text",{x:-12,y:n-p(60)+3,fontSize:"8",children:"60"}),(0,c.jsx)("path",{d:`M0,${n-p(120)} L${t},${n-p(120)}`,strokeDasharray:"2 2",stroke:"black"}),(0,c.jsx)("text",{x:-16,y:n-p(120)+3,fontSize:"8",children:"120"})]})})})}},297834:(e,t,n)=>{"use strict";n.d(t,{U:()=>s});var i=n(667294);const o=300,r=500;function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;const[t,n]=(0,i.useState)([]),s=(0,i.useRef)([]),a=(0,i.useRef)(performance.now()),l=(0,i.useRef)(0),c=(0,i.useRef)(0);return(0,i.useEffect)((()=>(c.current=requestAnimationFrame((function t(){const i=performance.now();l.current+=1;const o=i-a.current;if(o>=r){const t=Math.round(1e3*l.current/o);s.current=[t,...s.current].slice(0,e),n([...s.current]),l.current=0,a.current=i}c.current=requestAnimationFrame(t)})),()=>{c.current>0&&cancelAnimationFrame(c.current)})),[e]),{fpsHistory:t,...t.length>=1&&{fps:t[0],maxFps:Math.max(...t),minFps:Math.min(...t),avgFps:t.reduce(((e,t)=>e+t),0)/t.length}}}},965556:(e,t,n)=>{"use strict";n.r(t),n.d(t,{setupOnBeforeUnload:()=>a,showConfirmationDialogEventEmitter:()=>r});var i=n(933147),o=n(990827);const r=new i.Z,s={transaction_queue_has_tasks:"Changes you made may not be saved. Are you sure you want to quit?",uploading_files:"The files you are currently uploading may not be saved. Are you sure you want to quit?",generating_ai_completions:"Changes being made by AI may not be saved. Are you sure you want to quit?",have_pending_ai_edits:"Pending edits from Notion AI may not be saved. Are you sure you want to quit?"};function a(e){const{TransactionQueue:t,device:n,AppUpdateStore:i,GlobalFileUploadStore:a}=e;window.onbeforeunload=function(){const e=!t.hasTasks()||n.isMobileNative||n.isElectron||i.isMajorUpdate()?(0,o.D)()?"have_pending_ai_edits":a.isUploading()?"uploading_files":void 0:"transaction_queue_has_tasks";if(e)return r.emit(e),s[e]}}},764286:(e,t,n)=>{"use strict";n.d(t,{u:()=>s});var i=n(80444),o=n(319385),r=n(215010);function s(e){const{currentUserSettingsStore:t}=i.default.state;if(!t)return!1;const n=(0,r.e2)(t);return!("number"==typeof n&&n>7)&&(!e.device.isMobile&&"on"===o.default.getEligibleGroup({experimentId:"slash_menu_tooltip",defaultGroup:"control"}))}},670511:(e,t,n)=>{"use strict";n.r(t),n.d(t,{setupTransactionLoadGenerator:()=>l});var i=n(292595),o=n(137231),r=n(210228),s=n(80444),a=n(924666);function l(e){(0,i.exposeDebugValue)("generateTransactionLoad",(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const l=s.default.state.mainEditorCurrentBlockStore;if(!l)return void console.info("Cannot generateTransactionLoad: No current block");const c=l.getTitleStore();if(!c)return void console.info("Cannot generateTransactionLoad: block has no title");if("editing"!==a.default.state.mode)return void console.info("not editing anything. Click the page title.");const d=t=>{r.createAndCommit({userAction:"generateTransactionLoad.createTransaction",environment:e,perform:i=>{console.info("createAndCommit #",t);for(let r=0;r<n;r++){const n=`This is transaction #${t+1}, op ${r+1}, of load started at ${u}`;o.aS({environment:e,editorMode:"default",store:c,newValue:n,disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:i})}}})},u=new Date;if(0===i)for(let e=0;e<t;e++)d(e);else{let e=0;const n=setInterval((()=>{e<t?(d(e),e++):clearInterval(n)}),i)}}))}},119077:(e,t,n)=>{"use strict";n.r(t),n.d(t,{initialize:()=>a});var i=n(568626),o=n(95477),r=n(319385),s=n(915517);function a(e){"object"==typeof o.default&&o.default.version&&(i.clientLogglyEnvironmentData.version=o.default.version);const{device:t,currentUser:n}=e;t.isMobileNative&&(i.clientLogglyEnvironmentData.isMobileNative=!0),t.isMobile&&(i.clientLogglyEnvironmentData.isMobile=!0),t.isAndroid&&(i.clientLogglyEnvironmentData.isAndroid=!0),t.isIOS&&(i.clientLogglyEnvironmentData.isIOS=!0),t.isElectron&&(i.clientLogglyEnvironmentData.isElectron=!0),t.isChromeExtension&&(i.clientLogglyEnvironmentData.isChromeExtension=!0),i.clientLogglyEnvironmentData.os=t.os,i.clientLogglyEnvironmentData.platform=t.platform,window.navigator.userAgent&&(i.clientLogglyEnvironmentData.userAgent=window.navigator.userAgent),document.referrer&&(i.clientLogglyEnvironmentData.referrer=document.referrer),n.id&&(i.clientLogglyEnvironmentData.userId=n.id),i.clientLogglyEnvironmentData.experiments=r.default.getUsedNonControlExperimentsMap(),r.default.addListener((()=>{i.clientLogglyEnvironmentData.experiments=r.default.getUsedNonControlExperimentsMap()})),(0,s.sK)().then((e=>{e&&(i.clientLogglyEnvironmentData.storageUsageEstimate=e.usage,i.clientLogglyEnvironmentData.storageQuotaEstimate=e.quota)}))}},748916:(e,t,n)=>{"use strict";n.r(t),n.d(t,{mainApp:()=>i});n(21703);async function i(e){const{minimalEnvironment:t,mainStartTime:i,prefetchInitiatedTime:o,prefetchCache:r,initializeStatsigResult:s}=e,{device:a}=t,[{setupOnBeforeUnload:l},c,{createClientEnvironment:d},{setupTransactionQueue:u},{default:p},m]=await Promise.all([Promise.resolve().then(n.bind(n,965556)),Promise.resolve().then(n.bind(n,568626)),Promise.resolve().then(n.bind(n,16314)),Promise.resolve().then(n.bind(n,453730)),Promise.resolve().then(n.bind(n,27411)),Promise.resolve().then(n.bind(n,244133))]);let h=await d({minimalEnvironment:t,prefetchCache:r});const{ElectronSqlite:g}=h;m.setupRecordCacheDebugging(a);const v=await u(h);l({device:a,TransactionQueue:v,AppUpdateStore:h.AppUpdateStore,GlobalFileUploadStore:p});const[f,{default:S}]=await Promise.all([Promise.resolve().then(n.bind(n,119077)),Promise.resolve().then(n.bind(n,318245))]);if(f.initialize(h),a.isMobileNative){const e=S.mark("mobilenative.initialize_from_js"),[t,i]=await Promise.all([Promise.resolve().then(n.bind(n,98958)),Promise.resolve().then(n.bind(n,557491))]);await t.initializeMobileNativeApp(h),Object.assign(c.clientLogglyEnvironmentData,i.getMobileNativeDeviceInfo()),S.measure(e,{environment:h,data:{}})}if(a.isElectron){const e=await Promise.resolve().then(n.bind(n,247839));await e.initializeElectron({device:a,electronSqlite:g});const t=await Promise.resolve().then(n.bind(n,374503)),i=await t.getDesktopDeviceInfo();Object.assign(c.clientLogglyEnvironmentData,i,{desktopVersion:a.desktopAppVersion})}const[b,x,y,k,w]=await Promise.all([Promise.resolve().then(n.bind(n,497977)),Promise.resolve().then(n.bind(n,966324)),Promise.resolve().then(n.bind(n,389224)),Promise.resolve().then(n.bind(n,532219)),Promise.resolve().then(n.bind(n,210228))]),{setupTransactionLoadGenerator:j}=await Promise.resolve().then(n.bind(n,670511));j(h);const[{default:I},C,M,T,{CurrentUser:P},{getGhostAdminUserId:L},{default:_}]=await Promise.all([Promise.resolve().then(n.bind(n,925629)),Promise.resolve().then(n.t.bind(n,667294,19)),Promise.resolve().then(n.t.bind(n,973935,19)),Promise.resolve().then(n.t.bind(n,620745,19)),Promise.resolve().then(n.bind(n,687997)),Promise.resolve().then(n.bind(n,512955)),Promise.resolve().then(n.bind(n,319385))]);y.startListeners(a),h=await b.initialize(h),h.updateCurrentUserId=async e=>{const t=await L(h),n={...e.environment,currentUser:new P({id:e.currentUserId,loggedInUserIds:e.userIds,adminUserId:t})};z(n)},k.initialize(h),v.startLoop();const[{maybeClearCookies:Z,refreshNotionCookies:E,validateHasPermissionArgs:A,clearNotionCookiesWithNoPermission:R,clearThirdPartyCookiesAndLocalStorageWithNoPermission:B},{clearNotionLocalStorageWithNoPermission:V},F,U,D,O]=await Promise.all([Promise.resolve().then(n.bind(n,512955)),Promise.resolve().then(n.bind(n,318613)),Promise.resolve().then(n.bind(n,32223)),Promise.resolve().then(n.bind(n,532603)),Promise.resolve().then(n.bind(n,805809)),Promise.resolve().then(n.bind(n,583055))]);Z(),Promise.all([R(h),B(h)]).then((()=>E(h))),V(),A(h);const[{TransactionQueueDependenciesImpl:N}]=await Promise.all([Promise.resolve().then(n.bind(n,368026))]),z=e=>{const t=performance.now(),n=document.querySelector("#notion-app");if(!n)throw new Error('Could not find element with id "notion-app"');const r=_.checkGate({gateName:"react_18_concurrent_rendering"});v.updateDependencies(new N(e)),w.updateConnectionState(e),F.updateEnvironment(e),c.clientLogglyEnvironmentData.userId=e.currentUser.id;const s=()=>{const e=document.getElementById("initial-loading-spinner"),n=document.getElementById("skeleton");e&&e.remove(),n&&n.remove();const r=performance.now();U.setSubMetricsAtRenderCallback({mainStartTime:i,prefetchInitiatedTime:o,renderStartTime:t,renderEndTime:r});const s=D.getAppStartTime();s&&S.measure({metricName:"time_origin_to_app_start",startTime:0,endTime:s},{environment:h,data:{sub_metrics:O.getTimeOriginToAppStartSubMetrics()}}),S.measure({metricName:"time_origin_to_prefetch_initiated",startTime:0,endTime:o},{environment:h})},a=C.createElement(I,{environment:e,onMount:r?s:void 0});if(r){T.createRoot(n).render(a)}else M.render(a,n,s)},q=S.mark("statsig_bootup_blocking");return s.initializedOnServer&&(await s.finishInitializePromise,S.measure(q,{environment:h})),x.initialize(h),z(h),{transactionQueue:v,environment:h}}},572530:(e,t,n)=>{"use strict";n.d(t,{V:()=>r});var i=n(886628),o=n(305971);function r(e){const t=(0,o.E)("page_layouts"),n=(0,i.VK)((()=>{if(!e)return;const t=e.getAssociatedCollectionStore(),n=null==t?void 0:t.getLayoutStore();return null==n?void 0:n.getModules().page_details}),[e]);return t?{modules:n}:{}}},552389:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(749085);class o extends i.default{getInitialState(){return{open:!1}}}const r=new o},776687:(e,t,n)=>{"use strict";n.d(t,{I:()=>i});const i=n(749085).default.createValue({open:!1},{name:"LockInModalStore"})},16314:(e,t,n)=>{"use strict";n.r(t),n.d(t,{createClientEnvironment:()=>We});var i=n(126263),o=n(245631),r=n(687997),s=n(458287),a=n(94023),l=n(891814),c=n(427328),d=n(642389),u=n(520475),p=n(399747),m=n(389539),h=n.n(m),g=n(307032),v=(n(21703),n(348675),n(863408),n(614590),n(103462),n(823767),n(808585),n(68696),n(402568)),f=n.n(v),S=n(653965),b=n(401898),x=n(619584),y=n(676462),k=n(815047);const w={version:8,notion_version:0,variant:2},j={version:8,notion_version:1,variant:2},I=0,C=1,M=6,T=8,P=10,L={production:58102339916,staging:4561079407,development:22037813777,local:12471060754},_=Date.UTC(2024,0,1);function Z(e,t){if(e)return t[I]=255,t[I+1]=240|15&t[I+1],t;const n=Math.floor(((new Date).getTime()-_)/x.A0);if(n>=4096||n<0)throw new Error("Invalid offsetInDays.");return t[I]=n>>4,t[I+1]=n<<4&240|15&t[I+1],t}function E(e,t){if(e>=2**36||e<0)throw new Error("Invalid spaceShortId.");t[C]=240&t[C]|e/2**32&15;for(let n=0;n<4;n++)t[C+1+n]=e/2**(24-8*n)&255;return t}function A(e,t){const n=e?1:0;return t[M]=w.version<<4&240|w.notion_version<<1&14|1&n,t[T]=w.variant<<6&192|63&t[T],t}function R(e,t){if("block"===e)return t[P]=(0,y.ym)(e)|63&t[P],t;const n=(0,y.ym)(e);return t[P]=n>>8&127,t[P+1]=255&n,t}function B(e,t,n){const i=(0,y.Nq)(t);return n[P]=63&i|128&n[P]|(e?64:0),n}function V(e,t,n,i){const o=new Uint8Array(16),r=globalThis.crypto.getRandomValues(o);return n!==k.bx&&Z(e,r),E(t,r),A(i,r),R(n,r),D(r)}function F(e,t,n,i){const o=f()(i),r=S.yo(o,2).map((e=>parseInt(e.join(""),16))),s=new Uint8Array(r);return E(t,s),B(e,n,s),function(e){e[M]=240&j.version<<4|14&j.notion_version<<1|1&e[M],e[T]=192&j.variant<<6|63&e[T]}(s),D(s)}const U=new Array(256).fill(0).map(((e,t)=>t.toString(16).padStart(2,"0")));function D(e){let t=0;return U[e[t++]]+U[e[t++]]+U[e[t++]]+U[e[t++]]+"-"+U[e[t++]]+U[e[t++]]+"-"+U[e[t++]]+U[e[t++]]+"-"+U[e[t++]]+U[e[t++]]+"-"+U[e[t++]]+U[e[t++]]+U[e[t++]]+U[e[t++]]+U[e[t++]]+U[e[t++]]}var O=n(471924);class N{constructor(e){this.environmentName=void 0,this.mainShortId=void 0,this.getSettings=void 0,this.isServerOriginated=void 0,this.mapSpaceIdToShortId=void 0,this.idCreatorLogger=void 0,this.environmentName=e.environmentName,this.mainShortId=L[this.environmentName],this.getSettings=e.getSettings,this.isServerOriginated=e.isServerOriginated,this.mapSpaceIdToShortId=e.mapSpaceIdToShortId,this.idCreatorLogger=e.idCreatorLogger??(()=>{})}idInMain(e){const{enableTestDateOffset:t,enableIdSchema:n}=this.getSettings();return n?(this.idCreatorLogger(void 0,e,t?"id_schema_test":"id_schema"),function(e,t,n,i){return V(e,t,n,i)}(t,this.mainShortId,e,this.isServerOriginated)):(this.idCreatorLogger(void 0,e,"disabled"),(0,g.ZP)())}pointerInMain(e){return{table:e,id:this.idInMain(e)}}async idWithSpaceId(e,t){const{enableTestDateOffset:n,enableIdSchema:i}=this.getSettings();if(!i)return this.idCreatorLogger(e,t,"disabled"),(0,g.ZP)();const o=this.mapSpaceIdToShortId(e),r=h().types.isPromise(o)?await o:o;return r?(this.idCreatorLogger(e,t,n?"id_schema_test":"id_schema"),V(n,r,t,this.isServerOriginated)):(this.idCreatorLogger(e,t,"missing_short_id"),(0,g.ZP)())}async pointerWithSpaceId(e,t){return{table:t,spaceId:e,id:await this.idWithSpaceId(e,t)}}idWithSpaceShortId(e,t){const{enableTestDateOffset:n,enableIdSchema:i}=this.getSettings();return i?(this.idCreatorLogger(void 0,t,n?"id_schema_test":"id_schema"),V(n,e,t,this.isServerOriginated)):(this.idCreatorLogger(void 0,t,"disabled"),(0,g.ZP)())}async deterministicIdWithSpaceId(e,t,n){const{enableTestDateOffset:i,enableIdSchema:o}=this.getSettings();if(!o)return this.idCreatorLogger(e,t,"disabled"),O.Ul(n);const r=this.mapSpaceIdToShortId(e),s=h().types.isPromise(r)?await r:r;return s?(this.idCreatorLogger(e,t,i?"id_schema_test":"id_schema"),F(i,s,t,n)):(this.idCreatorLogger(e,t,"missing_short_id"),O.Ul(n))}deterministicIdWithSpaceShortId(e,t,n){const{enableTestDateOffset:i,enableIdSchema:o}=this.getSettings();return o?(this.idCreatorLogger(void 0,t,i?"id_schema_test":"id_schema"),F(i,e,t,n)):(this.idCreatorLogger(void 0,t,"disabled"),O.Ul(n))}async getSpaceIdCreator(e){if(!e)return new z(e,this.idCreatorLogger);const{enableIdSchema:t}=this.getSettings();if(!t)return new z(e,this.idCreatorLogger);const n=this.mapSpaceIdToShortId(e),i=h().types.isPromise(n)?await n:n;return this.getSpaceShortIdCreator(e,i)}getSpaceIdCreatorSync(e){if(!e)return new z(e,this.idCreatorLogger);const{enableIdSchema:t}=this.getSettings();if(!t)return new z(e,this.idCreatorLogger);const n=this.mapSpaceIdToShortId(e),i=h().types.isPromise(n)?void 0:n;return this.getSpaceShortIdCreator(e,i)}getSpaceShortIdCreator(e,t){const{enableIdSchema:n}=this.getSettings();return n&&t?new q(e,this,t):new z(e,this.idCreatorLogger)}}class z{constructor(e,t){this.spaceId=void 0,this.idCreatorLogger=void 0,this.spaceId=e,this.idCreatorLogger=t}idInSavedSpace(e){return this.idCreatorLogger(void 0,e,"disabled"),(0,g.ZP)()}idInMain(e){return this.idCreatorLogger(void 0,e,"disabled"),(0,g.ZP)()}deterministicIdInSavedSpace(e,t){return this.idCreatorLogger(void 0,e,"disabled"),O.Ul(t)}pointerInMain(e){return{id:this.idInMain(e),table:e}}pointerInSavedSpace(e){return{id:this.idInSavedSpace(e),table:e,spaceId:this.spaceId}}getSpaceId(){return this.spaceId}}class q{constructor(e,t,n){this.spaceId=void 0,this.idCreator=void 0,this.spaceShortId=void 0,this.spaceId=e,this.idCreator=t,this.spaceShortId=n}idInSavedSpace(e){return this.idCreator.idWithSpaceShortId(this.spaceShortId,e)}idInMain(e){return this.idCreator.idInMain(e)}deterministicIdInSavedSpace(e,t){return this.idCreator.deterministicIdWithSpaceShortId(this.spaceShortId,e,t)}pointerInMain(e){return{id:this.idInMain(e),table:e}}pointerInSavedSpace(e){return{id:this.idInSavedSpace(e),table:e,spaceId:this.spaceId}}getSpaceId(){return this.spaceId}}var W=n(247839),K=n(522974),$=(n(95477),n(512955)),H=n(985677),G=n(169151),Y=(n(797448),n(757658),n(428084)),Q=n(568626),X=n(255652),J=n(145953),ee=n(421202),te=n(564850),ne=n(344381),ie=n(712139),oe=n(766504),re=n(552629),se=n(730459),ae=n(318245),le=n(577144),ce=n(584693);let de=1;class ue{constructor(e,t){this.environment=void 0,this.getLatency=new X.s,this.batchReadWorkers=15,this.pendingWrites=J.Ao.create(),this.getManyFromDisk=async e=>{const t=J.Ao.create();e.forEach(((e,n)=>{let{pointer:i}=e;t.set(i,n)}));const n=await ce.Q6(this.connection,e),i=J.Ao.create();for(const o of n)this.setCachedRecordMap(i,o);return e.map((e=>{let{pointer:t,userId:n}=e;const o=this.getInMemory(t,n);if(o)return o;const r=i.get(t);return r&&r[n]}))},this.diskReadQueue=new Y.Z({batchSize:Math.floor(ne.mz/3)-1,maxWorkers:this.batchReadWorkers>0?this.batchReadWorkers:1,performRequests:this.getManyFromDisk}),this.flushWrites=async()=>{const e=this.pendingWrites;this.pendingWrites=J.Ao.create();const t=S.VS(Array.from(e),(e=>{let{value:t}=e;return t?Object.values(t):[]})),n=ae.default.mark("sqlite_record_cache.flush_writes.duration");try{if(await ce.Y3(this.connection,this.maxSize,t),this.environment){const e={status:"success",wasm_sqlite_storage:le.Z.state.metricDataStore.state.wasm_sqlite_storage};se.fW({environment:this.environment,eventName:"sqlite_record_cache.flush_writes",eventProperties:e,opts:{preboot:!0,sampling:{behavior:"statsig",fallbackBehavior:"custom",fallbackSampleRate:0}}}),ae.default.measure(n,{environment:this.environment,data:e})}}catch(i){if(this.environment){Q.log({level:"warning",from:"SqliteRecordCache",type:"applyRecordCacheOperationsError",error:(0,re.Ui)(i),data:(0,te.fq)(i,{isBrowser:this.environment.device.isBrowser,wasmSqliteStorage:le.Z.state.metricDataStore.state.wasm_sqlite_storage})},{forceSuppressConsoleLog:!0});const e={status:"error",wasm_sqlite_storage:le.Z.state.metricDataStore.state.wasm_sqlite_storage};se.fW({environment:this.environment,eventName:"sqlite_record_cache.flush_writes",eventProperties:e,opts:{preboot:!0,sampling:{behavior:"statsig",fallbackBehavior:"custom",fallbackSampleRate:0}}}),ae.default.measure(n,{environment:this.environment,data:e})}}},this.debouncedFlushWrites=S.Ds(this.flushWrites,500,{maxWait:3e3}),this.connection=e,this.maxSize=t}waitForInitialize(){var e,t;return(null===(e=(t=this.connection).waitForInitialize)||void 0===e?void 0:e.call(t))||Promise.resolve()}set(e,t,n,i,o){if(void 0===e||void 0===e.id){const t=new Error("Attempting to set a record with an invalid pointer.");return Q.log({level:"error",from:"SqliteRecordCache",type:"SqliteRecordCache.setBadPointer",error:{message:"Attempting to set a record with an invalid pointer.",stack:t.stack},data:{pointer:e}}),void ie.IE(t)}const r={pointer:e,userId:i=i||oe.I,value:t,timestamp:Date.now(),importance:n};this.removePendingWrite(e,i,"delete"),this.enqueueWrite({type:"set",record:r,maybeStaleRecord:o})}async get(e,t){const n=`get ${de}`;let i;t=t||oe.I,de++,this.getLatency.start(n);try{const o=this.getInMemory(e,t);if(o)return this.enqueueWrite({type:"access",record:o}),this.getLatency.end(n,"memory"),o.value;i=ae.default.mark("sqlite_record_cache.get_record.duration");const r=await(this.batchReadWorkers>0?this.diskReadQueue.enqueue({pointer:e,userId:t}):this.getFromDiskUnbatched(e,t));if(r){if(this.enqueueWrite({type:"access",record:r}),this.getLatency.end(n,"disk"),this.environment){const e={status:"success",wasm_sqlite_storage:le.Z.state.metricDataStore.state.wasm_sqlite_storage};se.fW({environment:this.environment,eventName:"sqlite_record_cache.get_record",eventProperties:e,opts:{preboot:!0,sampling:{behavior:"statsig",fallbackBehavior:"custom",fallbackSampleRate:0}}}),ae.default.measure(i,{environment:this.environment,data:e})}return r.value}}catch(o){if(this.environment){Q.log({level:"warning",from:"SqliteRecordCache",type:"getError",error:(0,re.Ui)(o),data:(0,te.fq)(o,{isBrowser:this.environment.device.isBrowser,wasmSqliteStorage:le.Z.state.metricDataStore.state.wasm_sqlite_storage})},{forceSuppressConsoleLog:!0});const e={status:"error",wasm_sqlite_storage:le.Z.state.metricDataStore.state.wasm_sqlite_storage};se.fW({environment:this.environment,eventName:"sqlite_record_cache.get_record",eventProperties:e,opts:{preboot:!0,sampling:{behavior:"statsig",fallbackBehavior:"custom",fallbackSampleRate:0}}}),i&&ae.default.measure(i,{environment:this.environment,data:e})}return}finally{this.getLatency.end(n,"miss")}}deleteRecord(e,t){t=t||oe.I,this.removePendingWrite(e,t,"set"),this.enqueueWrite({type:"delete",record:{pointer:e,userId:t}})}async getBlocksWithParent(e){const t=Date.now(),n=e.userId||oe.I,i=await ce.lR(this.connection,{...e,timestamp:t,userId:n}),o=J.Ao.create(),r=S.oA(Array.from(this.pendingWrites).map((i=>{const r=i&&i.value&&n&&i.value[n];if(!r||"set"!==r.type)return;const s=r.record.value?r.record.value.value:void 0;if(!s)return;if(r.record.pointer.table!==ee.iU)return;const a=s;return a.parent_id===e.parent.id&&a.parent_table===e.parent.table?(o.set(r.record.pointer,!0),r.record.timestamp<t&&(r.record.timestamp=t),r.record.value):void 0})));for(const s of i)o.get(s.pointer)||this.getInMemory(s.pointer,s.userId)||r.push(s.value);return r}async getPageBlocksByParent(e){const t=Date.now(),n=e.userId||oe.I,i=await ce.GF(this.connection,{...e,timestamp:t,userId:n});return i.forEach((e=>{this.enqueueWrite({type:"access",record:{pointer:e.pointer,timestamp:t,userId:n,importance:void 0,value:e.value}})})),i}async reset(){this.pendingWrites=J.Ao.create(),await ce.G$(this.connection)}setEnvironment(e){this.environment=e}enqueueWrite(e){this.debouncedFlushWrites();const{pointer:t,userId:n}=e.record,i=this.pendingWrites.get(t),o=i&&i[n];if(o){if("set"===o.type&&"access"===e.type){const t={type:"set",record:{...o.record,timestamp:e.record.timestamp}};return void this.setCacheOperationMap(this.pendingWrites,t)}const t="set"===o.type&&!o.maybeStaleRecord&&o.record.value&&o.record.value.value?o.record.value.value.version:void 0,n="set"===e.type&&e.maybeStaleRecord&&e.record.value&&e.record.value.value?e.record.value.value.version:void 0;if("number"==typeof t&&"number"==typeof n&&t>=n)return}this.setCacheOperationMap(this.pendingWrites,e)}async getFromDiskUnbatched(e,t){const[n]=await this.getManyFromDisk([{pointer:e,userId:t}]);return n}getInMemory(e,t){const n=this.pendingWrites.get(e),i=n&&n[t];if(i&&"set"===i.type)return i.record}setCacheOperationMap(e,t){const n=t,{pointer:i,userId:o}=n.record,r=e.get(i)||{};e.set(i,{...r,[o]:n})}setCachedRecordMap(e,t){const{pointer:n,userId:i}=t,o=e.get(n)||{};e.set(n,{...o,[i]:t})}removePendingWrite(e,t,n){const i=this.pendingWrites.get(e);i&&i[t]&&i[t].type===n&&this.pendingWrites.delete(e)}}var pe=n(405409),me=n(565044);const he=[WebSocket.OPEN,WebSocket.CONNECTING];class ge{constructor(){this.sqliteConnection=void 0,this.requests=new Map}async initialize(){if(W.electronApi&&W.electronApi.sqliteServerEnabled){await this.initializeWebSocket();const e={execSqliteBatchV2:async e=>{const t=O.Il(),{batch:n,precondition:i}=e,o=JSON.stringify({id:t,batch:n,precondition:i,auth:this.authToken});return await this.execSqliteBatchInner(t,o)},execSqliteBatch:async e=>{const t=O.Il(),n=JSON.stringify({id:t,batch:e,auth:this.authToken});return await this.execSqliteBatchInner(t,n)}};this.sqliteConnection=new me.s({connection:e,type:"v2",migrations:await(0,pe.k)(e)})}}async execSqliteBatchInner(e,t){const n=new Promise((t=>{this.requests.set(e,t)}));this.ws.readyState===WebSocket.CLOSED&&await this.initializeWebSocket();try{this.ws.send(t)}catch(o){const e=this.ws;this.ws.onopen=function(n){e.send(t)}}const i=await n;if(i.error)throw new Error("Received SQLite error.");return i.value}async initializeWebSocket(){if(!W.electronApi||!W.electronApi.getSqliteMeta)return;const e=await W.electronApi.getSqliteMeta();if(e.error)return;if(this.ws&&he.includes(this.ws.readyState))return;const{serverProcessPort:t,authToken:n}=e.value;this.authToken=n;const i=`ws://127.0.0.1:${t}`;this.ws=new WebSocket(i),this.ws.onclose=()=>{Q.log({level:"warning",from:"electronSqlite",type:"reinitializingWebsocket"}),this.initializeWebSocket()},this.ws.addEventListener("message",(e=>{const t=e.data.toString(),{id:n,result:i}=JSON.parse(t),o=this.requests.get(n);o&&(this.requests.delete(n),o({value:i}))})),await new Promise((e=>{this.ws.onopen=()=>{e()}}))}}var ve=n(922121),fe=n(176723);class Se{constructor(){this.sqliteConnection=void 0,this.sqliteConnection=new fe.TI({loadWorker:()=>new Worker(new URL(n.p+n.u(27244),n.b)),loadSharedWorker:()=>new SharedWorker(new URL(n.p+n.u(60858),n.b))})}static maybeCreateInstance(e){const{device:t}=e;if(function(e){var t;return!!e.isBrowser&&void 0!==(null===(t=navigator.locks)||void 0===t?void 0:t.request)&&"undefined"!=typeof SharedWorker&&("localhost"!==window.location.hostname||"3003"===window.location.port)}(t)){n="opfs-sahpool",le.Z.state.metricDataStore.update((e=>({...e,wasm_sqlite_storage:n}))),be("loading");const e=new Se;return e.waitForInitialize().then((()=>{be("success")}),(e=>{be("error"),Q.log({level:"error",from:"clientEnvironment",type:"wasmSqliteInitializeError",error:(0,re.Ui)(e),data:(0,te.fq)(e,{isBrowser:!0,wasmSqliteStorage:"opfs-sahpool"})})})),e}var n;be("skipped-unsupported-device")}async waitForInitialize(){return await this.sqliteConnection.waitForInitialize()}}function be(e){le.Z.state.metricDataStore.update((t=>({...t,wasm_sqlite_initialized:e}))),ve.setTag("wasm_sqlite_initialized",e)}var xe=n(200758),ye=n(749085),ke=n(76233),we=n(296994);class je extends ye.default{getInitialState(){return{loading:!1,loaded:!1}}async loadIfNeeded(e){if(this.state.loaded||this.state.loading)return;const t=e();if(!t)return;if(0===ke.CGe(t).length)return;const n=we.FF.katex.load();this.setState({loading:!0,loaded:!1,result:n}),this.setState({loading:!1,loaded:!0,result:await n})}getKatex(){if(this.state.loaded)return this.state.result}}var Ie=n(915157),Ce=n(144615),Me=n(600606),Te=n(454642),Pe=n(702688),Le=n(453730);class _e extends ye.default{static getCacheKey(e){return`LocalBacklinkStore2:${e}`}getInitialState(){return{}}initializeBacklinks(e){let{block:t,currentUserId:n,environment:i}=e;if(this.instanceState[t.id])return;const o=this.getCachedBacklinkState({blockId:t.id,currentUserId:n});o?this.setState({...this.instanceState,[t.id]:{state:o,loaded:!0}}):this.setState({...this.instanceState,[t.id]:{state:{backlinks:[],inaccessibleBacklinkCount:0},loaded:!1}}),Ze(i,t),this.startMessageListeners(t,i)}awaitLoaded(e){return this.waitUntil((()=>{const t=this.state[e];return Boolean(t&&t.loaded)}))}destroyBacklinks(e,t){this.stopMessageListeners(e,t),delete this.instanceState[e]}getBacklinkState(e){let{blockId:t,currentUserId:n}=e;const i=this.state[t];return i?i.state:this.getCachedBacklinkState({blockId:t,currentUserId:n})||{backlinks:[],inaccessibleBacklinkCount:0}}setBacklinkState(e){let{blockId:t,state:n,currentUserId:i}=e;this.setCachedBacklinkState({blockId:t,state:n,currentUserId:i});const o=this.state[t];o&&this.setState({...this.state,[t]:{...o,state:n,loaded:!0}})}updateBacklinks(e){const{createdBacklinks:t,deletedBacklinks:n,currentUserId:i}=e,o=(0,x.cf)(t),r=(0,x.cf)(n),s=o.reduce(((e,t)=>{const{block_id:n}=t;return e[n]=e[n]?[...e[n],t]:[t],e}),{}),a=r.reduce(((e,t)=>{const{block_id:n}=t;return e[n]=e[n]?[...e[n],t]:[t],e}),{}),l=new Set([...Object.keys(s),...Object.keys(a)]);return l.forEach((e=>{const t=s[e]||[],n=a[e]||[],o=this.getBacklinkState({blockId:e,currentUserId:i}),r=t.filter((e=>!o.backlinks.some((t=>S.Xy(e,t))))),l=[...o.backlinks,...r].filter((e=>!n.some((t=>S.Xy(e,t)))));this.setBacklinkState({blockId:e,state:{...o,backlinks:l},currentUserId:i})})),Array.from(l)}resetBacklinkState(e){let{blockIds:t,currentUserId:n}=e;for(const i of t)this.setCachedBacklinkState({blockId:i,state:{backlinks:[],inaccessibleBacklinkCount:0},currentUserId:n})}getCachedBacklinkState(e){let{blockId:t,currentUserId:n}=e;return Ie.Z.get({userId:n,key:_e.getCacheKey(t)})}setCachedBacklinkState(e){let{blockId:t,state:n,currentUserId:i}=e;return Ie.Z.set({userId:i,key:_e.getCacheKey(t),value:n})}async startMessageListeners(e,t){const n=Me.dr.fromSpaceShardRecordId(e,ee.iU);Le.transactionQueue.isPendingTransactionForRecord(n)&&await Le.transactionQueue.drain();const i=this.instanceState[n.id];if(!i)return;let o,r=!1;const s=S.P2(((n,i)=>{const s=o,a=i||void 0;o=a,r?s!==a&&Ze(t,e):r=!0}),1e3),a=(0,Ce.Mv)(n.id);i.messageStoreListenerReference=Pe.ZP.addListener(a,s,void 0,t)}stopMessageListeners(e,t){const n=this.instanceState[e];n&&n.messageStoreListenerReference&&(Pe.ZP.removeListener(n.messageStoreListenerReference,t),n.messageStoreListenerReference=void 0)}}async function Ze(e,t){await Le.transactionQueue.awaitRecordTransaction({id:t.id,table:ee.iU});const n=await Te.getBacklinksForBlock(e,{block:t});"failed"!==n.type&&e.LocalBacklinkStore.setBacklinkState({blockId:t.id,state:{backlinks:n.data.backlinks,inaccessibleBacklinkCount:n.data.inaccessibleBacklinkCount},currentUserId:e.currentUser.id})}var Ee=n(937850);class Ae extends ye.default{getInitialState(){return{isOpen:!1,isSubMenuOverridden:!1,subMenuType:null,menuType:null,shouldRestoreSelectionForMenu:!0,enableShouldShowDebugging:!1}}clear(e){this.update((t=>({...t,menuType:null,shouldRestoreSelectionForMenu:e})))}async clearNativeActionMenuAndRestoreSelectionIfNecessary(){null!==this.state.menuType&&(this.clear(!0),await Ee.Vs(10))}}function Re(e){return`PageDetailsStore:${e.type}:${e.id}`}class Be extends ye.default{getInitialState(){return{}}static getDefaultToggleState(e){return"discussion"===e.type||"backlinks"!==e.type&&void(0,b.t1)(e)}getToggleState(e){const t=Re(e);if(t in this.state)return this.state[t]}setToggleState(e,t){const n=Re(e);this.setState({...this.state,[n]:t})}}var Ve=n(554153);const Fe="spellcheckEnabled";class Ue{constructor(e){let{device:t}=e;this.enabled=void 0,this.currentLanguages=void 0;const n=Ve.Z.get(Fe);this.setEnabled(void 0===n||n)}setEnabled(e){var t,n;(this.enabled=e,Ve.Z.set(Fe,e),null!==(t=W.electronApi)&&void 0!==t&&t.setSpellCheckerEnabled)&&(null===(n=W.electronApi)||void 0===n||n.setSpellCheckerEnabled(e))}isEnabled(){return this.enabled}getCorrections(e){return e.dictionarySuggestions}addToDictionary(e){var t;null!==(t=W.electronApi)&&void 0!==t&&t.addToDictionary&&W.electronApi.addToDictionary(e)}setLanguages(e){var t;S.Xy(this.currentLanguages,e)||(this.currentLanguages=e,null!==(t=W.electronApi)&&void 0!==t&&t.setSpellCheckerLanguages&&W.electronApi.setSpellCheckerLanguages(0===e.length?[navigator.language]:e))}async getLanguages(){var e;const t=new Intl.DisplayNames([navigator.language],{type:"language"}),n=[];if(null!==(e=W.electronApi)&&void 0!==e&&e.getSpellCheckerLanguages){const e=await W.electronApi.getSpellCheckerLanguages();for(const i of e)n.push({code:i,name:t.of(i)})}return n}async getAvailableLanguages(){var e;const t=new Intl.DisplayNames([navigator.language],{type:"language"}),n=[];if(null!==(e=W.electronApi)&&void 0!==e&&e.getAvailableSpellCheckerLanguages){const e=await W.electronApi.getAvailableSpellCheckerLanguages();for(const i of e)n.push({code:i,name:t.of(i)})}return n}}var De=n(14577);class Oe extends De.Z{}const Ne=["nativeRedirect","page","space","nativeTab","onboarding","unsubscribe","unknown","uiDoc","root","chat","marketplace","settingsConsoleOrganization"],ze=[...Ne,"login","signup","quickSearch"];let qe=0;async function We(e){var t,n;const{minimalEnvironment:m,prefetchCache:h}=e,{device:g,mobileNative:v,cookieService:f}=m,S=""+qe++,b=g.isElectron&&Boolean(null===(t=W.electronApi)||void 0===t?void 0:t.sqliteServerEnabled)?await async function(e){var t;if(!e.device.isElectron||null===(t=W.electronApi)||void 0===t||!t.sqliteServerEnabled)return;const n=new ge;return await n.initialize(),n}({device:g}):void 0,x=Se.maybeCreateInstance({device:g}),y=new l.Z,k=new c.Xk,w=new u.Z;let j;j=null!==(n=W.electronApi)&&void 0!==n&&n.getAvailableSpellCheckerLanguages?new Ue({device:g}):new xe.P({device:g});const I=(null==v?void 0:v.sqliteConnection)||(null==b?void 0:b.sqliteConnection)||(null==x?void 0:x.sqliteConnection),C=I?new ue(I,g.isDesktop?1e6:1e5):void 0,M=new o.q({inMemoryRecordCache:new i.Z({name:"default"}),persistedRecordCache:C});x&&x.waitForInitialize().catch((()=>{M.disablePersistedRecordCache()}));const T=function(e){const{device:t,RouterStore:n,ThemeStore:i}=e;let o=Ne;return(t.isElectron||t.isMobileNative)&&(o=ze),new Oe((()=>{const e=n.state.route;return e&&o.includes(e.name)?i.state.mode:"light"}),{debugName:"ThemeModeStore"})}({device:g,RouterStore:y,ThemeStore:w}),P=g.isMobile?new Ae:void 0,L=await $.getPublicDomainUserId({device:g,mobileNative:v,cookieService:f}),_=new r.CurrentUser,Z=new N({environmentName:"production",getSettings:()=>({enableTestDateOffset:!0,enableIdSchema:Boolean(!1)}),isServerOriginated:!1,mapSpaceIdToShortId:e=>{const t=(0,H.aV)({defaultRecordCache:M,currentUser:_,spaceId:e});if(t&&t.short_id_str)return Number(t.short_id_str)}}),E={key:S,AppUpdateStore:new s.D,device:g,WindowSizeStore:new p.j({device:g},window),KeyboardShortcutStackStore:new a.h({device:g}),defaultRecordCache:M,mobileNative:v,RouterStore:y,ThemeStore:w,ThemeModeStore:T,ElectronSqlite:b,KatexStore:new je,LocalBacklinkStore:new _e,PageDetailsStore:new Be,updateCurrentUserId:void 0,currentUser:_,SpellCheckStore:j,NativeMobileActionBarStore:P,TextSelectionCompositionStore:new d.h,recordSubscriptionActions:G,prefetchCache:h,TabbedRouterStore:k,cookieService:f,publicDomainUserId:L,idCreator:Z};return K.LH(E),C&&C.setEnvironment(E),E}},200758:(e,t,n)=>{"use strict";n.d(t,{P:()=>d,x:()=>c});var i=n(927117),o=n.n(i),r=n(554153),s=n(653965),a=n(247839);const l="spellcheckEnabled";function c(e){return e instanceof d}class d{constructor(e){this.langCache=new(o())(100),this.enabled=void 0,this.currentInputElement=void 0,this.handleSelectionChange=()=>{if(this.enabled){const e=this.getInputElement();e&&e!==this.currentInputElement?(this.currentInputElement=e,this.handleDetectLanguageChange(e)):e&&this.handleDetectLanguageChangeThrottled(e)}},this.handleDetectLanguageChange=e=>{const t=e.textContent;if(t){let e=this.detectLanguages(t);void 0!==e&&(e=e.map((e=>navigator.language.startsWith(e)?navigator.language:e))),this.setLanguages(e)}},this.handleDetectLanguageChangeThrottled=s.P2(this.handleDetectLanguageChange,500),this.currentLanguages=void 0;const t=r.Z.get(l);this.setEnabled(void 0===t||t);const{isMac:n}=e.device;!n&&a.electronApi&&a.electronApi.loadSpellcheck&&(a.electronApi.loadSpellcheck(),document.addEventListener("selectionchange",this.handleSelectionChange))}setEnabled(e){this.enabled=e,r.Z.set(l,e),a.electronApi&&a.electronApi.setSpellCheckerLanguages&&(e?a.electronApi.setSpellCheckerLanguages(this.getLanguages()):a.electronApi.setSpellCheckerLanguages([]))}isEnabled(){return this.enabled}detectLanguages(e){let t;return this.langCache.cache[e]?(t=this.langCache.get(e),t):(a.electronApi&&a.electronApi.cld&&a.electronApi.cld.detect(e,((e,n)=>{n&&n.reliable&&n.languages&&(t=n.languages.map((e=>e.code)))})),this.langCache.set(e,t),t)}getCorrections(e){return e.dictionarySuggestions}setLanguages(e){s.Xy(this.currentLanguages,e)||(this.currentLanguages=e,a.electronApi&&a.electronApi.setSpellCheckerLanguages&&a.electronApi.setSpellCheckerLanguages(e||[]))}getInputElement(){const e=document.activeElement;if(e instanceof HTMLElement&&("input"===e.tagName||"true"===e.contentEditable))return e}getLanguages(){return navigator.languages.filter((e=>e.includes("-")))}}},574055:(e,t,n)=>{"use strict";n.d(t,{V:()=>o,Z:()=>s});var i=n(749085);let o=function(e){return e.IN_APP_CALLOUT_CONFLICT="in-app callout conflict",e.DARK_MODE="not shown in dark mode",e}({});class r extends i.default{getInitialState(){return{isVisible:!1,suppressReason:void 0}}}const s=new r},745483:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(749085),o=n(292595);class r extends i.default{getInitialState(){return{openModals:new Set}}}const s=new r,a=s;(0,o.exposeDebugValue)("GlobalModalStore",s)},361254:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(749085);class o extends i.default{getInitialState(){return{open:!1,openAnimationCompleted:!0,closeAnimationCompleted:!0}}}const r=o},712309:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(749085),o=n(471924);class r extends i.default{getInitialState(){return{modalInfoById:{}}}async showModal(e){const t=o.Il();return new Promise((n=>{const i=e((e=>{n(e),this.internalCloseModal(t,(()=>{this.internalRemoveModal(t)}))}));this.update((e=>({modalInfoById:{...e.modalInfoById,[t]:{...i,isOpen:!0}}})))}))}internalRemoveModal(e){this.update((t=>{const n={...t.modalInfoById};return delete n[e],{modalInfoById:n}}))}internalCloseModal(e,t){this.update((n=>({modalInfoById:{...n.modalInfoById,[e]:{...n.modalInfoById[e],isOpen:!1,onClosed:t}}})))}}const s=new r},949204:(e,t,n)=>{"use strict";n.d(t,{Id:()=>k,Ng:()=>w,Px:()=>x,ow:()=>y,t_:()=>b,um:()=>S});var i=n(815145),o=n(519889),r=n(709291),s=n(117224),a=n(454642),l=n(709953),c=n(164964),d=n(29974),u=n(210228),p=n(433929),m=n(548779),h=n(80444),g=n(109867),v=n(228517);const f=(0,r.defineMessages)({joinTeamSuccessMessage:{id:"teamInviteLinkActions.joinTeam.confirmationMessage",defaultMessage:"Joined {teamName}"},requestTeamSuccessMessage:{id:"teamInviteLinkActions.requestAccess.successMessage",defaultMessage:"Successfully requested membership"},requestTeamFailureMessage:{id:"teamInviteLinkActions.requestAccess.failureMessage",defaultMessage:"Failed to request membership"}});async function S(e){let{environment:t,userId:n,teamStore:i,user:o}=e;const r=i.getSpaceId();if(!r)return;await g.Cj({environment:t,teamId:i.id,spaceId:r,teamMemberInfos:o,isSettingDefaultTeam:!1,inviterId:n})&&(s.UD(t,{store:i,joined_role:"member",from:"team_invite_link"}),await b({environment:t,userId:n,teamStore:i}),c.oV({label:p.default.formatMessage(f.joinTeamSuccessMessage,{teamName:i.getName()})}))}async function b(e){let{environment:t,userId:n,teamStore:o}=e;const r=h.default.state.currentUserRootStore,s=o.getSpaceId();if(!s||!r)return;const a=r.getSpaceViewStores().filter((e=>e.getSpaceId()===s))[0];await d.y3({environment:t,spaceViewStore:a,userSettingsStore:void 0,userRootStore:r,pageVisitSource:i.tY.JoinTeam,navigationType:"switchingToOrLoadingSpace"}),await v.I({environment:t,spaceId:s,userId:n}),g.hI({environment:t,teamStore:o,shouldScroll:!0})}async function x(e){let{environment:t,teamId:n,message:i}=e;if(!t.currentUser.id)return;"success"===(await a.requestAccess(t,{type:"current-actor-to-team",teamId:n,message:i})).type?(s.LB(t,{teamId:n}),await k({environment:t}),new Promise((e=>setTimeout(e,500))).then((()=>{c.oV({label:p.default.formatMessage(f.requestTeamSuccessMessage)})}))):c.oV({label:p.default.formatMessage(f.requestTeamFailureMessage)})}async function y(e){let{environment:t,teamStore:n,accessRequestStore:i,status:r}=e;const a=i.getForActorId();if(!a)return;const c=i.getRecordModel({table:o.KJ,id:a});if(c){if("approved"===r){const e=[{type:"member",entity_type:"user",user_id:c.id}];if(!(await g.Uj({environment:t,teamStore:n,teamMemberInfos:e,isSettingDefaultTeam:!1,createNewTeamFlowId:void 0})))return}u.createAndCommit({userAction:"GrantAccessActivityAction.handleGrantAccess",environment:t,perform:e=>{l.sW({store:i,transaction:e,data:{resolved_time:Date.now(),resolved_by_table:o.KJ,resolved_by_id:t.currentUser.id,status:r}})}}),s.co(t,{store:n,resolution:r})}}async function k(e){let{environment:t}=e;const{lastVisitedSpaceView:n,userRootStore:o,userSettingsStore:r}=await(0,m.iX)({environment:t,disableRedirectUrl:!1});n?await d.y3({environment:t,spaceViewStore:n,userRootStore:o,userSettingsStore:r,pageVisitSource:i.tY.BackForward,navigationType:"switchingToOrLoadingSpace"}):await d.L5({environment:t,userRootStore:o,userSettingsStore:r,pageVisitSource:i.tY.BackForward})}async function w(e){let{environment:t,teamId:n}=e;const i=await a.getTeamAccessRequestMetadata(t,{teamId:n});if("success"===i.type)return i.data}},314889:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var i=n(667294),o=n(800480),r=n(724405),s=n(709291),a=n(374194),l=n(550506),c=n(158297),d=n(164369),u=n(949204),p=n(274016),m=n(785893);const h=(0,s.defineMessages)({message_placeholder:{id:"teamInviteLinkRequestPage.message.placeholder",defaultMessage:"Message (optional)"}});const g=function(e){const{teamStore:t,teamName:n,teamId:g,isModalOpen:v,onDismiss:f}=e,[S,b]=(0,i.useState)(""),x=(0,o.O7)(),y=(0,s.useIntl)(),k=async()=>{await u.Px({environment:x,teamId:g,message:S}),f()},w=(0,r.yK)((()=>({modal:{alignSelf:"center",overflow:"visible",padding:15,width:420},requestTitle:{display:"inline-flex",marginBottom:10},icon:{marginLeft:4,marginRight:4},footer:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:15},requestInvitesButton:{marginLeft:20},input:{padding:8}})),[]);return(0,m.jsx)(l.Z,{open:v,onDismiss:f,innerStyle:w.modal,preventHideChildrenWhileOpening:!0,render:()=>(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{style:w.requestTitle,children:(0,m.jsx)(s.FormattedMessage,{id:"teamInviteLinkRequestModal.reasonForRequest.title",defaultMessage:"Request access to {icon} {teamName}",values:{teamName:n,icon:(0,m.jsx)(p.p,{style:w.icon,store:t,disabled:!0,size:22})}})}),(0,m.jsx)(a.Z,{textarea:!0,style:w.input,value:S,onChange:e=>{b(e.target.value)},placeholder:y.formatMessage(h.message_placeholder)}),(0,m.jsxs)("div",{style:w.footer,children:[(0,m.jsx)(d.Z,{isSecondaryColor:!0,isSmall:!0,isMultiline:!0,children:(0,m.jsx)(s.FormattedMessage,{id:"teamInviteLinkRequestModal.caption",defaultMessage:"Your teamspace owners will approve or decline your request."})}),(0,m.jsx)(c.Z,{isLarge:!0,style:w.requestInvitesButton,onClick:k,children:(0,m.jsx)(s.FormattedMessage,{id:"teamInviteLinkRequestModal.requestAccessButton.label",defaultMessage:"Request"})})]})]})})}},882855:(e,t,n)=>{"use strict";n.d(t,{E:()=>r});n(667294);var i=n(745238),o=n(785893);const r=(0,i.IU)("chevronDownRounded",{viewBox:"0 0 15 9",svg:(0,o.jsx)("path",{d:"M7.92188 8.65625C8.19531 8.64844 8.44531 8.54688 8.64844 8.32812L14.5859 2.25C14.7578 2.07812 14.8516 1.85938 14.8516 1.60156C14.8516 1.08594 14.4453 0.671875 13.9297 0.671875C13.6797 0.671875 13.4375 0.773438 13.2578 0.953125L7.92969 6.42969L2.58594 0.953125C2.40625 0.78125 2.17188 0.671875 1.91406 0.671875C1.39844 0.671875 0.992188 1.08594 0.992188 1.60156C0.992188 1.85938 1.08594 2.07812 1.25781 2.25L7.20312 8.32812C7.41406 8.54688 7.64844 8.65625 7.92188 8.65625Z"})})},516880:(e,t,n)=>{"use strict";n.d(t,{R:()=>r});n(667294);var i=n(745238),o=n(785893);const r=(0,i.IU)("chevronUpRounded",{viewBox:"0 0 15 9",svg:(0,o.jsx)("path",{d:"M1.258 6.5L7.203.422a.946.946 0 01.719-.32.99.99 0 01.726.32L14.586 6.5a.89.89 0 01.266.648c0 .524-.407.93-.922.93a.921.921 0 01-.672-.281L7.93 2.32 2.586 7.797a.926.926 0 01-.672.281.915.915 0 01-.922-.93c0-.25.094-.476.266-.648z"})})},664878:(e,t,n)=>{"use strict";n.d(t,{h:()=>r});n(667294);var i=n(745238),o=n(785893);const r=(0,i.IU)("dot",{viewBox:"0 0 5 4",svg:(0,o.jsx)("circle",{cx:"2.5",cy:"2",r:"2"})})},825278:(e,t,n)=>{"use strict";n.d(t,{H:()=>r});n(667294);var i=n(745238),o=n(785893);const r=(0,i.IU)("eyes",{viewBox:"0 0 72 72",svg:(0,o.jsx)("path",{d:"M17.0312 64.4375C26.25 64.4375 33.5625 52.9688 33.5625 36.4375C33.5625 19.9062 26.25 8.46875 17.0312 8.46875C7.8125 8.46875 0.5 19.9062 0.5 36.4375C0.5 52.9688 7.8125 64.4375 17.0312 64.4375ZM54.9688 64.4375C64.1875 64.4375 71.5 52.9688 71.5 36.4375C71.5 19.9062 64.1875 8.46875 54.9688 8.46875C45.75 8.46875 38.4375 19.9062 38.4375 36.4375C38.4375 52.9688 45.75 64.4375 54.9688 64.4375ZM10.0625 47.1875C15.125 47.1875 18.4688 43.6562 18.4688 38.3438C18.4688 33.0938 15.125 29.5625 10.0625 29.5625C7.6875 29.5625 5.71875 30.3125 4.25 31.6875C5.375 19.9375 10.6875 11.9375 17.0312 11.9062C24.25 11.875 30.125 22.0312 30.125 36.4375C30.125 50.7812 24.25 60.9688 17.0312 61C11.5312 61.0312 6.78125 54.9688 4.90625 45.5938C6.28125 46.625 8.03125 47.1875 10.0625 47.1875ZM47.9688 47.1875C53 47.1875 56.4062 43.6562 56.4062 38.3438C56.4062 33.0938 53 29.5625 47.9688 29.5625C45.5938 29.5625 43.5938 30.3438 42.1562 31.6875C43.2812 19.9375 48.5938 11.9375 54.9688 11.9375C62.1562 11.9062 68 22.0938 68 36.4375C68 50.7812 62.1562 60.9688 54.9688 60.9688C49.4375 61 44.6875 54.9375 42.7812 45.5938C44.1562 46.5938 45.9375 47.1875 47.9688 47.1875ZM45.5312 37.4062C44.4375 37.25 43.75 35.9688 44.0312 34.6562C44.3125 33.3125 45.3125 32.3438 46.375 32.5312C47.4688 32.75 48.0938 34.0312 47.8438 35.3125C47.5938 36.6562 46.5938 37.5938 45.5312 37.4062ZM7.625 37.4062C6.53125 37.25 5.84375 35.9688 6.09375 34.6562C6.375 33.3125 7.40625 32.3438 8.4375 32.5312C9.5625 32.7812 10.1875 34.0312 9.9375 35.3125C9.6875 36.6562 8.65625 37.5938 7.625 37.4062Z"})})},70954:(e,t,n)=>{"use strict";n.d(t,{C:()=>r});n(667294);var i=n(745238),o=n(785893);const r=(0,i.IU)("notionLogoStroked",{viewBox:"0 0 41 42",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M4.253 2.903h0-.01c-1.02.09-1.806.481-2.322 1.142-.5.642-.671 1.441-.671 2.21v23.228c0 1.267.47 2.316 1.416 3.577h0l.006.008 4.99 6.477h0l.005.005c.465.593.963 1.017 1.617 1.256.63.23 1.33.26 2.138.221h.01l24.652-1.49h.008c1.137-.08 2.038-.396 2.632-1.071.588-.668.746-1.543.746-2.431V9.904c0-.584-.133-1.05-.508-1.486-.27-.311-.669-.602-1.113-.925a54.305 54.305 0 01-.176-.13l-.007-.004-.005-.004-6.772-4.761c-.838-.609-1.516-1.017-2.365-1.21-.824-.187-1.75-.156-3.047-.044L4.253 2.903z",fill:"#fff",stroke:"#fff",strokeWidth:"1.5"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.257 3.158L5.176 4.637c-1.62.14-2.184 1.197-2.184 2.464v21.971c0 .987.352 1.83 1.198 2.959l4.72 6.126c.776.987 1.48 1.198 2.96 1.127l23.32-1.408c1.973-.14 2.537-1.057 2.537-2.606V10.552c0-.801-.316-1.032-1.25-1.714l-.16-.117-6.41-4.507c-1.55-1.126-2.184-1.268-4.65-1.056zM12.4 10.146c-1.904.129-2.337.158-3.418-.72l-2.75-2.183c-.28-.283-.14-.635.565-.705L26.102 5.13c1.62-.141 2.466.423 3.1.916l3.311 2.394c.141.07.493.492.07.492L12.645 10.13l-.245.016zM10.179 35.06V14.074c0-.916.281-1.338 1.126-1.41l22.898-1.337c.777-.07 1.128.423 1.128 1.338v20.844c0 .916-.14 1.691-1.41 1.761l-21.91 1.268c-1.269.07-1.832-.352-1.832-1.48zm21.63-19.86c.141.635 0 1.268-.635 1.34l-1.056.21v15.492c-.916.493-1.761.775-2.466.775-1.128 0-1.41-.352-2.255-1.408l-6.905-10.845v10.493l2.185.493s0 1.267-1.763 1.267l-4.86.282c-.142-.282 0-.986.492-1.127l1.269-.351V17.947l-1.761-.142c-.141-.634.21-1.549 1.197-1.62l5.214-.351 7.187 10.986V17.1l-1.832-.21c-.14-.776.422-1.339 1.127-1.409l4.863-.283z",fill:"#222"})]})})},64530:(e,t,n)=>{"use strict";n.d(t,{y:()=>r});n(667294);var i=n(745238),o=n(785893);const r=(0,i.IU)("settingsNotificationsAndPersonal",{viewBox:"0 0 20 20",svg:(0,o.jsx)("path",{d:"M12.5361 7.54883C13.2744 7.54883 13.9033 7.09082 14.1631 6.44141H16.4258C16.7607 6.44141 17.0479 6.14746 17.0479 5.79199C17.0479 5.43652 16.7676 5.14258 16.4258 5.14258H14.1699C13.9102 4.49316 13.2744 4.03516 12.5361 4.03516C11.7979 4.03516 11.1621 4.49316 10.9023 5.14258H3.59473C3.23242 5.14258 2.95215 5.43652 2.95215 5.79199C2.95215 6.14746 3.23926 6.44141 3.59473 6.44141H10.9023C11.1621 7.09082 11.7979 7.54883 12.5361 7.54883ZM12.5361 6.62598C12.0713 6.62598 11.6953 6.25684 11.6953 5.79199C11.6953 5.31348 12.0713 4.95117 12.5361 4.95117C13.0078 4.95117 13.3701 5.31348 13.3701 5.79199C13.3701 6.25684 13.0078 6.62598 12.5361 6.62598ZM3.56738 9.40137C3.23242 9.40137 2.95215 9.68848 2.95215 10.0508C2.95215 10.3994 3.23926 10.6934 3.56738 10.6934H5.91211C6.16504 11.3428 6.80078 11.8076 7.5459 11.8076C8.27734 11.8076 8.91309 11.3428 9.17285 10.6934H16.4053C16.7607 10.6934 17.0479 10.4062 17.0479 10.0508C17.0479 9.68848 16.7676 9.40137 16.4053 9.40137H9.17285C8.91309 8.75195 8.27734 8.29395 7.5459 8.29395C6.80762 8.29395 6.17188 8.75195 5.91211 9.40137H3.56738ZM7.5459 10.8848C7.07422 10.8848 6.70508 10.5156 6.70508 10.0508C6.70508 9.57227 7.07422 9.20996 7.5459 9.20996C8.01758 9.20996 8.37988 9.57227 8.37988 10.0508C8.37988 10.5156 8.01758 10.8848 7.5459 10.8848ZM12.5361 16.0596C13.2744 16.0596 13.9102 15.6016 14.1699 14.9521H16.4258C16.7607 14.9521 17.0479 14.6582 17.0479 14.3027C17.0479 13.9404 16.7676 13.6533 16.4258 13.6533H14.1631C13.9102 13.0039 13.2744 12.5459 12.5361 12.5459C11.7979 12.5459 11.1621 13.0039 10.9023 13.6533H3.59473C3.23242 13.6533 2.95215 13.9473 2.95215 14.3027C2.95215 14.6582 3.23926 14.9521 3.59473 14.9521H10.9023C11.1621 15.6016 11.7979 16.0596 12.5361 16.0596ZM12.5361 15.1436C12.0713 15.1436 11.6953 14.7676 11.6953 14.3027C11.6953 13.8311 12.0713 13.4619 12.5361 13.4619C13.0078 13.4619 13.3701 13.8311 13.3701 14.3027C13.3701 14.7676 13.0078 15.1436 12.5361 15.1436Z"})})},318613:(e,t,n)=>{"use strict";n.r(t),n.d(t,{clearNotionLocalStorageWithNoPermission:()=>r});var i=n(646637),o=n(472128);function r(){i.Z.removeAllIfNoPermission(),o.Z.removeAllIfNoPermission()}},927117:(e,t,n)=>{var i=n(717187),o=n(35717);function r(e){if(!(this instanceof r))return new r(e);"number"==typeof e&&(e={max:e}),e||(e={}),i.EventEmitter.call(this),this.cache={},this.head=this.tail=null,this.length=0,this.max=e.max||1e3,this.maxAge=e.maxAge||0}e.exports=r,o(r,i.EventEmitter),Object.defineProperty(r.prototype,"keys",{get:function(){return Object.keys(this.cache)}}),r.prototype.clear=function(){this.cache={},this.head=this.tail=null,this.length=0},r.prototype.remove=function(e){if("string"!=typeof e&&(e=""+e),this.cache.hasOwnProperty(e)){var t=this.cache[e];return delete this.cache[e],this._unlink(e,t.prev,t.next),t.value}},r.prototype._unlink=function(e,t,n){this.length--,0===this.length?this.head=this.tail=null:this.head===e?(this.head=t,this.cache[this.head].next=null):this.tail===e?(this.tail=n,this.cache[this.tail].prev=null):(this.cache[t].next=n,this.cache[n].prev=t)},r.prototype.peek=function(e){if(this.cache.hasOwnProperty(e)){var t=this.cache[e];if(this._checkAge(e,t))return t.value}},r.prototype.set=function(e,t){var n;if("string"!=typeof e&&(e=""+e),this.cache.hasOwnProperty(e)){if((n=this.cache[e]).value=t,this.maxAge&&(n.modified=Date.now()),e===this.head)return t;this._unlink(e,n.prev,n.next)}else n={value:t,modified:0,next:null,prev:null},this.maxAge&&(n.modified=Date.now()),this.cache[e]=n,this.length===this.max&&this.evict();return this.length++,n.next=null,n.prev=this.head,this.head&&(this.cache[this.head].next=e),this.head=e,this.tail||(this.tail=e),t},r.prototype._checkAge=function(e,t){return!(this.maxAge&&Date.now()-t.modified>this.maxAge)||(this.remove(e),this.emit("evict",{key:e,value:t.value}),!1)},r.prototype.get=function(e){if("string"!=typeof e&&(e=""+e),this.cache.hasOwnProperty(e)){var t=this.cache[e];if(this._checkAge(e,t))return this.head!==e&&(e===this.tail?(this.tail=t.next,this.cache[this.tail].prev=null):this.cache[t.prev].next=t.next,this.cache[t.next].prev=t.prev,this.cache[this.head].next=e,t.prev=this.head,t.next=null,this.head=e),t.value}},r.prototype.evict=function(){if(this.tail){var e=this.tail,t=this.remove(this.tail);this.emit("evict",{key:e,value:t})}}},620745:(e,t,n)=>{"use strict";var i=n(973935);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot}}]);