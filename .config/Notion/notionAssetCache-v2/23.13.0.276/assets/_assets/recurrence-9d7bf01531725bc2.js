"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[90653],{603992:(e,t,a)=>{a.r(t),a.d(t,{addRecurrence:()=>h,createRecurrenceInner:()=>b,deleteRecurrence:()=>v});var r=a(640506),n=a(471924),o=a(798963),s=a(718844),i=a(606287),c=a(401898),l=a(143627),d=a(730459),u=a(741195),m=a(80444),y=a(206258),p=a(496802),g=a(709953),f=a(210228);function h(e){let{environment:t,blockStore:a,recurrence:n}=e;const c=a.getAutomationId(),l=function(e){return{...e,start_date:(0,r.Io)(new Date(e.start_date))}}(n);c?function(e,t,a,r){const n=a.getParentStore();if(!n||n.table!==i.vF)return;const c=a.getSpaceId(),l={table:o.cv,id:t,spaceId:c},d=y.Mz.createChildStore(a,l),m=d.getTrigger();if(!m)return;const p=d.getActionStores()[0];f.createAndCommit({environment:e,userAction:"recurrenceActions.updateRecurrence",perform:t=>{const o=M({automationId:d.id,spaceId:c,collectionPointer:n.getSpaceShardedPointer(),templatePageId:a.id});let i;p?(i=p.id,g.sW({store:p,data:o,transaction:t})):(i=(0,u.TS)({environment:e,table:s.Xj,spaceId:c}),g.ae({environment:e,table:s.Xj,inMemoryRecordCache:d.inMemoryRecordCache,transaction:t,value:{id:i,...o}})),g.sW({store:d,data:{alive:!0,status:"active",trigger:{id:m.id,type:"recurrence",recurrence:r},action_ids:[i]},transaction:t})}}),x(e,{type:"updated",frequency:r.frequency})}(t,c,a,l):function(e,t,a){f.createAndCommit({environment:e,userAction:"recurrenceActions.createRecurrence",perform:r=>{b(r,e,t,a)}})}(t,a,l)}function v(e){let{environment:t,blockStore:a}=e;const r=a.getAutomationStore();(0,c.$K)(r)&&(f.createAndCommit({environment:t,userAction:"recurrenceActions.deleteRecurrence",perform:e=>{l.disableAutomation({automationStore:r,environment:t,transaction:e}),l.deleteAutomation({automationStore:r,environment:t,transaction:e})}}),x(t,{type:"deleted"}))}function b(e,t,a,r){const{currentUserRootStore:c}=m.default.state;if(!c)return;const l=a.getParentStore();if(!l||l.table!==i.vF)return;if(!l.getParentBlockStore())return;const d=a.getSpaceId(),y=(0,u.TS)({environment:t,table:s.Xj,spaceId:d}),f=g.ae({environment:t,table:o.cv,inMemoryRecordCache:a.inMemoryRecordCache,value:{parent_id:a.id,parent_table:a.table,alive:!0,space_id:d,status:"active",trigger:{id:n.Il(),type:"recurrence",recurrence:r},action_ids:[y]},transaction:e}).pointer.id;p.FH({stores:[a],update:{automation_id:f},transaction:e}),g.ae({environment:t,table:s.Xj,inMemoryRecordCache:a.inMemoryRecordCache,transaction:e,value:{id:y,...M({automationId:f,spaceId:d,collectionPointer:l.getSpaceShardedPointer(),templatePageId:a.id})}}),x(t,{type:"created",frequency:r.frequency})}function M(e){const{automationId:t,spaceId:a,collectionPointer:r,templatePageId:n}=e;return{parent_id:t,parent_table:o.cv,type:"create_page",alive:!0,space_id:a,config:{collection:r,template_page_id:n}}}function x(e,t){d.K4(e,"recurrence_saved",t)}},793289:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(667294),n=a(313991),o=a(296994),s=a(785893);const i=function(e){let{firstDayOfWeek:t,value:a,selectValue:i=!0,onChange:c,disabledDays:l}=e;const d=(0,r.useMemo)((()=>new Date(a)),[a]),[u,m]=(0,r.useState)(d),y=(0,r.useRef)(a);(0,r.useLayoutEffect)((()=>{y.current!==a&&(m(new Date(a)),y.current=a)}),[a]);const p=(0,r.useCallback)(((e,t,a)=>{c(e.getTime())}),[c]);return(0,s.jsx)(o.yG,{locale:n.SP,className:"notion-calendar-picker",numberOfMonths:1,weekStartsOn:t,modifiers:i?{value:d}:{},showOutsideDays:!0,fixedWeeks:!0,onDayClick:p,onMonthSelected:m,disabled:l,month:u})}},469317:(e,t,a)=>{a.r(t),a.d(t,{default:()=>G,defaultRecurrenceConfig:()=>Q});var r=a(730120),n=a(667294),o=a(800480),s=a(724405),i=a(640506),c=a(253877),l=a(542853),d=a(924211),u=a(954061),m=a(709291),y=a(653965),p=a(401898),g=a(619584),f=a(628020),h=a(460709),v=a(425498),b=a(319385),M=a(552275),x=a(231945),k=a(396525),R=a(288359),I=a(374194),S=a(203386),C=a(478140),j=a(828992),w=a(632163),P=a(489728),A=a(672495),E=a(307931),T=a(164369),L=a(793289),D=a(253523),_=a(531701),F=a(98742),Z=a(526388),q=a(785893);function O(e){const{buttonPopupEvents:t,focused:a,frequencyLabel:r,recurrence:n,showTooltip:i,variant:c="dropdown"}=e,d=(0,o.O7)(),{device:u}=d,p=(0,s.Fg)(),g=(0,m.useIntl)(),f=function(){const{isMobile:e}=(0,o.Fy)();return(0,s.yK)((t=>({iconStyle:{fill:t.regularIconColor,width:e?18:16}})),[e])}(),h=Boolean(n);return(0,q.jsx)(Z.Z,{disableTooltip:!i,delayThreshold:300,renderTooltip:()=>r,render:e=>{switch(c){case"dropdown":return(0,q.jsx)(R.Z,{...(0,F.Z)(e,t),focused:a,icon:(0,D.N)(f.iconStyle),title:(0,q.jsx)(m.FormattedMessage,{defaultMessage:"Repeat",id:"database.templatePickerItem.actionMenu.repeat"}),showExtensionArrow:u.isMobile,right:B({isActive:h,recurrence:n,intl:g})});case"icon":return(0,q.jsx)(P.Z,{...y.CE((0,F.Z)(e,t),["focused","ignoreLocalHoverState"]),disallowTabbing:!1,isSmall:!0,role:"button",children:(0,D.N)({color:_.ZP.blue,width:14})});case"label":return(0,q.jsxs)(P.Z,{...(0,F.Z)(e,t),children:[B({isActive:h,recurrence:n,intl:g}),(0,l.i)({fill:p.lightIconColor,marginLeft:4,width:10})]})}}})}function N(e,t){return(0,u.rruleFromRecurrence)({...e,weekdays:void 0,hour:0,minute:0}).toText((e=>{switch(e){case"every":return t.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.every",defaultMessage:"every"});case"day":return t.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.day",defaultMessage:"day"});case"days":return t.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.days",defaultMessage:"days"});case"week":return t.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.week",defaultMessage:"week"});case"weeks":return t.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.weeks",defaultMessage:"weeks"});case"month":return t.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.month",defaultMessage:"month"});case"months":return t.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.months",defaultMessage:"months"});case"year":return t.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.year",defaultMessage:"year"});case"years":return t.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.years",defaultMessage:"years"});default:return e.toString()}}))}function B(e){let{isActive:t,recurrence:a,intl:r}=e;return t?a?(0,q.jsx)(q.Fragment,{children:N(a,r)}):void 0:(0,q.jsx)(m.FormattedMessage,{defaultMessage:"Off",id:"database.templatePickerItem.recurrenceConfigMenuLabel.off"})}var U=a(484795),W=a(825464);function H(e){const t=(0,o.O7)(),{device:a}=t,i=(0,m.useIntl)(),[c,l]=(0,n.useState)(e.value),[d,u]=(0,n.useState)(void 0),y=t=>{const a=(0,U.TD)(t,i),n=r.ou.fromFormat(a??"","T");return n.isValid?(u(void 0),e.onUpdate({hour:n.hour,minute:n.minute})):(u("invalid"),e.onError&&e.onError()),n},p=e=>{const t=e.target.value;l(t),y(t)},g=()=>{const e=y(c);e.isValid&&l(e.toLocaleString(r.ou.TIME_SIMPLE))},f=(0,s.yK)((e=>({input:{textAlign:"right"},error:{boxShadow:e.outlineRedInputBoxShadow}})),[]);return(0,q.jsx)(Z.Z,{renderTooltip:()=>function(e){if("invalid"===e)return(0,q.jsx)(m.FormattedMessage,{defaultMessage:"Invalid time",id:"timeInput.invalid"})}(d),forceVisibleState:void 0!==d,placement:W.u.Bottom,render:()=>(0,q.jsx)(I.Z,{type:"text",onChange:p,onSubmit:g,onBlur:g,value:c,size:1,style:{...e.style,...d?f.error:{},fontSize:a.isMobile?16:14},inputStyle:f.input})})}var z=a(62069),K=a(567149),X=a(407057),V=a(164921);function Y(e){const{weekdays:t,onChange:a}=e,r=e.minimumSelection??0,n=(0,m.useIntl)(),o=(0,s.yK)((e=>({wrapper:{display:"flex",alignItems:"center",justifyContent:"space-between",textAlign:"center"},selectedDay:{...J,background:e.blueButtonBackground,color:e.regularInvertedTextColor},unselectedDay:{...J,background:e.accentColors.gray[50],color:e.mediumTextColor},selectedDayHover:{background:e.blueButtonHoveredBackground},unselectedDayHover:{background:e.accentColors.gray[100]},selectedDayPressed:{background:e.blueButtonPressedBackground},unselectedDayPressed:{background:e.accentColors.gray[200]}})),[]);return(0,q.jsx)(S.Z,{debugName:"WeekdaySelector",capture:!0,children:(0,q.jsx)("div",{style:{...o.wrapper,...e.style},children:K.Z.map(((s,i)=>(0,q.jsx)(V.Z,{...e,onClick:()=>{const e=t.includes(s)?t.length>r?t.filter((e=>e!==s)):t:[...t,s];a(e)},style:t.includes(s)?o.selectedDay:o.unselectedDay,hoveredStyle:t.includes(s)?o.selectedDayHover:o.unselectedDayHover,pressedStyle:t.includes(s)?o.selectedDayPressed:o.unselectedDayPressed,children:(0,X.er)(n,i+1)},s)))})})}const J={borderRadius:"50%",marginLeft:3,marginRight:3,height:25,width:25,fontSize:14,paddingTop:2};const G=(0,n.forwardRef)((function(e,t){const{recurrence:a,onChange:h}=e,b=(0,o.O7)(),{device:j}=b,D=(0,s.Fg)(),_=(0,m.useIntl)(),[F,Z]=(0,n.useState)(void 0),[N,B]=(0,n.useState)(Q()),[U,W]=(0,n.useState)(!0);void 0===F&&(void 0!==a?(B({...a,hour:a.hour??0,minute:a.minute??0,start_date:(0,i.YL)(a.start_date)}),Z(!0)):Z(!1));const K=e=>{const t="week"!==e||void 0!==N.weekdays&&0!==N.weekdays.length?N.weekdays:[(a=N.start_date,(0,p.Yd)(u.RRULE_WEEKDAYS_MAP)[r.ou.fromMillis(a).weekday-1])];var a;B({...N,weekdays:t,frequency:e}),Z(!0)},X=()=>{h(N)},V=j.isMobile?x.Z4.SlideUp:x.Z4.Popup,J=function(){const{isMobile:e}=(0,o.Fy)();return(0,s.yK)((t=>({iconStyle:{fill:t.regularIconColor,width:e?18:16},customFrequencySelectButton:{color:t.mediumTextColor,fill:t.lightIconColor,fontWeight:500,fontSize:12},weekdayWrapper:{padding:10},inputLabel:{display:"flex",alignItems:"center",...e?{padding:"10px 14px",fontSize:16,background:t.cardBackground}:{paddingLeft:8}},intervalFrequencyLabel:{color:t.lightTextColor},intervalInputWrapper:{width:70,marginLeft:10,marginRight:10},intervalInput:{textAlign:"right"},timeInputWrapper:{width:90,marginLeft:10,marginRight:10},inputSection:{...$,alignItems:"center",justifyContent:"flex-start",padding:8},chevron:{width:e?14:10,fill:t.lightIconColor,marginLeft:4}})),[e])}(),G=j.isMobile?"number":"text",ce=v.m.map((e=>{const t={key:e.frequency,action:()=>{K(e.frequency)},render:t=>(0,q.jsx)(M.Z,{...t,title:te(e.frequency)})};return t})),le=(0,q.jsx)(S.Z,{debugName:"RecurrenceConfigMenu",capture:!0,onLeft:y.yR,onRight:y.yR,onSelectAll:y.yR,onRedo:y.yR,onUndo:y.yR,onCut:y.yR,onCopy:y.yR,onPaste:y.yR,onKeypress:y.yR,onDelete:y.yR,onBackspace:y.yR,onTab:y.yR,children:(0,q.jsx)(I.Z,{value:N.interval.toString(),style:J.intervalInputWrapper,inputStyle:J.intervalInput,type:G,maxlength:3,onChange:e=>{const t=parseInt(e.target.value);(0,g.hj)(t)&&t>0&&t<=u.MAX_RECURRENCE_INTERVAL&&B({...N,interval:t})},onBlur:e=>{e.target.value=N.interval.toString()}})});return(0,q.jsx)(k.Z,{...e,disabled:e.disabled,popupType:V,ref:t,stopClickPropagation:!0,renderOrigin:t=>(0,q.jsx)(O,{buttonPopupEvents:t,focused:e.focused,frequencyLabel:a&&ae(a.frequency),recurrence:e.recurrence,showTooltip:e.showTooltip,variant:e.variant}),render:e=>(0,q.jsx)(S.Z,{debugName:"RecurrenceConfigMenu",capture:!0,onEnter:y.yR,children:(0,q.jsxs)(C.Z,{...ne(e,j.isMobile,U,X),children:[F?(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(A.Z,{style:$,children:[(0,q.jsx)(E.Z,{innerButtonStyle:{...!j.isMobile&&J.customFrequencySelectButton},selectedTitle:ae(N.frequency),renderMenuSections:t=>[{key:"repeatOptionsSection",render:e=>(0,q.jsx)(A.Z,{...e}),items:[...oe({parent:t,updateFrequencyFn:e=>{K(e)}}),se({environment:b,parent:t,onChange:h,onClose:()=>{Z(!1),e.close()}})]}]}),!j.isMobile&&(0,q.jsx)(P.Z,{isBlue:U,isLightGray:!U,onClick:t=>{X(),e.close()},disabled:!U,children:ee})]}),(0,q.jsx)(A.Z,{style:J.inputSection,shouldShowBottomDivider:!0,children:(0,q.jsx)(T.Z,{style:J.inputLabel,children:re(le,N.frequency,J.intervalFrequencyLabel)})}),"week"===N.frequency&&(0,q.jsx)(A.Z,{children:(0,q.jsx)(Y,{style:J.weekdayWrapper,focused:!0,weekdays:N.weekdays||[],minimumSelection:1,onChange:e=>{B({...N,weekdays:e})}})}),(0,q.jsx)(A.Z,{topBorder:!0,children:(0,q.jsx)(x.ZP,{popupType:V,renderOrigin:e=>(0,q.jsx)(R.Z,{...e,title:(0,q.jsx)(m.FormattedMessage,{defaultMessage:"Starts",id:"database.templatePickerItem.repeatMenu.starts"}),focused:!1,showExtensionArrow:j.isMobile,right:r.ou.fromMillis(N.start_date).setLocale((0,d.E2)(_)).toLocaleString({weekday:"short",month:"short",day:"numeric",year:"numeric"})}),render:e=>(0,q.jsx)("div",{style:{padding:"18px 14px 14px"},children:(0,q.jsx)(L.Z,{firstDayOfWeek:f.AK.state,value:Math.max(N.start_date,Date.now()),onChange:t=>{B({...N,start_date:t}),e.close()},disabledDays:{before:new Date}})})})}),(0,q.jsx)(A.Z,{style:J.inputSection,shouldShowBottomDivider:!0,children:(0,q.jsxs)(T.Z,{style:J.inputLabel,children:[(0,q.jsx)(m.FormattedMessage,{defaultMessage:"Create at",id:"database.templatePickerItem.repeatMenu.createAt"}),(0,q.jsx)(S.Z,{debugName:"RecurrenceConfigMenu",capture:!0,onLeft:y.yR,onRight:y.yR,onSelectAll:y.yR,onRedo:y.yR,onUndo:y.yR,onCut:y.yR,onCopy:y.yR,onPaste:y.yR,onKeypress:y.yR,onDelete:y.yR,onBackspace:y.yR,onTab:y.yR,children:(0,q.jsx)(H,{value:r.ou.local().set({hour:N.hour,minute:N.minute}).toLocaleString(r.ou.TIME_SIMPLE),style:J.timeInputWrapper,onUpdate:e=>{B({...N,...e}),W(!0)},onError:()=>{W(!1)}})}),(0,q.jsx)(z.Z,{renderOrigin:e=>(0,q.jsxs)(P.Z,{...e,children:[(0,c.er)(N.timezone),(0,l.i)(J.chevron)]}),onSelect:e=>{B({...N,timezone:e})}})]})})]}):(0,q.jsx)(w.Z,{type:w.i.Vertical,sections:[{key:"repeatOptionsSection",render:e=>(0,q.jsx)(A.Z,{...e}),items:[...ce,se({environment:b,parent:e,onChange:h})]}],initialFocus:void 0}),F&&ie(_,N,D)]})})})})),$={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"4px"};function Q(){return{start_date:r.ou.local().set({hour:0,minute:0,second:0,millisecond:0}).toMillis(),timezone:(0,c.Sv)(),hour:0,minute:0,frequency:"day",interval:1}}const ee=(0,q.jsx)(m.FormattedMessage,{defaultMessage:"Save",id:"database.templatePickerItem.customRecurrence.save"});function te(e){switch(e){case"day":return(0,q.jsx)(m.FormattedMessage,{defaultMessage:"Daily",id:"database.templatePickerItem.quickOptionMenuItem.day"});case"week":return(0,q.jsx)(m.FormattedMessage,{defaultMessage:"Weekly",id:"database.templatePickerItem.quickOptionMenuItem.week"});case"month":return(0,q.jsx)(m.FormattedMessage,{defaultMessage:"Monthly",id:"database.templatePickerItem.quickOptionMenuItem.month"});case"year":return(0,q.jsx)(m.FormattedMessage,{defaultMessage:"Yearly",id:"database.templatePickerItem.quickOptionMenuItem.year"});default:(0,p.t1)(e)}}function ae(e){switch(e){case"day":return(0,q.jsx)(m.FormattedMessage,{defaultMessage:"Repeat daily",id:"database.templatePickerItem.recurrenceFrequency.daily"});case"week":return(0,q.jsx)(m.FormattedMessage,{defaultMessage:"Repeat weekly",id:"database.templatePickerItem.recurrenceFrequency.weekly"});case"month":return(0,q.jsx)(m.FormattedMessage,{defaultMessage:"Repeat monthly",id:"database.templatePickerItem.recurrenceFrequency.monthly"});case"year":return(0,q.jsx)(m.FormattedMessage,{defaultMessage:"Repeat yearly",id:"database.templatePickerItem.recurrenceFrequency.yearly"});default:(0,p.t1)(e)}}function re(e,t,a){switch(t){case"day":return(0,q.jsx)(m.FormattedMessage,{defaultMessage:"Every {interval} <label>days</label>",id:"database.templatePickerItem.recurrenceInterval.everyXdays",values:{label:e=>(0,q.jsx)("label",{style:a,children:e}),interval:e}});case"week":return(0,q.jsx)(m.FormattedMessage,{defaultMessage:"Every {interval} <label>weeks</label>",id:"database.templatePickerItem.recurrenceInterval.everyXweeks",values:{label:e=>(0,q.jsx)("label",{style:a,children:e}),interval:e}});case"month":return(0,q.jsx)(m.FormattedMessage,{defaultMessage:"Every {interval} <label>months</label>",id:"database.templatePickerItem.recurrenceInterval.everyXmonths",values:{label:e=>(0,q.jsx)("label",{style:a,children:e}),interval:e}});case"year":return(0,q.jsx)(m.FormattedMessage,{defaultMessage:"Every {interval} <label>years</label>",id:"database.templatePickerItem.recurrenceInterval.everyXyears",values:{label:e=>(0,q.jsx)("label",{style:a,children:e}),interval:e}});default:(0,p.t1)(t)}}function ne(e,t,a,r){return t?{menuType:h.og.Modal,title:(0,q.jsx)(m.FormattedMessage,{defaultMessage:"Repeat",id:"database.templatePickerItem.mobileRepeatModal.title"}),left:(0,q.jsx)(m.FormattedMessage,{defaultMessage:"Cancel",id:"database.templatePickerItem.customRecurrence.cancel"}),right:ee,rightDisabled:!a,onClickRight:()=>{a&&(r(),e.close())},onClickLeft:()=>{e.close()}}:{menuType:h.og.Popup}}function oe(e){let{parent:t,updateFrequencyFn:a}=e;return v.m.map((e=>({key:e.frequency,action:()=>{a(e.frequency),t.close()},render:t=>(0,q.jsx)(M.Z,{...t,title:ae(e.frequency)})})))}function se(e){let{environment:t,parent:a,onChange:r,onClose:n}=e;return{key:"disable",action:()=>{r(void 0),a.close(),n&&n()},render:e=>(0,q.jsx)(M.Z,{...e,title:(0,q.jsx)(m.FormattedMessage,{defaultMessage:"Off",id:"database.templatePickerItem.quickOptionMenuItem.off"})})}}function ie(e,t,a){const n=(0,u.rruleFromRecurrence)({...t,start_date:(0,i.Io)(new Date(t.start_date))}).after(new Date((0,i.Io)()));if(!n)return null;const o=r.ou.fromJSDate(n).toUTC().setLocale((0,d.E2)(e)).toLocaleString(r.ou.DATETIME_SHORT),s=r.ou.fromJSDate(n).toUTC().setLocale((0,d.E2)(e)).toLocaleString(r.ou.DATE_SHORT),c=b.default.checkGate({gateName:"recurrence_queue_task_improvements"});return(0===t.hour||1===t.hour||2===t.hour)&&c?(0,q.jsx)(A.Z,{topBorder:!0,children:(0,q.jsx)(j.Z,{caption:(0,q.jsx)("span",{style:{color:a.lightTextColor},children:(0,q.jsx)(m.FormattedMessage,{defaultMessage:"Next: {dates} (between 12-3 AM)",id:"database.templatePickerItem.recurrenceConfigMenuLabel.nextAtMidnightMessage",values:{dates:s}})})})}):(0,q.jsx)(A.Z,{topBorder:!0,children:(0,q.jsx)(j.Z,{caption:(0,q.jsx)("span",{style:{color:a.lightTextColor},children:(0,q.jsx)(m.FormattedMessage,{defaultMessage:"Next: {dates}",id:"database.templatePickerItem.recurrenceConfigMenuLabel.next",values:{dates:o}})})})})}},425498:(e,t,a)=>{a.d(t,{m:()=>o,w:()=>s});a(757658);var r=a(954061),n=a(798165);const o=[{frequency:"day",interval:1},{frequency:"week",interval:1},{frequency:"month",interval:1},{frequency:"year",interval:1}];function s(e){const t=n.qA(e)??[],a=[];for(const r of t){if(!("block"===r.table&&!0===r.isTemplate()&&r.getFormat().automation_id&&r.id!==e.id))continue;const t=r.getAutomationStore();if(t){if(!t.isReady())return{automationStoresReady:!1};void 0!==t.getRecurrence()&&t.isDefined()&&a.push(t.getModel())}}return{automationStoresReady:!0,...(0,r.templateAncestorsViolateRecurrenceNesting)(a)}}},54983:(e,t,a)=>{a.d(t,{Z:()=>o});var r=a(749085);class n extends r.default{getInitialState(){return{}}}const o=n},253523:(e,t,a)=>{a.d(t,{N:()=>o});a(667294);var r=a(745238),n=a(785893);const o=(0,r.IU)("repeat",{viewBox:"0 0 16 14",svg:(0,n.jsx)("path",{d:"M1.185 7.317a.689.689 0 00.697-.704v-.601c0-1.19.806-1.942 2.064-1.942H9.23v1.573c0 .328.199.52.527.52a.66.66 0 00.403-.144l2.68-2.236c.253-.212.26-.547 0-.765L10.16.782A.62.62 0 009.757.64c-.328 0-.527.184-.527.52v1.53H4.05C1.875 2.69.48 3.9.48 5.875v.738c0 .397.308.704.705.704zm13.624-.649a.689.689 0 00-.698.704v.608c0 1.19-.806 1.942-2.064 1.942H6.763V8.35c0-.329-.199-.52-.527-.52a.66.66 0 00-.403.144l-2.68 2.242c-.26.212-.26.547 0 .759l2.68 2.242a.66.66 0 00.403.143c.328 0 .527-.191.527-.52v-1.544h5.181c2.174 0 3.569-1.21 3.569-3.179v-.745a.695.695 0 00-.704-.704z"})})},954061:(e,t,a)=>{a.r(t),a.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>y,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>d,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>l,MAX_RECURRENCE_INTERVAL:()=>i,RRULE_WEEKDAYS_MAP:()=>s,getRecurrenceAfter:()=>m,rruleFromRecurrence:()=>c,templateAncestorsViolateRecurrenceNesting:()=>u});var r=a(730120),n=a(484885);const o={day:n.Ci.DAILY,week:n.Ci.WEEKLY,month:n.Ci.MONTHLY,year:n.Ci.YEARLY},s={MO:n.Ci.MO,TU:n.Ci.TU,WE:n.Ci.WE,TH:n.Ci.TH,FR:n.Ci.FR,SA:n.Ci.SA,SU:n.Ci.SU},i=100;function c(e){const{start_date:t,frequency:a,interval:r,weekdays:i,timezone:c,hour:l,minute:d}=e,u="week"===a&&i?i.map((e=>s[e])):void 0;return new n.Ci({freq:o[a],dtstart:new Date(t),interval:r,byweekday:u,tzid:c,byhour:l??0,byminute:d??0,bysecond:0})}const l=1,d=1;function u(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const a=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),r=e.length,n=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,o=r>l,s=a.length>=d;return{violatesConstraint:o||s,templateNestingExceedsMaxDepth:o,ancestorHasDailyTemplate:s,nestedDepthOfAutomationAncestors:r,immediateAncestorRecurrenceType:n}}function m(e){const{recurrence:t,afterDate:a}=e,n=c({...t}).after(new Date(a));if(!n)return;return r.ou.fromJSDate(n).toUTC().setZone("local",{keepLocalTime:!0}).toJSDate()}const y=100}}]);