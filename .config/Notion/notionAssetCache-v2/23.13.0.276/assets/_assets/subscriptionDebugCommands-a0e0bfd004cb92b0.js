"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[95126],{480671:(e,t,n)=>{n.d(t,{Cl:()=>h,jw:()=>S,k2:()=>g,v5:()=>b});n(21703);var a=n(471924),o=n(772141),i=n(519889),r=n(590965),s=n(500896),c=n(712139),d=n(653965),u=n(286572),l=n(206258),p=n(88893),m=n(163423),f=n(288280);function g(e){m.Z.setState({open:!0,addOnFeature:e,stage:"limit_reached",addOnUpgradeId:a.Il(),tax:0})}function b(){m.Z.setState({open:!1})}function h(e){const t=m.Z.state;t.open&&m.Z.setState({...t,stage:"confirm_purchase",coupon:e&&!(0,s.$v)(e)?e:void 0})}async function S(e){const{environment:t,spaceStore:n,from:a}=e,s=function(){const e=f.subscriptionDataStoreInstance.state,t=(e?p.CM(e):[]).filter((e=>(0,r.nB)(e)&&(0,o.zz)(e.role))).map((e=>e.userId));if(!t||0===t.length)throw new Error("No admins found in the current space");return(0,d.UP)(t)}(),m=n.getName(),g=l.U6.createChildStore(n,{table:i.KJ,id:s});await g.load();const b=g.getEmail();b?u.bf(t,{admin_id:s,admin_email:b,space_name:m,from:a}):c.IE(new Error("Could not get email for admin in sendMemberRequestForAddOn"))}},700173:(e,t,n)=>{n.r(t),n.d(t,{SubscriptionDebugCommands:()=>d});var a=n(800480),o=n(292595),i=n(454642),r=n(484654),s=n(80444),c=n(480671);function d(){const e=(0,a.O7)();return(0,o.exposeDebugValue)("subscriptions",{sendMemberRequestForAddOn:()=>{const t=s.default.state.currentSpaceStore;t&&c.jw({environment:e,spaceStore:t,from:"ai_qna_limit_in_app"})},recordAIUsage:async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const n=s.default.state.currentSpaceStore;n&&(await i.recordAIUsage(e,{spaceId:n.id,usage:t}),await(0,r.updateAiEligibility)(e,n.id))}}),null}}}]);