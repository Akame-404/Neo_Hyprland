"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[11668],{905581:(e,t,i)=>{i.d(t,{Y:()=>o,h:()=>n});var s=i(730459);function n(e){s.K4(e,"view_public_site_click")}function o(e,t){s.K4(e,"share_menu_tab_click",t)}},18878:(e,t,i)=>{i.d(t,{mX:()=>f,mo:()=>g,nH:()=>h});i(667294);var s=i(886628),n=i(724405),o=i(772141),a=i(709291),r=i(401898),l=i(137810),d=i(434859),c=i(80444),m=i(953336),p=i(363381),u=i(785893);function g(e){const{openState:t}=e,{mainEditorCurrentBlockStore:i,currentSpaceStore:o}=(0,s.VK)((()=>{const{mainEditorCurrentBlockStore:e,currentSpaceStore:t}=c.default.state;return{mainEditorCurrentBlockStore:e,currentSpaceStore:t}}),[]),a=(0,n.yK)((e=>({scroller:{display:"flex",flexDirection:"column",maxHeight:290},editContainer:{marginTop:2,marginBottom:2,color:e.regularTextColor}})),[]);if(!i||!o)return null;const r=Date.now();return(0,u.jsx)(m.Z,{type:d.Z.Y,style:a.scroller,children:t.permissionChanges.map(((e,t)=>{let[s,n]=e;const l={timestamp:r,space_id:o.id,type:"permission-changed",permission_data:{before:s,after:n}};return(0,u.jsx)("div",{style:a.editContainer,children:(0,u.jsx)(p.Z,{rootStore:i,edit:l})},`${s.type}-${t}`)}))})}function h(e){return["remove","restrict"].includes(e.type)?(0,u.jsx)(a.FormattedMessage,{id:"restrictedPermissionConfirmationModal.actionButton.restrictAccess",defaultMessage:"Restrict access"}):"restoreTeamPermissions"===e.type?(0,u.jsx)(a.FormattedMessage,{id:"restrictedPermissionConfirmationModal.actionButton.restoreTeamPermissions",defaultMessage:"Reset Permissions"}):(0,u.jsx)(a.FormattedMessage,{id:"restrictedPermissionConfirmationModal.actionButton.restoreAccess",defaultMessage:"Restore access"})}function f(e){switch(e.type){case"remove":return(0,u.jsx)(a.FormattedMessage,{id:"restrictedPermissionConfirmationModal.restrict.description",defaultMessage:"Are you sure you want to remove this {permissionGroup} and restrict access? This page will no longer inherit share settings from the parent page.",values:{permissionGroup:x(e)}});case"restrict":return(0,u.jsx)(a.FormattedMessage,{id:"restrictedPermissionConfirmationModal.remove.description",defaultMessage:"Are you sure you want to change this role and restrict access? This page will no longer inherit share settings from the parent page."});case"restore":return e.permissionChanges.length>0?(0,u.jsx)(a.FormattedMessage,{id:"restrictedPermissionConfirmationModal.restore.description",defaultMessage:"Are you sure you want to restore access? This will inherit the following permissions from the parent page:"}):(0,u.jsx)(a.FormattedMessage,{id:"restrictedPermissionConfirmationModal.restoreNoChanges.description",defaultMessage:"Are you sure you want to restore access?"});case"restoreTeamPermissions":return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{style:{fontWeight:l.Z.fontWeight.semibold,marginBottom:4},children:(0,u.jsx)(a.FormattedMessage,{id:"restrictedPermissionConfirmationModal.restoreTeamPermissions.mainDescription",defaultMessage:"Are you sure you want to reset permissions to match the teamspace defaults?"})}),(0,u.jsx)(a.FormattedMessage,{id:"restrictedPermissionConfirmationModal.restoreTeamPermissions.warningMessage",defaultMessage:"Everyone else who is not part of the teamspace will lose access, including guests."})]});default:throw r.t1(e)}}function x(e){return(0,o.jg)(e.permissionItem)?(0,u.jsx)(a.FormattedMessage,{id:"restrictedPermissionConfirmationModal.permissionGroup.user",defaultMessage:"user"}):(0,o.hV)(e.permissionItem)?(0,u.jsx)(a.FormattedMessage,{id:"restrictedPermissionConfirmationModal.permissionGroup.group",defaultMessage:"group"}):(0,o.Ir)(e.permissionItem)?(0,u.jsx)(a.FormattedMessage,{id:"restrictedPermissionConfirmationModal.permissionGroup.space",defaultMessage:"workspace"}):(0,u.jsx)(a.FormattedMessage,{id:"restrictedPermissionConfirmationModal.permissionGroup.generic",defaultMessage:"permission"})}},131075:(e,t,i)=>{i.d(t,{i:()=>f});i(21703),i(757658),i(667294);var s=i(186517),n=i(23867),o=i(709291),a=i(91536),r=i(454642),l=i(547307),d=i(476464),c=i(210228),m=i(164369),p=i(18878),u=i(318245),g=i(319385),h=i(785893);async function f(e){const{oldPermissionItem:t,newPermissionItem:i,wasInherited:f,environment:x,store:b,sudoModeStore:y,restrictingVisibility:M,fromPermissionWrapper:j}=e;if(!(0,s.Kf)(t,i))throw new Error("Permission type mismatch.");const S=!!y&&y.shouldSaveTransactionWithSudoMode(b),C=(0,s.nl)(t.role,i.role);if(f&&C!==i.role||M)return void(await async function(e){const{environment:t,useSudoMode:i,store:s,permissionItem:n,fromPermissionWrapper:a}=e,r="none"===n.role?{type:"remove",permissionItem:n}:{type:"restrict"},u="user_permission"===n.type&&n.user_id===t.currentUser.id;(u||await l.confirmUserAction({message:(0,p.mX)(r),acceptLabel:(0,p.nH)(r),cancelLabel:(0,h.jsx)(o.FormattedMessage,{id:"restrictedPermissionConfirmationModal.actionButton.cancel",defaultMessage:"Close"}),description:(0,h.jsx)(m.Z,{isSmall:!0,isMultiline:!0,children:(0,h.jsx)(o.FormattedMessage,{id:"restrictedPermissionConfirmationModal.footer.whisperText",defaultMessage:"Admins will still be able to restore permissions from restricted pages."})})}))&&c.createAndCommit({userAction:"PermissionItem.onAccept",environment:t,useSudoMode:i,perform:e=>{d.Pk({environment:t,store:s,permissionItem:n,shouldInherit:!0,transaction:e,fromPermissionWrapper:a})}})}({environment:x,useSudoMode:S,store:b,permissionItem:i,fromPermissionWrapper:j}));!b.isTopLevel()&&t.role!==i.role&&C!==t.role&&a.SM(x);const w="public_permission"===t.type&&"public_permission"===i.type&&"none"===t.role&&"none"!==i.role,P=("public_permission"===t.type&&"public_permission"===i.type&&!t.allow_search_engine_indexing&&i.allow_search_engine_indexing||w&&Boolean(g.default.checkGate({gateName:"include_nonindexed_public_content_for_scanning"})))&&Boolean(g.default.checkGate({gateName:"enable_public_content_scanning"}));c.createAndCommit({userAction:"PermissionItem.handlePermissionItemChange",environment:x,useSudoMode:S,perform:t=>{const s=u.default.mark("share_menu.update_page_permission_lag");d.l3({environment:x,store:b,permissionItems:[i],transaction:t,pagePermissionChangeLocation:e.location,metric:s,fromPermissionWrapper:j}),P&&t.postSubmitCallbacks.push((async e=>{e||await r.enqueueScanContentTask(x,{pagePointer:{id:b.id,table:"block",spaceId:(0,n.C)(b.pointer.spaceId)}})}))}})}},711668:(e,t,i)=>{i.d(t,{Z:()=>fe});var s=i(667294),n=i(800480),o=i(886628),a=i(724405),r=i(815145),l=i(841892),d=i(509999),c=i(139226),m=i(40462),p=i(584169),u=i(727714),g=i(772141),h=i(421202),f=i(76233),x=i(709291),b=i(137810),y=i(436610),M=i(905581),j=i(800893),S=i(91376),C=i(412714),w=i(164921),P=i(573063),v=i(374194),I=i(863296),k=i(158297),T=i(824006),Z=i(526388),_=i(164369),F=i(760442),L=i(730459),D=i(484210),B=i(433929),R=i(918514),A=i(548779),W=i(131075),K=i(115100),U=i(825464),V=i(80444),E=i(281236),O=i(854669),N=i(88893),G=i(785893);function H(e){const{children:t}=e,i=(0,s.useCallback)((()=>{S.r$({currentTab:"settings"})}),[]),n=(0,a.yK)((e=>({settingsLink:{cursor:"pointer",userSelect:"none",WebkitUserSelect:"none",color:e.mediumTextColor,textDecoration:"underline"}})),[]);return(0,G.jsx)("span",{style:n.settingsLink,onClick:i,children:t})}function Y(e){const t=(0,n.O7)(),{WindowSizeStore:i}=t,{safePaddingLeftCSS:s,safePaddingRightCSS:r}=(0,o.VK)((()=>({safePaddingLeftCSS:i.getSafePaddingLeftCSS(8),safePaddingRightCSS:i.getSafePaddingRightCSS(8)})),[i]),{isMobile:l}=(0,n.Fy)(),{spaceStore:d,canChangeSettings:c,publicSpaceData:m}=(0,o.VK)((()=>{const e=V.default.state.currentSpaceStore;return e?{spaceStore:e,canChangeSettings:e.canAdmin(),publicSpaceData:E.Z.getData(t,{spaceId:e.id})}:{}}),[t]),p=(0,a.yK)((t=>({container:{boxShadow:`0 -1px 0 ${t.regularDividerColor}`,width:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",textAlign:"center",padding:"8px 8px",paddingLeft:s,paddingRight:r,color:t.mediumTextColor,backgroundColor:t.inputBackground,...e.style}})),[e.style,s,r]);return d?l?null:m&&c?(0,G.jsx)("span",{style:p.container,children:(0,G.jsx)("div",{style:{display:"flex"},children:(0,G.jsx)(_.Z,{isSmall:!0,isMobile:!1,isSecondaryColor:!0,style:{paddingRight:"4px"},children:e.title?e.title:(0,G.jsx)(x.FormattedMessage,{defaultMessage:"Set up a public domain in <settings>settings</settings>.",id:"blockPermissionsSettings.learnAboutAutogeneratedDomains.setDomainForPublicLinks",values:{settings:e=>(0,G.jsx)(H,{children:e})}})})})}):null:null}var $=i(313991),z=i(407057),q=i(542853),J=i(653965),Q=i(619584),X=i(552275),ee=i(231945),te=i(478140),ie=i(632163),se=i(489728),ne=i(672495),oe=i(793289),ae=i(842782),re=i(628020),le=i(843250),de=i(460709),ce=i(61766),me=i(960709);function pe(e){const t=(0,n.Fy)(),[,,i]=(0,o.AF)(void 0,ce.Z),s=(0,a.Fg)(),r=(0,n.O7)(),l=(0,o.VK)((()=>(0,N.y$)(r)),[r]),d=(0,a.yK)((()=>({buttonMenuItemStyle:{opacity:e.disabled?.6:1,cursor:e.disabled?"not-allowed":""},buttonStyle:{display:"flex",marginLeft:0,marginRight:0,borderRadius:0,paddingLeft:14,paddingRight:14,width:"100%",minHeight:30},textWrapperStyle:{marginLeft:0,marginRight:0}})),[e.disabled]);return(0,G.jsx)(ee.ZP,{...e.upsellEvents,disablePopup:!l,disabled:e.disabled,popupType:t.isMobile?ee.Z4.SlideUp:ee.Z4.Popup,buttonPopupStore:i,renderOrigin:t=>(0,G.jsx)(X.Z,{...t,focused:!1,disabled:e.disabled,textWrapperStyle:d.textWrapperStyle,buttonStyle:d.buttonStyle,style:d.buttonMenuItemStyle,title:(0,G.jsxs)(_.Z,{children:[(0,G.jsx)(x.FormattedMessage,{id:"publicPermissionItem.expirationTime.label",defaultMessage:"Link expiration"}),e.upgradeLabel]}),right:(0,G.jsxs)(se.Z,{...t,disabled:e.disabled,ignoreLocalHoverState:!0,style:{paddingLeft:0,paddingRight:0},children:[(0,G.jsx)(ue,{permissionItem:e.permissionItem}),(0,q.i)({width:10,marginLeft:4,fill:s.lightIconColor})]})}),alignmentToOrigin:me.lU.End,placementToOrigin:me.Iw.Bottom,render:i=>{const s=[{key:"options",render:e=>(0,G.jsx)(ne.Z,{...e}),items:he().map((t=>({key:t.type,action:()=>{ge(e,r,t.time),i.close()},render:e=>(0,G.jsx)(X.Z,{...e,focused:e.focused,disabled:!1,title:t.title,caption:t.caption})})))},{key:"custom",render:e=>(0,G.jsx)(ne.Z,{...e,topBorder:!0}),items:[{key:"custom",action:()=>{i.close()},render:(t,s)=>(0,G.jsx)(ae.Z,{...t,renderOrigin:e=>(0,G.jsx)(X.Z,{...e,disabled:!1,title:(0,G.jsx)(x.FormattedMessage,{id:"publicPermissionItem.expiration.chooseDate",defaultMessage:"Choose date"})}),onFocus:s.onFocus,disableDefaultClick:!0,renderExtension:(t,s)=>(0,G.jsx)("div",{style:{padding:"18px 14px 14px"},children:(0,G.jsx)(oe.Z,{...t,firstDayOfWeek:re.AK.state,value:e.permissionItem.expiration_timestamp||(new Date).getTime(),onChange:t=>{ge(e,r,t),s.close(),i.close()},disabledDays:{before:new Date}})})})}]}];let n;return n=t.isMobile?{menuType:de.og.Modal,title:(0,G.jsx)(x.FormattedMessage,{id:"publicPermissionsMenu.expiration.mobile.title",defaultMessage:"Expiration time"}),right:(0,G.jsx)(x.FormattedMessage,{id:"publicPermissionsMenu.expiration.mobile.label",defaultMessage:"Done"}),onClickRight:i.close}:{menuType:de.og.Popup,width:264},(0,G.jsx)(te.Z,{className:le.IpQ,...n,children:(0,G.jsx)(ie.Z,{type:ie.i.Vertical,initialFocus:void 0,sections:s})})}})}function ue(e){const{permissionItem:t}=e;return!t.expiration_timestamp||(0,g.o7)(t)?(0,G.jsx)(x.FormattedMessage,{id:"publicPermissionItem.expiration.never",defaultMessage:"Never"}):(0,G.jsx)(_.Z,{children:e.permissionItem.expiration_timestamp&&(0,z.tv)(e.permissionItem.expiration_timestamp,$.SP)})}function ge(e,t,i){const{permissionItem:s,onChange:n}=e;if("public_permission"!==s.type)return;if(void 0!==i&&i<=(new Date).getTime())return;const o=s,a=J.d9(o),r=i;a.expiration_timestamp=r,n(a),y.n4(t,{expiration_time:r})}function he(){const e=(new Date).getTime()+Q.U6,t=(new Date).getTime()+Q.A0,i=(new Date).getTime()+7*Q.A0;return[{type:"never",time:void 0,title:(0,G.jsx)(x.FormattedMessage,{id:"publicPermissionItem.expiration.never",defaultMessage:"Never"})},{type:"hour",time:e,title:(0,G.jsx)(x.FormattedMessage,{id:"permissionItem.publicPermissionItem.expiration.hour",defaultMessage:"In an hour"}),caption:new Intl.DateTimeFormat($.SP,{hour:"numeric",minute:"numeric"}).format(e)},{type:"day",time:t,title:(0,G.jsx)(x.FormattedMessage,{id:"permissionItem.publicPermissionItem.expiration.day",defaultMessage:"In a day"}),caption:new Intl.DateTimeFormat($.SP,{day:"numeric",month:"long",hour:"numeric",minute:"numeric"}).format(t)},{type:"week",time:i,title:(0,G.jsx)(x.FormattedMessage,{id:"permissionItem.publicPermissionItem.expiration.week",defaultMessage:"In a week"}),caption:new Intl.DateTimeFormat($.SP,{day:"numeric",month:"long",hour:"numeric",minute:"numeric"}).format(i)}]}function fe(e){const{store:t,mostPermissivePublicItem:i,permissionItemArgs:l,shouldAskForConfirmationOnPublish:u,onUnpublish:g,showAllPublishedSites:y}=e,{permissionItem:j,from:v}=i,{sudoModeStore:T,location:F,onUpgradeButtonClick:L}=l,B=(0,n.O7)(),{isMobile:U}=B.device,O=(0,o.VK)((()=>{const e=V.default.state.currentSpaceStore;return!U&&!(0,A.Cx)(e)&&y}),[U,y]),N=(0,o.VK)((()=>{const e=B.WindowSizeStore;return{marginLeft:e.getSafePaddingLeftCSS(14),marginRight:e.getSafePaddingRightCSS(14)}}),[B]),H=(0,a.yK)((e=>({titleContainer:{color:e.blueColor,fontWeight:b.Z.fontWeight.medium,fontSize:14,display:"flex",alignItems:"center",margin:"0px 16px 10px",paddingTop:U?4:0},title:{display:"flex",alignItems:"center",color:e.blueColor,fontWeight:b.Z.fontWeight.medium},helpIcon:{width:16,height:16,fill:e.blueColor},icon:{height:16,width:16,marginRight:6},linkSharingOptions:{marginTop:10,marginBottom:15,marginLeft:2,marginRight:2},learnAboutDomainsCTA:{fontSize:14,marginTop:3,marginLeft:6,marginRight:6,padding:0,backgroundColor:void 0,boxShadow:void 0,textAlign:"left",alignItems:"flex-start"},buttonGroup:{marginLeft:14,marginRight:14,marginTop:16,marginBottom:12,display:"flex",gap:10},button:{flexGrow:1,height:34},disabledButton:{opacity:.7,cursor:"not-allowed"},allSitesButton:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:12,padding:4,borderRadius:4,...N},aliasIcon:{marginRight:4,height:16,width:16,fill:e.mediumTextColor},divider:{color:e.regularDividerColor}})),[U,N]),$=(0,o.VK)((()=>t.canAdmin()),[t]),z=(0,o.VK)((()=>{var e;return t.id===(null===(e=t.getSpaceStore())||void 0===e?void 0:e.getPublicHomePage())}),[t]),q=!$||z,J=v.table===h.iU?v.blockId:v.teamId,Q=(0,s.useCallback)((e=>{(0,W.i)({oldPermissionItem:j,newPermissionItem:{...j,...e},wasInherited:J!==t.id,environment:B,store:t,sudoModeStore:T,location:F})}),[j,J,t,B,T,F]),X=(0,s.useCallback)((async()=>{let e=!0;u&&(e=await K.eT(f.QaF(t.getTitleValue()))),e&&(Q({role:"none"}),g&&g())}),[Q,g,u,t]),ee=(0,o.VK)((()=>(0,D.ZP)({store:t,preferPublicLink:!0,getSpaceDomain:()=>{var e;return null===(e=E.Z.getData(B,{spaceId:t.getSpaceId()}))||void 0===e?void 0:e.domain},pageVisitSource:r.tY.LinkInPage})),[t,B]),te=(0,s.useCallback)((()=>{M.h(B),C.D({url:ee,environment:B})}),[B,ee]),ie=(0,s.useCallback)((()=>{S.r$({currentTab:"sites"})}),[]);return(0,G.jsxs)("div",{children:[(0,G.jsxs)("div",{style:H.titleContainer,children:[(0,c.v)(H.icon),(0,G.jsx)("div",{style:H.title,children:(0,G.jsx)(x.FormattedMessage,{defaultMessage:"Live on the web.",id:"publishTab.settings.liveOnWeb.title"})}),(0,G.jsx)(P.Z,{iconStyle:H.helpIcon,onClick:()=>{C.D({environment:B,url:(0,R.UY)("guides.autogeneratedDomains")})},icon:p.m,ariaLabel:"Learn more about sites"})]}),(0,G.jsx)(xe,{currentBlockStore:t}),(0,G.jsx)(Y,{style:H.learnAboutDomainsCTA}),(0,G.jsx)("div",{style:H.linkSharingOptions,children:(0,G.jsx)(ye,{currentBlockStore:t,permissionItem:j,onChange:Q,onUpgradeButtonClick:L})}),(0,G.jsxs)("div",{style:H.buttonGroup,children:[(0,G.jsx)(Z.Z,{disableTooltip:!q,renderTooltip:()=>z?(0,G.jsx)(x.FormattedMessage,{defaultMessage:"You cannot unpublish the public homepage of a workspace domain. Go to the Sites tab in Settings to make changes.",id:"publishTab.settings.liveOnWeb.unpublishHomePageTooltip"}):(0,G.jsx)(x.FormattedMessage,{defaultMessage:"You must have full access to this page to unpublish it",id:"publishTab.settings.liveOnWeb.unpublishTooltip"}),render:e=>(0,G.jsx)(I.Z,{onClick:X,disabled:q,style:q?{...H.button,...H.disabledButton}:H.button,...e,children:(0,G.jsx)(x.FormattedMessage,{defaultMessage:"Unpublish",id:"publishTab.settings.liveOnWeb.unpublish"})})}),(0,G.jsxs)(k.Z,{onClick:te,style:H.button,children:[(0,m.o)({height:16,width:16,marginRight:4}),(0,G.jsx)(x.FormattedMessage,{defaultMessage:"View site",id:"publishTab.settings.liveOnWeb.viewSite"})]})]}),O?(0,G.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,G.jsxs)(w.Z,{onClick:ie,style:H.allSitesButton,children:[(0,d.J)(H.aliasIcon),(0,G.jsx)(_.Z,{isSecondaryColor:!0,children:(0,G.jsx)(x.FormattedMessage,{defaultMessage:"All published sites",id:"publishTab.settings.liveOnWeb.allSites"})})]})}):null]})}function xe(e){const{currentBlockStore:t}=e,i=(0,n.O7)(),l=(0,o.VK)((()=>be(i)),[i]),d=(0,a.yK)((e=>({container:{...l,height:"auto"},flex:{flex:1},wrapper:{display:"flex",padding:"1px 0"},input:{flex:1,borderTopRightRadius:0,borderBottomRightRadius:0,paddingRight:0},button:{height:28,borderTopLeftRadius:0,borderBottomLeftRadius:0,borderLeft:"none"}})),[l]),c=(0,o.VK)((()=>(0,D.ZP)({store:t,preferPublicLink:!0,getSpaceDomain:()=>{var e;return null===(e=E.Z.getData(i,{spaceId:t.getSpaceId()}))||void 0===e?void 0:e.domain},pageVisitSource:r.tY.CopyLink})),[t,i]),m=(0,s.useCallback)((()=>{i.mobileNative?i.mobileNative.copyText(c,B.default.formatMessage(j.tq.copiedLinkToClipboard)):j.RD({environment:i,stringValue:c,copiedMessage:j.tq.copiedLinkToClipboard}),L.K4(i,"copy_web_link")}),[i,c]);return(0,G.jsx)("div",{style:d.container,children:(0,G.jsx)("div",{style:d.flex,children:(0,G.jsxs)("div",{style:d.wrapper,children:[(0,G.jsx)(v.Z,{value:c,disabled:!0,style:d.input}),(0,G.jsx)(I.Z,{onClick:m,style:d.button,icon:u.N})]})})})}function be(e){const t=e.WindowSizeStore;return{display:"flex",alignItems:"center",width:"100%",height:e.device.isMobile?36:30,paddingTop:5,paddingBottom:5,paddingLeft:t.getSafePaddingLeftCSS(14),paddingRight:t.getSafePaddingRightCSS(14)}}function ye(e){const{permissionItem:t,onUpgradeButtonClick:i,onChange:r,currentBlockStore:l}=e,d=(0,n.O7)(),c=(0,o.VK)((()=>!l.canAdmin()),[l]),m=(0,o.VK)((()=>{var e;return Boolean(null===(e=V.default.state.currentSpaceStore)||void 0===e?void 0:e.getDisableMoveToSpace())}),[]),p=g.RF(t.role),u=!1!==t.allow_duplicate,h=g.J5(t.role),f=Boolean(t.allow_search_engine_indexing),b=(0,s.useCallback)((()=>{r({role:h?"comment_only":"read_and_write"})}),[h,r]),M=(0,s.useCallback)((()=>{r({role:p?"reader":"comment_only"})}),[p,r]),j=(0,s.useCallback)((()=>{const e=!f;r({allow_search_engine_indexing:e}),y.g0(d,{allow_search_engine_indexing:e})}),[d,r,f]),S=(0,s.useCallback)((()=>{const e=!u;r({allow_duplicate:e}),y.l7(d,{allow_duplicate:e})}),[u,d,r]),C=(0,o.VK)((()=>!(0,N.y$)(d)&&(0,N.M9)(d)),[d]),P=(0,o.VK)((()=>be(d)),[d]),v=(0,o.VK)((()=>c||m&&!u),[c,u,m]),I=(0,a.yK)((()=>({container:{display:"flex",flexDirection:"column",marginTop:8},optionLabel:{marginRight:"auto",opacity:c?.6:1},optionButton:c?{...P,cursor:"not-allowed"}:P})),[c,P]);return(0,G.jsxs)("div",{style:I.container,children:[(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(O.Z,{alwaysAllowClick:Boolean(t.expiration_timestamp),onClick:()=>{},analyticsName:"public_permission_item_expiration",requireUpgradeToTier:C,tooltipPlacement:U.u.Left,renderTooltip:Se,renderUpgradeTooltip:Ce,onUpgradeClick:i,render:(e,i)=>(0,G.jsx)(pe,{upsellEvents:e,upgradeLabel:i,permissionItem:t,onChange:r,disabled:c})}),(0,G.jsx)(Z.Z,{placement:U.u.Left,renderTooltip:Me,render:e=>(0,G.jsxs)(w.Z,{onClick:b,style:I.optionButton,disabled:c,...e,children:[(0,G.jsx)(_.Z,{style:I.optionLabel,children:(0,G.jsx)(x.FormattedMessage,{defaultMessage:"Allow editing",id:"pagePermissionItem.allowEdits.setting"})}),(0,G.jsx)(T.Z,{on:h,onClick:b,disabled:c})]})}),(0,G.jsx)(Z.Z,{placement:U.u.Left,renderTooltip:je,render:e=>(0,G.jsxs)(w.Z,{onClick:M,style:I.optionButton,disabled:c,...e,children:[(0,G.jsx)(_.Z,{style:I.optionLabel,children:(0,G.jsx)(x.FormattedMessage,{defaultMessage:"Allow commenting",id:"pagePermissionItem.allowComments.setting"})}),(0,G.jsx)(T.Z,{on:p,onClick:M,disabled:c})]})})]}),(0,G.jsx)(Z.Z,{placement:U.u.Left,renderTooltip:m&&!u?Pe:we,render:e=>(0,G.jsxs)(w.Z,{onClick:S,disabled:v,style:I.optionButton,...e,children:[(0,G.jsx)(_.Z,{style:I.optionLabel,children:(0,G.jsx)(x.FormattedMessage,{defaultMessage:"Allow duplicate as template",id:"pagePermissionItem.allowDuplicateTemplate.setting"})}),(0,G.jsx)(T.Z,{on:u,onClick:S,disabled:v})]})}),(0,G.jsx)(Z.Z,{placement:U.u.Left,renderTooltip:Se,render:e=>(0,G.jsxs)(w.Z,{style:I.optionButton,onClick:j,disabled:c,...e,children:[(0,G.jsx)(_.Z,{style:I.optionLabel,children:(0,G.jsx)(x.FormattedMessage,{defaultMessage:"Search engine indexing",id:"pagePermissionItem.allowSearchEngines.setting"})}),(0,G.jsx)(T.Z,{on:f,onClick:j,disabled:c})]})})]})}function Me(){return(0,G.jsx)(F.Z,{caption:(0,G.jsx)(x.FormattedMessage,{defaultMessage:"Any logged in Notion user can edit this page. Share the site link with people you trust.",id:"pagePermissionItem.allowEdits.tooltip"}),imageHeight:120,imageWidth:240,imageURL:l.Z.images.tooltips.share.allowEditingPng})}function je(){return(0,G.jsx)(F.Z,{caption:(0,G.jsx)(x.FormattedMessage,{defaultMessage:"Any logged in Notion user can comment on this page.",id:"pagePermissionItem.allowComments.tooltip"}),imageHeight:120,imageWidth:240,imageURL:l.Z.images.tooltips.share.allowCommentsPng})}function Se(){return(0,G.jsx)(F.Z,{caption:(0,G.jsx)(x.FormattedMessage,{defaultMessage:"If allowed, your public page may appear in search engines such as Google.",id:"pagePermissionItem.allowSearchEngine.tooltip"}),imageHeight:120,imageWidth:240,imageURL:l.Z.images.tooltips.share.allowSearchEnginesPng})}function Ce(){return(0,G.jsx)(F.Z,{imageURL:l.Z.images.tooltips.upsells.searchEngineIndexingPng,imageWidth:240,imageHeight:100,title:(0,G.jsx)(x.FormattedMessage,{defaultMessage:"Upgrade for search engine indexing",id:"pagePermissionItem.searchEngineUpgradeTooltip.title"}),caption:(0,G.jsx)(x.FormattedMessage,{defaultMessage:"Have your page appear in search engine results.",id:"pagePermissionItem.searchEngineUpgradeTooltip.caption"})})}function we(){return(0,G.jsx)(F.Z,{caption:(0,G.jsx)(x.FormattedMessage,{defaultMessage:"If allowed, this will allow other people to duplicate your public page to their workspace.",id:"pagePermissionItem.allowDuplicateTemplate.tooltip"}),imageHeight:120,imageWidth:240,imageURL:l.Z.images.tooltips.share.allowDuplicatePng})}function Pe(){return(0,G.jsx)(F.Z,{caption:(0,G.jsx)(x.FormattedMessage,{defaultMessage:"This workspace does not allow page duplication to other workspaces.",id:"pagePermissionItem.duplicateTemplateDisabled.tooltip"}),imageWidth:240})}},139226:(e,t,i)=>{i.d(t,{v:()=>o});i(667294);var s=i(745238),n=i(785893);const o=(0,s.IU)("blueCircleDot",{viewBox:"0 0 16 16",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("circle",{cx:"8",cy:"8",r:"8",fill:"none",stroke:"#2383E2",children:[(0,n.jsx)("animate",{attributeName:"r",from:"3",to:"8",dur:"1s",begin:"0s",repeatCount:"indefinite"}),(0,n.jsx)("animate",{attributeName:"opacity",from:"1",to:"0",dur:"1s",begin:"0s",repeatCount:"indefinite"})]}),(0,n.jsx)("circle",{cx:"8",cy:"8",r:"3",fill:"#2383E2"})]})})}}]);