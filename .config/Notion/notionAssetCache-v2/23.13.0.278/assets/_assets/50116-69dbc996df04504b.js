"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[50116],{743664:(e,t,o)=>{o.d(t,{r:()=>B,z:()=>D});var n=o(701302),i=o(990559),r=o(435011),a=o(399036),l=o(180951),s=o(640506),d=o(407057),c=o(253877),p=o(335102),u=o(484682),g=o(842875),m=o(423512),h=o(76233),f=o(744805),y=o(653965),v=o(401898),S=o(619584),C=o(800893),x=o(137231),b=o(683197),I=o(953437),k=o(95477),P=o(924990),w=o(849616),M=o(214976),T=o(433929),j=o(319385),R=o(108406),V=o(551365),_=o(761045),L=o(210228);function B(e){const{environment:t,theme:o,store:n,schema:a,property:d,collectionContextStore:m}=e,y=t.device,x=a[d];if(x){switch(x.type){case"formula":"v2"===x.version?function(e){const{environment:t,store:o,propertySchema:n,property:i}=e,a=o.getModel();if(!n.formula2||!a)return;const l=T.default.getIntl(),s=(0,g.r)(),d=(0,r.EC)({block:a,property:i,formulaCode:n.formula2.code,getRecordModel:o.getRecordModel,intl:l,userTimeZone:s,depth:0,visitedProperties:new Set,resultCache:new Map});if(!d)return;const c=(0,p.j4)(d),u=(0,M.Xh)(c,o);C.RD({stringValue:u,environment:t,copiedMessage:C.tq.copiedPropertyToClipboard})}({environment:t,store:n,propertySchema:x,property:d}):function(e){var t;const{environment:o,store:n,schema:i,property:r,propertySchema:a}=e,l=n.getValue();if(!l)return;const d=(0,u.AH)({property:r,schema:i,block:l,getRecordValue:n.getRecordValue,collectionRequestContext:{userId:void 0,userTimeZone:(0,g.r)(),depth:0,intl:T.default.getIntl(),resultCache:new Map,visitedProperties:new Set}}),c=null==a||null===(t=a.formula)||void 0===t?void 0:t.result_type;switch(c){case"number":S.hj(d)&&A({value:d,propertySchema:a,environment:o});break;case"date":d&&s.U3(d)&&Z({date:d,environment:o});break;case"text":d&&C.RD({stringValue:d.toString(),environment:o,copiedMessage:C.tq.copiedPropertyToClipboard});break;case"checkbox":case void 0:return;default:(0,v.t1)(c)}}({environment:t,store:n,schema:a,property:d,propertySchema:x});break;case"person":{const e=n.getPropertyValue(d);F({actors:l.DW({textValue:e,propertySchema:x,blockCreatorPointer:n.getCreatedByPointer()}),environment:t,store:n});break}case"created_by":{const e=n.getCreatedByPointer();e&&F({actors:[e],environment:t,store:n});break}case"last_edited_by":{const e=n.getLastEditedByPointer();e&&F({actors:[e],environment:t,store:n});break}case"number":A({value:l.VY(n.getPropertyValue(d)),propertySchema:x,environment:t});break;case"text":{const e=n.getPropertyValue(d);if(!e)return;const i=f.hW({textValue:{value:e,spaceId:n.getSpaceId()},getRecordModel:n.getRecordModel,getRecordRole:n.getRecordRole,disableHover:!1,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!0,disableSuggestionAnnotations:!1,disableLinks:!1,disabled:!1,userTimeZone:(0,g.r)(),isClient:!0,isAndroid:y.isAndroid,isSafariOrIOS:y.isSafari||y.isIOS,isWindows:y.isWindows,showEmojiInline:y.isWindows,emojiType:"raw",theme:o,baseUrl:k.default.domainBaseUrl,publicDomainName:k.default.publicDomainName,currentUserId:t.currentUser.id,intl:T.default.getIntl(),katex:void 0,getPublicBaseUrlForPage:void 0,externalIntegrations:[],formulaValueTypes:[],emojiData:P.Z.state,isMobileNative:y.isMobileNative,isMobileNativeExternalLinkFixEnabled:j.default.checkGate({gateName:"mobile_native_external_link_fix"})}),r=(0,M.Xh)(n.getPropertyValue(d),n);C.g9({stringValue:r,htmlValue:i,environment:t,copiedMessage:C.tq.copiedPropertyToClipboard});break}case"url":case"email":case"phone_number":{const e=h.Jcv(n.getPropertyValue(d));C.RD({stringValue:e,environment:t,copiedMessage:C.tq.copiedPropertyToClipboard});break}case"date":{const e=n.getPropertyValue(d),o=l.Gl(e);o&&Z({date:o,environment:t,dateFormat:x.date_format,timeFormat:x.time_format});break}case"last_edited_time":case"created_time":{const e=n.getKeyStore(x.type).getValue();if(e){Z({date:c.CQ(e,(0,g.r)()),environment:t,dateFormat:x.date_format,timeFormat:x.time_format})}break}case"auto_increment_id":{const e=n.getPropertyValue(d);!function(e){const{value:t,environment:o,collectionContextStore:n}=e;if(t&&n){var r;const e=(null===(r=n.collectionStore())||void 0===r||null===(r=r.getRecordKeyStore())||void 0===r?void 0:r.getRecordKey())??"";C.RD({stringValue:(0,i.wf)(e,t),environment:o,copiedMessage:C.tq.copiedPropertyToClipboard})}}({value:l.ah(e),environment:t,collectionContextStore:m});break}}R.S$(t,m,{block_id:n.id,property:d,property_type:x.type})}}function F(e){const{actors:t,environment:o,store:n}=e,i=l.C1(t);C.RD({stringValue:(0,M.Xh)(i,n),environment:o,copiedMessage:C.tq.copiedPropertyToClipboard})}function A(e){const{value:t,propertySchema:o,environment:n}=e;if(!y.i2(t)&&!S.z4(t)){const e=(null==o?void 0:o.number_format)||m.dk,i=m.uf(t,e,T.default.getIntl());C.RD({stringValue:i,environment:n,copiedMessage:C.tq.copiedPropertyToClipboard})}}function Z(e){const{date:t,environment:o,dateFormat:n,timeFormat:i}=e,r=(0,d.ZV)({value:t,date_format:n??s.sF,time_format:i??s.c_,allowRelativeDates:!0,intl:T.default.getIntl()});C.RD({stringValue:r,environment:o,copiedMessage:C.tq.copiedPropertyToClipboard})}async function D(e){const{element:t,rect:o,environment:i,onClick:r,store:s,additionalStores:d=[],property:c,format:p,collectionStore:u,blockPropertyValueOverlayStore:g,disableHorizontalEdgeScroll:m,collectionContextStore:h,mouseStore:f,statusSetCheckbox:y,preventClearSelection:v,collectionsBulkActionsToolbarStore:S,scrollers:C}=e,{device:k,WindowSizeStore:P}=i,M=h&&w.aJ({store:s,additionalStores:d,collectionContextStore:h}),j=M?h.normalizedSchemaStore.state:u.getSchema(),B=M?c:u.getMappedProperty(c),F=j[B],A=null==F?void 0:F.type;if(!A)return;if(w.g0({property:c,collectionStore:u}))return;const Z=s.getPropertyStore(B);if("checkbox"===A)Z&&L.createAndCommit({userAction:"BlockPropertyValue.handleEditButtonClick",environment:i,perform:e=>{V.vO({stores:[s,...d],property:B,transaction:e})}}),h&&R.rv({environment:i,collectionContextStore:h,block_id:Z.id,property:B,property_type:A,from:w.Sy(p),isFromBulkActionsToolbar:Boolean(S)});else if("status"===A&&"status"===F.type&&y){const e=s.getPropertyValue(B),t=l.rO(e,F,T.default.getIntl());Z&&L.createAndCommit({userAction:"BlockPropertyValue.handleEditButtonClick",environment:i,perform:e=>{const o=F.groups??[],n=!0===t?o[0]:o[o.length-1],r=(F.options??[]).find((e=>{var t;return e.id===(null==n||null===(t=n.optionIds)||void 0===t?void 0:t[0])}));if(r)for(const t of[s,...d])x.sO({environment:i,store:t.getNormalizedPropertyStore(B),value:l.Is(r.value),transaction:e})}})}else{-1===a.uk.indexOf(A)&&(f&&f.setState({...f.state,mouseEntered:!1}),t&&C&&k.isMobileNative&&b.m[A]===I.kQ.Popup&&(_.bx({element:t,scrollers:C,vertical:{reveal:"bottom",paddingToTopEdge:4,paddingToBottomEdge:P.getSafePaddingBottomPx(320)},horizontal:{reveal:"closest"}}),await n.default.afterNextFlush()),V.bA({environment:i,blockPropertyValueOverlayStore:g,store:s,additionalStores:d,property:B,format:p,rect:o,disableHorizontalEdgeScroll:m,collectionContextStore:h,preventClearSelection:v,collectionsBulkActionsToolbarStore:S}),h&&R.zF({environment:i,collectionContextStore:h,property:B,property_type:A,from:w.Sy(p),isFromBulkActionsToolbar:Boolean(S)}))}r&&r()}},614473:(e,t,o)=>{o.d(t,{O:()=>p});var n=o(815145),i=o(401800),r=o(70853),a=o(80444),l=o(188923),s=o(206258),d=o(436610),c=o(608055);function p(e,t,o,p,u){const{mainEditorCurrentBlockStore:g}=a.default.state;if(!g)return;const m=e.find((e=>e.id===t.id));if(!m)return;let h;if(u){const e=s.G.createChildStore(g,m),t=e.getModel(),a=r.Or(o,e);h=(0,i.Z)({pageId:m.id,pageModel:t,baseUrl:a,pageVisitSource:n.tY.MentionInPage})}else{const e=g.getModel(),t=r.Or(o,g);h=(0,i.Z)({pageId:g.id,pageModel:e,baseUrl:t,peekViewBlockId:m.id,peekMode:(0,l.getUrlParamFromPeekMode)(l.default.state.mode),pageVisitSource:n.tY.MentionInPage}),d.XX(o,{from:p,meta_click:Boolean(u)})}c.c4({environment:o,url:h,openInNew:u})}},134078:(e,t,o)=>{o.d(t,{Z:()=>s});var n=o(667294),i=o(724405),r=o(844495),a=o(735948),l=o(785893);function s(e){let{setIsHovered:t}=e;const[o,s]=(0,a.C)();(0,n.useEffect)((()=>{t(s)}),[s,t]);const d=(0,i.yK)((e=>({container:{display:"inline-flex",alignItems:"center"},icon:{width:14,fill:s?e.mediumIconColor:e.lightIconColor,marginLeft:5,marginTop:1}})),[s]);return(0,l.jsx)("div",{ref:o,style:d.container,children:(0,r.D)(d.icon)})}},413182:(e,t,o)=>{o.d(t,{PJ:()=>d,fq:()=>c});o(667294);var n=o(277907),i=o(568785),r=o(497372),a=o(785893);function l(e){const{shouldShowSpinner:t,collectionSettingsProps:o}=e;return(0,a.jsx)(r.ZP,{collectionSettingsStore:o.collectionSettingsStore,fullHeight:o.fullHeight,hideDesktopHeader:o.hideDesktopHeader,children:t&&(0,a.jsx)("div",{style:{display:"flex",justifyContent:"center",overflow:"hidden"},children:(0,a.jsx)(i.Z,{})})})}const s=new n.Ss("collectionSettings",(()=>Promise.all([o.e(62743),o.e(52774),o.e(33993),o.e(76940),o.e(16732),o.e(11002),o.e(16536),o.e(4617),o.e(29657),o.e(99417),o.e(84654),o.e(83264),o.e(88833),o.e(8077),o.e(55461),o.e(87266),o.e(43627),o.e(47687),o.e(80046),o.e(40467),o.e(9420),o.e(98635),o.e(7688),o.e(92087),o.e(48838),o.e(58799)]).then(o.bind(o,17570)))),d=(0,n.kF)(s,(e=>e.CollectionSettings),{renderLoading:(e,t)=>(0,a.jsx)(l,{shouldShowSpinner:e,collectionSettingsProps:t})}),c=(0,n.kF)(s,(e=>e.CollectionSettingsButtonOptions))},230694:(e,t,o)=>{o.d(t,{L:()=>T,Z:()=>V});o(667294);var n=o(800480),i=o(886628),r=o(724405),a=o(815145),l=o(561061),s=o(16184),d=o(526774),c=o(709291),p=o(531701),u=o(137810),g=o(275754),m=o(607692),h=o(24946),f=o(628020),y=o(849616),v=o(214976),S=o(973744),C=o(798165),x=o(206258),b=o(274016),I=o(164921),k=o(731278),P=o(785893);const w=(0,c.defineMessages)({shared:{defaultMessage:"Shared",id:"CollectionLocation.SidebarTitle.sectionShared"},private:{defaultMessage:"Private",id:"CollectionLocation.SidebarTitle.sectionPrivate"},noAccess:{defaultMessage:"No access",id:"CollectionLocation.noAccess"},emptyCollectionName:{id:"CollectionLocation.EmptyCollectionName",defaultMessage:"Untitled"}});function M(e){return(0,P.jsx)("span",{style:{paddingTop:4,paddingLeft:4,...e.style},children:"/"})}function T(e){const{collectionForLocationStore:t,collectionContextStore:o}=e,n=(0,c.useIntl)(),a=(0,i.VK)((()=>{const e=C.uJ(t);return e.reverse(),e}),[t]),{collectionIsInPrivate:u,collectionIsInRestricted:g,collectionIsInShared:m}=(0,i.VK)((()=>{const e=o.groupsForTypedDatabasesStore.state;return{collectionIsInPrivate:Boolean(null==e?void 0:e.privateDatabases[t.id]),collectionIsInRestricted:Boolean(null==e?void 0:e.restrictedDatabases[t.id]),collectionIsInShared:Boolean(null==e?void 0:e.sharedDatabases[t.id])}}),[o.groupsForTypedDatabasesStore,t.id],{useDeepEqual:!0}),h=(0,i.VK)((()=>(0,p.gh)({theme:"light"})),[]),f=(0,r.yK)((e=>({textStyle:{color:h.popoverWaxPaperBackground,fontWeight:"normal"},shareTypeIndicatorIcon:{width:20,height:20,marginRight:2,color:e.mediumIconColor,padding:2,backgroundColor:h.accentColors.gray[100],borderRadius:3}})),[h]),y=u||g||m;let v=null;return u?v=(0,P.jsxs)(P.Fragment,{children:[(0,s.Q)(f.shareTypeIndicatorIcon),(0,P.jsx)("span",{children:n.formatMessage(w.private)})]}):g?v=(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("div",{style:{...f.shareTypeIndicatorIcon,padding:0,paddingLeft:1,margin:0},children:(0,l.B)({...f.shareTypeIndicatorIcon,margin:0,background:void 0})}),(0,P.jsx)("span",{children:n.formatMessage(w.noAccess)})]}):m&&(v=(0,P.jsxs)(P.Fragment,{children:[(0,d.O)(f.shareTypeIndicatorIcon),(0,P.jsx)("span",{children:n.formatMessage(w.shared)})]})),(0,P.jsxs)("div",{style:{display:"flex"},children:[y&&(0,P.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",columnGap:4,...f.textStyle},children:[v,!g&&(0,P.jsx)(M,{style:{marginTop:-4,...f.textStyle}})]}),a.length>3?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(j,{ancestorStore:a[0],showDivider:!0}),(0,P.jsx)("span",{style:{paddingLeft:2,paddingTop:4,...f.textStyle},children:"..."}),(0,P.jsx)(M,{style:f.textStyle}),!(u||m)&&(0,P.jsx)(j,{ancestorStore:a[a.length-2],showDivider:!0}),(0,P.jsx)(j,{ancestorStore:a[a.length-1],showDivider:!1})]}):a.map(((e,t)=>(0,P.jsx)(j,{ancestorStore:e,showDivider:t<a.length-1},e.id)))]})}function j(e){const{ancestorStore:t,showDivider:o}=e,n=(0,i.VK)((()=>(0,p.gh)({theme:"light"})),[]),a=(0,r.yK)((e=>({teamIconStyle:{background:e.popoverWaxPaperBackground},textStyle:{color:n.popoverWaxPaperBackground,fontWeigth:"normal"}})),[n]);return t instanceof x.zX?(0,P.jsxs)("div",{style:{display:"flex"},children:[(0,P.jsx)(h.Z,{store:t,showDivider:!1,maxWidth:160,iconSize:16,iconStyle:a.teamIconStyle,titleStyle:a.textStyle}),o&&(0,P.jsx)(M,{style:a.textStyle})]}):(0,P.jsxs)("div",{style:{display:"flex"},children:[(0,P.jsx)(m.Z,{store:t,showDivider:!1,emojiSize:18,maxWidth:160,titleStyle:a.textStyle},t.id),o&&(0,P.jsx)(M,{style:a.textStyle})]})}function R(e){const{teamStore:t,collectionStore:o}=e,n=(0,i.VK)((()=>o.getIcon()),[o]),a=(0,r.yK)((e=>({miniTeamSpaceIcon:{background:e.home.tile.background,position:"absolute",bottom:-3,right:-3,borderRadius:2},teamSpaceIcon:{borderRadius:2,marginRight:2}})),[]);return n?(0,P.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",position:"relative",marginRight:2},children:[(0,P.jsx)(k.Z,{icon:n,size:20,emojiSize:20,isEmptyPage:!1,bucket:"public",isLarge:!0,largeIcon:!0,disabled:!0}),(0,P.jsx)(b.p,{store:t,disabled:!0,size:12,style:a.miniTeamSpaceIcon},"icon")]}):(0,P.jsx)(b.p,{store:t,disabled:!0,size:20,style:a.teamSpaceIcon},"icon")}const V=function(e){const{collectionContextStore:t,collectionForLocationStore:o}=e,p=(0,n.O7)(),m=(0,c.useIntl)(),{collectionIsInPrivate:h,collectionIsInRestricted:x,collectionIsInShared:b}=(0,i.VK)((()=>{const e=t.groupsForTypedDatabasesStore.state;return{collectionIsInPrivate:Boolean(null==e?void 0:e.privateDatabases[o.id]),collectionIsInRestricted:Boolean(null==e?void 0:e.restrictedDatabases[o.id]),collectionIsInShared:Boolean(null==e?void 0:e.sharedDatabases[o.id])}}),[t.groupsForTypedDatabasesStore,o.id],{useDeepEqual:!0}),M=(0,i.VK)((()=>C.VP(o)),[o]),T=(0,i.VK)((()=>(0,v.Xh)(o.getName(),o)??m.formatMessage(w.emptyCollectionName)),[o,m]),j=(0,i.VK)((()=>o.getIcon()),[o]),V=(0,i.VK)((()=>{var e;return null===(e=t.collectionViewBlockStore())||void 0===e?void 0:e.id}),[t]),_=(0,i.VK)((()=>{let e=a.tY.LocationProperty;return V?((0,f.qG)(V)&&(e=t.isInHomeWidgetStore.state?a.tY.PersonalHomeTileTasks:a.tY.PersonalHomePageTasks),e):e}),[V,t]),L=(0,r.yK)((e=>({button:{color:e.accentColors.gray[800],cursor:"pointer"},inner:{display:"flex",flexDirection:"row",alignItems:"center",columnGap:4},shareTypeIndicatorIcon:{width:20,height:20,marginRight:2,color:e.mediumIconColor,padding:2,backgroundColor:e.fill.lightGray,borderRadius:3},miniShareTypeIndicatorIcon:{position:"absolute",bottom:-3,right:-3,width:12,height:12,color:e.mediumIconColor,backgroundColor:e.fill.gray,borderRadius:3,paddingTop:1,paddingBottom:1},collectionTitleTextStyle:{lineHeight:1,fontWeight:u.Z.fontWeight.medium,marginTop:2,marginLeft:2,whiteSpace:"nowrap",...(0,y.z0)(e)}})),[]);if(!(M||h||x||b))return null;const B=h||x||b;let F=(0,d.O)(L.shareTypeIndicatorIcon);return j?F=(0,P.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",position:"relative"},children:[(0,P.jsx)(k.Z,{icon:j,size:20,emojiSize:20,isEmptyPage:!1,bucket:"public",isLarge:!0,largeIcon:!0,disabled:!0}),h?(0,s.Q)(L.miniShareTypeIndicatorIcon):(0,d.O)(L.miniShareTypeIndicatorIcon)]}):x?F=(0,P.jsx)("div",{style:{...L.shareTypeIndicatorIcon,padding:0,paddingLeft:1,margin:0},children:(0,l.B)({...L.shareTypeIndicatorIcon,margin:0,background:void 0})}):h&&(F=(0,s.Q)(L.shareTypeIndicatorIcon)),(0,P.jsx)(I.Z,{hoveredStyle:{background:"transparent"},pressedStyle:{background:"transparent"},style:L.button,onClick:e=>{const t=o.getParentBlockStore();if(t){const o=(0,S.DJ)(e);g._c({environment:p,store:t,pageVisitSource:_,openInNew:o})}},children:(0,P.jsxs)("div",{style:L.inner,children:[M&&(0,P.jsx)(R,{teamStore:M,collectionStore:o}),B&&F,(0,P.jsx)("div",{style:L.collectionTitleTextStyle,children:T})]})})}},289845:(e,t,o)=>{o.d(t,{Z:()=>v});var n=o(667294),i=o(313991),r=o(720294),a=o(886628),l=o(724405),s=o(407057),d=o(253877),c=o(842875),p=o(136700),u=o(709291),g=o(531701),m=o(619584),h=o(541056),f=o(526388),y=o(785893);const v=function(e){const t=(0,u.useIntl)(),o=(0,l.Fg)(),v=(0,r.k)(),x=(0,n.useRef)(),b=(0,n.useCallback)((()=>{const t=e.value;if(!t)return;const o=d.KR(t,(0,c.r)());if(!o)return;const n=o.valueOf(),i=n-Date.now();i<0||i>m.A0||x.current&&x.current.timestamp===n||(x.current&&clearTimeout(x.current.timer),x.current={timestamp:n,timer:setTimeout(v,i)})}),[v,e.value]),I=(0,n.useCallback)((()=>{x.current&&(clearTimeout(x.current.timer),x.current=void 0)}),[]);(0,n.useEffect)((()=>{b()}),[b]),(0,n.useEffect)((()=>()=>{I()}),[I]);const{value:k,withComma:P}=e,w=(0,a.VK)((()=>k?(0,s.ZV)({value:k,date_format:e.dateFormat,time_format:e.timeFormat,userTimeZone:(0,c.r)(),allowRelativeDates:!0,intl:t,shortenDateAndRange:e.shortenDateAndRange,displayInUserTimezone:e.displayInUserTimezone,getToday:h.HL}):void 0),[t,e.dateFormat,e.displayInUserTimezone,e.shortenDateAndRange,e.timeFormat,k]);if(!k)return null;const M=d.NK(k,(0,c.r)(),i.SP);let T;if(k.reminder){const e=d.Nm(k,(0,c.r)());T=e?{color:o.errorText}:{color:g.ZP.blue}}const j=(0,y.jsxs)(y.Fragment,{children:[w,k.reminder&&(0,p.m)({display:"inline-block",width:"1em",marginLeft:6,marginRight:2,paddingBottom:4,verticalAlign:"middle"}),P?", ":null]});return e.disableTooltip?(0,y.jsx)("div",{style:{...e.style,...T},children:j}):(0,y.jsx)(f.Z,{renderTooltip:()=>(0,y.jsxs)(y.Fragment,{children:[e.tooltipHeader,(0,y.jsxs)("div",{style:C(o,e.tooltipHeader),children:[S(M.start),M.end?` → ${S(M.end)}`:""]})]}),render:t=>(0,y.jsx)("div",{style:{...e.style,...T},...t,children:j}),placement:e.tooltipPlacement})};function S(e){return(0,s.ZW)(e,"medium")}function C(e,t){return t?{color:e.mediumInvertedTextColor}:{}}},56247:(e,t,o)=>{o.d(t,{b:()=>g});o(667294);var n=o(724405),i=o(423512),r=o(653965),a=o(619584),l=o(849616),s=o(433929),d=o(385248),c=o(278942),p=o(785893);const u=21;function g(e){const{numberValue:t,numberFormat:o,numberShowAs:g,shouldRenderTooltip:m,withComma:h,style:f}=e,y=(0,n.Fg)();if(r.i2(t)||a.z4(t))return null;const v=e.progressSize??u,S=(null==g?void 0:g.showValue)??!0,C=S&&i.uf(t,o,s.default.getIntl());let x;if("bar"===(null==g?void 0:g.type)||"ring"===(null==g?void 0:g.type)){const n=i.IM(t,g.maxValue),r="default"===g.color?y.selectLightGray:y.accentColors[g.color],a="dark"===y.mode?r[500]:r[400],s=r[50],u="dark"===y.mode?r[200]:y.selectLightGray[200],h=m?l.X7({numberValue:t,numberFormat:o,numberShowAs:g}):void 0;x="bar"===g.type?(0,p.jsx)(d.k,{percentage:n,filledColor:a,gapColor:s,unfilledColor:u,style:{marginLeft:S?8:0,height:v,...e.barStyle,...S?{}:{flexBasis:"100%"}},tooltip:h}):(0,p.jsx)(c.e,{percentage:n,filledColor:a,gapColor:s,unfilledColor:u,size:v,style:{marginLeft:S?8:0},tooltip:h})}const b={display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",...f};return(0,p.jsxs)("div",{style:b,children:[C,x,h?", ":null]})}},13654:(e,t,o)=>{o.d(t,{Z:()=>D});var n=o(667294),i=o(800480),r=o(886628),a=o(724405),l=o(399036),s=o(180951),d=o(890199),c=o(116275),p=o(709291),u=o(653965),g=o(805149),m=o(524677),h=o(898104),f=o(413182),y=o(134078),v=o(710274),S=o(566890),C=o(296994),x=o(966603),b=o(243224),I=o(319124),k=o(98742),P=o(639500),w=o(825464),M=o(469316),T=o(222294),j=o(623063),R=o(164921),V=o(850478),_=o(953437),L=o(526388),B=o(297820),F=o(785893);function A(e){const{style:t}=e,o=(0,n.useRef)(null),c=(0,S.DK)(),y=(0,i.O7)(),M=(0,i.Fy)(),R=(0,a.yK)((e=>({lockedIcon:{width:12,fill:e.regularInvertedTextColor,marginLeft:2,display:"inline-block",verticalAlign:"middle",paddingBottom:3},description:{color:e.mediumInvertedTextColor},autoUpdatedByAi:{color:e.mediumInvertedTextColor},autoUpdatedByCalendar:{color:e.mediumInvertedTextColor},tooltipStyles:{display:"flex",alignItems:"center",height:34,width:M.isMobile?120:160,flex:"none",color:e.mediumTextColor,...t}})),[M.isMobile,t]),[B,A]=(0,n.useState)(!1),{property:D,schema:z,disabled:H,locked:N,canConfigureCollection:W,isInPeekRenderer:U,origin:E,hideDragHandle:q,blockStore:$,pagePropertiesStore:G}=e,Q=z[D],X=(0,r.VK)((()=>null==c?void 0:c.collectionStore()),[c]),J=(0,r.VK)((()=>G.state.hoveredProperty===D),[G,D]),Y=(0,r.VK)((()=>J&&!T.Z.state.isKeyboardMode&&!q),[q,J]),ee=(0,r.VK)((()=>G.state.openProperty),[G]),te=(0,n.useCallback)((t=>{const{property:o,schema:n,disabled:i,locked:r,canConfigureCollection:a,disableRowNameInteractivity:l,pagePropertiesStore:s}=e;if(!(null==c?void 0:c.collectionStore())||!c)return;const d=c.permissionScopesStore.state,p={onClick:!l&&d.canConfigureBlock?()=>function(e,t,o,n){h.ZH({debug:{userAction:"PagePropertiesRowName.handleClick"},environment:o}),m.ZH({debug:{userAction:"PagePropertiesRowName.handleClick"},environment:o}),v.wG(),n.setState({...n.state,openProperty:{property:e,isInPeekRenderer:t}})}(e.property,e.isInPeekRenderer,y,s):u.yR};return(0,F.jsx)(Z,{hideIcon:Boolean(e.hideIcon),schema:n,property:o,disabled:i||Boolean(l),locked:r,canConfigureCollection:a,events:(0,k.Z)(p,t),propertyNameAriaId:e.propertyNameAriaId,setIsDescriptionIconTooltipHovered:e=>A(e),module:e.module})}),[c,y,e]),oe=(0,n.useCallback)((()=>{const t=null==c?void 0:c.settingsStore;if(c&&t)return(0,F.jsx)("div",{ref:o,children:t.state.open?(0,F.jsx)(f.PJ,{context:x.HV.TopbarFilterPopup,collectionContextStore:c,collectionSettingsStore:t,hideDesktopHeader:!0}):(0,F.jsx)(C.o9,{...e,popupContainerRef:o})})}),[c,e]);return X&&c&&Q?(0,F.jsx)(L.Z,{renderTooltip:e=>{const t=(0,l.qQ)(Q)&&("text"===Q.type||(0,I.KZ)())&&(0,l.q3)(Q),o=(0,s.KK)($.getModel(),X.getModel(),D);return(0,F.jsxs)("div",{...e,style:b.F6,children:[(0,F.jsxs)("div",{children:[Q.name,N&&(0,d.b)(R.lockedIcon)]}),void 0!==(null==Q?void 0:Q.description)&&Q.description.length>0?(0,F.jsx)("div",{style:R.description,children:Q.description}):null,t&&t.auto_update_on_edit&&(0,F.jsx)("div",{style:R.autoUpdatedByAi,children:(0,F.jsx)(p.FormattedMessage,{defaultMessage:"Auto-updated by AI",id:"database.tableHeaderCell.tooltipAiAutofillDescription"})}),o&&(0,F.jsx)("div",{style:R.autoUpdatedByCalendar,children:(0,F.jsx)(p.FormattedMessage,{defaultMessage:"Auto-updated by Notion Calendar",id:"database.tableHeaderCell.tooltipNotionCalendarDescription"})})]})},delayThreshold:B?0:500,placement:w.u.Left,render:t=>(0,F.jsxs)("div",{style:R.tooltipStyles,onMouseMove:()=>O(e.property,G),onMouseLeave:()=>K(G),children:[!M.isMobile&&!H&&!(N||!W)&&!q&&(0,F.jsx)(j.Z,{isVisible:!0,animationStyle:{opacity:Y?1:0},enterAnimationStyle:{opacity:0},exitAnimationStyle:{opacity:0},render:()=>(0,F.jsx)("div",{style:{width:V.C$+4,marginLeft:-(V.C$+4),...e.dragHandleStyle},onMouseMove:()=>O(e.property,G),onMouseLeave:()=>K(G),children:(0,F.jsx)(V.ZP,{role:"cell",disallowTabbing:!0,onClick:t=>function(e,t,o,n){P.X9()||n.setState({...n.state,openProperty:{property:t,isInPeekRenderer:o}})}(0,e.property,e.isInPeekRenderer,G)})})}),(0,F.jsx)(_.ZP,{style:e.popupStyle,popupType:M.isMobile?_.kQ.SlideUp:_.kQ.Popup,originGap:1,alignmentToOrigin:_.ZP.Alignment.Start,render:oe,open:Boolean(ee&&!H&&ee.property===D&&ee.isInPeekRenderer===U),onDismiss:()=>{G.setState({...G.state,openProperty:void 0});const e=c.settingsStore;g.E3({collectionSettingsStore:e})},origin:E??te(t)})]},D)}):null}function Z(e){var t;const{schema:o,property:n,disabled:l,locked:s,canConfigureCollection:d,events:p}=e,u=o[n],{isMobile:g}=(0,i.Fy)(),{shouldHighlight:m,isFocusedHighlightMatch:h}=(0,r.VK)((()=>{var e;const{findQuery:t,open:i,currentFocusedResult:r}=M.Z.state;if(!i)return{shouldHighlight:!1,isFocusedHighlightMatch:!1};const a=r,l=null===(e=o[n])||void 0===e?void 0:e.name;return{shouldHighlight:!!(l&&t.length>0)&&l.toLowerCase().includes(t.toLowerCase()),isFocusedHighlightMatch:"page_property_name"===(null==a?void 0:a.type)&&a.propertyId===n}}),[n,o]),f=(0,a.yK)((e=>{const t=h?e.findHighlightMatch.selectedBackground:e.findHighlightMatch.unselectedBackground;return{highlight:{backgroundColor:m?t:void 0,outline:m?`5px solid ${t}`:void 0,borderRadius:m?4:void 0,color:h?"black":void 0}}}),[h,m]);return u?(0,F.jsx)(R.Z,{role:"cell",id:e.propertyNameAriaId,style:{display:"flex",alignItems:"center",height:"100%",width:e.module?void 0:"100%",borderRadius:4,padding:"0 6px"},disabled:l||s||!d,...p,onContextMenu:e=>{e.preventDefault(),p.onClick(e)},children:(0,F.jsx)(B.Z,{propertySchema:u,showIcon:!e.hideIcon,badge:(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(B.o,{propertySchema:u}),!g&&!(null===(t=u.description)||void 0===t||!t.length)&&(0,F.jsx)(y.Z,{setIsHovered:e.setIsDescriptionIconTooltipHovered})]}),style:{fontSize:14,...f.highlight},property:n,className:h?c.qp:void 0,iconStyle:{...h&&{fill:"black"}}})}):null}const D=n.memo(A);function K(e){e.setState({...e.state,hoveredProperty:void 0})}function O(e,t){t.setState({...t.state,hoveredProperty:e})}},152247:(e,t,o)=>{o.d(t,{Z:()=>le});o(757658);var n=o(667294),i=o(701302),r=o(800480),a=o(886628),l=o(724405),s=o(371663),d=o(541432),c=o(399036),p=o(180951),u=o(12396),g=o(984619),m=o(89767),h=o(747453),f=o(870663),y=o(435840),v=o(421202),S=o(76233),C=o(709291),x=o(137810),b=o(436610),I=o(100952),k=o(551365),P=o(431869),w=o(498834),M=o(60971),T=o(119785),j=o(709953),R=o(614473),V=o(137231),_=o(898104),L=o(210228),B=o(51592),F=o(566890),A=o(27105),Z=o(296994),D=o(849616),K=o(368585),O=o(741195),z=o(450627),H=o(165598),N=o(729376),W=o(486098),U=o(245452),E=o(229798),q=o(206258),$=o(278030),G=o(388071),Q=o(164921),X=o(279131),J=o(632163),Y=o(672495),ee=o(526388),te=o(13654),oe=o(785893);const ne={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0};function ie(e){const{property:t,propertySchema:o,numberOfRelations:i,schema:r,format:d,disabled:c,locked:p,canConfigureCollection:g,blockStore:m,collectionStore:h,onHandleOpenProperty:f,onHandleRelationPropertyPageSectionRefMount:y,isInPeekRenderer:v,targetCollectionStore:S,pagePropertiesStore:b}=e,I=(0,l.yK)((e=>({hoverButton:{display:"flex",alignItems:"baseline",justifyContent:"normal",color:e.mediumTextColor,width:"100%"},minimalButton:{display:"inline-flex",alignItems:"center",flexShrink:0,whiteSpace:"nowrap",height:28,borderRadius:4,fontSize:14,lineHeight:1.2,minWidth:0,paddingLeft:6,paddingRight:8,fontWeight:x.Z.fontWeight.medium,color:e.mediumTextColor},minimalButtonWrapper:{width:"100%",maxWidth:"100%",fontWeight:x.Z.fontWeight.medium,color:e.mediumTextColor},iconStyle:{width:14,height:14,fill:e.mediumIconColor,marginRight:6,alignItems:"baseline"},pagePropertiesRowName:{width:"100%",display:"inline-flex",flexWrap:"wrap"}})),[]),k=(0,l.Fg)(),P=(0,n.useCallback)((()=>{b.setState({...b.state,hoveredProperty:t})}),[t,b]),w=(0,n.useCallback)((()=>{b.setState({...b.state,hoveredProperty:void 0})}),[b]),M=(0,a.VK)((()=>S.getFormatStore().getKeyStore("app_config_uri").getValue()),[S]),T=(0,B.sN)(s.p$),j=(0,B.Q_)(s.p$);return(0,oe.jsx)("div",{style:I.hoverButton,onMouseMove:P,onMouseLeave:w,children:(0,oe.jsx)(te.Z,{schema:r,format:d,property:t,blockStore:m,collectionStore:h,disabled:c,locked:p,canConfigureCollection:g,style:I.pagePropertiesRowName,popupStyle:I.pagePropertiesRowName,pagePropertiesStore:b,origin:(0,oe.jsx)("div",{ref:y,style:I.minimalButtonWrapper,children:(0,oe.jsx)(Q.Z,{style:I.minimalButton,onClick:()=>f(!0),onContextMenu:e=>{c||p||!g||(e.preventDefault(),b.setState({...b.state,openProperty:{property:t,isInPeekRenderer:v}}))},children:(0,oe.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,oe.jsx)(u.ZP,{size:14,style:I.iconStyle,theme:k,type:o.type??"relation",icon:o.icon}),M===s.p$?(0,oe.jsx)(C.FormattedMessage,{id:"RelationPropertyPageSection.sprints.showSprintRelations",defaultMessage:"{numberOfRelations, plural, =0 {Add {propertyName}} one {1 {singleTypedItemName}} other {{numberOfRelations} {pluralTypedItemName}}}",values:{numberOfRelations:i,propertyName:o.name,singleTypedItemName:T,pluralTypedItemName:j}}):(0,oe.jsx)(C.FormattedMessage,{id:"RelationPropertyPageSection.showRelations",defaultMessage:"{numberOfRelations, plural, =0 {Add {propertyName}} one {1 {propertyName}} other {{numberOfRelations} {propertyName}}}",values:{numberOfRelations:i,propertyName:o.name}})]})},`minimal-section-${t}`)}),hideDragHandle:!0,isInPeekRenderer:v})})}function re(e){const{collectionStore:t,targetCollectionStore:o,property:n,showRight:i,disabled:r,locked:l,style:d,children:p,canEditTargetCollection:u,canConfigureCollection:g,canEditCurrentPage:m,handleMouseMove:f,onHandleOpenProperty:v,onHandleRelationPropertyPageSectionRefMount:S,onTitleEnter:x,topBorder:b=!0}=e,I=(0,a.VK)((()=>o.isSyncedCollection()),[o]),k=(0,a.VK)((()=>{const e=t.getSchema()[n];return Boolean(e&&c.NK(e))}),[t,n]),P=(0,a.VK)((()=>o.getFormatStore().getKeyStore("app_config_uri").getValue()===s.p$),[o]),w=(0,a.VK)((()=>e.collectionContextStore.permissionScopesStore.state),[e]);return(0,oe.jsx)("div",{style:{width:"100%"},ref:S,children:(0,oe.jsx)(Y.Z,{...e,topBorder:b,children:p,noTextOverflow:!0,isTitleUppercase:!1,right:i&&!I&&!w.isExternallyImportedAndSyncedCollection&&!k&&(0,oe.jsxs)("div",{style:{height:"100%",display:"flex",alignItems:"center",width:"100%"},children:[m&&(0,oe.jsx)(ae,{disabled:r,handleMouseMove:f,onClick:v,icon:y.R,tooltipMessage:P?(0,oe.jsx)(C.FormattedMessage,{id:"database.RelationPropertyPageSectionHeaderButton.tooltip.searchButtonSprints.message",defaultMessage:"Search for a sprint"}):(0,oe.jsx)(C.FormattedMessage,{id:"database.RelationPropertyPageSectionHeaderButton.tooltip.searchButton.message",defaultMessage:"Link a page"})},`searchIcon-${n}`),u&&m&&!P&&!l&&(0,oe.jsx)(ae,{disabled:r,handleMouseMove:f,onClick:x,icon:h.R,tooltipMessage:P?(0,oe.jsx)(C.FormattedMessage,{id:"database.RelationPropertyPageSectionHeaderButton.tooltip.addButtonSprints.message",defaultMessage:"Create new sprint"}):(0,oe.jsx)(C.FormattedMessage,{id:"database.RelationPropertyPageSectionHeaderButton.tooltip.addButton.message",defaultMessage:"Add new page"})},`addIcon-${n}`),(0,oe.jsx)(Z.P$,{collectionStore:t,targetCollectionStore:o,property:n,disabled:r||!g,rowType:"section"})]}),style:{paddingTop:0,paddingBottom:2,width:"100%",...d},desktopTitleStyle:{height:6,paddingLeft:0,paddingRight:8,paddingTop:24,fontWeight:"normal"},mobileTitleStyle:{paddingLeft:0,alignItems:"center",fontWeight:"normal"}})})}function ae(e){const{disabled:t,handleMouseMove:o,onClick:n,icon:i,tooltipMessage:r}=e,a=(0,l.yK)((e=>({buttonStyle:{width:24,height:24,borderRadius:4,display:"inline-flex",alignItems:"center",justifyContent:"center",marginRight:4},iconStyle:{width:14,height:14,flexGrow:0,flexShrink:0,fill:e.mediumIconColor}})),[]);return(0,oe.jsx)(ee.Z,{renderTooltip:()=>r,render:e=>(0,oe.jsx)(Q.Z,{style:a.buttonStyle,onMouseMove:o,onClick:n,disabled:t,...e,children:i(a.iconStyle)})})}const le=function(e){const t=(0,n.useContext)(F.cu),o=(0,a.qz)(void 0,E.Z),i=(0,a.qz)(void 0,U.Z),[d,u]=(0,n.useState)(10),{schema:y,format:S,locked:x,property:I,collectionStore:k,store:w,disabled:T,visibility:j,isInPeekRenderer:V,topBorder:B,pagePropertiesStore:A,blockPropertyValueOverlayStore:K}=e,O=(0,r.O7)(),N=(0,a.VK)((()=>{const{store:t,schema:o,property:n}=e,i=o[n];if(!i||"relation"!==i.type)return[];const r=t.getPropertyValue(n);return p.j$({relationValue:p.rq(r),propertySchema:i,getRecordModel:t.getRecordModel})}),[e],{useDeepEqual:!0}),W=(0,a.VK)((()=>N.length),[N.length]),ee=(0,n.useCallback)(((e,t)=>function(e,t,o,n,i,r,a,l){const s=i[r];if(!s||"relation"!==s.type)return;const d=c.j0(s);if(!d)return;const u=q.NW.createChildStore(a,d);if(!(0,H.OY)(a)||!r)return;const g=a.getPropertyValue(r),m=p.j$({relationValue:p.rq(g),propertySchema:s,getRecordModel:a.getRecordModel}),h=[...e.map((e=>({id:e,spaceId:n.pointer.spaceId,table:v.iU}))),...m.slice(e.length)];ce({newValues:h,oldValues:m},u,a,r,o),b.yT(o,{from:"relation_section"}),M.sv({store:l,focus:{section:0,indexLocal:t.endPosition,indexGlobal:t.endPosition}})}(e,t,O,k,y,I,w,o)),[O,k,y,I,w,o]),ae=(0,n.useCallback)(((o,n,i)=>ge(o,n,i,O,e.blockPropertyValueOverlayStore,w,I,t,le)),[t,O,I,e.blockPropertyValueOverlayStore,w]),le=(0,n.useRef)(null),me=(0,r.Fy)(),he=y[I],fe=(0,a.VK)((()=>null==t?void 0:t.permissionScopesStore.state),[t]),ye=(0,a.VK)((()=>d),[d]),ve=(0,a.VK)((()=>{if("relation"===(null==he?void 0:he.type)&&t)return he}),[t,he]),Se=(0,a.VK)((()=>{if(!ve)return;const e=c.j0(ve);return e?q.NW.createChildStore(w,e):void 0}),[ve,w]),Ce=(0,a.VK)((()=>(null==Se?void 0:Se.canEdit())??!1),[Se]),xe=(0,a.VK)((()=>w.canEdit()),[w]),be=(0,a.VK)((()=>(0,z.Wt)(w)),[w]),Ie=(0,l.yK)((e=>({addNewRelationButtonWrapper:se(e),addNewRelationButtonIcon:de(e),replacePageSprint:{color:e.mediumTextColor}})),[]),ke=N.slice(0,ye),Pe=(0,a.VK)((()=>(null==Se?void 0:Se.getFormatStore().getKeyStore("app_config_uri").getValue())===s.p$??!1),[Se]),we=1===(null==ve?void 0:ve.limit)??!1,Me=!(me.isMobile||T||x||we),Te=(0,a.VK)((()=>{if(!Se||!ve||!k)return[];const e=Se.getFormatStore().getKeyStore("app_config_uri").getValue()===s.p$;return ke.reduce(((n,i,r)=>{const a=q.G.createChildStore(w,i),l=a.getAssociatedCollectionStore();if((null==l?void 0:l.id)===c.F0(ve)){const i={key:a.id,render:n=>{let{ref:i,...l}=n;return(0,oe.jsx)(Z.aJ,{...l,canDrag:Me&&1!==ve.limit&&w.canEdit(),collectionStore:k,targetCollectionStore:Se,relatedPageStore:a,disabled:T,locked:x,isSelected:!0,pageStore:w,property:I,rowType:"section",onActionButtonClick:()=>function(e,t,o,n,i,r,a,l,s,d){const c=r[a];if("relation"!==(null==c?void 0:c.type)||!d)return;if((0,z.Wt)(i))return;const p=c.limit,u=p?[]:e.filter((e=>e.id!==t.id));L.createAndCommit({userAction:"RelationSection.handleRemoveRelationClick",environment:n,perform:e=>{P.sf({store:i,propertyId:a,value:u,environment:n,relatedPageId:t.id,propertySchema:c,transaction:e,collectionContextStore:d,analyticsData:{isFromBulkActionsToolbar:D.VM(l),analyticsFrom:D.Sy($.C.Page)},isUnthrottled:!1})}}),b.WF(n,{from:"relation_section",collection_id:null==s?void 0:s.id,target_collection_id:null==o?void 0:o.id})}(ke,a,Se,O,w,y,I,K,k,t),onMouseLeave:()=>o.unsetFocus(),onSecondaryButtonClick:()=>ue(r+1,Se,"relation_section_inline",O,w,I,k,d,u,t,ve),onInsertInline:e?()=>{_.ZH({debug:{userAction:"RelationPropertyPageSection.menuItem"},environment:O})}:()=>ue(r+1,Se,"relation_section_inline",O,w,I,k,d,u,t,ve),onTitleEsc:()=>{var e;0===(null===(e=a.getTitleStore())||void 0===e||null===(e=e.getValue())||void 0===e?void 0:e.length)&&"relation"===ve.type?function(e,t,o){if((0,z.Wt)(o))return;L.createAndCommit({userAction:"RelationSection.handleDeleteRelatedPage",environment:t,perform:t=>{const o={pointer:e.pointer,command:"update",path:[],args:{alive:!1}};L.applyOperation({store:e,operation:o,transaction:t})}})}(a,O,w):_.ZH({debug:{userAction:"RelationPropertyPageSection.menuItem"},environment:O})},onOpenPageButtonClick:()=>{R.O(ke,a,O,"relation_section_inline")},index:r+1,propertyLimit:ve.limit})},action:e=>{}};n.push(i)}return n}),[])}),[K,Me,t,k,d,T,O,ke,x,o,I,ve,y,w,Se]);if(!("section_hide"!==j&&ve&&Se&&t&&fe))return null;if("minimal"===j||0===W)return(0,oe.jsx)(ie,{property:I,propertySchema:ve,numberOfRelations:W,onHandleOpenProperty:ae,onHandleRelationPropertyPageSectionRefMount:e=>{e&&(le.current=e)},schema:y,format:S,disabled:T,locked:x,canConfigureCollection:fe.canConfigureCollection,blockStore:w,collectionStore:k,collectionContextStore:t,isInPeekRenderer:V,targetCollectionStore:Se,pagePropertiesStore:A});const je=Te.map((e=>e.key.toString())),Re=(0,oe.jsx)(J.Z,{type:J.i.Vertical,store:o,initialFocus:void 0,disableKeyboard:!0,style:{width:"100%"},sections:[{key:"section",render:e=>(0,oe.jsx)(Y.Z,{...e,disableDesktopPadding:!0,disableMobileBorders:!0,children:Me?(0,oe.jsx)(X.ZP,{direction:"vertical",keys:je,renderKey:t=>e.children[je.indexOf(t)],onDrop:ee,store:i}):e.children}),items:Te}]}),Ve={maxWidth:me.isMobile?"none":300,...!me.isMobile&&{width:"auto"},...me.isMobile&&{paddingLeft:"none"}};return(0,oe.jsx)(re,{collectionContextStore:t,title:e.propertyRowName??(0,oe.jsx)(te.Z,{schema:y,format:S,property:I,blockStore:w,collectionStore:k,disabled:T,locked:x,canConfigureCollection:fe.canConfigureCollection,style:Ve,popupStyle:Ve,isInPeekRenderer:V,pagePropertiesStore:A}),collectionStore:k,targetCollectionStore:Se,property:I,showRight:!0,disabled:T,schema:y,format:S,locked:x,canEditTargetCollection:Ce,canConfigureCollection:fe.canConfigureCollection,canEditCurrentPage:xe,handleMouseMove:e.handleMouseMove,onHandleOpenProperty:()=>{ge(!1,void 0,void 0,O,K,w,I,t,le)},onHandleRelationPropertyPageSectionRefMount:e=>{e&&(le.current=e)},onTitleEnter:()=>ue(void 0,Se,"relation_section_inline",O,w,I,k,d,u,t,ve),handleClearProperty:()=>pe(Se,w,I,N,O),topBorder:B,children:(0,oe.jsxs)("div",{style:{flex:1,minWidth:0,display:"flex",flexWrap:"wrap",flexDirection:"column",paddingBottom:"12px",paddingTop:"12px",width:"100%",...me.isMobile&&{paddingLeft:"none"}},onMouseMove:e.handleMouseMove,onMouseLeave:e.handleMouseLeave,children:[Re,N.length>ye&&(0,oe.jsx)(Q.Z,{style:{width:"100%",display:"flex",alignItems:"center",borderRadius:3,fontSize:14,minHeight:30,margin:0,padding:"6px 8px 7px 8px"},onClick:()=>u(ye+10),children:(0,oe.jsx)(G.Z,{count:N.length-ye,format:g.lo.Medium,style:{margin:void 0},fixedHeight:!1,isCompact:!1})}),Ce&&xe&&!x&&!be&&(0,oe.jsxs)(Q.Z,{style:Ie.addNewRelationButtonWrapper,onClick:()=>{Pe?pe(Se,e.store,e.property,N,O):ue(N.length>=ye?ye:N.length+1,Se,"relation_section_footer",O,w,I,k,d,u,t,ve)},disabled:T||x,children:[Pe?(0,m.R)({width:16,height:16,marginRight:11,marginTop:1,marginLeft:4,fill:"#868682"}):1===ve.limit?(0,f.h)(Ie.addNewRelationButtonIcon):(0,h.R)(Ie.addNewRelationButtonIcon),(0,oe.jsxs)("div",{style:ne,children:[Pe&&(0,oe.jsx)("span",{style:Ie.replacePageSprint,children:(0,oe.jsx)(C.FormattedMessage,{id:"RelationPropertyPageSection.button.replacePageSprint",defaultMessage:"Move to backlog"})}),!Pe&&(1===ve.limit?(0,oe.jsx)(C.FormattedMessage,{id:"RelationPropertyPageSection.button.replacePage",defaultMessage:"Replace linked page from {propertyName}",values:{propertyName:ve.name}}):(0,oe.jsx)(C.FormattedMessage,{id:"RelationPropertyPageSection.button.addPage",defaultMessage:"New page in {propertyName}",values:{propertyName:ve.name}}))]})]})]})},I)};function se(e){return{display:"flex",alignItems:"center",color:e.lightTextColor,borderRadius:4,paddingLeft:4,paddingRight:6,height:32,width:"100%",fontSize:14}}function de(e){return{width:16,height:16,marginRight:11,marginTop:1,marginLeft:4,fill:e.lightIconColor}}function ce(e,t,o,n,r){if(!(0,H.OY)(o)||!n)return;let a;L.createAndCommit({userAction:"RelationToken.handleRelationPropertyMenuUpdate",environment:r,perform:i=>{const l=t.id;if(e.newPage&&l){const n=S.TPx(e.newPage.name);a=j.j4({environment:r,id:e.newPage.id,type:d.Ti.page,properties:{title:n},spaceId:e.newPage.spaceId,inMemoryRecordCache:t.inMemoryRecordCache,transaction:i,useCrdt:(0,A.S9)("collection_unknown_view")}),T.zw({childStore:a,parentStore:t,transaction:i});const l=q.G.createChildStore(o,a.pointer),s=t.getDefaultTemplatePageStore();s&&w.ob({title:{text:n},environment:r,store:l,templateStore:s,isKeyboard:!1,isCreateIn:!1,transaction:i,from:"relation_property_page_section"})}if(e.newValues){const t=p.ow(e.newValues),a=o.getNormalizedPropertyStore(n);V.sO({environment:r,store:a,value:t,transaction:i})}}}),i.default.afterNextFlush((()=>{if(!a)return;const e=W.Z.findRow(a.id,"section",n);if(!e)return;const t=e.relationTokenBlockStoreRef.current;if(!t)return;const o=t.getBlockTitleStore(),i={start:{index:0,store:o},end:{index:0,store:o}};_.NA({multiSelection:i})}))}function pe(e,t,o,n,i){ce({newValues:[],oldValues:n},e,t,o,i)}function ue(e,t,o,n,i,r,a,l,s,d,c){if(!c||"relation"!==c.type)return;if(!i.canEdit())return;if((0,z.Wt)(i))return;const u=a.pointer.spaceId,g=c.limit,m=(0,O.Ii)({environment:n,table:v.iU,spaceId:u}),h=m.id;if(!(0,H.OY)(i)||!r)return;const f=i.getPropertyValue(r),y=p.j$({relationValue:p.rq(f),propertySchema:c,getRecordModel:i.getRecordModel});e&&e+1>l&&s(e+1);ce({newPage:{id:h,spaceId:u,name:""},newValues:g?[m]:e?[...y.slice(0,e),m,...y.slice(e)]:[m,...y],oldValues:y},t,i,r,n),I.W(n,{...(0,K.Pn)(d),from:o,type:"page",target_collection_id:null==t?void 0:t.id,new_page_id:h,creating_block_id:h})}function ge(e,t,o,n,i,r,a,l,s){const d=s.current;if(!(d&&d instanceof Element))return;if((0,z.Wt)(r))return;const c=o?null==o?void 0:o.getBoundingClientRect():d.getBoundingClientRect(),p=e?c.top+N.Mu:c.top+5,u=new DOMRect(c.left,p,c.width,c.height);k.bA({environment:n,blockPropertyValueOverlayStore:i,store:r,property:a,rect:u,format:$.C.Page,mode:t,collectionContextStore:l}),b.ud(n,{from:"relation_section"})}},244831:(e,t,o)=>{o.d(t,{O:()=>v});o(667294);var n=o(800480),i=o(886628),r=o(724405),a=o(399036),l=o(784242),s=o(137810),d=o(214976),c=o(277181),p=o(825464),u=o(826842),g=o(526388),m=o(785893);const h=200,f=75,y=75;function v(e){let{blockStore:t,collectionContextStore:o,columnWidth:v}=e;const S=(0,i.VK)((()=>o.currentSubitemFormatStoreForCollectionStore.state),[o]),C=(0,i.VK)((()=>t.getAssociatedCollectionStore()),[t]),x=(0,i.VK)((()=>{var e;return null===(e=o.collectionViewStore())||void 0===e?void 0:e.getType()}),[o]),b=(0,i.VK)((()=>{if(!S||!C)return;const e=C.getSchema()[S.property];return void 0!==e&&(0,a.p_)(e)?e:void 0}),[C,S]),I="table"===x||"list"===x||"timeline"===x,k=(0,n.O7)().device.isMobile?f:h,P=(0,r.yK)((e=>({parentItemIcon:{color:e.mediumIconColor,width:14,height:14,marginRight:2},wrapper:{display:"inline-flex",alignItems:"center",...I?{}:{maxWidth:"100%"},paddingRight:8},parentTitle:{...I?{maxWidth:v?Math.min(k,v-y):k}:{},textOverflow:"ellipsis",overflow:"hidden",color:e.lightTextColor,fontWeight:s.Z.fontWeight.medium,fontSize:s.Z.fontSize.UISmall.desktop,whiteSpace:"nowrap"}})),[v,I,k]),w=(0,i.VK)((()=>S&&b?(0,c.xb)({store:t,subitemFormat:S,propertySchema:b}):[]),[t,S,b]),M=(0,i.VK)((()=>{var e;if(0===w.length)return;const o=w[0],n=u.G.createChildStore(t,o),i=null===(e=n.getTitleStore())||void 0===e?void 0:e.getValue();return(0,d.Xh)(i,n)}),[t,w]);return(0,i.VK)((()=>(0,c.Cr)({collectionContextStore:o,blockId:t.id,blockStore:t})),[o,t])&&0!==w.length?(0,m.jsx)(g.Z,{renderTooltip:()=>(0,m.jsx)("div",{children:M}),placement:p.u.Bottom,alignment:p.v.Start,delayThreshold:300,render:e=>(0,m.jsxs)("span",{style:P.wrapper,...e,children:[(0,l.v)(P.parentItemIcon),(0,m.jsx)("span",{style:P.parentTitle,children:M})]})}):null}},241137:(e,t,o)=>{o.d(t,{B:()=>p});o(667294);var n=o(886628),i=o(724405),r=o(399036),a=o(308505),l=o(137810),s=o(110906),d=o(277181),c=o(785893);function p(e){let{blockStore:t,collectionContextStore:o,wrapperStyle:p}=e;const u=(0,n.VK)((()=>o.currentSubitemFormatStoreForCollectionStore.state),[o]),g=(0,n.VK)((()=>(0,s.Bm)({store:t,collectionContextStore:o})),[o,t]),m=(0,n.VK)((()=>{if(!u||!g)return;const e=g.getSchema()[u.property];return void 0!==e&&(0,r.p_)(e)?e:void 0}),[g,u]),h=(0,i.yK)((e=>({subItemIcon:{color:e.mediumIconColor,width:14,height:14,marginRight:2},wrapper:{display:"inline-flex",alignItems:"center",verticalAlign:" text-top",paddingRight:8,...p},numSubitemsSpan:{fontSize:l.Z.fontSize.UISmall.desktop,fontWeight:l.Z.fontWeight.medium,color:e.lightTextColor}})),[p]),f=(0,n.VK)((()=>u&&m?(0,d.CJ)({store:t,subitemFormat:u,propertySchema:m}):[]),[t,u,m]);return(0,n.VK)((()=>(0,d.wI)({collectionContextStore:o,blockStore:t})),[o,t])&&0!==f.length?(0,c.jsxs)("span",{style:h.wrapper,children:[(0,a.S)(h.subItemIcon),(0,c.jsx)("span",{style:h.numSubitemsSpan,children:f.length})]}):null}},791007:(e,t,o)=>{o.d(t,{Z:()=>w});var n=o(667294),i=o(800480),r=o(886628),a=o(724405),l=o(213148),s=o(709291),d=o(531701),c=o(738208),p=o(691851),u=o(940663),g=o(566890),m=o(433929),h=o(785957),f=o(224646),y=o(80444),v=o(803418),S=o(188923),C=o(623063),x=o(573063),b=o(132662),I=o(785893);const k="pm_intro_tooltip",P=(0,s.defineMessages)({dismissTooltip:{defaultMessage:"Dismiss tooltip",id:"components.collections.projManagementIntroTooltip.dismissTooltip"}});function w(e){const t=(0,i.O7)(),o=(0,g.DK)(),w=(0,i.Fy)(),{store:M,origin:T,isFirstTooltip:j,phase:R,additionalPhaseToShowOn:V}=e,_=(0,r.VK)((()=>y.default.state.currentUserSettingsStore),[]),L=(0,r.VK)((()=>y.default.state.currentSpaceStore),[]),B=(0,r.VK)((()=>(0,u.jH)(_,L)),[_,L]),F=(0,r.VK)((()=>{var e;return null==o||null===(e=o.settingsStore.state)||void 0===e?void 0:e.open}),[o]),A=(0,r.VK)((()=>{if("assign_to_someone"===B||"change_task_status"===B||"select_a_project"===B){const e=S.default.isSidePeekOpen()?590:650;return(0,h.wq)(M)&&(0,h.PQ)(t)>=e||!(0,h.wq)(M)&&(0,f.$3)(t)>=e?"right":"bottom"}return"bottom"}),[B,M,t]),Z=(0,r.VK)((()=>{const e=y.default.state.inAppCalloutStore;return!(v.Z.state.openPopups.size>0||F||!e.getCalloutVisibility("pm_intro_tooltip").canShow)&&(B===R||(!(B||!j)||!(!V||B!==V)))}),[F,B,R,j,V]),D=(0,n.useCallback)((()=>{j&&_&&L&&!B&&p.uR({environment:t,requiredCurrPhase:void 0,nextPhase:"create_a_task",currentUserSettingsStore:_,currentSpaceStore:L})}),[B,_,L,t,j]);(0,n.useEffect)((()=>{if(Z){var e;y.default.state.inAppCalloutStore.updateCalloutStatus({calloutId:k,visible:!0}),c.AD(t,{phase:R,collection_id:null==o||null===(e=o.collectionStore())||void 0===e?void 0:e.id,space_id:null==L?void 0:L.id}),D()}}),[o,null==L?void 0:L.id,t,R,Z,D]);const K=(0,n.useCallback)((()=>{var e;if(_&&L){if("create_a_task"===R)p.uR({environment:t,requiredCurrPhase:"create_a_task",nextPhase:"assign_to_someone",currentUserSettingsStore:_,currentSpaceStore:L});else{y.default.state.inAppCalloutStore.updateCalloutStatus({calloutId:k,visible:!1}),p.uR({environment:t,requiredCurrPhase:void 0,nextPhase:"complete",currentUserSettingsStore:_,currentSpaceStore:L})}c.rx(t,{phase:R,collection_id:null==o||null===(e=o.collectionStore())||void 0===e?void 0:e.id,space_id:null==L?void 0:L.id})}}),[o,L,_,t,R]),O=(0,a.yK)((e=>({popupContainer:{fontSize:12,color:d.ZP.white,position:"absolute",..."bottom"===A?{top:"calc(100% + 12px)",left:"calc(50% - 110px)"}:{},..."right"===A?{top:"select_a_project"===R?"calc(2px - 50%)":"calc(-5px - 50%)",left:"calc(100% + 12px)"}:{},background:"dark"===e.mode?e.accentColors.gray[400]:e.accentColors.gray[700],borderRadius:6,padding:"8px 12px 12px 12px",width:220,boxShadow:e.largeLightBoxShadow,zIndex:99},circle:{position:"absolute",..."bottom"===A?{top:-12,left:"calc(50% - 3px)"}:{},..."right"===A?{top:"calc(50% - 3px)",left:-12}:{},background:d.ZP.UIDocNotificationsDarkGrayColor,width:6,height:6,borderRadius:6,boxShadow:`0 0 0 1.5px ${e.contentBackground}`},verticalLine:{position:"absolute",..."bottom"===A?{top:-11,left:"calc(50% - 1px)",width:2,height:11}:{},..."right"===A?{top:"calc(50% - 1px)",left:-11,width:11,height:2}:{},background:d.ZP.UIDocNotificationsDarkGrayColor},popupTitle:{width:"90%",fontWeight:500,marginBottom:2},popupDescription:{opacity:.8,lineHeight:1.35},iconButtonStyle:{position:"absolute",top:4,right:4,opacity:.8},iconStyle:{width:12,fill:d.ZP.white},dotStyle:{width:5,height:5,borderRadius:"50%",background:d.FN.dark.gray[600]},activeDotStyle:{width:5,height:5,borderRadius:"50%",background:d.FN.dark.gray[800]}})),[A,R]),z=(0,n.useCallback)((()=>(0,I.jsxs)("div",{style:O.popupContainer,children:[(0,I.jsx)("div",{style:O.circle}),(0,I.jsx)("div",{style:O.verticalLine}),(0,I.jsxs)("div",{style:O.popupTitle,children:["create_a_task"===R&&(0,I.jsx)(s.FormattedMessage,{defaultMessage:"Create a new task",id:"pmIntroTooltip.title.createATask"}),"assign_to_someone"===R&&(0,I.jsx)(s.FormattedMessage,{defaultMessage:"Assign it to someone",id:"pmIntroTooltip.title.assignToSomeone"}),"change_task_status"===R&&(0,I.jsx)(s.FormattedMessage,{defaultMessage:"Update status",id:"pmIntroTooltip.title.changeTaskStatus"}),"click_view_settings"===R&&(0,I.jsx)(s.FormattedMessage,{defaultMessage:"Configure your tasks",id:"pmIntroTooltip.title.clickViewSettings"}),"select_a_project"===R&&(0,I.jsx)(s.FormattedMessage,{defaultMessage:"Select a project",id:"pmIntroTooltip.title.selectAProject"})]}),(0,I.jsxs)("div",{style:O.popupDescription,children:["create_a_task"===R&&(0,I.jsx)(s.FormattedMessage,{defaultMessage:"Start from scratch or use the dropdown to select or create a template",id:"pmIntroTooltip.subtitle.createATask"}),"assign_to_someone"===R&&(0,I.jsx)(s.FormattedMessage,{defaultMessage:"Click to select one or multiple people",id:"pmIntroTooltip.subtitle.assignToSomeone"}),"change_task_status"===R&&(0,I.jsx)(s.FormattedMessage,{defaultMessage:"Click to change the status to ‘In progress’ or something else",id:"pmIntroTooltip.subtitle.changeTaskStatus"}),"click_view_settings"===R&&(0,I.jsx)(s.FormattedMessage,{defaultMessage:"Further configure your tasks layout, grouping, properties and more",id:"pmIntroTooltip.subtitle.clickViewSettings"}),"select_a_project"===R&&(0,I.jsx)(s.FormattedMessage,{defaultMessage:"Click to add this task to a project",id:"pmIntroTooltip.subtitle.selectAProject"})]}),(0,I.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginTop:8},children:[(0,I.jsx)("div",{style:"create_a_task"===R?O.activeDotStyle:O.dotStyle}),(0,I.jsx)(b.Z,{size:6}),(0,I.jsx)("div",{style:"assign_to_someone"===R?O.activeDotStyle:O.dotStyle}),(0,I.jsx)(b.Z,{size:6}),(0,I.jsx)("div",{style:"change_task_status"===R?O.activeDotStyle:O.dotStyle}),(0,I.jsx)(b.Z,{size:6}),(0,I.jsx)("div",{style:"select_a_project"===R||"click_view_settings"===R?O.activeDotStyle:O.dotStyle})]}),(0,I.jsx)(x.Z,{icon:l.U,style:O.iconButtonStyle,iconStyle:O.iconStyle,onClick:K,ariaLabel:m.default.formatMessage(P.dismissTooltip)})]})),[K,R,O.activeDotStyle,O.circle,O.dotStyle,O.iconButtonStyle,O.iconStyle,O.popupContainer,O.popupDescription,O.popupTitle,O.verticalLine]);return w.isMobile?(0,I.jsx)(I.Fragment,{children:T}):(0,I.jsxs)("div",{style:{position:"relative"},children:[T,(0,I.jsx)(C.Z,{isVisible:Z,animationStyle:{opacity:1},enterAnimationStyle:{opacity:-10},exitAnimationStyle:{opacity:0},render:z})]})}},111028:(e,t,o)=>{o.d(t,{z:()=>m});var n=o(667294),i=o(724405),r=o(394308),a=o(750063),l=o(970693),s=o(604308),d=o(709291),c=o(401898),p=o(137810),u=o(753876),g=o(785893);function m(e){const{verificationValue:t,fontSize:o=u.z6}=e,m=(0,d.useIntl)(),h=(0,n.useMemo)((()=>s.WN(t)),[t]),f=h.type,y=(0,i.yK)((e=>({icon:{width:"expired"===f?8:14,height:"expired"===f?9:14,fill:"verified"===f?e.blueColor:e.mediumIconColor},caption:{fontVariantNumeric:"normal",fontWeight:p.Z.fontWeight.regular,color:e.regularTextColor,textTransform:"none",letterSpacing:0,marginLeft:6,marginRight:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:o,lineHeight:u.Ac},expiredIconContainer:{width:14,height:14,borderRadius:6,border:"1px dashed",borderColor:e.mediumIconColor,display:"flex",justifyContent:"center",alignItems:"center",flexShrink:0}})),[f,o]);if("none"===f)return null;let v=null,S=null;const C=y.caption;switch(f){case"verified":v=(0,r.f)({...y.icon}),S=h.isIndefinite?(0,g.jsx)(d.FormattedMessage,{defaultMessage:"Verified",id:"VerificationPropertyButton.verifiedIndefinitely"}):(0,g.jsx)(d.FormattedMessage,{defaultMessage:"Until {date}",id:"VerificationPropertyButton.verifiedUntil",values:{date:l.mb({dateTime:h.dateTimeRange.end,intl:m})}});break;case"expired":v=(0,g.jsx)("div",{style:y.expiredIconContainer,children:(0,a.X)({...y.icon})}),S=(0,g.jsx)(d.FormattedMessage,{defaultMessage:"Expired {timeFromMoment}",id:"VerificationPropertyButton.expired",values:{timeFromMoment:s.kY(h.dateTimeRange.end)}});break;default:(0,c.t1)(f)}return(0,g.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[v,(0,g.jsx)("div",{style:C,children:S})]})}},958230:(e,t,o)=>{o.d(t,{Z:()=>h});o(667294);var n=o(800480),i=o(886628),r=o(554368),a=o(177420),l=o(519889),s=o(970693),d=o(709291),c=o(401898),p=o(206258),u=o(439111),g=o(729302),m=o(785893);function h(e){const{isMobile:t}=(0,n.Fy)();return(0,m.jsx)("div",{style:t?{padding:"12px 20px",fontSize:14}:{fontSize:12,display:"flex",alignItems:"center"},children:(0,m.jsx)(f,{...e})})}function f(e){const{verificationState:t,blockStore:o}=e,n=(0,d.useIntl)();switch(t.type){case"none":return null;case"verified":return t.isIndefinite?(0,m.jsx)(d.FormattedMessage,{defaultMessage:"Verified by {user} on {date}",id:"VerificationSummary.verifiedIndefinitely",values:{user:(0,m.jsx)(y,{actorPointer:t.actorPointer,blockStore:o}),date:(0,s.mb)({dateTime:t.startDateTime,intl:n})}}):(0,m.jsx)(d.FormattedMessage,{defaultMessage:"Verified by {user} from {dateTimeRange}",id:"VerificationSummary.verified",values:{user:(0,m.jsx)(y,{actorPointer:t.actorPointer,blockStore:o}),dateTimeRange:(0,s.pe)({luxonRange:t.dateTimeRange,intl:n})}});case"expired":return(0,m.jsx)(d.FormattedMessage,{defaultMessage:"Last verified by {user} from {dateTimeRange}",id:"VerificationSummary.verificationExpired",values:{user:(0,m.jsx)(y,{actorPointer:t.actorPointer,blockStore:o}),dateTimeRange:(0,s.pe)({luxonRange:t.dateTimeRange,intl:n})}});default:(0,c.t1)(t)}}function y(e){const{actorPointer:t,blockStore:o}=e,n=(0,i.VK)((()=>p.t1.createChildStore(o,t)),[o,t]),s={display:"flex",marginLeft:4,marginRight:4};return n.table===l.KJ?(0,m.jsx)(g.Z,{userStore:n,inline:!0,style:s,avatarSize:16,avatarMarginRight:4}):n.table===a.cZ?(0,m.jsx)(u.Z,{botStore:n,style:s,avatarSize:16}):n.table===r.y0?(0,m.jsx)(g.Z,{userStore:void 0,inline:!0,style:s,avatarSize:16,avatarMarginRight:4}):void(0,c.t1)(n)}},849616:(e,t,o)=>{o.d(t,{AF:()=>I,Hw:()=>b,Sy:()=>C,TP:()=>T,VM:()=>S,X7:()=>k,X9:()=>w,aJ:()=>j,g0:()=>P,z0:()=>x});var n=o(815145),i=o(598953),r=o(180951),a=o(949019),l=o(917683),s=o(332240),d=o(423512),c=o(76233),p=o(709291),u=o(653965),g=o(401898),m=o(218265),h=o(619584),f=o(278030),y=o(484210),v=o(433929);function S(e){return Boolean(e.state.isOpen&&e.state.collectionsBulkActionsToolbarStore)}function C(e){switch(e){case f.C.Table:return"table";case f.C.Board:return"board";case f.C.ListView:return"list";case f.C.GalleryView:return"gallery";case f.C.Relation:case f.C.RelationSection:return"relation_section";case f.C.Timeline:return"timeline";case f.C.Calendar:return"calendar";case f.C.Page:return"page_properties";case f.C.CompactPage:return"compact_page";case f.C.Mini:return"mini_peek";case f.C.Form:case f.C.PropertyModule:return"property_module";default:(0,g.t1)(e)}}function x(e){return{backgroundImage:`linear-gradient(\n\t\tto right,\n\t\t${e.darkDividerColor} 0%,\n\t\t${e.darkDividerColor} 100%\n\t)`,backgroundRepeat:"repeat-x",backgroundPosition:"0 100%",backgroundSize:"100% 1px"}}function b(e){const{store:t,property:o,propertySchema:i}=e,a=null==i?void 0:i.type;if("title"===a)return(0,y.ZP)({store:t,fullyQualified:!1,pageVisitSource:n.tY.LinkInPage});{const e=t.getPropertyValue(o);return r.Hw(a,e)}}function I(e){let t=(0,c.Jcv)(e);if(!t||""===t.trim()||t.trim().includes(" "))return{domain:void 0,restOfUrl:void 0};t=t.trim();let o=m.Qc(t),n=o.host;if(o.protocol&&n||(o=m.Qc(`http://${t}`),n=o.host),!n)return{domain:void 0,restOfUrl:void 0};n&&(n=n.replace(/^www./i,""));const i=t.toLowerCase().indexOf(n.toLowerCase());if(-1===i)return{domain:void 0,restOfUrl:void 0};n=t.slice(i,i+n.length);return{domain:n,restOfUrl:t.slice(i+n.length)}}function k(e){const{numberValue:t,numberFormat:o,numberShowAs:n}=e;if(!(u.i2(t)||h.z4(t)||"bar"!==(null==n?void 0:n.type)&&"ring"!==(null==n?void 0:n.type))){const e=v.default.getIntl();return"percent"===o?d.uf(t,"percent",e):`${t} / ${n.maxValue}`}}function P(e){const{property:t,collectionStore:o}=e,n=o.isSyncedCollection();return Boolean(n)&&(0,i.w)(t)}function w(e,t){switch(e){case"side_peek":return{icon:s.y,tooltip:v.default.formatMessage(M.openInSidePeekTooltip),caption:t?"":v.default.formatMessage(M.openAsPageTitle)};case"center_peek":return{icon:l.Q,tooltip:v.default.formatMessage(M.openInCenterPeekTooltip),caption:t?"":v.default.formatMessage(M.openAsPageTitle)};case"full_page":return{icon:a.Z,tooltip:v.default.formatMessage(M.openAsPageTooltip),caption:t?"":v.default.formatMessage(M.openAsPageTitle)};default:(0,g.t1)(e)}}const M=(0,p.defineMessages)({openAsPageTitle:{defaultMessage:"Open",id:"database.actionButton.openAsPageTitle"},openAsPageTooltip:{defaultMessage:"Open as page",id:"database.actionButton.openAsPageTooltip"},openInCenterPeekTooltip:{defaultMessage:"Open in center peek",id:"database.actionButton.openInCenterPeekTooltip"},openInSidePeekTooltip:{defaultMessage:"Open in side peek",id:"database.actionButton.openInSidePeekTooltip"}});function T(e){const t=e.getSchema();if(t)for(const[n,i]of Object.entries(t)){var o;if(i&&"text"===i.type&&"summarize"===(null===(o=i.ai_inference)||void 0===o?void 0:o.type)){const t=e.getPropertyValue(n);if(t)return t}}}function j(e){const{store:t,additionalStores:o,collectionContextStore:n}=e,i=t.getAssociatedCollectionStore();return!("collectionTypedView"!==(null==n?void 0:n.contextType)||!i)&&o.some((e=>{var t;return(null===(t=e.getAssociatedCollectionStore())||void 0===t?void 0:t.id)!==i.id}))}},573807:(e,t,o)=>{o.d(t,{_:()=>r});var n=o(886628),i=o(319385);function r(){return(0,n.VK)((()=>i.default.getConfigKey("collection_request_settings","clientFormulaTimeoutMs")),[])}},735948:(e,t,o)=>{o.d(t,{C:()=>i});var n=o(667294);function i(){const e=(0,n.useRef)(null),[t,o]=(0,n.useState)(!1),i=(0,n.useCallback)((()=>{const t=e.current;t&&o(t.matches(":hover"))}),[]),r=(0,n.useCallback)((t=>{e.current=t,i()}),[i]);return(0,n.useEffect)((()=>{const t=e.current;if(t)return t.addEventListener("mouseenter",i),t.addEventListener("mouseleave",i),()=>{t.removeEventListener("mouseenter",i),t.removeEventListener("mouseleave",i)}}),[i]),[r,t]}},486098:(e,t,o)=>{o.d(t,{Z:()=>r});var n=o(535431);class i extends n.Z{findRow(e,t,o){return this.find((n=>n.relatedPageStoreId===e&&n.rowType===t&&n.property===o))}}const r=new i},679576:(e,t,o)=>{o.d(t,{W:()=>a});var n=o(749085),i=o(471924);class r extends n.default{getInitialState(){return{type:"uninitialized"}}isWriting(){return"filling"===this.state.type&&!this.state.haveAllBlocksCompletedAutofill&&!this.state.didInterruptStreaming}setIsWriting(e){var t;const{propertySchema:o,stores:n,sessionIdForAnalytics:r}=e,a=n[0].getAssociatedCollectionId()??(null===(t=n[0].getCollectionViewCollectionStore())||void 0===t?void 0:t.id),l=r||i.Il();return this.setState({type:"filling",propertySchema:o,collectionId:a,numBlocksToAutofill:n.length,numBlocksAutofilled:0,sessionId:l,didInterruptStreaming:!1,haveAllBlocksCompletedAutofill:!1}),l}}const a=new r},985526:(e,t,o)=>{o.d(t,{m:()=>a,p:()=>i});var n=o(749085);class i extends n.default{getInitialState(){return{forceShowProperties:!1,searchOpen:!1,searchQuery:""}}}class r extends n.default{getInitialState(){return{}}getNewMainEditorPagePropertiesStore(){const e=new i;return this.setState({pagePropertiesStore:e}),e}}const a=new r},213148:(e,t,o)=>{o.d(t,{U:()=>r});o(667294);var n=o(745238),i=o(785893);const r=(0,n.IU)("close",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M2.89795 13.3428C3.18799 13.6262 3.6626 13.6262 3.93945 13.3494L7.99341 9.29541L12.0474 13.3494C12.3308 13.6262 12.8054 13.6328 13.0889 13.3428C13.3723 13.0593 13.3723 12.5847 13.0955 12.3079L9.0415 8.24731L13.0955 4.19336C13.3723 3.9165 13.3789 3.4353 13.0889 3.15845C12.7988 2.875 12.3308 2.875 12.0474 3.15186L7.99341 7.20581L3.93945 3.15186C3.6626 2.875 3.1814 2.86841 2.89795 3.15186C2.6145 3.44189 2.62109 3.9231 2.89795 4.19336L6.9519 8.24731L2.89795 12.3079C2.62109 12.5781 2.6145 13.0659 2.89795 13.3428Z"})})},949019:(e,t,o)=>{o.d(t,{Z:()=>r});o(667294);var n=o(745238),i=o(785893);const r=(0,n.IU)("openAsPageThick",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M2.16895 7.19629C2.59277 7.19629 2.90723 6.88867 2.90723 6.45801V5.96582L2.75684 3.81934L4.35645 5.50098L6.3252 7.4834C6.46875 7.63379 6.65332 7.70215 6.85156 7.70215C7.30957 7.70215 7.6377 7.39453 7.6377 6.93652C7.6377 6.72461 7.55566 6.54004 7.41211 6.39648L5.43652 4.4209L3.74805 2.82129L5.91504 2.96484H6.44141C6.86523 2.96484 7.18652 2.65723 7.18652 2.22656C7.18652 1.7959 6.87207 1.48145 6.44141 1.48145L2.64746 1.48145C1.86816 1.48145 1.41699 1.93262 1.41699 2.71875L1.41699 6.45801C1.41699 6.88184 1.73828 7.19629 2.16895 7.19629ZM9.55176 14.6543H13.3389C14.125 14.6543 14.5762 14.2031 14.5762 13.417V9.67773C14.5762 9.25391 14.2549 8.93945 13.8242 8.93945C13.4004 8.93945 13.0859 9.24707 13.0859 9.67773V10.1699L13.2295 12.3164L11.6299 10.6348L9.66113 8.65234C9.52441 8.50195 9.33984 8.43359 9.1416 8.43359C8.68359 8.43359 8.35547 8.74121 8.35547 9.19922C8.35547 9.41113 8.43066 9.5957 8.57422 9.73926L10.5566 11.7148L12.2383 13.3145L10.0781 13.1709H9.55176C9.12793 13.1709 8.80664 13.4785 8.80664 13.9092C8.80664 14.3398 9.12109 14.6543 9.55176 14.6543Z"})})},784242:(e,t,o)=>{o.d(t,{v:()=>r});o(667294);var n=o(745238),i=o(785893);const r=(0,n.IU)("parentItem",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.29662 5.47368L7.33167 4.11653L6.30839 5.24265L4.22625 7.32458C4.16064 7.39019 4.0821 7.43856 3.99288 7.47024C3.90958 7.5013 3.82192 7.51646 3.73089 7.51646C3.54036 7.51646 3.37427 7.45062 3.24187 7.31823L3.23992 7.31628C3.11249 7.18353 3.04999 7.01804 3.04999 6.82921C3.04999 6.63758 3.12598 6.46746 3.2656 6.32285L3.26711 6.32129L7.4749 2.10083C7.62016 1.9509 7.79567 1.87 7.99651 1.87C8.19734 1.87 8.37284 1.95089 8.51809 2.10079L12.7355 6.32457C12.8705 6.46954 12.943 6.63917 12.943 6.82921C12.943 7.01927 12.8775 7.18502 12.7458 7.31725C12.617 7.45083 12.4522 7.51646 12.2621 7.51646C12.1706 7.51646 12.0814 7.50115 11.995 7.47068L11.9926 7.4698C11.9069 7.43769 11.8313 7.38908 11.7668 7.32458L9.6802 5.238L8.65635 4.11153L8.69652 5.47736L8.69011 9.81896C8.69011 10.5736 8.80303 11.157 9.01808 11.5793C9.2312 11.9935 9.55909 12.2887 10.0079 12.4675L10.0088 12.4678C10.4652 12.6536 11.062 12.7499 11.8051 12.7499C11.952 12.7499 12.0793 12.7478 12.1871 12.7436C12.303 12.7393 12.417 12.7372 12.5287 12.7372C12.7186 12.7372 12.8855 12.7955 13.0191 12.9179C13.1612 13.0441 13.2287 13.2138 13.2287 13.4117C13.2287 13.5394 13.2018 13.6569 13.1388 13.7556C13.0846 13.8467 13.0093 13.919 12.9157 13.9718C12.8317 14.0256 12.7415 14.0631 12.6459 14.0833C12.5373 14.1068 12.4035 14.12 12.2469 14.1243C12.0973 14.1286 11.931 14.1307 11.748 14.1307C10.2678 14.1307 9.14333 13.8104 8.40142 13.144C7.6536 12.4723 7.29657 11.3702 7.29657 9.87609L7.29662 5.47368Z"})})},870663:(e,t,o)=>{o.d(t,{h:()=>r});o(667294);var n=o(745238),i=o(785893);const r=(0,n.IU)("replace",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M3.26465 3.96094C2.95996 4.26562 2.979 4.66553 3.23291 4.8877C3.49316 5.12256 3.86133 5.12256 4.16602 4.83057C5.11182 3.80225 6.48291 3.15479 8 3.15479C10.6851 3.15479 12.856 5.12891 13.2051 7.66162H12.2466C11.7642 7.66162 11.6309 8.01709 11.9102 8.41064L13.4209 10.5435C13.6494 10.8608 13.9985 10.8608 14.2334 10.5435L15.7441 8.41699C16.0298 8.02344 15.8965 7.66162 15.4077 7.66162H14.519C14.1445 4.44336 11.3516 1.85986 8 1.85986C6.13379 1.85986 4.43262 2.68506 3.26465 3.96094ZM0.249512 8.42334C-0.0297852 8.81689 0.097168 9.17871 0.585938 9.17871H1.4873C1.85547 12.397 4.64844 14.9805 8 14.9805C9.87256 14.9805 11.5737 14.1553 12.748 12.873C13.0464 12.5684 13.0273 12.1685 12.7734 11.9399C12.5132 11.7051 12.1514 11.7114 11.8403 12.0034C10.9009 13.0381 9.52979 13.6855 8 13.6855C5.32129 13.6855 3.14404 11.7178 2.79492 9.17871H3.74707C4.22949 9.17871 4.36279 8.82324 4.0835 8.42969L2.57275 6.29688C2.34424 5.97949 1.99512 5.97949 1.7666 6.29688L0.249512 8.42334Z"})})},435840:(e,t,o)=>{o.d(t,{R:()=>r,T:()=>i});o(667294);var n=o(745238);const i=(0,o(785893).jsx)("path",{d:"M.281 6.438c0-.875.164-1.696.492-2.461a6.484 6.484 0 011.375-2.032A6.237 6.237 0 016.64.078 6.2 6.2 0 019.11.57c.77.328 1.447.787 2.03 1.375a6.374 6.374 0 011.368 2.032c.333.765.5 1.586.5 2.46 0 .688-.107 1.342-.32 1.961a6.28 6.28 0 01-.868 1.696l3.563 3.578c.11.104.19.226.242.367.057.14.086.29.086.445 0 .22-.05.417-.149.594a1.122 1.122 0 01-1 .57c-.156 0-.307-.028-.453-.086a1.058 1.058 0 01-.382-.25l-3.586-3.585c-.5.333-1.047.596-1.641.789a6.089 6.089 0 01-1.86.28 6.237 6.237 0 01-2.468-.491 6.4 6.4 0 01-2.024-1.367A6.509 6.509 0 01.773 8.913a6.256 6.256 0 01-.492-2.476zm1.664 0c0 .65.12 1.26.36 1.828a4.775 4.775 0 001.015 1.5c.433.427.933.763 1.5 1.007a4.548 4.548 0 001.82.368c.652 0 1.261-.123 1.829-.368a4.747 4.747 0 002.508-2.507 4.567 4.567 0 00.367-1.829c0-.645-.123-1.252-.367-1.82a4.776 4.776 0 00-1.016-1.5A4.578 4.578 0 008.469 2.11a4.567 4.567 0 00-1.828-.367c-.646 0-1.253.123-1.82.367a4.667 4.667 0 00-1.5 1.008c-.433.432-.772.932-1.016 1.5a4.633 4.633 0 00-.36 1.82z"}),r=(0,n.IU)("search",{viewBox:"0 0 16 16",svg:i})},308505:(e,t,o)=>{o.d(t,{S:()=>r});o(667294);var n=o(745238),i=o(785893);const r=(0,n.IU)("subItem",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.88642 2.43778C1.98215 2.3846 2.09567 2.35999 2.22362 2.35999C2.41846 2.35999 2.58374 2.42299 2.71309 2.55179C2.84789 2.67678 2.91386 2.84079 2.91386 3.03655C2.91386 3.161 2.90926 3.28545 2.90008 3.40989C2.8956 3.52687 2.89335 3.66669 2.89335 3.82952C2.89335 4.6672 2.99989 5.34012 3.20906 5.85192C3.42107 6.35987 3.76386 6.73052 4.23921 6.9683C4.72178 7.20285 5.37665 7.32288 6.20897 7.32288H10.9303L12.4002 7.41264L10.2433 5.44074L8.72396 3.8939C8.66786 3.83269 8.6225 3.76177 8.58753 3.68184L8.58532 3.67681C8.55515 3.59133 8.54022 3.50307 8.54022 3.41252C8.54022 3.22504 8.60443 3.06601 8.73414 2.94147C8.86699 2.81372 9.02934 2.74963 9.21678 2.74963C9.40179 2.74963 9.5677 2.81976 9.71223 2.95431L9.71419 2.95614L14.2523 7.49436C14.4062 7.63869 14.4871 7.81019 14.4871 8.00627C14.4871 8.20241 14.4062 8.37593 14.2528 8.52459L9.72696 13.0436C9.57465 13.191 9.40407 13.2698 9.21678 13.2698C9.03026 13.2698 8.86827 13.2086 8.73525 13.0858L8.73305 13.0838C8.60434 12.9551 8.54022 12.7943 8.54022 12.6069C8.54022 12.5163 8.55535 12.4281 8.58551 12.3426C8.61631 12.2554 8.66304 12.1796 8.72601 12.1166L10.2463 10.5689L12.3938 8.61275L10.9258 8.69663L6.14745 8.69651C4.516 8.69651 3.32454 8.32105 2.59311 7.55211C1.86303 6.77991 1.50604 5.55355 1.50604 3.89104C1.50604 3.68942 1.51062 3.50571 1.51983 3.34C1.52904 3.17413 1.54527 3.03558 1.56915 2.92552C1.58898 2.82668 1.62376 2.73465 1.67362 2.64989C1.72566 2.56142 1.79795 2.48982 1.88642 2.43778Z"})})},750063:(e,t,o)=>{o.d(t,{X:()=>r});o(667294);var n=o(745238),i=o(785893);const r=(0,n.IU)("verificationCheck",{viewBox:"0 0 6 7",svg:(0,i.jsx)("path",{d:"M2.84245 6.11619C2.71116 6.30644 2.53392 6.40156 2.31072 6.40156C2.20131 6.40156 2.10066 6.37881 2.00875 6.33332C1.92123 6.28782 1.83589 6.21545 1.75274 6.11619L0.150985 4.25515C0.0503282 4.12694 0 3.99874 0 3.87053C0 3.73406 0.04814 3.61826 0.14442 3.52314C0.245077 3.42388 0.365427 3.37425 0.50547 3.37425C0.597374 3.37425 0.680525 3.39286 0.754923 3.43008C0.833698 3.46317 0.912473 3.52934 0.991247 3.6286L2.28446 5.21049L5.00875 1.07896C5.13129 0.892857 5.28446 0.799805 5.46827 0.799805C5.60394 0.799805 5.72648 0.841161 5.83589 0.923874C5.9453 1.00659 6 1.11618 6 1.25266C6 1.32297 5.98249 1.39327 5.94748 1.46358C5.91685 1.52975 5.88184 1.59178 5.84245 1.64968L2.84245 6.11619Z"})})},970693:(e,t,o)=>{o.d(t,{mb:()=>l,nK:()=>s,pe:()=>d});var n=o(640506),i=o(407057),r=o(253877),a=o(842875);function l(e){const{dateTime:t,intl:o,shortenDateAndRange:n}=e,a=r.OQ.toPersistedDate(t.valueOf());return i.ZV({value:a,allowRelativeDates:!0,intl:o,shortenDateAndRange:n,displayInUserTimezone:!0})}function s(e){const{dateTime:t,intl:o,userTimeZone:n,displayInUserTimezone:a,alwaysIncludeTimezone:l}=e,s=r.OQ.toPersistedDateTime(t.valueOf(),t.zoneName);return i.ZV({value:s,allowRelativeDates:!0,intl:o,userTimeZone:n,displayInUserTimezone:a,alwaysIncludeTimezone:l})}function d(e){const{luxonRange:t,intl:o}=e,l=r.OQ.toPersistedDateRange(t),s=i.ZV({value:l,allowRelativeDates:!1,shortenDateAndRange:!0,intl:o,displayInUserTimezone:!0}),d=t.end.setZone((0,a.r)()),c=i.mr({start_time:d.toFormat(n.jK),humanReadable:!1,intl:o});return o.formatMessage({id:"verification.timeRange",defaultMessage:"{formattedDateRange} at {formattedEndTime}"},{formattedDateRange:s,formattedEndTime:c})}}}]);