"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[51253],{51253:(e,t,o)=>{o.d(t,{ZP:()=>mt,Qm:()=>jt,sY:()=>gt});o(757658),o(21703);var s=o(667294),a=o(800480),i=o(886628),n=o(724405),r=o(371663),l=o(841892),c=o(606906),d=o(158573),u=o(542853),p=o(890199),g=o(747453),m=o(435840),h=o(654497),f=o(421202),v=o(709291),S=o(653965),y=o(401898),x=o(137810),M=o(388295),T=o(760870),b=o(210228),j=o(237181),P=o(51592),I=o(552275),w=o(661519),k=o(301743),Z=o(256940),A=o(268894),C=o(203386),V=o(316354),L=o(568785),O=o(478140),B=o(489728),F=o(731278),K=o(672495),R=o(814871),N=o(526388),q=o(164369),z=o(45653),W=o(760442),E=o(296994),U=o(612457),H=o(628020),D=o(460709),Q=o(98742),G=o(175770),X=o(344499),_=o(798165),Y=o(658239),$=o(918514),J=o(548779),ee=o(195697),te=o(825464),oe=o(80444),se=o(862395),ae=o(788632),ie=o(319385),ne=o(863334),re=o(229798),le=o(749085);class ce extends le.default{getInitialState(){return{chosenSpaceId:void 0}}getChosenSpaceId(){const{chosenSpaceId:e}=this.state,{currentSpaceStore:t}=oe.default.state;return e||(null==t?void 0:t.id)}getChosenSpaceStore(){var e;return null===(e=this.getChosenSpaceViewStore())||void 0===e?void 0:e.getSpaceStore()}getChosenSpaceViewStore(){const{chosenSpaceId:e}=this.state,{currentSpaceViewStore:t,currentUserRootStore:o}=oe.default.state;if(!e&&t)return t;if(e&&o){return o.getSpaceViewStores().find((t=>t.getSpaceId()===e))}}}const de=ce;var ue=o(242330),pe=o(206258),ge=o(672087),me=o(30765),he=o(632163),fe=o(743765),ve=o(823586),Se=o(675822),ye=o(240745),xe=o(164921),Me=o(785893);function Te(e){let{loading:t,menuListItemProps:o}=e;const s=(0,a.O7)(),{isMobile:i}=s.device,r=(0,n.yK)((e=>({button:{display:"flex",flexDirection:"row",alignItems:"center",color:e.lightTextColor,...i?{fontSize:x.Z.fontSize.UIRegular.mobile,lineHeight:x.Z.lineHeight.UIRegular.mobile,padding:4}:{fontSize:x.Z.fontSize.UIRegular.desktop,lineHeight:x.Z.lineHeight.UIRegular.desktop,margin:"0px 4px 4px",padding:4,borderRadius:4}},icon:{width:14,height:14,marginRight:8,marginLeft:8,fill:e.lightIconColor},loadingSpinner:{width:12,height:12,marginLeft:8}})),[i]);return(0,Me.jsxs)(xe.Z,{style:r.button,...o,children:[(0,ye.M)(r.icon),(0,Me.jsx)(v.FormattedMessage,{defaultMessage:"Load more",id:"moveToMenu.loadMoreButtonTitle"}),t&&(0,Me.jsx)(L.Z,{style:r.loadingSpinner})]})}const be=s.memo(Te),je=1e3;function Pe(e){let{query:t,spaceId:o,menuListStore:a,requestStore:n,getAutocompleteItems:r}=e;const l=(0,i.VK)((()=>n.state.loading),[n]),c=(0,s.useCallback)((async()=>{!ue.ZP.state.isOpen||ue.ZP.state.queryLimit>=je||(ue.ZP.setState({...ue.ZP.state,queryLimit:ue.ZP.state.queryLimit+20}),await n.refresh())}),[n]);return(0,Me.jsx)(ve.Z,{request:{query:t,spaceId:o},render:(e,o)=>(0,Me.jsx)(Ie,{sections:o,error:e,menuListStore:a,initialFocus:Boolean(t)?0:void 0,loading:l,onLoadMore:c}),requestStore:n,debounce:Se.vp,performRequest:r})}function Ie(e){let{sections:t,error:o,menuListStore:s,initialFocus:a,onLoadMore:n,loading:r}=e;const l=(0,i.VK)((()=>{const e=ue.ZP.state,o=e.isOpen&&e.canLoadMore;return(null==t?void 0:t.find((e=>"pages"===e.key)))&&o}),[t]);if(o)return(0,Me.jsx)(K.Z,{children:(0,Me.jsx)(fe.Z,{title:(0,Me.jsx)(v.FormattedMessage,{defaultMessage:"Something went wrong.",id:"moveBlockMenu.errorOnMove.label"})})});if(t&&0===t.length)return(0,Me.jsx)(K.Z,{children:(0,Me.jsx)(fe.Z,{title:(0,Me.jsx)(v.FormattedMessage,{defaultMessage:"No results",id:"moveBlockMenu.noResults.label"})})});const c=[...t||[],...l?[{key:"moveTo load more section",render:e=>(0,Me.jsx)(K.Z,{disableDesktopPadding:!0,...e}),items:[{key:"moveTo load more button",render:e=>(0,Me.jsx)(be,{menuListItemProps:e,loading:r}),action:n}]}]:[]];return(0,Me.jsx)("div",{children:(0,Me.jsx)(he.Z,{type:he.i.Vertical,initialFocus:a,sections:c,store:s})})}var we=o(606287),ke=o(815047),Ze=o(429369),Ae=o(511470),Ce=o(776798),Ve=o(165598);function Le(e){const{store:t,menuListItemProps:o,hidePath:s}=e,a=(0,i.VK)((()=>function(e){if((0,Ve.OY)(e)&&!e.canEdit())return(0,Me.jsx)(v.FormattedMessage,{id:"moveBlockMenu.needEditAccess.tooltip",defaultMessage:'You need "Can edit" access to "{parentName}" to move this page',values:{parentName:(0,Me.jsx)(Ce.Z,{store:e,shouldWrap:!0})}});if((0,Ve.Y)(e)&&!e.canAddOrRemoveTopLevelPages())return(0,Me.jsx)(v.FormattedMessage,{id:"moveBlockMenu.TeamSidebarLocked.tooltip",defaultMessage:"This teamspace has its sidebar locked. You must be a teamspace owner to move to this teamspace."})}(t)),[t]),r=Boolean(a),l=(0,n.yK)((e=>({disabledTooltip:{maxWidth:240},recordMenuItem:r?{color:e.mediumTextColor}:{}})),[r]);return(0,Me.jsx)(N.Z,{placement:te.u.Left,textWrap:!0,style:l.disabledTooltip,disableTooltip:!r,renderTooltip:()=>a,render:e=>(0,Me.jsx)(Ae.Z,{...(0,Q.Z)(o,e),disabled:r,store:t,hidePath:s,style:l.recordMenuItem})})}var Oe=o(186176),Be=o(475024);function Fe(e){let{spaceStore:t,collectionStore:o,menuListItemProps:s}=e;const i=(0,a.O7)(),r=(0,n.yK)((e=>({caption:{color:e.lightTextColor,fontSize:(0,Be.yv)(i,"UISmall")}})),[i]);return(0,Me.jsx)(Ae.Z,{caption:(0,Me.jsx)("div",{style:r.caption,children:(0,Me.jsx)(Ke,{spaceStore:t,collectionStore:o})}),store:o,...s})}function Ke(e){let{spaceStore:t,collectionStore:o}=e;const s=(0,a.O7)(),n=(0,i.VK)((()=>function(e){let{environment:t,spaceStore:o,collectionStore:s}=e;const a=(0,P.tV)({environment:t,spaceStore:o,collectionStore:s});switch(a){case"team":return null;case"private":return(0,Me.jsx)(v.FormattedMessage,{id:"moveToHelpers.privatePageCaptionPrefix",defaultMessage:"Private"});case"shared":return(0,Me.jsx)(v.FormattedMessage,{id:"moveToHelpers.sharedPageCaptionPrefix",defaultMessage:"Shared"});default:(0,y.t1)(a)}}({environment:s,spaceStore:t,collectionStore:o})),[s,t,o]),r=(0,i.VK)((()=>(0,Oe.Lk)(o)),[o])&&(0,Me.jsx)(Oe.ZP,{store:o,showFullPathInTooltip:!0});return r&&n?(0,Me.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[n,(0,Me.jsx)("div",{style:{paddingLeft:4,paddingRight:4},children:"/"}),r]}):r&&!n?r:(0,Me.jsx)(Me.Fragment,{children:n})}function Re(e){let{spaceStore:t,value:o,showPath:s,isCreateIn:a,onAccept:i}=e;const n=function(e){let{spaceStore:t,value:o}=e;const{type:s}=o;switch(s){case"page":return pe.G.createChildStore(t,{table:f.iU,id:o.id});case"collection":return pe.NW.createChildStore(t,{table:we.vF,id:o.id});case"space":return pe.H2.createChildStore(t,{table:ke.bx,id:o.id});case"team":return pe.zX.createChildStore(t,{table:Ze.e0,id:o.id});case"space-private-pages":return;default:(0,y.t1)(s)}}({spaceStore:t,value:o});if(n)return(0,X.Hn)()&&n instanceof pe.NW?{key:n.id,render:e=>(0,Me.jsx)(Fe,{spaceStore:t,collectionStore:n,menuListItemProps:e}),action:()=>i(o)}:{key:n.id,render:e=>(0,Me.jsx)(Le,{store:n,menuListItemProps:e,hidePath:!!a&&!s}),action:()=>i(o)}}var Ne=o(559054),qe=o(269327),ze=o(541432),We=o(16184),Ee=o(439567),Ue=o(73990),He=o(605210),De=o(35026),Qe=o(274016);const Ge=100,Xe=14,_e=24;function Ye(e){return(e+1)*Xe}function $e(e){const{store:t,spaceStore:o,spaceViewStore:r,depth:l,isAlias:c,menuListItemProps:d,from:u}=e,g=(0,a.O7)(),m=(0,n.Fg)(),[h,S]=s.useState(!1),y=(0,n.yK)((e=>({noChildrenLabelItem:{paddingLeft:Ye(l)+_e,fontSize:14,paddingBottom:6.5,color:e.lightTextColor},outlinerItem:{display:"flex",flexDirection:"row",fontSize:14,height:28,paddingLeft:"moveToModalTyped"===u?Ye(l)-4:Ye(l),color:e.regularTextColor,alignItems:"center"},icon:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,width:22,height:18,marginRight:4,position:"relative"},button:{..."moveToModalTyped"===u?{borderRadius:4}:{}}})),[l,u]);function x(){const e=ue.ZP.state,o=e.isOpen?e.flowId:void 0;S(!h),Ue.w6(g,{flowId:o,is_toggled:!h,destination_type:t?t.table:"private_pages"})}const M=(0,i.VK)((()=>{if(t){const e=(0,Me.jsx)("div",{children:(0,Ee.Y)({position:"absolute",width:"50%",height:"50%",right:0,bottom:0})});return t instanceof pe.zX?(0,Me.jsx)("div",{style:y.icon,children:(0,Me.jsx)(Qe.p,{disabled:!0,store:t,size:18})}):(0,Me.jsxs)("div",{style:y.icon,children:[(0,Me.jsx)(F.Z,{icon:t instanceof pe.G?t.getIcon():void 0,isEmptyPage:t instanceof pe.G&&t.isEmptyPage(),title:void 0,size:18,disabled:!0}),c&&e]})}return(0,Me.jsx)(z.Z,{size:16,userStore:(0,H.B7)(g),style:{marginLeft:3}})}),[t,y.icon,g,c]),T=(0,i.VK)((()=>t?t.table===Ze.e0?"private"!==t.getTeamAccessLevel()?(0,Me.jsx)("div",{style:{maxWidth:"80%"},children:(0,Me.jsx)(Ce.Z,{store:t})}):(0,Me.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",maxWidth:"80%"},children:[(0,Me.jsx)(Ce.Z,{store:t}),(0,We.Q)({width:14,height:14,marginLeft:4,fill:m.mediumIconColor})]}):(0,Me.jsx)("div",{style:{maxWidth:"80%"},children:(0,Me.jsx)(Ce.Z,{store:t})}):(0,Me.jsxs)("div",{style:{display:"flex",alignItems:"center",marginLeft:7},children:[(0,Me.jsx)(v.FormattedMessage,{defaultMessage:"Private pages",id:"outliner.addToPrivatePages"}),(0,Me.jsx)("div",{style:{marginLeft:2},children:(0,p.b)({width:14,height:14,fill:m.mediumIconColor,marginLeft:4})})]})),[t,m.mediumIconColor]),b=(0,i.VK)((()=>{const e=new Set([ze.Ti.page,ze.Ti.collectionViewPage,ze.Ti.collectionView,ze.Ti.alias]),o=new Set([ze.Ti.factory]);let s=[];return t?t instanceof pe.zX?s=t.getTeamPagesStores():t instanceof pe.G&&(s=(0,De.Q2)(t,o,e)):s=r.getPrivatePages(g),s}),[t,r,g]);const j=0!==b.length?(0,Me.jsx)(Je,{spaceStore:o,spaceViewStore:r,itemStores:b,depth:l+1,onAccept:e.onAccept,targets:e.targets}):(0,Me.jsx)("div",{style:y.noChildrenLabelItem,children:(0,Me.jsx)(v.FormattedMessage,{defaultMessage:"No pages inside",id:"outliner.NoPagesInside.placeholder"})});return(0,Me.jsxs)("div",{...d,children:[(0,Me.jsx)(xe.Z,{onClick:function(){e.moveToPagesOnly&&(null==t?void 0:t.table)!==f.iU?x():t?t instanceof pe.G?e.onAccept({type:"page",id:t.id,spaceId:o.id}):e.onAccept({type:"team",id:t.id,spaceId:o.id}):e.onAccept({type:"space-private-pages",spaceId:o.id})},style:y.button,children:(0,Me.jsxs)("div",{style:y.outlinerItem,children:[(0,Me.jsx)(He.Z,{isSidebar:!0,fill:!0,icon:"chevron",open:h,color:m.mediumIconColor,onClick:x}),M,T]})}),h&&l<Ge&&j]})}function Je(e){const{spaceStore:t,spaceViewStore:o,itemStores:s,depth:a}=e,r=(0,i.VK)((()=>{const i=s?S.oA(s.map((s=>{if(s instanceof pe.zX&&s.canAddOrRemoveTopLevelPages()||s instanceof pe.G&&(0,X.Xk)(s,e.targets)&&s.canEdit()){const i=s instanceof pe.G&&s.getType()===ze.Ti.alias,n=i?s.getAliasTargetStore():void 0,r=n instanceof pe.G?n:s;return(0,Me.jsx)($e,{spaceStore:t,spaceViewStore:o,store:r,depth:a,onAccept:e.onAccept,targets:e.targets,isAlias:i,moveToPagesOnly:e.moveToPagesOnly},s.id)}}))):[];return e.addedItems?[...e.addedItems,...i]:i}),[s,e.addedItems,e.moveToPagesOnly,e.targets,e.onAccept,t,o,a]),l=(0,n.yK)((e=>({sectionHeader:{color:e.mediumTextColor,fontSize:12,fontWeight:x.Z.fontWeight.medium,padding:"12px 14px 4px 14px"}})),[]);return(0,Me.jsxs)(k.Z,{debugName:"MoveToOutliner",capture:!0,children:[e.title&&(0,Me.jsx)("div",{style:l.sectionHeader,children:(0,Me.jsx)(q.Z,{isSmall:!0,children:e.title})}),(0,Me.jsx)("div",{children:r})]})}function et(e){const{spaceStore:t,spaceViewStore:o,targets:s,moveToPagesOnly:r,forceShowPrivatePageOption:l}=e,c=(0,i.VK)((()=>oe.default.state.currentUserStore),[]),d=(0,a.O7)(),u=(0,v.useIntl)(),p=(0,n.yK)((()=>({modal:{height:374,maxHeight:"70vh",paddingBottom:12},body:{width:"100%"}})),[]),[g]=(0,Ne.r5)((async()=>t&&c?await(0,ee.qX)({environment:d,spaceStore:t,currentUserId:c.id}):[]),[d,t,c]),m=(0,i.VK)((()=>{if(!g.value)return;const e=o.getTeamsStores().filter((e=>e.canAddOrRemoveTopLevelPages()));return e.length>=7?e:S.mN([...e,...g.value||[]],(e=>e.id)).filter((e=>e.canAddOrRemoveTopLevelPages())).slice(0,7)}),[o,g.value]),h=(0,i.VK)((()=>tt({spaceStore:t,targets:s})),[t,s]),f=(0,i.VK)((()=>o.getWorkspacePages().filter((e=>(0,X.Xk)(e,s)&&e.canEdit()))),[o,s]),y=(0,i.VK)((()=>{if(ot({environment:d,targets:s,chosenSpaceStore:t,forceShowPrivatePageOption:l}))return(0,Me.jsx)($e,{spaceStore:t,spaceViewStore:o,store:void 0,depth:0,onAccept:e.onAccept,targets:e.targets,moveToPagesOnly:r},"MoveToModal private item")}),[d,r,e,t,o,s,l]);return t&&o?(0,Me.jsx)("div",{style:p.modal,children:(0,Me.jsx)("div",{style:p.body,children:(0,Me.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,Me.jsx)(Je,{spaceStore:t,spaceViewStore:o,itemStores:h,addedItems:[y],moveToPagesOnly:r,depth:0,title:u.formatMessage({defaultMessage:"Suggested",id:"moveToModal.suggestedSection.title"}),onAccept:e.onAccept,targets:e.targets}),m&&m.length>0&&(0,Me.jsx)(Je,{spaceStore:t,spaceViewStore:o,itemStores:m,moveToPagesOnly:r,depth:0,title:u.formatMessage({defaultMessage:"Teamspaces",id:"moveToModal.teamsSection.title"}),onAccept:e.onAccept,targets:e.targets}),f.length>0&&(0,Me.jsx)(Je,{spaceStore:t,spaceViewStore:o,itemStores:f,moveToPagesOnly:r,depth:0,title:u.formatMessage({defaultMessage:"Workspace",id:"moveToModal.workspaceSection.title"}),onAccept:e.onAccept,targets:e.targets})]})})}):null}function tt(e){let{spaceStore:t,targets:o}=e,s=qe.Z.getWithoutSubscribing(t.id).map((e=>{let{store:t}=e;return t})).filter((e=>e.pathIsAccessibleAndAlive()&&!o.some((t=>"block"===t.table&&t.id===e.id))));const a=o.filter((e=>"block"===e.getParentTable())).map((e=>e.getParentId())),i=a.length===o.length,n=[...new Set(a)];return i&&1===n.length&&(s=s.filter((e=>e.id!==n[0]))),s.slice(0,7)}function ot(e){let{environment:t,targets:o,chosenSpaceStore:s,forceShowPrivatePageOption:a}=e;const i=(0,J.Cx)(s),n=o.every((e=>e.isTopLevelPrivatePage({spaceStore:s,environment:t})));return!i&&(a||!n)}var st=o(584169),at=o(573063),it=o(343568),nt=o(340215);const rt=(0,o(745238).IU)("boxedPerson",{viewBox:"0 0 26 25",svg:(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)("path",{d:"M21.719 19.406h-2.004V21.2c0 2.414-1.219 3.633-3.68 3.633H4.27c-2.438 0-3.668-1.219-3.668-3.633V9.34c0-2.413 1.23-3.632 3.668-3.632h2.015V3.914C6.285 1.5 7.515.281 9.953.281H21.72c2.46 0 3.68 1.219 3.68 3.633v11.86c0 2.414-1.22 3.632-3.68 3.632Zm-.024-1.886c1.172 0 1.817-.633 1.817-1.852V4.02c0-1.22-.645-1.852-1.817-1.852H9.988c-1.16 0-1.816.633-1.816 1.852v1.687h7.863c2.461 0 3.68 1.207 3.68 3.633v8.18h1.98Zm-5.683 5.425c1.16 0 1.816-.633 1.816-1.851V9.445c0-1.218-.656-1.851-1.816-1.851H4.305c-1.16 0-1.817.633-1.817 1.851v11.649c0 1.218.657 1.851 1.817 1.851h11.707Z"}),(0,Me.jsx)("path",{d:"M10.24 14.855c1.176 0 2.164-1.042 2.164-2.39 0-1.316-1-2.32-2.165-2.32s-2.17 1.02-2.164 2.33c0 1.338.993 2.38 2.164 2.38ZM6.661 19.85h7.15c.6 0 .966-.285.966-.757 0-1.386-1.757-3.287-4.539-3.287-2.787 0-4.538 1.901-4.538 3.287 0 .472.36.757.961.757Z"})]})});function lt(e){const{onClick:t,databaseType:o}=e,s=(0,a.O7)(),i=(0,n.yK)((e=>({modal:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginTop:32,marginBottom:32},icon:{width:20,fill:e.mediumTextColor},title:{marginTop:6,fontWeight:x.Z.fontWeight.semibold,color:e.mediumTextColor},subtitle:{marginTop:2,marginLeft:14,marginRight:14,textAlign:"center"},button:{fontWeight:x.Z.fontWeight.semibold,fontSize:(0,Be.yv)(s,"UISmall")}})),[s]),r=(0,P.sN)(o),l=(0,P.Q_)(o);return(0,Me.jsxs)("div",{style:i.modal,children:[rt(i.icon),(0,Me.jsx)(q.Z,{isSmall:!0,style:i.title,children:(0,Me.jsx)(v.FormattedMessage,{id:"moveToModalTypedEmptyState.title",defaultMessage:"No other {singleItemName} databases",values:{singleItemName:r}})}),(0,Me.jsx)(q.Z,{isSmall:!0,isMultiline:!0,style:i.subtitle,children:(0,Me.jsx)(v.FormattedMessage,{id:"moveToModalTypedEmptyState.subtitle",defaultMessage:"Try adding {pluralItemName} to another teamspace",values:{pluralItemName:l}})}),(0,Me.jsx)(B.Z,{isBlue:!0,onClick:t,style:i.button,children:(0,Me.jsx)(v.FormattedMessage,{id:"moveToModalTypedEmptyState.button",defaultMessage:"Move somewhere else"})})]})}const ct=7;function dt(e){let{spaceStore:t,spaceViewStore:o,targets:s,menuListStore:l,onAccept:d,moveToPagesOnly:u,forceShowPrivatePageOption:p}=e;const g=(0,a.O7)(),m=(0,v.useIntl)(),h=(0,n.Fg)(),f=(0,n.yK)((()=>({modal:{maxHeight:"70vh"},loadingShimmer:{padding:16},privateMenuItem:{marginLeft:4,marginRight:4,borderRadius:4}})),[]),x=(0,i.VK)((()=>o.getTeamsStores().map((e=>e.id))),[o]),M=(0,nt.F)({environment:g,spaceStore:t,parentStore:t,joinedTeamIds:x,moveToTargets:s,overrideDatabaseType:void 0}),T=(0,i.VK)((()=>M.success?M.typedDatabases.map((e=>function(e){const{store:t,spaceStore:o,onAccept:s}=e,a={key:t.id,render:e=>(0,Me.jsx)(Fe,{spaceStore:o,collectionStore:t,menuListItemProps:e}),action:()=>s({type:"collection",id:t.id,spaceId:o.id})};return a}({store:e,spaceStore:t,onAccept:d}))):[]),[M,t,d]),b=(0,i.VK)((()=>ue.ZP.getTargetsDatabaseType()),[]),j=(0,i.VK)((()=>ot({environment:g,targets:s,chosenSpaceStore:t,forceShowPrivatePageOption:p})),[g,p,t,s]),I=(0,i.VK)((()=>{const{isMobile:e}=g.device;if(e){const e=s.every((e=>e.isNavigableBlock()));return jt({query:"",chosenSpaceStore:t},g,h,m,s,d,e,p)}return{key:"privateMenuItem",render:e=>(0,Me.jsx)("div",{style:f.privateMenuItem,children:(0,Me.jsx)($e,{spaceStore:t,spaceViewStore:o,store:void 0,depth:0,onAccept:d,targets:s,moveToPagesOnly:u,menuListItemProps:e,from:"moveToModalTyped"})}),action:()=>{}}}),[g,p,m,u,d,t,o,f.privateMenuItem,s,h]);if(!M.success)return(0,Me.jsx)("div",{style:f.loadingShimmer,children:(0,Me.jsx)(it.Z,{paragraphs:[{lineHeight:18,lineMargin:4,sectionWidths:[100],repeat:1,sectionMargin:0},{lineHeight:14,lineMargin:4,sectionWidths:[100,40],repeat:1,sectionMargin:-2}]})});if(!b)throw new Error("Trying to show typed moveTo modal when database type is not available.");if(0===T.length)return(0,Me.jsx)(lt,{databaseType:b,onClick:()=>{ue.ZP.state.isOpen&&ue.ZP.setState({...ue.ZP.state,variant:r.br})}});const w=(0,P.sN)(b),k=S.oA([j&&(0,y.$K)(I)&&{key:"other",render:e=>(0,Me.jsx)(K.Z,{...e,title:(0,Me.jsx)(v.FormattedMessage,{defaultMessage:"Other",id:"moveToModalTyped.otherSection.title"})}),items:[I]},{key:"suggested",render:e=>(0,Me.jsx)(K.Z,{...e,title:(0,Me.jsx)(v.FormattedMessage,{defaultMessage:"{typedItemName} databases",id:"moveToModalTyped.suggestedMenuSection.title",values:{typedItemName:(0,c.Z)(w)}}),right:(0,Me.jsx)(ut,{typedItemName:w})}),items:T.slice(0,ct)}]);return(0,Me.jsx)("div",{style:f.modal,children:(0,Me.jsx)(he.Z,{initialFocus:0,type:he.i.Vertical,sections:k||[],store:l})})}function ut(e){let{typedItemName:t}=e;const o=(0,n.yK)((e=>({icon:{width:13,height:13,fill:e.mediumIconColor},iconButton:{height:18,width:18,padding:0,marginTop:-4,marginBottom:-4,marginRight:-4}})),[]),s=(0,v.useIntl)();return(0,a.Fy)().isMobile?null:(0,Me.jsx)(N.Z,{placement:te.u.Bottom,style:{width:220},textWrap:!0,renderTooltip:()=>(0,Me.jsx)(v.FormattedMessage,{defaultMessage:"{typedItemName} properties will be kept when moving to these locations",id:"moveTypedMenu.tooltip",values:{typedItemName:S.kC(t)}}),render:e=>(0,Me.jsx)(at.Z,{ariaLabel:s.formatMessage({id:"moveToModalTyped.helpIcon.ariaLabel",defaultMessage:"Help icon for moving typed pages."}),icon:st.m,iconStyle:o.icon,style:o.iconButton,...e})})}const pt=5,gt=(0,v.defineMessages)({createSubpage:{id:"moveToOrCreateMenu.createSubpage.description",defaultMessage:"Create a new sub-page where your cursor is, inside the current block."},newPageIn:{id:"moveToOrCreateMenu.newPageIn.description",defaultMessage:"Create a new page inside any existing page, then link to it in one go."},turnInto:{id:"moveToOrCreateMenu.turnInto.description",defaultMessage:"Turn blocks into new pages inside any existing database or page."},privatePagesTitle:{defaultMessage:"Private Pages",id:"moveBlockMenu.privatePagesMenuTitle"}});const mt=function(e){let{targets:t,isCreateIn:o,onAccept:l,isAddTo:u,isTurnIntoPage:p,parentBlockId:g,autocompleteQuery:m,onAutocompleteQueryChange:h,onMouseEnter:x,onCancel:M,desktopWidth:b,captureSelection:j,restoreSelection:I,ignoreSelectionAreaStore:w,forceShowPrivatePageOption:A=!1}=e;const V=(0,v.useIntl)(),L=(0,n.Fg)(),B=(0,a.O7)(),F=(0,i.qz)(void 0,re.Z),R=(0,i.qz)(void 0,ge.Z),N=(0,i.qz)(void 0,de),q=(0,i.qz)(w,ne.Z),z=(0,i.VK)((()=>t.every((e=>e.isNavigableBlock()))),[t]),W=(0,s.useCallback)((e=>async function(e,t,o,s,a,i,n,l,u,p,g,m,h){const{currentUserRootStore:x,currentSpaceStore:M}=oe.default.state,{query:b}=e,j=g.getChosenSpaceStore();if(!x||!j||!M)return[];const I=(0,Y.lX)({spaceStore:j,currentUserId:t.currentUser.id}),[w,k,Z,A]=await async function(e,t,o,s,a){const i=[],n=[],r=[];let l=[];if(t&&ht()){const n=await E.FF.searchActions.load(),l=ue.ZP.state,c=l.isOpen?l.queryLimit:G.Kg,d=await n.searchPageIds({environment:a,query:t,limit:c+1,spaceId:e.id,requireEditPermissions:!1,excludeTemplates:!1,source:"move_to_menu",boostRecentlyViewedPages:!0}),u=d.results.length>c;ue.ZP.state.isOpen&&ue.ZP.state.canLoadMore!==u&&ue.ZP.setState({...ue.ZP.state,canLoadMore:u});for(const t of d.results){const a=pe.G.createChildStore(e.getPagesStore(),{table:f.iU,id:t});if((0,X.Xk)(a,o)){const e={blockId:a.id,isEditable:a.canEdit()};vt(a,s)?r.push(e):i.push(e)}}}else{l=(await T.I0(e,e.id)).map((t=>{const o=pe.G.createChildStore(e.getPagesStore(),{table:f.iU,id:t});return{blockId:o.id,isEditable:o.canEdit()}})),l=l.filter((t=>{let{blockId:a}=t;const i=pe.G.createChildStore(e.getPagesStore(),{table:f.iU,id:a});if((0,X.Xk)(i,o)){const e={blockId:i.id,isEditable:i.canEdit()};return!vt(i,s)||(r.push(e),!1)}}));const t=H.Xb(a);for(const e of t)if((0,X.Xk)(e,o)){const t={blockId:e.id,isEditable:e.canEdit()};vt(e,s)?r.push(t):n.push(t)}}return[i,n,r,l]}(j,b,s,a,t),C=await I;if((0,X.Hn)())return await async function(e,t,o,s,a,i,n,l){const{chosenSpaceStore:u,savedQuickAddParent:p,query:g,blockResults:m,recentPageResults:h}=e,{typedSuggestedMenuSection:f,typedSuggestedResults:x}=await async function(e,t,o,s,a){if(!ue.ZP.state.isOpen||ue.ZP.state.variant===r.br||!se.n.state)throw new Error("Trying to render section when it's either not open, untyped, or typed but uninitialized (i.e. the typed databases are not fetched yet)");const i=ue.ZP.getTargetsDatabaseType(),n=(0,P.sN)(i),{typedDatabases:l}=se.n.state;let u;u=ie.default.checkGate({gateName:"typed_move_to_improved_search"})?await async function(e,t,o,s,a){const{databaseType:i,query:n,searchSessionId:r}=e,l=Mt(a);if(!l)return[];const c=await E.FF.searchActions.load(),d=(await c.searchCollectionsWithRecents({environment:t,query:n,limit:20,databaseType:i,parentStore:l,spaceStore:l,collectionViewBlockStore:void 0,searchSessionId:r})).results,u=d.map((e=>Re({spaceStore:l,value:{type:"collection",id:e,spaceId:l.id},showPath:!0,isCreateIn:o,onAccept:o?s:e=>St(e,s,t)}))).filter(y.$K);return u}({query:e,databaseType:i?[i]:void 0,searchSessionId:ue.ZP.state.flowId},t,o,s,a):function(e,t,o,s){const{query:a,typedDatabases:i}=e,n=Mt(s);if(!n||!a||!i)return[];const r=(0,d.ZP)(a,i,(e=>{const t=String(e.getName())||"",o=(0,_.u3)(e);return[t,o instanceof pe.zX&&o.getName()||""].join(" ")}));return r.map((e=>Re({spaceStore:n,value:{type:"collection",id:e.id,spaceId:n.id},showPath:!0,isCreateIn:t,onAccept:o}))).filter(y.$K)}({query:e,typedDatabases:l},o,s,a);const p={key:"suggested",render:e=>(0,Me.jsx)(K.Z,{...e,title:(0,Me.jsx)(v.FormattedMessage,{defaultMessage:"{typedItemName} databases",id:"moveBlockMenu.typedSuggestedSection.title",values:{typedItemName:(0,c.Z)(n)}}),right:(0,Me.jsx)(ut,{typedItemName:n})}),items:u.slice(0,pt)};return{typedSuggestedMenuSection:p,typedSuggestedResults:l}}(g,t,o,s,n);if(ue.ZP.state.isOpen&&"aggregated_type"===ue.ZP.state.moveToContext)return[f].filter((e=>e.items.length>0));let M=(0,X.XQ)({recentPageResults:h,blockResults:m,suggestedPages:x});const T=new Set((0,X.qB)(a));T.size>0&&(M=M.filter((e=>!T.has(e.blockId))));const b=S.mN(S.VS(S.oA([bt({query:g,savedQuickAddParent:p},i,o,s,n),...M.map((e=>{let{blockId:t}=e;return Re({spaceStore:u,value:{type:"page",id:t,spaceId:u.id},showPath:!g,isCreateIn:o,onAccept:s})}))])),(e=>e.key)),j=S.oA(Pt(g,o,s,n,l)).slice(0,pt),I=f.items.length>0,w={key:"teams",render:e=>(0,Me.jsx)(K.Z,{...e,desktopStyle:{paddingTop:I?0:6,paddingBottom:6},title:(0,Me.jsx)(v.FormattedMessage,{defaultMessage:"Teamspaces",id:"typedMoveBlockMenu.teamsSection.title"})}),items:j},k=f.items.length>0&&0===w.items.length;return[f,w,{key:"pages",render:e=>(0,Me.jsx)(K.Z,{...e,desktopStyle:{paddingTop:k?0:6,paddingBottom:6},title:(0,Me.jsx)(v.FormattedMessage,{defaultMessage:"Pages",id:"typedMoveBlockMenu.pagesSection.title"})}),items:b}].filter((e=>e.items.length>0))}({chosenSpaceStore:j,savedQuickAddParent:C,query:b,blockResults:w,recentPageResults:A},t,a,i,s,n,g,m);if(a)return function(e,t,o,s,a,i,n,r,l,c,d,u,p,g,m){const h=[],f=new Set,y=e=>{if(!e)return!1;const{key:t}=e;return!f.has(t)&&(f.add(t),!0)},x=S.oA([ft({query:t},n,c,d,u,r,p)]);!x.length||Boolean(l)||Boolean(r)||h.push({key:"defaults",render:e=>(0,Me.jsx)(K.Z,{...e}),items:x});const M=S.oA([...i.slice(0,5).map((t=>{let{blockId:o}=t;return Re({spaceStore:e,value:{type:"page",id:o,spaceId:e.id},showPath:!Boolean(l)&&!Boolean(r),isCreateIn:p,onAccept:d})})),...o.slice(0,10).map((o=>{let{blockId:s}=o;return Re({spaceStore:e,value:{type:"page",id:s,spaceId:e.id},showPath:!t,isCreateIn:p,onAccept:d})})),...s.slice(0,10).map((o=>{let{blockId:s}=o;return Re({spaceStore:e,value:{type:"page",id:s,spaceId:e.id},showPath:!t,isCreateIn:p,onAccept:d})}))].slice(0,20).filter(y));M.length>0&&h.push({key:"blocks",render:e=>(0,Me.jsx)(K.Z,{...e,title:(0,Me.jsx)(v.FormattedMessage,{defaultMessage:"Suggested",id:"moveBlockMenu.suggestedSection.title"}),topBorder:h.length>0&&!Boolean(l)&&!Boolean(r)}),items:M});const T=S.oA(Pt(t,p,d,g,m).filter(y));T.length>0&&(0,ee.bq)()&&h.push({key:"teams",render:e=>(0,Me.jsx)(K.Z,{...e,isTitleUppercase:!0,title:(0,Me.jsx)(v.FormattedMessage,{defaultMessage:"Teamspaces",id:"moveBlockMenu.teamsSection.title"}),topBorder:h.length>0}),items:T});const b=S.oA(a.slice(0,5).map((t=>{let{blockId:o}=t;return Re({spaceStore:e,value:{type:"page",id:o,spaceId:e.id},showPath:!0,isCreateIn:p,onAccept:d})})).filter(y));b.length>0&&h.push({key:"templates",render:e=>(0,Me.jsx)(K.Z,{...e,isTitleUppercase:!0,title:r?(0,Me.jsx)(v.FormattedMessage,{defaultMessage:"Add from template",id:"moveBlockMenu.addFromTemplate.title"}):(0,Me.jsx)(v.FormattedMessage,{defaultMessage:"Move to template",id:"moveBlockMenu.moveToTemplate.title"}),topBorder:h.length>0}),items:b});x.length&&(Boolean(l)||Boolean(r))&&h.push({key:"defaults",render:e=>(0,Me.jsx)(K.Z,{...e,topBorder:h.length>0}),items:x});return h}(j,b,w,k,Z,A,t,n,l,s,i,u,a,g,m);return function(e,t,o,s,a,i,n,r,l,c,d,u,p,g,m,h,f){const y=function(e,t,o,s,a,i,n,r,l,c){const d=0===e.length&&t?tt({spaceStore:t,targets:a}):[],u={key:"suggested",render:e=>(0,Me.jsx)(K.Z,{...e,title:(0,Me.jsx)(v.FormattedMessage,{defaultMessage:"Suggested",id:"moveBlockMenu.suggestedSection.title"})}),items:S.oA([jt({query:e,chosenSpaceStore:t},o,s,i,a,n,l,c),...d.filter((e=>(0,X.Xk)(e,a))).map((e=>Re({spaceStore:t,value:{type:"page",id:e.id,spaceId:t.id},showPath:!1,isCreateIn:r,onAccept:n})))])};return u}(o,e,r,l,c,d,u,p,h,f),x=ue.ZP.state,M=x.isOpen?x.queryLimit:G.Kg,T=[...n.slice(0,3),...s.slice(0,M)],b={key:"pages",render:e=>(0,Me.jsx)(K.Z,{...e,title:(0,Me.jsx)(v.FormattedMessage,{defaultMessage:"Pages",id:"moveBlockMenu.pagesSection.title"})}),items:S.mN(S.VS(S.oA([bt({query:o,savedQuickAddParent:t},g,p,u,m),...T.map((t=>{let{blockId:s}=t;return Re({spaceStore:e,value:{type:"page",id:s,spaceId:e.id},showPath:!o,isCreateIn:p,onAccept:u})}))])),(e=>e.key))},j={key:"teams",render:e=>(0,Me.jsx)(K.Z,{...e,title:(0,Me.jsx)(v.FormattedMessage,{defaultMessage:"Teamspaces",id:"moveBlockMenu.teamsSection.title"})}),items:S.oA(Pt(o,p,u,m,h)).slice(0,10)};return[y,j,b].filter((e=>e.items.length>0))}(j,C,b,w,0,0,A,t,o,s,p,i,a,n,g,m,h)}(e,B,L,t,o,l,u,p,g,V,N,z,A)),[B,L,t,o,l,u,p,g,V,N,z,A]),U=(0,i.VK)((()=>ue.ZP.state.isOpen),[]),Q=(0,i.VK)((()=>!R.state.ready&&m.length>0),[R,m]),$=(0,i.VK)((()=>ht()),[]),J=(0,a.MO)(),te=(0,i.VK)((()=>(0,X.Hn)()),[]);if(!u&&!o&&!U)return(0,Me.jsx)(Me.Fragment,{});let ae,le;return ae=$?J?(0,Me.jsx)(kt,{autocompleteQuery:m,onAutocompleteQueryChange:h,isAddTo:u,isTurnIntoPage:p,moveToSpaceMenuStore:N,menuListStore:F,isLoading:Q}):(0,Me.jsx)(K.Z,{isInput:!0,children:(0,Me.jsx)(kt,{autocompleteQuery:m,onAutocompleteQueryChange:h,isAddTo:u,isTurnIntoPage:p,moveToSpaceMenuStore:N,menuListStore:F,isLoading:Q})}):void 0,le=J?{onMouseEnter:x,menuType:D.og.Modal,title:p?(0,Me.jsx)(v.FormattedMessage,{defaultMessage:"Add to another page",id:"moveBlockMenu.mobileNewPageInj.label"}):u?(0,Me.jsx)(v.FormattedMessage,{defaultMessage:"Add new page in",id:"moveBlockMenu.mobileAddTo.label"}):(0,Me.jsx)(v.FormattedMessage,{defaultMessage:"Move to",id:"moveBlockMenu.mobileMoveTo.label"}),right:(0,Me.jsx)(v.FormattedMessage,{defaultMessage:"Done",id:"moveBlockMenu.rightDoneButton.label"}),onClickRight:M,header:ae}:{onMouseEnter:x,menuType:D.og.Popup,width:b,header:ae},(0,Me.jsxs)(k.Z,{debugName:"MoveToOrCreateMenu",capture:!0,allowMenuList:!0,allowEsc:!0,allowTabUntab:!1,allowUndo:!1,children:[(0,Me.jsx)(C.Z,{debugName:"MoveToOrCreateMenu",capture:!0,onEsc:M}),(0,Me.jsx)(Z.Z,{store:q,capture:j,ignoreBlockSelection:!1,restoreSelection:I,render:()=>{var e;const s=!Boolean(m)&&!J||te&&!Boolean(m);return(0,Me.jsx)(O.Z,{...le,footer:(0,Me.jsx)(wt,{isCreateIn:o,isAddTo:u,moveToSpaceMenuStore:N,allTargetsAreNavigable:z}),children:s?(0,Me.jsx)(It,{onAccept:l,targets:t,moveToSpaceMenuStore:N,menuListStore:F,allTargetsAreNavigable:z,forceShowPrivatePageOption:A}):(0,Me.jsx)(Pe,{query:m,spaceId:null===(e=Mt(N))||void 0===e?void 0:e.id,menuListStore:F,requestStore:R,getAutocompleteItems:W})})}})]})};function ht(){return ae.Z.state.online}function ft(e,t,o,s,a,i,n){if(!i||!n)return;if(e.query)return;const r=oe.default.state.mainEditorCurrentBlockStore;if(!r)return;const c=a?pe.G.createChildStore(r,{table:f.iU,id:a}):void 0,d=M.gt(c);return d?{key:d.pageStore.id,render:e=>{const s=t=>(0,Me.jsx)(I.Z,{...(0,Q.Z)(t||{},e),icon:(0,g.R)({width:14}),title:o.length>1?(0,Me.jsx)(v.FormattedMessage,{id:"moveBlockMenu.currentPage.pluralAddTitle",defaultMessage:"New sub-pages"}):(0,Me.jsx)(v.FormattedMessage,{id:"moveBlockMenu.currentPage.singleAddTitle",defaultMessage:"New sub-page"})});return t.device.isPhone?s():(0,Me.jsx)(N.Z,{renderTooltip:()=>(0,Me.jsx)(W.Z,{imageURL:l.Z.images.tooltips.pageMenu.newSubpagePng,imageWidth:140,imageHeight:100,caption:(0,Me.jsx)(v.FormattedMessage,{...gt.createSubpage})}),placement:te.u.Right,delayThreshold:0,render:e=>s(e)})},action:()=>s(d.createInValue)}:void 0}function vt(e,t){return!!t&&e.isTemplate()}function St(e,t,o){var s;t(e);const a=ue.ZP.getTargetsDatabaseType(),i=null===(s=oe.default.state.currentSpaceStore)||void 0===s?void 0:s.id;"collection"===e.type&&i&&b.createAndCommit({userAction:"TypedMoveToMenu.handleClick",environment:o,perform:t=>{j.zq({transaction:t,dbType:a,collectionId:e.id})}})}function yt(e){return{width:10,marginLeft:4,fill:e.lightIconColor}}function xt(e){var t;return!!e&&e.getChosenSpaceId()!==(null===(t=oe.default.state.currentSpaceStore)||void 0===t?void 0:t.id)}function Mt(e){return e.getChosenSpaceStore()??oe.default.state.currentSpaceStore}function Tt(e){return e.getChosenSpaceViewStore()??oe.default.state.currentSpaceViewStore}function bt(e,t,o,s,a){const{query:i,savedQuickAddParent:n}=e,r=Mt(a);if(r)return t&&!i&&"space"===n.type||"page"===n.type?Re({spaceStore:r,value:n,showPath:!0,isCreateIn:o,onAccept:s}):void 0}function jt(e,t,o,s,a,i,n,r){var l;const{query:c,chosenSpaceStore:u}=e,g=gt.privatePagesTitle,m=s.formatMessage(g).replace(/<[^>]*>/g,""),h=c?null===(l=(0,d.C6)(c,m))||void 0===l?void 0:l.score:void 0,f=c&&(h||0)>=d.V5;if((!c||f)&&n&&(!u||ot({environment:t,targets:a,chosenSpaceStore:u,forceShowPrivatePageOption:r})))return{key:"private",render:e=>(0,Me.jsx)(I.Z,{icon:(0,Me.jsx)(z.Z,{size:22,userStore:(0,H.B7)(t)}),title:(0,Me.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,Me.jsx)("span",{children:(0,Me.jsx)(v.FormattedMessage,{...g})}),(0,ee.bq)()&&(0,Me.jsx)("div",{style:{marginLeft:10,display:"flex",alignItems:"center"},children:(0,p.b)({width:16,height:16,fill:o.mediumIconColor})})]}),...e}),action:()=>{i({type:"space-private-pages"})}}}function Pt(e,t,o,s,a){if(e&&!a)return[];const i=Mt(s),n=Tt(s);if(!i||!n)return[];let r=n.getTeamsStores();return e&&(r=(0,d.ZP)(e,r,(e=>e.getName()||""))),r.map((e=>Re({spaceStore:i,value:{type:"team",id:e.id,spaceId:i.id},showPath:!1,isCreateIn:t,onAccept:o}))).filter(y.$K)}function It(e){let{onAccept:t,targets:o,moveToSpaceMenuStore:s,menuListStore:n,allTargetsAreNavigable:r,forceShowPrivatePageOption:l}=e;const c=(0,a.O7)(),d=(0,i.VK)((()=>Mt(s)),[s]),u=(0,i.VK)((()=>Tt(s)),[s]),p=(0,i.VK)((()=>(0,X.Hn)()),[]),g=(0,i.VK)((()=>(0,J.Cx)(d)),[d]);if(!u||!d)return null;const m=!r||g;return p?(0,Me.jsx)(dt,{spaceStore:d,spaceViewStore:u,onAccept:e=>St(e,t,c),targets:o,menuListStore:n,moveToPagesOnly:m,forceShowPrivatePageOption:l}):(0,Me.jsx)(et,{spaceStore:d,spaceViewStore:u,onAccept:t,targets:o,moveToPagesOnly:m,forceShowPrivatePageOption:l})}function wt(e){let{isCreateIn:t,isAddTo:o,moveToSpaceMenuStore:s,allTargetsAreNavigable:r}=e;const l=(0,v.useIntl)(),c=(0,n.Fg)(),d=(0,a.O7)(),{currentUserRootStore:p,currentSpaceStore:g}=(0,i.VK)((()=>{const{currentUserRootStore:e,currentSpaceStore:t}=oe.default.state;return{currentUserRootStore:e,currentSpaceStore:t}}),[]),m=(0,i.VK)((()=>s.getChosenSpaceStore()),[s]),h=(0,i.VK)((()=>r&&!(null!=g&&g.getDisableMoveToSpace())&&!t&&!o),[r,g,t,o]),f=(0,i.VK)((()=>null==p?void 0:p.getSpaceViewStores()),[p]),y=(0,i.VK)((()=>S.mN(S.oA(null==f?void 0:f.map((e=>{const t=e.getSpaceStore();return!(0,J.Cx)(t)&&t}))),(e=>e.id))),[f]);if(!p||!m||!g)return null;if(!h)return null;const x={menuTitle:l.formatMessage({defaultMessage:"Workspaces",id:"moveBlockMenu.spaceSwitcher.menuTitle"}),items:y,selectedItem:m,onSelect:e=>{s.setState({chosenSpaceId:e.id})},getKey:e=>e.id,renderItem:e=>(0,Me.jsx)(I.Z,{...e,checkState:e.value.id===m.id,title:(0,J.rn)(d,e.value),icon:(0,Me.jsx)(F.Z,{icon:(0,J.Wd)(d,e.value),isEmptyPage:!1,size:20,disabled:!0,title:(0,J.rn)(d,e.value)})}),renderOrigin:e=>(0,Me.jsxs)(B.Z,{isSmall:!0,style:{fontWeight:"normal",fontSize:12,flexShrink:1},...e,children:[(0,Me.jsx)(F.Z,{disabled:!0,icon:m.getIcon(),isEmptyPage:!1,size:16,title:m.getName(),style:{marginRight:4}}),(0,Me.jsx)(me.s,{children:(0,J.rn)(d,m)}),(0,u.i)(yt(c))]}),width:150};return(0,Me.jsxs)("div",{children:[(0,Me.jsx)(w.Z,{vertical:!1,size:1}),(0,Me.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",padding:"4px"},children:(0,Me.jsx)(R.Z,{...x},"space-switcher")})]})}function kt(e){let{isLoading:t,autocompleteQuery:o,onAutocompleteQueryChange:s,isAddTo:l,isTurnIntoPage:c,moveToSpaceMenuStore:d,menuListStore:u}=e;const p=(0,v.useIntl)(),g=(0,n.Fg)(),f=(0,a.O7)(),{device:S}=f,y=(0,i.VK)((()=>(0,X.Hn)()&&ue.ZP.state.isOpen&&ue.ZP.state.variant===r.ii&&!se.n.state),[]),M=(0,i.VK)((()=>function(e){let{intl:t,isAddTo:o,isTurnIntoPage:s,moveToSpaceMenuStore:a}=e;if(xt(a))return t.formatMessage({defaultMessage:"Duplicate page…",id:"moveToMenuRenderer.duplicateToSpace.label"});if((0,X.Hn)()){const e=(0,P.sN)(ue.ZP.getTargetsDatabaseType());return t.formatMessage({defaultMessage:"Move {typedItemName} to…",id:"moveToMenuRenderer.moveTo.typedLabel"},{typedItemName:e})}return s?t.formatMessage({defaultMessage:"Search page to add in…",id:"moveToMenuRenderer.addNewPageIn.label"}):o?t.formatMessage({defaultMessage:"Search page to add to…",id:"moveToMenuRenderer.addTo.label"}):t.formatMessage({defaultMessage:"Move page to…",id:"moveToMenuRenderer.moveTo.teamLabel"})}({intl:p,isAddTo:l,isTurnIntoPage:c,moveToSpaceMenuStore:d})),[p,l,c,d]),T=(0,i.VK)((()=>xt(d)),[d]);return(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)(A.ZP,{onCancel:()=>{ue.ZP.state.isOpen&&ue.ZP.setState({...ue.ZP.state,isOpen:!1})},disabled:y,focus:!S.isMobile||void 0,focusAfterAnimation:!0,value:o,onChange:e=>{s(e.target.value),u.setState({...u.state,focus:{section:0,indexLocal:0,indexGlobal:0}})},placeholder:M,inputLeft:(0,Me.jsx)(A.f_,{icon:m.R}),inputRight:(0,Me.jsx)(U.Z,{show:t,showDelay:400,showHold:0,render:e=>e&&(0,Me.jsx)(L.Z,{style:{marginRight:2}})}),style:{marginBottom:-2}}),T&&(0,Me.jsxs)(q.Z,{isMultiline:!0,isSecondaryColor:!1,style:{background:g.accentColors.gray[30],marginTop:12,marginLeft:12,marginRight:12,padding:8,borderRadius:6},children:[(0,h.t)({fill:g.accentColors.orange[400],width:14,height:14,marginRight:4,alignSelf:"center",display:"inline-block",verticalAlign:"text-bottom"}),(0,Me.jsx)("span",{children:(0,Me.jsx)(v.FormattedMessage,{id:"moveBlockMenu.duplicateToSpace.message",defaultMessage:"You can only duplicate pages into another workspace — not move them."})}),(0,Me.jsx)(V.Z,{href:(0,$.UY)("guides.duplicateToSpace"),style:{color:g.accentColors.gray[500],fontWeight:x.Z.fontWeight.semibold,marginTop:4},children:(0,Me.jsx)(v.FormattedMessage,{id:"moveBlockMenu.duplicateToSpace.learnMoreLink",defaultMessage:"Learn more"})})]})]})}},30765:(e,t,o)=>{o.d(t,{s:()=>d});var s=o(667294),a=o(800480),i=o(724405),n=o(137810),r=o(526388);var l=o(825464),c=o(785893);function d(e){let{children:t,style:o}=e;const{isSafari:d}=(0,a.Fy)(),u=(0,s.useRef)(null),p=function(e){const[t,o]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{const{current:t}=e;if(!t)return void o(!1);const s="ResizeObserver"in window?new ResizeObserver((e=>{let[t]=e;o(t.target.scrollWidth>t.target.clientWidth)})):void 0;return null==s||s.observe(t),()=>null==s?void 0:s.unobserve(t)}),[]),t}(u),g=(0,i.yK)((()=>({overflowText:{...n.Z.textOverflowStyle,...o}})),[o]);return(0,c.jsx)(r.Z,{delayThreshold:500,placement:l.u.Bottom,forceVisibleState:!(d||!p)&&void 0,renderTooltip:()=>p?t:void 0,render:e=>(0,c.jsx)("div",{ref:u,style:g.overflowText,...e,children:t})})}}}]);