"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[61066],{376067:(e,t,i)=>{i.d(t,{uU:()=>T,EC:()=>z,Pk:()=>E,V2:()=>A,A1:()=>L,QO:()=>U,bO:()=>Z,JJ:()=>V});i(757658);var r=i(715070),a=i(568626),n=i(520270),o=i(89101),l=i(177420),s=i(949953),d=i(509844),u=i(519889),c=i(994826),p=i(544876),g=i(552629),m=i(307032),f=i(401898),_=i(63811),h=i(757549),v=i(76463),y=i(547307),b=i(454642),x=i(709953);var I=i(95477),S=i(212982),w=i(443348),j=i(433929),M=i(80444),k=i(319385),C=i(206258),F=i(608055),R=i(210228);function Z(e){const{environment:t,integrationStore:i}=e;R.createAndCommit({userAction:"developerIntegrationActions.setIntegrationSecretView",environment:t,perform:e=>{!function(e){const{integrationStore:t,transaction:i}=e,r=(0,C.Vh)(t,t.pointer,"info");x.sW({store:r,data:{has_viewed_secret:!0},transaction:i})}({integrationStore:i,transaction:e})}})}async function T(e){const{environment:t,recordStore:i}=e;function r(){h.tf(t,{table:i.table})}i.table===l.cZ?await v.P0({environment:t,botId:i.id,onSuccess:r}):i.table===d.K2?await async function(e){const{environment:t,integrationId:i,onSuccess:r}=e,a=await b.deleteIntegration(t,{integrationId:i});"failed"===a.type?y.showError(a):"success"===a.type&&r&&r()}({environment:t,integrationId:i.id,onSuccess:r}):(0,f.t1)(i)}function V(e){const{environment:t,formState:i,formData:r}=e;if("create-bot"===i.type)return P({environment:t,formData:r});if("update-bot"===i.type)return function(e){const{environment:t,botPointer:i,formData:r}=e,{currentUserRootStore:a}=M.default.state;if(!a)return;const n=(0,C.Kv)(a,i),o="developerIntegrationActions.updateBot";return R.createAndCommit({userAction:o,environment:t,perform:e=>{x.sW({store:n,data:{name:r.name,icon:r.icon,parent_id:r.space.id,last_edited_by_id:a.id,last_edited_by_table:u.KJ,last_edited_at:Date.now(),capabilities:r.capabilities},transaction:e}),e.postSubmitCallbacks=[t=>{t&&q(t,o,e.spaceId)}]}}),h.FB(t,{table:l.cZ}),i}({environment:t,botPointer:{id:i.startingRecord.value.id,table:i.startingRecord.table,spaceId:i.startingRecord.value.space_id},formData:r});if("create-guest-integration"===i.type){if(!i.startingRecord)return;return B({environment:t,botPointer:{id:i.startingRecord.value.id,table:i.startingRecord.table,spaceId:i.startingRecord.value.space_id},formData:r})}return"update-guest-integration"===i.type?D({environment:t,integrationPointer:{id:i.startingRecord.value.id,table:i.startingRecord.table},formData:r}):"create-third-party-external-integration"===i.type?function(e){const{environment:t,formData:i,integrationPointer:r}=e,{currentUserRootStore:a}=M.default.state,n=r.id;if(!a)return;const o=N(i);if(!o)return;const l=o.oauth_authorize_url;D({environment:t,integrationPointer:r,formData:i,hasLinkPreviewCapabilities:!0,redirect_uris:[l]});const c="developerIntegrationActions.createThirdPartyExternalIntegration";return R.createAndCommit({userAction:c,environment:t,perform:e=>{!function(e,t,i){const{integrationId:r,userRootStore:a,config:{oauth_authorize_url:n,oauth_token_url:o,client_id:l,client_secret:d,scopes:c,deletion_url:p}}=i,g={id:r,oauth_authorize_url:n,oauth_token_url:o,client_id:l,client_secret:d,scopes:c,parent_id:a.id,parent_table:u.KJ,deletion_url:p};x.ae({environment:e,table:s.r9,value:g,transaction:t,inMemoryRecordCache:a.inMemoryRecordCache})}(t,e,{integrationId:n,userRootStore:a,config:o}),e.postSubmitCallbacks=[t=>{t&&q(t,c,e.spaceId)}]}}),A(t,r),h.PR(t,{table:d.K2}),r}({environment:t,integrationPointer:{id:i.startingRecord.value.id,table:i.startingRecord.table},formData:r}):"update-third-party-external-integration"===i.type?function(e){const{environment:t,integrationPointer:i,formData:r}=e,{currentUserRootStore:a}=M.default.state;if(!a)return;const n=N(r);if(!n)return;const o=(0,C.Kv)(a,{table:s.r9,id:i.id}),l={oauth_authorize_url:n.oauth_authorize_url,oauth_token_url:n.oauth_token_url,client_id:n.client_id,client_secret:n.client_secret,scopes:n.scopes||null,deletion_url:n.deletion_url||null},d=n.oauth_authorize_url;D({environment:t,integrationPointer:i,formData:r,hasLinkPreviewCapabilities:!0,redirect_uris:[d]});const u="developerIntegrationActions.updateThirdPartyExternalIntegration";return R.createAndCommit({userAction:u,environment:t,perform:e=>{x.sW({store:o,data:l,transaction:e}),e.postSubmitCallbacks=[t=>{t&&q(t,u,e.spaceId)}]}}),i}({environment:t,integrationPointer:{id:i.startingRecord.value.id,table:i.startingRecord.table},formData:r}):"update-first-party-external-integration"===i.type?D({environment:t,integrationPointer:{id:i.startingRecord.value.id,table:i.startingRecord.table},formData:r,hasLinkPreviewCapabilities:!0}):"update-compliance-integration"===i.type?function(e){const{environment:t,integrationPointer:i,formData:r}=e,{currentUserRootStore:a}=M.default.state;if(!a)return;const n=N(r),o=null==n?void 0:n.oauth_authorize_url;if(D({environment:t,integrationPointer:i,formData:r,...o?{redirect_uris:[o]}:void 0}),n){const e=(0,C.Kv)(a,{table:s.r9,id:i.id}),r={oauth_authorize_url:n.oauth_authorize_url,oauth_token_url:n.oauth_token_url,client_id:n.client_id,client_secret:n.client_secret,scopes:n.scopes||null,deletion_url:n.deletion_url||null},o="developerIntegrationActions.updateComplianceIntegration";R.createAndCommit({userAction:o,environment:t,perform:t=>{x.sW({store:e,data:r,transaction:t}),t.postSubmitCallbacks=[e=>{e&&q(e,o,t.spaceId)}]}})}return i}({environment:t,integrationPointer:{id:i.startingRecord.value.id,table:i.startingRecord.table},formData:r}):(0,f.t1)(i)}function P(e){const{environment:t,formData:i}=e,{currentUserRootStore:r}=M.default.state;if(!r)return;const{botStore:a}=v.lz({environment:t,name:i.name,icon:i.icon,userId:r.id,spaceStore:i.space,spaceRole:"none",type:"guest",capabilities:i.capabilities||{read_content:!0,insert_content:!0,update_content:!0,read_user_without_email:!0,read_user_with_email:!0}});return A(t,{id:a.id,table:l.cZ,spaceId:i.space.id}),h.PR(t,{table:l.cZ}),{id:a.id,table:l.cZ,spaceId:i.space.id}}function B(e){const{environment:t,botPointer:i,formData:a}=e,{currentUserRootStore:n}=M.default.state;if(!n)return;const o=(0,C.Kv)(n,i),l=o.getValue(),s=l&&(0,r.hA)(l)?l.capabilities:{read_content:!0,insert_content:!0,update_content:!0,read_user_without_email:!0,read_user_with_email:!0},c={name:a.name,tagline:a.tagline,icon:a.icon,email:a.email,website_url:a.website_url,privacy_policy_url:a.privacy_policy_url,terms_of_use_url:a.terms_of_use_url,template_page_id:a.template_page_id,redirect_uris:a.redirect_uris,capabilities:s,userRootStore:n,developer_name:a.developer_name},p="developerIntegrationActions.integrationId",{performResult:g}=R.createAndCommit({userAction:p,environment:t,perform:e=>{const i=function(e,t,i){const{name:r,tagline:a,icon:n,email:o,website_url:l,privacy_policy_url:s,terms_of_use_url:c,template_page_id:p,redirect_uris:g,capabilities:m,userRootStore:f,developer_name:_}=i,h=Date.now(),v=f.id,y={name:r,parent_table:u.KJ,parent_id:v,created_at:h,created_by_id:v,created_by_table:u.KJ,updated_at:h,updated_by_id:v,updated_by_table:u.KJ,redirect_uris:g,type:"guest",status:"unpublished",info:{tagline:a,icon:n,email:o,website_url:l,privacy_policy_url:s,terms_of_use_url:c,template_page_id:p,developer_name:_},capabilities:m,alive:!0};return x.ae({environment:e,table:d.K2,value:y,transaction:t,inMemoryRecordCache:f.inMemoryRecordCache})}(t,e,c),r=i.id;return x.sW({store:o,data:{integration_id:r,parent_table:u.KJ,parent_id:n.id},transaction:e}),e.postSubmitCallbacks=[t=>{t&&q(t,p,e.spaceId)}],r}}),m={id:g,table:d.K2};return A(t,m),h.PR(t,{table:d.K2,template_id:a.template_page_id}),m}function D(e){const{environment:t,integrationPointer:i,formData:r,hasLinkPreviewCapabilities:a,redirect_uris:o}=e,{currentUserRootStore:l}=M.default.state;if(!l)return;const s=(0,C.Kv)(l,i),u=s.getValue(),g=i.id,m=null==u?void 0:u.info.template_page_id,_=(0,c.I$)(g),v=_?_.allowedBotCapabilities:a?{...r.capabilities,link_preview:!0}:r.capabilities,y=a?"external":"guest",b={name:r.name,redirect_uris:o??r.redirect_uris,capabilities:v,type:y},I=(0,C.Vh)(s,s.pointer,"info"),S=function(e){const{hasLinkPreviewCapabilities:t,integrationId:i,formData:r,currentIntegrationInfo:a}=e;if(t)return function(e){var t;const{integrationId:i,formData:r,currentIntegrationInfo:a}=e,o=(null==a||null===(t=a.original_url_patterns)||void 0===t?void 0:t.filter((e=>{var t;return!0===(null===(t=e.additional_types)||void 0===t?void 0:t.collection)})))??[],l=r.url_matching_and_placeholder.map((e=>{const t=[];for(const i of e.attributes){const e=(0,p.GY)(i);if(!(0,n.nj)(e))return;t.push(e)}return{name:(0,w.X)({patternName:e.name,integrationId:i}),regex:e.regex,attributes:t,sample_urls:e.sampleUrls}})).filter(f.$K),s=r.domain.domainVerifications.filter((e=>"unverified"===e.type)).map((e=>e.domain));return{template_page_id:r.template_page_id,tagline:r.tagline,icon:r.icon,email:r.email,website_url:r.website_url,privacy_policy_url:r.privacy_policy_url,terms_of_use_url:r.terms_of_use_url,developer_name:r.developer_name,unfurl_url:r.unfurl_url,development_url_domains:s,original_url_patterns:[...l,...o],dark_icon:(null==a?void 0:a.dark_icon)??r.icon,accent_color:(null==a?void 0:a.accent_color)??{r:36,g:41,b:47},accent_icon:(null==a?void 0:a.accent_icon)??r.icon}}({integrationId:i,formData:r,currentIntegrationInfo:a});return{tagline:r.tagline,icon:r.icon,email:r.email,website_url:r.website_url,privacy_policy_url:r.privacy_policy_url,terms_of_use_url:r.terms_of_use_url,template_page_id:r.template_page_id,developer_name:r.developer_name}}({hasLinkPreviewCapabilities:a,integrationId:g,formData:r,currentIntegrationInfo:I.getValue()}),j="developerIntegrationActions.updateIntegration";R.createAndCommit({userAction:j,environment:t,perform:e=>{x.sW({store:s,data:b,transaction:e}),x.sW({store:I,data:S,transaction:e}),e.postSubmitCallbacks=[t=>{t&&q(t,j,e.spaceId)}]}});const k=r.template_page_id??void 0,F=m!==k;return h.FB(t,{table:d.K2,...F&&{template_id_before:m},...F&&{template_id_after:k}}),i}function U(e){const{environment:t,integrationId:i,allVerifiedDomains:r,domainToRemove:a}=e,{currentUserRootStore:n}=M.default.state;if(!n)return;const o=(0,C.Kv)(n,{table:d.K2,id:i}),l=(0,C.Vh)(o,o.pointer,"info"),s="developerIntegrationActions.removeVerifiedDomain";R.createAndCommit({userAction:s,environment:t,perform:e=>{x.sW({store:l,data:{original_url_domains:r.filter((e=>e!==a))},transaction:e}),e.postSubmitCallbacks=[t=>{t&&q(t,s,e.spaceId)}]}}),h.FB(t,{table:d.K2})}function L(e){F.c4({environment:e,url:o._j.myIntegrations})}function A(e,t){if(k.default.checkGate({gateName:"integration_creation_ui"}))return;const i={[l.cZ]:"internal",[d.K2]:"public"}[t.table],r=(0,m.cj)(t.id);F.c4({environment:e,url:`${o._j.myIntegrations}/${i}/${r}`})}function E(e){const t=(0,m.cj)(e.id);return`${I.default.domainBaseUrl}${o._j.myIntegrations}/public/${t}/lab`}function N(e){const t={oauth_authorize_url:e.external_oauth_authorize_url,oauth_token_url:e.external_oauth_token_url,client_id:e.external_client_id,client_secret:e.external_client_secret,scopes:e.external_oauth_scopes,deletion_url:e.external_deletion_url};return(0,_.Gu)(s.wG,t)?void 0:t}function q(e,t,i){y.showErrorMessage(j.default.formatMessage(S.sY.transactionGenericError)),a.log({level:"error",from:"developerIntegrationActions",type:"createAndCommit",error:(0,g.Ui)(e),data:{userAction:t,spaceId:i}})}function z(e){const{environment:t,formState:i,formData:r}=e;if("create-bot"===i.type)return P({environment:t,formData:r});if("create-guest-integration"===i.type){const e=P({environment:t,formData:r});if(!e)return;return B({environment:t,botPointer:{id:e.id,table:e.table,spaceId:e.spaceId},formData:r})}return(0,f.t1)(i)}},718250:(e,t,i)=>{i.d(t,{K:()=>n,O:()=>a});var r=i(745483);function a(e){r.Z.state.openModals.has(e)||(r.Z.state.openModals.add(e),r.Z.emit())}function n(e){r.Z.state.openModals.has(e)&&(r.Z.state.openModals.delete(e),r.Z.emit())}},3403:(e,t,i)=>{i.d(t,{Z:()=>s});var r=i(667294),a=i(724405),n=i(134232),o=i(568785),l=i(785893);function s(e){let{loadingMessage:t}=e;const i=(0,a.Fg)(),s=(0,n.Z)(!0,400);return(0,l.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:s&&(0,l.jsxs)(r.Fragment,{children:[(0,l.jsx)(o.Z,{}),t&&(0,l.jsx)("div",{style:{marginLeft:8,color:i.text.secondary},children:t})]})})}},531850:(e,t,i)=>{i.d(t,{Z:()=>g});var r=i(667294),a=i(724405),n=i(237240),o=i(460709),l=i(223196),s=i(478140),d=i(632163),u=i(953437),c=i(672495),p=i(785893);function g(e){const{value:t}=e,[i,a]=r.useState(!1),n=()=>a(!1);return(0,p.jsx)(u.GI,{popupType:l.k.Popup,alignmentToOrigin:u.GI.Alignment.Start,placementToOrigin:u.GI.Placement.Bottom,originGap:2,sameWidthAsOrigin:!0,open:i,onDismiss:n,render:()=>(0,p.jsx)(f,{...e,value:t,onClose:n}),origin:(0,p.jsx)(m,{...e,value:t,onClick:()=>a(!0)})})}function m(e){const{onClick:t,value:i,renderMenuItem:r}=e,o=(0,a.yK)((e=>({dropdown:{background:e.whiteButtonBackground,border:`1px solid ${e.outlineButtonBorder}`,borderRadius:4,height:32},expandIcon:{height:12,width:12,fill:e.lightIconColor}})),[]);return(0,p.jsx)(p.Fragment,{children:r({item:i,focused:!1,onClick:t,style:o.dropdown,right:(0,n.s)(o.expandIcon)})})}function f(e){const{keyName:t,items:i,value:r,setValue:a,renderMenuItem:n,onClose:l}=e;let u=0;const g=i.map(((e,t)=>(e.id===(null==r?void 0:r.id)&&(u=t),{key:e.id,action:()=>{a(e),l()},render:t=>n({...t,item:e})})));return(0,p.jsx)(s.Z,{menuType:o.og.Popup,children:(0,p.jsx)(d.Z,{type:d.i.Vertical,initialFocus:u,sections:[{key:`form-input-section-${t}`,items:g,render:e=>(0,p.jsx)(c.Z,{...e})}]})})}},273848:(e,t,i)=>{i.d(t,{Z:()=>s});i(667294);var r=i(724405),a=i(531701),n=i(137810),o=i(212982),l=i(785893);function s(e){const{label:t,subtitle:i,caption:s,error:d,children:u,field:c,formStateType:p,formFieldValidationSchema:g=o.aP}=e,m=g[c].requiredBy[p],f=(0,r.yK)((()=>({wrapper:{display:"flex"},label:{fontSize:15,fontWeight:n.Z.fontWeight.medium,color:a.ZP.frontTextMedium},required:{color:a.ZP.red,marginLeft:2},subtitle:{fontSize:15,color:a.ZP.frontTextLight},caption:{fontSize:15,color:a.ZP.frontTextLight},error:{marginTop:4,fontSize:15,color:a.ZP.frontRed},field:{display:"grid",gridTemplateColumns:"1fr",gap:6,marginBottom:32}})),[]);return(0,l.jsxs)("div",{style:f.field,children:[(0,l.jsxs)("header",{style:f.wrapper,children:[(0,l.jsx)("div",{style:f.label,children:t}),m&&(0,l.jsx)("div",{style:f.required,children:"*"})]}),s&&(0,l.jsx)("div",{style:f.caption,children:s}),u,i&&(0,l.jsx)("div",{style:f.subtitle,children:i}),d&&(0,l.jsx)("div",{style:f.error,children:d})]})}},879500:(e,t,i)=>{i.d(t,{T:()=>u,e:()=>g});var r=i(667294),a=i(886628),n=i(724405),o=i(137810),l=i(212982),s=i(489728),d=i(785893);function u(e){const{supportedPages:t,selectedPage:i,setSelectedPage:r,integrationFormStore:n}=e,o=(0,a.VK)((()=>null==n?void 0:n.getState().type),[n]),s=i||t[0],u=e=>{if(!(0,l.mP)(e))return;const t=(0,l._R)(o);s!==e&&t&&(null==n||n.updateRecordTypeOnSwitch(t)),r&&r(e)};return(0,d.jsx)("div",{style:_,children:t.map((e=>{const t=function(e,t,i){if(e!==t||!i)return!1;const r="linkPreview"===e&&"update-guest-integration"!==i;return"distribution"===e&&"update-bot"!==i||r}(s,e,o);return(0,d.jsxs)("div",{children:[(0,d.jsx)(p,{highlightedSelection:s,currentSelection:{key:l.vb[e].key,title:l.vb[e].title},handleOnClick:u}),t&&(0,d.jsx)(c,{currentPage:e,formStateType:o})]},e)}))})}function c(e){const{currentPage:t,formStateType:i}=e,a=l.vb[t].subsections,[o,s]=r.useState(),u=o||a[0].key,c=(0,n.yK)((()=>({sectionContainer:{marginLeft:20}})),[]),g=e=>{if((0,l.mP)(e))return;const t=document.getElementById((0,l.bK)(e));t&&(t.scrollIntoView(),s(e))};return(0,d.jsx)("div",{style:c.sectionContainer,children:a.map((e=>(0,d.jsx)(p,{currentSelection:e,highlightedSelection:u,handleOnClick:g,formStateType:i},e.key)))})}function p(e){const{currentSelection:{key:t,title:i},highlightedSelection:r,handleOnClick:a,formStateType:l}=e,u="create-third-party-external-integration"===l&&"unfurling"===t,c=(0,n.yK)((e=>({sidebarButton:{...f,color:e.sidebarTextColor,...r===t&&{color:e.regularTextColor,fontWeight:o.Z.fontWeight.medium}}})),[t,r]);return(0,d.jsx)(s.Z,{style:c.sidebarButton,onClick:()=>a(t),disabled:u,disabledFeedback:!0,children:i})}function g(e){const{section:t}=e,{title:i,subtitle:r,key:a}=t,s=(0,n.yK)((e=>({titleStyle:{...m},subtitleStyle:{fontWeight:o.Z.fontWeight.regular,fontSize:15,color:e.lightTextColor}})),[]);return(0,d.jsxs)("div",{style:s.titleStyle,id:(0,l.bK)(a),children:[i,r&&(0,d.jsx)("div",{style:s.subtitleStyle,children:r})]})}const m={fontSize:30,marginTop:24,marginBottom:24,fontWeight:o.Z.fontWeight.bold},f={fontSize:15,height:28,marginTop:4,width:"100%"},_={display:"grid",gridTemplate:"none | auto | auto",marginTop:24,position:"sticky",top:16}},229823:(e,t,i)=>{i.d(t,{Z:()=>u});i(667294);var r=i(800480),a=i(825278),n=i(709291),o=i(376067),l=i(843250),s=i(598167),d=i(785893);function u(){const e=(0,r.O7)();return(0,d.jsx)(s.Z,{className:l.wG0,title:(0,d.jsx)(n.FormattedMessage,{id:"developerIntegrationNotFound.title.label",defaultMessage:"Not Found"}),subtitle:(0,d.jsx)(n.FormattedMessage,{id:"developerIntegrationNotFound.subtitle.label",defaultMessage:"This integration doesn't exist."}),onNavigateBack:()=>o.A1(e),icon:(0,a.H)({width:98,height:98}),sideContent:null,children:null})}},689614:(e,t,i)=>{i.d(t,{A_:()=>Le,p_:()=>Ae,BG:()=>Be,ZY:()=>Pe,ZP:()=>Re});var r=i(667294),a=i(313991),n=i(800480),o=i(886628),l=i(724405),s=i(984619),d=i(143169),u=i(747453),c=i(74446),p=i(145953),g=i(89101),m=i(244312),f=i(815047),_=i(709291),h=i(531701),v=i(653965),y=i(401898),b=i(137810),x=i(454642),I=i(800893),S=i(376067),w=i(212982),j=i(465270),M=i(433929),k=i(918514),C=i(548779),F=i(825464),R=i(80444),Z=i(206258),T=i(164921),V=i(552275),P=i(260458),B=i(374194),D=i(632163),U=i(489728),L=i(672495),A=i(526388),E=i(531850),N=i(353471),q=i(634406),z=i(568785),O=i(863296),K=i(81865),W=i(785893);function H(e){const{value:t,setValue:i,setError:a}=e,o=(0,n.O7)(),[l,s]=r.useState(!1);return(0,W.jsxs)(W.Fragment,{children:[t&&(0,W.jsx)(K.Z,{url:t,isAuthenticated:!1,stripGoogleIconQuery:!0,width:90,render:(e,t)=>(0,W.jsx)("div",{style:{width:90,height:90},children:(0,W.jsx)(q.Z,{src:t,style:{width:90,height:90,objectFit:"cover",borderRadius:4}})})}),(0,W.jsxs)(O.Z,{isLarge:!0,style:{width:"fit-content",backgroundColor:"white"},onClick:()=>{N.cR({environment:o,onStart:()=>s(!0),bucket:"public",onError:e=>{a(e.message),s(!1)},onComplete:e=>{i(e[0]),s(!1)},accept:"image/*"})},children:[(0,W.jsx)(_.FormattedMessage,{id:"formInputIcon.uploadButton.label",defaultMessage:"Upload image"}),l&&(0,W.jsx)(z.Z,{style:{marginLeft:4}})]})]})}var $=i(273848),G=i(937612),J=i(491996),Y=i(138381),Q=i(474181),X=i(95477),ee=i(460709),te=i(223196),ie=i(478140),re=i(953437),ae=i(685567),ne=i(100719);function oe(e){const{currentValue:t,setNewValue:i,typeaheadTitle:a,style:n}=e,o=t||[],[l,d]=r.useState(""),u=()=>d("");return(0,W.jsx)(re.ZP,{popupType:te.k.Popup,sameWidthAsOrigin:!0,open:l.length>0,onDismiss:u,origin:(0,W.jsx)(ne.Z,{style:{background:h.ZP.white,minHeight:32,fontSize:15},placeholder:"",value:l,onChange:e=>d(e.target.value),tokens:o.map(((e,t)=>(0,W.jsx)(ae.Z,{format:s.lo.Medium,showRemoveButton:!0,isSingle:!1,shouldWrap:!0,value:e,style:n,onClickRemove:()=>{i(o.filter((t=>t!==e)))}},`${e}-${t}`))),onRemoveLastToken:()=>{o.length>0&&i(o.slice(0,o.length-1))}}),render:()=>{const e=l.trim(),t=(0,Q.ue)(X.default.domainBaseUrl,e).map((e=>({key:e,render:t=>(0,W.jsx)(V.Z,{...t,title:e}),action:()=>{u(),i([...o,e])}})));return(0,W.jsx)(ie.Z,{menuType:ee.og.Popup,children:(0,W.jsx)(D.Z,{type:D.i.Vertical,initialFocus:0,sections:[{key:"valid-url-suggestion",items:t,render:e=>(0,W.jsx)(L.Z,{...e,title:a})}]})})}})}function le(e){const{currentRule:t,onUpdate:i,shouldShowDelete:a,onDelete:n,onError:o}=e,{name:l,regex:s,attributes:d,sampleUrls:u}=t,[c,p]=r.useState(JSON.stringify(d,null,2));return(0,W.jsxs)("div",{style:{marginBottom:24},children:[(0,W.jsxs)("label",{children:[(0,W.jsx)("div",{style:{fontSize:15,fontWeight:b.Z.fontWeight.regular,color:h.ZP.frontTextMedium},children:(0,W.jsx)(_.FormattedMessage,{id:"developerIntegrationForm.regexRule.name.label",defaultMessage:"Rule Name"})}),(0,W.jsx)(B.Z,{inputClassName:l,style:{background:h.ZP.white,height:32,fontSize:15},value:l,onChange:e=>{i({...t,name:e.target.value})},right:a&&(0,W.jsx)(se,{onDelete:n})})]}),(0,W.jsxs)("label",{children:[(0,W.jsx)("div",{style:{fontSize:15,fontWeight:b.Z.fontWeight.regular,color:h.ZP.frontTextMedium},children:(0,W.jsx)(_.FormattedMessage,{id:"developerIntegrationForm.sampleUrls.label",defaultMessage:"Sample URLs"})}),(0,W.jsx)(oe,{currentValue:u,setNewValue:e=>{i({...t,sampleUrls:e})},style:{color:h.ZP.frontTextMedium},setErrorValue:e=>o(e),typeaheadTitle:(0,W.jsx)(_.FormattedMessage,{id:"developerIntegrationsForm.urlsInput.typePrompt",defaultMessage:"Type or paste a url…"})})]}),(0,W.jsxs)("label",{children:[(0,W.jsx)("div",{style:{fontSize:15,fontWeight:b.Z.fontWeight.regular,color:h.ZP.frontTextMedium},children:(0,W.jsx)(_.FormattedMessage,{id:"developerIntegrationForm.regexRule.pattern.label",defaultMessage:"Pattern"})}),(0,W.jsx)(B.Z,{style:{background:h.ZP.white,fontSize:15},autosize:!0,textarea:!0,value:s,onChange:e=>{i({...t,regex:e.target.value})}})]}),(0,W.jsxs)("label",{children:[(0,W.jsx)("div",{style:{fontSize:15,fontWeight:b.Z.fontWeight.regular,color:h.ZP.frontTextMedium},children:(0,W.jsx)(_.FormattedMessage,{id:"developerIntegrationForm.regexRule.attributes.label",defaultMessage:"Attributes"})}),(0,W.jsx)(B.Z,{format:B.B.ExtraLarge,style:{backgroundColor:h.ZP.white},inputStyle:{fontSize:14,lineHeight:"18px",height:200,fontFamily:b.Z.baseFontFamily.mono,padding:4},textarea:!0,value:c,onChange:e=>{const r=e.target.value;p(r);const a=(0,J.Jv)(r);void 0===a?o((0,W.jsx)(_.FormattedMessage,{id:"developerIntegrationForm.jsonEditor.error",defaultMessage:"{value} attributes has invalid JSON.",values:{value:l}})):i({...t,attributes:a})}})]})]})}function se(e){let{onDelete:t}=e;return(0,W.jsx)(T.Z,{style:{padding:4,borderRadius:3},onClick:()=>{Y.Z.setState({open:!0,isDestructive:!1,isWarning:!0,title:(0,W.jsx)(_.FormattedMessage,{id:"developerIntegrationFormRegexRule.deletionModal.title",defaultMessage:"Are you sure you want to delete this regex pattern rule?"}),message:(0,W.jsx)(_.FormattedMessage,{id:"developerIntegrationFormRegexRule.deletionModal.message",defaultMessage:"Changes will not be saved until you submit the form."}),confirmationMessage:(0,W.jsx)(_.FormattedMessage,{id:"developerIntegrationFormRegexRule.deletionModal.confirm",defaultMessage:"Delete"}),onConfirm:()=>{t()}})},children:(0,G.y)({width:15,height:15})})}var de=i(879500),ue=i(731278),ce=i(776798);function pe(e,t){const{spaceStore:i,...r}=e,a=(0,n.O7)(),l=(0,o.VK)((()=>i&&(0,C.Wd)(a,i)),[a,i]),s=(0,o.VK)((()=>i&&(0,C.rn)(a,i)),[a,i]);return(0,W.jsx)(V.Z,{...r,ref:t,title:i&&(0,W.jsx)(ce.Z,{store:i}),icon:i&&(0,W.jsx)(ue.Z,{disabled:!0,icon:l,title:s,isEmptyPage:!1,size:19})})}const ge=r.forwardRef(pe);var me=i(177420),fe=i(757549),_e=i(833954);function he(e){const{secret:t,secretName:i,onCopy:r,actionButtons:n}=e;return(0,W.jsx)(B.Z,{type:t?"text":"password",disabled:!0,style:{fontFamily:b.Z.getCompositeFontFamily(a.SP).mono,color:h.ZP.frontTextMedium},inputStyle:t?{cursor:"text"}:void 0,value:t||" ".repeat(40),right:(0,W.jsxs)("div",{style:{display:"flex"},children:[(0,W.jsx)("div",{style:{width:30,marginLeft:-30,height:24,backgroundImage:"linear-gradient(to left, #f7f7f3 20%, rgba(255, 255, 255, 0) 100%)",zIndex:1}}),t?(0,W.jsx)(ve,{onCopy:r,secret:t,secretName:i}):n]})})}function ve(e){const{secretName:t,secret:i,onCopy:a}=e,o=(0,n.O7)(),[l,s]=r.useState(!1),d=r.useCallback((()=>{I.RD({environment:o,stringValue:i,copiedMessage:I.tq.copiedToClipboard}),a()}),[o,a,i]),u=l?(0,W.jsx)(_.FormattedMessage,{defaultMessage:"{secretName} copied",id:"formSecretShow.secretCopied.tooltip",values:{secretName:t}}):(0,W.jsx)(_.FormattedMessage,{defaultMessage:"Copy {secretName}",id:"formSecretShow.copySecret.tooltip",values:{secretName:t}});return(0,W.jsx)(A.Z,{placement:F.u.Top,renderTooltip:()=>u,render:e=>(0,W.jsx)(T.Z,{onClick:e=>{e.preventDefault(),s(!0),setTimeout((()=>{s(!1)}),1500),d()},...e,style:{...ye.button,color:l?h.ZP.mediumTextColor:h.ZP.blue},children:l?(0,W.jsx)(_.FormattedMessage,{id:"formSecretShow.copied.label",defaultMessage:"Copied"}):(0,W.jsx)(_.FormattedMessage,{id:"formSecretShow.copySecret.label",defaultMessage:"Copy"})})})}const ye={button:{display:"inline-flex",alignItems:"center",fontFamily:b.Z.getCompositeFontFamily(a.SP).sans,borderRadius:4,padding:"0 6px",height:24,color:h.ZP.blue}};function be(e){const{onError:t,bot:i}=e,a=(0,n.O7)(),o=(0,_.useIntl)(),l=i.id,[s,d]=r.useState(),u=r.useCallback((async()=>{const e=await x.getBotToken(a,{botId:l});"success"===e.type?(fe.Cm(a,{table:me.cZ}),d(e.data.token)):t((0,_e.wf)(o,e)??"Error fetching bot token.")}),[a,l,t,o]),c=r.useCallback((async()=>{const e=await x.revokeBotToken(a,{botId:l});return"success"===e.type?{success:!0}:(t((0,_e.wf)(o,e)??"Error revoking bot token."),{success:!1})}),[a,l,t,o]);return(0,W.jsx)(he,{secret:s,secretName:(0,W.jsx)(_.FormattedMessage,{id:"developerIntegrationForm.botToken.secretName",defaultMessage:"token"}),onCopy:()=>{fe.IV(a,{table:me.cZ,from:"developer-integrations-view"})},actionButtons:(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(T.Z,{onClick:()=>{!function(e){const{onConfirm:t}=e;Y.Z.setState({isDestructive:!1,isWarning:!1,open:!0,onConfirm:t,title:(0,W.jsx)(_.FormattedMessage,{id:"developerIntegrationForm.refreshBotToken.confirmationModal.title",defaultMessage:"Refresh token?"}),message:(0,W.jsx)(_.FormattedMessage,{id:"developerIntegrationForm.refreshBotToken.confirmationModal.message",defaultMessage:"Refreshing will revoke the existing token and generate a new one. Make sure you’re storing the token securely."}),confirmationMessage:(0,W.jsx)(_.FormattedMessage,{id:"developerIntegrationForm.refreshBotToken.confirmationModal.confirm",defaultMessage:"Continue"})})}({onConfirm:async()=>{(await c()).success&&await u()}})},style:xe.button,children:(0,W.jsx)(_.FormattedMessage,{id:"developerIntegrationShotBotToken.refreshSecret.label",defaultMessage:"Refresh"})}),(0,W.jsx)(T.Z,{onClick:()=>{u()},style:xe.button,children:(0,W.jsx)(_.FormattedMessage,{id:"developerIntegrationShotBotToken.showSecret.label",defaultMessage:"Show"})})]})})}const xe={button:{display:"inline-flex",alignItems:"center",fontFamily:b.Z.getCompositeFontFamily(a.SP).sans,borderRadius:4,padding:"0 6px",height:24,color:h.ZP.blue}};var Ie=i(509844);function Se(e){const{onError:t,integration:i}=e,a=(0,n.O7)(),l=(0,_.useIntl)(),[s,d]=r.useState(),u=i.id,c=i.info.has_viewed_secret,p=(0,o.VK)((()=>R.default.state.currentUserStore),[]),g=p?(0,Z.Kv)(p,{id:u,table:Ie.K2}):void 0,m=r.useCallback((async()=>{if(!g)return;const e=await x.getIntegrationSecret(a,{integrationId:u});"success"===e.type?(S.bO({environment:a,integrationStore:g}),fe.Cm(a,{table:Ie.K2}),d(e.data.secret)):t((0,_e.wf)(l,e)??"Error fetching client secret.")}),[a,g,u,t,l]);return(0,W.jsx)(he,{secret:s,secretName:(0,W.jsx)(_.FormattedMessage,{id:"developerIntegrationForm.integrationSecret.secretName",defaultMessage:"secret"}),onCopy:()=>{fe.IV(a,{table:Ie.K2,from:"developer-integrations-view"})},actionButtons:(0,W.jsx)(we,{onClick:()=>{!function(e){const{hasSecretBeenViewed:t,onConfirm:i}=e,r=t?(0,W.jsx)(_.FormattedMessage,{id:"developerIntegrationForm.clientSecret.confirmationModal.refreshTitle",defaultMessage:"Refresh OAuth client secret?"}):(0,W.jsx)(_.FormattedMessage,{id:"developerIntegrationForm.clientSecret.confirmationModal.showTitle",defaultMessage:"Show OAuth client secret?"}),a=t?(0,W.jsx)(_.FormattedMessage,{id:"developerIntegrationForm.clientSecret.confirmationModal.alreadyViewedMessage",defaultMessage:"You’ve already viewed the client secret. Viewing again will revoke and generate a new one. Make sure you’re storing the secret securely."}):(0,W.jsx)(_.FormattedMessage,{id:"developerIntegrationForm.clientSecret.confirmationModal.displayOnceMessage",defaultMessage:"This client secret will only be displayed once and cannot be viewed again. Make sure you’re storing the secret securely."});Y.Z.setState({isDestructive:!1,isWarning:!1,open:!0,onConfirm:i,title:r,message:a,confirmationMessage:(0,W.jsx)(_.FormattedMessage,{id:"developerIntegrationForm.clientSecret.confirmationModal.confirm",defaultMessage:"Continue"})})}({hasSecretBeenViewed:c,onConfirm:()=>{m()}})},hasSecretBeenViewed:c})})}function we(e){const{onClick:t,hasSecretBeenViewed:i}=e;return(0,W.jsx)(T.Z,{onClick:t,style:je.button,children:i?(0,W.jsx)(_.FormattedMessage,{id:"formSecretShow.refreshSecret.label",defaultMessage:"Refresh"}):(0,W.jsx)(_.FormattedMessage,{id:"formSecretShow.showSecret.label",defaultMessage:"Show"})})}const je={button:{display:"inline-flex",alignItems:"center",fontFamily:b.Z.getCompositeFontFamily(a.SP).sans,borderRadius:4,padding:"0 6px",height:24,color:h.ZP.blue}};var Me=i(786249),ke=i(942402),Ce=i(346978),Fe=i(705478);function Re(e){const{integrationFormStore:t,formData:i,setFormData:a,pageSections:n,fieldDetails:l}=e,s=(0,o.VK)((()=>t.getState()),[t]),{type:d}=s,u=n.map((e=>({...e,fields:e.fields.filter((e=>{const{supportedBy:t}=w.aP[e];return t[d]}))})));return(0,W.jsx)(W.Fragment,{children:u.map((e=>(0,W.jsxs)(r.Fragment,{children:[e.fields.length>0&&(0,W.jsx)("div",{style:{marginBottom:24},children:(0,W.jsx)(de.e,{section:e})},e.key),e.fields.map((e=>(0,W.jsx)(Ze,{formData:i,setFormData:a,formStoreState:s,formFieldDetail:l,field:e},e)))]},e.key)))})}function Ze(e){const{formData:t,setFormData:i,formStoreState:r,formFieldDetail:a,field:n}=e,l=(0,o.VK)((()=>R.default.state.currentUserRootStore),[]),s=(0,o.VK)((()=>l?l.getAdminSpaceStores():[]),[l]),{type:d}=r,{label:u,subtitle:c,caption:p}=a[n]??{},g=Te[n];return g?(0,W.jsx)($.Z,{label:u,subtitle:c,caption:p,error:t[n].error,field:n,formStateType:d,children:(0,W.jsx)(g,{autoFocus:Boolean("create-bot"===d&&"name"===n),spaces:s,currentValue:t[n].value,setErrorValue:e=>{i({field:n,error:e})},setNewValue:e=>{i({value:e,field:n})},formStoreState:r})},n):null}const Te={type:function(){return(0,W.jsx)(B.Z,{style:{color:h.ZP.frontTextLight},value:"Internal",disabled:!0})},name:Ve,icon:function(e){const{currentValue:t,setNewValue:i,setErrorValue:r}=e;return(0,W.jsx)(H,{value:t,setValue:i,setError:r})},space:Pe,token:Be,client_id:function(e){const{currentValue:t}=e,i=(0,n.O7)(),[a,o]=r.useState(!1),l=Ne(a);if(!t)return null;const s=a?(0,W.jsx)(_.FormattedMessage,{defaultMessage:"ID copied",id:"developerIntegrationsForm.clientIdCopied.tooltip"}):(0,W.jsx)(_.FormattedMessage,{defaultMessage:"Copy client ID",id:"developerIntegrationsForm.copyClientId.tooltip"});return(0,W.jsx)(B.Z,{type:"text",disabled:!0,style:l.authInput,value:t.value.id,right:(0,W.jsxs)("div",{style:{display:"flex"},children:[(0,W.jsx)("div",{style:l.authInputRight}),(0,W.jsx)(A.Z,{placement:F.u.Top,renderTooltip:()=>s,render:e=>(0,W.jsx)(T.Z,{onClick:e=>{e.preventDefault(),o(!0),setTimeout((()=>{o(!1)}),1500),I.RD({environment:i,stringValue:t.value.id,copiedMessage:I.tq.copiedLinkToClipboard})},...e,style:l.authButton,children:a?(0,W.jsx)(_.FormattedMessage,{id:"developerIntegrationsForm.copiedId.label",defaultMessage:"Copied"}):(0,W.jsx)(_.FormattedMessage,{id:"developerIntegrationsForm.copyId.label",defaultMessage:"Copy"})})})]})})},client_secret:function(e){const{currentValue:t,setErrorValue:i}=e;if(!t)return null;return(0,W.jsx)(Se,{integration:t.value,onError:i})},authorization_url:function(e){const{currentValue:t}=e,i=(0,n.O7)(),[a,o]=r.useState(!1),l=Ne(a);if(!t)return null;const s=a?(0,W.jsx)(_.FormattedMessage,{defaultMessage:"URL copied",id:"developerIntegrationsForm.authUrlCopied.tooltip"}):(0,W.jsx)(_.FormattedMessage,{defaultMessage:"Copy authorization URL",id:"developerIntegrationsForm.authUrlCopy.tooltip"});return(0,W.jsx)(B.Z,{type:"text",disabled:!0,style:l.authInput,value:t,right:(0,W.jsxs)("div",{style:{display:"flex"},children:[(0,W.jsx)("div",{style:l.authInputRight}),(0,W.jsx)(A.Z,{placement:F.u.Top,renderTooltip:()=>s,render:e=>(0,W.jsx)(T.Z,{onClick:e=>{e.preventDefault(),o(!0),setTimeout((()=>{o(!1)}),1500),I.RD({environment:i,stringValue:t,copiedMessage:I.tq.copiedLinkToClipboard})},...e,style:l.authButton,children:a?(0,W.jsx)(_.FormattedMessage,{id:"developerIntegrationsForm.copiedAuthUrl.label",defaultMessage:"Copied"}):(0,W.jsx)(_.FormattedMessage,{id:"developerIntegrationsForm.copyAuthUrl.label",defaultMessage:"Copy"})})})]})})},capabilities:Le,template_url:Ve,redirect_uris:Ae,tagline:Ve,privacy_policy_url:Ve,terms_of_use_url:Ve,email:Ve,developer_name:Ve,website_url:Ve,unfurl_url:Ve,domain:function(e){const{currentValue:t,autoFocus:i,setNewValue:r,formStoreState:a,setErrorValue:o}=e,l=(0,n.O7)(),u=(0,_.useIntl)(),g=Ee();if("update-third-party-external-integration"!==a.type&&"update-first-party-external-integration"!==a.type)return null;const{developmentDomain:f,verifiedDomains:h,domainVerifications:v}=t||{developmentDomain:"",verifiedDomains:[],domainVerifications:[]},b=h.map((e=>({domain:e,status:Fe.YF.Success,data:{type:"verified",domain:e}}))),I=Date.now(),w=v.filter(d.AS).sort(((e,t)=>e.createdAt-t.createdAt)).map((e=>({domain:e.domain,status:I>e.expiresAt?Fe.YF.Failure:Fe.YF.Pending,data:{...e,type:I>e.expiresAt?"invalid":"unverified"}}))),j=a.startingRecord.value.id;async function M(){const e=await x.getIntegrationDomainVerifications(l,{integrationId:j});if("success"===e.type){const t=p.PF.create(e.data.recordMap),i=c.mF.fromRecordMapWithRole(t),a=e.data.verificationIds.map((e=>i({table:m.Jd,id:e}))).filter(y.$K).map(d.Hs).filter((e=>"verified"!==e.type));r({developmentDomain:f,verifiedDomains:h,domainVerifications:a})}}if("update-third-party-external-integration"===a.type)return(0,W.jsx)(Me.ZP,{domains:[...b,...w],domainVerificationStore:a.domainVerificationStore,verificationType:"integration",verificationTargetId:j,refreshDomains:M,onRemoveDomain:async function(e){if("verified"!==e.type){const t=await x.deleteDomainVerificationCode(l,{id:e.id});"failed"===t.type&&o(t.error.message),await M()}else S.QO({environment:l,integrationId:j,allVerifiedDomains:h,domainToRemove:e.domain})}});return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("div",{style:g.domainInputTitle,children:(0,W.jsx)(_.FormattedMessage,{id:"developerIntegrationForm.domain.developmentDomain.label",defaultMessage:"Development domain"})}),(0,W.jsx)(B.Z,{autoFocus:i,style:g.basicTextInput,value:f,onChange:e=>r({verifiedDomains:h,domainVerifications:v,developmentDomain:e.target.value})}),(0,W.jsx)("div",{style:g.domainInputTitle,children:(0,W.jsx)(_.FormattedMessage,{id:"developerIntegrationForm.domain.verifiedDomains.label",defaultMessage:"Verified domain(s)"})}),(0,W.jsx)(ne.Z,{placeholder:u.formatMessage({id:"domainVerificationInput.domainInput.placeholder",defaultMessage:"No domains configured"}),value:"",onChange:()=>{},onRemoveLastToken:()=>{},readOnly:!0,tokens:b.map((e=>{let{domain:t,status:i}=e;return(0,W.jsx)(Fe.ZP,{status:i,showRemoveButton:!1,isSingle:!1,format:s.lo.Medium,value:t},t)}))})]})},url_matching_and_placeholder:function(e){const{currentValue:t,setNewValue:i,setErrorValue:r}=e,a=Ee();return(0,W.jsxs)(W.Fragment,{children:[null==t?void 0:t.map(((e,a)=>(0,W.jsx)(le,{currentRule:e,shouldShowDelete:0!==a,onUpdate:e=>{i([...t.slice(0,a),e,...t.slice(a+1)])},onDelete:()=>{0!==a&&i([...t.slice(0,a),...t.slice(a+1)])},onError:r},`regex-rule-${a}`))),(0,W.jsxs)(U.Z,{style:a.plainButton,isBlue:!0,onClick:e=>{e.preventDefault(),i([...t??[],j.VH])},children:[(0,u.R)(a.icon),(0,W.jsx)(_.FormattedMessage,{id:"developerIntegrationsForm.regexPatternRulesInput.addMore.label",defaultMessage:"Add another rule"})]})]})},external_oauth_authorize_url:Ve,external_oauth_token_url:Ve,external_client_id:Ve,external_client_secret:function(e){const{autoFocus:t,currentValue:i,setNewValue:r}=e,a=Ee();return(0,W.jsx)(B.Z,{type:"password",autoFocus:t,style:a.basicTextInput,value:i,onChange:e=>r(e.target.value)})},external_oauth_scopes:Ve,external_deletion_url:Ve};function Ve(e){const{autoFocus:t,currentValue:i,setNewValue:r}=e,a=Ee();return(0,W.jsx)(B.Z,{autoFocus:t,style:a.basicTextInput,value:i,onChange:e=>r(e.target.value)})}function Pe(e){const{spaces:t,currentValue:i,setNewValue:a,setErrorValue:n}=e,[o,l]=r.useState(!1);return(0,r.useEffect)((()=>{o||0!==t.length||(l(!0),n((0,W.jsx)(_.FormattedMessage,{id:"developerIntegrationsForm.spacePicker.missingSpacesError",defaultMessage:"You are not an owner of any workspaces. Please <linktonotion>create a new one</linktonotion> or ask your workspace owner to update your access.",values:{linktonotion:e=>(0,W.jsx)(ke.Z,{href:(0,k.UY)("guides.joinOrCreateWorkspace"),children:e})}})))}),[t,n,o]),(0,W.jsx)(E.Z,{keyName:"space",items:t,value:i,setValue:a,renderMenuItem:e=>(0,W.jsx)(ge,{...e,spaceStore:e.item})})}function Be(e){const t=(0,n.O7)(),{currentValue:i,setErrorValue:r}=e,a=(0,o.VK)((()=>R.default.state.currentUserStore),[]),l=(0,o.VK)((()=>{if(!a||!i)return;if(i.value.parent_table!==f.bx)return;const e=Z.H2.createChildStore(a,{id:i.value.parent_id,table:i.value.parent_table});return(0,C.rn)(t,e)}),[a,i,t]);return i?(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(be,{bot:i.value,onError:r}),l&&(0,W.jsx)("div",{style:{fontSize:15,color:h.ZP.frontTextLight},children:(0,W.jsx)(_.FormattedMessage,{id:"developerIntegrationForm.botToken.subtitle",defaultMessage:"Only works with the <bold>{spaceName}</bold> workspace. To change workspace, <developertermslink>create another integration</developertermslink>.",values:{spaceName:l,bold:e=>(0,W.jsx)("b",{children:e}),developertermslink:e=>(0,W.jsx)(ke.Z,{href:g._j.myIntegrations,children:e})}})})]}):null}const De=(0,_.defineMessages)({read_comment_title:{id:"developerIntegrationForm.capabilities.read_comment.title",defaultMessage:"Read comments"},read_comment_caption:{id:"developerIntegrationForm.capabilities.read_comment.caption",defaultMessage:"Read comments on blocks and pages."},insert_comment_title:{id:"developerIntegrationForm.capabilities.insert_comment.title",defaultMessage:"Insert comments"},insert_comment_caption:{id:"developerIntegrationForm.capabilities.insert_comment.caption",defaultMessage:"Create comments on blocks and pages."},comment_capabilities_title:{id:"developerIntegrationForm.capabilities.comment_capabilities.title",defaultMessage:"Comment Capabilities"},content_capabilities_title:{id:"developerIntegrationForm.capabilities.content_capabilities.headerTitle",defaultMessage:"Content Capabilities"},user_capabilities_title:{id:"developerIntegrationForm.capabilities.user_capabilities.headerTitle",defaultMessage:"User Capabilities"},read_content_title:{id:"developerIntegrationForm.capabilities.read_content.title",defaultMessage:"Read content"},read_content_caption:{id:"developerIntegrationForm.capabilities.read_content.caption",defaultMessage:"Request to read content."},update_content_title:{id:"developerIntegrationForm.capabilities.update_content.title",defaultMessage:"Update content"},update_content_caption:{id:"developerIntegrationForm.capabilities.update_content.caption",defaultMessage:"Request to update existing content."},insert_content_title:{id:"developerIntegrationForm.capabilities.insert_content.title",defaultMessage:"Insert content"},insert_content_caption:{id:"developerIntegrationForm.capabilities.insert_content.caption",defaultMessage:"Request to create new content."},no_user_capabilities_title:{id:"developerIntegrationForm.capabilities.no_user_capabilities.title",defaultMessage:"No user information"},no_user_capabilities_caption:{id:"developerIntegrationForm.capabilities.no_user_capabilities.caption",defaultMessage:"Do not request any user information access."},read_user_without_email_title:{id:"developerIntegrationForm.capabilities.read_user_without_email.title",defaultMessage:"Read user information without email addresses"},read_user_without_email_caption:{id:"developerIntegrationForm.capabilities.read_user_without_email.caption",defaultMessage:"Request access to user information, not including email addresses."},read_user_with_email_title:{id:"developerIntegrationForm.capabilities.read_user_with_email.title",defaultMessage:"Read user information including email addresses"},read_user_with_email_caption:{id:"developerIntegrationForm.capabilities.read_user_with_email.caption",defaultMessage:"Request access to user information, including email addresses."}});function Ue(e,t,i){return{key:e,action:()=>null,render:a=>{const n=r=>{r.preventDefault(),i({...t,[e]:!t[e]})};return(0,r.createElement)(V.Z,{...a,title:M.default.formatMessage(De[`${e}_title`]),caption:M.default.formatMessage(De[`${e}_caption`]),icon:(0,W.jsx)(P.Z,{checked:Boolean(t[e]),size:16,onClick:n}),key:e,onClick:n})}}}function Le(e){const{setNewValue:t,currentValue:i}=e,a={...w.fP,...i},n={no_user_capabilities:!1===a.read_user_without_email&&!1===a.read_user_with_email,read_user_without_email:!0===a.read_user_without_email&&!1===a.read_user_with_email,read_user_with_email:!0===a.read_user_with_email};return(0,W.jsx)(D.Z,{type:D.i.Vertical,initialFocus:void 0,sections:v.oA([{key:"content_capabilities",items:["read_content","update_content","insert_content"].map((e=>Ue(e,a,t))),render:e=>(0,W.jsx)(L.Z,{...e,title:M.default.formatMessage(De.content_capabilities_title)})},{key:"comment_capabilities",items:["read_comment","insert_comment"].map((e=>Ue(e,a,t))),render:e=>(0,W.jsx)(L.Z,{...e,title:M.default.formatMessage(De.comment_capabilities_title)})},{key:"user_capabilities",items:["no_user_capabilities","read_user_without_email","read_user_with_email"].map((e=>function(e,t,i,a){return{key:e,action:()=>null,render:n=>(0,r.createElement)(V.Z,{...n,title:M.default.formatMessage(De[`${e}_title`]),caption:M.default.formatMessage(De[`${e}_caption`]),icon:(0,W.jsx)(Ce.Z,{isSelected:t}),key:e,onClick:t=>{t.preventDefault(),a({...i,read_user_without_email:"no_user_capabilities"!==e,read_user_with_email:"read_user_with_email"===e})}})}}(e,n[e],a,t))),render:e=>(0,W.jsx)(L.Z,{...e,title:M.default.formatMessage(De.user_capabilities_title)})}])})}function Ae(e){return(0,W.jsx)(oe,{...e,style:{color:h.ZP.frontTextMedium},typeaheadTitle:(0,W.jsx)(_.FormattedMessage,{id:"developerIntegrationsForm.redirectUri.typePrompt",defaultMessage:"Type a redirect uri…"})})}function Ee(){return(0,l.yK)((()=>({basicTextInput:{background:h.ZP.white,height:32,fontSize:15},domainInputTitle:{marginTop:15,fontSize:15,fontWeight:b.Z.fontWeight.regular,color:h.ZP.frontTextMedium},plainButton:{display:"flex",alignItems:"center"},icon:{width:15,height:15}})),[])}function Ne(e){return(0,l.yK)((()=>({authInput:{color:h.ZP.frontTextMedium,fontFamily:b.Z.getCompositeFontFamily(a.SP).mono},authInputRight:{width:30,marginLeft:-30,height:24,backgroundImage:"linear-gradient(to left, #f7f7f3 20%, rgba(255, 255, 255, 0) 100%)",zIndex:1},authButton:{display:"inline-flex",alignItems:"center",borderRadius:4,padding:"0 6px",height:24,color:e?h.ZP.frontTextMedium:h.ZP.blue,fontFamily:b.Z.getCompositeFontFamily(a.SP).sans}})),[e])}},950526:(e,t,i)=>{i.d(t,{Hs:()=>w,RV:()=>M,ZP:()=>S});var r=i(667294),a=i(800480),n=i(886628),o=i(698519),l=i(519889),s=i(307928),d=i(401898),u=i(970782),c=i(433929),p=i(460709),g=i(80444),m=i(164921),f=i(552275),_=i(478140),h=i(632163),v=i(953437),y=i(672495),b=i(164369),x=i(45653),I=i(785893);function S(e){let{onChange:t}=e;const i=(0,a.O7)(),[o,s]=(0,r.useState)(!1),u=()=>s(!1),c=(0,n.VK)((()=>g.default.state.currentUserStore),[]),p=(0,n.VK)((()=>c?i.currentUser.loggedInUserIds.map((e=>c.getRecordModel({table:l.KJ,id:e}))).filter(d.$K):[]),[c,i]),m=(0,n.VK)((()=>null==c?void 0:c.getValue()),[c]);return m?(0,I.jsx)(v.ZP,{popupType:v.kQ.Popup,origin:(0,I.jsx)(w,{onClick:()=>s(!0),currentUserValue:m}),render:()=>(0,I.jsx)(j,{users:p,currentUserId:m.id,onChange:t,onClose:u}),placementToOrigin:v.ZP.Placement.Bottom,alignmentToOrigin:v.ZP.Alignment.End,onDismiss:u,open:o}):null}function w(e){const{onClick:t,currentUserValue:i}=e;return(0,I.jsx)("div",{style:{marginLeft:18},children:(0,I.jsx)(m.Z,{onClick:t,style:{borderRadius:"100%"},children:(0,I.jsx)(x.Z,{userValue:i,size:32})})})}function j(e){const t=(0,a.O7)(),{users:i,currentUserId:r,onClose:n,onChange:o}=e;return(0,I.jsx)(_.Z,{menuType:p.og.Popup,children:(0,I.jsx)(h.Z,{type:h.i.Vertical,initialFocus:void 0,sections:[{key:"developer-integration-accounts",items:i.map((e=>({key:e.id,action:async()=>{const i=await u.x({environment:t,newCurrentUserId:e.id});null==o||o(i),n()},render:t=>(0,I.jsx)(M,{...t,user:e,isLoggedIn:e.id===r})}))),render:e=>(0,I.jsx)(y.Z,{...e})}]})})}const M=r.forwardRef((function(e,t){const{user:i,isLoggedIn:r,...a}=e,l=c.default.getIntl(),d=(0,n.VK)((()=>(0,s.Nz)(l,i)),[l,i]),u=(0,n.VK)((()=>i.email),[i]);return(0,I.jsx)(f.Z,{...a,ref:t,title:(0,I.jsx)(b.Z,{className:"notranslate",children:d}),icon:(0,I.jsx)(x.Z,{userValue:i,size:28}),caption:(0,I.jsx)(b.Z,{isSmall:!0,children:u}),right:r&&(0,o.k)({width:12,height:12})})}))},598167:(e,t,i)=>{i.d(t,{Z:()=>T});var r=i(667294),a=i(313991),n=i(841892),o=i(509999),l=i(612392),s=i(89101),d=i(709291),u=i(531701),c=i(137810),p=i(376067),g=i(843250),m=i(434859),f=i(164921),_=i(316354),h=i(489728),v=i(953336),y=i(950526),b=i(886628),x=i(151454),I=i(296902),S=i(138381),w=i(374194),j=i(550506),M=i(785893);function k(){const e=(0,b.VK)((()=>S.Z.state),[]);return(0,M.jsx)(j.Z,{open:e.open,overlayZIndex:x.Wd,onDismiss:()=>{S.Z.reset()},preventHideChildrenWhileOpening:!0,innerStyle:{overflow:"hidden",borderRadius:4,padding:"24px 32px",width:336,fontSize:16,boxShadow:I.Z.frontDialogShadow,background:u.ZP.white},render:()=>(0,M.jsx)(C,{...e})})}function C(e){const[t,i]=r.useState(""),[a,n]=r.useState(!1);if(!e.open)return null;const{title:o,message:l,onConfirm:s}=e,p=i=>{const{deleteIntegrationIfConfirmationInputMatch:r}=i;e.isDestructive&&e.deleteMatchText!==t?n(!0):r&&(s(),S.Z.reset())};return(0,M.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,M.jsx)("div",{style:{fontSize:16,fontWeight:c.Z.fontWeight.semibold},children:o}),(0,M.jsx)("div",{style:{fontSize:14,color:u.ZP.frontTextMedium,margin:"8px 0 16px"},children:l}),e.isDestructive&&(0,M.jsxs)("div",{style:{marginBottom:12},children:[(0,M.jsx)(w.Z,{autoFocus:!0,placeholder:e.deleteMatchText,value:t,onChange:t=>{const r=t.target.value;a&&e.deleteMatchText===r&&n(!1),i(r)},onSubmit:()=>p({deleteIntegrationIfConfirmationInputMatch:!1})}),a&&(0,M.jsx)("div",{style:{marginTop:4,color:u.ZP.frontRed,fontSize:12},children:e.deleteMatchError})]}),(0,M.jsxs)("div",{style:{display:"flex"},children:[(0,M.jsx)(f.Z,{onClick:()=>{S.Z.reset()},style:{...R.button,border:`1px solid ${u.ZP.uiLightBorder}`,marginRight:8,fontSize:15},children:(0,M.jsx)(d.FormattedMessage,{id:"developerIntegration.confirmationModal.cancelLabel",defaultMessage:"Cancel"})}),(0,M.jsx)(F,{onSubmit:()=>p({deleteIntegrationIfConfirmationInputMatch:!0}),isWarning:e.isDestructive||e.isWarning,confirmationMessage:e.confirmationMessage})]})]})}function F(e){const{onSubmit:t,confirmationMessage:i,isWarning:r}=e;return(0,M.jsx)(f.Z,{onClick:t,style:{...R.button,background:r?u.ZP.frontRedButtonBackground:u.ZP.blue,color:u.ZP.white,fontSize:15},hoveredStyle:{backgroundColor:r?u.ZP.frontRedButtonBackgroundHovered:u.ZP.frontBlueButtonHoveredBackground},pressedStyle:{backgroundColor:r?u.ZP.frontRedButtonBackgroundPressed:u.ZP.frontBlueButtonPressedBackground},children:i})}const R={button:{padding:6,borderRadius:4,flex:1,textAlign:"center"}};var Z=i(336360);function T(e){const{className:t,title:i,subtitle:r,onNavigateBack:a,navigateBackMessage:u,children:c,icon:b,sideContent:x,innerContainerStyles:I}=e,S=(0,d.useIntl)();return(0,M.jsx)(Z.Z,{title:S.formatMessage({id:"developerIntegrationsLayout.document.title",defaultMessage:"My integrations | Notion Developers"}),children:(0,M.jsxs)(v.Z,{className:t,style:V.scroller,type:m.Z.Y,children:[(0,M.jsx)(k,{}),(0,M.jsxs)("div",{className:g.rIs,style:V.topBar,children:[(0,M.jsx)("div",{children:(0,M.jsx)(_.Z,{href:s._j.developerPortal,external:!0,children:(0,M.jsx)("img",{src:n.Z.images.integrations.notionDevsLogoGaSvg})})}),(0,M.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,M.jsx)(_.Z,{style:{display:"flex",marginLeft:-6},href:s._j.developerPortal,external:!0,children:(0,M.jsx)(h.Z,{icon:o.J,isSmall:!0,children:"View documentation"})}),(0,M.jsx)(y.ZP,{onChange:e=>{p.A1(e)}})]})]}),(0,M.jsxs)("div",{style:{...V.innerContainer,...I},children:[(0,M.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:80,marginBottom:80},children:[(0,M.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"66%",justifyContent:"center"},children:[(0,M.jsx)(f.Z,{style:{...V.button,...!a&&{display:"none"}},onClick:a,children:(0,M.jsxs)("div",{style:{...V.buttonContent,fontSize:20},children:[(0,l.S)(V.arrowIcon),(0,M.jsx)("div",{style:{marginLeft:12},children:u||(0,M.jsx)(d.FormattedMessage,{id:"developerIntegrationsLayout.backButton.label",defaultMessage:"My integrations"})})]})}),(0,M.jsx)("div",{style:V.header,children:i}),(0,M.jsx)("div",{style:V.subtitle,children:r})]}),(0,M.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"center",flex:1},children:b})]}),x?(0,M.jsxs)("div",{style:V.gridContainer,children:[(0,M.jsx)("div",{style:V.leftColumn,children:x}),(0,M.jsx)("div",{style:V.rightColumn,children:c})]}):c]}),(0,M.jsxs)("footer",{style:V.footerContainer,children:[(0,M.jsxs)("section",{style:V.footerColophon,children:[(0,M.jsx)("h1",{style:V.footerLogo,children:(0,M.jsx)("img",{src:n.Z.images.integrations.notionFooterLogoSvg})}),(0,M.jsx)("h6",{style:V.footerCopy,children:"The all-in-one workspace for your notes, tasks, wikis, and databases."}),(0,M.jsx)("h6",{style:V.footerCopy,children:`©${(new Date).getFullYear()} Notion Labs, Inc.`}),(0,M.jsx)(_.Z,{external:!0,href:s._j.termsAndPrivacy,style:V.footerLink,children:"Terms & Privacy"})]}),(0,M.jsxs)("nav",{style:{...V.footerNav,gridColumnStart:7},children:[(0,M.jsx)("h5",{style:V.footerSectionHeader,children:"Developers"}),(0,M.jsx)(_.Z,{external:!0,href:"https://developers.notion.com/docs",style:V.footerLink,children:"Guides"}),(0,M.jsx)(_.Z,{external:!0,href:"https://developers.notion.com/reference",style:V.footerLink,children:"API Reference"}),(0,M.jsx)(_.Z,{external:!0,href:s._j.myIntegrations,style:V.footerLink,children:"My integrations"}),(0,M.jsx)(_.Z,{external:!0,href:"https://developers.notion.com/page/frequently-asked-questions",style:V.footerLink,children:"FAQs"}),(0,M.jsx)(_.Z,{external:!0,href:s._j.developerTerms,style:V.footerLink,children:"Developer terms"})]}),(0,M.jsxs)("nav",{style:V.footerNav,children:[(0,M.jsx)("h5",{style:V.footerSectionHeader,children:"Notion"}),(0,M.jsx)(_.Z,{external:!0,href:s._j.product,style:V.footerLink,children:"Product"}),(0,M.jsx)(_.Z,{external:!0,href:s._j.teams,style:V.footerLink,children:"Teams"}),(0,M.jsx)(_.Z,{external:!0,href:s._j.enterprise,style:V.footerLink,children:"Enterprise"}),(0,M.jsx)(_.Z,{external:!0,href:s._j.blog,style:V.footerLink,children:"Blog"}),(0,M.jsx)(_.Z,{external:!0,href:s._j.careers,style:V.footerLink,children:"Careers"})]}),(0,M.jsxs)("nav",{style:V.footerNav,children:[(0,M.jsx)("h5",{style:V.footerSectionHeader,children:"Social"}),(0,M.jsx)(_.Z,{external:!0,href:"https://notionup.typeform.com/to/dSurQQp2Q",style:V.footerLink,children:"Developer newsletter"}),(0,M.jsx)(_.Z,{external:!0,href:"http://twitter.com/notionapi",style:V.footerLink,children:"Twitter"})]})]})]})})}const V={footerLink:{color:u.ZP.frontTextMedium,cursor:"pointer",textDecoration:"none",display:"block",marginBottom:4},footerColophon:{gridColumn:"auto/span 3"},footerNav:{gridColumn:"auto/span 2",marginBottom:16},footerLogo:{margin:"0 auto 20px",fontSize:0,display:"block"},footerSectionHeader:{fontFamily:c.Z.getCompositeFontFamily(a.SP).mono,fontWeight:c.Z.fontWeight.medium,margin:"0 auto 8px",marginBottom:"1.1em",fontSize:15},footerCopy:{fontSize:15,fontWeight:c.Z.fontWeight.regular,lineHeight:"1.5em",color:u.ZP.frontTextMedium,margin:"0 auto 8px",marginBottom:"1.1em"},footerContainer:{padding:"70px 30px",alignItems:"flex-start",justifyItems:"flex-start",flex:"1 0 auto",zIndex:999,width:"100%",maxWidth:1160,boxSizing:"border-box",margin:"0 auto",borderTop:`1px solid ${u.ZP.dividerColor}`,display:"grid",gridTemplateColumns:"repeat(12,1fr)",columnGap:16,gap:16},scroller:{height:"100vh",background:u.ZP.frontCreamBackground,padding:"0px 10px"},innerContainer:{margin:"auto",width:914},topBar:{maxWidth:1100,height:60,margin:"0 auto",display:"flex",alignItems:"center",marginTop:13,marginBottom:10,justifyContent:"space-between"},header:{fontWeight:c.Z.fontWeight.bold,fontFamily:c.Z.getCompositeFontFamily(a.SP).sans,fontSize:50,color:u.ZP.frontText,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},subtitle:{fontWeight:c.Z.fontWeight.regular,fontSize:24,color:u.ZP.frontTextMedium,letterSpacing:"0.015em"},button:{display:"inline-flex",color:u.ZP.frontTextMedium,borderRadius:4,padding:6,fontSize:15,width:"fit-content"},buttonContent:{display:"flex",alignItems:"center"},arrowIcon:{width:20,height:20},gridContainer:{display:"grid",gridTemplateColumns:"180px auto",paddingBottom:120,gap:60},leftColumn:{gridColumnStart:1,gridColumnEnd:2},rightColumn:{gridColumnStart:2,gridColumnEnd:3}}},336360:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(667294),a=i(247839);function n(e){return(0,r.useEffect)((()=>{document.title=e.title,a.setWindowTitle(e.title)}),[e.title]),e.children}},212982:(e,t,i)=>{i.d(t,{H:()=>j,Qo:()=>T,Xr:()=>R,Z6:()=>C,_R:()=>N,aP:()=>M,bK:()=>z,fP:()=>V,hl:()=>A,hs:()=>O,m0:()=>k,mP:()=>S,oX:()=>E,sY:()=>x,tm:()=>Z,vb:()=>w,w8:()=>q,x6:()=>U,yb:()=>D});i(757658),i(667294);var r=i(133728),a=i(421202),n=i(815047),o=i(544876),l=i(709291),s=i(653965),d=i(401898),u=i(218265),c=(i(95477),i(281236)),p=i(206258),g=i(691924),m=i(443348),f=i(491996),_=i(465270),h=i(484210),v=i(433929),y=i(918514),b=i(785893);const x=(0,l.defineMessages)({missingValuesError:{id:"developerIntegrationForm.error.missingFieldRequired",defaultMessage:"{ fieldName } is required."},invalidInputError:{id:"developerIntegrationForm.error.invalidInput",defaultMessage:"{ fieldName } is invalid."},transactionGenericError:{id:"developerIntegrationAction.error.failedTransaction",defaultMessage:"Something went wrong, please try again"},basicSectionTitle:{id:"developerIntegrationForm.sectionHeader.basic",defaultMessage:"Basic Information"},secretSectionTitle:{id:"developerIntegrationForm.sectionHeader.secrets",defaultMessage:"Secrets"},capabilitiesSectionTitle:{id:"developerIntegrationForm.sectionHeader.capabilities",defaultMessage:"Capabilities"},oauthSectionTitle:{id:"developerIntegrationForm.sectionHeader.oauthAndUri",defaultMessage:"OAuth Domain & URIs"},organizationSectionTitle:{id:"developerIntegrationForm.sectionHeader.organization",defaultMessage:"Organization Information"},externalOauthSectionTitle:{id:"developerIntegrationForm.sectionHeader.external_oauth_setup",defaultMessage:"External Authorization Setup"},unfurlingSectionTitle:{id:"developerIntegrationForm.sectionHeader.unfurlingDomains",defaultMessage:"Unfurling Domain & Patterns"},basicPageTitle:{id:"developerIntegrationFormHelpers.pageTitle.basic",defaultMessage:"Basic Information"},secretPageTitle:{id:"developerIntegrationFormHelpers.pageTitle.secrets",defaultMessage:"Secrets"},capabilitiesPageTitle:{id:"developerIntegrationFormHelpers.pageTitle.capabilities",defaultMessage:"Capabilities"},distributionPageTitle:{id:"developerIntegrationFormHelpers.pageTitle.distribution",defaultMessage:"Distribution"},linkPreviewPageTitle:{id:"developerIntegrationFormHelpers.pageTitle.unfurling",defaultMessage:"Link Preview"},distributionSwitcherLabel:{id:"developerIntegrationFormDistributionView.switcher.label",defaultMessage:"Do you want to make this integration public?"},unfurlingSwitcherLabel:{id:"developerIntegrationFormUnfurlingView.switcher.label",defaultMessage:"Do you want to enable link preview for this integration?"},integrationTypeLabel:{id:"developerIntegrationFormBasicView.integrationType.label",defaultMessage:"Type"},integrationTypeSubtitle:{id:"developerIntegrationFormBasicView.integrationType.subtitle",defaultMessage:"Internal integrations are installed to a specific workspace. You can make this integration public later"},nameLabel:{id:"developerIntegrationFormBasicView.name.label",defaultMessage:"Name"},nameSubtitle:{id:"developerIntegrationFormBasicView.name.subtitle",defaultMessage:"Name to identify your integration to users"},typeLabel:{id:"developerIntegrationFormBasicView.type.label",defaultMessage:"Type"},typeSubtitle:{id:"developerIntegrationFormBasicView.type.subtitle",defaultMessage:"Type of integration"},iconLabel:{id:"developerIntegrationFormBasicView.icon.label",defaultMessage:"Logo"},iconSubtitle:{id:"developerIntegrationFormBasicView.icon.subtitle",defaultMessage:"512px x 512px in PNG format is recommended"},spaceLabel:{id:"developerIntegrationFormBasicView.space.label",defaultMessage:"Associated workspace"},spaceSubtitle:{id:"developerIntegrationFormBasicView.space.subtitle",defaultMessage:"Select a workspace to install the integration to. Workspace owners will be able to manage the integration as well. You can upgrade the integration to use OAuth later"},tokenLabel:{id:"developerIntegrationFormSecretView.secret.label",defaultMessage:"Internal Integration Secret"},authorizationUrlLabel:{id:"developerIntegrationFormSecretView.integrationAuthUrl.label",defaultMessage:"Authorization URL"},clientIdLabel:{id:"developerIntegrationFormSecretView.clientId.label",defaultMessage:"OAuth client ID"},clientSecretLabel:{id:"developerIntegrationFormSecretView.clientSecret.label",defaultMessage:"OAuth client secret"},capabilitiesLabel:{id:"developerIntegrationFormCapabilitiesView.capabilities.label",defaultMessage:"Capabilities"},redirectUrisLabel:{id:"developerIntegrationFormDistributionView.redirect_uris.label",defaultMessage:"Redirect URIs"},redirectUrisSubtitle:{id:"developerIntegrationFormDistributionView.redirect_uri.subtitle",defaultMessage:"In the Notion OAuth flow, users will be redirected to this path after they have authenticated with Notion. The path will be appended with the authorization code for access and must have a protocol. It can’t contain URL fragments, relative paths or wildcards, and can’t be a public IP address. It must also be included in the token request"},websiteUrlLabel:{id:"developerIntegrationFormDistributionView.website_url.label",defaultMessage:"Website or homepage"},websiteUrlSubtitle:{id:"developerIntegrationFormDistributionView.website_url.subtitle",defaultMessage:"Used to link to your integration’s website or homepage in your integration page and authentication screens"},taglineLabel:{id:"developerIntegrationFormDistributionView.tagline.label",defaultMessage:"Tagline"},taglineSubtitle:{id:"developerIntegrationFormDistributionView.tagline.subtitle",defaultMessage:"A short description of what the integration does"},privacyPolicyUrlLabel:{id:"developerIntegrationFormDistributionView.privacy_policy_url.label",defaultMessage:"Privacy policy"},privacyPolicyUrlSubtitle:{id:"developerIntegrationFormDistributionView.privacy_policy_url.subtitle",defaultMessage:"Used to link to your integration’s privacy policy in your integration page and authentication screens"},termOfUseLabel:{id:"developerIntegrationFormDistributionView.term_of_use.label",defaultMessage:"Terms of use"},termOfUseSubtitle:{id:"developerIntegrationFormDistributionView.term_of_use.subtitle",defaultMessage:"Used to link to your integration’s terms of use in your integration page and authentication screens"},emailLabel:{id:"developerIntegrationFormDistributionView.email.label",defaultMessage:"Support email"},emailSubtitle:{id:"developerIntegrationFormDistributionView.email.subtitle",defaultMessage:"Used to link to your integration’s support email in your integration page and authentication screens"},developerNameLabel:{id:"developerIntegrationFormDistributionView.developer_name.label",defaultMessage:"Company name"},developerNameSubtitle:{id:"developerIntegrationFormDistributionView.developer_name.subtitle",defaultMessage:"The name of your company or organization. You may use your own name if this does not apply"},templateLabel:{id:"developerIntegrationFormDistributionView.template.label",defaultMessage:"Notion URL for optional template"},templateSubtitle:{id:"developerIntegrationFormDistributionView.template.subtitle",defaultMessage:"Use this field if you'd like to offer a user a Notion page to duplicate into their workspace during OAuth. URL must be to a public Notion page"},unfurlUrlLabel:{id:"developerIntegrationFormUnfurlingView.unfurlUrl.label",defaultMessage:"Unfurl Callback URL"},unfurlUrlCaption:{id:"developerIntegrationFormUnfurlingView.unfurlUrl.caption",defaultMessage:"Called with a POST request when an unfurl action occurs and with a DELETE request when unfurl url preview(s) or mention(s) is deleted"},domainLabel:{id:"developerIntegrationFormUnfurlingView.domain.label",defaultMessage:"Unfurl Url Domain"},urlMatchingAndPlaceholderLabel:{id:"developerIntegrationFormUnfurlingView.urlmatching.label",defaultMessage:"URL matching and placeholder"},urlMatchingAndPlaceholderCaption:{id:"developerIntegrationFormUnfurlingView.urlmatching.caption",defaultMessage:"When users paste a URL that matches this pattern on your verified domain, they'll have the option to unfurl it as a preview. Any sample URLs are validated against provided patterns"},externalOauthAuthorizeUrlLabel:{id:"developerIntegrationFormUnfurlingView.externalOauthAuthorizeUrl.label",defaultMessage:"OAuth Authorize URL"},externalOauthAuthorizeUrlCaption:{id:"developerIntegrationFormUnfurlingView.externalOauthAuthorizeUrl.caption",defaultMessage:"Used by Notion to initiate user authorization with the integration"},externalOauthTokenUrlLabel:{id:"developerIntegrationFormUnfurlingView.externalOauthTokenUrl.label",defaultMessage:"OAuth Token URL"},externalOauthTokenUrlCaption:{id:"developerIntegrationFormUnfurlingView.externalOauthTokenUrl.caption",defaultMessage:"Called by Notion to retrieve an access token for the unfurl callback URL"},externalOauthScopesLabel:{id:"developerIntegrationFormUnfurlingView.externalOauthScopes.label",defaultMessage:"OAuth Scopes"},externalOauthScopesCaption:{id:"developerIntegrationFormUnfurlingView.externalOauthScopes.caption",defaultMessage:"Optional scopes string"},externalDeletionUrlLabel:{id:"developerIntegrationFormUnfurlingView.externalDeletionUrl.label",defaultMessage:"Deleted Token Callback URL "},externalDeletionUrlCaption:{id:"developerIntegrationFormUnfurlingView.externalDeletionUrl.caption",defaultMessage:"Called by Notion when a user removes your integration"},externalClientIdLabel:{id:"developerIntegrationFormUnfurlingView.externalClientId.label",defaultMessage:"OAuth Client ID"},externalClientSecretLabel:{id:"developerIntegrationFormUnfurlingView.externalClientSecret.label",defaultMessage:"OAuth Client Secret"}});function I(e){return`${s.eV(e)}Label`}const S=(0,d.AO)((e=>"distribution"===e||"secrets"===e||"basic"===e||"linkPreview"===e||"capabilities"===e||"compliance"===e?{true:e}:{false:e})),w={basic:{key:"basic",title:v.default.formatMessage(x.basicPageTitle),subsections:[]},secrets:{key:"secrets",title:v.default.formatMessage(x.secretPageTitle),subsections:[]},capabilities:{key:"capabilities",title:v.default.formatMessage(x.capabilitiesPageTitle),subsections:[]},distribution:{key:"distribution",title:v.default.formatMessage(x.distributionPageTitle),subsections:[{key:"organization",title:v.default.formatMessage(x.organizationSectionTitle)},{key:"oauth",title:v.default.formatMessage(x.oauthSectionTitle)}]},linkPreview:{key:"linkPreview",title:v.default.formatMessage(x.linkPreviewPageTitle),subsections:[{key:"external_oauth",title:v.default.formatMessage(x.externalOauthSectionTitle)},{key:"unfurling",title:v.default.formatMessage(x.unfurlingSectionTitle)}]},compliance:{key:"compliance",title:"Compliance",subsections:[]}};function j(e,t){const i=["basic","secrets","capabilities","distribution"];switch(e){case"create-bot":return["basic"];case"update-bot":case"create-guest-integration":return i;case"update-compliance-integration":return["basic","secrets","distribution","compliance"];default:return t&&i.push("linkPreview"),i}}const M={type:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},name:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},icon:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},space:{supportedBy:{"create-bot":!0,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1},requiredBy:{"create-bot":!0,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},capabilities:{supportedBy:{"create-bot":!1,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},token:{supportedBy:{"create-bot":!1,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},client_id:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!0,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},client_secret:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!0,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},authorization_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!0,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},redirect_uris:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},template_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},developer_name:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},website_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},tagline:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},privacy_policy_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},terms_of_use_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},email:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},unfurl_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},domain:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!1}},url_matching_and_placeholder:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!1}},external_oauth_authorize_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},external_oauth_token_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},external_oauth_scopes:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},external_client_id:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},external_client_secret:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},external_deletion_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!0}}};function k(e){const{formData:t,setFormData:i,formStateType:r,currentFieldNames:a,formFieldValidationSchema:n}=e,o=function(e){const{formData:t,formStateType:i,currentFieldNames:r,formFieldValidationSchema:a=M}=e;return r.filter((e=>{const r=t[e].value;return a[e].requiredBy[i]&&!r}))}({formData:t,formStateType:r,currentFieldNames:a,formFieldValidationSchema:n});return o.forEach((e=>{const t=I(e);i({field:e,error:v.default.formatMessage(x.missingValuesError,{fieldName:v.default.formatMessage(x[t])})})})),o}function C(e){const{formData:t,formStateType:i,templateStore:r,setFormData:a,currentFieldNames:n}=e,o=function(e){const{formData:t,formStateType:i,templateStore:r,currentFieldNames:a,formFieldValidationSchema:n=M}=e,o=[];return a.forEach((e=>{const a=t[e].value,l=n[e].supportedBy[i],s=f.tV[e];if(l&&a&&s){const i=s({value:a,formData:t,templateStore:r});var d;i.validated||o.push({fieldName:e,errorMessages:null===(d=i.errorMessages)||void 0===d?void 0:d.map((e=>{let{descriptor:t,values:i}=e;return{descriptor:t,values:i??{}}}))})}})),o}({formData:t,formStateType:i,templateStore:r,currentFieldNames:n});return o.forEach((e=>{a({field:e.fieldName,error:e.errorMessages?e.errorMessages.map(((e,t)=>{let{descriptor:i,values:r}=e;return(0,b.jsx)("div",{children:v.default.formatMessage(i,r)},`validation-error-${t}`)})):v.default.formatMessage(x.invalidInputError,{fieldName:x[I(e.fieldName)].defaultMessage})})})),o}function F(e){if(!e)return;const t={};return(0,d.qP)(e).forEach((e=>{let[i,r]=e;r&&(t[i]=!0)})),t}function R(e){return{token:e.token.value,client_id:e.client_id.value,client_secret:e.client_secret.value,authorization_url:e.authorization_url.value,name:e.name.value,icon:e.icon.value,space:e.space.value,redirect_uris:(e.redirect_uris.value||[]).map((e=>f.FR(e))),website_url:f.FR(e.website_url.value),tagline:e.tagline.value,privacy_policy_url:f.FR(e.privacy_policy_url.value),terms_of_use_url:f.FR(e.terms_of_use_url.value),template_page_id:(0,y.K2)(e.template_url.value??"")??null,email:r.H3(e.email.value),capabilities:F(e.capabilities.value),developer_name:e.developer_name.value,unfurl_url:e.unfurl_url.value,domain:e.domain.value,url_matching_and_placeholder:e.url_matching_and_placeholder.value,external_oauth_authorize_url:f.FR(e.external_oauth_authorize_url.value),external_oauth_token_url:f.FR(e.external_oauth_token_url.value),external_client_id:e.external_client_id.value,external_client_secret:e.external_client_secret.value,external_oauth_scopes:e.external_oauth_scopes.value,external_deletion_url:f.FR(e.external_deletion_url.value)}}function Z(e){const{formData:t,formStateType:i,currentFieldNames:r,formFieldValidationSchema:a=M}=e;return r.some((e=>a[e].supportedBy[i]&&t[e].error))}function T(e){return e.flatMap((e=>e.fields))}const V={read_content:!1,update_content:!1,insert_content:!1,read_user_without_email:!1,read_user_with_email:!1,read_comment:!1,insert_comment:!1,link_preview:!1,synced_database:!1};function P(e){const t={...V};return e&&(0,d.qP)(e).forEach((e=>{let[i,r]=e;r&&(0,d.qg)(t,i)&&(t[i]=!0)})),t}const B={value:void 0,error:void 0},D={type:B,name:B,icon:B,space:B,capabilities:B,token:B,authorization_url:B,client_secret:B,client_id:B,tagline:B,email:B,website_url:B,privacy_policy_url:B,terms_of_use_url:B,template_url:B,redirect_uris:B,developer_name:B,external_oauth_authorize_url:B,external_oauth_token_url:B,external_client_id:B,external_client_secret:B,external_oauth_scopes:B,external_deletion_url:B,unfurl_url:B,domain:B,url_matching_and_placeholder:B};function U(e,t){return"error"in t?{...e,[t.field]:{...e[t.field],error:t.error}}:{...e,[t.field]:{...e[t.field],...t.value&&{error:void 0},value:t.value}}}async function L(e){const{pageId:t,store:i,environment:r}=e;if(!i||!t)return;const n=p.G.createChildStore(i,{table:a.iU,id:t});return await n.load(),(0,h.ZP)({store:n,preferPublicLink:!0,getSpaceDomain:()=>{var e;return null===(e=c.Z.getData(r,{spaceId:n.getSpaceId()}))||void 0===e?void 0:e.domain},pageVisitSource:void 0})}async function A(e){const{userRootStore:t,formStoreState:i,environment:r}=e;if("create-bot"===i.type){return{token:void 0,client_id:void 0,client_secret:void 0,authorization_url:void 0,space:(t?t.getAdminSpaceStores():[])[0],developer_name:void 0,tagline:void 0,email:void 0,website_url:void 0,privacy_policy_url:void 0,terms_of_use_url:void 0,template_url:void 0,redirect_uris:void 0,capabilities:{read_content:!0,insert_content:!0,update_content:!0,read_comment:!1,insert_comment:!1,read_user_with_email:!1,read_user_without_email:!1,link_preview:!1,synced_database:!1},unfurl_url:void 0,domain:void 0,url_matching_and_placeholder:void 0,external_oauth_authorize_url:void 0,external_oauth_token_url:void 0,external_client_id:void 0,external_client_secret:void 0,external_oauth_scopes:void 0,external_deletion_url:void 0}}if("update-bot"===i.type||"create-guest-integration"===i.type){var a;const e=null===(a=i.startingRecord)||void 0===a?void 0:a.value,r=t&&e&&p.H2.createChildStore(t,{id:e.space_id,table:n.bx});return{token:i.startingRecord,client_id:void 0,client_secret:void 0,authorization_url:void 0,name:null==e?void 0:e.name,icon:null==e?void 0:e.icon,space:r,tagline:void 0,email:void 0,website_url:void 0,privacy_policy_url:void 0,terms_of_use_url:void 0,template_url:void 0,redirect_uris:void 0,capabilities:P(null==e?void 0:e.capabilities),developer_name:void 0,unfurl_url:void 0,domain:void 0,url_matching_and_placeholder:void 0,external_oauth_authorize_url:void 0,external_oauth_token_url:void 0,external_client_id:void 0,external_client_secret:void 0,external_oauth_scopes:void 0,external_deletion_url:void 0}}if("update-guest-integration"===i.type){const e=i.startingRecord.value;return{token:void 0,client_id:i.startingRecord,client_secret:i.startingRecord,authorization_url:(0,u.LH)({baseUrl:(0,g.k2)("production"),clientId:i.startingRecord.value.id,redirectUri:i.startingRecord.value.redirect_uris[0]}),name:e.name,icon:e.info.icon,space:void 0,tagline:e.info.tagline,email:e.info.email,website_url:e.info.website_url,privacy_policy_url:e.info.privacy_policy_url,terms_of_use_url:e.info.terms_of_use_url,template_url:await L({pageId:e.info.template_page_id,store:t,environment:r}),redirect_uris:e.redirect_uris,capabilities:P(e.capabilities),developer_name:e.info.developer_name,unfurl_url:void 0,domain:void 0,url_matching_and_placeholder:void 0,external_oauth_authorize_url:void 0,external_oauth_token_url:void 0,external_client_id:void 0,external_client_secret:void 0,external_oauth_scopes:void 0,external_deletion_url:void 0}}if("create-third-party-external-integration"===i.type){const e=i.startingRecord.value;return{token:void 0,client_id:i.startingRecord,client_secret:i.startingRecord,authorization_url:(0,u.LH)({baseUrl:(0,g.k2)("production"),clientId:i.startingRecord.value.id,redirectUri:i.startingRecord.value.redirect_uris[0]}),name:e.name,icon:e.info.icon,space:void 0,tagline:e.info.tagline,email:e.info.email,website_url:e.info.website_url,privacy_policy_url:e.info.privacy_policy_url,terms_of_use_url:e.info.terms_of_use_url,template_url:await L({pageId:e.info.template_page_id,store:t,environment:r}),redirect_uris:void 0,capabilities:P(e.capabilities),developer_name:e.info.developer_name,unfurl_url:void 0,domain:{developmentDomain:_.nZ,verifiedDomains:[],domainVerifications:[]},url_matching_and_placeholder:[_.VH],external_oauth_authorize_url:void 0,external_oauth_token_url:void 0,external_client_id:void 0,external_client_secret:void 0,external_oauth_scopes:void 0,external_deletion_url:void 0}}if("update-third-party-external-integration"===i.type){var l,s;const e=i.startingRecord.value,a=null===(l=i.startingAuthRecord)||void 0===l?void 0:l.value,n=i.domainVerifications,c=e.info.original_url_patterns||[],p={developmentDomain:(null===(s=e.info.development_url_domains)||void 0===s?void 0:s[0])||"",verifiedDomains:e.info.original_url_domains||[],domainVerifications:n},f=c.map((t=>{var i;if(!0!==(null===(i=t.additional_types)||void 0===i?void 0:i.collection))return{name:(0,m.R)({patternName:t.name,integrationId:e.id}),regex:t.regex,attributes:((null==t?void 0:t.attributes)??[]).map(o.Ah),sampleUrls:(null==t?void 0:t.sample_urls)??[]}})).filter(d.$K);return{token:void 0,client_id:i.startingRecord,client_secret:i.startingRecord,authorization_url:(0,u.LH)({baseUrl:(0,g.k2)("production"),clientId:i.startingRecord.value.id,redirectUri:i.startingRecord.value.redirect_uris[0]}),name:e.name,icon:e.info.icon,space:void 0,tagline:e.info.tagline,email:e.info.email,website_url:e.info.website_url,privacy_policy_url:e.info.privacy_policy_url,terms_of_use_url:e.info.terms_of_use_url,template_url:await L({pageId:e.info.template_page_id,store:t,environment:r}),redirect_uris:e.redirect_uris,capabilities:P(e.capabilities),developer_name:e.info.developer_name,domain:p,url_matching_and_placeholder:f,unfurl_url:e.info.unfurl_url,external_oauth_authorize_url:null==a?void 0:a.oauth_authorize_url,external_oauth_token_url:null==a?void 0:a.oauth_token_url,external_client_id:null==a?void 0:a.client_id,external_client_secret:null==a?void 0:a.client_secret,external_oauth_scopes:null==a?void 0:a.scopes,external_deletion_url:null==a?void 0:a.deletion_url}}if("update-first-party-external-integration"===i.type){var c;const e=i.startingRecord.value,t=e.info.original_url_patterns||[],r={developmentDomain:(null===(c=e.info.development_url_domains)||void 0===c?void 0:c[0])||"",verifiedDomains:e.info.original_url_domains??[],domainVerifications:[]},a=t.map((t=>{var i;if(!0!==(null===(i=t.additional_types)||void 0===i?void 0:i.collection))return{name:(0,m.R)({patternName:t.name,integrationId:e.id}),regex:t.regex,attributes:((null==t?void 0:t.attributes)??[]).map(o.Ah),sampleUrls:(null==t?void 0:t.sample_urls)??[]}})).filter(d.$K);return{token:void 0,client_id:i.startingRecord,client_secret:i.startingRecord,authorization_url:void 0,name:e.name,icon:e.info.icon,space:void 0,tagline:e.info.tagline,email:e.info.email,website_url:e.info.website_url,privacy_policy_url:e.info.privacy_policy_url,terms_of_use_url:e.info.terms_of_use_url,template_url:void 0,redirect_uris:e.redirect_uris,capabilities:P(e.capabilities),developer_name:e.info.developer_name,domain:r,url_matching_and_placeholder:a,unfurl_url:e.info.unfurl_url,external_oauth_authorize_url:void 0,external_oauth_token_url:void 0,external_client_id:void 0,external_client_secret:void 0,external_oauth_scopes:void 0,external_deletion_url:void 0}}if("update-compliance-integration"===i.type){var f;const e=i.startingRecord.value,a=null===(f=i.startingAuthRecord)||void 0===f?void 0:f.value;return{token:void 0,client_id:i.startingRecord,client_secret:i.startingRecord,authorization_url:(0,u.LH)({baseUrl:(0,g.k2)("production"),clientId:i.startingRecord.value.id,redirectUri:i.startingRecord.value.redirect_uris[0]}),name:e.name,icon:e.info.icon,space:void 0,tagline:e.info.tagline,email:e.info.email,website_url:e.info.website_url,privacy_policy_url:e.info.privacy_policy_url,terms_of_use_url:e.info.terms_of_use_url,template_url:await L({pageId:e.info.template_page_id,store:t,environment:r}),redirect_uris:e.redirect_uris,capabilities:P(e.capabilities),developer_name:e.info.developer_name,domain:void 0,url_matching_and_placeholder:void 0,unfurl_url:void 0,external_oauth_authorize_url:null==a?void 0:a.oauth_authorize_url,external_oauth_token_url:null==a?void 0:a.oauth_token_url,external_client_id:null==a?void 0:a.client_id,external_client_secret:null==a?void 0:a.client_secret,external_oauth_scopes:null==a?void 0:a.scopes,external_deletion_url:null==a?void 0:a.deletion_url}}(0,d.t1)(i)}function E(e){return"create-bot"===e||"create-guest-integration"===e||"create-third-party-external-integration"===e}function N(e){return"create-guest-integration"===e?"internal":"create-third-party-external-integration"===e?"public":void 0}function q(e){return"create-third-party-external-integration"===e}function z(e){return`developer-integration-section-header-${e}`}function O(e,t){return!("secrets"===e)&&!("distribution"===e&&"update-bot"===t)&&!("linkPreview"===e&&"update-guest-integration"===t)}},443348:(e,t,i)=>{i.d(t,{R:()=>n,X:()=>o});var r=i(977657);i(95477);const a="entity_item";function n(e){const{patternName:t,integrationId:i}=e;if((0,r.BP)({integrationId:i,env:"production"}))return t;{const e=t.indexOf("_");return e<0?a:t.slice(e+1)}}function o(e){const{patternName:t,integrationId:i}=e;return(0,r.BP)({integrationId:i,env:"production"})?t:`${i}_${t}`}},491996:(e,t,i)=>{i.d(t,{FR:()=>I,Jv:()=>h,tV:()=>j});i(757658);var r=i(133728),a=i(520270),n=i(474181),o=i(689602),l=i(544876),s=i(709291),d=i(401898),u=i(218265),c=i(619584),p=i(63811),g=i(95477),m=i(367669),f=i(918514);const _=(0,s.defineMessages)({capabilityErrorMessage:{id:"developerIntegrationsCreate.error.capabilities.invalidContent2",defaultMessage:"At least one capability must be requested."},regexPatternErrorMessage:{id:"developerIntegrationFormValidator.urlMatchingAndPlaceholder.regex.error",defaultMessage:"{value} regex pattern is invalid."},regexAttributesErrorMessage:{id:"developerIntegrationFormValidator.urlMatchingAndPlaceholder.attributes.error",defaultMessage:"{value} attributes JSON does not match request schema."},sampleUrlMissingDomain:{id:"developerIntegrationFormValidator.sampleUrls.sampleUrlMissingDomain.error",defaultMessage:'URL "{value}" is missing a domain.'},sampleUrlDoesNotMatchProvidedDomain:{id:"developerIntegrationFormValidator.sampleUrls.sampleUrlDoesNotMatchProvidedDomain.error",defaultMessage:'URL "{value}" does not match a provided domain.'},sampleUrlDoesNotMatchProvidedRegexes:{id:"developerIntegrationFormValidator.sampleUrls.sampleUrlDoesNotMatchProvidedRegexes.error",defaultMessage:'URL "{value}" does not match a provided regex pattern.'},templateUrlIsNotNotionPage:{id:"developerIntegrationFormValidator.templateUrl.templateUrlIsNotNotionPage.error",defaultMessage:"URL must direct to a public Notion template."},templateUrlCannotBeDuplicated:{id:"developerIntegrationFormValidator.templateUrl.templateUrlCannotBeDuplicated.error",defaultMessage:"Linked template must be public."}});function h(e){let t;try{t=JSON.parse(e)}catch(i){t=void 0}return t}function v(e){const{value:t}=e,i=u.yn(t);if(!i)return{validated:!1};return u.Qc(i).hostname?{validated:!0}:{validated:!1}}function y(e){try{return new RegExp(e),{validated:!0}}catch{return{validated:!1}}}function b(e){if((0,p.Gu)(o.$1,e))return{validated:!1};for(const t of e){const e=(0,l.GY)(t);if(!(0,a.nj)(e))return{validated:!1}}return{validated:!0}}function x(e){const{domains:t,regex:i,urls:r}=e;if(0===r.length)return[];const a=[];for(const n of r){const e=(0,l.XR)({url:n,domains:t,regex:new RegExp(i)});"invalid_url"===e.type?a.push({descriptor:_.sampleUrlMissingDomain,value:n}):"url_does_not_match_domain"===e.type?a.push({descriptor:_.sampleUrlDoesNotMatchProvidedDomain,value:n}):"url_does_not_match_regex"===e.type?a.push({descriptor:_.sampleUrlDoesNotMatchProvidedRegexes,value:n}):"success"===e.type||(0,d.t1)(e)}return a}function I(e){const t=u.yn(e);if(!t||!e)return;const i=t[t.length-1],r=e[e.length-1];return"/"===i&&"/"!==r?t.slice(0,t.length-1):t}const S={insert_comment:!0,insert_content:!0,read_comment:!0,read_content:!0,update_content:!0,link_preview:!0,synced_database:!0,read_user_with_email:!1,read_user_without_email:!1},w=(0,d.Yd)(S).filter((e=>S[e]));const j={email:function(e){const{value:t}=e,i=r.H3(t);return i?{validated:r.oH(i).valueOf()}:{validated:!1}},redirect_uris:function(e){const{value:t}=e;return{validated:t.every((e=>(0,n.mb)(g.default.domainBaseUrl,e)))}},website_url:v,privacy_policy_url:v,terms_of_use_url:v,template_url:function(e){const{value:t,templateStore:i}=e;return u.yn(t)?(0,f.K2)(t)?i&&(0,m.Oc)(i)?{validated:!0}:{validated:!1,errorMessages:[{descriptor:_.templateUrlCannotBeDuplicated}]}:{validated:!1,errorMessages:[{descriptor:_.templateUrlIsNotNotionPage}]}:{validated:!1}},capabilities:function(e){const{value:t}=e;return w.some((e=>t[e]))?{validated:!0}:{validated:!1,errorMessages:[{descriptor:_.capabilityErrorMessage}]}},unfurl_url:v,url_matching_and_placeholder:function(e){const{value:t,formData:i}=e,r=[];for(const o of t){if(y(o.regex).validated){var a;const e=x({domains:(n=null===(a=i.domain)||void 0===a?void 0:a.value,n?(0,c.jj)([...n.developmentDomain&&[n.developmentDomain],...n.domainVerifications.map((e=>{let{domain:t}=e;return t})),...n.verifiedDomains]):[]),regex:o.regex,urls:o.sampleUrls});r.push(...e)}else r.push({descriptor:_.regexPatternErrorMessage,value:o.name});b(o.attributes).validated||r.push({descriptor:_.regexAttributesErrorMessage,value:o.name})}var n;return r.length>0?{validated:!1,errorMessages:r.map((e=>{let{descriptor:t,value:i}=e;return{descriptor:t,values:{value:i}}}))}:{validated:!0}},external_oauth_authorize_url:v,external_oauth_token_url:v,external_deletion_url:v}},465270:(e,t,i)=>{i.d(t,{Az:()=>v,C:()=>h,Hx:()=>k,P4:()=>x,SV:()=>S,TG:()=>f,VH:()=>I,VR:()=>M,e_:()=>b,nZ:()=>y,rn:()=>_});i(757658);var r=i(126263),a=i(541432),n=i(520270),o=i(471924),l=i(421202),s=i(519889),d=i(76233),u=i(544876),c=i(401898),p=i(619584),g=i(206258),m=i(741195);function f(e){return(0,p.jj)(e.flatMap((e=>{if("relation"===e.type)return e.relation.uri})).filter(c.$K))}function _(e){const{environment:t,integration:i,rootUrl:c,rootAttributes:p,relatedUrisToAttributes:f}=e,_=o.Ar(),h=t.currentUser.id,v=new r.Z({name:"developerIntegrationLabHelpers.getBlockStores"}),y=[],b={};for(const[r,a]of Object.entries(f)){const e=o.Il();y.push({id:e,uri:r,attributes:a}),b[r]=e}const x=[{id:"rootInstanceId",original_url:c,attributes:p,related_external_object_uris_to_instance_ids:b},...y].map((e=>{const t=[];for(const i of e.attributes){const e=(0,u.GY)(i);(0,n.nj)(e)&&t.push(e)}return{...e,attributes:t}}));if("success"!==(0,u.ny)({url:c,integrations:[i],currentSpaceId:_}).type)return{error:"Sample URL does not match provided integration regex."};const I=(0,m.$x)({table:l.iU,environment:t,spaceId:_});let S;for(const r of x){const e={table:l.iU,id:r.id,spaceId:_},i={...r,domain:"test"},n={id:r.id,type:a.Ti.externalObjectInstance,version:0,created_at:0,created_by_table:s.KJ,created_by_id:(0,m.TS)({table:s.KJ,spaceId:_,environment:t}),last_edited_time:0,last_edited_by_table:s.KJ,last_edited_by_id:(0,m.TS)({table:s.KJ,spaceId:_,environment:t}),parent_table:l.iU,parent_id:(0,m.TS)({table:l.iU,spaceId:_,environment:t}),space_id:_,alive:!0,domain:"",format:i};if(v.setRecord({pointer:e,userId:h},{role:"editor",value:n}),r===x[0]){const t={...n,format:{...i,attributes:void 0}};v.setRecord({pointer:I,userId:h},{role:"editor",value:t}),S=e}}if(!S)return{error:"Root external object was not defined."};const w=new g.G(t,I,{inMemoryRecordCache:v}),j=new g.G(t,S,{inMemoryRecordCache:v}),M=(0,m.$x)({table:l.iU,environment:t,spaceId:_}),k=new g.G(t,M,{inMemoryRecordCache:v}),C={id:M.id,type:"text",version:0,space_id:_,parent_id:(0,m.TS)({table:l.iU,spaceId:_,environment:t}),parent_table:l.iU,alive:!0,properties:{title:[(0,d.YCD)((0,d.x36)(I.id))]}};v.setRecord({pointer:M,userId:h},{role:"editor",value:C});const F=(0,m.$x)({table:l.iU,environment:t,spaceId:_}),R=new g.G(t,F,{inMemoryRecordCache:v}),Z={id:F.id,type:"text",version:0,space_id:_,parent_id:(0,m.TS)({table:l.iU,spaceId:_,environment:t}),parent_table:l.iU,alive:!0,properties:{title:[(0,d.YCD)((0,d.x36)(x[0].id))]}};return v.setRecord({pointer:F,userId:h},{role:"editor",value:Z}),{emptyInstanceBlockStore:w,previewBlockStore:j,emptyInlineBlockStore:k,inlineBlockStore:R}}const h=o.Ar(),v="https://acme.com/items/23487",y="acme.com",b="^(?<site>https\\:\\/\\/acme\\.com)\\/items\\/(?<itemNo>\\d+)$",x=[{id:"title",name:"Title",type:"inline",inline:{title:{value:"Acme Item #$<itemNo>",section:"title"}}},{id:"itemId",name:"Item Id",type:"inline",inline:{plain_text:{value:"#$<itemNo>",section:"identifier"}}},{id:"site",name:"Site",type:"inline",inline:{plain_text:{value:"$<site>",section:"secondary"}}}],I={name:"item",regex:b,attributes:x,sampleUrls:[v]},S=[{id:"title",name:"Title",type:"inline",inline:{title:{value:"Feature Request: Link Previews",section:"title"}}},{id:"state",name:"State",type:"relation",relation:{uri:"acme:item_state/open",mention:{section:"primary"}}},{id:"itemId",name:"Item Id",type:"inline",inline:{plain_text:{value:"#23487",section:"identifier"}}},{id:"itemIcon",name:"Item Icon",type:"inline",inline:{color:{value:{r:247,g:247,b:42},section:"entity"}}},{id:"user",name:"User",type:"relation",relation:{uri:"https://acme.com/fig-ment",extension:[{id:"title",section:"secondary"},{id:"avatar_url",section:"avatar"}]}},{id:"description",name:"Description",type:"inline",inline:{plain_text:{value:"Would love to be able to preview some Acme resources in Notion!\n Maybe an open item?",section:"body"}}},{id:"updated_at",name:"Updated At",type:"inline",inline:{datetime:{value:"2022-01-11T19:53:18.829Z",section:"secondary"}}},{id:"label",name:"Label",type:"inline",inline:{enum:{value:"🔨 Ready to Build",color:{r:100,g:100,b:100},section:"primary"}}}],w={uri:"https://acme.com/fig-ment",attributes:[{id:"title",name:"User Name",type:"inline",inline:{title:{value:"fig"}}},{id:"avatar_url",name:"Avatar URL",type:"embed",embed:{src_url:"https://avatars.githubusercontent.com/u/93556354?s=88&u=4967f0be0900684b6963a953ca7fe0ff2268746f&v=4",image:{}}}]},j={uri:"acme:item_state/open",attributes:[{id:"title",name:"Title",type:"inline",inline:{title:{value:"Open",section:"title"}}},{id:"icon",name:"Icon",type:"embed",embed:{src_url:"/images/external_integrations/acme-icon.png",image:{section:"avatar"}}},{id:"color",name:"Color",type:"inline",inline:{color:{value:{r:235,g:64,b:52},section:"background"}}}]};function M(){const e=[w,j],t=f(S),i={};for(const r of t){const t=e.find((e=>e.uri===r));t&&(i[r]=t.attributes)}return i}function k(e){const{domain:t,regex:i,currentIntegration:r}=e,a={...r.info,original_url_domains:[t],original_url_patterns:[{name:"acme-issue",regex:i,attributes:e.attributes.map((e=>{const t=(0,u.GY)(e);if((0,n.nj)(t))return t})).filter(c.$K)}]};return{...r,info:a}}},873020:(e,t,i)=>{i.d(t,{b:()=>I});var r=i(667294),a=i(800480),n=i(886628),o=i(363123),l=i(715070),s=i(559054),d=i(244312),u=i(949953),c=i(509844),p=i(815047),g=i(401898),m=i(757549),f=i(454642),_=i(970764),h=i(212982),v=i(548779),y=i(80444),b=i(322230),x=i(206258);function I(e){const{botOrIntegrationPointer:t,existingFormStore:i}=e,I=(0,a.O7)(),S=(0,n.VK)((()=>y.default.state.currentUserRootStore),[]),w=(0,n.qz)(i,b.Z),j=(0,n.VK)((()=>w.getState().type),[w]),M=(0,n.VK)((()=>w.getState().startingRecord),[w]),k=(0,n.VK)((()=>w.getState().status),[w]),C=(0,n.VK)((()=>{const e=(0,_.QS)();return(0,h.H)(j,e)}),[j]),[F,R]=(0,r.useState)("secrets"),Z="published"===k&&"secrets"!==F,T=(0,n.VK)((()=>{if(t&&S){const e=t.table,i=S.getRecordValue(t);if(i){const r=e===c.K2&&((0,l.Be)(i.capabilities)||(0,l.Uz)(i.capabilities))&&S.getRecordValue({table:u.r9,id:t.id});return{botOrIntegrationRecord:{value:i,table:t.table},maybeExternalAuthRecord:r?{table:u.r9,value:r}:void 0}}}}),[S,t]),[{value:V}]=(0,s.r5)((async()=>{if(!S||!T||T.botOrIntegrationRecord.table!==c.K2)return[];const e=T.botOrIntegrationRecord.value.id,t=await f.getIntegrationDomainVerifications(I,{integrationId:e});if("success"===t.type){return t.data.verificationIds.map((e=>S.getRecordValue({table:d.Jd,id:e}))).filter(g.$K)}if("failed"===t.type)throw t.error;return(0,g.t1)(t)}),[I,T,S]);(0,r.useEffect)((()=>{if(!T)return;const{botOrIntegrationRecord:e,maybeExternalAuthRecord:t}=T;w.initializeNewForm(e,t,V||[]),m.DU(I,{table:e.table})}),[w,I,T,V]);const P=(0,n.VK)((()=>{if(!S||!T)return;const{botOrIntegrationRecord:e}=T;if(e.value.parent_table!==p.bx)return;const t=x.H2.createChildStore(S,{id:e.value.parent_id,table:e.value.parent_table});return(0,v.rn)(I,t)}),[T,S,I]);return{loadedFormState:(0,o.V)({value:M}),selectedPage:F,integrationFormStore:w,setSelectedPage:R,showPublishedIntegrationWarning:Z,supportedPages:C,spaceName:P}}},322230:(e,t,i)=>{i.d(t,{Z:()=>p});var r=i(749085),a=i(977657),n=i(474181),o=i(177420),l=i(509844),s=i(994826),d=i(401898),u=(i(95477),i(52507));class c extends r.default{getInitialState(){return{type:"create-bot",startingRecord:void 0,recordTypeOnSubmission:"internal",status:"unpublished"}}updateRecordTypeOnSwitch(e){if("update-bot"===this.state.type){if("public"!==e)return;this.setState({type:"create-guest-integration",startingRecord:this.state.startingRecord,recordTypeOnSubmission:e,status:"unpublished"})}else if("create-guest-integration"===this.state.type){if("internal"!==e||!this.state.startingRecord)return;this.setState({type:"update-bot",startingRecord:this.state.startingRecord,recordTypeOnSubmission:e,status:"unpublished"})}else if("update-guest-integration"===this.state.type){if("unfurling"!==e)return;this.setState({type:"create-third-party-external-integration",startingRecord:this.state.startingRecord,recordTypeOnSubmission:e,startingAuthRecord:void 0,status:"unpublished"})}else if("create-third-party-external-integration"===this.state.type){if("public"!==e)return;this.setState({type:"update-guest-integration",startingRecord:this.state.startingRecord,recordTypeOnSubmission:e,status:"unpublished"})}else"create-bot"===this.state.type||"update-third-party-external-integration"===this.state.type||"update-first-party-external-integration"===this.state.type||"update-compliance-integration"===this.state.type||(0,d.t1)(this.state)}updateCreationFormType(e){"create-guest-integration"===e&&this.setState({type:"create-guest-integration",startingRecord:void 0,recordTypeOnSubmission:"public",status:"unpublished"}),"create-bot"===e&&this.setState({type:"create-bot",startingRecord:void 0,recordTypeOnSubmission:"internal",status:"unpublished"})}initializeNewForm(e,t,i){if(e.table===o.cZ)this.setState({type:"update-bot",startingRecord:e,recordTypeOnSubmission:"internal",status:"unpublished"});else if(e.table===l.K2)if((0,s.z6)(e.value.id))((0,n.t9)(e.value)||(0,n.Mq)(e.value))&&this.setState({type:"update-compliance-integration",startingRecord:{table:l.K2,value:e.value},startingAuthRecord:t,recordTypeOnSubmission:"compliance",status:e.value.status});else if((0,n.VM)(e.value))if((0,a.BP)({integrationId:e.value.id,env:"production"}))this.setState({type:"update-first-party-external-integration",startingRecord:{table:e.table,value:e.value},recordTypeOnSubmission:"unfurling",status:e.value.status});else{if(!t)return;const r=i.map((e=>({type:e.verified_at?"verified":"unverified",id:e.id,domain:e.domain,verificationCode:e.verification_code,createdAt:e.created_at,expiresAt:e.expires_at,alive:e.alive})));this.setState({type:"update-third-party-external-integration",startingRecord:{table:e.table,value:e.value},startingAuthRecord:t,recordTypeOnSubmission:"unfurling",status:e.value.status,domainVerifications:r,domainVerificationStore:"update-third-party-external-integration"===this.state.type?this.state.domainVerificationStore:new u.Z})}else"guest"===e.value.type&&this.setState({type:"update-guest-integration",startingRecord:{table:e.table,value:e.value},recordTypeOnSubmission:"public",status:e.value.status});else(0,d.t1)(e)}}const p=c},138381:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(749085);class a extends r.default{getInitialState(){return{open:!1}}}const n=new a},745483:(e,t,i)=>{i.d(t,{Z:()=>l});var r=i(749085),a=i(292595);class n extends r.default{getInitialState(){return{openModals:new Set}}}const o=new n,l=o;(0,a.exposeDebugValue)("GlobalModalStore",o)},361254:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(749085);class a extends r.default{getInitialState(){return{open:!1,openAnimationCompleted:!0,closeAnimationCompleted:!0}}}const n=a},107189:(e,t,i)=>{i.d(t,{K:()=>n});i(667294);var r=i(745238),a=i(785893);const n=(0,r.IU)("arrowDownSmall",{viewBox:"0 0 12 12",svg:(0,a.jsx)("path",{d:"M5.99756 0.850098C5.53564 0.850098 5.21875 1.17236 5.21875 1.65576V7.61768L5.27246 8.7832L4.19287 7.53711L2.98438 6.33398C2.84473 6.18896 2.66211 6.09229 2.42578 6.09229C2.00684 6.09229 1.68994 6.40381 1.68994 6.84424C1.68994 7.04834 1.77051 7.23633 1.93164 7.40283L5.42285 10.8994C5.56787 11.0498 5.78809 11.1357 5.99756 11.1357C6.2124 11.1357 6.42725 11.0498 6.57227 10.8994L10.0688 7.40283C10.23 7.23633 10.3105 7.04834 10.3105 6.84424C10.3105 6.40381 9.99365 6.09229 9.57471 6.09229C9.34375 6.09229 9.16113 6.18896 9.01611 6.33398L7.80762 7.53711L6.72803 8.7832L6.77637 7.61768V1.65576C6.77637 1.17236 6.46484 0.850098 5.99756 0.850098Z"})})},825278:(e,t,i)=>{i.d(t,{H:()=>n});i(667294);var r=i(745238),a=i(785893);const n=(0,r.IU)("eyes",{viewBox:"0 0 72 72",svg:(0,a.jsx)("path",{d:"M17.0312 64.4375C26.25 64.4375 33.5625 52.9688 33.5625 36.4375C33.5625 19.9062 26.25 8.46875 17.0312 8.46875C7.8125 8.46875 0.5 19.9062 0.5 36.4375C0.5 52.9688 7.8125 64.4375 17.0312 64.4375ZM54.9688 64.4375C64.1875 64.4375 71.5 52.9688 71.5 36.4375C71.5 19.9062 64.1875 8.46875 54.9688 8.46875C45.75 8.46875 38.4375 19.9062 38.4375 36.4375C38.4375 52.9688 45.75 64.4375 54.9688 64.4375ZM10.0625 47.1875C15.125 47.1875 18.4688 43.6562 18.4688 38.3438C18.4688 33.0938 15.125 29.5625 10.0625 29.5625C7.6875 29.5625 5.71875 30.3125 4.25 31.6875C5.375 19.9375 10.6875 11.9375 17.0312 11.9062C24.25 11.875 30.125 22.0312 30.125 36.4375C30.125 50.7812 24.25 60.9688 17.0312 61C11.5312 61.0312 6.78125 54.9688 4.90625 45.5938C6.28125 46.625 8.03125 47.1875 10.0625 47.1875ZM47.9688 47.1875C53 47.1875 56.4062 43.6562 56.4062 38.3438C56.4062 33.0938 53 29.5625 47.9688 29.5625C45.5938 29.5625 43.5938 30.3438 42.1562 31.6875C43.2812 19.9375 48.5938 11.9375 54.9688 11.9375C62.1562 11.9062 68 22.0938 68 36.4375C68 50.7812 62.1562 60.9688 54.9688 60.9688C49.4375 61 44.6875 54.9375 42.7812 45.5938C44.1562 46.5938 45.9375 47.1875 47.9688 47.1875ZM45.5312 37.4062C44.4375 37.25 43.75 35.9688 44.0312 34.6562C44.3125 33.3125 45.3125 32.3438 46.375 32.5312C47.4688 32.75 48.0938 34.0312 47.8438 35.3125C47.5938 36.6562 46.5938 37.5938 45.5312 37.4062ZM7.625 37.4062C6.53125 37.25 5.84375 35.9688 6.09375 34.6562C6.375 33.3125 7.40625 32.3438 8.4375 32.5312C9.5625 32.7812 10.1875 34.0312 9.9375 35.3125C9.6875 36.6562 8.65625 37.5938 7.625 37.4062Z"})})},689602:(e,t,i)=>{i.d(t,{$1:()=>D});var r=i(212847),a=i(250202),n=i(114710);const o=r.object({required:{r:r.lte(r.gte(r.integer(),0),255),g:r.lte(r.gte(r.integer(),0),255),b:r.lte(r.gte(r.integer(),0),255)},optional:{}}),l=r.object({required:{value:r.union([r.string(),r.nonEmpty(r.array(r.string()))])},optional:{section:r.literals(n.kE.avatar,n.kE.identifier,n.kE.primary,n.kE.secondary,n.kE.body)}}),s=a.kB.object({required:{url:a.kB.string()},optional:{}}),d=a.kB.object({required:{content:a.kB.string()},optional:{link:a.kB.nullable(s)}}),u=a.kB.union([a.kB.object({required:{text:d},optional:{type:a.kB.literal("text")}})]),c=a.kB.object({required:{value:a.kB.array(u)},optional:{section:a.kB.literals(n.kE.body,n.kE.title)}}),p=r.object({required:{value:r.union([r.string(),r.nonEmpty(r.array(r.string()))])},optional:{language:r.string(),section:r.literals(n.kE.body)}}),g=r.object({required:{value:r.union([r.boolean(),r.nonEmpty(r.array(r.boolean()))])},optional:{}}),m=r.object({required:{value:r.union([r.number(),r.nonEmpty(r.array(r.number()))])},optional:{}}),f=r.object({required:{value:r.union([r.string(),r.nonEmpty(r.array(r.string()))])},optional:{color:o,section:r.literals(n.kE.primary)}}),_=r.object({required:{value:r.union([r.string(),r.tuple([r.string()])])},optional:{color:o,section:r.literal(n.kE.title)}}),h=r.object({required:{value:r.union([o,r.nonEmpty(r.array(o))])},optional:{section:r.literals(n.kE.entity,n.kE.background)}}),v=r.object({required:{value:r.union([r.dateString(),r.nonEmpty(r.array(r.dateString()))])},optional:{section:r.literals(n.kE.primary,n.kE.secondary)}}),y=r.object({required:{value:r.union([r.dateString(),r.nonEmpty(r.array(r.dateString()))])},optional:{section:r.literals(n.kE.primary,n.kE.secondary)}}),b=r.object({required:{value:r.tuple([r.dateString(),r.dateString()])},optional:{section:r.literals(n.kE.primary,n.kE.secondary)}}),x=r.object({required:{value:r.union([r.dateString(),r.tuple([r.dateString()])])},optional:{section:r.literals(n.kE.primary,n.kE.secondary)}}),I=r.object({required:{value:r.union([r.dateString(),r.tuple([r.dateString()])])},optional:{section:r.literals(n.kE.primary,n.kE.secondary)}}),S=r.union([r.object({required:{plain_text:l},optional:{type:r.literal("plain_text")}}),r.object({required:{rich_text:c},optional:{type:r.literal("rich_text")}}),r.object({required:{boolean:g},optional:{type:r.literal("boolean")}}),r.object({required:{number:m},optional:{type:r.literal("number")}}),r.object({required:{enum:f},optional:{type:r.literal("enum")}}),r.object({required:{title:_},optional:{type:r.literal("title")}}),r.object({required:{color:h},optional:{type:r.literal("color")}}),r.object({required:{date:v},optional:{type:r.literal("date")}}),r.object({required:{datetime:y},optional:{type:r.literal("datetime")}}),r.object({required:{datetimerange:b},optional:{type:r.literal("datetimerange")}}),r.object({required:{created_datetime:x},optional:{type:r.literal("created_datetime")}}),r.object({required:{last_edited_datetime:I},optional:{type:r.literal("last_edited_datetime")}}),r.object({required:{code:p},optional:{type:r.literal("code")}})]),w=r.object({required:{},optional:{section:r.literal(n.kE.embed)}}),j=r.object({required:{},optional:{section:r.literal(n.kE.embed)}}),M=r.object({required:{},optional:{section:r.literal(n.kE.embed)}}),k=r.object({required:{},optional:{section:r.literal(n.kE.embed)}}),C=r.object({required:{},optional:{format:r.nullable(r.literals("icon")),section:r.literals(n.kE.avatar,n.kE.entity,n.kE.embed)}}),F=r.intersection([r.object({required:{src_url:r.union([r.string(),r.nonEmpty(r.array(r.string()))])},optional:{default_height:r.number(),default_width:r.number()}}),r.union([r.object({required:{html:w},optional:{type:r.literal("html")}}),r.object({required:{pdf:j},optional:{type:r.literal("pdf")}}),r.object({required:{audio:M},optional:{type:r.literal("audio")}}),r.object({required:{video:k},optional:{type:r.literal("video")}}),r.object({required:{image:C},optional:{type:r.literal("image")}})])]),R=r.union([r.string(),r.nonEmpty(r.array(r.string()))]),Z=r.object({required:{uri:R},optional:{type:r.literal("mention"),mention:r.object({required:{},optional:{section:r.literal(n.kE.primary)}}),extension:r.isNull()}}),T=r.object({required:{uri:R},optional:{type:r.literal("extension"),extension:r.nonEmpty(r.array(r.object({required:{id:r.string()},optional:{section:r.literals(n.kE.avatar,n.kE.embed,n.kE.primary,n.kE.secondary)}}))),mention:r.isNull()}}),V=r.union([Z,T]),P=r.object({required:{uri:R},optional:{}}),B=r.intersection([r.object({required:{id:r.string(),name:r.string()},optional:{}}),r.union([r.object({required:{inline:S},optional:{type:r.literal("inline")}}),r.object({required:{embed:F},optional:{type:r.literal("embed")}}),r.object({required:{relation:V},optional:{type:r.literal("relation")}}),r.object({required:{people:P},optional:{type:r.literal("people")}})])]),D=r.array(B)}}]);