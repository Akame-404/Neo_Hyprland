"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[67501],{646225:(e,t,i)=>{i.d(t,{Nc:()=>ce,PU:()=>Ie,vC:()=>Pe});i(21703),i(757658),i(667294);var a=i(724405),o=i(14577),n=i(841892),l=i(541432),s=i(977657),r=i(474181),c=i(145953),d=i(421202),u=i(509844),m=i(709291),p=i(531701),g=i(653965),b=i(401898),f=i(62967),y=i(304727),h=i(536280),w=i(567060),k=i(742858),T=i(210228),v=i(763594),C=i(183583),M=i(144500),S=i(381726),x=i(638086),V=i(147099),I=i(672495),P=i(68204),Z=i(119037),j=i(700042),B=i(599417),D=i(840959),K=i(433929),F=i(889014),N=i(905162),R=i(80444),H=i(319385),z=i(530874),A=i(27724),U=i(924666),G=i(175306),O=i(221797),E=i(547801),_=i(646564),L=i(811732),q=i(785893);const $=.75,J=.5,W=(0,m.defineMessages)({basicBlocksSection:{id:"action.section.basicBlocks",defaultMessage:"Basic blocks"},tableViewTitle:{id:"newBlock.tableView.title",defaultMessage:"Table view"},tableViewDescription:{id:"newBlock.tableView.description",defaultMessage:"Add a table view for a new or existing database."},boardViewTitle:{id:"newBlock.boardView.title",defaultMessage:"Board view"},boardViewDescription:{id:"newBlock.boardView.description",defaultMessage:"Create a kanban board database view."},galleryViewTitle:{id:"newBlock.galleryView.title",defaultMessage:"Gallery view"},galleryViewDescription:{id:"newBlock.galleryView.description",defaultMessage:"Create a gallery database view."},listViewTitle:{id:"newBlock.listView.title",defaultMessage:"List view"},listViewDescription:{id:"newBlock.listView.description",defaultMessage:"Create a list database view."},calendarViewTitle:{id:"newBlock.calendarView.title",defaultMessage:"Calendar view"},calendarViewDescription:{id:"newBlock.calendarView.description",defaultMessage:"Create a calendar database view."},timelineViewTitle:{id:"newBlock.timelineView.title",defaultMessage:"Timeline view"},timelineViewDescription:{id:"newBlock.timelineView.description",defaultMessage:"Create a timeline database view."},barChartViewTitle:{id:"newBlock.barChart.title",defaultMessage:"Bar chart view"},barChartViewDescription:{id:"newBlock.barChart.description",defaultMessage:"Create a bar chart of an existing database."},lineChartViewTitle:{id:"newBlock.lineChart.title",defaultMessage:"Line chart view"},lineChartViewDescription:{id:"newBlock.lineChart.description",defaultMessage:"Create a line chart of an existing database."},donutChartViewTitle:{id:"newBlock.donutChart.title",defaultMessage:"Donut chart view"},donutChartViewDescription:{id:"newBlock.donutChart.description",defaultMessage:"Create a donut chart of an existing database."},numberChartViewTitle:{id:"newBlock.numberChart.title",defaultMessage:"Number chart view"},numberChartViewDescription:{id:"newBlock.numberChart.description",defaultMessage:"Create a number chart of an existing database."},databaseInlineTitle:{id:"newBlock.databaseInline.title",defaultMessage:"Database - Inline"},formTitle:{id:"newBlock.databaseInline.form",defaultMessage:"Form"},databaseInlineDescription:{id:"newBlock.databaseInline.description",defaultMessage:"Add a new inline database to this page."},formDescription:{id:"newBlock.form.description",defaultMessage:"Create a form from scratch"},databaseInlineKeywords:{id:"newBlock.databaseInline.fuzzySearchKeywords",defaultMessage:"Database Inline db"},formInlineKeywords:{id:"newBlock.form.fuzzySearchKeywords",defaultMessage:"Form"},databaseFullPageTitle:{id:"newBlock.databaseFullPage.title",defaultMessage:"Database - Full page"},databaseFullPageDescription:{id:"newBlock.databaseFullPage.description",defaultMessage:"Add a new database as a sub-page."},databaseFullPageKeywords:{id:"newBlock.databaseFullPage.fuzzySearchKeywords",defaultMessage:"Database Full page db"},linkedViewOfCollectionTitle:{id:"newBlock.linkedViewOfCollection.title",defaultMessage:"Linked view of database"},linkedViewOfCollectionMobileTitle:{id:"newBlock.linkedViewOfCollectionMobile.title",defaultMessage:"Linked view"},linkedViewOfCollectionKeywords:{id:"newBlock.linkedViewOfCollection.fuzzySearchKeywords",defaultMessage:"Create linked view of database db"},linkedViewOfCollectionDescription:{id:"newBlock.linkedViewOfCollection.description",defaultMessage:"Add an existing database to this page."},mentionPersonTitle:{id:"action.mentionPerson.title",defaultMessage:"Mention a person"},mentionPersonDescription:{id:"action.mentionPerson.description",defaultMessage:"Ping someone so they get a notification."},mentionPageTitle:{id:"action.mentionPage.title",defaultMessage:"Mention a page"},mentionPageDescription:{id:"action.mentionPage.description",defaultMessage:"Mention a page and place in text."},dateOrReminderTitle:{id:"action.dateOrReminder.title",defaultMessage:"Date or reminder"},dateOrReminderDescription:{id:"action.dateOrReminder.description",defaultMessage:"Insert a date or reminder in text."},insertEmojiTitle:{id:"action.insertEmoji.title",defaultMessage:"Emoji"},insertEmojiDescription:{id:"action.insertEmoji.description",defaultMessage:"Search for an emoji to place in text."},insertInlineEquationTitle:{id:"action.insertInlineEquation.title",defaultMessage:"Inline equation"},insertInlineEquationKeywords:{id:"action.insertInlineEquation.fuzzySearchKeyword",defaultMessage:"LaTeX Math Inline Equation $"},insertInlineEquationDescription:{id:"action.insertInlineEquation.description",defaultMessage:"Insert mathematical symbols in text."},databaseSection:{id:"action.section.database",defaultMessage:"Database"},mediaSection:{id:"action.section.media",defaultMessage:"Media"},aiBlocksSection:{id:"action.section.aiBlocks",defaultMessage:"AI blocks"},advancedBlocksSection:{id:"action.section.advancedBlocks",defaultMessage:"Advanced blocks"},inlineSection:{id:"action.section.inline",defaultMessage:"Inline"},embedsSection:{id:"action.section.embeds",defaultMessage:"Embeds"},syncedDatabasesSection:{id:"action.section.syncedDatabases",defaultMessage:"Synced Databases"},actionsSection:{id:"action.section.actions",defaultMessage:"Actions"},importsBlockSection:{id:"action.section.importsBlock",defaultMessage:"Import"}}),Y=[D.Hc[l.Ti.text],D.Hc[l.Ti.page],D.Hc[l.Ti.toDo],D.Hc[l.Ti.header],D.Hc[l.Ti.subHeader],D.Hc[l.Ti.subSubHeader],D.Hc[l.Ti.table],D.Hc[l.Ti.bulletedList],D.Hc[l.Ti.numberedList],D.Hc[l.Ti.toggle],D.Hc[l.Ti.quote],D.Hc[l.Ti.divider],D.Hc[l.Ti.linkToPage],D.Hc[l.Ti.callout]],Q=[D.Hc[l.Ti.image],D.Hc[l.Ti.bookmark],D.Hc[l.Ti.video],D.Hc[l.Ti.audio],D.Hc[l.Ti.code],D.Hc[l.Ti.file],D.Hc[l.Ti.drawing]],X=[D.tg[l.tD.csvImport],D.tg[l.tD.htmlImport],D.tg[l.tD.markdownImport],D.tg[l.tD.asanaImport],D.tg[l.tD.confluenceApiImport],D.tg[l.tD.googleDocsImport],D.tg[l.tD.trelloImport],D.tg[l.tD.dropboxPaperImport],D.tg[l.tD.evernoteImport],D.tg[l.tD.workflowyImport],D.tg[l.tD.wordImport],D.tg[l.tD.mondayImport],D.tg[l.tD.quipImport],D.tg[l.tD.genericImport],D.tg[l.tD.pdfImport]],ee=(0,D.MU)({key:"table view",blockType:l.Ti.collectionView,displayName:W.tableViewTitle,thumbnail:n.Z.images.blocks.tableViewInlinePng,description:W.tableViewDescription,fuzzySearchKeywords:W.tableViewTitle,tooltipPhoto:n.Z.images.tooltips.blocks.tablePng,createTemplate:()=>j.iC({isInline:!0,viewType:"table"}),postCreateCallback:e=>{const t=e.getCollectionViewStores()[0];t&&(0,F.u)(t.id,{viewType:"table"})},collectionViewType:"table"}),te=(0,D.MU)({key:"board view",blockType:l.Ti.collectionView,displayName:W.boardViewTitle,thumbnail:n.Z.images.blocks.boardInlinePng,description:W.boardViewDescription,fuzzySearchKeywords:W.boardViewTitle,tooltipPhoto:n.Z.images.tooltips.blocks.boardPng,createTemplate:()=>j.iC({isInline:!0,viewType:"board"}),postCreateCallback:e=>{const t=e.getCollectionViewStores()[0];t&&(0,F.u)(t.id,{viewType:"board"})},collectionViewType:"board"}),ie=(0,D.MU)({key:"gallery view",blockType:l.Ti.collectionView,displayName:W.galleryViewTitle,thumbnail:n.Z.images.blocks.galleryInlinePng,description:W.galleryViewDescription,fuzzySearchKeywords:W.galleryViewTitle,tooltipPhoto:n.Z.images.tooltips.blocks.galleryPng,createTemplate:()=>j.iC({isInline:!0,viewType:"gallery"}),postCreateCallback:e=>{const t=e.getCollectionViewStores()[0];t&&(0,F.u)(t.id,{viewType:"gallery"})},collectionViewType:"gallery"}),ae=(0,D.MU)({key:"list view",blockType:l.Ti.collectionView,displayName:W.listViewTitle,thumbnail:n.Z.images.blocks.listInlinePng,description:W.listViewDescription,fuzzySearchKeywords:W.listViewTitle,tooltipPhoto:n.Z.images.tooltips.blocks.listPng,createTemplate:()=>j.iC({isInline:!0,viewType:"list"}),postCreateCallback:e=>{const t=e.getCollectionViewStores()[0];t&&(0,F.u)(t.id,{viewType:"list"})},collectionViewType:"list"}),oe=(0,D.MU)({key:"calendar view",blockType:l.Ti.collectionView,displayName:W.calendarViewTitle,thumbnail:n.Z.images.blocks.calendarInlinePng,description:W.calendarViewDescription,fuzzySearchKeywords:W.calendarViewTitle,tooltipPhoto:n.Z.images.tooltips.blocks.calendarPng,createTemplate:()=>j.iC({isInline:!0,viewType:"calendar"}),postCreateCallback:e=>{const t=e.getCollectionViewStores()[0];t&&(0,F.u)(t.id,{viewType:"calendar"})},collectionViewType:"calendar"}),ne=(0,D.MU)({key:"timeline view",blockType:l.Ti.collectionView,displayName:W.timelineViewTitle,thumbnail:n.Z.images.blocks.timelineInlinePng,description:W.timelineViewDescription,fuzzySearchKeywords:W.timelineViewTitle,tooltipPhoto:n.Z.images.tooltips.blocks.timelinePng,createTemplate:()=>j.iC({isInline:!0,viewType:"timeline"}),postCreateCallback:e=>{const t=e.getCollectionViewStores()[0];t&&(0,F.u)(t.id,{viewType:"timeline"})},collectionViewType:"timeline"}),le=(0,D.MU)({key:"bar chart view",blockType:l.Ti.collectionView,displayName:W.barChartViewTitle,thumbnail:n.Z.images.blocks.chartBarPng,description:W.barChartViewDescription,fuzzySearchKeywords:W.barChartViewTitle,tooltipPhoto:n.Z.images.tooltips.blocks.chartBarViewPng,collectionViewType:"chart",createTemplate:()=>j.iC({isInline:!0,viewType:"chart",chartType:"column"}),postCreateCallback:e=>{const t=e.getCollectionViewStores()[0];t&&(0,F.u)(t.id,{viewType:"chart"})}}),se=(0,D.MU)({key:"line chart view",blockType:l.Ti.collectionView,displayName:W.lineChartViewTitle,thumbnail:n.Z.images.blocks.chartLinePng,description:W.lineChartViewDescription,fuzzySearchKeywords:W.lineChartViewTitle,tooltipPhoto:n.Z.images.tooltips.blocks.chartLineViewPng,collectionViewType:"chart",createTemplate:()=>j.iC({isInline:!0,viewType:"chart",chartType:"line"}),postCreateCallback:e=>{const t=e.getCollectionViewStores()[0];t&&(0,F.u)(t.id,{viewType:"chart"})}}),re=(0,D.MU)({key:"donut chart view",blockType:l.Ti.collectionView,displayName:W.donutChartViewTitle,thumbnail:n.Z.images.blocks.chartDonutPng,description:W.donutChartViewDescription,fuzzySearchKeywords:W.donutChartViewTitle,tooltipPhoto:n.Z.images.tooltips.blocks.chartDonutViewPng,collectionViewType:"chart",createTemplate:()=>j.iC({isInline:!0,viewType:"chart",chartType:"donut"}),postCreateCallback:e=>{const t=e.getCollectionViewStores()[0];t&&(0,F.u)(t.id,{viewType:"chart"})}}),ce=(0,D.MU)({key:"database inline",blockType:l.Ti.collectionView,displayName:W.databaseInlineTitle,thumbnail:n.Z.images.blocks.tableViewInlinePng,description:W.databaseInlineDescription,fuzzySearchKeywords:W.databaseInlineKeywords,tooltipPhoto:n.Z.images.tooltips.blocks.tableViewPng,createTemplate:e=>j.W_({environment:e,isInline:!0}),collectionViewType:"inline"}),de=(0,D.MU)({key:"form",blockType:l.Ti.collectionView,displayName:W.formTitle,thumbnail:n.Z.images.blocks.formViewPng,description:W.formDescription,fuzzySearchKeywords:W.formInlineKeywords,tooltipPhoto:n.Z.images.tooltips.blocks.tableViewPng,createTemplate:e=>j.Xq({environment:e,isInline:!0}),postCreateCallback:(e,t,i)=>{var a;const o=e.getCollectionStore(),n=null==o||null===(a=o.getModel())||void 0===a?void 0:a.getNormalizedSchema(),l=e;if(!n)throw new Error("Schema not found");(0,S.gu)({environment:t,transaction:i,collectionViewBlockStore:l,schema:n}),(0,S.H2)({environment:t,transaction:i,collectionViewBlockStore:l,schema:n})},collectionViewType:"inline",shouldShow:e=>!e.environment.device.isMobile&&Z.zzA(e)}),ue=(0,D.MU)({key:"database full page",blockType:l.Ti.collectionViewPage,displayName:W.databaseFullPageTitle,thumbnail:n.Z.images.blocks.tableViewPng,description:W.databaseFullPageDescription,fuzzySearchKeywords:W.databaseFullPageKeywords,tooltipPhoto:n.Z.images.tooltips.blocks.tableViewPng,createTemplate:e=>j.W_({environment:e,isInline:!1}),collectionViewType:"full_page"}),me=(0,D.MU)({key:"linked database",blockType:l.Ti.collectionView,displayName:W.linkedViewOfCollectionTitle,fuzzySearchKeywords:W.linkedViewOfCollectionKeywords,thumbnail:n.Z.images.blocks.linkPng,description:W.linkedViewOfCollectionDescription,tooltipPhoto:n.Z.images.tooltips.blocks.tablePng,createTemplate:()=>j.iC({isInline:!0,viewType:"table"}),shouldShow:e=>!e.environment.device.isMobile}),pe=(0,D.MU)({key:"linked database mobile",blockType:l.Ti.collectionView,displayName:W.linkedViewOfCollectionMobileTitle,fuzzySearchKeywords:W.linkedViewOfCollectionKeywords,thumbnail:n.Z.images.blocks.linkPng,description:W.linkedViewOfCollectionDescription,tooltipPhoto:n.Z.images.tooltips.blocks.tablePng,createTemplate:()=>j.iC({isInline:!0,viewType:"table"}),shouldShow:e=>e.environment.device.isMobile});function ge(e,t){return[ee,te,ie,ae,oe,ne,...e?[le,se,re]:[],ce,...t?[de]:[],ue,me,pe]}const be=D.O5.map((e=>D.Hc[e])),fe=[D.Hc[l.Ti.tableOfContents],D.Hc[l.Ti.equation],D.Hc[l.Ti.button],D.Hc[l.Ti.factory],D.Hc[l.Ti.breadcrumb],D.Hc[l.Ti.tab],D.Hc[l.Ti.transclusionContainer],D.Hc[l.MF.toggleFormatHeaderBlock],D.Hc[l.MF.toggleFormatSubHeaderBlock],D.Hc[l.MF.toggleFormatSubSubHeaderBlock],D.Hc[l.MF.column2Block],D.Hc[l.MF.column3Block],D.Hc[l.MF.column4Block],D.Hc[l.MF.column5Block],D.Hc[l.MF.mermaidCodeBlock]],ye=[...[{key:"mentionPerson",title:W.mentionPersonTitle,thumbnail:n.Z.images.blocks.mentionPersonPng,description:W.mentionPersonDescription,tooltipPhoto:n.Z.images.tooltips.blocks.mentionPersonPng,validators:[Z.ffD(Z.ypk)],action:e=>{let{environment:t}=e;w.lZ({environment:t,mentionTypes:{user:!0,inviteUserToWorkspace:!0,inviteUserToPage:!0,bot:!1,date:!1,page:!1,heading:!1,createPage:!1,reminder:!1,templateVariable:!0,group:!1}})}},{key:"mentionPage",title:W.mentionPageTitle,thumbnail:n.Z.images.blocks.mentionPagePng,description:W.mentionPageDescription,tooltipPhoto:n.Z.images.tooltips.blocks.mentionPagePng,validators:[Z.ffD(Z.ypk)],action:e=>{let{environment:t}=e;w.lZ({environment:t,mentionTypes:{user:!1,inviteUserToWorkspace:!1,inviteUserToPage:!1,bot:!1,date:!1,reminder:!1,page:!0,heading:!1,createPage:!1,templateVariable:!1,group:!1}})}},{key:"dateOrReminder",title:W.dateOrReminderTitle,thumbnail:n.Z.images.blocks.mentionDatePng,description:W.dateOrReminderDescription,tooltipPhoto:n.Z.images.tooltips.blocks.mentionTimePng,validators:[Z.ffD(Z.ypk)],action:e=>{let{environment:t}=e;w.lZ({environment:t,mentionTypes:{user:!1,inviteUserToWorkspace:!1,inviteUserToPage:!1,bot:!1,date:!0,reminder:!0,page:!1,heading:!1,createPage:!1,templateVariable:!0,group:!1}})}}].map((e=>(0,f.cN)({key:`insert ${e.key}`,displayName:e.title,analyticsName:"Insert mention",render:t=>(0,q.jsx)(V.Z,{...t,title:K.default.formatMessage(e.title),thumbnail:e.thumbnail,tooltipPhoto:e.tooltipPhoto,description:K.default.formatMessage(e.description),format:V.Q.Insert}),validators:[Z.ffD(Z.ypk),Z.YZb],closeParentMenu:!0,action:t=>{let{environment:i}=t;return e.action({environment:i})},nativeImageReference:t=>(0,f.aS)({thumbnail:e.thumbnail})}))),(0,f.cN)({key:"insert emoji",displayName:W.insertEmojiTitle,analyticsName:W.insertEmojiTitle.defaultMessage,validators:[Z.ffD(Z.ypk),Z.YZb],closeParentMenu:!0,render:e=>(0,q.jsx)(V.Z,{...e,title:K.default.formatMessage(W.insertEmojiTitle),description:K.default.formatMessage(W.insertEmojiDescription),thumbnail:n.Z.images.blocks.inlineEmojiPng,tooltipPhoto:n.Z.images.tooltips.blocks.inlineEmojiPng,format:V.Q.Insert}),action:e=>{let{environment:t}=e;return y.jZ(t)},nativeImageReference:e=>(0,f.aS)({thumbnail:n.Z.images.blocks.inlineEmojiPng})}),(0,f.cN)({key:"insert inline equation",displayName:W.insertInlineEquationTitle,analyticsName:W.insertInlineEquationTitle.defaultMessage,fuzzySearchKeywords:W.insertInlineEquationKeywords,validators:[Z.ffD(Z.ypk),Z.YZb],closeParentMenu:!0,render:e=>(0,q.jsx)(V.Z,{...e,title:K.default.formatMessage(W.insertInlineEquationTitle),description:K.default.formatMessage(W.insertInlineEquationDescription),thumbnail:n.Z.images.blocks.inlineEquationPng,tooltipPhoto:n.Z.images.tooltips.blocks.inlineEquationPng,format:V.Q.Insert}),action:e=>{let{environment:t}=e;return h.qn({environment:t,analyticsFrom:"slash_menu"})},nativeImageReference:e=>(0,f.aS)({thumbnail:n.Z.images.blocks.inlineEquationPng})})];function he(){let e,t,i,a;const o=[];for(const n of we.state)"Figma"===n.displayName?e=n:"Hex"===n.displayName?t=n:"Google Drive"===n.displayName?i=n:"Whimsical"===n.displayName?a=n:o.push(n);return[D.Hc[l.Ti.embed],i??D.Hc[l.Ti.drive],D.Hc[l.Ti.tweet],D.Hc[l.Ti.gist],D.Hc[l.Ti.maps],e??D.Hc[l.Ti.figma],D.Hc[l.Ti.abstract],D.Hc[l.Ti.invision],D.Hc[l.Ti.mixpanel],D.Hc[l.Ti.framer],a??D.Hc[l.Ti.whimsical],D.Hc[l.Ti.miro],D.Hc[l.Ti.sketch],D.Hc[l.Ti.excalidraw],D.Hc[l.Ti.pdf],D.Hc[l.Ti.loom],D.Hc[l.Ti.typeform],D.Hc[l.Ti.codepen],D.Hc[l.Ti.replit],t??D.Hc[l.Ti.hex],D.Hc[l.Ti.deepnote],...o]}const we=new o.Z((()=>z.Z.integrations.state.filter((e=>e.id!==s.U9&&e.id!==s.Dv)).map((e=>{if((0,r.mo)(e)||(0,r.zc)(e)){const t=(0,r.mo)(e)?"link preview":"data sync";return{key:e.id,displayName:e.name,analyticsName:e.name,searchName:`${t} ${e.name}`,thumbnail:e.info.icon??n.Z.images.blocks.embedPng,description:e.info.tagline,templateRootBlockId:"root",blockType:l.Ti.externalObjectInstance,shouldShow:e=>!Z.nJQ(e),createTemplate:()=>{const t={is_placeholder:!0,integration_id:e.id};return c.Ao.create({[d.iU]:{root:{id:"root",type:l.Ti.externalObjectInstance,format:t}}})}}}})).filter(b.$K)),{debugName:"getExternalIntegrationCreateBlockItems"});function ke(e){return new o.Z((()=>{const t=e.isMobileNative?[]:[Te(),ve(e.environment)],i=Se({aiCompletionSections:t,analyticsFrom:"add_menu",isMobileNative:e.isMobileNative}),a=(o=Se({aiCompletionSections:t,analyticsFrom:"slash_menu",isMobileNative:e.isMobileNative}),[...o,L.g,(0,f.$J)({key:"slash actions",title:W.actionsSection,render:e=>(0,q.jsx)(I.Z,{...e}),actions:Ve((0,P.RP)(G.Qi,(e=>e&&!e.subActions&&!e.hideFromSlashActionMenu)))}),O.rz,O.Vm]);var o;return{insertActions:i,slashActions:a}}),{debugName:"insertAndSlashActionsStore"})}function Te(){const{maxActionsBeforeMore:e,actions:t}=function(){const e={selectionType:"cursor",isPageEmpty:!Z.IC9()},t=(0,B.up)(e),i=g.xH((0,B.pv)(t,e).map((e=>{let[t,i]=e;return i}))),a=v.Z.state,o=i.map((e=>(0,_.NZ)({prompt:e,validators:E.Pz,type:"cursor",from:"slash_menu",sortScoreMultiplier:$}))).filter(b.$K),n=a?3:1;return{maxActionsBeforeMore:n,actions:o}}();return(0,f.$J)({key:"completions",title:_.sY.notionAI,render:(0,_.yY)(),actions:(0,_.YV)(t,e)})}function ve(e){const{maxActionsBeforeMore:t,actions:i}=function(e){const t=R.default.state.mainEditorCurrentBlockStore?(0,C.filterAndRankAssistantSurfaceActionsForContext)((0,C.clientSkillToAssistantSurfaceAction)((0,M.getAllClientSkills)({currentPageRecordPointer:void 0})),{type:"assistant",surface:"writer",isMobile:e.device.isMobile,pageStore:R.default.state.mainEditorCurrentBlockStore,selectionState:A.default.state,textSelectionState:U.default.state,assistantTutorialDismissedAt:void 0}):[],i=v.Z.state,a=t.map((e=>(0,f.cN)({key:`completions.${e.key}`,analyticsName:`Completions - ${e.key}`,displayName:e.displayName,fuzzySearchKeywords:e.displayName,validators:E.vW,closeParentMenu:!0,svg:()=>(0,q.jsx)(Ce,{clientSkill:e}),right:(0,_.cx)("submitPrompt"),sortScoreMultiplier:$,action:t=>{let{environment:i}=t;const a=(0,M.dangerouslyCreateClientSkillWithParameterValues)(e);(0,_.vi)({environment:i,clientSkillWithParameterValues:a,from:"slash_menu"})}}))).filter(b.$K),o=i?5:1;return{maxActionsBeforeMore:o,actions:a}}(e);return(0,f.$J)({key:"completionsSkills",title:_.sY.notionAI,render:(0,_.yY)(),actions:(0,_.YV)(i,t,!0)})}function Ce(e){const{clientSkill:t}=e,i=(0,a.Fg)(),o=(0,M.skillSectionTypeGivenSkillCategory)(t.category);return(0,q.jsx)(_.lA,{svg:t.icon,svgFill:(0,M.getSkillSectionColor)(o,i).color})}const Me=new o.Z((()=>z.Z.integrations.state.filter(u.l).map((e=>({key:`synced database ${e.id}`,displayName:`${e.name}`,analyticsName:`synced database ${e.name}`,searchName:`synced database ${e.name}`,thumbnail:e.info.icon??n.Z.images.blocks.embedPng,description:e.info.tagline,templateRootBlockId:"root",blockType:l.Ti.collectionView,shouldShow:e=>!Z.nJQ(e),createTemplate:()=>j.sU({isInline:!0,viewType:"table",integrationId:e.id}),postCreateCallback:e=>{const t=e.getCollectionViewStores()[0];t&&(0,F.u)(t.id,{viewType:"table"})}})))),{debugName:"getExternalIntegrationCreateCollectionViewBlockItems"});function Se(e){const{aiCompletionSections:t,analyticsFrom:i,isMobileNative:a}=e,o=H.default.checkGate({gateName:"charts_mvp"}),n=(0,x.eC)(),l=[(0,f.$J)({key:"Insert Basic Blocks",title:W.basicBlocksSection,render:e=>(0,q.jsx)(I.Z,{...e}),actions:Y.map((e=>xe(e,i)))}),...t,(0,f.$J)({key:"Insert Media",title:W.mediaSection,render:e=>(0,q.jsx)(I.Z,{...e}),actions:Q.map((e=>xe(e,i)))}),(0,f.$J)({key:"Insert Database New",title:W.databaseSection,render:e=>(0,q.jsx)(I.Z,{...e}),actions:ge(o,n).map((e=>xe(e,i)))}),(0,f.$J)({key:"Insert AI Blocks",title:W.aiBlocksSection,render:e=>(0,q.jsx)(I.Z,{...e}),actions:be.map((e=>xe(e,i,void 0,J)))}),(0,f.$J)({key:"Insert Advanced Blocks",title:W.advancedBlocksSection,render:e=>(0,q.jsx)(I.Z,{...e}),actions:fe.map((e=>xe(e,i)))}),(0,f.$J)({key:"Insert Inline",title:W.inlineSection,render:e=>(0,q.jsx)(I.Z,{...e}),actions:ye}),(0,f.$J)({key:"Insert Embeds",title:W.embedsSection,render:e=>(0,q.jsx)(I.Z,{...e}),actions:he().map((e=>xe(e,i)))}),(0,f.$J)({key:"Insert Synced Databases",title:W.syncedDatabasesSection,render:e=>(0,q.jsx)(I.Z,{...e}),actions:Me.state.map((e=>xe(e,i)))})];return a||l.push((0,f.$J)({key:"Import data from other tools",title:W.importsBlockSection,render:e=>(0,q.jsx)(I.Z,{...e}),actions:X.map((e=>function(e){const t=t=>!e.shouldShow||e.shouldShow(t);return{key:`import ${e.key}`,displayName:e.displayName,analyticsName:e.analyticsName,searchName:e.searchName,render:t=>(0,q.jsx)(V.Z,{...t,...e,title:e.displayName,format:V.Q.Insert}),validators:[Z.ffD(Z.ypk),t],closeParentMenu:!0,action:e.action}}(e)))})),l}function xe(e,t,i,a){const o=[];l.re[e.blockType]&&!e.isToggleable||o.push(Z.ffD(Z.ypk));return o.push((t=>!e.shouldShow||e.shouldShow(t))),{key:`insert ${e.key}`,displayName:e.displayName,analyticsName:e.analyticsName,searchName:e.searchName,render:t=>(0,q.jsx)(V.Z,{...t,...e,title:e.displayName,format:V.Q.Insert,...i}),closeParentMenu:!0,validators:o,action:i=>{let{environment:a}=i;T.createAndCommit({userAction:"actionRegistry.createInsertAction",environment:a,perform:i=>{k.at({environment:a,selection:A.default.state.stores,createBlockItem:e,analyticsFrom:t,transaction:i})}})},nativeImageReference:t=>{if((0,N.Y)("supportsNativeMobileDynamicActionBar")){const i=n.Z.images.mab,a=`${g.eV(e.key)}Svg`,o=["drive","maps","figma","whimsical","miro","sketch","excalidraw","loom"].includes(a),l=(0,p.gh)({theme:t.environment.ThemeModeStore.state});return{imageUrl:i[a],imageTintColor:o?void 0:(0,p.J1)(l.v2.icon.secondary)}}return(0,f.aS)({thumbnail:e.thumbnail})},sortScoreMultiplier:a}}function Ve(e){return e.reduce(((e,t)=>[...e,...t.actions]),[])}function Ie(e){return ke({isMobileNative:!1,environment:e})}const Pe=ke({isMobileNative:!0})},764131:(e,t,i)=>{i.d(t,{Z:()=>B});var a=i(667294),o=i(800480),n=i(886628),l=i(724405),s=i(542853),r=i(76233),c=i(709291),d=i(531701),u=i(137810),m=i(436610),p=i(498724),g=i(460709),b=i(98742),f=i(489086),y=i(152689),h=i(863334),w=i(924666),k=i(541216),T=i(164921),v=i(231945),C=i(256940),M=i(58261),S=i(478140),x=i(632163),V=i(840721),I=i(672495),P=i(526388),Z=i(785893);const j=a.Fragment;const B=function(e){const{disabled:t,style:i,blockStore:B}=e,D=(0,n.qz)(e.ignoreSelectionAreaStore,h.Z),K=(0,o.O7)(),F=(0,c.useIntl)(),N=(0,l.Fg)(),R=(0,a.useCallback)((()=>{p.aS({environment:K,annotation:["h",y.Z.state.color]}),m.mt(K,{action:"h",color:y.Z.state.color})}),[K]),H=(0,a.useCallback)((e=>{m.mt(K,{action:"h"})}),[K]),z=(0,a.useCallback)((()=>{w.default.emit()}),[]),A=(0,a.useCallback)((e=>{p.mX({environment:K,annotationType:"h"}),y.Z.setHighlightColor(e),R()}),[K,R]),U=(0,a.useCallback)(((e,t,i,a)=>{const o={key:t||e,action:()=>{i(),A(e),a.close()},render:i=>(0,Z.jsx)(k.Z,{...i,color:e,overrideDisplayName:t})};return o}),[A]),G=(0,n.VK)((()=>{const e=(0,f.Ld)("h");if(!e){if(B){const{block_color:e}=B.getFormat();if(e&&d.CY.includes(e))return e}return"default"}return r.zIN(e)}),[B]),O=(0,l.yK)((e=>{const t=(0,d.A_)(G,e);return{colorIcon:{display:"inline-flex",alignItems:"center",justifyContent:"center",height:18,textAlign:"center",fontSize:15,borderRadius:2,...!K.device.isMobile&&{width:18,fontWeight:u.Z.fontWeight.medium,marginBottom:2},...t},colorIconCircle:{width:16,height:16,borderRadius:8,background:t.color??t.fill??t.background}}}),[K.device.isMobile,G]);return(0,Z.jsx)(v.ZP,{popupType:K.device.isMobile?v.Z4.SlideUp:v.Z4.Popup,originGap:4,onClose:z,onClick:H,renderOrigin:e=>(0,Z.jsx)(P.Z,{renderTooltip:()=>(0,Z.jsxs)(j,{children:[(0,Z.jsx)("div",{children:(0,Z.jsx)(c.FormattedMessage,{defaultMessage:"Text color",id:"highlightSelectionButton.textColor.tooltip"})}),(0,Z.jsx)("div",{children:(0,Z.jsx)(M.Z,{style:{color:N.mediumInvertedTextColor},name:"toggleHighlight"})})]}),render:a=>(0,Z.jsxs)(T.Z,{style:{display:"flex",alignItems:"center",paddingLeft:7,paddingRight:6,whiteSpace:"nowrap",borderRadius:6,...i},disabled:t,disabledFeedback:t,...(0,b.Z)(e,a),children:[K.device.isMobile?(0,Z.jsx)("div",{style:O.colorIcon,children:(0,Z.jsx)(c.FormattedMessage,{defaultMessage:"Color",id:"highlightSelectionButton.mobileColorIcon.label"})}):(0,Z.jsx)("div",{style:O.colorIconCircle}),(0,s.i)({width:10,marginLeft:4,fill:"dark"===N.mode?d.ZP.white:N.lightIconColor})]})}),render:e=>{let t;return t=K.device.isMobile?{menuType:g.og.Modal,title:(0,Z.jsx)(c.FormattedMessage,{defaultMessage:"Text color",id:"highlightSelectionButton.mobileTextColor.label"}),right:(0,Z.jsx)(V.CancelMenuText,{}),onClickRight:()=>{e.close()}}:{menuType:g.og.Popup},(0,Z.jsx)(S.Z,{...t,children:(0,Z.jsx)(C.Z,{capture:K.device.isMobile,store:D,ignoreBlockSelection:!1,restoreSelection:!0,render:t=>{const i=d.CY.map((i=>U(i,void 0,t,e))),a=[U("default",F.formatMessage({defaultMessage:"Default background",id:"highlightSelectionButton.defaultBackground.label"}),t,e),...d._K.map((i=>U(i,void 0,t,e)))],o=y.Z.state.color;return(0,Z.jsx)(x.Z,{type:x.i.Vertical,sections:[{key:0,items:[{key:0,action:()=>{t(),A(o),e.close()},render:e=>(0,Z.jsx)(k.Z,{...e,color:o,shortcuts:["toggleHighlight"]})}],render:e=>(0,Z.jsx)(I.Z,{...e,title:(0,Z.jsx)(c.FormattedMessage,{defaultMessage:"Last used",id:"highlightSelectionButton.lastUsedSection.label"}),isTitleUppercase:!0})},{key:1,items:i,render:e=>(0,Z.jsx)(I.Z,{...e,title:(0,Z.jsx)(c.FormattedMessage,{defaultMessage:"Color",id:"highlightSelectionButton.colorSection.label"}),isTitleUppercase:!0})},{key:2,items:a,render:e=>(0,Z.jsx)(I.Z,{...e,title:(0,Z.jsx)(c.FormattedMessage,{defaultMessage:"Background",id:"highlightSelectionButton.backgroundSection.label"}),isTitleUppercase:!0})}],initialFocus:void 0})}})})}})}},982945:(e,t,i)=>{i.d(t,{Z:()=>f});var a=i(667294),o=i(800480),n=i(724405),l=i(405829),s=i(709291),r=i(436610),c=i(18821),d=i(444534),u=i(924666),m=i(164921),p=i(58261),g=i(526388),b=i(785893);function f(e){const t=(0,o.O7)(),{isMobile:i}=(0,o.Fy)(),f=(0,n.yK)((e=>({keyboardShorcut:{color:e.mediumInvertedTextColor}})),[]),y=()=>{let i;const a=u.default.state;"empty"!==a.mode&&(i=d.g$.getSimpleTableCellFromTextSelection(),c.WD({environment:t,blockStore:e.blockStore,multiSelection:a.multiSelection})),r.mt(t,{action:"comment",from:i?"simple_table_cell":void 0})};return(0,b.jsx)(g.Z,{renderTooltip:()=>(0,b.jsxs)(a.Fragment,{children:[(0,b.jsx)("div",{children:(0,b.jsx)(s.FormattedMessage,{defaultMessage:"Comment",id:"inlineCommentButton.tooltip"})}),(0,b.jsx)("div",{children:(0,b.jsx)(p.Z,{style:f.keyboardShorcut,name:"comment"})})]}),render:t=>(0,b.jsxs)(m.Z,{style:{display:"flex",alignItems:"center",padding:e.iconOnly?6:"0 10px",whiteSpace:"nowrap",...e.style},disabled:e.disabled,disabledFeedback:e.disabled,onClick:y,...t,children:[(0,l.s)({width:i?18:16,height:i?18:16,marginTop:i?0:1,marginRight:e.iconOnly?0:4}),!i&&!e.iconOnly&&(0,b.jsx)(s.FormattedMessage,{defaultMessage:"Comment",id:"inlineCommentButton.commentLabel"})]})})}},573085:(e,t,i)=>{i.r(t),i.d(t,{CloseTemplatesPopupComponent:()=>me,default:()=>oe});var a=i(667294),o=i(800480),n=i(886628),l=i(724405),s=i(213148),r=i(709291),c=i(137810),d=i(554564),u=i(547307),m=i(104617),p=i(210228),g=i(304708),b=i(223196),f=i(80444),y=i(156638),h=i(188923),w=i(126263),k=i(749085);class T extends k.default{getInitialState(){return{inMemoryRecordCache:new w.Z({name:"TemplateRecordCacheStore"})}}}var v=i(164921),C=i(573063),M=i(568785),S=i(840721),x=i(953437),V=i(145953),I=i(599405),P=i(421202),Z=i(177420),j=i(23867),B=i(519889),D=i(76233),K=i(454642),F=i(761045),N=i(95477),R=i(466213),H=i(823586),z=i(628020),A=i(788632),U=i(304548);class G extends k.default{getInitialState(){return{}}}const O=G;var E=i(282136),_=i(206258),L=i(88893),q=i(288280),$=i(953336),J=i(164369),W=i(356638),Y=i(531192),Q=i(903553),X=i(785893);const ee=function(e){let{style:t,disabled:i,previewRootId:l,templateRecordCacheStore:s}=e;const c=(0,o.O7)(),d=(0,n.qz)(s,T),u=(0,n.qz)(void 0,O),m=(0,n.VK)((()=>A.Z.state),[]),p=(0,a.useCallback)(((e,a)=>(0,X.jsx)(ie,{err:e,store:a,style:t,disabled:i,pageTemplatePreviewStore:u})),[t,i,u]),g=(0,a.useCallback)((e=>async function(e,t,i){const a=await K.loadBlockSubtree(t,{block:{id:e,spaceId:(0,j.C)(void 0)},shallow:!1});if("failed"===a.type)throw a.error;const{currentSpaceStore:o}=f.default.state,n=q.subscriptionDataStoreInstance.state,{inMemoryRecordCache:l}=i.state;l.clearCache(),l.isTemplatePreview=!0;const s=new Set,r=new Set,c=V.PF.create(a.data.subtreeRecordMap);for(const g of c){const{pointer:e,model:i,role:a}=g;if(!a)return;if(l.setModelAndRole({pointer:e,userId:t.currentUser.id},i,"editor"),(null==i?void 0:i.table)===P.iU){const e=i.getProperties();for(const t of Object.keys(e)){const i=(0,D.lcG)(e[t]);for(const e of i)s.add(e);const a=(0,D.zyy)(e[t]);for(const e of a)r.add(e)}i.created_by_table&&i.created_by_id&&(i.created_by_table===B.KJ?s.add(i.created_by_id):r.add(i.created_by_id)),i.last_edited_by_table&&i.last_edited_by_id&&(i.last_edited_by_table===B.KJ?s.add(i.last_edited_by_id):r.add(i.last_edited_by_id))}}if(n)for(const g of(0,L.CM)(n))s.add(g.userId);const d=await Promise.all(Array.from(s).map((async e=>{if(o){const t=_.U6.createChildStore(o,{table:B.KJ,id:e});await t.load();return t.getValue()}{const i=await K.syncRecordValue(t,{pointer:{table:B.KJ,id:e},userId:t.currentUser.id,version:-1});return i&&i.value}})));for(const g of d)g&&l.setRecord({pointer:{table:B.KJ,id:g.id},userId:t.currentUser.id},{role:"reader",value:g});const u=await Promise.all(Array.from(r).map((async e=>{if(o){const t=(0,_.Kv)(o,{table:Z.cZ,id:e,spaceId:o.id});await t.load();return t.getValue()}{const i=await K.syncRecordValue(t,{pointer:{table:Z.cZ,id:e},userId:t.currentUser.id,version:-1});return i&&i.value}})));for(const g of u)g&&l.setRecord({pointer:{table:Z.cZ,id:g.id,spaceId:g.space_id},userId:t.currentUser.id},{role:"reader",value:g});const{currentUserStore:m}=f.default.state;m&&(await m.load(),l.setRecord({pointer:m.pointer,userId:t.currentUser.id},{role:"editor",value:m.getValue()}));const p=new _.G(t,{table:P.iU,id:e},{inMemoryRecordCache:l});return p}(e,c,d)),[c,d]),b=(0,a.useCallback)((e=>function(e,t,i){const{device:a}=t,o=(0,I.parseRoute)({url:e,isMobile:a.isMobile,baseUrl:N.default.domainBaseUrl,publicDomainName:N.default.publicDomainName,protocol:N.default.protocol,currentUrl:window.location.href});"page"===o.name&&(o.peekViewBlockId?i.setState({...i.state,navigatedRootId:o.peekViewBlockId}):i.setState({...i.state,navigatedRootId:o.blockId}))}(e,c,u)),[c,u]);return m.online?(0,X.jsx)(R.LF,{value:b,children:(0,X.jsx)(H.Z,{request:l,performRequest:g,render:p})}):(0,X.jsx)(R.LF,{value:b,children:(0,X.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",...t},children:(0,X.jsx)(J.Z,{isSmall:!0,children:(0,X.jsx)(r.FormattedMessage,{defaultMessage:"Please go online to view this template.",id:"pageTemplatePreview.offline.message"})})})})};function te(e){const{device:t}=e;return{flex:1,...t.isSafari&&{zIndex:1}}}function ie(e){let{store:t,style:i,disabled:a,pageTemplatePreviewStore:l}=e;const s=(0,o.O7)(),r=(0,n.qz)(l,O),c=(0,n.VK)((()=>r.state.navigatedRootId),[r]),d=(0,n.VK)((()=>t&&(0,z.Zy)({environment:s,store:t})),[s,t]);if(t&&d){let e;return e=c?_.G.createChildStore(t,{table:P.iU,id:c}):t,(0,X.jsx)("div",{style:i,children:(0,X.jsx)(Q.Z,{store:e,isDefaultContainer:!0,droppable:!0,render:t=>{let{selectableEvents:i,selectableHoverMenuOverlay:o}=t;return(0,X.jsxs)($.Z,{style:te(s),type:d,store:U.Z,preventType:F.Q7(s),...i,children:[o,(0,X.jsx)(Y.ZP,{store:e,context:E.S.InAppTemplatePreview,paddingBottom:Y.ZP.paddingBottom(s),disabled:a})]},e.id)}},e.id)})}return(0,X.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",...i},children:(0,X.jsx)(M.Z,{style:{width:W.T,height:W.T}})})}const ae={width:"100%",flexGrow:1,flexShrink:1,display:"flex",flexDirection:"column",overflow:"hidden"};const oe=function(){const e=(0,o.O7)(),t=(0,n.qz)(void 0,T),i=(0,a.useCallback)((()=>ce(e,t)),[e,t]),l=(0,a.useCallback)((()=>(0,X.jsx)(de,{templateRecordCacheStore:t})),[t]),{device:s}=e,r=(0,n.VK)((()=>y.Z.state),[]),c=(0,n.VK)((()=>f.default.state.currentSpaceViewStore),[]);return(0,a.useEffect)((()=>{r.open&&c&&p.createAndCommit({userAction:"PageTemplateModal.willMountOrUpdate",environment:e,perform:e=>{m.GF({item:r.item,spaceViewStore:c,transaction:e})}})}),[c,e,r.item,r.open]),s.isMobile?(0,X.jsx)(x.GI,{open:r.open,render:l,forceFullScreenSlideUp:!0,onDismiss:i,popupType:b.k.SlideUp}):null};function ne(){return new Promise(((e,t)=>{u.showDialog({message:(0,X.jsx)(r.FormattedMessage,{id:"pageTemplateModal.modifiedTemplateDialog.prompt",defaultMessage:"It looks like you've modified the template. Would you like to save your edits?"}),showCancel:!1,keepFocus:!0,items:[{label:(0,X.jsx)(r.FormattedMessage,{id:"pageTemplateModal.modifiedTemplateDialog.saveButton.label",defaultMessage:"Save edits"}),onAccept:()=>{e(!0)}},{label:(0,X.jsx)(r.FormattedMessage,{id:"pageTemplateModal.modifiedTemplateDialog.discardEditsButton.label",defaultMessage:"Discard"}),color:"red",onAccept:()=>{e(!1)}}]})}))}function le(e){m.xv(e),d.LZ()}function se(e){let{modalState:t,templateRecordCacheStore:i}=e;const a=(0,n.qz)(i,T);return(0,X.jsx)(ee,{previewRootId:t.item.previewRootId,style:ae,templateRecordCacheStore:a,disabled:!0},t.item.previewRootId)}function re(e,t,i){const{inMemoryRecordCache:a}=i.state,o=y.Z.state,{currentSpaceViewStore:n,currentSpaceStore:l,mainEditorCurrentBlockStore:s}=f.default.state;if(o.open&&n&&l){const i=s&&s.isEmptyPage()?s:void 0,r=h.default.state.open&&h.default.state.targetStore&&h.default.state.targetStore.isEmptyPage()?h.default.state.targetStore:void 0;m.RL({environment:t,item:o.item,spaceStore:l,spaceViewStore:n,useRecordCache:e?a:void 0,initializeStore:o.createNewPage?void 0:i||r,isPrivate:o.isPrivate,from:o.createNewPage?"sidebar":"newPage"})}}async function ce(e,t){const{inMemoryRecordCache:i}=t.state;if(i.appliedTransaction){await ne()?re(!0,e,t):le(e)}else le(e)}function de(e){let{templateRecordCacheStore:t}=e;const i=(0,o.O7)(),l=(0,n.VK)((()=>(0,g.xf)(i)),[i]),s=(0,a.useCallback)((()=>async function(e,t){const{inMemoryRecordCache:i}=t.state;i.appliedTransaction?re(!!(await ne()),e,t):re(!1,e,t)}(i,t)),[i,t]),c=(0,a.useCallback)((()=>ce(i,t)),[i,t]),d=(0,n.VK)((()=>y.Z.state),[]);return d.open?l?(0,X.jsx)(S.default,{title:void 0,left:(0,X.jsx)(me,{handleClick:c,style:{marginLeft:20}}),right:d.isLoading?(0,X.jsx)(M.Z,{}):(0,X.jsx)(ue,{handleClick:s}),shouldRenderLeftDirectly:!0,shouldRenderRightDirectly:!0,onCancel:c,disableHeaderShadow:!0,forceFullScreenSlideUp:!0,children:(0,X.jsx)(se,{templateRecordCacheStore:t,modalState:d})}):(0,X.jsx)(S.default,{title:(0,X.jsx)(r.FormattedMessage,{defaultMessage:"Try this template",id:"pageTemplateModal.mobileModal.title"}),left:(0,X.jsx)(S.CancelMenuText,{}),onClickLeft:c,right:d.isLoading?(0,X.jsx)(M.Z,{}):(0,X.jsx)(r.FormattedMessage,{defaultMessage:"Use",id:"pageTemplateModal.mobileModal.useButton.label"}),onClickRight:s,forceFullScreenSlideUp:!0,children:(0,X.jsx)(se,{templateRecordCacheStore:t,modalState:d})}):null}function ue(e){let{handleClick:t}=e;const i=(0,l.yK)((e=>({doneButton:{display:"flex",alignItems:"center",height:34,paddingLeft:14,paddingRight:14,marginRight:20,fontWeight:c.Z.fontWeight.medium,color:e.text.primary,background:e.tint.regular,borderRadius:17}})),[]);return(0,X.jsx)(v.Z,{mobileFeedback:!0,style:i.doneButton,onClick:t,children:(0,X.jsx)(r.FormattedMessage,{defaultMessage:"Use template",id:"pageTemplateModal.mobileModal.useTemplateButton.label"})})}function me(e){let{handleClick:t,style:i}=e;const a=(0,l.Fg)(),o=(0,r.useIntl)(),n={background:a.tint.regular,borderRadius:17,width:34,height:34,...i};return(0,X.jsx)(C.Z,{icon:e=>(0,s.U)({width:20,height:20}),style:n,isDarkIconColor:!0,onClick:t,ariaLabel:o.formatMessage({defaultMessage:"Close",id:"pageTemplateModal.mobileModal.closeButton.label"})})}},40464:(e,t,i)=>{i.d(t,{Z:()=>g});var a=i(667294),o=i(800480),n=i(886628),l=i(724405),s=i(436610),r=i(498724),c=i(489086),d=i(924666),u=i(164921),m=i(526388),p=i(785893);const g=function(e){const{disabled:t,type:i,tooltipLabel:g,children:b,style:f,onClick:y}=e,h=(0,o.O7)(),w=(0,a.useCallback)((e=>{r.aS({environment:h,annotation:[i]}),y&&y(),s.mt(h,{action:i})}),[h,i,y]),k=(0,n.VK)((()=>t||"editing"!==d.default.state.mode),[t]),T=(0,n.VK)((()=>Boolean((0,c.Ld)(i))),[i]),v=(0,l.yK)((e=>({button:{display:"flex",alignItems:"center",fill:T?e.icon.uiBluePrimary:e.text.secondary,borderRadius:6,height:28,width:28,padding:6,...f}})),[T,f]);return(0,p.jsx)(m.Z,{renderTooltip:()=>g,render:e=>(0,p.jsx)(u.Z,{style:v.button,disabled:k,disabledFeedback:k,onClick:w,...e,children:b})})}},432404:(e,t,i)=>{i.d(t,{Z:()=>h});var a=i(667294),o=i(800480),n=i(886628),l=i(724405),s=i(76233),r=i(709291),c=i(536280),d=i(489086),u=i(966949),m=i(924666),p=i(164921),g=i(58261),b=i(526388),f=i(785893);const y={display:"flex",alignItems:"center",borderRadius:6,padding:6,width:28,height:28};const h=function(e){let{style:t,children:i,disabled:a,onClick:r}=e;const g=(0,l.Fg)(),h=(0,o.O7)(),T=(0,n.VK)((()=>w(g)),[g]),v=(0,n.VK)((()=>function(e){if(e)return!0;if("editing"!==m.default.state.mode&&!u.Z.isOpen())return!0;const t={[s.GKr.User]:s.GKr.User,[s.GKr.Page]:s.GKr.Page,[s.GKr.CustomEmoji]:s.GKr.CustomEmoji,[s.GKr.Comment]:s.GKr.Comment,[s.GKr.Bot]:s.GKr.Bot,[s.GKr.Date]:s.GKr.Date,[s.GKr.ExternalObjectInstance]:s.GKr.ExternalObjectInstance,[s.GKr.TemporaryPage]:s.GKr.TemporaryPage,[s.GKr.TemplateVariable]:s.GKr.TemplateVariable,[s.GKr.FormulaPageProperty]:s.GKr.FormulaPageProperty,[s.GKr.FormulaContextValue]:s.GKr.FormulaContextValue,[s.GKr.Group]:s.GKr.Group,[s.GKr.Citation]:s.GKr.Citation,[s.GKr.LinkMention]:s.GKr.LinkMention,[s.GKr.AssistantInstructionsCollection]:s.GKr.AssistantInstructionsCollection};for(const i of Object.values(t))if((0,d.J6)(i))return!0;return!1}(a)),[a]);return(0,f.jsx)(b.Z,{renderTooltip:()=>(0,f.jsx)(k,{}),render:e=>(0,f.jsx)(p.Z,{style:{...y,...T.equationButton,...t},disabled:v,disabledFeedback:v,onClick:e=>function(e,t,i){c.qn({environment:t,analyticsFrom:"rich_text_menu"}),i&&i(e)}(e,h,r),...e,children:i})})};function w(e){return{equationButton:{fill:(0,d.Ld)(s.GKr.Equation)?e.blueColor:e.text.secondary},keyboardShortcut:{color:e.mediumInvertedTextColor}}}function k(){const e=(0,l.Fg)(),t=(0,n.VK)((()=>w(e)),[e]);return(0,f.jsxs)(a.Fragment,{children:[(0,f.jsx)("div",{children:(0,f.jsx)(r.FormattedMessage,{id:"richTextMenu.equationButton.tooltip",defaultMessage:"Mark as equation"})}),(0,f.jsx)("div",{children:(0,f.jsx)(g.Z,{style:t.keyboardShortcut,name:"openEquationMenu"})})]})}},273383:(e,t,i)=>{i.d(t,{Z:()=>h});var a=i(667294),o=i(800480),n=i(886628),l=i(724405),s=i(76233),r=i(709291),c=i(436610),d=i(245990),u=i(489086),m=i(623178),p=i(924666),g=i(164921),b=i(58261),f=i(526388),y=i(785893);function h(e){const t=(0,l.Fg)(),i=(0,o.O7)(),h=(0,n.VK)((()=>(0,u.Ld)(s.GKr.Link)),[]),w=(0,n.VK)((()=>function(e){if(e)return!0;if("editing"!==p.default.state.mode&&!m.Z.state.open)return!0;if((0,u.J6)(s.GKr.User)||(0,u.J6)(s.GKr.Bot)||(0,u.J6)(s.GKr.Date)||(0,u.J6)(s.GKr.Page))return!0;return!1}(e.disabled)),[e.disabled]);return(0,y.jsx)(f.Z,{renderTooltip:()=>(0,y.jsxs)(a.Fragment,{children:[(0,y.jsx)("div",{children:(0,y.jsx)(r.FormattedMessage,{defaultMessage:"Add link",id:"selectionLinkButton.addLink.tooltip"})}),(0,y.jsx)("div",{children:(0,y.jsx)(b.Z,{style:{color:t.mediumInvertedTextColor},name:"openLinkMenuOrOpenSearch"})})]}),render:a=>(0,y.jsx)(g.Z,{style:{display:"flex",alignItems:"center",borderRadius:6,paddingLeft:7,paddingRight:6,...h&&{color:t.blueColor},whiteSpace:"nowrap",...e.style},disabled:w,disabledFeedback:w,...a,onClick:()=>function(e){d.dz({type:"focusOnly",focus:!0}),c.mt(e,{action:s.GKr.Link})}(i),children:e.children})})}},670268:(e,t,i)=>{i.d(t,{B:()=>l});i(667294);var a=i(724405),o=i(636596),n=i(785893);function l(e){let t=Math.floor(e.areaHeight/124);0===t&&(t=1);const i=(0,a.yK)((e=>({skeletonRect:{height:8,borderRadius:4,margin:10,backgroundColor:e.lightDividerColor},skeletonCircle:{display:"flex",width:28,height:28,marginRight:8,backgroundColor:e.lightDividerColor,borderRadius:20},skeletonSection:{display:"flex",width:"100%",margin:20,flexDirection:"row"}})),[8,10,20]),l=[...Array(t)].map(((e,t)=>(0,n.jsxs)("div",{style:i.skeletonSection,children:[(0,n.jsx)(o.Z,{style:i.skeletonCircle}),(0,n.jsxs)("div",{style:{width:"80%"},children:[(0,n.jsx)(o.Z,{style:{width:"80%",...i.skeletonRect,marginTop:0}}),(0,n.jsx)(o.Z,{style:{width:"50%",...i.skeletonRect}}),(0,n.jsx)(o.Z,{style:{width:"60%",...i.skeletonRect}}),(0,n.jsx)(o.Z,{style:{width:"50%",...i.skeletonRect}})]})]},t)));return(0,n.jsx)("div",{children:l})}},304548:(e,t,i)=>{i.d(t,{Z:()=>a});const a=new(i(745589).Z)},530496:(e,t,i)=>{i.d(t,{Z:()=>a});const a=new(i(61766).Z)},665435:(e,t,i)=>{i.d(t,{D2:()=>v,Io:()=>h,JL:()=>k,cY:()=>b,it:()=>w,oO:()=>f,vY:()=>T});var a=i(647425),o=i(284465),n=i(194952),l=i(173314),s=i(709291),r=i(401898),c=i(95477),d=i(304708),u=i(433929),m=i(627249),p=i(319385),g=i(359307);const b=(0,s.defineMessages)({addToTeamspace:{id:"templateGalleryHelpers.addToTeamspace",defaultMessage:"Add to a teamspace"},addToPrivate:{id:"teamPickerButton.addToPrivate",defaultMessage:"Add to Private"}});function f(e){var t;const{data:i}=g.Z.state;if(i&&null!==(t=i.topCategories)&&void 0!==t&&t.length)return i.topCategories.find((t=>t.id===e))}const y=Object.keys(o.J9);function h(e){let{userPersona:t,subscriptionTier:i}=e;return[...y].sort(((e,o)=>function(e,t,i,o){const n=(0,a.QA)(o),l=(0,m.H_)({persona:i,defaultToLife:n});if("suggested"===e||"suggested"===t)return"suggested"===e?-1:1;if(l===e||l===t)return l===e?-1:1;if(("life"===e||"life"===t)&&n)return"life"===e?-1:1;if(("student"===e||"student"===t)&&function(e){let{persona:t,isPersonalishPlan:i}=e;const a=i?["other","unfilled","personal","undefined"]:["personal"];return a.includes(t??"undefined")}({persona:i,isPersonalishPlan:n}))return"student"===e?-1:1;return 0}(e,o,t,i)))}function w(e){let{userPersona:t,subscriptionTier:i,environment:s}=e;const r=u.default.getIntl(),c=(0,d.xf)(s)?function(e){return(0,a.QA)(e)?o.d6:o.e8}(i):o.J9.suggested;return Object.fromEntries(h({userPersona:t,subscriptionTier:i}).map((e=>"suggested"===e?["suggested",c.map((e=>(0,l.G)(e,r)))]:[e,[...o.J9[e].filter((e=>(0,n.G)(e,p.default))).filter((e=>!c.includes(e))).map((e=>(0,l.G)(e,r)))]])).filter((e=>{let[t,i]=e;return(null==i?void 0:i.length)>0})))}function k(e){const t=(0,r.Yd)(e).map((e=>[e,!0]));return Object.fromEntries(t)}function T(e){var t;const{data:i}=g.Z.state;if(!i||null===(t=i.topCategories)||void 0===t||!t.length)return;const a=i.topCategories.find((t=>{var i;return null===(i=t.subcategories)||void 0===i?void 0:i.find((t=>{var i;return null===(i=t.templates)||void 0===i?void 0:i.find((t=>"pageTemplate"===t.type&&t.template.rootId===e||"preset"===t.type&&t.uri===e))}))}));return null==a?void 0:a.id}function v(e){return`${c.default.domainBaseUrl}/@${e}`}},359307:(e,t,i)=>{i.d(t,{Z:()=>n});var a=i(749085);class o extends a.default{getInitialState(){return{}}getTopTemplateCategories(){var e;const{data:t}=this.state;return t&&null!==(e=t.topCategories)&&void 0!==e&&e.length?Array.from(t.topCategories).filter((e=>{const t=e.subcategories||[];for(const a of t){var i;if(null!==(i=a.templates)&&void 0!==i&&i.length)return!0}return!1})):[]}}const n=new o}}]);