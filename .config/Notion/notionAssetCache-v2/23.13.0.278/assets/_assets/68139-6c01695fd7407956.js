"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[68139],{568139:(e,t,o)=>{o.r(t),o.d(t,{default:()=>X});var n=o(667294),a=o(800480),i=o(533125),r=o(886628),l=o(724405),s=o(815145),d=o(371663),c=o(984619),u=o(222225),p=o(213148),g=o(412217),f=o(949019),S=o(917683),y=o(332240),b=o(747453),k=o(698519),M=o(709291),m=o(653965),h=o(401898),w=o(137810),x=o(436610),P=o(926999),B=o(248543),C=o(973744),v=o(212534),R=o(433929),L=o(639500),I=o(450627),T=o(729376),j=o(486098),O=o(619671),A=o(188923),E=o(4827),F=o(278030),V=o(753876),Z=o(164921),D=o(205145),K=o(850478),H=o(573063),N=o(511470),U=o(526388),_=o(125845),W=o(785893);const G=(0,M.defineMessages)({openAsPageTitle:{defaultMessage:"Open",id:"database.navigateButton.openAsPageTitle"},dragRowHandleAriaLabel:{defaultMessage:"Drag to move a related page",id:"database.relationMenuRow.dragRowHandle.ariaLabel"},floatingInsertButtonAriaLabel:{defaultMessage:"Create a new related page",id:"database.relationMenuRow.floatingInsertButton.ariaLabel"},defaultIsSelectedPrimaryButtonAriaLabel:{defaultMessage:"Unlink page",id:"database.relationMenuRow.button.primary.default.isSelected.ariaLabel"},defaultIsNotSelectedPrimaryButtonAriaLabel:{defaultMessage:"Link page",id:"database.relationMenuRow.button.primary.default.isNotSelected.ariaLabel"},sprintIsSelectedPrimaryButtonAriaLabel:{defaultMessage:"Remove this sprint",id:"database.relationMenuRow.button.primary.sprint.isSelected.ariaLabel"},sprintIsNotSelectedPrimaryButtonAriaLabel:{defaultMessage:"Add this sprint",id:"database.relationMenuRow.button.primary.sprint.isNotSelected.ariaLabel"},defaultIsSelectedSecondaryButtonAriaLabel:{defaultMessage:"Insert new page",id:"database.relationMenuRow.button.secondary.default.isSelected.ariaLabel"},defaultIsNotSelectedSecondaryButtonAriaLabel:{defaultMessage:"Link another page",id:"database.relationMenuRow.button.secondary.default.isNotSelected.ariaLabel"},sprintIsSelectedSecondaryButtonAriaLabel:{defaultMessage:"Insert new page",id:"database.relationMenuRow.button.secondary.sprint.isSelected.ariaLabel"},sprintIsNotSelectedSecondaryButtonAriaLabel:{defaultMessage:"Move to a different sprint",id:"database.relationMenuRow.button.secondary.sprint.isNotSelected.ariaLabel"},openPageSidePeekAriaLabel:{defaultMessage:"Open in side peek",id:"database.relationMenuRow.button.openPageSidePeek.ariaLabel"},openPageCenterPeekAriaLabel:{defaultMessage:"Open in center peek",id:"database.relationMenuRow.button.openPageCenterPeek.ariaLabel"},openPageFullPageAriaLabel:{defaultMessage:"Open as page",id:"database.relationMenuRow.button.openPageFullPage.ariaLabel"}}),z=48;function X(e){const{collectionStore:t,targetCollectionStore:o,relatedPageStore:l,isSelected:c,disabled:u,locked:p,canDrag:g,pageStore:f,property:S,propertyLimit:y,rowType:b,onActionButtonClick:k,onSecondaryButtonClick:M,onOpenPageButtonClick:m,onMouseEnter:h,onMouseLeave:w,blockPropertyValueOverlayStore:v,onInsertInline:R,onTitleEsc:L,index:I,focused:T}=e,[E,F]=n.useState(!1),V=(0,a.O7)(),Z=(0,a.Fy)(),D=n.useRef(null),K=n.useRef(null);(0,i.c)(j.Z,(()=>({relatedPageStoreId:l.id,rowType:b,property:S,relationTokenBlockStoreRef:D,getNode:()=>K.current})),[l,b,S]);const H=(0,r.VK)((()=>{if(A.default.state.open)return A.default.state.mode;const e=null==v?void 0:v.state;if(null==e||!e.isOpen||null==e||!e.collectionContextStore)return A.default.state.mode;const t=e.collectionContextStore,o=null==t?void 0:t.collectionViewStore(),n=null==o?void 0:o.getType();return o&&n?o.getFormat().collection_peek_mode??B.Ls[n]:A.default.state.mode}),[v]),N=(0,r.VK)((()=>o.getDatabaseType()),[o]);if(Z.isPhone&&"popup"===b)return(0,W.jsx)(ne,{...e});if(N===d.p$){const e=(0,W.jsx)(J,{canDrag:g,rowType:b,focused:T,disabled:u,locked:p,isSelected:c,onSecondaryButtonClick:M,onOpenPageButtonClick:m,onActionButtonClick:k,propertyLimit:y,relatedPageStore:l,pageStore:f,onInsertInline:R,index:I,blockPropertyValueOverlayStore:v,collectionStore:t,targetCollectionStore:o,property:S,relationTokenBlockStoreRef:D,outerRef:K,peekMode:H});return(0,W.jsx)(ee,{innerRelationMenuRow:e,handleButtonClick:e=>function(e,t,o,n){o||n||t(e)}(e,k,u,c),canDrag:g,rowType:b,focused:T,disabled:u,hasMouseEntered:E,sectionOnClick:e=>de(e,V,t,o,c,l,k,u,H),outerRef:K,onSecondaryButtonClick:M,onMouseEnter:h,onMouseLeave:w})}{const e=(0,W.jsx)($,{canDrag:g,rowType:b,focused:T,disabled:u,locked:p,isSelected:c,onSecondaryButtonClick:M,onOpenPageButtonClick:m,onActionButtonClick:k,relatedPageStore:l,pageStore:f,onInsertInline:R,onTitleEsc:L,index:I,blockPropertyValueOverlayStore:v,collectionStore:t,targetCollectionStore:o,property:S,relationTokenBlockStoreRef:D,outerRef:K,peekMode:H}),n=(0,W.jsx)(ee,{innerRelationMenuRow:e,handleButtonClick:e=>function(e,t,o,n,a,i,r,l,d,c,u){if(r||d){const i=C.DJ(e),r=o.id===n.id?A.default.state.resultsStore:void 0,d=o.id===n.id?A.default.state.collectionContextStore:void 0,p=A.default.isSidePeekOpen();if(P.CH({environment:t,store:a,peekMode:c,openInNew:i,resultsStore:r,collectionContextStore:d,pageVisitSource:s.tY.PeekOpen}),x.XX(t,{from:"inline"===l||"section"===l?"property_value":"configure_relation_modal",meta_click:Boolean(i)}),"popup"===l&&!p){(u??O.Z).setState({isOpen:!1})}}else i(e)}(e,V,t,o,l,k,u,b,c,H,v),canDrag:g,rowType:b,focused:T,disabled:u,hasMouseEntered:E,sectionOnClick:e=>de(e,V,t,o,c,l,k,u,H),outerRef:K,onMouseEnter:h,onMouseLeave:w});return(0,W.jsx)(Y,{rowContainer:n,disabled:u,locked:p,canDrag:g,rowType:b,targetCollectionStore:o,propertyLimit:y,hasMouseEntered:E,outerRef:K,handleMouseEnter:()=>F(!0),handleMouseLeave:()=>F(!1),onInsertInline:R})}}function $(e){const{canDrag:t,rowType:o,focused:n,disabled:i,locked:s,isSelected:d,onSecondaryButtonClick:c,onOpenPageButtonClick:p,onActionButtonClick:g,relatedPageStore:f,pageStore:S,onInsertInline:y,onTitleEsc:k,index:h,blockPropertyValueOverlayStore:w,collectionStore:x,targetCollectionStore:P,property:B,relationTokenBlockStoreRef:C,outerRef:v,peekMode:L}=e,j=(0,a.Fy)(),O=(0,l.yK)((e=>({dragHandle:{marginLeft:2,height:20}})),[]),A=(0,r.VK)((()=>"section"===o&&!i&&f.canEdit()&&!j.isMobile),[o,i,f,j.isMobile]),E=j.isPhone?(0,W.jsx)(q,{relatedPageStore:f,rowType:o,pageStore:S,canEditTitle:A,shouldShowOverflow:!1,noUnderline:!1,relationTokenBlockStoreRef:C,onInsertInline:y,onTitleEsc:k,index:h}):(0,W.jsx)(Q,{collectionStore:x,property:B,relatedPageStore:f,targetCollectionStore:P,blockPropertyValueOverlayStore:w,rowType:o,pageStore:S,index:h,onInsertInline:y,onTitleEsc:k,canEditTitle:A,shouldShowOverflow:!1,noUnderline:!1,disabled:i,relationTokenBlockStoreRef:C}),F=(0,r.VK)((()=>T.BI(x.getSchema(),B)),[x,B]),V=(0,r.VK)((()=>(0,I.Wt)(f)),[f]),Z=function(e){const{device:t,rowType:o,focused:n,disabled:a,locked:i,onSecondaryButtonClick:r,onOpenPageButtonClick:l,onActionButtonClick:s,isSelected:d,isGithubRelationProperty:c,peekMode:p,onClick:g}=e,f=!t.isMobile&&n&&!a&&"section"===o&&!m.o8(l),S=(t.isMobile||n)&&!i&&!a,y="section"!==o?(t.isMobile||n)&&!i&&!a:S,k=!t.isMobile&&!i&&n&&!a&&"inline"===o&&!m.o8(r),h=y?function(e){const{isSelected:t,isGithubRelationProperty:o,onActionButtonClick:n}=e,a=t?G.defaultIsSelectedPrimaryButtonAriaLabel:G.defaultIsNotSelectedPrimaryButtonAriaLabel;let i;i=t?o?(0,W.jsx)(M.FormattedMessage,{id:"database.relationMenuRow.tooltip.removePR.message",defaultMessage:"Unlink PR"}):(0,W.jsx)(M.FormattedMessage,{id:"database.relationMenuRow.tooltip.removePage.message",defaultMessage:"Unlink page"}):o?(0,W.jsx)(M.FormattedMessage,{defaultMessage:"Link PR",id:"database.relationMenuRow.tooltip.addPR.message"}):(0,W.jsx)(M.FormattedMessage,{defaultMessage:"Link page",id:"database.relationMenuRow.tooltip.addPage.message"});return(0,W.jsx)(te,{isOpenPage:!1,ariaLabel:R.default.formatMessage(a),onClick:n,style:{borderRadius:3},icon:t?u.g:b.R,tooltipMessage:i})}({isSelected:d,isGithubRelationProperty:c,onActionButtonClick:s}):void 0,w=k?function(e){const{rowType:t,isSelected:o,isGithubRelationProperty:n,onClick:a}=e;let i;i="section"===t&&o?n?(0,W.jsx)(M.FormattedMessage,{id:"database.relationMenuRow.tooltip.insertPRInline.message",defaultMessage:"Insert new PR"}):(0,W.jsx)(M.FormattedMessage,{id:"database.relationMenuRow.tooltip.insertPageInline.message",defaultMessage:"Insert new page"}):n?(0,W.jsx)(M.FormattedMessage,{id:"database.relationMenuRow.tooltip.insertPR.message",defaultMessage:"Link another PR"}):(0,W.jsx)(M.FormattedMessage,{id:"database.relationMenuRow.tooltip.insertPage.message",defaultMessage:"Link another page"});const r="section"===t&&o?G.defaultIsSelectedSecondaryButtonAriaLabel:G.defaultIsNotSelectedSecondaryButtonAriaLabel;return(0,W.jsx)(te,{isOpenPage:!1,ariaLabel:R.default.formatMessage(r),onClick:a,style:{borderRadius:0},icon:b.R,tooltipMessage:i})}({rowType:o,isSelected:d,isGithubRelationProperty:c,onClick:g}):void 0,x=f&&void 0!==l?(0,W.jsx)(se,{peekMode:p,showPrimaryButton:void 0!==h,showSecondaryButton:void 0!==w,onOpenPageButtonClick:l}):void 0;return(0,W.jsx)(le,{primaryButton:h,secondaryButton:w,openPageButton:x})}({device:j,rowType:o,focused:n,disabled:i||V,locked:s,isSelected:d,onSecondaryButtonClick:c,onOpenPageButtonClick:p,onActionButtonClick:g,isGithubRelationProperty:F,peekMode:L,onClick:()=>null==c?void 0:c(v.current)});return(0,W.jsxs)(W.Fragment,{children:[t&&"popup"===o&&(0,W.jsx)(D.ZP,{iconSize:12,style:O.dragHandle}),E,Z]})}function J(e){const{canDrag:t,rowType:o,focused:n,disabled:i,locked:s,isSelected:d,onSecondaryButtonClick:c,onOpenPageButtonClick:p,onActionButtonClick:g,propertyLimit:f,relatedPageStore:S,pageStore:y,onInsertInline:h,onTitleEsc:w,index:x,blockPropertyValueOverlayStore:P,collectionStore:B,targetCollectionStore:C,property:v,relationTokenBlockStoreRef:L,outerRef:I,peekMode:T}=e,j=(0,a.Fy)(),O=(0,l.yK)((e=>({dragHandle:{marginLeft:2,height:20},iconWrapper:{display:"flex",marginLeft:"auto",alignItems:"center",justifyContent:"center",padding:0,height:24},icon:{width:16,height:16,fill:e.regularIconColor,display:"inline-flex",alignItems:"center",justifyContent:"center"}})),[]),A=(0,r.VK)((()=>"section"===o&&!i&&S.canEdit()&&!j.isMobile),[o,i,S,j.isMobile]),E=function(e){const{device:t,rowType:o,focused:n,disabled:a,locked:i,onSecondaryButtonClick:r,onOpenPageButtonClick:l,onActionButtonClick:s,isSelected:d,propertyLimit:c,peekMode:p,onClick:g}=e,f=!t.isMobile&&n&&!a&&("section"===o||"inline"===o)&&!m.o8(l),S=(t.isMobile||n)&&!i&&!a,y="section"!==o?(t.isMobile||n)&&!i&&!a&&1!==c&&"popup"===o&&d:S,k=!t.isMobile&&!i&&n&&!a&&!f&&"section"!==o&&!m.o8(r),h=y?function(e){const{isSelected:t,onActionButtonClick:o}=e,n=t?G.sprintIsSelectedPrimaryButtonAriaLabel:G.sprintIsNotSelectedPrimaryButtonAriaLabel,a=t?(0,W.jsx)(M.FormattedMessage,{id:"database.relationMenuRow.tooltip.removePage.messageSprints",defaultMessage:"Remove this sprint"}):(0,W.jsx)(M.FormattedMessage,{id:"database.relationMenuRow.tooltip.addPage.messageSprints",defaultMessage:"Add this sprint"});return(0,W.jsx)(te,{isOpenPage:!1,ariaLabel:R.default.formatMessage(n),onClick:o,style:{borderRadius:3},icon:t?u.g:b.R,tooltipMessage:a})}({isSelected:d,onActionButtonClick:s}):void 0,w=k?function(e){const{rowType:t,isSelected:o,onClick:n}=e,a="section"===t&&o?G.sprintIsSelectedSecondaryButtonAriaLabel:G.sprintIsNotSelectedSecondaryButtonAriaLabel,i="section"===t&&o?(0,W.jsx)(M.FormattedMessage,{id:"database.relationMenuRow.tooltip.insertPageInline.message",defaultMessage:"Insert new page"}):(0,W.jsx)(M.FormattedMessage,{id:"database.relationMenuRow.tooltip.insertPage.messageSprints",defaultMessage:"Move to a different sprint"});return(0,W.jsx)(te,{isOpenPage:!1,ariaLabel:R.default.formatMessage(a),onClick:n,style:{borderRadius:0},icon:b.R,tooltipMessage:i})}({rowType:o,isSelected:d,onClick:g}):void 0,x=f&&void 0!==l?(0,W.jsx)(se,{peekMode:p,showPrimaryButton:void 0!==h,showSecondaryButton:void 0!==w,onOpenPageButtonClick:l}):void 0;return(0,W.jsx)(le,{primaryButton:h,secondaryButton:w,openPageButton:x})}({device:j,rowType:o,focused:n,disabled:i,locked:s,isSelected:d,onSecondaryButtonClick:c,onOpenPageButtonClick:p,onActionButtonClick:g,propertyLimit:f,peekMode:T,onClick:()=>null==c?void 0:c(I.current)});return(0,W.jsxs)(W.Fragment,{children:[t&&"popup"===o&&(0,W.jsx)(D.ZP,{iconSize:12,style:O.dragHandle}),j.isPhone?(0,W.jsx)(q,{relatedPageStore:S,rowType:o,pageStore:y,canEditTitle:A,shouldShowOverflow:!0,noUnderline:!0,relationTokenBlockStoreRef:L,onInsertInline:h,onTitleEsc:w,index:x}):(0,W.jsx)(Q,{collectionStore:B,property:v,relatedPageStore:S,targetCollectionStore:C,blockPropertyValueOverlayStore:P,rowType:o,pageStore:y,index:x,onInsertInline:h,onTitleEsc:w,canEditTitle:A,shouldShowOverflow:!0,noUnderline:!0,disabled:i,relationTokenBlockStoreRef:L}),d&&"popup"===o&&(0,W.jsx)("div",{style:O.iconWrapper,children:(0,k.k)(O.icon)}),E]})}function Y(e){const{rowContainer:t,disabled:o,locked:n,canDrag:i,rowType:s,targetCollectionStore:d,propertyLimit:c,hasMouseEntered:u,outerRef:p,handleMouseEnter:g,handleMouseLeave:f,onInsertInline:S}=e,y=(0,a.Fy)(),k=(0,l.yK)((e=>({menuItem:{display:"flex",alignItems:"center",width:`calc(100% + ${z}px)`,paddingLeft:z,position:"relative",left:-z},tooltip:{color:e.mediumInvertedTextColor},icon:{width:16,height:16,fill:e.lightIconColor},iconHover:{borderRadius:4},iconButton:{marginLeft:i?-44:-22,position:"absolute",marginRight:4}})),[i]),m=(0,r.VK)((()=>d.canEdit()),[d]),h=!n&&!o&&"section"===s&&!y.isMobile&&!(1===c)&&m;return(0,W.jsxs)("div",{style:k.menuItem,onMouseEnter:g,onMouseLeave:f,ref:p,children:[u&&h&&(0,W.jsx)(U.Z,{renderTooltip:()=>(0,W.jsx)(M.FormattedMessage,{defaultMessage:"Click <medium>to insert a page below</medium>",id:"database.relationMenuRow.tooltip.floatingAddPageButton.message",values:{medium:e=>(0,W.jsx)("span",{style:k.tooltip,children:e})}}),render:e=>(0,W.jsx)(H.Z,{hasBackground:!1,ariaLabel:R.default.formatMessage(G.floatingInsertButtonAriaLabel),icon:b.R,iconStyle:k.icon,onClick:S,hoveredStyle:k.iconHover,style:k.iconButton,...e})}),t]})}function Q(e){const{relatedPageStore:t,targetCollectionStore:o,blockPropertyValueOverlayStore:i,rowType:s,pageStore:d,index:c,onInsertInline:u,onTitleEsc:p,canEditTitle:g,shouldShowOverflow:f,noUnderline:S,collectionStore:y,property:b,disabled:k,relationTokenBlockStoreRef:M}=e,h=(0,a.Fy)(),x=(0,r.VK)((()=>{const e=o.getSchema();return e?T.U1({collectionStore:y,property:b}).filter((t=>t.visible&&("title"===t.property||e[t.property]))):[]}),[o,y,b]),P=(0,r.VK)((()=>"section"!==s||(k||!t.canEdit()||h.isMobile)),[s,k,t,h.isMobile]),B=(0,l.yK)((e=>({wrapper:{display:"flex",marginRight:8,maxHeight:22,alignItems:"center",...w.Z.textOverflowStyle}})),[]);if(m.xb(x))return null;const C=x.map((e=>"title"===e.property?(0,W.jsx)(n.Fragment,{children:(0,W.jsx)(q,{relatedPageStore:t,rowType:s,pageStore:d,canEditTitle:g,shouldShowOverflow:f,noUnderline:S,relationTokenBlockStoreRef:M,onInsertInline:u,onTitleEsc:p,index:c})},"title"):(0,W.jsx)(E.Z,{store:t,property:e.property,disabled:P,locked:!1,format:"section"===s?F.C.RelationSection:F.C.Relation,tableWrap:!1,blockPropertyValueOverlayStore:i??O.Z,collectionStore:o},e.property)));return(0,W.jsx)("div",{style:B.wrapper,children:C})}function q(e){const{relatedPageStore:t,rowType:o,pageStore:n,canEditTitle:i,shouldShowOverflow:r,noUnderline:s,relationTokenBlockStoreRef:d,onInsertInline:u,onTitleEsc:p,index:g}=e,f=(0,a.Fy)(),S=(0,l.yK)((e=>({wrapper:{display:"flex",alignItems:"center",flex:"0 1 auto",minHeight:0,...!r&&{minWidth:40},paddingLeft:"section"===o?4:6},relationToken:{display:"flex",alignItems:"center",margin:0,whiteSpace:"nowrap",marginRight:"section"===o?0:f.isTablet?8:0,minWidth:0},title:{...w.Z.textOverflowStyle,maxWidth:"100%"}})),[o,r,f.isTablet]);return(0,W.jsx)("div",{style:S.wrapper,children:(0,W.jsx)(_.Z,{ref:d,format:c.lo.Inline,blockId:t.id,isSingle:!0,parentStore:n,noUnderline:s,style:S.relationToken,titleStyle:S.title,clickTitleBehavior:i?"edit":void 0,onTitleEnter:u,onTitleEsc:p,index:g},t.id)})}function ee(e){const{innerRelationMenuRow:t,handleButtonClick:o,canDrag:n,rowType:i,focused:r,disabled:s,hasMouseEntered:d,sectionOnClick:c,outerRef:u,onSecondaryButtonClick:p,onMouseEnter:f,onMouseLeave:S}=e,y=(0,a.O7)(),b=(0,l.yK)((e=>({container:{display:"flex",alignItems:"center",width:"100%"},tooltip:{color:e.mediumInvertedTextColor},icon:{width:14,height:14,fill:e.lightIconColor},iconHover:{borderRadius:4},iconButton:{cursor:"grab",width:K.C$+4,marginLeft:-(K.C$+4),height:24,borderRadius:4},row:ae(i,e,r)})),[i,r]);return(0,W.jsxs)("div",{style:b.container,ref:u,children:["section"===i&&d&&n&&(0,W.jsx)(U.Z,{renderTooltip:()=>(0,W.jsx)(M.FormattedMessage,{defaultMessage:"Drag <medium>to move</medium>",id:"database.relationMenuRow..dragPrompt.text",values:{medium:e=>(0,W.jsx)("span",{style:b.tooltip,children:e})}}),render:e=>(0,W.jsx)(H.Z,{hasBackground:!1,ariaLabel:R.default.formatMessage(G.dragRowHandleAriaLabel),icon:g.D,iconStyle:b.icon,hoveredStyle:b.iconHover,style:b.iconButton,...e})}),"section"===i?(0,W.jsx)("div",{style:b.row,onContextMenu:e=>ie(e,y),onMouseEnter:f,onMouseLeave:S,onClick:c,role:"button","aria-label":"Editable title","aria-disabled":s,tabIndex:s?-1:0,children:t}):(0,W.jsx)("div",{style:b.row,onContextMenu:e=>ie(e,y),onMouseEnter:f,onMouseLeave:S,role:"button",tabIndex:s?-1:0,"aria-disabled":s,onClick:e=>{(0,v.ZP)({event:e,context:v.Af.EditorClick,callback:()=>{(0,L.uG)(e)||(p?p(u.current):o(e))}})},children:t})]})}function te(e){const{isOpenPage:t,onClick:o,style:n,icon:a,tooltipMessage:i,ariaLabel:r}=e;return(0,W.jsx)(U.Z,{renderTooltip:()=>i,render:e=>(0,W.jsx)(H.Z,{hasBackground:!1,ariaLabel:r,icon:a,onClick:o,caption:t&&R.default.formatMessage(G.openAsPageTitle),hoveredStyle:{borderRadius:4},style:{height:20,width:20,flex:"0 0 auto",...n},...e})})}function oe(e){let{onActionButtonClick:t}=e;return(0,W.jsx)(Z.Z,{mobileFeedback:!0,onClick:t,style:{padding:12,marginRight:-12},children:(0,p.U)({width:20,height:20})})}function ne(e){const t=!e.disabled&&e.isSelected;return(0,W.jsx)(N.Z,{...e,store:e.relatedPageStore,hidePath:!0,right:t?(0,W.jsx)(oe,{onActionButtonClick:e.onActionButtonClick}):void 0})}function ae(e,t,o){return{...w.Z.textOverflowStyle,display:"flex",alignItems:"center",position:"relative",borderRadius:4,width:"100%",height:T.Mu,paddingTop:2,paddingRight:4,paddingBottom:2,paddingLeft:0,fontSize:V.z6,margin:"popup"===e?"0px 4px":0,cursor:"pointer",background:o?t.buttonHoveredBackground:void 0,userSelect:"none"}}function ie(e,t){const{device:o}=t;o.isAndroid&&o.isPhone&&e.preventDefault()}const re={position:"absolute",top:4,display:"inline-flex",flexShrink:0,borderRadius:4,overflow:"hidden",padding:2,gap:1};function le(e){const{primaryButton:t,secondaryButton:o,openPageButton:n}=e,a=(0,l.yK)((e=>({relationButtonWrapperStyle:{right:6,background:e.popoverBackground,boxShadow:e.lightBoxShadow,...re}})),[]);return(0,W.jsxs)(W.Fragment,{children:[(t||o)&&(0,W.jsxs)("div",{style:a.relationButtonWrapperStyle,children:[t,o]}),n]})}function se(e){const{peekMode:t,showPrimaryButton:o,showSecondaryButton:n,onOpenPageButtonClick:a}=e,i=(0,l.yK)((e=>({relationButtonWrapperStyle:{position:"absolute",right:o||n?36:6,background:e.popoverBackground,boxShadow:e.lightBoxShadow,...re}})),[o,n]);let r,s,d;return"side_peek"===t?(r=G.openPageSidePeekAriaLabel,s=y.y,d=(0,W.jsx)(M.FormattedMessage,{id:"database.relationMenuRow.tooltip.openPageSidePeek.message",defaultMessage:"Open in side peek"})):"center_peek"===t?(r=G.openPageCenterPeekAriaLabel,s=S.Q,d=(0,W.jsx)(M.FormattedMessage,{id:"database.relationMenuRow.tooltip.openPageCenterPeek.message",defaultMessage:"Open in center peek"})):"full_page"===t?(r=G.openPageFullPageAriaLabel,s=f.Z,d=(0,W.jsx)(M.FormattedMessage,{id:"database.relationMenuRow.tooltip.openPage.message",defaultMessage:"Open as page"})):(0,h.t1)(t),(0,W.jsx)("div",{style:i.relationButtonWrapperStyle,children:(0,W.jsx)(te,{isOpenPage:!0,ariaLabel:R.default.formatMessage(r),onClick:a,style:{width:60},icon:s,tooltipMessage:d})})}function de(e,t,o,n,a,i,r,l,d){(0,v.ZP)({event:e,context:v.Af.EditorClick,callback:()=>{if(!(0,L.uG)(e))if(a||l){const a=C.DJ(e),r=o.id===n.id?A.default.state.resultsStore:void 0,l=o.id===n.id?A.default.state.collectionContextStore:void 0;P.CH({environment:t,store:i,peekMode:d,openInNew:a,resultsStore:r,collectionContextStore:l,pageVisitSource:s.tY.PeekOpen}),x.XX(t,{from:"relation_section",meta_click:Boolean(a)})}else r(e)}})}}}]);