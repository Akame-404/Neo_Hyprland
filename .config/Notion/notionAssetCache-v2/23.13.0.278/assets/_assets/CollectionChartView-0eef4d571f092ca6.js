"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[79308],{694166:(e,t,o)=>{o.d(t,{Z:()=>u});o(667294);var r=o(800480),i=o(724405),n=o(605257),a=o(356666),l=o(137810),s=o(552275),c=o(925130),d=o(785893);const u=function(e){const{icon:t,iconStyle:o,title:u,caption:g,right:p,rightStyle:h,isRed:m,isGray:C,isOrange:y,isPadded:f,onClick:x,onMouseDown:v,onMouseEnter:b,onMouseLeave:S,disabled:w,showChevron:L,chevronStyle:M,rotateChevron:k,showDragHandle:R,focused:V,textWrapperStyle:T,shouldWrapCaption:j,desktopIconStyle:F}=e,z=(0,r.O7)(),{isMobile:D}=z.device,B=(0,i.yK)((e=>({style:{color:C?e.mediumTextColor:y?"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400]:e.regularTextColor,fill:C?e.mediumIconColor:y?"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400]:e.regularIconColor,opacity:w?.4:void 0},leftIconStyle:{width:24,height:f?24:D?18:16,marginRight:-2,...t===a.o&&{height:3},...o},rightStyle:{display:"flex",alignItems:"center",color:w?e.regularTextColor:e.lightTextColor,fill:w?e.regularIconColor:e.lightIconColor,flexShrink:0,...h},rightIconStyle:{width:12,fill:e.lightIconColor,marginLeft:6,transition:"transform 200ms ease-in-out",...M},rightIconRotatedStyle:{transform:"rotate(90deg)"}})),[C,y,w,o,f,D,t,M,h]),[E]=(0,c.o$)();return(0,d.jsx)(s.Z,{ref:E,icon:null==t?void 0:t(B.leftIconStyle),focused:V||!1,disabled:w,title:u,caption:g,shouldWrapCaption:j,desktopTitleStyle:{flexGrow:1,flexShrink:1},showDragHandle:R,buttonStyle:B.style,rightStyle:B.rightStyle,isRedOnHover:m,ignoreLocalHoverState:!!w||void 0,right:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{style:{...l.Z.textOverflowStyle,display:"flex"},children:p}),!w&&L&&(0,n.o)({...B.rightIconStyle,...k&&B.rightIconRotatedStyle})]}),onClick:x,onMouseDown:v,onMouseEnter:b,onMouseLeave:S,textWrapperStyle:T,desktopIconStyle:F})}},18533:(e,t,o)=>{o.d(t,{Z:()=>v});var r=o(667294),i=o(800480),n=o(886628),a=o(568626),l=o(653965),s=o(552629),c=o(552275),d=o(231945),u=o(478140),g=o(632163),p=o(953437),h=o(672495),m=o(460709),C=o(98742),y=o(61766),f=o(694166),x=o(785893);const v=function(e){let{icon:t,title:o,selectedKey:v,onChange:b,onClick:S,popupStyle:w,menuItemOptionsStyle:L,disabled:M,collectionContextStore:k,openButtonPopup:R,hideCheck:V,children:T,disableParentClose:j,...F}=e;const z=(0,i.Fy)(),D="options"in F?F.options:l.xH(F.sections),B=D.find((e=>l.Xy(e.key,v))),E=(0,n.qz)(void 0,y.Z),Z=(0,n.Kw)(E);return(0,r.useEffect)((()=>{k&&R&&(E.setState({...E.state,open:R}),k.settingsStore.setState({...k.settingsStore.state,openButtonPopup:void 0})),B||a.log({level:"error",from:"CollectionSettingsPickListMenuItem",type:"InvalidSelectedItem",error:(0,s.Ui)("Selected key is invalid.")})})),(0,x.jsx)(d.ZP,{popupType:z.isMobile?p.kQ.SlideUp:p.kQ.Popup,alignmentToOrigin:d.vR.End,placementToOrigin:d.pO.Bottom,style:w,originGap:0,buttonPopupStore:E,disabled:M,onClick:S,renderOrigin:e=>(0,x.jsx)(f.Z,{title:o,showChevron:!0,right:null==B?void 0:B.title,rotateChevron:Z.open,disabled:M,icon:t,...(0,C.Z)(e,F)}),render:e=>{let t;t=z.isMobile?{menuType:m.og.ActionSheet}:{menuType:m.og.Popup,width:250};const o=(t,o)=>({key:o,render:e=>(0,x.jsx)(c.Z,{...e,disabled:!1,title:t.title,icon:t.icon,caption:t.caption,captionStyle:t.captionStyle,inline:t.captionInline,spacerStyle:t.inlineSpacerStyle,body:t.body,style:L,checkState:!V&&l.Xy(t.key,v)}),action:()=>{b(t.key,e),j||e.close()}}),r="sections"in F?F.sections.map(((e,t)=>({key:t,render:e=>(0,x.jsx)(h.Z,{enableActionSheetTitle:!0,topBorder:t>0,...e}),items:l.oA(e.map(o))}))):[{key:0,render:e=>(0,x.jsx)(h.Z,{enableActionSheetTitle:!0,...e}),items:l.oA(D.map(o))}];return(0,x.jsxs)(u.Z,{...t,children:[(0,x.jsx)(g.Z,{type:g.i.Vertical,sections:r,initialFocus:0}),T||null]})}})}},374617:(e,t,o)=>{o.d(t,{r_:()=>f,ZA:()=>C});o(667294);var r=o(724405),i=o(142613),n=o(16184),a=o(745238),l=o(785893);const s=(0,a.IU)("statusCompleteGroup",{viewBox:"0 0 17 17",svg:(0,l.jsx)("path",{d:"M8.54688 16.5078C13.0156 16.5078 16.6953 12.8281 16.6953 8.35938C16.6953 3.89844 13.0078 0.210938 8.53906 0.210938C4.07812 0.210938 0.398438 3.89844 0.398438 8.35938C0.398438 12.8281 4.07812 16.5078 8.54688 16.5078ZM8.54688 14.7188C5.02344 14.7188 2.19531 11.8828 2.19531 8.35938C2.19531 4.83594 5.01562 2 8.53906 2C12.0703 2 14.8984 4.83594 14.9062 8.35938C14.9141 11.8828 12.0703 14.7188 8.54688 14.7188ZM7.71094 12.0781C8.00781 12.0781 8.27344 11.9219 8.44531 11.6562L11.8828 6.32031C11.9922 6.14844 12.0781 5.95312 12.0781 5.77344C12.0781 5.35156 11.7109 5.07031 11.3125 5.07031C11.0547 5.07031 10.8281 5.21094 10.6562 5.49219L7.6875 10.2578L6.29688 8.51562C6.10938 8.27344 5.91406 8.17969 5.67188 8.17969C5.25781 8.17969 4.92188 8.50781 4.92188 8.92969C4.92188 9.125 5 9.30469 5.14062 9.48438L6.94531 11.6641C7.16406 11.9375 7.40625 12.0781 7.71094 12.0781Z"})}),c=(0,a.IU)("statusInProgressGroup",{viewBox:"0 0 17 17",svg:(0,l.jsx)("path",{d:"M8.54688 16.5078C13.0156 16.5078 16.6953 12.8281 16.6953 8.35938C16.6953 3.89844 13.0078 0.210938 8.53906 0.210938C4.07812 0.210938 0.398438 3.89844 0.398438 8.35938C0.398438 12.8281 4.07812 16.5078 8.54688 16.5078ZM8.54688 14.7188C5.02344 14.7188 2.19531 11.8828 2.19531 8.35938C2.19531 4.83594 5.01562 2 8.53906 2C12.0703 2 14.8984 4.83594 14.9062 8.35938C14.9141 11.8828 12.0703 14.7188 8.54688 14.7188ZM7.07031 11.4531L11.5938 8.80469C11.9297 8.60938 11.9219 8.125 11.5938 7.92969L7.07031 5.27344C6.71875 5.07031 6.26562 5.24219 6.26562 5.63281V11.0938C6.26562 11.4766 6.69531 11.6719 7.07031 11.4531Z"})}),d=(0,a.IU)("statusTodoGroup",{viewBox:"0 0 17 17",svg:(0,l.jsx)("path",{d:"M8.52344 1.85156C8.97656 1.85156 9.34375 1.49219 9.34375 1.05469C9.34375 0.609375 8.97656 0.234375 8.52344 0.234375C8.08594 0.234375 7.72656 0.609375 7.72656 1.05469C7.72656 1.48438 8.09375 1.85156 8.52344 1.85156ZM10.7969 2.21875C11.2422 2.21875 11.6094 1.85156 11.6094 1.41406C11.6094 0.960938 11.2422 0.601562 10.7969 0.601562C10.3516 0.601562 9.99219 0.960938 9.99219 1.41406C9.99219 1.85156 10.3516 2.21875 10.7969 2.21875ZM6.27344 2.21875C6.71094 2.21875 7.07812 1.85156 7.07812 1.41406C7.07812 0.960938 6.71094 0.601562 6.27344 0.601562C5.82812 0.601562 5.46094 0.960938 5.46094 1.41406C5.46094 1.85156 5.82812 2.21875 6.27344 2.21875ZM12.8359 3.25781C13.2812 3.25781 13.6484 2.89844 13.6484 2.45312C13.6484 2.00781 13.2812 1.64062 12.8359 1.64062C12.3984 1.64062 12.0312 2.00781 12.0312 2.45312C12.0312 2.89062 12.3984 3.25781 12.8359 3.25781ZM4.23438 3.25781C4.67188 3.25781 5.03906 2.89062 5.03906 2.45312C5.03906 2.00781 4.67969 1.64062 4.23438 1.64062C3.78906 1.64062 3.42188 2.00781 3.42188 2.45312C3.42188 2.89844 3.78906 3.25781 4.23438 3.25781ZM14.4609 4.88281C14.9062 4.88281 15.2734 4.51562 15.2734 4.07812C15.2734 3.63281 14.9062 3.26562 14.4609 3.26562C14.0234 3.26562 13.6562 3.63281 13.6562 4.07812C13.6562 4.51562 14.0234 4.88281 14.4609 4.88281ZM2.625 4.88281C3.0625 4.88281 3.42969 4.51562 3.42969 4.07812C3.42969 3.63281 3.0625 3.26562 2.625 3.26562C2.17969 3.26562 1.8125 3.63281 1.8125 4.07812C1.8125 4.51562 2.17969 4.88281 2.625 4.88281ZM15.4922 6.90625C15.9375 6.90625 16.3047 6.54688 16.3047 6.10156C16.3047 5.65625 15.9375 5.28906 15.4922 5.28906C15.0547 5.28906 14.6875 5.65625 14.6875 6.10156C14.6875 6.53906 15.0547 6.90625 15.4922 6.90625ZM1.59375 6.90625C2.02344 6.90625 2.39062 6.53906 2.39062 6.10156C2.39062 5.65625 2.03125 5.28906 1.59375 5.28906C1.14062 5.28906 0.78125 5.65625 0.78125 6.10156C0.78125 6.54688 1.14062 6.90625 1.59375 6.90625ZM15.8828 9.17188C16.3281 9.17188 16.6953 8.80469 16.6953 8.35938C16.6953 7.92188 16.3281 7.55469 15.8828 7.55469C15.4453 7.55469 15.0781 7.92188 15.0781 8.35938C15.0781 8.80469 15.4453 9.17188 15.8828 9.17188ZM1.21094 9.17188C1.64844 9.17188 2.01562 8.80469 2.01562 8.35938C2.01562 7.92188 1.64844 7.55469 1.21094 7.55469C0.765625 7.55469 0.398438 7.92188 0.398438 8.35938C0.398438 8.80469 0.765625 9.17188 1.21094 9.17188ZM15.4922 11.4375C15.9375 11.4375 16.3047 11.0703 16.3047 10.625C16.3047 10.1797 15.9375 9.82031 15.4922 9.82031C15.0547 9.82031 14.6875 10.1875 14.6875 10.625C14.6875 11.0703 15.0547 11.4375 15.4922 11.4375ZM1.59375 11.4375C2.03125 11.4375 2.39062 11.0703 2.39062 10.625C2.39062 10.1875 2.02344 9.82031 1.59375 9.82031C1.14062 9.82031 0.78125 10.1797 0.78125 10.625C0.78125 11.0703 1.14062 11.4375 1.59375 11.4375ZM14.4609 13.4609C14.9062 13.4609 15.2734 13.0938 15.2734 12.6484C15.2734 12.2109 14.9062 11.8438 14.4609 11.8438C14.0234 11.8438 13.6562 12.2109 13.6562 12.6484C13.6562 13.0938 14.0234 13.4609 14.4609 13.4609ZM2.625 13.4609C3.0625 13.4609 3.42969 13.0938 3.42969 12.6484C3.42969 12.2109 3.0625 11.8438 2.625 11.8438C2.17969 11.8438 1.8125 12.2109 1.8125 12.6484C1.8125 13.0938 2.17969 13.4609 2.625 13.4609ZM12.8359 15.0859C13.2812 15.0859 13.6484 14.7188 13.6484 14.2734C13.6484 13.8281 13.2812 13.4688 12.8359 13.4688C12.3984 13.4688 12.0312 13.8359 12.0312 14.2734C12.0312 14.7188 12.3984 15.0859 12.8359 15.0859ZM4.23438 15.0859C4.67969 15.0859 5.03906 14.7188 5.03906 14.2734C5.03906 13.8359 4.67188 13.4688 4.23438 13.4688C3.78906 13.4688 3.42188 13.8281 3.42188 14.2734C3.42188 14.7188 3.78906 15.0859 4.23438 15.0859ZM10.7969 16.125C11.2422 16.125 11.6094 15.7656 11.6094 15.3125C11.6094 14.875 11.2422 14.5078 10.7969 14.5078C10.3516 14.5078 9.99219 14.875 9.99219 15.3125C9.99219 15.7656 10.3516 16.125 10.7969 16.125ZM6.27344 16.125C6.71094 16.125 7.07812 15.7656 7.07812 15.3125C7.07812 14.875 6.71094 14.5078 6.27344 14.5078C5.82812 14.5078 5.46094 14.875 5.46094 15.3125C5.46094 15.7656 5.82812 16.125 6.27344 16.125ZM8.52344 16.4922C8.97656 16.4922 9.34375 16.1172 9.34375 15.6719C9.34375 15.2344 8.97656 14.875 8.52344 14.875C8.09375 14.875 7.72656 15.2422 7.72656 15.6719C7.72656 16.1172 8.08594 16.4922 8.52344 16.4922Z"})});var u=o(709291),g=o(388268),p=o(825464),h=o(132662),m=o(526388);const C={[i.G1]:(0,l.jsx)(u.FormattedMessage,{...i.ct.statusGroupNameTodo}),[i.Ho]:(0,l.jsx)(u.FormattedMessage,{...i.ct.statusGroupNameInProgress}),[i.RW]:(0,l.jsx)(u.FormattedMessage,{...i.ct.statusGroupNameComplete}),[i.Ap]:(0,l.jsx)(u.FormattedMessage,{...g.sY.current}),[i.JV]:(0,l.jsx)(u.FormattedMessage,{...g.sY.future})},y={[i.G1]:d,[i.Ho]:c,[i.RW]:s};function f(e){const{group:t,disableGroup:o,style:i,showIcon:a,showColor:s}=e,c=(0,r.Fg)(),u=y[t.name]??d,g=t.color??"gray";return(0,l.jsxs)("div",{style:{...i,display:"inline-flex",alignItems:"center"},children:[a&&u({display:"inline-block",width:16,height:16,fill:s?c.accentColors[g][400]:c.mediumIconColor}),(0,l.jsx)("span",{style:{paddingLeft:a?6:void 0,color:s?c.accentColors[g][500]:void 0},children:C[t.name]??t.name}),o?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.Z,{size:4}),(0,l.jsx)(m.Z,{placement:p.u.Bottom,render:e=>(0,l.jsx)("div",{...e,children:(0,n.Q)({width:12})}),renderTooltip:e=>(0,l.jsx)("div",{...e,children:o.tooltipCaption}),disableTooltip:void 0===o.tooltipCaption})]}):null]})}},122084:(e,t,o)=>{o.d(t,{F:()=>d,a:()=>c});o(667294);var r=o(724405),i=o(531701),n=o(137810),a=o(362896),l=o(685567),s=o(785893);function c(e){const{value:t,color:o,format:c,showEllipsis:d,onClickRemove:u,showRemoveButton:g,isSingle:p,shouldShrink:h,hideTooltip:m,descriptionTooltip:C,tooltipPlacement:y,...f}=e,x=(0,r.Fg)(),v=(0,r.yK)((e=>({token:{...d&&n.Z.textOverflowStyle}})),[d]),{textColor:b,backgroundColor:S}=(0,i.KR)(x,o);return t?(0,s.jsx)(l.Z,{format:c,value:(0,s.jsx)(a.Z,{children:t}),onClickRemove:u,showRemoveButton:g,isSingle:p,color:b,backgroundColor:S,shouldShrink:h,tooltipPlacement:y,showFullValueTooltip:!m,tooltip:m?void 0:C,style:v.token,...f}):null}function d(e){const{value:t,color:o,format:c,showEllipsis:d,onClickRemove:u,showRemoveButton:g,isSingle:p,shouldShrink:h,groupColor:m,tooltipPlacement:C,descriptionTooltip:y,hideTooltip:f,...x}=e,v=(0,r.Fg)(),b=(0,r.yK)((()=>({token:{...d&&n.Z.textOverflowStyle}})),[d]);if(!t)return null;const{textColor:S,backgroundColor:w}=(0,i.KR)(v,o??m??"gray"),L=o&&"default"!==o?o:m??"gray";return(0,s.jsx)(l.Z,{format:c,value:(0,s.jsx)(a.Z,{children:t}),onClickRemove:u,showRemoveButton:g,isSingle:p,color:S,backgroundColor:w,shouldShrink:h,showFullValueTooltip:!f,tooltip:f?void 0:y,style:b.token,isRound:!0,showColoredDot:L,tooltipPlacement:C,...x})}},345313:(e,t,o)=>{o.r(t),o.d(t,{default:()=>h});o(252262),o(324506);var r=o(667294),i=o(886628),n=o(724405),a=o(247025),l=o(709291),s=o(653965),c=o(740040),d=o(740736),u=o(441281),g=o(276209),p=o(785893);const h=function(e){const{hasData:t}=e,o=(0,l.useIntl)(),h=(0,n.Fg)(),m=(0,i.VK)((()=>t&&0!==e.seriesData.length?e.seriesData[0].type:"line"===e.axisType?"column":e.axisType),[t,e.axisType,e.seriesData]),C=(0,i.VK)((()=>{if(""!==e.xAxisTitle){if(e.xAxisTitle&&!t)return e.xAxisTitle;if(e.axisLabelFormat&&e.axisLabelFormat!==a.Xg.y_axis&&e.axisLabelFormat!==a.Xg.none)return e.xAxisTitle}}),[t,e.axisLabelFormat,e.xAxisTitle]),y=(0,i.VK)((()=>{if(""!==e.yAxisTitle){if(e.yAxisTitle&&!t)return e.yAxisTitle;if(e.axisLabelFormat&&e.axisLabelFormat!==a.Xg.x_axis&&e.axisLabelFormat!==a.Xg.none)return e.yAxisTitle}}),[t,e.axisLabelFormat,e.yAxisTitle]),f=!!t&&Boolean(e.showVerticalGridLines),x=r.useMemo((()=>t?e.seriesData:[{name:"No data",type:m,data:[{x:0,y:50,name:"",color:"rgba(0,0,0,0)",borderColor:"rgba(0,0,0,0)"}]}]),[m,t,e.seriesData]),v=(0,r.useMemo)((()=>(0,c.zn)(e.colorTheme||"auto",Boolean(e.weightColorValue),h)),[e.colorTheme,e.weightColorValue,h]),b=r.useMemo((()=>{var t;return!(null===(t=e.seriesData)||void 0===t||!t.at(0)||1!==e.seriesData[0].data.length||"area"!==e.seriesData[0].type)}),[e.seriesData]),S=(0,r.useMemo)((()=>s.TS((0,u.Z)(h),{chart:{type:m,events:{render:function(){const e=this.container;e&&"area"!==m&&(0,d.E)({intl:o,theme:h,chartType:m,container:e,hasData:t})}}},time:{timezone:e.timezone},title:{text:void 0},series:x,...v,xAxis:{type:e.xAxisType,title:{text:C},gridLineWidth:f?1:0,labels:{autoRotation:e.disableXAxisAutoRotation?void 0:[-45],enabled:t,useHTML:Boolean(e.xLabelFormatter),formatter:function(){const o=this.pos,r=this.value;if(!e.xLabelFormatter)return r;const i="category"!==e.xAxisType&&t?void 0:x[0].data[o];return e.xLabelFormatter(r,i)}},reversed:e.sortReversed,tickLength:t?1:0},yAxis:{title:{text:y},gridLineWidth:e.showHorizontalGridLines?1:0,labels:{formatter:function(){const t=this.value;return e.yLabelFormatter&&"number"==typeof t?e.yLabelFormatter(t):t}},stackLabels:{enabled:!!e.columnStacking&&e.dataLabelsEnabled,formatter:function(){const t=this.total;return e.dataLabelFormatter&&"number"==typeof t?e.dataLabelFormatter(t):t},crop:!1,overflow:"none"},lineWidth:e.showHorizontalGridLines&&!f?0:1,allowDecimals:e.yAxisAllowDecimals},plotOptions:{series:{marker:{enabled:!1},enableMouseTracking:t,states:{hover:!1},...e.columnStacking?{stacking:t?e.columnStacking:void 0,dataLabels:{enabled:!1}}:{dataLabels:{enabled:!!t&&e.dataLabelsEnabled,formatter:function(){const t=this.y;return e.dataLabelFormatter&&"number"==typeof t?e.dataLabelFormatter(t):t},crop:!1,overflow:"none"}}},area:{...b&&{states:{hover:{enabled:!1}},marker:{enabled:!0,radius:3,lineColor:h.contentBackground,lineWidth:1.25}}}},legend:{enabled:!!t&&!e.hideLegend,labelFormatter:function(){return e.legendLabelFormatter?e.legendLabelFormatter(this.name):this.name}},tooltip:{...e.tooltipOptions},credits:{enabled:!1}})),[h,m,e,x,v,C,f,t,y,b,o]);return(0,p.jsx)(g.Z,{loadingProps:e.loadingProps,chartOptions:S,resizableContainerEl:e.resizableContainerEl})}},942531:(e,t,o)=>{o.r(t),o.d(t,{default:()=>Le});var r=o(667294),i=o(800480),n=o(886628),a=o(974575),l=o(842875),s=o(497372),c=o(434709),d=(o(757658),o(164945)),u=o(576205),g=o(397004),p=o(870890);var h=o(183357);var m=o(966603),C=o(80444),y=o(623063),f=o(279954),x=o(724405),v=o(745238),b=o(785893);const S=(0,v.IU)("collectionChartBarError",{viewBox:"0 0 48 48",svg:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.375 16.125V31.875H8.125V16.125H3.375ZM1.125 16C1.125 14.8264 2.07639 13.875 3.25 13.875H8.25C9.42361 13.875 10.375 14.8264 10.375 16V32C10.375 33.1736 9.4236 34.125 8.25 34.125H3.25C2.07639 34.125 1.125 33.1736 1.125 32V16Z"}),(0,b.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.875 22.125V31.875H20.625V22.125H15.875ZM13.625 22C13.625 20.8264 14.5764 19.875 15.75 19.875H20.75C21.9236 19.875 22.875 20.8264 22.875 22V32C22.875 33.1736 21.9236 34.125 20.75 34.125H15.75C14.5764 34.125 13.625 33.1736 13.625 32V22Z"}),(0,b.jsx)("path",{d:"M32.2031 40.4844C31.5365 40.4844 31 40.2708 30.5938 39.8438C30.1979 39.4167 30 38.901 30 38.2969C30 37.9219 30.099 37.5625 30.2969 37.2188L37.0625 25.1094C37.2708 24.7344 37.5469 24.4583 37.8906 24.2812C38.2344 24.0938 38.5938 24 38.9688 24C39.3333 24 39.6875 24.0938 40.0312 24.2812C40.375 24.4583 40.651 24.7344 40.8594 25.1094L47.6406 37.2188C47.8281 37.5625 47.9219 37.9219 47.9219 38.2969C47.9219 38.901 47.7188 39.4167 47.3125 39.8438C46.9167 40.2708 46.3854 40.4844 45.7188 40.4844H32.2031ZM38.9688 38.125C39.3646 38.125 39.6979 37.9896 39.9688 37.7188C40.2396 37.4479 40.3802 37.1146 40.3906 36.7188C40.3906 36.3438 40.25 36.0208 39.9688 35.75C39.6979 35.4792 39.3646 35.3438 38.9688 35.3438C38.5833 35.3438 38.25 35.4792 37.9688 35.75C37.6979 36.0208 37.5625 36.3438 37.5625 36.7188C37.5625 37.1146 37.6979 37.4479 37.9688 37.7188C38.2396 37.9896 38.5729 38.125 38.9688 38.125ZM38.9688 34.3125C39.2708 34.3125 39.5156 34.2188 39.7031 34.0312C39.901 33.8333 40.0052 33.5885 40.0156 33.2969L40.1562 28.9531C40.1667 28.599 40.0625 28.3177 39.8438 28.1094C39.625 27.8906 39.3333 27.7812 38.9688 27.7812C38.6146 27.7812 38.3281 27.8906 38.1094 28.1094C37.8906 28.3281 37.7865 28.6094 37.7969 28.9531L37.9219 33.2969C37.9323 33.5885 38.0312 33.8333 38.2188 34.0312C38.4167 34.2188 38.6667 34.3125 38.9688 34.3125Z"}),(0,b.jsx)("path",{d:"M28.375 31.875V10.125H33.125V26.0061L34.44 23.6524L34.4422 23.6486C34.689 23.2051 34.9991 22.7919 35.375 22.4306V10C35.375 8.8264 34.4236 7.875 33.25 7.875H28.25C27.0764 7.875 26.125 8.82639 26.125 10V32C26.125 33.1736 27.0764 34.125 28.25 34.125H28.5889L29.846 31.875H28.375Z"})]})}),w=(0,v.IU)("collectionChartDonutError",{viewBox:"0 0 48 48",svg:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("path",{d:"M15.0106 13.6027C14.6875 13.0704 14.5 12.4434 14.5 11.7654V11.3707C11.0929 12.754 8.69038 16.0964 8.69038 20C8.69038 25.1416 12.8584 29.3096 18 29.3096C20.5867 29.3096 22.9288 28.2531 24.6147 26.5509C25.4728 25.6845 26.1623 24.6494 26.629 23.5H26.2346C25.5567 23.5 24.9298 23.3125 24.3975 22.9896C24.0522 23.7271 23.5829 24.3953 23.0161 24.9676C21.7354 26.2607 19.962 27.0596 18 27.0596C14.1011 27.0596 10.9404 23.8989 10.9404 20C10.9404 17.1696 12.606 14.7283 15.0106 13.6027Z"}),(0,b.jsx)("path",{d:"M30.3938 23.5C29.8133 25.5602 28.7329 27.4106 27.2908 28.9134C24.9463 31.3564 21.6514 32.875 18 32.875C10.8893 32.875 5.125 27.1107 5.125 20C5.125 14.1025 9.09019 9.13112 14.5 7.60643V6.04997C14.5 5.77851 14.5303 5.51469 14.5875 5.26154C7.87771 6.80883 2.875 12.8202 2.875 20C2.875 28.3533 9.64669 35.125 18 35.125C22.2892 35.125 26.163 33.3381 28.9142 30.4713C30.7683 28.5391 32.1151 26.114 32.7383 23.4125C32.4851 23.4697 32.2214 23.5 31.95 23.5H30.3938Z"}),(0,b.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M30.8265 18.875C30.2887 12.6619 25.3381 7.71125 19.125 7.17346L19.125 10.7577C23.3673 11.2687 26.7313 14.6327 27.2423 18.875L30.8265 18.875ZM33.1249 19.9512C33.127 20.593 32.6083 21.125 31.955 21.125L26.2296 21.125C25.5743 21.125 25.0629 20.5931 25.0595 19.9608C25.0386 16.093 21.907 12.9614 18.0392 12.9405C17.4069 12.9371 16.875 12.4256 16.875 11.7704L16.875 6.04499C16.875 5.39176 17.4069 4.87304 18.0488 4.87507C26.3635 4.90137 33.0986 11.6365 33.1249 19.9512Z"}),(0,b.jsx)("path",{d:"M32.2031 40.4844C31.5365 40.4844 31 40.2708 30.5938 39.8438C30.1979 39.4167 30 38.901 30 38.2969C30 37.9219 30.099 37.5625 30.2969 37.2188L37.0625 25.1094C37.2708 24.7344 37.5469 24.4583 37.8906 24.2812C38.2344 24.0938 38.5938 24 38.9688 24C39.3333 24 39.6875 24.0938 40.0312 24.2812C40.375 24.4583 40.651 24.7344 40.8594 25.1094L47.6406 37.2188C47.8281 37.5625 47.9219 37.9219 47.9219 38.2969C47.9219 38.901 47.7188 39.4167 47.3125 39.8438C46.9167 40.2708 46.3854 40.4844 45.7188 40.4844H32.2031ZM38.9688 38.125C39.3646 38.125 39.6979 37.9896 39.9688 37.7188C40.2396 37.4479 40.3802 37.1146 40.3906 36.7188C40.3906 36.3438 40.25 36.0208 39.9688 35.75C39.6979 35.4792 39.3646 35.3438 38.9688 35.3438C38.5833 35.3438 38.25 35.4792 37.9688 35.75C37.6979 36.0208 37.5625 36.3438 37.5625 36.7188C37.5625 37.1146 37.6979 37.4479 37.9688 37.7188C38.2396 37.9896 38.5729 38.125 38.9688 38.125ZM38.9688 34.3125C39.2708 34.3125 39.5156 34.2188 39.7031 34.0312C39.901 33.8333 40.0052 33.5885 40.0156 33.2969L40.1562 28.9531C40.1667 28.599 40.0625 28.3177 39.8438 28.1094C39.625 27.8906 39.3333 27.7812 38.9688 27.7812C38.6146 27.7812 38.3281 27.8906 38.1094 28.1094C37.8906 28.3281 37.7865 28.6094 37.7969 28.9531L37.9219 33.2969C37.9323 33.5885 38.0312 33.8333 38.2188 34.0312C38.4167 34.2188 38.6667 34.3125 38.9688 34.3125Z"})]})}),L=(0,v.IU)("collectionChartLineError",{viewBox:"0 0 48 48",svg:(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("path",{d:"M2.099 4.96a1.493 1.493 0 0 0-.419.419c-.157.258-.159.433-.16 14.524 0 11.865.018 14.306.109 14.523.141.337.537.668.924.772.205.055 4.401.076 12.735.062l12.43-.02.656-1.16c.361-.638.659-1.187.661-1.22.003-.033-5.629-.06-12.515-.06H4V19.26C4 6.529 3.991 5.703 3.86 5.442c-.305-.607-1.169-.843-1.761-.482m28.844 8.724c-.265.14-.383.327-1.114 1.769-1.994 3.936-4.109 6.247-5.83 6.372-.563.04-.962-.082-1.335-.41-.343-.301-.529-.59-1.247-1.935-.305-.572-.711-1.26-.902-1.529-1.376-1.936-3.647-2.477-5.847-1.393-2.11 1.04-4.211 3.58-6.092 7.362-.55 1.108-.616 1.289-.616 1.694 0 .562.173.828.715 1.1.355.177.417.185.756.096.203-.054.449-.177.547-.274.098-.097.496-.806.884-1.576 1.219-2.414 2.285-3.963 3.548-5.153.957-.9 1.678-1.276 2.457-1.282.976-.008 1.422.392 2.288 2.053 1.192 2.283 2.038 3.169 3.438 3.596 1.91.582 4.036-.238 5.958-2.3 1.405-1.506 2.915-3.852 3.93-6.106.284-.631.332-.81.301-1.129-.088-.91-1.014-1.391-1.839-.955m7.126 10.422c-.472.177-.797.395-1.032.694-.189.239-2.32 4.019-6.159 10.92-.514.924-.98 1.82-1.036 1.992-.129.394-.069 1.204.116 1.572.192.38.58.777.962.983l.32.173 7.314.022c8.029.023 7.732.04 8.331-.454.636-.525.94-1.542.689-2.31-.133-.404-6.856-12.476-7.201-12.928-.452-.593-1.605-.925-2.304-.664m1.331 3.882c.132.075.301.261.376.414.125.255.129.478.051 2.718-.09 2.591-.117 2.752-.506 3.006-.301.198-.774.233-1.072.079-.493-.255-.542-.438-.601-2.229-.095-2.932-.088-3.35.06-3.634.284-.545 1.066-.709 1.692-.354m.152 7.641c.377.287.557.645.551 1.097-.014 1.182-1.366 1.817-2.262 1.062-.348-.293-.481-.594-.481-1.092 0-.523.213-.886.682-1.158.446-.259 1.104-.219 1.51.091",fillRule:"evenodd"})})});var M=o(709291),k=o(412714),R=o(918514),V=o(489728),T=o(132662);const j=(0,M.defineMessages)({generic:{id:"CollectionChartError.somethingWrong",defaultMessage:"Something is wrong with your chart data."},timeout:{id:"CollectionChartError.queryCollectionTimeoutBody",defaultMessage:"Oops! Your chart is taking too long to load."}});const F=function(e){const{chartError:t,collectionSettingsStore:o,chartType:n}=e,l=(0,i.O7)(),c=(0,x.yK)((e=>({container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:s.j9,position:"relative",top:-20,fontSize:14},errorIcon:{width:48,height:48,fill:e.lightIconColor},message:{color:e.lightTextColor},button:{width:"fit-content",fontWeight:500,border:`1px solid ${e.outlineButtonBorder}`}})),[]),d=(0,r.useCallback)((()=>{if((0,a.o0)(t))o.setState({open:!0,stack:[{type:"main"}]});else if("queryCollection_timeout"===t){const e=(0,R.UY)("database.loadTimesAndPerformance");k.D({environment:l,url:e})}}),[t,o,l]);return(0,b.jsxs)("div",{style:c.container,children:[n?z[n](c.errorIcon):S(c.errorIcon),(0,b.jsx)(T.Z,{size:16}),(0,b.jsx)("span",{style:c.message,children:D(t)}),(0,b.jsx)(T.Z,{size:16}),(0,b.jsx)(V.Z,{style:c.button,onClick:d,children:B(t)})]})},z={column:S,bar:S,line:L,donut:w,placeholder:S};function D(e){return(0,a.o0)(e)?(0,b.jsx)(M.FormattedMessage,{...j.generic}):"queryCollection_timeout"===e?(0,b.jsx)(M.FormattedMessage,{...j.timeout}):(0,b.jsx)(M.FormattedMessage,{...j.generic})}function B(e){return(0,a.o0)(e)?(0,b.jsx)(M.FormattedMessage,{id:"CollectionChartError.fixable",defaultMessage:"Help me fix"}):"queryCollection_timeout"===e?(0,b.jsx)(M.FormattedMessage,{id:"CollectionChartError.queryCollectionTimeoutButton",defaultMessage:"Learn more"}):(0,b.jsx)(M.FormattedMessage,{id:"CollectionChartError.learnMore",defaultMessage:"Learn more"})}var E=o(120394),Z=o(401898),K=o(20130),P=o(348190),O=o(435011),A=o(114714),I=o(180951),_=o(584169),W=o(997466),G=o(212347),N=o(825464),H=o(573063),$=o(526388);const q=(0,M.defineMessages)({earliestDates:{defaultMessage:"Only showing earliest {limit} {dateGroupByOption}",id:"charts.limitsWarning.earliestDates"},latestDates:{defaultMessage:"Only showing latest {limit} {dateGroupByOption}",id:"charts.limitsWarning.latestDates"},lowestNumbers:{defaultMessage:"Only showing lowest {limit} values",id:"charts.limitsWarning.lowestNumbers"},highestNumbers:{defaultMessage:"Only showing highest {limit} values",id:"charts.limitsWarning.highestNumbers"},genericLimit:{defaultMessage:"Only showing {limit} options in {propertyName}",id:"charts.limitsWarning.genericLimit"}}),Q=(0,M.defineMessages)({addFilters:{defaultMessage:"Add filters to reduce the data range.",id:"charts.limitsWarning.tooltip.addFilters"}}),X=(0,M.defineMessages)({column:{defaultMessage:"Max {limit} bars can be displayed in a chart.",id:"charts.limitsWarning.tooltip.maxDisplay.columnChart"},bar:{defaultMessage:"Max {limit} bars can be displayed in a chart.",id:"charts.limitsWarning.tooltip.maxDisplay.barChart"},line:{defaultMessage:"Max {limit} data points can be displayed in a chart.",id:"charts.limitsWarning.tooltip.maxDisplay.lineChart"},donut:{defaultMessage:"Max {limit} slices can be displayed in a chart.",id:"charts.limitsWarning.tooltip.maxDisplay.donutChart"},subGroups:{defaultMessage:"Max {limit} groups can be displayed in a chart.",id:"charts.limitsWarning.tooltip.maxDisplay.subGroups"}});function U(e,t,o){const r=null==e?void 0:e.type;if((0,A.ib)(t)&&"relative"===t.groupBy)return q.genericLimit;if("ascending"===o.type)switch(r){case"formula":switch((0,O.mm)(e)){case"date":return q.earliestDates;case"number":return q.lowestNumbers;default:return q.genericLimit}case"date":case"created_time":case"last_edited_time":case"last_visited_time":return q.earliestDates;case"number":return q.lowestNumbers;default:return q.genericLimit}else{if("descending"!==o.type)return q.genericLimit;switch(r){case"formula":switch((0,O.mm)(e)){case"date":return q.latestDates;case"number":return q.highestNumbers;default:return q.genericLimit}case"date":case"created_time":case"last_edited_time":case"last_visited_time":return q.latestDates;case"number":return q.highestNumbers;default:return q.genericLimit}}}function Y(e){let{chartConfig:t,chartLimit:o,collectionContextStore:r}=e;const{limitType:i,limit:a}=o,l=(0,M.useIntl)(),s=(0,n.VK)((()=>r.normalizedSchemaStore.state),[r.normalizedSchemaStore]);if("results"===i&&"results_reducer"===t.dataConfig.type){const e=(0,I.Qm)({schema:s,property:t.dataConfig.nameProperty});return e?(0,b.jsx)(M.FormattedMessage,{...q.genericLimit,values:{limit:a,propertyName:e.name}}):null}if("groups"===i&&"groups_reducer"===t.dataConfig.type){const e=t.dataConfig.groupBy,o=(0,A.mu)(e),r=(0,I.Qm)({schema:s,property:e.property});if(!r)return null;const i=U(r,e,o);return(0,b.jsx)(M.FormattedMessage,{...i,values:{limit:a,dateGroupByOption:(0,A.ib)(e)?l.formatMessage(G.HE[e.groupBy]).toLocaleLowerCase():void 0,propertyName:r.name}})}if("subGroups"===i&&"groups_reducer"===t.dataConfig.type&&(0,d.u)(t)&&t.dataConfig.aggregationConfig.stackOptions){const e=t.dataConfig.aggregationConfig.stackOptions.groupBy,o=(0,A.mu)(e),r=(0,I.Qm)({schema:s,property:e.property});if(!r)return null;const i=U(r,e,o);return(0,b.jsx)(M.FormattedMessage,{...i,values:{limit:a,dateGroupByOption:(0,A.ib)(e)?e.groupBy:void 0,propertyName:r.name}})}return null}function J(e){let{chartConfig:t,chartReducerResults:o,loadingProps:r,collectionContextStore:i}=e;const a=(0,M.useIntl)(),l=(0,x.yK)((e=>({container:{padding:"8px 4px 8px 14px",borderRadius:20,backgroundColor:"light"===e.mode?(0,W.Fq)(e.accentColors.gray[100],.3):"rgba(255, 255, 255, 0.05)",width:"max-content",margin:"0 auto",marginBottom:20},text:{fontSize:12,textAlign:"center",color:e.mediumTextColor},iconStyle:{width:14,height:14,fill:e.mediumTextColor,position:"absolute",bottom:-2},iconContainer:{position:"relative",height:14,width:30}})),[]),s=function(e){let{chartConfig:t,chartReducerResults:o}=e;const r=(0,n.VK)((()=>(0,p.WT)()),[]),i=(0,n.VK)((()=>(0,p.Zl)()),[]),a=(0,n.VK)((()=>(0,p.K9)()),[]);return"results_reducer"===t.dataConfig.type&&"results"===(null==o?void 0:o.type)&&o.blockIds.length>=i?{limitType:"results",limit:i}:"groups_reducer"===t.dataConfig.type&&"groups"===(null==o?void 0:o.type)&&o.results.length>=r?{limitType:"groups",limit:r}:"groups_reducer"===t.dataConfig.type&&"groups"===(null==o?void 0:o.type)&&o.subGroupResults&&o.subGroupResults.length>=a?{limitType:"subGroups",limit:a}:void 0}({chartConfig:t,chartReducerResults:o});if(void 0===s||r.isInitialLoading||r.isThrottledLoading)return null;const{limitType:c,limit:d}=s;return(0,b.jsx)("div",{style:l.container,children:(0,b.jsxs)("div",{style:l.text,children:[(0,b.jsx)(Y,{chartConfig:t,collectionContextStore:i,chartLimit:s}),(0,b.jsx)($.Z,{renderTooltip:()=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{children:(0,b.jsx)(M.FormattedMessage,{..."subGroups"===c?X.subGroups:X[t.type],values:{limit:d}})}),(0,b.jsx)("div",{children:(0,b.jsx)(M.FormattedMessage,{...Q.addFilters})})]}),placement:N.u.Top,render:e=>(0,b.jsx)(H.Z,{icon:()=>(0,_.m)(l.iconStyle),ariaLabel:a.formatMessage("subGroups"===c?X.subGroups:X[t.type],{limit:d}),style:{...l.iconContainer},disableBackground:!0,...e})})]})})}var ee=o(247025),te=o(202032),oe=o(296994),re=o(892918),ie=o(623879),ne=o(82902),ae=o(526561),le=o(653965);const se=(0,M.defineMessages)({noData:{defaultMessage:"No data",id:"database.chart.multipleSeriesTooltip.noData"},empty:{defaultMessage:"Empty",id:"database.chart.tooltip.empty"}});function ce(e,t,o){const i=(0,M.useIntl)(),a=(0,x.yK)((e=>({defaultContainer:{border:`1px solid ${e.accentColors.gray[100]}`,borderRadius:"8px",backgroundColor:e.cardContentBackground,maxHeight:"375px",maxWidth:"300px",overflow:"hidden",pointerEvents:"auto",boxShadow:"0px 2px 4px rgb(0, 0, 0, 0.1)"},scrollContainer:{overflow:"auto",padding:"15px 15px 10px 15px",maxHeight:"375px"},containerSingleSeries:{padding:"10px 15px 5px 15px"},header:{fontSize:"12px",paddingBottom:"7px",color:e.regularTextColor,overflowX:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"},row:{fontSize:"12px",lineHeight:"18px",textAlign:"left",display:"flex",justifyContent:"space-between"},square:{height:"7px",width:"7px",borderRadius:"1px",borderWidth:"0px",marginRight:"6px",marginBottom:"6px",display:"inline-block"},rowLeft:{display:"inline-block",marginRight:"20px",color:e.chartRowLeftColor,overflowX:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"105px"},rowRight:{color:e.chartRowRightColor},noData:{color:e.chartRowLeftColor}})),[]),l=(0,r.useMemo)((()=>i.formatMessage(se.noData)),[i]),s=r.useCallback((e=>Object.keys(e).reduce(((t,o)=>`${t}${(0,le.GL)(o)}:${e[o]};`),"")),[]),{rowStyle:c,squareStyle:u,rowLeftStyles:g,rowRightStyles:p,headerStyles:h,outsideContainerStyle:m,scrollContainerStyle:C,containerSingleSeriesStyle:y,noDataStyle:f}=(0,r.useMemo)((()=>({outsideContainerStyle:s(a.defaultContainer),scrollContainerStyle:s(a.scrollContainer),containerSingleSeriesStyle:s({...a.defaultContainer,...a.containerSingleSeries}),rowStyle:s(a.row),squareStyle:s(a.square),rowLeftStyles:s(a.rowLeft),rowRightStyles:s(a.rowRight),headerStyles:s(a.header),noDataStyle:s(a.noData)})),[a,s]),v=(0,r.useMemo)((()=>({useHTML:!0,shadow:!1,borderWidth:0,backgroundColor:void 0,outside:!1,stickOnContact:!0,hideDelay:100})),[]),b=(0,n.VK)((()=>"donut"===(null==e?void 0:e.type)),[null==e?void 0:e.type]),S=(0,n.VK)((()=>{var t;return("bar"===(null==e?void 0:e.type)||"column"===(null==e?void 0:e.type))&&("groups_reducer"===e.dataConfig.type&&(!!e.dataConfig.aggregationConfig.stackOptions&&"percent"===(null===(t=e.chartFormat)||void 0===t?void 0:t.axisGroupStyle)))}),[e]),w=(0,r.useMemo)((()=>({...v,formatter:function(){const o=this.color??this.series.color,{label:r,value:n}=(0,ae.Xn)({chartConfig:e,schema:t,highChartsLabel:this.point.name,highChartsValue:this.point.y,isMultiSeries:!1,intl:i});let a="";return b&&this.point.percentage&&(a=` (${de(this.point.percentage)}%)`),`\n\t\t\t\t\t<div style="${y}">\n\t\t\t\t\t\t<div style="${c}">\n\t\t\t\t\t\t\t<div> \n\t\t\t\t\t\t\t\t<div style="${u} background-color: ${o};"></div> \n\t\t\t\t\t\t\t\t<div style="${g}">\n\t\t\t\t\t\t\t\t\t${""===r?i.formatMessage(se.empty):r}\n\t\t\t\t\t\t\t\t</div> \n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div style="${p}">\n\t\t\t\t\t\t\t\t${n}${a}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`}})),[v,e,t,i,b,y,c,u,g,p]),L=(0,r.useMemo)((()=>({...v,shared:!0,formatter:function(){var o;const r=null===(o=this.points)||void 0===o?void 0:o.filter((e=>!(null==e||!e.y)&&0!==e.y));("line"===this.series.type||"area"===this.series.type)&&(null==r||r.sort(((e,t)=>((null==t?void 0:t.y)??0)-((null==e?void 0:e.y)??0))));let n=this.point.name;if(e&&(0,d.u)(e)&&"groups_reducer"===e.dataConfig.type){const o=e.dataConfig,r=o.groupBy,a=(0,I.Qm)({schema:t,property:o.groupBy.property});a&&(n=(0,ae.hZ)(a,r,this.point.name,i))}return r&&0!==r.length?`\n\t\t\t\t<div style="${m}">\n\t\t\t\t<div style="${C}">\n\t\t\t\t\t<div style="${h}">${n}</div>\n\t\t\t\t\t${r.map((o=>{const r=o.color??o.series.color,{label:n,value:a}=(0,ae.Xn)({chartConfig:e,schema:t,highChartsLabel:o.series.name,highChartsValue:o.y??void 0,isMultiSeries:!0,intl:i});let l="";return S&&o.percentage&&(l=` (${de(o.percentage)}%)`),`\n\t\t\t\t\t\t\t<div style="${c}">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<div style="${u} background-color: ${r};"></div> \n\t\t\t\t\t\t\t\t\t\t<div style="${g}">\n\t\t\t\t\t\t\t\t\t\t\t${""===n?i.formatMessage(se.empty):n}\n\t\t\t\t\t\t\t\t\t\t</div> \n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<span style="${p}">\n\t\t\t\t\t\t\t\t\t${a}${l}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t`})).join("")}\n\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`:`\n\t\t\t\t\t<div style="${m}">\n\t\t\t\t\t<div style="${C}">\n\t\t\t\t\t\t<div style="${h}">${n}</div>\n\t\t\t\t\t\t<div style="${c} ${f}">\n\t\t\t\t\t\t${l}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t`}})),[v,e,m,C,h,t,i,c,f,l,S,u,g,p]);return o?1===o.length?w:L:v}function de(e){return e%1==0?e:e.toFixed(1)}function ue(e){let{collectionContextStore:t,groupedChartReducerResults:o,groupedDataConfig:a,chartFormat:l,timezone:s,loadingProps:c,axisType:u,resizableContainerEl:g}=e;const m=(0,i.O7)(),C=(0,M.useIntl)(),y=(0,x.Fg)(),f=(0,r.useRef)(!0),{chartConfig:v,chartErrorStore:S,collectionViewStore:w,collectionViewBlockStore:L,databaseType:k}=(0,n.VK)((()=>{const e=t.collectionViewStore(),o=null==e?void 0:e.getChartConfig();return{chartConfig:o&&(0,d.u)(o)&&"groups_reducer"===o.dataConfig.type?o:void 0,chartErrorStore:t.chartErrorStore,collectionViewStore:e,collectionViewBlockStore:t.collectionViewBlockStore(),databaseType:t.databaseType}}),[t]),R=(0,n.VK)((()=>t.normalizedSchemaStore.state),[t.normalizedSchemaStore]),V=(0,n.VK)((()=>t.normalizedFormatStore.state),[t]),T=(0,n.VK)((()=>(0,I.Qm)({schema:R,property:a.groupBy.property})),[a.groupBy.property,R]),j=(0,n.VK)((()=>{if(a.aggregationConfig.aggregation.property)return(0,I.Qm)({schema:R,property:a.aggregationConfig.aggregation.property})}),[a.aggregationConfig.aggregation,R]),F=(0,n.VK)((()=>null==l?void 0:l.axisSort),[null==l?void 0:l.axisSort]),z=(0,n.VK)((()=>null==l?void 0:l.axisAvatar),[null==l?void 0:l.axisAvatar]),D=(0,n.VK)((()=>{if("side_by_side"===(null==l?void 0:l.axisGroupStyle))return;if(a.aggregationConfig.stackOptions){if(null!=l&&l.axisGroupStyle)return l.axisGroupStyle;if("line"===(null==v?void 0:v.type))return;return ee.UJ.normal}}),[null==v?void 0:v.type,null==l?void 0:l.axisGroupStyle,a.aggregationConfig]),B=(0,n.VK)((()=>T?T.name||ie.SO[T.type]:""),[T]),E=(0,n.VK)((()=>{const e=a.aggregationConfig;if((0,te.HK)(e.aggregation)){return(0,h.Hk)({aggregation:e.aggregation,databaseType:k,intl:C})||""}const t=(0,h.Hk)({aggregation:e.aggregation,databaseType:k,intl:C}),o=(0,I.Qm)({schema:R,property:e.aggregation.property});return o?`${o.name||ie.SO[o.type]} (${t})`:""}),[a,k,C,R]),Z=(0,n.VK)((()=>(0,ee.vi)(v)),[v]),K=!!v&&(0,ne.bc)(v),P=(null==l?void 0:l.hideLegend)||K,O=(0,n.VK)((()=>{const e=null==l?void 0:l.axisGridLine;return!e||("horizontal"===e||"both"===e)}),[l]),_=(0,n.VK)((()=>{const e=null==l?void 0:l.axisGridLine;return!!e&&("vertical"===e||"both"===e)}),[l]),W=(0,n.VK)((()=>(0,A.Qq)({schema:R,groupBy:a.groupBy})),[a,R]),G=(0,n.VK)((()=>{if(a.aggregationConfig.stackOptions)return(0,A.Qq)({schema:R,groupBy:a.aggregationConfig.stackOptions.groupBy})}),[a,R]),N=(0,n.VK)((()=>(0,p.WT)()),[]),H=(0,n.VK)((()=>{var e,r;if(!o||!t||!L)return;let i=(0,re.Cz)({groupBy:a.groupBy,schema:R,formatGroups:V[A.Uh]||[],schemaGroups:W,reducerResults:o.results,getRecordModel:L.getRecordModel,relativeVariableResult:t.relativeVariableStore.state,viewAppConfigUri:k,allowedCollectionStores:t.collectionStoresStore.state});"manual"===F&&(i=i.filter((e=>!(0,A.eF)(e)))),i=i.slice(0,N);const n=o.subGroupResults&&null!==(e=a.aggregationConfig.stackOptions)&&void 0!==e&&e.groupBy?(0,re.Cz)({groupBy:a.aggregationConfig.stackOptions.groupBy,schema:R,formatGroups:[],schemaGroups:G,reducerResults:o.subGroupResults,getRecordModel:L.getRecordModel,relativeVariableResult:t.relativeVariableStore.state,viewAppConfigUri:k,allowedCollectionStores:t.collectionStoresStore.state}).slice(0,N):void 0,l=o.aggregationResults;if(!l)return;const c=(0,ne.VB)({groupedDataConfig:a,hideEmptyGroups:Boolean(null==v||null===(r=v.chartFormat)||void 0===r?void 0:r.axisHideEmptyGroups),axisSort:F}),d=(0,ne.FZ)({collectionContextStore:t,groupedDataConfig:a,groupResults:i,aggregationResults:l,subGroupResults:n,xAxisType:c,timezone:s,environment:m,intl:C,theme:y});f.current&&(t.onItemMount(),f.current=!1);const u=o.results.some((e=>e.total>0));return{seriesData:d,xAxisType:c,reverseXAxis:(0,ne.Iq)({xAxisType:c,axisSort:F}),hasData:u}}),[o,N,t,L,a,R,V,W,k,F,G,null==v?void 0:v.chartFormat,s,m,C,y],{useDeepEqual:!0}),$=ce(v,R,null==H?void 0:H.seriesData),q=(0,ae.V4)(null==w?void 0:w.getRecordModel,C,z===ee.lr.avatar_name),Q=(0,r.useMemo)((()=>T&&(0,ee.Sw)(T)&&(void 0===z||z===ee.lr.avatar||z===ee.lr.avatar_name)),[z,T]),X=(()=>{if(T)return Q?q:(0,ee.Dv)(T)?(0,ae.py)(T,C):(0,A.ib)(a.groupBy)&&(0,ee.l2)(T)?(0,ae.vY)({groupBy:a.groupBy.groupBy,dateFormat:T.date_format,intl:C}):void 0})(),U=(()=>{if(j)return(0,ee.Dv)(j)?(0,ae.py)(j,C):void 0})(),Y=(e=>{const t=null===(e=a.aggregationConfig.stackOptions)||void 0===e?void 0:e.groupBy;if(P||!t)return;const o=t.property,r=(0,I.Qm)({schema:R,property:o});return r&&(0,A.ib)(t)&&(0,ee.l2)(r)?e=>(0,ae.qQ)({dateString:e,dateFormat:r.date_format,groupBy:t.groupBy,intl:C}):void 0})();return r.useEffect((()=>{var e;if(!w)return;const t=null==o?void 0:o.subGroupResults;if(Boolean(v&&(0,d.u)(v)&&"groups_reducer"===v.dataConfig.type&&(null===(e=v.dataConfig.aggregationConfig.stackOptions)||void 0===e?void 0:e.groupBy))&&t){if(1===t.length&&!t[0].value.value){const e=new Map(S.state);return e.set(w.id,"stackBy_property_no_values"),void S.setState(e)}}const r=new Map(S.state);r.delete(w.id),S.setState(r)}),[v,w,null==o?void 0:o.subGroupResults,S]),(0,b.jsx)(oe.XY,{axisType:u,timezone:s,seriesData:(null==H?void 0:H.seriesData)||[],hasData:Boolean(null==H?void 0:H.hasData),loadingProps:c,xAxisType:null==H?void 0:H.xAxisType,yAxisAllowDecimals:!1,xAxisTitle:B,yAxisTitle:E,axisLabelFormat:null==l?void 0:l.axisLabel,colorTheme:null==l?void 0:l.colorTheme,weightColorValue:null==l?void 0:l.weightColorValue,hideLegend:P,showHorizontalGridLines:O,showVerticalGridLines:_,dataLabelsEnabled:Z,columnStacking:D,tooltipOptions:$,sortReversed:null==H?void 0:H.reverseXAxis,resizableContainerEl:g,xLabelFormatter:X,disableXAxisAutoRotation:Q,yLabelFormatter:U,dataLabelFormatter:U,stackLabelFormatter:U,legendLabelFormatter:Y})}var ge=o(423512),pe=o(433929);const he=(0,M.defineMessages)({total:{id:"charts.donut.aggregationValue.total",defaultMessage:"Total"},totalPropertyName:{id:"charts.donut.aggregationValue.totalPropertyName",defaultMessage:"Total {propertyName}"},averagePropertyName:{id:"charts.donut.aggregationValue.averagePropertyName",defaultMessage:"Average {propertyName}"},minPropertyName:{id:"charts.donut.aggregationValue.minPropertyName",defaultMessage:"Min {propertyName}"},maxPropertyName:{id:"charts.donut.aggregationValue.maxPropertyName",defaultMessage:"Max {propertyName}"},medianPropertyName:{id:"charts.donut.aggregationValue.medianPropertyName",defaultMessage:"Median {propertyName}"},uniquePropertyName:{id:"charts.donut.aggregationValue.uniquePropertyName",defaultMessage:"Distinct {propertyName}"}});function me(e,t,o,i){const n=(0,M.useIntl)();return(0,r.useMemo)((()=>{if(!e||!o)return;const r=e.aggregationResult,a=(0,I.Qm)({schema:i,property:o});if(!r||"number"!==r.type||!a)return;let l,s=(0,ge.uf)(r.value,"number",n,"compact");if((0,ee.Dv)(a)&&"count"!==t){const e=(0,ae.ff)(a)??"number";s=(0,ge.uf)(r.value,e,n,"compact")}const c=a.name;switch(t){case"sum":l=pe.default.formatMessage(he.totalPropertyName,{propertyName:c});break;case"average":l=pe.default.formatMessage(he.averagePropertyName,{propertyName:c});break;case"min":l=pe.default.formatMessage(he.minPropertyName,{propertyName:c});break;case"max":l=pe.default.formatMessage(he.maxPropertyName,{propertyName:c});break;case"median":l=pe.default.formatMessage(he.medianPropertyName,{propertyName:c});break;case"unique":l=pe.default.formatMessage(he.uniquePropertyName,{propertyName:c});break;default:l=pe.default.formatMessage(he.total)}return{title:s,subtitle:l}}),[e,t,n,o,i])}function Ce(e){let{collectionContextStore:t,groupedChartReducerResults:o,aggregationChartReducerResults:a,groupedDataConfig:l,chartFormat:s,timezone:c,loadingProps:d,resizableContainerEl:u}=e;const g=(0,i.O7)(),p=(0,M.useIntl)(),h=(0,x.Fg)(),m=(0,r.useRef)(!0),{collectionViewBlockStore:C,databaseType:y,schema:f,chartConfig:v}=(0,n.VK)((()=>{var e;const o=null===(e=t.collectionViewStore())||void 0===e?void 0:e.getChartConfig();return{collectionViewBlockStore:t.collectionViewBlockStore(),databaseType:t.databaseType,schema:t.normalizedSchemaStore.state,chartConfig:o&&"donut"===o.type&&"groups_reducer"===o.dataConfig.type?o:void 0}}),[t]),S=(0,n.VK)((()=>(0,A.Qq)({schema:f,groupBy:l.groupBy})),[l,f]),w=(0,n.VK)((()=>{if(!o||!C)return;const e=(0,re.Cz)({groupBy:l.groupBy,schema:f,formatGroups:[],schemaGroups:S,reducerResults:o.results,getRecordModel:C.getRecordModel,relativeVariableResult:t.relativeVariableStore.state,viewAppConfigUri:y,allowedCollectionStores:t.collectionStoresStore.state}),r=o.aggregationResults;if(!r)return;const i=(0,ne.yd)({collectionContextStore:t,groupedDataConfig:l,groupResults:e,aggregationResults:r,timezone:c,environment:g,intl:p,theme:h});return m.current&&(t.onItemMount(),m.current=!1),i}),[o,l,c,g,p,t,h,C,y,f,S],{useDeepEqual:!0}),L=(0,n.VK)((()=>!(null!=s&&s.donutHideValue)),[null==s?void 0:s.donutHideValue]),k=(0,n.VK)((()=>"count"===l.aggregationConfig.aggregation.aggregator?l.groupBy.property:l.aggregationConfig.aggregation.property),[l]),R=me(a,l.aggregationConfig.aggregation.aggregator,k,f),V=ce(v,f,w),T=(()=>{const e=l.groupBy,t=(0,I.Qm)({schema:f,property:e.property});if(t)return(0,A.ib)(e)&&(0,ee.l2)(t)?o=>(0,ae.qQ)({dateString:o,dateFormat:t.date_format,groupBy:e.groupBy,intl:p}):void 0})();return(0,b.jsx)(oe.$i,{timezone:c,seriesData:w||[],title:L?null==R?void 0:R.title:void 0,subtitle:L?null==R?void 0:R.subtitle:void 0,loadingProps:d,colorTheme:null==s?void 0:s.colorTheme,weightColorValue:null==s?void 0:s.weightColorValue,hideLegend:null==s?void 0:s.hideLegend,tooltipOptions:V,resizableContainerEl:u,legendLabelFormatter:T})}function ye(e){let{collectionContextStore:t,resultsChartReducerResults:o,resultsDataConfig:a,chartFormat:l,timezone:s,loadingProps:c,axisType:u,resizableContainerEl:g}=e;const p=(0,i.O7)(),h=(0,M.useIntl)(),m=(0,x.Fg)(),C=(0,r.useRef)(!0),{chartConfig:y,collectionViewBlockStore:f}=(0,n.VK)((()=>{const e=t.collectionViewStore(),o=null==e?void 0:e.getChartConfig();return{chartConfig:o&&(0,d.u)(o)&&"results_reducer"===o.dataConfig.type?o:void 0,collectionViewBlockStore:t.collectionViewBlockStore()}}),[t]),v=(0,n.VK)((()=>t.normalizedSchemaStore.state),[t.normalizedSchemaStore]),S=null==l?void 0:l.axisSort,w=(0,n.VK)((()=>{const e=a.nameProperty,t=v[e];return t?t.name||ie.SO[t.type]:""}),[a.nameProperty,v]),L=(0,n.VK)((()=>{const e=v[a.valueProperty];return e?`${e.name||ie.SO[e.type]}`:""}),[a,v]),k=!!y&&(0,ne.bc)(y),R=(null==l?void 0:l.hideLegend)||k,V=(0,n.VK)((()=>{const e=null==l?void 0:l.axisGridLine;return!e||("horizontal"===e||"both"===e)}),[l]),T=(0,n.VK)((()=>{const e=null==l?void 0:l.axisGridLine;return!!e&&("vertical"===e||"both"===e)}),[l]),j=(0,n.VK)((()=>{if(!a||!t||!f)return;const e="category",r=(0,ne.C6)({collectionContextStore:t,resultsDataConfig:a,resultsChartReducerResults:o,chartType:"axis",xAxisType:e,timezone:s,environment:p,intl:h,theme:m});C.current&&(t.onItemMount(),C.current=!1);const i=o&&o.blockIds.length>0;return{seriesData:r,xAxisType:e,reverseXAxis:(0,ne.Iq)({xAxisType:e,axisSort:S}),hasData:i}}),[a,t,f,o,s,p,h,m,S],{useDeepEqual:!0}),F=(0,n.VK)((()=>(0,ee.vi)(y)),[y]),z=(0,n.VK)((()=>(0,I.Qm)({schema:v,property:a.valueProperty})),[a.valueProperty,v]),D=z?(0,ae.py)(z,h):void 0,B=ce(y,v,null==j?void 0:j.seriesData);return(0,b.jsx)(oe.XY,{axisType:u,timezone:s,seriesData:(null==j?void 0:j.seriesData)||[],hasData:Boolean(null==j?void 0:j.hasData),loadingProps:c,xAxisType:null==j?void 0:j.xAxisType,yAxisAllowDecimals:!1,xAxisTitle:w,yAxisTitle:L,axisLabelFormat:null==l?void 0:l.axisLabel,colorTheme:null==l?void 0:l.colorTheme,weightColorValue:null==l?void 0:l.weightColorValue,hideLegend:R,showHorizontalGridLines:V,showVerticalGridLines:T,dataLabelsEnabled:F,columnStacking:void 0,tooltipOptions:B,sortReversed:null==j?void 0:j.reverseXAxis,resizableContainerEl:g,dataLabelFormatter:D,yLabelFormatter:D})}function fe(e){let{collectionContextStore:t,resultsChartReducerResults:o,aggregationChartReducerResults:a,resultsDataConfig:l,chartFormat:s,timezone:c,loadingProps:d,resizableContainerEl:u}=e;const g=(0,i.O7)(),p=(0,M.useIntl)(),h=(0,x.Fg)(),m=(0,r.useRef)(!0),{chartConfig:C,collectionViewBlockStore:y}=(0,n.VK)((()=>{const e=t.collectionViewStore(),o=null==e?void 0:e.getChartConfig();return{chartConfig:o&&"donut"===o.type&&"results_reducer"===o.dataConfig.type?o:void 0,collectionViewBlockStore:t.collectionViewBlockStore()}}),[t]),f=(0,n.VK)((()=>t.normalizedSchemaStore.state),[t.normalizedSchemaStore]),v=(0,n.VK)((()=>{if(!o||!y)return;const e=(0,ne.C6)({collectionContextStore:t,resultsDataConfig:l,resultsChartReducerResults:o,chartType:"donut",xAxisType:void 0,timezone:c,environment:g,intl:p,theme:h});m.current&&(t.onItemMount(),m.current=!1);const r=null==e?void 0:e[0];return[{...r,data:null==r?void 0:r.data,type:"pie"}]}),[o,y,t,l,c,g,p,h],{useDeepEqual:!0}),S=(0,n.VK)((()=>{if(l.valueProperty)return l.valueProperty}),[l]),w=(0,n.VK)((()=>!(null!=s&&s.donutHideValue)),[null==s?void 0:s.donutHideValue]),L=me(a,"sum",S,f),k=ce(C,f,v);return(0,b.jsx)(oe.$i,{timezone:c,seriesData:v||[],title:w?null==L?void 0:L.title:void 0,subtitle:w?null==L?void 0:L.subtitle:void 0,loadingProps:d,colorTheme:null==s?void 0:s.colorTheme,weightColorValue:null==s?void 0:s.weightColorValue,hideLegend:null==s?void 0:s.hideLegend,tooltipOptions:k,resizableContainerEl:u})}var xe=o(134232),ve=o(167660);function be(e){let{collectionContextStore:t,chartConfig:o,timezone:i,resizableContainerEl:a,reducerRequestType:l,groupedChartReducer:s,aggregationChartReducer:c,resultsChartReducer:u}=e;const{reducer:g,reducerKey:p}=(0,n.VK)((()=>"groups"===l?{reducer:s,reducerKey:E.FW}:"results"===l?{reducer:u,reducerKey:E.OS}:void(0,Z.t1)(l)),[s,l,u]),h=(0,n.VK)((()=>(0,K.q)()),[]),m=(0,P.Z)({id:p,reducer:g,collectionContextStore:t,debounceWait:h}),C=(0,n.VK)((()=>{var e;if(void 0!==m)return;const o=t.remoteErrorStore.state;return"msg"!==(null==o?void 0:o.requestSrc)?"RequestTimeoutCancellationError"===(null==o||null===(e=o.errorBody)||void 0===e?void 0:e.name)?"queryCollection_timeout":o?"queryCollection_generic":void 0:void 0}),[t,m]),{loadingProps:y,chartConfigToDisplay:f}=function(e){let{collectionContextStore:t,chartConfig:o,chartReducerResults:i}=e;const a=(0,r.useRef)(void 0),l=(0,r.useRef)(void 0),[s,c]=(0,r.useState)(void 0),d=(0,n.VK)((()=>t.shouldShowSpinnerStore.state),[t],{useDeepEqual:!0}),u=(0,n.VK)((()=>void 0===i),[i]),g=(0,n.VK)((()=>t.isFullScreenStore.state),[t]);(0,r.useEffect)((()=>{a.current=o,(t.isClientModeEnabledStore.state||t.isViewSpecificClientModeEnabledStore.state)&&c(o)}),[o,t]),(0,r.useEffect)((()=>{d||(l.current=a.current)}),[d]),(0,r.useEffect)((()=>{l.current=a.current,c(a.current)}),[null==o?void 0:o.type]);const{nameProperty:p,valueProperty:h}=(0,n.VK)((()=>"results_reducer"===(null==o?void 0:o.dataConfig.type)?{nameProperty:o.dataConfig.nameProperty,valueProperty:o.dataConfig.valueProperty}:{}),[null==o?void 0:o.dataConfig]);return(0,r.useEffect)((()=>{l.current=a.current,c(a.current)}),[p,h]),(0,r.useEffect)((()=>{c(d?l.current:a.current)}),[d]),{loadingProps:{isInitialLoading:u,isThrottledLoading:(0,xe.Z)(d,200,0),initialLoadingSvg:(0,r.useCallback)((()=>(0,b.jsx)(ve.f,{chartType:null==o?void 0:o.type,showCopy:g})),[null==o?void 0:o.type,g])},chartConfigToDisplay:s}}({collectionContextStore:t,chartConfig:o,chartReducerResults:m});if(C)return(0,b.jsx)(F,{chartError:C,collectionSettingsStore:t.settingsStore,chartType:null==o?void 0:o.type});if(f){if(o&&(0,d.u)(o)&&f&&(0,d.u)(f))return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(J,{loadingProps:y,chartConfig:f,chartReducerResults:m,collectionContextStore:t}),(0,b.jsx)(Se,{collectionContextStore:t,chartConfig:o,chartConfigToDisplay:f,chartReducerResults:m,loadingProps:y,timezone:i,resizableContainerEl:a})]});if("donut"===(null==o?void 0:o.type)&&f&&"donut"===f.type)return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(J,{loadingProps:y,chartConfig:f,chartReducerResults:m,collectionContextStore:t}),(0,b.jsx)(we,{collectionContextStore:t,chartConfig:o,chartConfigToDisplay:f,chartReducerResults:m,timezone:i,loadingProps:y,resizableContainerEl:a,aggregationChartReducer:c})]})}return null}function Se(e){let{collectionContextStore:t,chartConfig:o,chartConfigToDisplay:r,chartReducerResults:i,timezone:n,loadingProps:a,resizableContainerEl:l}=e;if(o&&(0,d.u)(o)&&r&&(0,d.u)(r)){if("groups_reducer"===r.dataConfig.type&&(void 0===i||"groups"===(null==i?void 0:i.type)))return(0,b.jsx)(ue,{loadingProps:a,timezone:n,groupedDataConfig:r.dataConfig,chartFormat:o.chartFormat,collectionContextStore:t,groupedChartReducerResults:i,axisType:o.type,resizableContainerEl:l});if("results_reducer"===r.dataConfig.type&&(void 0===i||"results"===(null==i?void 0:i.type)))return(0,b.jsx)(ye,{loadingProps:a,timezone:n,resultsDataConfig:r.dataConfig,chartFormat:o.chartFormat,collectionContextStore:t,resultsChartReducerResults:i,axisType:o.type,resizableContainerEl:l})}return null}function we(e){let{collectionContextStore:t,chartConfig:o,chartConfigToDisplay:r,chartReducerResults:i,timezone:a,loadingProps:l,resizableContainerEl:s,aggregationChartReducer:c}=e;const d=(0,n.VK)((()=>(0,K.q)()),[]),u=(0,P.Z)({id:E.jW,reducer:c,collectionContextStore:t,debounceWait:d});return"groups_reducer"!==r.dataConfig.type||void 0!==i&&"groups"!==(null==i?void 0:i.type)?"results_reducer"!==r.dataConfig.type||void 0!==i&&"results"!==(null==i?void 0:i.type)?null:(0,b.jsx)(fe,{loadingProps:l,timezone:a,resultsDataConfig:r.dataConfig,chartFormat:o.chartFormat,collectionContextStore:t,resultsChartReducerResults:i,aggregationChartReducerResults:u,resizableContainerEl:s}):(0,b.jsx)(Ce,{loadingProps:l,timezone:a,groupedDataConfig:r.dataConfig,chartFormat:o.chartFormat,collectionContextStore:t,groupedChartReducerResults:i,aggregationChartReducerResults:u,resizableContainerEl:s})}const Le=function(e){const{collectionContextStore:t,paddingLeft:o,paddingRight:x,headingWidth:v=0}=e,S=(0,i.O7)(),w=(0,n.VK)((()=>S.device.isMobile),[S.device]),{collectionViewBlockStore:L,collectionSettingsStore:M,collectionViewStore:k}=(0,n.VK)((()=>({collectionViewBlockStore:t.collectionViewBlockStore(),collectionSettingsStore:t.settingsStore,collectionViewStore:t.collectionViewStore()})),[t]),R=(0,n.VK)((()=>t.isFullScreenStore.state),[t]),V=(0,n.VK)((()=>t.isInHomeWidgetStore.state),[t]),T=(0,n.VK)((()=>t.normalizedFormatStore.state.chart_config),[t.normalizedFormatStore]),j=(0,n.VK)((()=>{const e=(0,a.SO)({chartConfig:T,collectionSchema:t.normalizedSchemaStore.state}),o=k?t.chartErrorStore.getState().get(k.id):void 0;return e||o}),[T,t.chartErrorStore,t.normalizedSchemaStore,k]),z=(0,n.VK)((()=>"sidebar"===(0,m.F4)(t,w,v)&&M.state.open),[t,M,v,w]),D=(0,n.VK)((()=>{var e;const t=null===(e=C.default.state.currentUserSettingsStore)||void 0===e?void 0:e.getSettings(),o=null==t?void 0:t.time_zone,r=(0,l.r)();return o||r}),[]),B=(0,r.useRef)(null),E=(0,c.x)({chartConfig:T,chartError:j,collectionContextStore:t}),Z=function(e){let{chartConfig:t,chartError:o,collectionContextStore:r}=e;return(0,n.VK)((()=>{var e,r;if((!o||(0,a.se)(o))&&t&&"placeholder"!==t.type)if("groups_reducer"===(null===(e=t.dataConfig)||void 0===e?void 0:e.type)){const e=(0,h.x7)(t);if(e)return{type:"aggregation",aggregation:e}}else if("results_reducer"===(null===(r=t.dataConfig)||void 0===r?void 0:r.type))return{type:"aggregation",aggregation:{aggregator:"sum",property:t.dataConfig.valueProperty}}}),[t,o],{useDeepEqual:!0})}({chartConfig:T,chartError:j,collectionContextStore:t}),K=function(e){let{chartConfig:t,chartError:o,collectionContextStore:r}=e;const i=(0,n.VK)((()=>{var e;const o=(0,g.RL)({collectionContextStore:r,applySubitemFilter:!1,filterOutHideSubitemsQuickFilter:!1}),i=t&&(0,d.u)(t)?null===(e=t.chartFormat)||void 0===e?void 0:e.axisHideEmptyGroups:void 0,n=t&&(0,d.u)(t)&&"results_reducer"===t.dataConfig.type?t.dataConfig.valueProperty:void 0;if(i&&n){const e={property:n,filter:{operator:"is_not_empty"}},t={property:n,filter:{operator:"number_does_not_equal",value:{type:"exact",value:0}}};o.push(e,t)}return(0,u.kk)(o)}),[r,t]),l=(0,n.VK)((()=>(0,p.Zl)()),[]);return(0,n.VK)((()=>{if((!o||(0,a.se)(o))&&t&&"placeholder"!==t.type&&"results_reducer"===t.dataConfig.type)return{type:"results",limit:l,filter:i}}),[o,t,i,l],{useDeepEqual:!0})}({chartConfig:T,chartError:j,collectionContextStore:t}),P=(0,n.VK)((()=>{var e,o;if(T&&"placeholder"!==T.type&&Z)return"groups_reducer"===(null==T||null===(e=T.dataConfig)||void 0===e?void 0:e.type)&&E?{reducerRequestType:"groups",groupedChartReducer:E,aggregationChartReducer:Z,collectionContextStore:t,chartConfig:T,timezone:D,resizableContainerEl:null}:"results_reducer"===(null==T||null===(o=T.dataConfig)||void 0===o?void 0:o.type)&&K?{reducerRequestType:"results",resultsChartReducer:K,aggregationChartReducer:Z,collectionContextStore:t,chartConfig:T,timezone:D,resizableContainerEl:null}:void 0}),[T,t,E,Z,K,D]);return L?(0,b.jsx)("div",{style:{paddingLeft:o,paddingRight:x,paddingTop:20},children:(0,b.jsx)(f.Z,{store:L,shouldShowHalo:!R&&!V,canSelect:!R,analyticsName:"chart",children:(0,b.jsx)(y.Z,{isVisible:!0,animationStyle:{width:z?`calc(100% - ${s.nJ}px)`:"100%"},render:()=>j&&!(0,a.se)(j)?(0,b.jsx)(F,{chartError:j,collectionSettingsStore:t.settingsStore,chartType:null==T?void 0:T.type}):T&&"placeholder"!==T.type&&P?(0,b.jsx)("div",{ref:B,children:(0,b.jsx)(be,{...P,resizableContainerEl:B.current})}):(0,b.jsx)(F,{chartError:T?"data_model_invalid":"chart_config_not_found",collectionSettingsStore:t.settingsStore,chartType:null==T?void 0:T.type})})})}):null}},10317:(e,t,o)=>{o.r(t),o.d(t,{default:()=>h});var r=o(667294),i=o(724405),n=o(606746),a=o(709291),l=o(653965),s=o(137810),c=o(740040),d=o(740736),u=o(441281),g=o(276209),p=o(785893);const h=function(e){const t=(0,a.useIntl)(),o=(0,i.Fg)(),h=e.seriesData.length>0&&e.seriesData[0].data.length>0,y=r.useMemo((()=>h?e.seriesData:[{name:"No data",data:[]}]),[h,e.seriesData]),f=(0,r.useMemo)((()=>(0,c.zn)(e.colorTheme||"auto",Boolean(e.weightColorValue),o)),[e.colorTheme,e.weightColorValue,o]),x=(0,r.useMemo)((()=>l.TS((0,u.Z)(o),{chart:{type:"pie",events:{render:function(){const r=this,i=r.container;if(i)if(h){if(e.title){var n;const e=r.title.getBBox();null===(n=r.title)||void 0===n||n.attr({y:14+r.plotTop+(r.plotHeight-e.height)/2})}}else(0,d.E)({intl:t,theme:o,chartType:"donut",container:i,hasData:h})}}},time:{timezone:e.timezone},title:{useHTML:!0,floating:!0,text:void 0},series:y,...f,plotOptions:{pie:{size:"240px",innerSize:"85%",showInLegend:!e.hideLegend,color:h?void 0:"transparent",fillColor:h?"transparent":o.tableDividerColor},series:{marker:{enabled:!1},states:{hover:{halo:null}}}},legend:{enabled:!e.hideLegend,labelFormatter:function(){return e.legendLabelFormatter?e.legendLabelFormatter(this.name):this.name}},tooltip:{...e.tooltipOptions},credits:{enabled:!1},responsive:{rules:[{condition:{maxWidth:280},chartOptions:{plotOptions:{pie:{size:void 0}}}},{condition:{maxWidth:150},chartOptions:{plotOptions:{pie:{innerSize:"75%"}}}},{condition:{maxWidth:100},chartOptions:{plotOptions:{pie:{size:"50px"}}}},{condition:{maxWidth:50},chartOptions:{plotOptions:{pie:{size:"30px"}}}}]}})),[o,e,y,f,h,t]),v=(0,i.yK)((e=>({titleStyle:{fontWeight:500,color:e.v2.text.primary,textAlign:"center",maxWidth:160},subtitleStyle:{fontSize:12,color:e.v2.text.secondary,fontWeight:400,lineHeight:"15px",textAlign:"center",maxWidth:160,...s.Z.textOverflowStyle}})),[]),b=r.useCallback((t=>{const o=function(e,t){const o=e?e.length-1:0;let r=m;void 0!==t&&(t>250?r=m-6*o:t>200?r=56-4*o:t>150?r=48-4*o:t>100?r=28-2*o:t>50&&(r=16-1*o));return Math.max(r,C)}(e.title,t),r=t??100,i=r<50?"":n.Z.renderToStaticMarkup((0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{style:{...v.titleStyle,fontSize:o,lineHeight:`${o+13}px`},children:e.title}),e.subtitle&&r>=150?(0,p.jsx)("div",{style:v.subtitleStyle,children:e.subtitle}):null]}));return{title:{useHTML:!0,floating:!0,text:h?i:""}}}),[h,e.subtitle,e.title,v.subtitleStyle,v.titleStyle]);return(0,p.jsx)(g.Z,{loadingProps:e.loadingProps,chartOptions:x,resizableContainerEl:e.resizableContainerEl,responsiveChartOptions:b})},m=64,C=8},167660:(e,t,o)=>{o.d(t,{f:()=>c});o(667294);var r=o(724405),i=o(709291),n=o(497372),a=o(132662),l=o(785893);function s(e){return"line"===e?"line-chart-loading":"donut"===e?"donut-chart-loading":"column-chart-loading"}function c(e){let{chartType:t,showCopy:o}=e;const c=(0,r.yK)((e=>({text:{color:e.accentColors.gray[200],fontSize:14},container:{color:"dark"===e.mode?e.accentColors.gray[500]:e.accentColors.gray[200],display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:n.j9,position:"relative",top:-20}})),[]);return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:s(t),style:c.container,children:[(0,l.jsx)(d,{chartType:t}),o&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.Z,{size:8}),(0,l.jsx)("div",{style:c.text,children:(0,l.jsx)(i.FormattedMessage,{defaultMessage:"Preparing your chart",id:"charts.initialLoading"})})]})]})})}function d(e){let{chartType:t}=e;return"line"===t?(0,l.jsx)(g,{}):"column"===t||"bar"===t?(0,l.jsx)(u,{}):"donut"===t?(0,l.jsx)(p,{}):(0,l.jsx)(u,{})}function u(){return(0,l.jsxs)("svg",{width:"72",height:"72",viewBox:"0 0 72 72",fill:"none",children:[(0,l.jsx)("line",{className:"column-loader-1",x1:"11",y1:"35",x2:"11",y2:"53",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round"}),(0,l.jsx)("line",{className:"column-loader-2",x1:"24",y1:"19",x2:"24",y2:"53",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round"}),(0,l.jsx)("line",{className:"column-loader-3",x1:"63",y1:"25",x2:"63",y2:"53",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round"}),(0,l.jsx)("line",{className:"column-loader-4",x1:"37",y1:"29",x2:"37",y2:"53",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round"}),(0,l.jsx)("line",{className:"column-loader-5",x1:"50",y1:"35",x2:"50",y2:"53",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round"})]})}function g(){return(0,l.jsx)("svg",{width:"72",height:"72",viewBox:"0 0 72 72",fill:"none",children:(0,l.jsx)("path",{d:"M4 54L10.7601 43.0148C11.4087 41.9609 12.8491 41.743 13.7804 42.5579L18.1597 46.3898C19.1109 47.2221 20.5861 46.9743 21.2132 45.8769L25.9913 37.5152C26.8134 36.0765 28.9281 36.2042 29.5711 37.7313L34.0639 48.4018C34.7639 50.0644 37.1339 50.0234 37.7761 48.3376L43.794 32.5408C43.9286 32.1875 44.1605 31.8796 44.463 31.6528L50.6123 27.0408C51.4086 26.4436 52.5228 26.5228 53.2265 27.2265L58.0379 32.0379C59.0032 33.0032 60.6305 32.7391 61.241 31.5181L68 18",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"})})}function p(){return(0,l.jsxs)("svg",{width:"72",height:"72",viewBox:"0 0 72 72",fill:"none",children:[(0,l.jsx)("circle",{className:"outer-loader",cx:"36",cy:"36",r:"24",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"}),(0,l.jsx)("circle",{className:"inner-loader",cx:"36",cy:"36",r:"12",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"})]})}},276209:(e,t,o)=>{o.d(t,{Z:()=>s});var r=o(878840),i=o(775708),n=o.n(i),a=o(667294),l=o(785893);function s(e){let{loadingProps:t,chartOptions:o,resizableContainerEl:i,responsiveChartOptions:s}=e;const[c,d]=a.useState(null),[u,g]=(0,a.useState)({});a.useEffect((()=>{if(!i)return;const e=new ResizeObserver((e=>{const t=null==c?void 0:c.chart;if(!t)return;const o=e[0].contentRect.width;t.setSize(o,void 0,!1),s&&g(s(o))}));return e.observe(i),()=>{e.disconnect()}}),[c,i,s]);const p=(0,a.useMemo)((()=>({...o,...u})),[o,u]);return t.isInitialLoading?t.initialLoadingSvg():(0,l.jsx)("div",{className:t.isThrottledLoading?"notion-shimmer-timeline notion-shimmer-timeline-transition":void 0,children:(0,l.jsx)(n(),{ref:d,highcharts:r,options:p,immutable:!0})})}},441281:(e,t,o)=>{o.d(t,{Z:()=>d});var r=o(878840),i=o(764088),n=o.n(i),a=o(997466),l=o(137810);function s(e){return{maxPointWidth:16,borderRadius:2,pointPadding:.22,groupPadding:.22,borderColor:e.contentBackground,borderWidth:.5}}function c(e){return{style:{fontWeight:"normal",color:e.mediumTextColor,textOutline:"none",fontSize:"12px"},x:-1}}n()(r);const d=function(e){return{chart:{inverted:!1,animation:!1,backgroundColor:"transparent",style:{cursor:"default",fontSize:"12px",fontFamily:l.Z.baseFontFamily.sans}},colors:["#2383E2"],xAxis:{title:{margin:16,style:{color:e.regularTextColor,fontWeight:"600",fontSize:"12px"}},crosshair:{color:(0,a.Fq)(e.accentColors.gray[100],.2)},labels:{distance:8,style:{color:e.mediumTextColor,fontSize:"12px",textOverflow:"ellipsis",overflow:"hidden"}},lineColor:e.chartAxisLineColor,lineWidth:1,gridLineDashStyle:"Dot",gridLineColor:e.chartGridLineColor,gridLineWidth:1.25,dateTimeLabelFormats:{day:"%b %e",week:"%b %e"},tickPixelInterval:100},yAxis:{title:{margin:16,style:{color:e.regularTextColor,fontWeight:"600",fontSize:"12px"}},labels:{distance:8,style:{color:e.mediumTextColor,fontSize:"12px"}},stackLabels:{...c(e)},lineColor:e.chartAxisLineColor,lineWidth:1,tickAmount:5,gridLineDashStyle:"Dot",gridLineColor:e.chartGridLineColor,gridLineWidth:1.25,allowDecimals:!1},plotOptions:{column:{dataLabels:{...c(e)},...s(e)},bar:{dataLabels:{...c(e)},...s(e)},pie:{dataLabels:{enabled:!1},borderRadius:0,borderWidth:1,borderColor:e.contentBackground,point:{events:{legendItemClick:function(){const e=this,t=e.series.points.map((e=>e.visible));t[e.index]=!t[e.index];if(!t.some((e=>e)))return!1}}}},area:{lineWidth:1.25,states:{hover:{lineWidth:1.25}},marker:{states:{hover:{radius:3,lineColor:e.contentBackground}},symbol:"circle",enabled:!1}},series:{animation:!1,borderColor:"transparent",events:{legendItemClick:function(){const e=this,t=e.chart.series.map((e=>e.visible));t[e.index]=!t[e.index];if(!t.some((e=>e)))return!1}}}},legend:{symbolRadius:2,symbolHeight:8,symbolPadding:4,useHTML:!0,itemStyle:{fontSize:"12px",color:e.mediumTextColor,paddingTop:"2px"},navigation:{enabled:!0,activeColor:e.mediumTextColor,inactiveColor:e.chartInactiveLegendNavigationColor,style:{color:e.mediumTextColor}},itemHiddenStyle:{color:e.chartLegendItemHiddenColor},itemHoverStyle:{color:e.darkTextColor},maxHeight:100}}}},492658:(e,t,o)=>{o.d(t,{Z:()=>n});var r=o(749085);class i extends r.default{getInitialState(){return{inputValue:"",focus:!1}}}const n=i},740736:(e,t,o)=>{o.d(t,{E:()=>i});var r=o(233312);function i(e){const{intl:t,theme:o,chartType:i,container:n,hasData:a}=e,l=n.getAttribute("id");if(!l)return;const s=`chart-empty-state-${l.substring(11)}`;const c=document.getElementById(s);if(c){const e=c.parentElement;null==e||e.removeChild(c)}if(a)return;const d=document.createElement("div");d.setAttribute("id",s),d.style.position="absolute",d.style.display="flex",d.style.alignItems="center",d.style.justifyContent="center";if("column"===i){const e=69,t=45;d.style.top="10px",d.style.left=`${e}px`,d.style.width=`calc(100% - ${e+10}px)`,d.style.height=`calc(100% - ${10+t}px)`}else if("bar"===i){const e=40,t=75;d.style.top="10px",d.style.left=`${e}px`,d.style.width=`calc(100% - ${e+10}px)`,d.style.height=`calc(100% - ${10+t}px)`}else"donut"===i&&(d.style.top="0px",d.style.left="0px",d.style.width="100%",d.style.height="100%");n.appendChild(d);const u=document.createElement("div");u.textContent=t.formatMessage(r.M.noData),u.style.color=o.mediumTextColor,u.style.backgroundColor=o.contentBackground,u.style.fontSize="14px",u.style.padding="8px",d.appendChild(u)}},239132:(e,t,o)=>{o.d(t,{c:()=>n});o(667294);var r=o(745238),i=o(785893);const n=(0,r.IU)("eye",{viewBox:"0 0 32 32",svg:(0,i.jsx)("path",{d:"M16.006 25.812c8.863 0 14.994-7.17 14.994-9.406C31 14.16 24.858 7 16.006 7 7.252 7 1 14.16 1 16.406c0 2.236 6.252 9.406 15.006 9.406zm0-3.242a6.194 6.194 0 01-6.197-6.164c-.012-3.452 2.744-6.164 6.197-6.164 3.419 0 6.185 2.711 6.185 6.164 0 3.364-2.766 6.164-6.185 6.164zm0-3.94c1.228 0 2.246-1.007 2.246-2.224 0-1.228-1.018-2.235-2.246-2.235-1.24 0-2.258 1.007-2.258 2.235 0 1.217 1.018 2.224 2.258 2.224z"})})}}]);