"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[66942],{718250:(e,t,s)=>{s.d(t,{K:()=>i,O:()=>r});var o=s(745483);function r(e){o.Z.state.openModals.has(e)||(o.Z.state.openModals.add(e),o.Z.emit())}function i(e){o.Z.state.openModals.has(e)&&(o.Z.state.openModals.delete(e),o.Z.emit())}},785526:(e,t,s)=>{s.d(t,{i:()=>u});var o=s(126263),r=s(165958),i=s(421202),a=s(80444),n=s(319385),l=s(206258),d=s(535057),c=s(454642);async function u(e){const{environment:t,sudoModeStore:s,pageBlockId:u}=e,g=s.state.privatePageStore&&s.state.privatePageStore.id===u;if(t.device.isMobile||g||s.state.loading||s.state.error)return;if(!n.default.checkGate({gateName:"enable_get_private_page_info_endpoint"}))return;const{currentSpaceStore:m}=a.default.state,h=null==m?void 0:m.canAdmin();if(!(u&&h&&m&&(0,d.wP)()))return;s.setState({...s.state,loading:!0});const p=m.id,f=await c.getPrivatePageInfo(t,{id:u});if("failed"===f.type)return void s.setState({...s.state,loading:!1,error:f.error});const x=f.data,v=new o.Z({name:r.Gh});for(const o of x)switch(o.table){case"block":case"collection":case"team":v.setRecord({pointer:{spaceId:p,table:o.table,id:o.value.id},userId:t.currentUser.id},{role:"editor",value:o.value})}const S=new l.G(t,{table:i.iU,id:u},{inMemoryRecordCache:v});S.inMemoryRecordCache.addCacheFallback(t.defaultRecordCache.inMemoryRecordCache),s.setState({...s.state,privatePageStore:S,loading:!1,error:void 0})}},546457:(e,t,s)=>{s.d(t,{_:()=>m});var o=s(667294),r=s(800480),i=s(886628),a=s(724405),n=s(709291),l=s(296994),d=s(434859),c=s(699884),u=s(953336),g=s(785893);function m(e){let{loginModalStore:t,loginStore:s,title:a,description:n,isSignup:d,disableLoginLink:u,redirectURL:m,className:x,onDismiss:v,trustedDomain:S}=e;const M=(0,r.O7)(),j=(0,i.VK)((()=>t.state.open),[t]),b=(0,o.useId)(),y=(0,o.useId)(),w={loginStore:s,title:a,description:n,isSignup:d,redirectURL:m,disableLoginLink:u,titleAriaId:b,descriptionAriaId:y,trustedDomain:S};return(0,g.jsx)(c.c,{ariaLabelledBy:b,ariaDescribedBy:y,isOpen:j,onDismiss:()=>{f({loginModalStore:t,loginStore:s,onDismiss:v})},areaConstraint:{width:{type:"fixed",length:480},height:{type:"unlimited",scroll:"allow"}},deprecatedCompatibilityOverrides:{tabletsUsePhoneDisplayMode:!0},render:()=>(0,g.jsx)(h,{children:(0,g.jsxs)("div",{className:x,children:[!M.device.isMobile&&(0,g.jsx)(p,{loginModalStore:t,loginStore:s,onDismiss:v}),(0,g.jsx)(l.gM,{...w})]})})})}function h(e){let{children:t}=e;return(0,r.O7)().device.isMobile?(0,g.jsx)(u.Z,{type:d.Z.Y,children:t}):t}function p(e){let{loginModalStore:t,loginStore:s,onDismiss:o}=e;const r=(0,a.Fg)();return(0,g.jsx)("div",{style:{fontSize:14,color:r.mediumTextColor,position:"absolute",right:0,marginTop:16,marginRight:16,cursor:"pointer"},onClick:()=>{f({loginModalStore:t,loginStore:s,onDismiss:o})},children:(0,g.jsx)(n.FormattedMessage,{defaultMessage:"Cancel",id:"sidebarSwitcherMultiAccount.addAccountModal.cancelButton.label"})})}function f(e){const{loginModalStore:t,loginStore:s,onDismiss:o}=e;s.reset(),t.setState({open:!1}),o&&o()}},853621:(e,t,s)=>{s.r(t),s.d(t,{default:()=>ht});var o=s(667294),r=s(883355),i=s(313991),a=s(800480),n=s(886628),l=s(724405),d=s(815145),c=s(841892),u=s(842875),g=s(69654),m=s(745238),h=s(785893);const p=(0,m.IU)("googlePlay",{viewBox:"0 0 14 14",svg:(0,h.jsx)("path",{d:"M3.41741,13.7929001 L13.0843,8.42241009 C14.2002,7.80245009 14.2002,6.19755009 13.0843,5.57759009 L3.41741,0.207109087 C2.33284,-0.395426913 1,0.388821087 1,1.62952009 L1,12.3705001 C1,13.6112001 2.33284,14.3954001 3.41741,13.7929001 Z"})});var f=s(460651),x=s(70954),v=s(262397),S=s(937612),M=s(463306),j=s(89101),b=s(109852),y=s(709291),w=s(531701),P=s(137810),k=s(436610),I=s(632441),C=s(696454),F=s(532603),E=s(294273),A=s(497977),_=s(731304),Z=s(275754),T=s(412714),D=s(608055),R=s(29974),B=s(785526),q=s(239865),N=s(139634),V=s(296994),W=s(628020),O=s(843250),L=s(433929),U=s(828125),K=s(798165),z=s(918514),H=s(548779),G=s(674451),Y=s(555081),J=s(710929),X=s(775538),$=s(28578),Q=s(966324),ee=s(825464),te=s(80444),se=s(788632),oe=s(780641),re=s(319385),ie=s(655899),ae=s(633759),ne=s(389403),le=s(596071),de=s(485974),ce=s(453730),ue=s(749085),ge=s(471924);class me extends ue.default{getInitialState(){return{isCreatingSpace:!1,didPerformAction:!1,flowId:ge.Il()}}}const he=me;var pe=s(272014),fe=s(188923),xe=s(8675),ve=s(288280),Se=s(640833),Me=s(164921),je=s(661519),be=s(436488),ye=s(316354),we=s(584076),Pe=s(863296),ke=s(489728),Ie=s(158297),Ce=s(731278),Fe=s(164369),Ee=s(336360),Ae=s(567219),_e=s(942402),Ze=s(986403),Te=s(743116),De=s(546457),Re=s(12337),Be=s(91536),qe=s(454642),Ne=s(823586),Ve=s(833954),We=s(460709),Oe=s(223196),Le=s(61766),Ue=s(535057),Ke=s(301743),ze=s(374194),He=s(478140),Ge=s(550506),Ye=s(953437);const Je={marginBottom:10},Xe={...Je,width:"100%",height:"100%",padding:10,alignItems:"top",borderRadius:0},$e=(0,y.defineMessages)({requestAccessMessagePlaceholder:{defaultMessage:"Message (optional)",id:"requestAccessForm.messageInput.placeholder"},rateLimitError:{defaultMessage:"You have recently requested access to this page.",id:"requestAccessForm.errorMessage.rateLimit"}});function Qe(){return(0,h.jsx)(y.FormattedMessage,{defaultMessage:"Cancel",id:"requestAccessForm.cancelButton.label"})}const et=ue.default.createClass(0,{name:"RequestAttemptStore"}),tt=ue.default.createClass(void 0,{name:"MessageStore"});const st=function(e){let{type:t,block:s,teamId:r,flowId:i}=e;const l=(0,a.O7)(),d=(0,a.MO)(),c=(0,n.qz)(void 0,Le.Z),u=(0,n.qz)(void 0,tt),g=(0,n.qz)(void 0,et),m=(0,o.useCallback)((()=>it(c)),[c]),p=(0,o.useCallback)((()=>(0,h.jsx)(nt,{type:t,block:s,teamId:r,flowId:i,requestAttemptStore:g,messageStore:u,buttonPopupStore:c})),[t,s,r,i,g,u,c]),f=(0,n.VK)((()=>g.state>0),[g]),x=(0,n.VK)((()=>c.state.open),[c]);return"current-actor-to-block"===t?(0,h.jsx)(lt,{block:s,flowId:i}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(Ie.Z,{isLarge:!0,disabled:f,onClick:()=>function(e,t){const{environment:s,flowId:o,type:r}=e;I.zX(s,{button_name:"request-access",flow_id:o,request_access_type:r}),t.setState({open:!0})}({environment:l,flowId:i,type:"current-actor-to-space-via-team"===t?"team":"page"},c),children:f?(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.requestAccessButton.requested",defaultMessage:"Requested access"}):(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.requestAccessButton.label",defaultMessage:"Request access"})}),d?(0,h.jsx)(Ye.ZP,{popupType:Oe.k.SlideUp,open:x,render:p}):(0,h.jsx)(Ge.Z,{open:x,onDismiss:m,render:p})]})};function ot(e){let{result:t}=e;return t&&t.error?(0,h.jsx)("div",{style:{color:w.ZP.redWithAlpha(1),textAlign:"center",width:"100%",marginBottom:16},children:t.error}):null}function rt(e){e.update((e=>e+1))}function it(e){return e.setState({open:!1})}function at(e){let{error:t,result:s,ready:r,requestAttemptStore:i,messageStore:l}=e;const d=(0,y.useIntl)(),c=(0,a.MO)(),u=(0,o.useCallback)((()=>rt(i)),[i]),g=(0,o.useCallback)((e=>function(e,t){t.setState(e.target.value)}(e,l)),[l]),m=(0,n.VK)((()=>Boolean(0===i.state||r&&s&&s.error)),[i,r,s]),p=(0,n.VK)((()=>l.state||""),[l]);return(0,h.jsxs)(h.Fragment,{children:[!c&&(0,h.jsx)("div",{style:{fontSize:16,fontWeight:P.Z.fontWeight.semibold,marginBottom:16},children:(0,h.jsx)(y.FormattedMessage,{defaultMessage:"Request access",id:"requestAccessForm.sendRequestButton.title"})}),(0,h.jsx)(ze.Z,{format:c?ze.B.Transparent:void 0,textarea:!0,value:p,onChange:g,disabled:!m,placeholder:d.formatMessage($e.requestAccessMessagePlaceholder),style:{...c?{...Xe,padding:"16px"}:{...Je,marginBottom:16,padding:"8px 12px",alignItems:"flex-start"}}}),!c&&(0,h.jsx)(Ie.Z,{isLarge:!0,disabled:!m,onClick:u,style:Je,children:(0,h.jsx)(y.FormattedMessage,{defaultMessage:"Send request",id:"requestAccessForm.sendRequestButton.label"})}),(0,h.jsx)(ot,{result:s})]})}function nt(e){let{type:t,block:s,teamId:r,flowId:i,requestAttemptStore:l,messageStore:d,buttonPopupStore:c}=e;const u=(0,a.O7)(),g=(0,a.MO)(),m=(0,y.useIntl)(),p=(0,o.useCallback)(((e,t,s)=>(0,h.jsx)(at,{requestAttemptStore:l,messageStore:d,error:e,result:t,ready:s})),[l,d]),f=(0,o.useCallback)((e=>async function(e,t,s,o,r,i,a,n,l){if(0===e)return;const d=n.state,c="current-actor-to-block"===s?await qe.requestAccess(t,{type:"current-actor-to-block",block:o,message:d}):await qe.requestAccess(t,{type:"current-actor-to-space-via-team",teamId:r,message:d});var u;return"success"!==c.type?"UserRateLimitResponse"===(null===(u=c.body)||void 0===u?void 0:u.name)?{error:i.formatMessage($e.rateLimitError)}:{error:(0,Ve.wf)(i,c)}:("current-actor-to-block"===s?Be.dU(t,{request_access_type:"page",flow_id:a,requestId:c.data.requestId}):Be.dU(t,{request_access_type:"team",flow_id:a}),l.reset(),{value:!0})}(e,u,t,s,r,m,i,d,c)),[u,t,s,r,m,i,d,c]),x=(0,o.useCallback)((()=>rt(l)),[l]),v=(0,o.useCallback)((()=>it(c)),[c]),S=(0,n.VK)((()=>l.state),[l]);return g?(0,h.jsx)(He.Z,{menuType:We.og.Modal,whiteBackground:!0,title:(0,h.jsx)(y.FormattedMessage,{id:"requestAccessForm.title.label",defaultMessage:"Request access"}),left:Qe(),onClickLeft:v,right:(0,h.jsx)(y.FormattedMessage,{id:"requestAccessForm.mobileSend.label",defaultMessage:"Send"}),onClickRight:x,children:(0,h.jsx)(Ke.Z,{debugName:"RequestAccessForm",capture:!0,children:(0,h.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"stretch",alignItems:"stretch",width:"100%",height:"100%"},children:(0,h.jsx)(Ne.Z,{request:S,performRequest:f,render:p})})})}):(0,h.jsx)(Ke.Z,{debugName:"RequestAccessForm",capture:!0,children:(0,h.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-evently",alignItems:"stretch",padding:"20px 28px 24px",width:"340px"},children:[(0,h.jsx)(Ne.Z,{request:S,performRequest:f,render:p}),(0,h.jsx)(Pe.Z,{onClick:v,children:Qe()})]})})}function lt(e){let{block:t,flowId:s}=e;const r=(0,a.O7)(),[i,n]=(0,o.useState)(!1),[l,d]=(0,o.useState)(!1),c=(0,o.useCallback)((async()=>{var e;const o=await qe.requestAccess(r,{type:"current-actor-to-block",block:{id:t.id,spaceId:t.spaceId},attributes:{add_permissions_on_approval:!1,role:(0,Ue.QM)()?"reader":"read_and_write"},message:void 0});"success"===o.type&&o.data.request?(n(!0),Be.dU(r,{request_access_type:"page",previous_access_level:"none",requested_access_level:"read_and_write",flow_id:s,requestId:o.data.requestId})):"failed"===o.type&&"UserRateLimitResponse"===(null===(e=o.body)||void 0===e?void 0:e.name)&&d(!0)}),[t.id,t.spaceId,r,s]);return(0,h.jsx)(Ie.Z,{isLarge:!0,disabled:i||l,onClick:c,children:i?(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.requestAccessButton.edit.Requested",defaultMessage:"Requested access"}):l?(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.requestAccessButton.edit.TryAgain",defaultMessage:"Try again later"}):(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.requestAccessButton.edit.Request",defaultMessage:"Request access"})})}const dt={fontWeight:P.Z.fontWeight.bold},ct={display:"flex",justifyContent:"center",marginBottom:16,marginTop:16,flexWrap:"wrap"},ut={width:14,height:14,marginRight:6,flexShrink:0},gt={maxWidth:300};class mt extends r.Z{constructor(){super(...arguments),this.storeTypes={store:he,sudoModeStore:xe.Z,inviteTargetsStore:ie.ZP,loginModalStore:le.Z,loginStore:de.Z}}UNSAFE_willMount(){fe.default.state.open&&_.E(fe.default.state.presenceStore,this.environment,pe.jx,fe.default.state.targetStore),_.E(te.default.state.presenceStore,this.environment,pe.$g,te.default.state.mainEditorCurrentBlockStore),Q.cancelSidebarInitialRenderLog()}didMount(){if(super.didMount(),F.setInitialRenderCompleted(),this.props.shouldRedirectFromHome&&async function(e){let{environment:t,flowId:s}=e;const o=te.default.state.currentSpaceViewStore;if(!o)return;St("invalid_home_block",s,t);const r=await(0,H.rg)(t,o);r&&Z._c({environment:t,store:r,openInNew:void 0,templateGalleryItem:void 0,projectManagementLaunch:!1,pageVisitSource:d.tY.PersonalHomeErrorRedirect})}({environment:this.environment,flowId:this.stores.store.state.flowId}),this.environment.device.isElectron||this.environment.mobileNative){var e;const t=null===(e=this.props.publicPageData)||void 0===e?void 0:e.requireInterstitial;if(t){const e=t+window.location.hash;T.D({environment:this.environment,url:e}),D.op(this.environment)}}}UNSAFE_willMountOrUpdate(){var e;B.i({environment:this.environment,sudoModeStore:this.stores.sudoModeStore,pageBlockId:null===(e=te.default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.id})}renderComponent(){const{publicPageData:e}=this.props;if(!this.stores.store.state.didPerformAction){if(se.Z.state.online){if("teamsInvite"===this.props.route.name&&vt(this.environment))return(0,h.jsx)(zt,{publicPageData:this.props.publicPageData,route:this.props.route,store:this.stores.store,sudoModeStore:this.stores.sudoModeStore,inviteTargetsStore:this.stores.inviteTargetsStore,loginModalStore:this.stores.loginModalStore,loginStore:this.stores.loginStore,data:e,source:"teamsInvite",canJoinSpace:!0});if(e&&"onboarding"===this.props.route.name)return(0,h.jsx)(zt,{publicPageData:this.props.publicPageData,route:this.props.route,store:this.stores.store,sudoModeStore:this.stores.sudoModeStore,inviteTargetsStore:this.stores.inviteTargetsStore,loginModalStore:this.stores.loginModalStore,loginStore:this.stores.loginStore,data:e,source:"onboarding",canJoinSpace:!1});if(null!=e&&e.spaceName){var t;const{currentUserRootStore:s,mainEditorCurrentBlockStore:o}=te.default.state,{flowId:r}=this.stores.store.state,i=null==o||null===(t=o.getModel())||void 0===t?void 0:t.isNonverifiedContentClassification();if(i&&e.requireInterstitial)return this.render404();if(e.requireInterstitial)return(0,h.jsx)(Rt,{href:e.requireInterstitial+window.location.hash,urlToDisplay:e.requireInterstitial,store:this.stores.store});if(i)return(0,h.jsx)(Vt,{route:this.props.route,store:this.stores.store});if(vt(this.environment)){if(!s||!s.isReady())return;const t=s.getSpaceViewStores();if(!t.every((e=>e.isReady())))return;return t.find((t=>t.getSpaceId()===e.spaceId))&&"page"===this.props.route.name?(0,h.jsx)(Ht,{publicPageData:this.props.publicPageData,route:this.props.route,store:this.stores.store,sudoModeStore:this.stores.sudoModeStore,inviteTargetsStore:this.stores.inviteTargetsStore,loginModalStore:this.stores.loginModalStore,loginStore:this.stores.loginStore,data:e}):e.canJoinSpace?"space"===this.props.route.name?(Tt({publicPageData:e,environment:this.environment,flowId:r,store:this.stores.store,skipClickLogging:!0}),null):(0,h.jsx)(zt,{publicPageData:this.props.publicPageData,route:this.props.route,store:this.stores.store,sudoModeStore:this.stores.sudoModeStore,inviteTargetsStore:this.stores.inviteTargetsStore,loginModalStore:this.stores.loginModalStore,loginStore:this.stores.loginStore,data:e,source:"workspace",canJoinSpace:!0}):(0,h.jsx)(zt,{publicPageData:this.props.publicPageData,route:this.props.route,store:this.stores.store,sudoModeStore:this.stores.sudoModeStore,inviteTargetsStore:this.stores.inviteTargetsStore,loginModalStore:this.stores.loginModalStore,loginStore:this.stores.loginStore,data:e,source:"workspace",canJoinSpace:!1})}return e.requireLogin,(0,h.jsx)(qt,{store:this.stores.store,data:e})}return"initiateExternalAuthenticationFromDesktop"===this.props.route.name?(0,h.jsx)(Wt,{route:this.props.route,store:this.stores.store,sudoModeStore:this.stores.sudoModeStore,loginModalStore:this.stores.loginModalStore,loginStore:this.stores.loginStore}):this.render404()}return(0,h.jsx)(Dt,{store:this.stores.store,sudoModeStore:this.stores.sudoModeStore,loginModalStore:this.stores.loginModalStore,loginStore:this.stores.loginStore})}}render404(){const{device:e}=this.environment,t=vt(this.environment);return St("404",this.stores.store.state.flowId,this.environment),(0,h.jsxs)("div",{children:[(0,h.jsx)(bt,{}),(0,h.jsxs)("div",{style:{...jt(this.environment),marginTop:e.isMobile?0:"12vh",justifyContent:"start"},children:[(0,h.jsx)(Re.Z,{type:Re.i.NotFound}),(0,h.jsx)("div",{style:yt(this.environment,this.theme),children:(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.contentDoesNotExist.title",defaultMessage:"This content does not exist"})}),!t&&(0,h.jsx)(It,{}),t&&(0,h.jsx)(Nt,{route:this.props.route,store:this.stores.store,color:"blue"}),(0,h.jsx)(ft,{}),(0,h.jsx)(Fe.Z,{isSmall:!0,style:{textAlign:"center"},children:(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.contentDoesNotExist.message",defaultMessage:"Having trouble? <helplink>Message support</helplink>",values:{helplink:e=>(0,h.jsx)(_e.Z,{onClick:()=>Pt(this.environment),children:e})}})})]})]})}}mt.displayName="PageError";const ht=mt;function pt(){return(0,x.C)({width:50,height:50,marginBottom:16})}function ft(){return(0,h.jsx)(je.Z,{size:48,innerStyle:{maxWidth:280}})}function xt(e){let{inviteeEmail:t}=e;return t?(0,h.jsx)(y.FormattedMessage,{id:"signupPage.subtitle.invitationVersion",defaultMessage:"Please check {invitee_email} for your temporary login code.",values:{invitee_email:(0,h.jsx)("b",{children:t})}}):null}function vt(e){return!!e.currentUser.id}function St(e,t,s){I.AM(s,{type:e,flow_id:t})}function Mt(e){const{device:t}=e;return{width:"100vw",paddingLeft:t.isMobile?16:30,paddingRight:t.isMobile?16:30,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}}function jt(e){const{device:t}=e;return{width:"100vw",paddingLeft:t.isMobile?16:30,paddingRight:t.isMobile?16:30,display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",paddingTop:t.isTablet?"20vh":"12vh"}}function bt(){const e=(0,a.O7)(),{isMobile:t}=e.device;return(0,h.jsxs)("div",{style:{display:"flex",alignItems:"center",maxWidth:1300,height:80,paddingLeft:20,paddingRight:20},children:[(0,x.C)({width:t?28:30,height:t?28:30,marginRight:10,flexShrink:0}),(0,h.jsx)("div",{style:{fontWeight:P.Z.fontWeight.medium,fontSize:16},children:"Notion"})]})}function yt(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{device:o}=e;return{fontSize:o.isMobile?18:20,marginBottom:10,textAlign:"center",color:t.regularTextColor,fontWeight:500,maxWidth:350,...s}}function wt(e){let{isElectron:t,publicPageData:s,showInvitationVersion:o,inviterName:r,greetingStyle:n,iconBoxInitialStyle:d,trustedDomain:c,isImproveLoggedOutLandingExpEnabled:u}=e;const g=(0,l.Fg)(),m=(0,a.O7)(),p=(0,y.useIntl)(),f=!!c;return(0,h.jsxs)(h.Fragment,{children:[t&&(0,h.jsx)(Ee.Z,{title:p.formatMessage({defaultMessage:"Log in",id:"errorPage.loggedOutWorkspace.title"})}),o?(0,h.jsx)("div",{style:{fontSize:28,fontWeight:700,maxWidth:358,letterSpacing:.364,lineHeight:1.2,textAlign:"center",fontFamily:P.Z.getCompositeFontFamily(i.SP).sans},children:r?(0,h.jsx)("div",{children:(0,h.jsx)(y.FormattedMessage,{id:"signupPage.title.showInvitationVersion",defaultMessage:"Verify your email to accept {inviter_name}'s invite",values:{inviter_name:r}})}):(0,h.jsx)("div",{children:(0,h.jsx)(y.FormattedMessage,{id:"signupPage.title.showInvitationVersion.noInviterName",defaultMessage:"Verify your email to accept the invite"})})}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(Re.Z,{type:Re.i.NoAccess,publicPageData:s,iconBoxInitialStyle:d}),(0,h.jsx)("div",{style:yt(m,g,n),children:f?(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.domainSharingPage.message",defaultMessage:"Sign in with a <b>@{trustedDomainEmail}</b> email address to view this shared page",values:{b:e=>(0,h.jsx)("b",{children:e}),trustedDomainEmail:c}}):u?(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.improveLoggedOutLandingExp.message",defaultMessage:"Sign in to see this page in {workspaceName}",values:{workspaceName:s.spaceName}}):(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.loggedOut.message",defaultMessage:"Welcome to {workspaceName} on Notion.",values:{workspaceName:(0,h.jsx)("span",{style:dt,children:s.spaceName})}})})]})]})}function Pt(e){N.j({environment:e,from:"page_error"})}function kt(){const e=(0,a.O7)();return(0,h.jsx)("div",{style:ct,children:(0,h.jsx)(Fe.Z,{isSmall:!0,isSecondaryColor:!0,isMultiline:!1,style:{textAlign:"center",marginBottom:18,maxWidth:440},children:(0,h.jsxs)("div",{style:{display:"flex"},children:[(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.somethingWrong.label",defaultMessage:"Something wrong?"}),(0,h.jsx)(ye.Z,{onClick:()=>Pt(e),style:{textDecoration:"underline",paddingLeft:"4px"},children:(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.reportAProblem.label",defaultMessage:"Report a problem"})})]})})})}function It(e){let{buttonStyles:t={}}=e;const s=(0,a.O7)();return(0,h.jsxs)("div",{style:ct,children:[(0,h.jsx)(ye.Z,{href:j.AR.product,external:!0,children:(0,h.jsxs)(ke.Z,{isGray:!0,...t,children:[(0,f.h)({width:16,height:16,marginRight:8}),(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.whatIsNotionButton.label",defaultMessage:"What is Notion?"})]})}),(0,h.jsx)(ke.Z,{onClick:()=>Pt(s),...t,style:{marginLeft:4,...t.style},isGray:!0,children:(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.sendMessageButton.label",defaultMessage:"Message support"})}),(0,h.jsx)(ye.Z,{href:j._j.termsAndPrivacy,external:!0,style:{marginLeft:4},children:(0,h.jsx)(ke.Z,{isGray:!0,...t,children:(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.termsAndPrivacyButton.label",defaultMessage:"Terms"})})})]})}function Ct(e){let{sudoModeStore:t}=e;const s=(0,l.Fg)(),o=(0,n.VK)((()=>t.shouldUserHaveAccessToPrivatePageBlock()),[t]),r=(0,n.VK)((()=>t.state),[t]);return o&&r.privatePageStore&&!r.changePermissionsEnabled?(0,h.jsxs)("div",{style:{background:s.cardBackground,borderRadius:4,padding:18,margin:24,width:400},children:[(0,h.jsx)(Fe.Z,{isMultiline:!0,style:{textAlign:"center"},children:(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.workspaceOwner.canChangePermissionsMessage",defaultMessage:"As a <b>workspace owner</b>, you can change the permissions of this page to add yourself or others. Any changes will appear in the audit log.",values:{b:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,h.jsx)("b",{children:t})}}})}),(0,h.jsxs)(Pe.Z,{style:{fontWeight:P.Z.fontWeight.medium,justifyContent:"center",margin:"18px auto 12px"},onClick:()=>t.setState({...t.state,changePermissionsEnabled:!0}),children:[(0,v.I)({width:16,height:16,marginRight:6}),(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.workspaceOwner.canChangePermissionsMessageButton",defaultMessage:"Change permissions"})]})]}):null}function Ft(e){let{sudoModeStore:t,inviteTargetsStore:s}=e;const o=(0,l.Fg)(),r=(0,n.VK)((()=>t.shouldUserHaveAccessToPrivatePageBlock()),[t]),i=(0,n.VK)((()=>t.state),[t]);return r&&i.privatePageStore&&i.changePermissionsEnabled?(0,h.jsx)("div",{style:{textAlign:"left",borderRadius:4,background:o.modalBackground,position:"relative",boxShadow:o.mediumBoxShadow,width:470,margin:"24px auto"},children:(0,h.jsx)(V._e,{store:i.privatePageStore,sudoModeStore:t,inviteTargetsStore:s,location:"no_access_page",onClose:()=>$.ZP.reset()})}):null}function Et(e){let{sudoModeStore:t,loginModalStore:s,loginStore:r,trustedDomain:i,hideChangePermissions:d}=e;const c=(0,l.Fg)(),u=(0,a.O7)(),g=(0,n.VK)((()=>(0,W.B7)(u)),[u]),m=ce.transactionQueue.hasTasks(),p=(0,n.VK)((()=>te.default.state.mainEditorCurrentBlockStore),[]),f=(0,n.VK)((()=>t.shouldUserHaveAccessToPrivatePageBlock()),[t]),x=(0,n.VK)((()=>null==g?void 0:g.getEmail()),[g]);let v;return(0,o.useEffect)((()=>{p&&C._S({environment:u,store:p})}),[u,p]),v=m?(0,h.jsx)(Fe.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:4},children:(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.sendMessageForHelp.message",defaultMessage:"<sendmessagelink>Message support</sendmessagelink> for help.",values:{sendmessagelink:e=>(0,h.jsx)(_e.Z,{onClick:()=>Pt(u),children:e})}})}):(0,h.jsx)(Fe.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:4},children:(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.wrongAccountRequestAccess.message",defaultMessage:"You might need to <loginlink>log in</loginlink> with a different email.",values:{loginlink:e=>U.k(u)?(0,h.jsxs)(_e.Z,{onClick:()=>{s.setState({open:!0})},children:[e,(0,h.jsx)(De._,{loginModalStore:s,loginStore:r,title:(0,h.jsx)(y.FormattedMessage,{id:"sidebarSwitcherMultiAccount.addAccount.title",defaultMessage:"Add an account"}),description:(0,h.jsx)(y.FormattedMessage,{id:"sidebarSwitcherMultiAccount.addAccount.description",defaultMessage:"Use an existing account, or sign up with a new email. Your current account will remain logged in."}),className:O.zYS,trustedDomain:i})]}):(0,h.jsx)(_e.Z,{href:j._j.logout,onClick:()=>A.logout(u),children:e})}})}),(0,h.jsxs)("div",{style:{textAlign:"center"},children:[f&&!Boolean(d)?(0,h.jsx)(Ct,{sudoModeStore:t}):(0,h.jsx)(ft,{}),(0,h.jsx)(Fe.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:4},children:(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.wrongLoggedInUserError.message",defaultMessage:"You're currently logged in as {currentlyLoggedInUser}",values:{currentlyLoggedInUser:(0,h.jsx)("span",{style:{color:c.regularTextColor},children:x})}})}),v]})}function At(e){const t=e.state.privatePageStore;if(!e.shouldUserHaveAccessToPrivatePageBlock()||!t)return;const s=t.getModel();if(!s)return;const o=s.getRenderTitle({getRecordModel:t.getRecordModel,userTimeZone:(0,u.r)(),intl:L.default.getIntl()}),r=s.getRenderIcon({getRecordModel:t.getRecordModel});return(0,h.jsxs)(h.Fragment,{children:[r&&(0,h.jsx)(Ce.Z,{isEmptyPage:!0,disabled:!0,icon:r,size:24,style:{display:"inline-block",marginRight:4}}),o&&(0,h.jsx)("span",{children:o})]})}function _t(e){let{sudoModeStore:t}=e;const s=(0,l.Fg)(),o=(0,a.O7)(),r=(0,n.VK)((()=>At(t)),[t]),i=(0,n.VK)((()=>{var e;return null===(e=te.default.state.currentSpaceStore)||void 0===e?void 0:e.getName()}),[]);return(0,h.jsxs)("div",{style:{background:s.cardBackground,borderRadius:4,padding:18,margin:"24px auto 0",width:400},children:[(0,h.jsx)("div",{style:{...yt(o,s),fontWeight:P.Z.fontWeight.semibold,marginBottom:6},children:r?(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.changePermissions.titleWithPageName",defaultMessage:"Change permissions for {pageTitle}",values:{pageTitle:r}}):(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.changePermissions.title",defaultMessage:"Change permissions for this page"})}),(0,h.jsx)(Fe.Z,{isMultiline:!0,style:{textAlign:"center"},children:i?(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.workspaceOwner.changePermissions.descriptionWithSpaceName",defaultMessage:"As a workspace owner for <b>{spaceName}</b>, you can change the permissions of this page.",values:{b:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,h.jsx)("b",{children:t})},spaceName:i}}):(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.workspaceOwner.changePermissions.description",defaultMessage:"As an owner of this workspace, you can change the permissions of this page.",values:{b:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,h.jsx)("b",{children:t})}}})})]})}function Zt(e){let{data:t,sudoModeStore:s}=e;const o=(0,l.Fg)(),r=(0,a.O7)(),i=(0,n.VK)((()=>At(s)),[s]),d=t.canRequestAccess;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{children:pt()}),(0,h.jsx)("div",{style:{...yt(r,o),fontWeight:P.Z.fontWeight.semibold,marginBottom:6},children:d?i?(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.canRequestAccess.titleWithPageName",defaultMessage:"No access to {pageTitle}",values:{pageTitle:i}}):(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.canRequestAccess.title",defaultMessage:"No access to this page"}):(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.noAccess.title",defaultMessage:"Page not found"})}),(0,h.jsx)("div",{style:{...yt(r,o),color:o.mediumTextColor,fontWeight:P.Z.fontWeight.regular,lineHeight:1.4},children:d?(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.canRequestAccess.message",defaultMessage:"You can access this page if someone approves your request."}):(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.cannotRequestAccess.message",defaultMessage:"Either this page doesn't exist or you don't have permission to access it."})})]})}function Tt(e){const{publicPageData:t,environment:s,flowId:o,store:r,skipClickLogging:i}=e;r.setState({...r.state,didPerformAction:!0}),i||I.zX(s,{button_name:"join-workspace",flow_id:o});const{currentUserRootStore:a,currentUserSettingsStore:n}=te.default.state;if(a&&n&&t.spaceId){const e=t.spaceId;R.j({environment:s,userRootStore:a,spaceId:e,navigate:!0,analyticsFrom:"page_error",userSettingsStore:n})}}function Dt(e){let{store:t,sudoModeStore:s,loginModalStore:r,loginStore:i}=e;const n=(0,l.Fg)(),d=(0,a.O7)();return(0,o.useEffect)((()=>{St("offline",t.state.flowId,d),k.DC(d,{type:"page_error"})}),[t,d]),(0,h.jsx)("div",{style:Mt(d),children:(0,h.jsxs)("div",{style:yt(d,n),children:[(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.offlineError.message",defaultMessage:"Oops, you seem to be offline. Please go online to view this page."}),(0,h.jsx)(Et,{sudoModeStore:s,loginModalStore:r,loginStore:i})]})})}function Rt(e){let{href:t,urlToDisplay:s,store:r}=e;const i=(0,l.Fg)(),n=(0,a.O7)();return(0,o.useEffect)((()=>St("incorrect_domain_interstitial_block",r.state.flowId,n)),[r,n]),(0,h.jsxs)("div",{style:{position:"relative",height:"100%",width:"100%"},children:[(0,h.jsxs)("div",{style:{...Mt(n),height:"100%"},children:[(0,h.jsx)("div",{style:{...yt(n,i),maxWidth:"240px"},children:(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.publicDomainInterstitial.title",defaultMessage:"Continue to external site by following the link below"})}),(0,h.jsx)(Fe.Z,{isSmall:!1,isSecondaryColor:!0,isMultiline:!0,style:{textAlign:"center",marginBottom:18,maxWidth:440},children:(0,h.jsx)(ye.Z,{href:t,external:!1,style:{textDecoration:"underline",color:w.ZP.blue,overflowWrap:"anywhere"},children:s})})]}),(0,h.jsx)("div",{style:{position:"fixed",width:"100%",bottom:0},children:(0,h.jsx)(kt,{})})]})}function Bt(e){const t=(0,l.yK)((t=>{const s=e.themeOverride??t;return{backgroundImg:{position:"absolute",top:230,WebkitMask:"linear-gradient(to bottom, rgba(0,0,0,1) 50%, rgba(0,0,0,0) 100%)"},wrapper:{boxShadow:s.mediumBoxShadow,zIndex:1,border:`1px ${s.stroke.regular}`,background:s.modalBackground,borderRadius:20,display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",padding:40},loginDisclaimer:{color:s.text.secondary,maxWidth:400}}}),[e.themeOverride]);return e.isEnabled?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("img",{src:c.Z.images.onboarding.skeletonPageSvg,style:t.backgroundImg}),(0,h.jsx)("div",{style:t.wrapper,children:e.children}),(0,h.jsx)(Te.E,{style:t.loginDisclaimer,themeOverride:e.themeOverride})]}):(0,h.jsx)(h.Fragment,{children:e.children})}function qt(e){var t;let{data:s,store:r}=e;const i=(0,l.Fg)(),d=(0,a.O7)(),{device:c}=d,{inviteeEmail:u,inviterName:m,showInvitationVersion:f}=(0,n.VK)((()=>{const{inviteeEmail:e,inviterName:t}=ne.Z.state;return{inviteeEmail:e,inviterName:t,showInvitationVersion:ae.Z.isTemporaryPasscode()&&e===ae.Z.state.email}}),[]),x=(0,w.gh)({theme:"light"}),v=null!==(t=s.trustedDomains)&&void 0!==t&&t.length?s.trustedDomains[0]:void 0;(0,o.useEffect)((()=>{St("team_login",r.state.flowId,d),(0,b.Ko)(window.location.href)}),[r,d]);const S=(0,n.VK)((()=>!(c.isMobile||c.isElectron||f)&&"on"===re.default.getEligibleGroup({experimentId:"improve_logged_out_landing_exp_desktop",defaultGroup:"control"})),[c,f]),M=(0,n.VK)((()=>({...jt(d),...S&&{paddingTop:"5vh"}})),[d,S]);return(0,h.jsx)(be.Z,{capture:!0,render:e=>(0,h.jsx)(Ae.Z,{analyticsName:"team_login",hideNavItems:!0,hideNotificationBanner:!0,hideFooter:!0,children:(0,h.jsxs)("div",{style:M,...e,children:[(0,h.jsxs)(Bt,{isEnabled:S,themeOverride:x,children:[(0,h.jsx)(wt,{isElectron:d.device.isElectron,publicPageData:s,showInvitationVersion:f,inviterName:m,greetingStyle:{color:x.regularTextColor,...S&&{fontWeight:P.Z.fontWeight.semibold,fontSize:22,wordBreak:"break-word",maxWidth:300}},iconBoxInitialStyle:{background:x.regularDividerColor,color:x.mediumTextColor},trustedDomain:v,isImproveLoggedOutLandingExpEnabled:S}),u&&f?(0,h.jsx)("div",{style:{fontSize:"18px",fontWeight:400,width:"100%",maxWidth:358,textAlign:"center",color:"#535353",lineHeight:"145.34%",opacity:.78,marginBottom:24},children:(0,h.jsx)(xt,{inviteeEmail:u})}):null,(0,h.jsx)(Ze.ZP,{emailLabelType:"email",style:gt,emailPasscodePlaceholderType:f?"paste_code":"enter_code",emailInputAutoFocus:!0,from:"pageError",loginStore:ae.Z,showInvitationVersion:f,isSignup:f,themeOverride:x,trustedDomain:v,disableDisclaimer:S})]}),c.isMobile&&!c.isMobileNative&&!f&&(0,h.jsxs)(o.Fragment,{children:[(0,h.jsx)("div",{style:{height:1,width:"100vw",background:i.regularDividerColor,marginTop:36,marginBottom:36}}),(0,h.jsxs)(Ie.Z,{style:{width:280},isLarge:!0,onClick:()=>{D.RX({url:window.location.href,environment:d})},children:[c.isIOS?(0,g.o)(ut):p(ut),(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.openInMobileAppButton.label",defaultMessage:"Open in mobile app"})]}),(0,h.jsx)(we.Z,{href:c.isIOS?j._j.appStore:j._j.playStore,external:!0,innerStyle:{marginTop:16},children:(0,h.jsx)(Fe.Z,{isSmall:!0,style:{textDecoration:"underline",fontSize:14,color:x.mediumTextColor},children:(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.downloadMobileAppButton.label",defaultMessage:"Get mobile app"})})})]}),(0,h.jsx)(It,{buttonStyles:{iconStyle:{fill:x.mediumTextColor},style:{color:x.mediumTextColor},pressedStyle:{background:x.buttonPressedBackground}}})]})})})}function Nt(e){let{color:t,canJoinSpaceWithData:s,route:o,store:r}=e;const i=(0,l.Fg)(),c=(0,a.O7)(),u=(0,n.VK)((()=>{const{currentUserRootStore:e}=te.default.state;return e&&0===e.getSpaceViewPointers().length}),[]),{isCreatingSpace:g,flowId:m}=(0,n.VK)((()=>{const{isCreatingSpace:e,flowId:t}=r.state;return{isCreatingSpace:e,flowId:t}}),[r]),p=(0,n.VK)((()=>{const{currentUserStore:e}=te.default.state;return!(null!=e&&e.getOnboardingCompleted())}),[]),f=e=>"blue"===t?(0,h.jsx)(Ie.Z,{...e}):(0,h.jsx)(Pe.Z,{backgroundColor:i.whiteButtonBackground,...e,style:{fontWeight:P.Z.fontWeight.medium,height:"auto",...e.style}});return s?(0,h.jsx)(f,{isLarge:!0,onClick:()=>Tt({publicPageData:s,environment:c,flowId:m,store:r}),children:(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.joinSpaceButton.label",defaultMessage:"Join the space"})}):"onboarding"===o.name||p?(0,h.jsx)(f,{isLarge:!0,onClick:()=>function(e,t){I.zX(e,{button_name:"back-to-onboarding",flow_id:t}),E.vq();const s=X.default.state;s.isOnboarding?J.n0(s)?Y.I1(e,{type:"new-user",disableRedirectUrl:!0}):J.y7(s)?Y.I1(e,{type:"create-or-join",disableRedirectUrl:!0}):(X.default.reset(),D.c4({environment:e,url:j._j.root})):(X.default.reset(),D.c4({environment:e,url:j._j.root}))}(c,m),children:(0,h.jsx)(y.FormattedMessage,{defaultMessage:"Back to onboarding",id:"fullPageError.returnToOnboardingButton.label"})}):u||g?(0,h.jsx)(f,{isLarge:!0,onClick:()=>async function(e,t,s){I.zX(e,{button_name:"create-account",flow_id:t});const{currentUserRootStore:o,currentUserStore:r}=te.default.state;o&&r&&(s.setState({...s.state,isCreatingSpace:!0}),await Y.xN(e),s.setState({...s.state,isCreatingSpace:!1}))}(c,m,r),disabled:g,children:(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.createOrJoinWorkspaceButton.label",defaultMessage:"Create or join a workspace"})}):(0,h.jsx)(f,{isLarge:!0,onClick:()=>function(e,t){if(I.zX(e,{button_name:"back-to-my-content",flow_id:t}),z.NW(e))return void D.op(e);const{currentUserRootStore:s,currentUserSettingsStore:o,currentSpaceViewStore:r}=te.default.state;s&&o?r?R.y3({environment:e,spaceViewStore:r,userRootStore:s,userSettingsStore:o,pageVisitSource:d.tY.PageError,navigationType:"switchingToOrLoadingSpace"}):R.L5({environment:e,userRootStore:s,userSettingsStore:o,pageVisitSource:d.tY.PageError}):D.c4({environment:e,url:j._j.root,redirect:!0})}(c,m),children:(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.backToMyContentButton.label",defaultMessage:"Back to my content"})})}function Vt(e){let{route:t,store:s}=e;const r=(0,l.Fg)(),i=(0,a.O7)(),n=vt(i);return(0,o.useEffect)((()=>{St("content_classification_block",s.state.flowId,i)}),[i,s]),(0,h.jsxs)("div",{style:Mt(i),children:[(0,h.jsx)(Re.Z,{type:Re.i.Unsafe}),(0,h.jsx)("div",{style:yt(i,r),children:(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.unsafePageError.title",defaultMessage:"This page has been flagged as unsafe"})}),(0,h.jsx)(Fe.Z,{isSmall:!1,isSecondaryColor:!0,isMultiline:!0,style:{textAlign:"center",marginBottom:18,maxWidth:440},children:(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.unsafePageError.message",defaultMessage:"This page may contain spam, phishing, illegal, or inappropriate content. If you received this link from an unknown source, we suggest you to close this tab. <proceedanywaylink>Proceed anyway</proceedanywaylink>",values:{proceedanywaylink:e=>(0,h.jsx)(_e.Z,{onClick:()=>function(e){const{mainEditorCurrentBlockStore:t}=te.default.state;t&&(oe.Z.bypassPage(t.id),I.ux(e))}(i),children:e})}})}),n&&(0,h.jsx)(Nt,{route:t,store:s,color:"blue"}),!n&&(0,h.jsx)(It,{})]})}function Wt(e){let{route:t,store:s,sudoModeStore:r,loginModalStore:i,loginStore:d}=e;const c=(0,l.Fg)(),u=(0,a.O7)(),{device:g}=u,m=vt(u);(0,o.useEffect)((()=>{St("oauth_no_access",s.state.flowId,u)}),[u,s]);const p=(0,n.VK)((()=>jt(u)),[u]);return(0,h.jsxs)("div",{children:[(0,h.jsx)(bt,{}),(0,h.jsxs)("div",{style:{...p,marginTop:g.isMobile?0:"12vh",justifyContent:"start"},children:[(0,h.jsx)(Re.Z,{type:Re.i.NotFound}),(0,h.jsx)("div",{style:yt(u,c),children:(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.cannotRequestAccess.message",defaultMessage:"Either this page doesn't exist or you don't have permission to access it."})}),m&&(0,h.jsx)(Nt,{route:t,store:s,color:"blue"}),(0,h.jsx)(Et,{sudoModeStore:r,loginModalStore:i,loginStore:d})]})]})}function Ot(e){let{publicPageData:t,route:s,store:o}=e;const r=(0,n.VK)((()=>o.state.flowId),[o]),{spaceId:i,pageId:a}={...t};return t&&t.canRequestAccess&&i&&a?(0,h.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,h.jsx)("div",{children:(0,h.jsx)(st,{type:"current-actor-to-block",block:{id:a,spaceId:i},flowId:r})}),(0,h.jsx)("div",{style:{width:10,height:10}}),(0,h.jsx)(Nt,{route:s,store:o,color:"white"})]}):(0,h.jsx)(Nt,{route:s,store:o,color:"blue"})}function Lt(e){let{route:t,store:s}=e;const o=(0,l.Fg)(),r=(0,a.O7)(),i=(0,n.VK)((()=>s.state.flowId),[s]);if("teamsInvite"!==t.name)return(0,h.jsx)(Nt,{route:t,store:s,color:"blue"});const{teamId:d}=t;return d?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{style:{...yt(r,o),color:o.mediumTextColor,fontWeight:P.Z.fontWeight.regular,lineHeight:1.4},children:(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.canRequestWorkspaceAccess.message",defaultMessage:"You can access this workspace if someone approves your request."})}),(0,h.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,h.jsx)("div",{children:(0,h.jsx)(st,{type:"current-actor-to-space-via-team",teamId:d,flowId:i})}),(0,h.jsx)("div",{style:{width:10,height:10}}),(0,h.jsx)(Nt,{route:t,store:s,color:"white"})]})]}):(0,h.jsx)(Nt,{route:t,store:s,color:"blue"})}function Ut(e){let{route:t,store:s,sudoModeStore:o,loginModalStore:r,loginStore:i,trustedDomain:n}=e;const d=(0,l.Fg)(),c=(0,a.O7)();return(0,h.jsxs)("div",{style:Mt(c),children:[(0,h.jsx)("div",{children:pt()}),(0,h.jsx)("div",{style:{...yt(c,d),fontWeight:P.Z.fontWeight.semibold,marginBottom:6},children:(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.domainSharingPage.title",defaultMessage:"No access to this shared page"})}),(0,h.jsx)("div",{style:{...yt(c,d),color:d.mediumTextColor,fontWeight:P.Z.fontWeight.regular,lineHeight:1.4,marginBottom:20},children:(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.domainSharingPage.messageV2",defaultMessage:"You can access this page by signing in to an account with a <b>@{trustedDomain}</b> email address.",values:{trustedDomain:n,b:e=>(0,h.jsx)("b",{children:e})}})}),(0,h.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,h.jsx)("div",{children:(0,h.jsxs)(Ie.Z,{isLarge:!0,onClick:()=>r.setState({open:!0}),children:[(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.domainSharingPage.login.",defaultMessage:"Log in"}),(0,h.jsx)(De._,{loginModalStore:r,loginStore:i,title:(0,h.jsx)(y.FormattedMessage,{id:"sidebarSwitcherMultiAccount.addAccount.title",defaultMessage:"Add an account"}),description:(0,h.jsx)(y.FormattedMessage,{id:"sidebarSwitcherMultiAccount.addAccount.descriptionV2",defaultMessage:"Log in/sign up with a @makenotion.com email address. Your current account will remain logged in."}),className:"notion-space-settings",trustedDomain:n})]})}),(0,h.jsx)("div",{style:{width:10,height:10}}),(0,h.jsx)(Nt,{route:t,store:s,color:"white"})]}),(0,h.jsx)(Et,{sudoModeStore:o,loginModalStore:r,loginStore:i,trustedDomain:n})]})}function Kt(e){let{data:t,publicPageData:s,route:o,store:r,sudoModeStore:i,inviteTargetsStore:l,loginModalStore:d,loginStore:c}=e;const u=(0,a.O7)(),g=(0,n.VK)((()=>i.shouldUserHaveAccessToPrivatePageBlock&&i.shouldUserHaveAccessToPrivatePageBlock()&&i.state.changePermissionsEnabled),[i]),m=(0,n.VK)((()=>i.shouldUserHaveAccessToPrivatePageBlock()),[i]);return(0,n.VK)((()=>{if(!m||!re.default.checkGate({gateName:"cdrr_deleted_from_trash_view"}))return!1;const e=i.state.privatePageStore;return e&&Boolean((0,M.GR)((0,K.fJ)(e)))}),[i,m])?(0,h.jsxs)("div",{style:Mt(u),children:[(0,h.jsx)(Gt,{sudoModeStore:i,route:o,store:r}),(0,h.jsx)(Et,{sudoModeStore:i,loginModalStore:d,loginStore:c,hideChangePermissions:!0})]}):(0,h.jsxs)("div",{style:Mt(u),children:[g?(0,h.jsx)(_t,{sudoModeStore:i}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(Zt,{sudoModeStore:i,data:t}),(0,h.jsx)(Ot,{publicPageData:s,route:o,store:r})]}),m?(0,h.jsx)(Ft,{sudoModeStore:i,inviteTargetsStore:l}):null,(0,h.jsx)(Et,{sudoModeStore:i,loginModalStore:d,loginStore:c})]})}function zt(e){const t=(0,l.Fg)(),s=(0,a.O7)(),r=(0,y.useIntl)(),{data:i,source:n,canJoinSpace:d,publicPageData:c,route:u,store:g,sudoModeStore:m,inviteTargetsStore:p,loginModalStore:f,loginStore:x}=e;if((0,o.useEffect)((()=>{"onboarding"===n?St("onboarding_error",g.state.flowId,s):"teamsInvite"===n?St("team_invite_no_access",g.state.flowId,s):i&&St("team_no_access",g.state.flowId,s)}),[n,i,g,s]),i){var v;const e=null!==(v=i.trustedDomains)&&void 0!==v&&v.length?i.trustedDomains[0]:void 0;return e?(0,h.jsx)(Ut,{route:u,store:g,sudoModeStore:m,loginModalStore:f,loginStore:x,trustedDomain:e}):(0,h.jsx)(Kt,{publicPageData:c,route:u,store:g,sudoModeStore:m,inviteTargetsStore:p,loginModalStore:f,loginStore:x,data:i})}return(0,h.jsxs)("div",{style:Mt(s),children:[s.device.isElectron&&(0,h.jsx)(Ee.Z,{title:r.formatMessage({defaultMessage:"No access",id:"errorPage.workspaceNoAccess.title"})}),(0,h.jsx)("div",{children:pt()}),(0,h.jsx)("div",{style:yt(s,t),children:d?(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.notInWorkspace.message",defaultMessage:"You are not in this workspace."}):(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.accessNotAllowed.message",defaultMessage:"You do not have access to this page."})}),"teamsInvite"===n?(0,h.jsx)(Lt,{route:u,store:g}):(0,h.jsx)(Nt,{route:u,store:g,color:"blue",canJoinSpaceWithData:d?i:void 0}),(0,h.jsx)(Et,{sudoModeStore:m,loginModalStore:f,loginStore:x})]})}function Ht(e){let{data:t,publicPageData:s,route:r,store:i,sudoModeStore:n,inviteTargetsStore:l,loginModalStore:d,loginStore:c}=e;const u=(0,a.O7)();return(0,o.useEffect)((()=>{St("team_page_no_access",i.state.flowId,u)}),[u,i]),(0,h.jsx)(Kt,{publicPageData:s,route:r,store:i,sudoModeStore:n,inviteTargetsStore:l,loginModalStore:d,loginStore:c,data:t})}function Gt(e){let{sudoModeStore:t,route:s,store:r}=e;const i=(0,a.O7)(),d=(0,n.VK)((()=>t.state.privatePageStore),[t]),c=(0,n.VK)((()=>t.shouldUserHaveAccessToPrivatePageBlock()),[t]),u=(0,n.VK)((()=>null==d?void 0:d.getSpaceStore()),[d]),g=(0,n.VK)((()=>ve.subscriptionDataStoreInstance.state),[]),m=(0,G.$)({spaceStore:u,subscriptionData:g}),p=(0,o.useCallback)((()=>{d&&q.f6({environment:i,blockStore:d})}),[i,d]),f=function(e){const{device:t}=e;return(0,l.yK)((e=>({buttonContainer:{display:"flex",flexDirection:"row",marginBottom:18},container:{display:"flex",alignItems:"center",flexDirection:"column"},heading:{fontSize:t.isMobile?18:22,textAlign:"center",color:e.regularTextColor,marginBottom:32},subheading:{fontSize:t.isMobile?18:17,marginBottom:20,textAlign:"center",color:e.mediumTextColor,fontWeight:P.Z.fontWeight.regular,lineHeight:1.4},restoreButton:{marginRight:10},permanentlyDeleteButton:{display:"flex",color:e.text.secondary,fontSize:14},trashIcon:{width:14,marginRight:4}})),[t])}(i),x=(0,o.useCallback)((e=>(0,h.jsx)(Ie.Z,{...e,isLarge:!0,style:f.restoreButton,children:(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.deletedFromTrashPage.restoreButton",defaultMessage:"Restore page"})})),[f]),v=(0,n.VK)((()=>At(t)),[t]);return d&&c?(0,h.jsxs)("div",{style:f.container,children:[(0,h.jsx)("div",{children:pt()}),(0,h.jsx)("div",{style:f.heading,children:(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.deletedFromTrashPage.titleWithPageName",defaultMessage:"<bold>{pageTitle}</bold> has been deleted from the Trash",values:{pageTitle:v,bold:e=>(0,h.jsx)("b",{children:e})}})}),(0,h.jsx)("div",{style:f.subheading,children:(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.deletedFromTrashPage.message",defaultMessage:"As a workspace owner, you can restore this page. <br>This will be recorded in the audit log.</br>",values:{br:e=>(0,h.jsx)("div",{children:e})}})}),(0,h.jsxs)("div",{style:f.buttonContainer,children:[(0,h.jsx)(Se.L,{renderPopupOrigin:x,blockStore:d,environment:i,placementToOrigin:ee.u.Bottom,includeNonRestoreActions:!1,getValidDeletedPermissions:m}),(0,h.jsx)(Nt,{route:s,store:r,color:"white"})]}),(0,h.jsxs)(Me.Z,{style:f.permanentlyDeleteButton,onClick:p,children:[(0,S.y)(f.trashIcon),(0,h.jsx)(y.FormattedMessage,{id:"fullPageError.deletedFromTrashPage.permanentlyDeleteButton",defaultMessage:"Permanently delete"})]})]}):null}},327340:(e,t,s)=>{s.d(t,{y:()=>n});var o=s(653965),r=s(401898),i=s(847882);function a(e){let t=0,s=Number.MAX_SAFE_INTEGER;for(const r of e){if(!r)continue;const e=(0,i.r)(r),a=(0,o.uZ)(e.max,0,Number.MAX_SAFE_INTEGER),n=(0,o.uZ)(e.min,0,a);t=Math.max(t,n),s=Math.min(s,a)}const a=function(e){let t;for(const s of e){const e=null==s?void 0:s.scroll;switch(e){case"disallow":return"disallow";case"allow":t="allow";break;case void 0:break;default:(0,r.t1)(e)}}return t}(e);return{type:"range",min:(0,o.uZ)(t,0,s),max:s,scroll:a}}function n(e){const t=e.filter(Boolean);return{width:a(t.map((e=>null==e?void 0:e.width))),height:a(t.map((e=>null==e?void 0:e.height)))}}},582787:(e,t,s)=>{s.d(t,{Z:()=>c});var o=s(667294),r=s(886628),i=s(433422),a=s(145953),n=s(210228),l=s(503932),d=s(80444);function c(e){let{unpersistedInMemoryRecordCache:t}=e;const s=(0,r.VK)((()=>{var e;return null===(e=d.default.state.currentUserStore)||void 0===e?void 0:e.userId}),[]);return{createAndCommit:(0,o.useCallback)((e=>{let{perform:o}=e;const r=new l.Y({deadlockTimeoutMs:n.DEADLOCK_WARNING_TIMEOUT_MS}),d=o(r),c=a.Ak.create();r.stores.forEach((e=>{const t=e.getRecordModel(e.pointer);t&&c.addModel(t)})),(0,i.FS)({operations:r.operations,recordMap:c,updateOnly:!1});for(const i of c){const{model:e,pointer:o}=i;t.setModelAndRole({pointer:o,userId:s},e,"editor")}return t.emitAll(),{performResult:d,serverCommitResult:Promise.resolve()}}),[t,s])}}},745483:(e,t,s)=>{s.d(t,{Z:()=>n});var o=s(749085),r=s(292595);class i extends o.default{getInitialState(){return{openModals:new Set}}}const a=new i,n=a;(0,r.exposeDebugValue)("GlobalModalStore",a)},361254:(e,t,s)=>{s.d(t,{Z:()=>i});var o=s(749085);class r extends o.default{getInitialState(){return{open:!1,openAnimationCompleted:!0,closeAnimationCompleted:!0}}}const i=r},596071:(e,t,s)=>{s.d(t,{Z:()=>i});var o=s(749085);class r extends o.default{getInitialState(){return{open:!1}}}const i=r},70954:(e,t,s)=>{s.d(t,{C:()=>i});s(667294);var o=s(745238),r=s(785893);const i=(0,o.IU)("notionLogoStroked",{viewBox:"0 0 41 42",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:"M4.253 2.903h0-.01c-1.02.09-1.806.481-2.322 1.142-.5.642-.671 1.441-.671 2.21v23.228c0 1.267.47 2.316 1.416 3.577h0l.006.008 4.99 6.477h0l.005.005c.465.593.963 1.017 1.617 1.256.63.23 1.33.26 2.138.221h.01l24.652-1.49h.008c1.137-.08 2.038-.396 2.632-1.071.588-.668.746-1.543.746-2.431V9.904c0-.584-.133-1.05-.508-1.486-.27-.311-.669-.602-1.113-.925a54.305 54.305 0 01-.176-.13l-.007-.004-.005-.004-6.772-4.761c-.838-.609-1.516-1.017-2.365-1.21-.824-.187-1.75-.156-3.047-.044L4.253 2.903z",fill:"#fff",stroke:"#fff",strokeWidth:"1.5"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.257 3.158L5.176 4.637c-1.62.14-2.184 1.197-2.184 2.464v21.971c0 .987.352 1.83 1.198 2.959l4.72 6.126c.776.987 1.48 1.198 2.96 1.127l23.32-1.408c1.973-.14 2.537-1.057 2.537-2.606V10.552c0-.801-.316-1.032-1.25-1.714l-.16-.117-6.41-4.507c-1.55-1.126-2.184-1.268-4.65-1.056zM12.4 10.146c-1.904.129-2.337.158-3.418-.72l-2.75-2.183c-.28-.283-.14-.635.565-.705L26.102 5.13c1.62-.141 2.466.423 3.1.916l3.311 2.394c.141.07.493.492.07.492L12.645 10.13l-.245.016zM10.179 35.06V14.074c0-.916.281-1.338 1.126-1.41l22.898-1.337c.777-.07 1.128.423 1.128 1.338v20.844c0 .916-.14 1.691-1.41 1.761l-21.91 1.268c-1.269.07-1.832-.352-1.832-1.48zm21.63-19.86c.141.635 0 1.268-.635 1.34l-1.056.21v15.492c-.916.493-1.761.775-2.466.775-1.128 0-1.41-.352-2.255-1.408l-6.905-10.845v10.493l2.185.493s0 1.267-1.763 1.267l-4.86.282c-.142-.282 0-.986.492-1.127l1.269-.351V17.947l-1.761-.142c-.141-.634.21-1.549 1.197-1.62l5.214-.351 7.187 10.986V17.1l-1.832-.21c-.14-.776.422-1.339 1.127-1.409l4.863-.283z",fill:"#222"})]})})}}]);