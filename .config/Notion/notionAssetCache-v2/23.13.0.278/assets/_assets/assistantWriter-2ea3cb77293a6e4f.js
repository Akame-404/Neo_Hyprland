"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[85584,48721],{911969:(e,t,n)=>{n.d(t,{K:()=>s,y:()=>i});var o=n(730459);function s(e,t){const{from:n}=t;o.K4(e,"show_tooltip",{from:n,time:Date.now()})}function i(e,t){const{from:n}=t;o.K4(e,"dismiss_tooltip",{from:n,time:Date.now()})}},718250:(e,t,n)=>{n.d(t,{K:()=>i,O:()=>s});var o=n(745483);function s(e){o.Z.state.openModals.has(e)||(o.Z.state.openModals.add(e),o.Z.emit())}function i(e){o.Z.state.openModals.has(e)&&(o.Z.state.openModals.delete(e),o.Z.emit())}},522974:(e,t,n)=>{n.d(t,{VZ:()=>f,vn:()=>u,Y7:()=>m,LH:()=>g});var o=n(531701);const s="theme";var i=n(401898),a=n(30021),r=n(304926),l=n(247839);const c=12;function d(e,t){const{device:n,ThemeStore:i}=e,{mode:a,usingSystemTheme:d}=t;if(window.notionTheme)return;const u={mode:a};i.setState(u),e.mobileNative&&e.mobileNative.setTheme(a,d),l.setTheme(function(e,t){const n=(0,o.gh)({theme:e});return{mode:e,usingSystemTheme:t,colors:{white:o.ZP.white,blue:o.ZP.blue},borderRadius:4,textColor:n.regularTextColor,popoverBackgroundColor:n.popoverBackground,popoverBoxShadow:n.mediumBoxShadow,inputBoxShadow:n.inputBoxShadow,inputBackgroundColor:n.inputBackground,dividerColor:n.darkDividerColor,shadowOpacity:n.shadowOpacity}}(a,d)),localStorage.setItem(s,JSON.stringify(u)),function(e,t){if(0===e.nativeScrollbarWidth)return;const n=document.getElementById("scroll-properties");n&&(n.innerHTML=`\n\t\t* {\n\t\t\tscrollbar-width: ${c}px;\n\t\t\tscrollbar-color: ${p.scrollbarThumb[t]}  ${p.scrollbarTrack[t]};\n\t\t}\n\t\t::-webkit-scrollbar {\n\t\t\twidth: ${c}px;\n\t\t\theight: ${c}px;\n\t\t}\n\t\t::-webkit-scrollbar {\n\t\t\tbackground: transparent;\n\t\t}\n\t\t::-webkit-scrollbar-track:hover {\n\t\t\tbackground: ${p.scrollbarTrack[t]};\n\t\t}\n\t\t::-webkit-scrollbar-thumb {\n\t\t\tbackground: ${p.scrollbarThumb[t]};\n\t\t\tcursor: pointer;\n\t\t}\n\t\t::-webkit-scrollbar-thumb:hover {\n\t\t\tbackground: ${p.scrollbarThumbHover[t]};\n\t\t}\n\t\t::-webkit-scrollbar-button {\n\t\t\tdisplay: none;\n\t\t}\n\t`,r.Z.setState(c))}(n,a),"dark"===a?document.body.classList.add("dark"):document.body.classList.remove("dark")}function u(e){return e.device.prefersDarkInterface?"dark":"light"}const p={scrollbarTrack:{light:"rgba(0, 0, 0, 0)",dark:"rgba(0, 0, 0, 0)"},scrollbarThumb:{light:"#D3D1CB",dark:"rgba(255, 255, 255, 0.2)"},scrollbarThumbHover:{light:"#AEACA6",dark:"rgba(255, 255, 255, 0.3)"}};function m(e){a.Z.setState(e)}function g(e){const t=f(e);switch(t){case"dark":case"light":d(e,{mode:t,usingSystemTheme:!1});break;case"system":!async function(e){const{mobileNative:t}=e;let n="light";n=t&&t.api.getTheme?await t.api.getTheme():u(e),d(e,{mode:n,usingSystemTheme:!0})}(e);break;default:(0,i.t1)(t)}}function f(e){const t=a.Z.state||"system";return"dark"===(n=t)||"light"===n||"system"===n?n:"system";var n}},416091:(e,t,n)=>{n.d(t,{ND:()=>Z,RD:()=>V,gc:()=>N,gl:()=>B,u7:()=>P});var o=n(667294),s=n(336769),i=n(800480),a=n(886628),r=n(541432),l=n(44317),c=n(709291),d=n(401898),u=n(911969),p=n(210228),m=n(237181),g=n(481415),f=(n(95477),n(319124)),h=n(268056),v=n(489086),y=n(828685),x=n(80444),S=n(521273),b=n(896026),C=n(206258),k=n(924666),w=n(244458),A=n(453365),M=n(489626),T=n(785893);const I=1,_=1,j=(0,c.defineMessages)({spaceForAiHeader:{id:"AiOnboardingTooltips.spaceForAi.header",defaultMessage:"Press ‘space’ for AI"},spaceForAiContent:{id:"AiOnboardingTooltips.spaceForAi.content",defaultMessage:"On a new line or page, press ‘space’ on your keyboard for AI to generate or edit the page. Try it now!"},askAiAnythingHeader:{id:"AiOnboardingTooltips.askAiAnything.header",defaultMessage:"Ask AI anything"},askAiAnythingContent:{id:"AiOnboardingTooltips.askAiAnything.content",defaultMessage:"Just tell AI what to do — the more details, the better. You can also start from an example in the menu."},refineAiResponseHeader:{id:"AiOnboardingTooltips.refineAiResponse.header",defaultMessage:"Tell AI what to do next"},refineAiResponseContent:{id:"AiOnboardingTooltips.refineAiResponse.content",defaultMessage:"How was it? Give AI further instructions to improve what it wrote, or hit ‘Done’ when finished."},showAssistantLocationHeader:{id:"AiOnboardingTooltips.showAssistantLocation.answersToYourQuestionHeader",defaultMessage:"Ask AI when searching"},showAssistantLocationContent:{id:"AiOnboardingTooltips.showAssistantLocation.askQuestionBody",defaultMessage:"AI can find pages and synthesize a quick, concise answer for you. Try it now."},showAssistantOriginElementLocationHeader:{id:"AiOnboardingTooltips.ShowAssistantOriginElementLocationTooltip.header",defaultMessage:"Start by asking a question"},showAssistantOriginElementLocationContent:{id:"AiOnboardingTooltips.ShowAssistantOriginElementLocationTooltip.content",defaultMessage:"Notion AI will find pages and compose a concise answer for you. Try it now."}});function P(){const e=(0,i.O7)(),t=function(){const e=(0,i.O7)(),t=(0,a.VK)((()=>{var e;return null===(e=x.default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),n=(0,a.VK)((()=>{const t=x.default.state.mainEditorCurrentBlockStore;return t&&b.Z.getMode(e,t)}),[e]);return(0,a.VK)((()=>{if(e.device.isMobile)return;const{currentUserSettingsStore:o,inAppCalloutStore:s}=x.default.state;if(!s.getCalloutVisibility("ai_onboarding_tooltip").canShow)return;if(S.Z.showAssistantOnboardingAssets()){const n=null==o?void 0:o.getSettings();if(!n)return;if((0,d.$K)(n.last_used_ai_writer_at))return;if("tooltip"!==n.ai_assistant_onboarding_phase)return;if((0,A.$_)(e,t)){if(!(0,d.$K)(n.ai_sales_assisted_extra_notification_seen_at)||(0,l.O5)(n.ai_sales_assisted_extra_notification_seen_at)<_)return}else if((0,d.$K)(n.ai_assistant_onboarding_phase_last_set_at)&&(0,l.O5)(n.ai_assistant_onboarding_phase_last_set_at)<I)return}else{const e=null==o?void 0:o.getSettings();if(!e)return;const t=16770636e5;if(e.signup_time&&e.signup_time>t)return}if("space_for_ai"!==(0,M.sy)())return;if(!(0,f.GD)(n))return;const i=k.default.state;if("editing"===i.mode){const e=(0,h.QY)(i.multiSelection);if(e&&(0,v.wd)(e.selection)){const t=e.store,n=y.E.findEditableWithStore(t);if(n){const e="block"===t.pointer.table?C.G.createChildStore(t,t.pointer):void 0,o=e&&e.getType(),s=Boolean(o&&(0,r.hD)(o)),i=t.getValue();if(s&&!i)return n}}}}),[e,n,t])}();return t?(0,T.jsx)(g.U,{origin:()=>t.getNode(),placementToOrigin:"bottom",header:(0,T.jsx)(c.FormattedMessage,{...j.spaceForAiHeader}),content:(0,T.jsx)(c.FormattedMessage,{...j.spaceForAiContent}),onCloseClick:()=>(0,M.fz)(e)}):null}function V(e){const{originRef:t,openState:n}=e,o=(0,i.O7)(),s=(0,a.VK)((()=>(0,M.sy)()),[]);if(o.device.isMobile)return null;return"ask_ai_anything"===s&&"initialPrompt"===n.stage?(0,T.jsx)(g.U,{origin:t,placementToOrigin:"top",header:(0,T.jsx)(c.FormattedMessage,{...j.askAiAnythingHeader}),content:(0,T.jsx)(c.FormattedMessage,{...j.askAiAnythingContent}),onCloseClick:()=>(0,M.fz)(o)}):null}function B(e){const{originRef:t,openState:n,isInputEmpty:o}=e,s=(0,i.O7)(),r=(0,a.VK)((()=>(0,M.sy)()),[]);if(s.device.isMobile)return null;const l="refine_ai_response"===r&&"results"===n.stage&&!n.loading&&"cursor"===n.context.type&&o;return(0,T.jsx)(g.U,{origin:l?t:void 0,placementToOrigin:"right",pointerOffset:-4,pointerLength:25,header:(0,T.jsx)(c.FormattedMessage,{...j.refineAiResponseHeader}),content:(0,T.jsx)(c.FormattedMessage,{...j.refineAiResponseContent}),onCloseClick:()=>(0,M.fz)(s)})}function Z(e){const{origin:t}=e,n=(0,i.O7)();(0,o.useEffect)((()=>{u.K(n,{from:"qna_button"})}),[n]);const s=(0,o.useCallback)((()=>{const{currentUserSettingsStore:e}=x.default.state;e&&(u.y(n,{from:"qna_button"}),(0,w.setQnaOnboardingPhase)(n,{phase:"complete",transactionUserAction:"AiQnaIntroModal.debug.clickTooltipComplete",userSettingsStore:e}))}),[n]);return(0,T.jsx)(g.U,{style:{width:250},pointerLength:25,pointerPosition:"94%",origin:t,placementToOrigin:"top",header:(0,T.jsx)(c.FormattedMessage,{...j.showAssistantOriginElementLocationHeader}),content:(0,T.jsx)(c.FormattedMessage,{...j.showAssistantOriginElementLocationContent}),onCloseClick:s})}function N(e){const{origin:t}=e,n=(0,i.O7)();(0,o.useEffect)((()=>{u.K(n,{from:"qna_search"})}),[n]);const s=(0,o.useCallback)((()=>{const{currentUserSettingsStore:e}=x.default.state;e&&(u.y(n,{from:"qna_search"}),(0,w.setQnaOnboardingPhase)(n,{phase:"complete",transactionUserAction:"AiQnaIntroModal.debug.clickTooltipComplete",userSettingsStore:e}))}),[n]);return(0,T.jsx)(g.U,{style:{width:250},pointerLength:25,pointerPosition:"5%",origin:t,placementToOrigin:"bottom",header:(0,T.jsx)(c.FormattedMessage,{...j.showAssistantLocationHeader}),content:(0,T.jsx)(c.FormattedMessage,{...j.showAssistantLocationContent}),onCloseClick:s})}(0,s.exposeDebugEnvironmentValue)("resetAIOnboarding",(e=>()=>{const{currentUserSettingsStore:t}=x.default.state;t&&p.createAndCommit({userAction:"AiIntroModal.debugging.resetAIOnboarding",environment:e,perform:e=>{m.d2({userSettingsStore:t,transaction:e,data:{ai_onboarding_phase:"space_for_ai"}})},userId:t.id})}))},760754:(e,t,n)=>{n.r(t),n.d(t,{AssistantWriterPopup:()=>Je,assistantWriterActions:()=>o});var o=n(313679),s=n(733993),i=n(237156),a=n(667294),r=n(701302),l=n(800480),c=n(886628),d=n(724405),u=n(76233),p=n(709291),m=n(940470),g=n(756863),f=n(137231),h=n(898104),v=n(210228),y=n(244458),x=n(489626),S=n(416091),b=n(492022),C=n(484681),k=n(83982),w=n(860114),A=n(274360),M=n(473957),T=n(167133),I=n(748019),_=n(203386),j=n(478140),P=n(510102),V=n(843250),B=n(768657),Z=n(460709),N=n(318245),O=n(80444),L=n(521273),E=n(990827),K=n(316772),R=n(229798),F=n(19541),W=n(681886),D=(n(252262),n(324506),n(433463)),H=n(421202),$=n(653965),U=n(401898),z=n(206258);var q=n(561017),G=n(883644),J=n(212534),Y=n(798180),Q=n(785893);function X(e){const{loadingState:t,store:n,sessionId:o}=e,s=(0,l.O7)(),{isMobile:i}=(0,l.Fy)(),r=(0,c.VK)((()=>n.getValue()),[n]),p=(0,a.useMemo)((()=>!r||0===(0,u.VrM)(r)),[r]),m=(0,d.yK)((()=>({wrap:{flexGrow:1,minHeight:36,paddingLeft:8,paddingRight:8,marginTop:3,marginBottom:3},rightGutter:{marginTop:i?"0px":"4px",marginBottom:i?"0px":"4px",display:"flex",alignItems:"center",paddingRight:8,paddingLeft:12,gap:4,cursor:"pointer"}})),[i]),g=(0,c.VK)((()=>Y.default.getSessionContext(o)),[o]),f=(0,c.VK)((()=>null==g||!g.temporaryClientSteps.some((e=>"groupedEditCard"===e.type))),[g]),h=(0,a.useCallback)((e=>{(0,J.ZP)({event:e,context:J.Af.ButtonMouseDown,callback:()=>{g&&(0,A.bR)({environment:s,store:n,sessionContext:g})}})}),[s,n,g]);return(0,Q.jsxs)("div",{style:{display:"flex",flex:1},children:[(0,Q.jsx)(G.q,{isMultiline:!1}),(0,Q.jsx)("div",{style:m.wrap,children:(0,Q.jsx)(q.O,{loadingState:t,handleShowSearchResults:!0})}),f&&(0,Q.jsx)("div",{style:m.rightGutter,onClick:h,children:(0,Q.jsx)(A.JO,{storeIsEmpty:p,handleClickEnter:()=>null,handleClickStop:h,mode:{type:"inferencing"}})})]})}n(867635);var ee=n(388421),te=n(763594),ne=n(784969),oe=n(351594),se=n(117826),ie=n(574003),ae=n(56348),re=n(567973),le=n(953336),ce=n(157254),de=n(319124),ue=n(434859),pe=n(62967),me=n(2405),ge=n(144500),fe=n(718942);function he(e){const{sections:t,context:n}=e,o=(0,d.Fg)(),s=a.useMemo((()=>t.flatMap((e=>e.actions.map((e=>function(e){const{theme:t,action:n}=e,o=(0,pe.N_)(n.key);let s,i;if(o&&(0,U.qg)(fe.dS,o)){const e=fe.dS[o];s=e.icon;const n=(0,ge.skillSectionTypeGivenSkillCategory)(e.category);n&&(i=(0,ge.getSkillSectionColor)(n,t).color)}return{...n,icon:s,color:i}}({theme:o,action:e}))))).filter((e=>!e.validators||e.validators.every((e=>e(n)))))),[n,o,t]);return(0,Q.jsx)(le.Z,{type:ue.Z.X,style:{display:"flex",gap:8,padding:8,marginBottom:-8},children:s.map((e=>(0,Q.jsx)(me.Z,{variant:"tinted",title:e.displayName,icon:t=>{var n;return null===(n=e.icon)||void 0===n?void 0:n.call(e,{...t,...e.color&&{fill:e.color}})},onClick:()=>e.action({...n,lazyDependencies:{markdownLinkifyIt:void 0,tinyMceMicrosoftWordPasteFilter:void 0}})},e.key)))})}function ve(e){const t=(0,p.useIntl)(),n=(0,l.Fy)(),o=(0,c.VK)((()=>O.default.state.currentSpaceStore),[]),s=(0,c.VK)((()=>(0,E.Js)()),[]),i=(0,c.VK)((()=>(0,de.Gw)()),[]),r=(0,c.VK)((()=>{if(!s)return;const e=s.temporaryClientSteps.findLast((e=>"assistantChat"===e.type));return e&&!(0,ce.S)(e)?e:void 0}),[s],{useDeepEqual:!0}),u=(0,c.VK)((()=>s&&s.selectedSkill&&0===s.clientSteps.length&&s.selectedSkill.clientSkill.assistantMessage),[s]),m=(0,c.VK)((()=>null==s?void 0:s.sessionId),[s]),g=(0,c.VK)((()=>(0,ae.em)()),[]),f=(0,c.VK)((()=>K.default.state),[]),h=(0,c.VK)((()=>te.Z.state),[]),v=(0,c.VK)((()=>{if(!s||"assistantCompletionPopup"===f.type&&f.loading)return;const e=s.previewingStepObservations.some(ee.zZ),n=t.formatMessage({id:"AssistantWriterPopupRenderer.error",defaultMessage:"I’m sorry, I’m having trouble completing this request. Please click “try again” or type a new command."});return e?n:null}),[f,t,s]),y=(0,c.qz)(void 0,re.d),x=(0,d.yK)((e=>({messageWrap:{fontSize:n.isMobile?15:14,borderRadius:12,fontWeight:500,margin:"8px 12px 0 12px",...n.isMobile&&{maxHeight:200}},error:{fontSize:14,color:e.errorText,padding:8}})),[n]),S=(0,a.useRef)(null);if(!o)return null;const b=(0,Q.jsxs)(Q.Fragment,{children:[g&&(0,Q.jsx)(oe.G,{}),i&&s&&(0,Q.jsx)(se.Z,{sessionContext:s}),u&&(0,Q.jsx)("div",{style:x.messageWrap,children:t.formatMessage(u)}),r&&(0,Q.jsx)("div",{ref:S,children:(0,Q.jsx)(le.Z,{style:x.messageWrap,type:ue.Z.Y,children:(0,Q.jsx)(ne.m,{clientStep:r,parentStore:o,isLatestStep:!0,searchResultsSteps:[],citationHoverStore:y,disableWrap:!0,wrapperRef:S,sessionId:m})})}),h&&v&&(0,Q.jsx)("div",{style:x.error,children:v}),(0,Q.jsx)(w.v7,{displayAsChatStep:!1,sessionId:m}),n.isMobile&&e.mobileActionArgs&&(0,Q.jsx)(he,{...e.mobileActionArgs})]});return(0,Q.jsx)(ie.p,{origin:b})}n(21703);var ye=n(687205),xe=n(465993),Se=n(241154),be=n(930579);const Ce=(0,n(745238).IU)("aiMinimizeCorner",{viewBox:"0 0 16 16",svg:(0,Q.jsx)("path",{d:"M2.1416 14.4492C0.665039 14.4492 -0.100586 13.6904 -0.100586 12.2344V3.9082C-0.100586 2.44531 0.665039 1.69336 2.1416 1.69336H13.8516C15.3281 1.69336 16.0938 2.45215 16.0938 3.9082V12.2344C16.0938 13.6904 15.3281 14.4492 13.8516 14.4492H2.1416ZM2.22363 13.1094H13.7695C14.3984 13.1094 14.7539 12.7812 14.7539 12.1182V4.02441C14.7539 3.36133 14.3984 3.02637 13.7695 3.02637H2.22363C1.58789 3.02637 1.23926 3.36133 1.23926 4.02441V12.1182C1.23926 12.7812 1.58789 13.1094 2.22363 13.1094ZM6.55078 4.61914C6.87207 4.61914 7.08398 4.8584 7.08398 5.20703V8.21484C7.08398 8.65918 6.83789 8.85742 6.43457 8.85742H3.40625C3.05762 8.85742 2.83203 8.64551 2.83203 8.32422C2.83203 7.99609 3.06445 7.79102 3.41309 7.79102H4.47266L5.38867 7.89355L4.39746 6.98438L2.43555 5.02246C2.32617 4.91309 2.25781 4.7627 2.25781 4.6123C2.25781 4.27051 2.49023 4.04492 2.81836 4.04492C2.99609 4.04492 3.13965 4.11328 3.25586 4.22949L5.21094 6.17773L6.11328 7.16211L6.01074 6.19141V5.2002C6.01074 4.84473 6.22266 4.61914 6.55078 4.61914Z"})});var ke=n(188607),we=n(213148),Ae=n(701230),Me=n(83065),Te=n(698519),Ie=n(355863),_e=n(336154),je=n(646564),Pe=n(888202),Ve=n(724199),Be=n(183583),Ze=n(672495),Ne=n(68204),Oe=n(119037),Le=n(730459),Ee=n(27724),Ke=n(924666),Re=n(428956);const Fe=(0,p.defineMessages)({moveToCorner:{id:"getAssistantActionSections.moveToCorner",defaultMessage:"Chat in corner"}}),We="This string should never show up in analytics";function De(e){const{assistantSurface:t,environment:n,theme:s,filter:i,mockTextStore:a,state:r,from:l,context:c,intl:d,completionResultInfo:u,assistantConfigurationStore:p,upsellType:m,shouldShowLimitedQnaUpsell:g}=e,h=(0,w.fq)(null==p?void 0:p.state.sessionId);let y;"initialPrompt"===r.stage?y=h?He({environment:n,resultHandlers:u,upsellType:m,showMoveToCorner:!1}):function(e){const{assistantSurface:t,intl:n,from:s,mockTextStore:i,theme:a}=e;let r=(0,ge.getAllClientSkills)({currentPageRecordPointer:void 0});const{mainEditorCurrentBlockStore:l}=O.default.state;let c;if(l){const e={type:"assistant",surface:t.type,pageStore:l,selectionState:Ee.default.state,textSelectionState:Ke.default.state,isMobile:t.isMobile,assistantTutorialDismissedAt:void 0};c=e,r=(0,Be.filterAndRankAssistantSurfaceActionsForContext)((0,Be.clientSkillToAssistantSurfaceAction)(r),e)}const d=c?(0,fe.K$)(fe.dr,c):fe.dr;return $.oA(d.map((e=>{const l=fe.K2[e],c=r.filter((t=>t.category===e));if(0===c.length)return;const d=(0,pe.$J)({key:e,title:l.label,render:e=>(0,Q.jsx)(Ze.Z,{...e}),actions:c.map((e=>{function r(n){let{environment:o}=n;(0,Le.j)({environment:o,event:{eventName:"assistant_inline_menu_option_click",eventProperties:{skill_type:e.skillType,from:t.type}}}),i&&v.createAndCommit({userAction:"AssistantWriterActions.skillTriggeredInputCleared",environment:o,perform:e=>{f.sO({environment:o,store:i,value:void 0,transaction:e})}})}return(0,ge.clientSkillIsType)(e,"translate")?function(e){const{clientSkill:t,intl:n,from:s,theme:i,afterAssistantSkillCompletion:a}=e;if("translate"!==t.skillType)throw new Error("Expected translate skill");const r=ye.nI.map((e=>{let{key:i,name:r}=e;return(0,pe.cN)({key:`assistant.translate.${i}`,analyticsName:`Assistant - translate - ${i}`,displayName:r,validators:[],closeParentMenu:!1,right:(0,je.cx)("submitPrompt"),action:async e=>{let{environment:r}=e;const l=K.default.state;l&&"assistantCompletionPopup"===l.type&&"initialPrompt"===l.stage&&(await o.triggerAssistantSkillCompletion({environment:r,context:l.context,clientSkillWithParameterValues:{clientSkill:t,parameterValues:{language:i}},intl:n,updater:K.default.createUpdater(),sessionId:(0,Se.Oy)(),from:s}),a({environment:r}))}})})),l=(0,pe.$J)({key:"translate language actions",render:e=>(0,Q.jsx)(Ze.Z,{...e}),actions:r}),c=()=>(0,Q.jsx)(je.lA,{svg:ke.Q,svgFill:fe.K2[t.category].color(i).color});return(0,pe.MV)({key:"translate",displayName:fe.if.translate,analyticsName:`Assistant - ${t.skillType}`,validators:[],svg:c,subActions:()=>[l]})}({clientSkill:e,intl:n,from:s,theme:a,afterAssistantSkillCompletion:r}):(0,ge.clientSkillIsType)(e,"change_tone")?function(e){const{clientSkill:t,intl:n,from:s,theme:i,afterAssistantSkillCompletion:a}=e;if("change_tone"!==t.skillType)throw new Error("Expected change_tone skill");const r=ye.vK.map((e=>{let{key:i,name:r}=e;return(0,pe.cN)({key:`assistant.changeTone.${i}`,analyticsName:`Assistant - changeTone - ${i}`,displayName:r,validators:[],closeParentMenu:!1,right:(0,je.cx)("submitPrompt"),action:async e=>{let{environment:r}=e;const l=K.default.state;l&&"assistantCompletionPopup"===l.type&&"initialPrompt"===l.stage&&(await o.triggerAssistantSkillCompletion({environment:r,context:l.context,clientSkillWithParameterValues:{clientSkill:t,parameterValues:{tone:i}},intl:n,updater:K.default.createUpdater(),sessionId:(0,Se.Oy)(),from:s}),a({environment:r}))}})})),l=(0,pe.$J)({key:"changeTone actions",render:e=>(0,Q.jsx)(Ze.Z,{...e}),actions:r}),c=()=>(0,Q.jsx)(je.lA,{svg:be.p,svgFill:fe.K2[t.category].color(i).color});return(0,pe.MV)({key:"changeTone",displayName:fe.if.changeTone,analyticsName:`Assistant - ${t.skillType}`,validators:[],svg:c,subActions:()=>[l]})}({clientSkill:e,intl:n,from:s,theme:a,afterAssistantSkillCompletion:r}):(0,pe.cN)({key:e.skillType,analyticsName:`Completions - ${e.skillType}`,displayName:e.displayName,validators:[],closeParentMenu:!1,svg:()=>(0,Q.jsx)(je.lA,{svg:e.icon,svgFill:fe.K2[e.category].color(a).color}),right:(0,je.cx)("submitPrompt"),action:async t=>{let{environment:i}=t;const a=K.default.state;a&&"assistantCompletionPopup"===a.type&&"initialPrompt"===a.stage&&(await o.triggerAssistantSkillCompletion({environment:i,context:a.context,clientSkillWithParameterValues:(0,ge.dangerouslyCreateClientSkillWithParameterValues)(e),intl:n,updater:K.default.createUpdater(),sessionId:(0,Se.Oy)(),from:s}),r({environment:i}))}})}))});return d})))}({intl:d,from:l,mockTextStore:a,theme:s,assistantSurface:t}):"results"===r.stage?y=r.loading?[]:h?He({environment:n,resultHandlers:u,upsellType:m,showMoveToCorner:!0}):function(e){const{environment:t,resultHandlers:n,upsellType:o,shouldShowLimitedQnaUpsell:s}=e,i=Te.k,a=(0,E.Js)();if(!a)return[];const r=L.Z.isXMLAssistantEnabled(),l=a.sampledSteps.length>0,c=a.getAllPendingOperations().length>0,d=a.temporaryClientSteps.findLast(xe.qT),u=function(e){const{sessionContext:t}=e,n=t.getAllPendingExecutableOperations().every((e=>"createBlock"!==e.command&&"addBlockToPage"!==e.command&&"setBlockParent"!==e.command&&"moveBlock"!==e.command&&"insertBlockAfter"!==e.command&&"insertBlockBefore"!==e.command&&"insertOrMoveTableColumns"!==e.command&&"removeBlock"!==e.command&&"removeTableColumn"!==e.command&&("setBlockText"===e.command||"setBlockAttribute"===e.command||"setBlockProperty"===e.command||"setBlockTagName"===e.command||void(0,U.t1)(e)))),o=$.jj(t.getAllPendingExecutableOperations().map(D.nO).map((e=>e.attributes.id))),s=1===o.length;if(n&&s){const e=O.default.state.mainEditorCurrentBlockStore,t=o.at(0);return t&&e?z.G.createChildStore(e,{id:t,table:H.iU}):void 0}}({sessionContext:a}),p=!c&&d||c&&u?{key:"insert",analyticsName:We,displayName:Pe.ow.insert,validators:[],closeParentMenu:!0,svg:Ae.H,action(){!c&&d?n.onInsert({chatStep:d}):c&&(0,U.$K)(u)&&n.onInsertBlockSuggestions({targetBlockStore:u,isCrdt:null==u?void 0:u.useCrdt()})}}:void 0,m={key:"moveToCorner",analyticsName:We,displayName:Fe.moveToCorner,validators:[Oe.YZb],closeParentMenu:!1,svg:Ce,action(){n.onMoveToCorner()}};return l?c?[(0,pe.$J)({key:"main",render:e=>(0,Q.jsx)(Ze.Z,{...e}),actions:$.oA([(0,pe.cN)({key:"keep",analyticsName:We,displayName:Pe.ow.accept,validators:[],closeParentMenu:!0,svg:i,action(){n.onAccept({exitType:"accept"}),Ve.assistantAnalyticsActions.trackAcceptAllPill(t,{sessionId:a.sessionId,from:"writer"})}}),(0,pe.cs)({key:"close",analyticsName:We,displayName:Pe.ow.delete,validators:[],closeParentMenu:!0,svg:we.U,shortcuts:["esc"],action(e,o){if(o&&(0,_e.vd)(o)&&"Escape"===o.key)return n.onCancel({showDiscardModal:!0});n.onCancel({showDiscardModal:!1}),Ve.assistantAnalyticsActions.trackDiscardAllPill(t,{sessionId:a.sessionId,from:"writer"})}}),p?(0,pe.cN)(p):void 0,(0,pe.cN)({key:"tryAgain",analyticsName:We,displayName:Pe.ow.tryAgain,validators:[],closeParentMenu:!1,svg:Ie.s,action(){n.onRetry()}})])}),...s&&"unavailable"!==o?[(0,pe.$J)({key:"upsell",render:e=>(0,Q.jsx)(Ze.Z,{...e}),actions:$.oA([(0,pe.cN)({key:"upsell",analyticsName:"assistant_writer_upsell_limited_qna",displayName:Pe.ow.upsell,validators:[],closeParentMenu:!1,svg:Me._,svgCustomFill:e=>e.blueColor,action(){(0,w.lx)({environment:t,upsellType:o,isAssistantEnabled:r})}})])})]:[],(0,pe.$J)({key:"move_to_corner",render:e=>(0,Q.jsx)(Ze.Z,{...e}),actions:[(0,pe.cN)(m)]})]:[(0,pe.$J)({key:"main",render:e=>(0,Q.jsx)(Ze.Z,{...e}),actions:$.oA([p?(0,pe.cN)(p):void 0,(0,pe.cN)({key:"tryAgain",analyticsName:We,displayName:Pe.ow.tryAgain,validators:[],closeParentMenu:!1,svg:Ie.s,action(){n.onRetry()}}),(0,pe.cs)({key:"close",analyticsName:We,displayName:Pe.ow.close,validators:[],closeParentMenu:!0,svg:we.U,shortcuts:["esc"],action(){n.onCancel({showDiscardModal:!0})}})])}),...s&&"unavailable"!==o?[(0,pe.$J)({key:"upsell",render:e=>(0,Q.jsx)(Ze.Z,{...e}),actions:$.oA([(0,pe.cN)({key:"upsell",analyticsName:"assistant_writer_upsell_limited_qna",displayName:Pe.ow.upsell,validators:[],closeParentMenu:!1,svg:Me._,svgCustomFill:e=>e.blueColor,action(){(0,w.lx)({environment:t,upsellType:o,isAssistantEnabled:r})}})])})]:[],(0,pe.$J)({key:"move_to_corner",render:e=>(0,Q.jsx)(Ze.Z,{...e}),actions:[(0,pe.cN)(m)]})]:[]}({environment:n,resultHandlers:u,upsellType:m,shouldShowLimitedQnaUpsell:g}):(0,U.t1)(r.stage);return(0,Ne.sG)({sections:y,context:c,query:i})}function He(e){const{environment:t,upsellType:n,resultHandlers:o,showMoveToCorner:s}=e,i=L.Z.isXMLAssistantEnabled();let a=[];s&&(a=[(0,pe.$J)({key:"move_to_corner",render:e=>(0,Q.jsx)(Ze.Z,{...e}),actions:[(0,pe.cN)({key:"moveToCorner",analyticsName:We,displayName:Fe.moveToCorner,validators:[Oe.YZb],closeParentMenu:!1,svg:Ce,action(){o.onMoveToCorner()}})]})]);let r=[];return"unavailable"===n?r=[]:"upsell"===n?r=[(0,pe.$J)({key:"main",render:e=>(0,Q.jsx)(Ze.Z,{...e}),actions:$.oA([(0,pe.cN)({key:"upsell",analyticsName:"assistant_writer_upsell",displayName:Pe.ow.upsell,validators:[],closeParentMenu:!0,svg:Me._,svgCustomFill:e=>e.blueColor,action(){(0,w.lx)({environment:t,upsellType:n,isAssistantEnabled:i})}})])})]:"requestAccess"===n||"requestAccessNoFreeCredits"===n?r=Re.Z.didRequest()?[]:[(0,pe.$J)({key:"main",render:e=>(0,Q.jsx)(Ze.Z,{...e}),actions:$.oA([(0,pe.cN)({key:"requestAccess",analyticsName:"assistant_writer_request_access",displayName:Pe.ow.requestAccess,validators:[],closeParentMenu:!0,svg:Me._,svgCustomFill:e=>e.blueColor,action(){(0,w.lx)({environment:t,upsellType:n,isAssistantEnabled:i})}})])})]:(0,U.t1)(n),[...r,...a]}var $e=n(10910),Ue=n(457819),ze=n(252193);function qe(e){const{environment:t,sessionId:n}=e,s=(0,a.useCallback)((async e=>{let{exitType:s,selectInsertion:i}=e;const a=K.default.state;"assistantCompletionPopup"!==a.type||"results"!==a.stage||a.loading||($e.HC(t,{session_id:n,inference_id:void 0,exit_type:s}),await o.acceptCursorCompletionAssistant({environment:t,selectInsertion:i,exitType:s}))}),[t,n]),i=(0,a.useCallback)((e=>{const s=K.default.state;"assistantCompletionPopup"!==s.type||"results"!==s.stage||s.loading||((0,Ue.Tq)(t),$e.HC(t,{session_id:n,inference_id:void 0,exit_type:"insert"}),v.createAndCommit({userAction:"CompletionPopup.handleInsert",environment:t,perform:n=>{const o=s.sessionId;ze.insertAssistantChatBelowSelection({environment:t,sessionId:o,transaction:n,chatStep:e.chatStep})}}),o.cancelCursorCompletionAssistant({environment:t}))}),[t,n]),r=(0,a.useCallback)((async e=>{let{targetBlockStore:s,isCrdt:i}=e;const a=K.default.state;if("assistantCompletionPopup"!==a.type||"results"!==a.stage||a.loading||!s||!i||!s.isType("text"))return;const r=t.currentUser.id;if(!r)throw new Error("No current user.");(0,Ue.Tq)(t),$e.HC(t,{session_id:n,inference_id:void 0,exit_type:"insert"});const l=Y.default.getSessionContextOrThrow(n);await ze.commitPreviewAssistantStep({environment:t,sessionId:n,updater:l.createUpdater()});const{operationsToApply:c,executableOperationsToApply:d,editGroupsThatWereApplied:u}=function(e){const{sessionId:t}=e,n=Y.default.getSessionContextOrThrow(t),o=n.uncommittedExecutableOperations,s=o.flatMap((e=>{let{operations:t}=e;return t})),i=(0,D.rn)(o);return{operationsToApply:s,executableOperationsToApply:o,editGroupsThatWereApplied:i}}({sessionId:n});(0,ze.clearActiveAssistantSession)({environment:t,sessionId:n});const p=s.getParentBlockStore();if(!p)return;const m=`assistant-${(0,Se.e$)("apply-uncommitted-")}`,{performResult:{editedPageIds:g}}=await v.createAndCommitAsync({environment:t,undoCheckpoint:m,waitForServerCommit:!1,userAction:"CompletionPopup.handleInsertSuggestions",userId:r,perform:async e=>o.insertCursorCompletionAssistantSuggestionsBelowForSingleBlockEdits({environment:t,targetBlockStore:s,parentStore:p,isCrdt:i,operationsToApply:c,transaction:e})}),{evaluator:f}=l,h=f.state;if(g.size>0)for(const t of g)h.getLoadedPageIds().includes(t)||await f.loadPageWithoutAssistantStep(t);return l.addExecutableOperationsToExecutedOperationMap(d),o.cancelCursorCompletionAssistant({environment:t}),{editGroupsThatWereApplied:u,undoCheckpointName:m}}),[t,n]),l=(0,a.useCallback)((()=>{console.warn("onReplace not implemented for assistant writer!")}),[]);return(0,a.useMemo)((()=>({onAccept:s,onInsert:i,onReplace:l,onInsertBlockSuggestions:r})),[s,i,l,r])}const Ge="notion-assistant-writer-ui";function Je(e){const{completionState:t}=e,n=(0,a.useRef)(null),I=(0,c.VK)((()=>(0,E.Js)()),[]),j=(0,c.VK)((()=>null==I?void 0:I.assistantConfigurationStore),[null==I?void 0:I.assistantConfigurationStore]);(0,a.useEffect)((()=>{g.w()}),[]);const Z=(0,l.O7)(),F=(0,p.useIntl)(),H=(0,d.Fg)(),{isMobile:$}=(0,l.Fy)(),z=(0,c.VK)((()=>{const e=null==j?void 0:j.state;return Boolean((null==e?void 0:e.sampling)||(null==e?void 0:e.evaluating))}),[j]),{store:q}=(0,B.Cl)({initialValue:t.prefilledValue?(0,u.TPx)(t.prefilledValue):void 0}),G=(0,c.VK)((()=>q.getValue()),[q]),J=(0,c.VK)((()=>(0,u.Jcv)(G)),[G]),Y=(0,a.useCallback)((async e=>{const{showDiscardModal:n}=e;if(!n||await(0,C.confirmAndDiscardPendingEditsIfApplicable)({environment:Z,humanInput:G,isWriter:!0,assistantInputTextStore:q}))return"results"===t.stage?(o.cancelAssistantCompletion({environment:Z,completionState:t}),void(0,b.closeInitialPromptAndEndSession)(Z)):void(0,b.closeInitialPromptAndEndSession)(Z)}),[Z,t,G,q]),ee=(0,a.useCallback)((()=>{o.moveAssistantWriterToCorner({environment:Z})}),[Z]),te=(0,a.useCallback)((async e=>{if(!e)return;const n=N.default.mark("assistant.writer_submit_lag");N.default.measureAfterNextFlush(n,{environment:Z}),K.default.setState({...t,stage:"results"});const{currentUserSettingsStore:s}=O.default.state;s&&(0,y.setLastUsedAIWriterAtToCurrentTimestamp)(Z,{userSettingsStore:s}),await o.refreshAssistantCompletion({environment:Z,updater:K.default.createUpdater(),humanText:e})}),[t,Z]);(0,a.useEffect)((()=>{z||h.N_({store:q})}),[Z,q,z]);const ne=(0,a.useMemo)((()=>({environment:Z,blocks:[],publicEditMode:void 0})),[Z]);(0,c.VK)((()=>{z!==t.loading&&K.default.setState({...t,loading:z})}),[z,t]),(0,c.VK)((()=>{I&&function(e){const t=K.default.state;if("assistantCompletionPopup"!==t.type)return;return(0,D.rn)(e).some((e=>"updatedPage"===e.type?e.didCreatePage||e.pageId!==t.context.currentPage.id:"removedPage"===e.type||void(0,U.t1)(e)))}(I.getAllPendingExecutableOperations())&&o.moveAssistantWriterToCorner({environment:Z})}),[Z,I]);const oe=qe({environment:Z,sessionId:t.sessionId}),se=(0,T.f)(I),ie=$?P.FP.mobileWriter:P.FP.writer,ae=(0,a.useCallback)((async()=>{const e=await(0,k.xx)({environment:Z,sessionId:t.sessionId,assistantSurface:ie});if(m.x.isSuccess(e)){const{textValue:t}=e.value;await r.default.afterNextFlush(),q&&(v.createAndCommit({userAction:"AssistantWriterPopup.tryAgain",environment:Z,perform:e=>{f.sO({environment:Z,store:q,value:t,transaction:e})}}),h.NX({store:q}))}else await(0,k.f6)({environment:Z,sessionId:t.sessionId,assistantSurfaceType:ie.type})}),[t.sessionId,Z,q,ie]),re=(0,w.Gw)(),le=(0,W.uU)(),ce=(0,c.VK)((()=>L.Z.isLimitedQnaMode()&&!le&&"unavailable"!==re),[re,le]),de=(0,c.VK)((()=>De({assistantSurface:ie,environment:Z,intl:F,theme:H,filter:J,mockTextStore:q,state:t,from:t.from,context:ne,completionResultInfo:{...oe,onRetry:ae,onCancel:()=>Y({showDiscardModal:!1}),onMoveToCorner:ee},assistantConfigurationStore:j,upsellType:re,shouldShowLimitedQnaUpsell:ce})),[ie,j,ne,oe,t,Z,ae,Y,ee,J,F,q,H,re,ce]),ue=de.length>0,pe=(0,c.qz)(void 0,R.Z),me=function(){const{isMobile:e}=(0,l.Fy)();return(0,d.yK)((t=>({wrap:{display:"flex",borderRadius:e?"12px 12px 0px 0px":12,boxShadow:t.aiBarShadow,overflow:"hidden",isolation:"isolate",flexDirection:"column",gap:2,paddingTop:2,paddingBottom:2,background:t.popoverWaxPaperBackground,backdropFilter:"blur(40px)",WebkitBackdropFilter:"blur(40px)"},inputWrap:{width:"100%",minHeight:e?50:42,padding:e?0:"0 6px 0 0",display:"flex",alignItems:"center",gap:8,fontSize:e?16:14},inputOverrides:{marginLeft:0,marginRight:0,boxShadow:"unset",borderRadius:0,padding:e?"0 16px 0 8px":"0 8px 0 8px",backgroundColor:"unset"},chatWrap:{padding:8,fontSize:e?15:14},menuPopup:{marginTop:4,marginBottom:4,borderRadius:8,background:t.popoverWaxPaperBackground,backdropFilter:"blur(40px)",WebkitBackdropFilter:"blur(40px)",boxShadow:t.aiBarShadow,width:e?"100%":"fit-content",minWidth:e?void 0:280,maxWidth:e?void 0:375,overflow:"hidden",isolation:"isolate"}})),[e])}();let ge;ue&&(ge=(0,Q.jsx)(s.E.div,{style:me.menuPopup,initial:{opacity:0,scale:.98,y:4},animate:{opacity:1,scale:1,y:0},transition:{duration:.2,delay:.05,ease:(0,i._)(.25,.1,.25,1)},className:Ge,children:(0,Q.jsx)(Ye,{sections:de,context:ne,menuListStore:pe,completionState:t,isInputEmpty:!J})})),(0,a.useEffect)((()=>{function e(e){var t;(t=e.target)instanceof Element&&(t.closest(`.${Ge}`)||t.closest(`.${V.YPt}`)||t.closest(`.${V.Phn}`))||("click"!==e.type&&"contextmenu"!==e.type||Y({showDiscardModal:!0}))}return window.addEventListener("click",e,!0),window.addEventListener("contextmenu",e,!0),()=>{window.removeEventListener("click",e,!0),window.removeEventListener("contextmenu",e,!0)}}),[Y]),(0,x.lZ)(t);const fe=a.useMemo((()=>({sections:de,context:ne})),[de,ne]);return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(_.Z,{capture:!0,onEsc:()=>Y({showDiscardModal:!0}),debugName:"AssistantWriterPopup"}),(0,Q.jsxs)(P.JU,{surface:ie,children:[(0,Q.jsx)(M.n,{}),(0,Q.jsx)(S.RD,{originRef:n,openState:t}),(0,Q.jsxs)(s.E.div,{style:me.wrap,initial:{opacity:0,scale:.98,y:4},animate:{opacity:1,scale:1,y:0},transition:{duration:.2,ease:(0,i._)(.25,.1,.25,1)},className:Ge,children:[(0,Q.jsx)(ve,{mobileActionArgs:fe,mockTextStore:q}),se?(0,Q.jsx)(X,{sessionId:t.sessionId,loadingState:se,store:q}):(0,Q.jsx)("div",{style:me.inputWrap,ref:n,children:(0,Q.jsx)(A.HY,{store:q,onSubmit:te,onEsc:()=>Y({showDiscardModal:!0}),onBackspaceOnEmptyInput:()=>Y({showDiscardModal:!1}),textInputOverrideStyles:me.inputOverrides,textContainerOverrideStyles:{padding:"8px 0 8px 4px"},requestedSkill:void 0,assistantChatRenderState:{type:"chat"},isSampling:z,emptyStateResultsIsEmpty:!1})})]}),!$&&ge]})]})}function Ye(e){const{sections:t,context:n,menuListStore:o,completionState:s,isInputEmpty:i}=e,r=(0,a.useRef)(null);(0,x.w9)(s);const l=(0,c.VK)((()=>F.Z.state.open),[]);return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(S.gl,{originRef:r,openState:s,isInputEmpty:i}),(0,Q.jsx)("div",{ref:r,children:(0,Q.jsx)(j.Z,{menuType:Z.og.Popup,width:"100%",maxHeight:"min(40vh, 320px)",maxWidth:"100%",children:(0,Q.jsx)(I.Z,{keyboardPriority:1,disableKeyboard:l,menuListStore:o,sections:t,initialFocus:0,context:n})})})]})}},802159:(e,t,n)=>{n.d(t,{m:()=>d});n(667294);var o=n(460651),s=n(709291),i=n(247839),a=n(573063),r=n(934700),l=n(785893);const c=(0,s.defineMessages)({menu:{defaultMessage:"Menu",id:"topbar.appMenuButton.title"}});function d(){const e=(0,s.useIntl)();return(0,l.jsx)(a.Z,{style:{position:"absolute",top:"10px",left:"14px",width:24,height:24,zIndex:1e5,...(0,r.X)({noDrag:!0})},iconStyle:{width:16,height:16},isDarkIconColor:!0,onClick:()=>{i.openAppMenu()},icon:o.h,ariaLabel:e.formatMessage(c.menu)})}},411335:(e,t,n)=>{n.d(t,{Z:()=>f});n(667294);var o=n(886628),s=n(724405),i=n(399036),a=n(180951),r=n(719255),l=n(732566),c=n(421202),d=n(76233),u=n(401898),p=n(206258),m=n(414200),g=n(785893);function f(e){const t=i.LS(e.propertySchema);switch(t){case"text":return(0,g.jsx)(h,{...e});case"relation":return(0,g.jsx)(v,{propertySchema:e.propertySchema,beforeValue:e.beforeValue,afterValue:e.afterValue,rootStore:e.rootStore});case"arrow":return(0,g.jsx)(y,{...e});default:(0,u.t1)(t)}}function h(e){const t={value:r.Mg({before:e.beforeValue.value,after:e.afterValue.value,insertionAnnotation:[d.GKr.Inserted],deletionAnnotation:[d.GKr.Deleted]}),spaceId:e.beforeValue.spaceId};return(0,g.jsx)(m.Z,{value:t,propertySchema:e.propertySchema,rootStore:e.rootStore})}function v(e){const{beforeValue:t,afterValue:n,propertySchema:s,rootStore:i}=e,r=(0,o.VK)((()=>a.NT({beforeValue:t.value,afterValue:n.value,propertySchema:s,getRecordModel:i.getRecordModel,getBlockTitle:e=>p.G.createChildStore(i,{table:c.iU,id:e.id}).getPropertyValue("title")})),[t,n,s,i]);return(0,g.jsx)(m.Z,{value:{value:r,spaceId:t.spaceId},propertySchema:{type:"title",name:"Title"},rootStore:i})}function y(e){const t=(0,s.yK)((()=>({arrowDiffWrap:{display:"inline-flex",alignItems:"center",overflow:"hidden",flexWrap:"wrap",rowGap:6}})),[]);return(0,g.jsxs)("div",{style:t.arrowDiffWrap,children:[(0,g.jsx)(m.Z,{value:e.beforeValue,propertySchema:e.propertySchema,rootStore:e.rootStore}),(0,g.jsx)(x,{}),(0,g.jsx)(m.Z,{value:e.afterValue,propertySchema:e.propertySchema,rootStore:e.rootStore})]})}function x(){const e=(0,s.yK)((e=>({container:{padding:"0px 8px"},icon:{width:15,height:15,fill:e.mediumIconColor}})),[]);return(0,g.jsx)("div",{style:e.container,children:(0,l.k)(e.icon)})}},314694:(e,t,n)=>{n.d(t,{Z:()=>u});n(667294);var o=n(800480),s=n(886628),i=n(724405),a=n(439567),r=n(950659),l=n(224646),c=n(785893);function d(){const e=(0,i.yK)((e=>({icon:{position:"absolute",width:"50%",height:"50%",right:0,bottom:0,fill:"dark"===e.mode?e.regularTextColor:"#3E3C38",stroke:"dark"===e.mode?e.sidebarBackground:"white",strokeWidth:"dark"===e.mode?"1.85px":"1.5px"}})),[]);return(0,c.jsx)("div",{children:(0,a.Y)(e.icon)})}function u(e){var t;const n=(0,o.O7)(),a=n.device.isMobile,u=(0,s.VK)((()=>{var t,o;if(a)return n.WindowSizeStore.getSafePaddingLeftCSS("number"==typeof(null===(t=e.style)||void 0===t?void 0:t.paddingLeft)?null===(o=e.style)||void 0===o?void 0:o.paddingLeft:10)}),[n.WindowSizeStore,a,null===(t=e.style)||void 0===t?void 0:t.paddingLeft]),p=(0,s.VK)((()=>(0,l.BH)(n)),[n]),m=(0,s.VK)((()=>(0,r.MF)(n)),[n]),g=(0,i.yK)((t=>({wrapper:{...a?{display:"flex",alignItems:"center",width:"100%",minHeight:26,fontSize:16,paddingTop:8,paddingBottom:8,paddingLeft:u,paddingRight:10,userSelect:"none",WebkitUserSelect:"none",boxShadow:e.disableMobileBorder?void 0:`0 1px 0 ${t.regularDividerColor}`,marginBottom:e.shouldShowMobileMarginBottom?12:1}:{display:"flex",alignItems:"center",width:"100%",fontSize:14,minHeight:e.isBottomItem?24:27,paddingTop:2,paddingBottom:2,...p&&{height:l.H3,paddingTop:4,paddingBottom:4},...!p&&{marginTop:1,marginBottom:1},...m},...e.style},icon:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,width:a?28:22,height:a?24:18,marginLeft:p?void 0:-3,marginRight:p?8:4,position:"relative"},right:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,height:"100%",...e.rightStyle},left:{flexShrink:0,flexGrow:0,borderRadius:4,color:t.mediumTextColor,width:a?24:p?l.MY:22,height:a?24:p?l.MY:22,display:"flex",alignItems:"center",justifyContent:"center",marginRight:e.icon?0:8},children:{flexGrow:1,flexShrink:1,flexBasis:"auto",whiteSpace:"nowrap",minWidth:0,overflow:"hidden",textOverflow:e.right&&!a?"clip":"ellipsis",...e.childrenStyle}})),[a,u,e.disableMobileBorder,e.shouldShowMobileMarginBottom,e.isBottomItem,e.style,e.rightStyle,e.icon,e.right,e.childrenStyle,p,m]);return(0,c.jsxs)("div",{role:e.role,"aria-current":e["aria-current"],"aria-expanded":e["aria-expanded"],"aria-owns":e["aria-owns"],"aria-labelledby":e["aria-labelledby"],style:g.wrapper,onFocus:e.onFocus,onBlur:e.onBlur,onMouseMove:e.onMouseMove,onMouseLeave:e.onMouseLeave,onClick:e.onClick,className:e.className,children:[e.left&&(0,c.jsx)("div",{style:g.left,children:e.left}),e.icon&&(0,c.jsxs)("div",{style:g.icon,children:[e.icon,e.isAlias&&(0,c.jsx)(d,{})]}),(0,c.jsx)("div",{style:g.children,children:e.children}),e.right&&(0,c.jsx)("div",{style:g.right,children:e.right})]})}},457345:(e,t,n)=>{n.d(t,{a6:()=>p,lG:()=>u,zd:()=>m});n(667294),n(133728),n(568626),n(471924),n(772141);var o=n(709291),s=(n(552629),n(436610)),i=n(547307),a=(n(476464),n(164964),n(419306),n(626907),n(367669),n(318245),n(188923)),r=n(799332),l=(n(429677),n(766708)),c=n(28578),d=n(785893);function u(e){c.ZP.reset(),a.default.state.open?r.Z.setState({...r.Z.state,open:!0}):l.Z.setState({...l.Z.state,open:!0}),s.DB(e,{share_menu_session_id:c.ZP.state.sessionId})}function p(e){a.default.state.open?r.Z.setState({...r.Z.state,open:!1}):l.Z.setState({...l.Z.state,open:!1}),s.Rb(e,{share_menu_session_id:c.ZP.state.sessionId})}async function m(e){const{inviteTargetsStore:t}=e,n=(0,d.jsx)(o.FormattedMessage,{id:"shareMenu.closeInviteDialog.confirmationMessage",defaultMessage:"Your changes have not been saved. Discard changes?"}),s=(0,d.jsx)(o.FormattedMessage,{id:"shareMenu.closeInviteDialog.confirmationButton.label",defaultMessage:"Yes"}),a=(0,d.jsx)(o.FormattedMessage,{id:"shareMenu.closeInviteDialog.cancelButton.label",defaultMessage:"Cancel"});if(t.state.inviteTargets.length>0){return(await i.confirmUserActionV2({message:n,acceptLabel:s,cancelLabel:a})).accept}return!1}},943604:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n(749085).default.createValue({open:!1},{name:"ConfirmOverwriteModalStore"})},745483:(e,t,n)=>{n.d(t,{Z:()=>r});var o=n(749085),s=n(292595);class i extends o.default{getInitialState(){return{openModals:new Set}}}const a=new i,r=a;(0,s.exposeDebugValue)("GlobalModalStore",a)},361254:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(749085);class s extends o.default{getInitialState(){return{open:!1,openAnimationCompleted:!0,closeAnimationCompleted:!0}}}const i=s},665955:(e,t,n)=>{n.d(t,{o:()=>i});n(667294);var o=n(745238),s=n(785893);const i=(0,o.IU)("addPage",{viewBox:"0 0 14 14",svg:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 0c3.861 0 7 3.139 7 7s-3.139 7-7 7-7-3.139-7-7 3.139-7 7-7zM3.561 5.295a1.027 1.027 0 1 0 2.054 0 1.027 1.027 0 0 0-2.054 0zm5.557 1.027a1.027 1.027 0 1 1 0-2.054 1.027 1.027 0 0 1 0 2.054zm1.211 2.816a.77.77 0 0 0-.124-1.087.786.786 0 0 0-1.098.107c-.273.407-1.16.958-2.254.958-1.093 0-1.981-.55-2.244-.945a.788.788 0 0 0-1.107-.135.786.786 0 0 0-.126 1.101c.55.734 1.81 1.542 3.477 1.542 1.668 0 2.848-.755 3.476-1.541z"})})},164788:(e,t,n)=>{n.d(t,{P:()=>i});n(667294);var o=n(745238),s=n(785893);const i=(0,o.IU)("addPageCover",{viewBox:"0 0 14 14",svg:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 0a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm0 12h10L8.5 5.5l-2 4-2-1.5L2 12z"})})},427961:(e,t,n)=>{n.d(t,{z:()=>i});n(667294);var o=n(745238),s=n(785893);const i=(0,o.IU)("collectionDescriptionSmall",{viewBox:"0 0 14 14",svg:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 4.667C6.69049 4.667 6.39366 4.54405 6.17481 4.32519C5.95595 4.10634 5.833 3.80951 5.833 3.5C5.833 3.19049 5.95595 2.89366 6.17481 2.67481C6.39366 2.45595 6.69049 2.333 7 2.333C7.30951 2.333 7.60634 2.45595 7.82519 2.67481C8.04405 2.89366 8.167 3.19049 8.167 3.5C8.167 3.80951 8.04405 4.10634 7.82519 4.32519C7.60634 4.54405 7.30951 4.667 7 4.667V4.667ZM8 11C8 11.2652 7.89464 11.5196 7.70711 11.7071C7.51957 11.8946 7.26522 12 7 12C6.73478 12 6.48043 11.8946 6.29289 11.7071C6.10536 11.5196 6 11.2652 6 11V7C6 6.73478 6.10536 6.48043 6.29289 6.29289C6.48043 6.10536 6.73478 6 7 6C7.26522 6 7.51957 6.10536 7.70711 6.29289C7.89464 6.48043 8 6.73478 8 7V11ZM7 0C5.14348 0 3.36301 0.737498 2.05025 2.05025C0.737498 3.36301 0 5.14348 0 7C0 8.85652 0.737498 10.637 2.05025 11.9497C3.36301 13.2625 5.14348 14 7 14C8.85652 14 10.637 13.2625 11.9497 11.9497C13.2625 10.637 14 8.85652 14 7C14 5.14348 13.2625 3.36301 11.9497 2.05025C10.637 0.737498 8.85652 0 7 0V0Z"})})},664878:(e,t,n)=>{n.d(t,{h:()=>i});n(667294);var o=n(745238),s=n(785893);const i=(0,o.IU)("dot",{viewBox:"0 0 5 4",svg:(0,s.jsx)("circle",{cx:"2.5",cy:"2",r:"2"})})},276915:(e,t,n)=>{n.d(t,{Z:()=>o});const o={appCursorListener:{sidebar:1,secondarySidebar:2,editor:3,aiChat:3,marketplace:3}}}}]);