"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[46550],{427386:(e,t,n)=>{n.d(t,{Um:()=>p,ZP:()=>g,kN:()=>u});n(667294);var a=n(800480),i=n(724405),r=n(772770),o=n(434859),s=n(791754),d=n(661519),l=n(953336),c=n(785893);function u(e){return e?18:60}function p(){return(0,c.jsx)(d.Z,{size:37})}const g=function(e){let{children:t,controlRow:n,bannerText:d,controlRowPaddingTopBottom:p,removeBoxShadow:g,contentPaddingLeftRight:m,controlRowPaddingLeftRight:h,getPaddingTopBottom:x,disableScroller:y,maxWidth:S}=e;const f=(0,a.O7)(),{device:v}=f,b=x?x():v.isMobile?18:36,j=(0,i.yK)((e=>({containerWithScroller:{display:"flex",flexDirection:"column",width:"100%",height:"100%",maxWidth:S??void 0,backgroundColor:e.cardContentBackground},scroller:{flexGrow:1,WebkitOverflowScrolling:"touch",transform:"translateZ(0)",paddingLeft:m??u(v.isMobile),paddingRight:m??u(v.isMobile),paddingTop:d?15:b,paddingBottom:d?22:b},controlRowWithScroller:{flexGrow:0,flexShrink:0,paddingLeft:h??u(v.isMobile),paddingRight:h??u(v.isMobile),paddingTop:p,paddingBottom:p,boxShadow:g?void 0:`0 -1px 0 ${e.regularDividerColor}`},containerWithoutScroller:{paddingLeft:u(v.isMobile),paddingRight:u(v.isMobile)},childrenWithoutScroller:{paddingTop:b,paddingBottom:b},controlRowWithoutScroller:{paddingTop:p,paddingBottom:p,boxShadow:`0 -1px 0 ${e.regularDividerColor}`}})),[S,m,v.isMobile,d,b,h,p,g]);return y?(0,c.jsxs)("div",{style:j.containerWithoutScroller,children:[(0,c.jsx)("div",{style:j.childrenWithoutScroller,children:t}),n&&(0,c.jsx)("div",{style:j.controlRowWithoutScroller,children:n})]}):(0,c.jsxs)("div",{style:j.containerWithScroller,children:[d&&(0,c.jsx)(s.Z,{styleKey:r.v.Blue,isMobile:!1,children:d}),(0,c.jsx)(l.Z,{type:o.Z.All,style:j.scroller,children:t}),n&&(0,c.jsx)("div",{style:j.controlRowWithScroller,children:n})]})}},979097:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Ae});var a=n(886664),i=n(667294),r=n(800480),o=n(184747),s=n(886628),d=n(724405),l=n(213148),c=n(709291),u=n(531701),p=n(286572),g=n(689024),m=n(436488),h=n(550506),x=n(953336),y=n(843250),S=n(434859),f=n(80444),v=n(788632),b=n(327242),j=n(568626),C=n(398724),M=n(653965),I=n(25777),T=n(454642),Z=n(547307),w=n(792625),B=n(164964),F=n(195014),U=n(88893),k=n(962142),A=n(140469),O=n(785893);const D=(0,c.defineMessages)({loading:{defaultMessage:"Claiming and upgrading workspace...",id:"spaceSubscriptionUpgradeModal.upgradeTargetSpace.loading"}});function P(e){return"stripeToken"===(null==e?void 0:e.type)?e.value:void 0}function W(e){return"paymentMethodId"===(null==e?void 0:e.type)?e.value:void 0}async function z(e){const{environment:t,data:n,requestingSpaceId:a,paymentData:i}=e,r=k.Z.state;if(!r.open)return;const o=r.targetPlan;if(!o)return;const s=r.temporaryAddress;w.j({message:D.loading});const d=r.targetSpace.id,l=await T.claimAndUpgradeSpace(t,{requestingSpaceId:a,targetSpaceId:d,targetPlan:o,stripeToken:P(i),paymentMethodId:W(i),customerName:s.name,businessName:s.businessName,addressLine1:s.addressLine1,addressCity:s.city,addressZip:s.zipCode,addressState:s.state,addressCountry:s.country,vatId:r.vatApplicable?r.temporaryVatCode:void 0});var u,g,m,h;(w.x(),"success"===l.type)?(k.Z.closeWithSuccess(),h=r.targetSpace.name,B.oV({label:(0,O.jsx)(c.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.selfServe.toast",defaultMessage:"Successfully claimed â€œ{spaceName}â€œ",values:{spaceName:h}})}),I.IC(t,{previousOwners:r.targetSpace.admins.map((e=>e.id)),newOwners:t.currentUser.id?[t.currentUser.id]:[],targetSpaceId:d,verifiedDomain:r.targetSpace.creatorEmailDomain,memberCount:r.targetSpace.memberCount,costForUpgrade:null===(u=r.totalUpgradeCost)||void 0===u?void 0:u.amount,currencyCode:null===(g=r.totalUpgradeCost)||void 0===g?void 0:g.currencyCode,currentPlan:null===(m=U.XX(n))||void 0===m?void 0:m.plan,targetPlan:o})):(Z.showError(l),function(e){const{environment:t,modalId:n}=e;k.Z.reset(),p.LY(t,{modal_id:n})}({environment:t,modalId:r.sessionId}))}const L=(0,M.Ds)((async function(e){const{environment:t,state:n,data:a,requestingSpaceId:i,stripe:r,elements:o,intl:s}=e;p.PN(t,{modal_id:n.sessionId}),k.Z.update((e=>({...e,payButtonState:"disabled"}))),await async function(e){const{environment:t,state:n,data:a,requestingSpaceId:i,stripe:r,elements:o,intl:s}=e;if(!o||!r)return void j.log({level:"error",from:"SpaceSubscriptionUpgradeModal",type:"StripeError",error:{miscDataString:"Stripe elements not initialized when user tried to upgrade"}});let d=n.paymentData;if(!d){const{error:e}=await o.submit();if(e)return p.VQ(t,{error:"could not submit form",error_type:"payment_method",modal_id:n.sessionId}),void k.Z.setState({...n,error:s.formatMessage({id:"spaceSubscriptionUpgradeModal.payment.genericError",defaultMessage:"Your payment could not be processed. Please try again."})});const a=await r.createPaymentMethod({elements:o});if(a.error)return p.VQ(t,{error:a.error.message,error_type:"payment_method",modal_id:n.sessionId}),void k.Z.setState({...n,error:F.translateStripeError(t,s,a.error)});if(!a.paymentMethod)return p.VQ(t,{error:"could not create token",error_type:"payment_method",modal_id:n.sessionId}),void k.Z.setState({...n,error:s.formatMessage({id:"spaceSubscriptionUpgradeModal.payment.genericError",defaultMessage:"Your payment could not be processed. Please try again."})});d={type:"paymentMethodId",value:a.paymentMethod.id},k.Z.setState({...n,paymentData:d})}await z({environment:t,data:a,requestingSpaceId:i,paymentData:d})}({environment:t,state:n,data:a,requestingSpaceId:i,stripe:r,elements:o,intl:s});const d=k.Z.state;d.open&&k.Z.setState({...d,payButtonState:"enabled"})}),1e3,{leading:!0,trailing:!1});async function _(e){const{requestingSpaceId:t,environment:n,state:a}=e;k.Z.update((e=>({...e,totalUpgradeCost:void 0,payButtonState:"disabled"})));const i=a.targetSpace.isActorInSpace?a.targetSpace.memberCount:a.targetSpace.memberCount+1,r=U.GD(a.temporaryBillingInterval),o=await T.getCostForSpaceUpgrade(n,{targetSpaceId:a.targetSpace.id,requestingSpaceId:t,subscriptionTier:"enterprise",billingInterval:r,memberCount:i});if("failed"===o.type)Z.showError(o),k.Z.close();else{const e=o.data?C.n.fromValue({amount:o.data.totalCost,currencyCode:o.data.currencyCode}).zeroIfNegative():void 0;k.Z.update((t=>({...t,totalUpgradeCost:e,targetPlan:o.data.targetPlan,payButtonState:"enabled"})))}}var N=n(608719),H=n(423412),R=n(151133),q=n(697710),K=n(333493),E=n(164369);function V(e){const{error:t}=e.state,n=(0,d.yK)((()=>({label:{marginTop:8,color:u.ZP.red}})),[]);return t?(0,O.jsx)(E.Z,{isMultiline:!0,style:n.label,children:t}):null}var Y=n(756142),G=n(158297),Q=(n(95477),n(170060)),X=n(288280);function $(e){const{state:t}=e,{open:n,type:a,isTrial:i,subscriptionTier:r}=t;return n?a===b.U.TargetSpace?(0,O.jsx)(c.FormattedMessage,{id:"subscriptionUpgradeModal.targetSpace.button.enterprise",defaultMessage:"Claim & Upgrade to Enterprise"}):i?(0,O.jsx)(c.FormattedMessage,{id:"onboardingCheckout.upgradeButton.startTrial",defaultMessage:"Start Notion with {subscriptionTier, select, business {Business} other {Plus}} trial",values:{subscriptionTier:r}}):(0,O.jsx)(c.FormattedMessage,{id:"subscriptionUpgradeModal.upgradeButton.upgradeNow",defaultMessage:"Upgrade now"}):null}function J(e){const{state:t,onClickUpgrade:n,customStyles:a}=e,i=(0,d.yK)((()=>({upgradeButton:{height:40,marginTop:24,fontSize:16}})),[]),r=(0,s.VK)((()=>{var e;return void 0!==(null===(e=(0,U.aS)(X.subscriptionDataStoreInstance.state))||void 0===e?void 0:e.customerId)}),[]),o=(0,s.VK)((()=>(0,Q.G2)()&&!1),[r]);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(G.Z,{disabled:"disabled"===t.payButtonState,style:{...i.upgradeButton,...a},onClick:()=>n({useTestClock:!1}),children:(0,O.jsx)($,{state:t})}),o?(0,O.jsx)(G.Z,{disabled:"disabled"===t.payButtonState,style:i.upgradeButton,onClick:()=>n({useTestClock:!0}),children:"ðŸš§ Upgrade with Test Clock ðŸš§"}):void 0]})}var ee=n(961736),te=n(647425),ne=n(137810),ae=n(863296),ie=n(319385),re=n(757118);function oe(e){const{state:t}=e,n=(0,d.yK)((e=>({contactSalesButton:{width:"100%",height:40,marginTop:10},contactSalesCta:{fontWeight:ne.Z.fontWeight.medium},contactSalesIcon:{height:18,width:20,marginRight:6},contactSalesQuestionsText:{color:e.mediumTextColor,fontSize:12,lineHeight:ne.Z.lineHeight.UISmall.desktop}})),[]),[a,i]=(0,s.VK)((()=>{const e=ie.default.getEligibleGroup({experimentId:"in_app_contact_sales_cta_billing",defaultGroup:"control"});return[t.subscriptionTier,e]}),[t]);if(!(0,te.Rs)(a))return null;const r="on"===i?(0,O.jsx)(c.FormattedMessage,{defaultMessage:"Request a demo",id:"helpButton.salesChat.menuItemDemoVariant"}):(0,O.jsx)(c.FormattedMessage,{id:"spaceSubscriptionSettings.upgradeModal.contactSales",defaultMessage:"Contact sales"});return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(ae.Z,{style:n.contactSalesButton,onClick:()=>{(0,re.n)(U.m_(t.subscriptionTier))},children:[(0,ee.n)(n.contactSalesIcon),(0,O.jsx)("span",{style:n.contactSalesCta,children:r})]}),(0,O.jsx)("p",{style:n.contactSalesQuestionsText,children:(0,O.jsx)(c.FormattedMessage,{id:"spaceSubscriptionSettings.upgradeModal.sales.questions",defaultMessage:"Questions? Contact our sales team for more information."})})]})}function se(e){const{state:t,products:n,onClickUpgrade:a}=e,{isTrial:i}=t;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[(0,O.jsx)(J,{state:t,onClickUpgrade:a}),(0,O.jsx)(Y.E,{showTrialEndDisclaimer:!1,products:n,isTrial:i})]}),(0,O.jsx)(V,{state:t}),i?null:(0,O.jsx)(oe,{state:t})]})}var de=n(634310),le=n(661519),ce=n(343568),ue=n(474523),pe=n(918514),ge=n(568785),me=n(727533);function he(e){const{lineItemData:t,nameStyle:n,priceStyle:a,showZeroPrice:i}=e,r=(0,d.yK)((e=>({container:{marginTop:24},itemContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",lineHeight:1,minHeight:18},name:{fontSize:12,color:e.mediumTextColor,...n||void 0},price:{fontSize:12,color:"promotion"===t.type?"#53A83F":e.regularTextColor,...a||void 0},caption:{fontSize:12,color:e.mediumTextColor},captionContainer:{display:"flex",flexDirection:"column"}})),[t,n,a]);let o="-";return t.price&&(t.price.amount>0||i)&&(o=(0,O.jsx)(me.W,{cost:t.price.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"})),(0,O.jsxs)("div",{style:r.itemContainer,children:[(0,O.jsxs)("div",{style:r.captionContainer,children:[(0,O.jsx)("span",{style:r.name,children:t.name}),t.subtitle&&(0,O.jsx)("span",{style:r.caption,children:t.subtitle})]}),"calculating"===t.type?(0,O.jsx)(ge.Z,{}):(0,O.jsx)("span",{style:r.price,children:o})]})}function xe(e){var t;const{state:n}=e,a=(0,d.yK)((e=>({container:{display:"flex",flexDirection:"column"},header:{fontSize:16,color:e.regularTextColor,fontWeight:ne.Z.fontWeight.semibold,marginBottom:10},couponLink:{fontSize:12},helpButton:{marginLeft:0,marginTop:-4,marginBottom:12},helpButtonInner:{fontSize:12}})),[]),i=n.calculatingTax||null===(t=C.n.sum(n.totalUpgradeCost,n.taxAmount))||void 0===t?void 0:t.zeroIfNegative();return(0,O.jsxs)("div",{style:a.container,children:[(0,O.jsx)("label",{style:a.header,children:(0,O.jsx)(c.FormattedMessage,{id:"claimAndUpgradeOrderSummary.header",defaultMessage:"Order summary"})}),void 0!==n.totalUpgradeCost?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(Se,{totalCostForUpgrade:n.totalUpgradeCost,memberCount:n.targetSpace.memberCount}),(0,O.jsx)(ue.Z,{style:a.helpButton,buttonStyle:a.helpButtonInner,title:(0,O.jsx)(c.FormattedMessage,{id:"claimAndUpgradeOrderSummary.helpButton.label",defaultMessage:"Learn more about prorated charges"}),href:(0,pe.UY)("guides.billingAndPayment"),analyticsFrom:"invoices"}),(0,O.jsx)(ye,{state:n}),(0,O.jsx)(le.Z,{size:14}),(0,O.jsx)(he,{showZeroPrice:!0,lineItemData:{price:i,type:"standard",name:(0,O.jsx)(c.FormattedMessage,{id:"claimAndUpgradeOrderSummary.orderTotal",defaultMessage:"Total"})},priceStyle:{fontSize:20}})]}):(0,O.jsx)(fe,{})]})}function ye(e){return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(he,{showZeroPrice:!0,lineItemData:{type:"standard",name:(0,O.jsx)(c.FormattedMessage,{id:"claimAndUpgradeOrderSummary.lineItems.subTotal",defaultMessage:"Subtotal"}),price:e.state.totalUpgradeCost}}),(0,O.jsx)(he,{lineItemData:{type:e.state.calculatingTax?"calculating":"standard",name:(0,O.jsx)(c.FormattedMessage,{id:"claimAndUpgradeOrderSummary.lineItems.tax.title",defaultMessage:"Tax"}),price:e.state.taxAmount,subtitle:e.state.taxAmount||0===e.state.taxAmount?void 0:(0,O.jsx)(c.FormattedMessage,{id:"claimAndUpgradeOrderSummary.lineItems.tax.subtitle",defaultMessage:"if applicable"})}})]})}function Se(e){const{totalCostForUpgrade:t,memberCount:n}=e,a=(0,d.yK)((e=>({container:{display:"flex",justifyContent:"space-between",marginBottom:6},item:{},title:{fontSize:14},subtitle:{color:e.mediumTextColor,fontSize:12},price:{fontSize:14,color:e.regularTextColor}})),[]);return(0,O.jsxs)("div",{style:a.container,children:[(0,O.jsxs)("div",{style:a.item,children:[(0,O.jsx)("div",{style:a.title,children:(0,O.jsx)(c.FormattedMessage,{id:"claimAndUpgradeOrderSummary.proratedChanges",defaultMessage:"Prorated charges"})}),(0,O.jsx)("div",{style:a.subtitle,children:(0,O.jsx)(c.FormattedMessage,{id:"claimAndUpgradeOrderSummary.proratedChangesCaption",defaultMessage:"All charges due to claim and upgrade the workspace ({memberCount, plural, one {{memberCount} member} other {{memberCount} members}}).",values:{memberCount:n}})})]}),(0,O.jsx)("div",{style:a.price,children:(0,O.jsx)(me.W,{cost:t,trailingZeroDisplay:"stripIfInteger"})})]})}function fe(){return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(ce.Z,{paragraphs:[{lineHeight:18,lineMargin:4,sectionWidths:[100],repeat:1,sectionMargin:0},{lineHeight:14,lineMargin:4,sectionWidths:[100,40],repeat:1,sectionMargin:-2}]}),(0,O.jsx)("div",{style:{display:"block",height:27}}),(0,O.jsx)(ce.Z,{paragraphs:[{lineHeight:16,lineMargin:1,sectionWidths:[100],repeat:2,sectionMargin:4}]}),(0,O.jsx)(ce.Z,{paragraphs:[{lineHeight:14,lineMargin:0,sectionWidths:[30],repeat:1,sectionMargin:4}]}),(0,O.jsx)(le.Z,{size:14}),(0,O.jsx)(ce.Z,{paragraphs:[{lineHeight:24,lineMargin:4,sectionWidths:[100],repeat:1,sectionMargin:1}]})]})}n(21703),n(757658);var ve=n(11751),be=n(118168),je=n(942402);const Ce=function(e){const t=(n=e.reduceTopMargin,(0,d.yK)((e=>({discountDescription:{alignItems:"center",marginBottom:36,color:e.mediumTextColor,fontSize:12,lineHeight:ne.Z.lineHeight.UISmall.desktop,marginTop:n?-8:void 0}})),[n]));var n;return(0,O.jsx)("div",{style:t.discountDescription,children:(0,O.jsx)(c.FormattedMessage,{id:"spaceSubscriptionSettings.orderOptions.addOnsSection.discountMessage",defaultMessage:"Get an additional <bold>50% off Notion AI</bold> for the next 3 months with a paid plan. <terms>See details.</terms>",values:{bold:e=>(0,O.jsx)("b",{children:e}),terms:e=>(0,O.jsx)(je.Z,{href:(0,pe.UY)("terms.discounts.ai.summer.2023"),children:e})}})})};function Me(){return(0,d.yK)((e=>({discountText:{color:e.invoiceGreen,fontSize:12},icon:{width:16,height:16},mainTextSelected:{fontWeight:ne.Z.fontWeight.medium,color:e.regularTextColor,fontSize:14,lineHeight:"14px"},mainTextUnselected:{color:e.mediumTextColor,fontSize:14,lineHeight:"14px"},priceText:{fontSize:14,color:e.mediumTextColor,marginTop:2},row:{display:"flex",alignItems:"center",justifyContent:"center",gap:4,lineHeight:"14px"},section:{marginBottom:20},sectionHeader:{display:"flex",alignItems:"center",marginBottom:11,fontSize:11,fontWeight:ne.Z.fontWeight.semibold,color:e.mediumTextColor}})),[])}function Ie(e){const{header:t,children:n}=e,a=Me();return(0,O.jsxs)("div",{style:a.section,children:[(0,O.jsx)("div",{style:a.sectionHeader,children:t}),n]})}function Te(e){const{isSelected:t,billingInterval:n}=e,a=Me(),i=t?a.mainTextSelected:a.mainTextUnselected;let r;switch(n){case"month":r=(0,O.jsx)(c.FormattedMessage,{id:"spaceSubscriptionSettings.orderOptions.billingPeriodSection.monthly",defaultMessage:"Monthly"});break;case"year":r=(0,O.jsx)(c.FormattedMessage,{id:"spaceSubscriptionSettings.orderOptions.billingPeriodSection.yearly",defaultMessage:"Yearly"});break;default:throw new Error(`Unsupported billing interval: ${n}`)}return(0,O.jsx)(O.Fragment,{children:(0,O.jsxs)("div",{style:a.row,children:[(0,O.jsx)("div",{style:i,children:r}),"year"===n?(0,O.jsx)("div",{style:a.discountText,children:(0,O.jsx)(c.FormattedMessage,{id:"spaceSubscriptionSettings.orderOptions.billingPeriodSection.yearlyDiscount",defaultMessage:"{percent}% off",values:{percent:20}})}):null]})})}function Ze(e){const{isSelected:t}=e,n=Me(),a=t?n.mainTextSelected:n.mainTextUnselected;return(0,O.jsx)("div",{style:a,children:(0,O.jsx)(c.FormattedMessage,{id:"spaceSubscriptionSettings.orderOptions.addOnsSection.noThanks",defaultMessage:"No thanks"})})}function we(e){const{coupon:t,isSelected:n}=e,a=Me(),i=n?a.mainTextSelected:a.mainTextUnselected;return(0,O.jsx)(O.Fragment,{children:(0,O.jsxs)("div",{style:a.row,children:[(0,ve.t)(a.icon),(0,O.jsx)("div",{style:i,children:(0,O.jsx)(c.FormattedMessage,{id:"spaceSubscriptionSettings.orderOptions.addOnsSection.notionAi",defaultMessage:"Notion AI"})}),t?(0,O.jsx)("div",{style:a.discountText,children:(0,O.jsx)(c.FormattedMessage,{id:"spaceSubscriptionSettings.orderOptions.billingPeriodSection.aiDiscount",defaultMessage:"{percent}% off",values:{percent:50}})}):null]})})}function Be(e){const{subscriptionTier:t,billingInterval:n,addOnFeature:a,canAddAI:o,coupon:s,onChangeBillingInterval:d,onChangeAddOnFeature:l,isTrial:u,modalId:g}=e,m=(0,r.O7)();(0,i.useEffect)((()=>{A.W_(m)}),[m,n,a]);const h=(0,i.useMemo)((()=>[{key:"month",render:()=>(0,O.jsx)(Te,{isSelected:"month"===n,billingInterval:"month",subscriptionTier:t,coupon:s})},{key:"year",render:()=>(0,O.jsx)(Te,{isSelected:"year"===n,billingInterval:"year",subscriptionTier:t,coupon:s})}]),[n,t,s]),x=(0,i.useMemo)((()=>[{key:"none",render:()=>(0,O.jsx)(Ze,{isSelected:!a,coupon:s})},{key:"ai",render:()=>(0,O.jsx)(we,{isSelected:!!a,coupon:s})}]),[a,s]);return u?null:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(Ie,{header:(0,O.jsx)(c.FormattedMessage,{id:"spaceSubscriptionSettings.orderOptions.billingPeriodSection.header",defaultMessage:"Billing period"}),children:(0,O.jsx)(be.Z,{items:h,value:n,onChange:e=>{p.FR(m,{billingInterval:e,modal_id:g}),d(e)}})}),o?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(Ie,{header:(0,O.jsx)(c.FormattedMessage,{id:"spaceSubscriptionSettings.orderOptions.addOnsSection.header",defaultMessage:"Add-ons"}),children:(0,O.jsx)(be.Z,{items:x,value:a??"none",onChange:e=>{const t=[];let n;if("ai"===e)n="ai",t.push("ai");else n=void 0;p.qz(m,{addOnFeatures:t,modal_id:g}),l&&l(n)}})}),s?(0,O.jsx)(Ce,{reduceTopMargin:!0}):null]}):null]})}function Fe(){return(0,d.yK)((e=>({closeButton:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:21,right:20,width:22,height:22,padding:0,borderRadius:"50%",border:"none",background:"light"===e.mode?u.FN.light.gray[75]:u.FN.dark.gray[500],zIndex:10},closeButtonIcon:{width:12,height:12,fill:"light"===e.mode?u.FN.light.gray[400]:u.FN.dark.gray[800]},modal:{background:"dark"===e.mode?"#191919":e.popoverBackground,borderRadius:12,width:750,maxHeight:760,display:"flex"},modalContent:{flex:1,maxWidth:"60%",display:"flex",flexDirection:"column",position:"relative",borderRadius:"12px 0 0 12px"},modalContentBody:{padding:"36px 42px 50px 42px",display:"flex",flexDirection:"column"},modalContentSidebar:{flex:1,maxWidth:"40%",background:"dark"===e.mode?"#202020":e.sidebarSecondaryBackground,borderLeft:`1px solid ${e.lightDividerColor}`,padding:"20px 29px 50px 27px",display:"flex",flexDirection:"column"}})),[])}function Ue(e){const{state:t,data:n,requestingSpaceId:i}=e,{subscriptionTier:r,onlyShowAddOn:o,calculatingTax:d,temporaryBillingInterval:l,taxAmount:c,addOnFeature:u,coupon:p}=t,g=(0,s.VK)((()=>{var e;return(null===(e=t.totalUpgradeCost)||void 0===e?void 0:e.currencyCode)??K.Z.selectedCurrencyCode}),[t]),{payAmount:m}=U.uN({subscriptionTier:r,promo:t.appliedPromo,currencyCode:g,data:n,onlyShowAddOn:o,calculatingTax:d,billingInterval:l??"year",taxAmount:null==c?void 0:c.amount,addOnFeature:u,coupon:p}),h=(0,F.useElementsOptions)({type:"subscription",amount:m.amount,currency:m.currencyCode});return(0,O.jsx)(a.Elements,{stripe:(0,F.getStripe)(),options:h,children:(0,O.jsx)(ke,{state:t,data:n,requestingSpaceId:i})})}function ke(e){const{state:t,data:n,requestingSpaceId:i}=e,o=(0,r.O7)(),d=(0,c.useIntl)(),u=Fe(),m=(0,a.useStripe)(),h=(0,a.useElements)(),y=(0,s.VK)((()=>v.Z.state.online),[]),[f,j,C,M,I,T,Z]=(0,s.VK)((()=>{const e=k.Z.state;return e.open?[e.subscriptionTier,e.temporaryBillingInterval,e.addOnFeature,e.coupon,e.sessionId,e.temporaryAddress.name,e.temporaryAddress.businessName]:[]}),[]);if(!t.open||!f||!j)return null;if(!y)return(0,O.jsx)(q.L,{});const w=R.Lp(t,n);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("div",{style:u.modalContent,children:(0,O.jsx)(x.Z,{type:S.Z.Y,showScrollToBottomIndicator:!0,children:(0,O.jsxs)("div",{style:u.modalContentBody,children:[(0,O.jsx)("div",{style:{paddingBottom:24},children:(0,O.jsx)(de.Q,{subscriptionTier:t.subscriptionTier,onlyShowAddOn:t.onlyShowAddOn,addOnFeature:t.addOnFeature,type:b.U.TargetSpace})}),(0,O.jsx)(Be,{subscriptionTier:f,billingInterval:j,addOnFeature:C,canAddAI:!1,coupon:M,onChangeBillingInterval:e=>{k.Z.update((t=>({...t,temporaryBillingInterval:e}))),p.FR(o,{billingInterval:e,modal_id:I}),async function(e){const{environment:t,spaceId:n,state:a}=e;await _({requestingSpaceId:n,environment:t,state:a}),await A.l_(t)}({environment:o,spaceId:i,state:k.Z.state})}}),(0,O.jsxs)(g.jX,{gap:8,children:[(0,O.jsx)(N.g,{title:(0,O.jsx)(c.FormattedMessage,{id:"checkoutPaymentField.paymentDetails.title",defaultMessage:"Payment details"}),name:T??"",onChangeName:e=>{k.Z.update((t=>t.open?{...t,temporaryAddress:{...t.temporaryAddress,name:e}}:t))},businessName:Z??"",onChangeBusinessName:e=>k.Z.update((t=>t.open?{...t,temporaryAddress:{...t.temporaryAddress,businessName:e}}:t)),modalId:I}),(0,O.jsx)(H.n,{hideTitle:!0})]})]})})}),(0,O.jsx)("div",{style:u.modalContentSidebar,children:(0,O.jsxs)(x.Z,{type:S.Z.Y,children:[(0,O.jsx)(xe,{state:t}),(0,O.jsx)(se,{state:t,products:w,onClickUpgrade:()=>L({environment:o,intl:d,state:t,stripe:m,elements:h,data:n,requestingSpaceId:i})})]})}),(0,O.jsx)("button",{style:u.closeButton,onClick:()=>{k.Z.close()},children:(0,l.U)(u.closeButtonIcon)})]})}const Ae=function(e){const{data:t,spaceStore:n}=e,a=(0,s.VK)((()=>k.Z.state),[]),i=(0,r.O7)(),d=(0,c.useIntl)(),l=Fe();return(0,o.Z)((()=>{var e;const{state:n}=k.Z;if(!n.open)return;const a=null===(e=f.default.state.currentSpaceStore)||void 0===e?void 0:e.id;a&&_({environment:i,state:n,requestingSpaceId:a});const{currentUserStore:r}=f.default.state,o=null!=r&&r.isDefined()?r.getModel():void 0;if(o){const e=o.getDisplayName(d);var s;if(k.Z.setState({...n,temporaryAddress:{...n.temporaryAddress,name:e}}),"subscribed_admin"===t.type||"unsubscribed_admin"===t.type)k.Z.setState({...n,appliedPromo:null===(s=t.customerData)||void 0===s?void 0:s.stripe.promo})}})),(0,O.jsx)(h.Z,{ariaLabelledBy:y.BaY,ariaDescribedBy:y.qr0,open:a.open,preventHideChildrenWhileOpening:!0,innerStyle:l.modal,render:()=>(0,O.jsx)(m.Z,{capture:!0,allowEsc:!0,render:()=>a.open?(0,O.jsx)(Ue,{state:a,data:t,requestingSpaceId:n.id}):null})})}},697710:(e,t,n)=>{n.d(t,{L:()=>s});n(667294);var a=n(709291),i=n(164369),r=n(427386),o=n(785893);function s(){return(0,o.jsx)(r.ZP,{children:(0,o.jsx)(i.Z,{isSmall:!0,style:{textAlign:"center"},children:(0,o.jsx)(a.FormattedMessage,{id:"spaceSubscriptionPlans.offlineMessage",defaultMessage:"Please go online to manage your plan."})})})}},961736:(e,t,n)=>{n.d(t,{n:()=>r});n(667294);var a=n(745238),i=n(785893);const r=(0,a.IU)("chat",{viewBox:"0 0 32 32",svg:(0,i.jsx)("path",{d:"M7.52 28.727c.591 0 .993-.205 1.706-.842l3.732-3.41c.802.898 2.017 1.375 3.566 1.375h3.844l3.721 3.252c.68.591 1.048.898 1.582.898.77 0 1.204-.557 1.204-1.421V25.85h.468c2.796 0 4.657-1.716 4.657-4.695v-6.719c0-2.978-1.86-4.695-4.657-4.695h-1.75v-.864C25.593 5.785 23.8 4 20.77 4H4.825C1.916 4 0 5.785 0 8.877v10.47c0 3.093 1.916 4.878 4.825 4.878h1.47v3.103c0 .876.435 1.399 1.226 1.399zm.458-5.264c0-.648-.38-.955-.87-.955H4.937c-1.972 0-3.142-1.091-3.142-3.217V8.934c0-2.115 1.17-3.229 3.142-3.229h15.721c1.973 0 3.142 1.114 3.142 3.229v.807h-7.275c-2.92 0-4.647 1.717-4.647 4.695v6.72c0 .613.067 1.17.212 1.682l-4.111 3.865v-3.24zm17.225 4.48l-3.576-3.275c-.446-.398-.713-.523-1.326-.523h-3.666c-1.86 0-2.975-1.034-2.975-3.047l.011-6.605c0-2 1.103-3.047 2.964-3.047h10.607c1.85 0 2.964 1.046 2.964 3.047v6.605c0 2.013-1.114 3.047-2.964 3.047h-1.18c-.48 0-.859.284-.859.932v2.865z"})})},213148:(e,t,n)=>{n.d(t,{U:()=>r});n(667294);var a=n(745238),i=n(785893);const r=(0,a.IU)("close",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M2.89795 13.3428C3.18799 13.6262 3.6626 13.6262 3.93945 13.3494L7.99341 9.29541L12.0474 13.3494C12.3308 13.6262 12.8054 13.6328 13.0889 13.3428C13.3723 13.0593 13.3723 12.5847 13.0955 12.3079L9.0415 8.24731L13.0955 4.19336C13.3723 3.9165 13.3789 3.4353 13.0889 3.15845C12.7988 2.875 12.3308 2.875 12.0474 3.15186L7.99341 7.20581L3.93945 3.15186C3.6626 2.875 3.1814 2.86841 2.89795 3.15186C2.6145 3.44189 2.62109 3.9231 2.89795 4.19336L6.9519 8.24731L2.89795 12.3079C2.62109 12.5781 2.6145 13.0659 2.89795 13.3428Z"})})},750063:(e,t,n)=>{n.d(t,{X:()=>r});n(667294);var a=n(745238),i=n(785893);const r=(0,a.IU)("verificationCheck",{viewBox:"0 0 6 7",svg:(0,i.jsx)("path",{d:"M2.84245 6.11619C2.71116 6.30644 2.53392 6.40156 2.31072 6.40156C2.20131 6.40156 2.10066 6.37881 2.00875 6.33332C1.92123 6.28782 1.83589 6.21545 1.75274 6.11619L0.150985 4.25515C0.0503282 4.12694 0 3.99874 0 3.87053C0 3.73406 0.04814 3.61826 0.14442 3.52314C0.245077 3.42388 0.365427 3.37425 0.50547 3.37425C0.597374 3.37425 0.680525 3.39286 0.754923 3.43008C0.833698 3.46317 0.912473 3.52934 0.991247 3.6286L2.28446 5.21049L5.00875 1.07896C5.13129 0.892857 5.28446 0.799805 5.46827 0.799805C5.60394 0.799805 5.72648 0.841161 5.83589 0.923874C5.9453 1.00659 6 1.11618 6 1.25266C6 1.32297 5.98249 1.39327 5.94748 1.46358C5.91685 1.52975 5.88184 1.59178 5.84245 1.64968L2.84245 6.11619Z"})})}}]);