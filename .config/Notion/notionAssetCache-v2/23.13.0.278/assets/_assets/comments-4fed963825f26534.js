"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[58324],{783935:(e,t,o)=>{o.r(t),o.d(t,{Comment:()=>Eo,CommentFileBlock:()=>Co,Discussion:()=>gi,DiscussionIndicator:()=>fi.Z,DiscussionInput:()=>Po,DiscussionReactionBar:()=>rt,MarginCommentsSection:()=>Oi,NewDiscussionMenu:()=>rn,ReactionBar:()=>at,ReplyDiscussionMenu:()=>dn,SuggestionContext:()=>ui,discussionHelpers:()=>ne,discussionViewActions:()=>i,reactionActions:()=>$e});var i={};o.r(i),o.d(i,{isCommentUnread:()=>Go});var n=o(667294),s=o(701302),r=o(800480),a=o(706740),l=o(797511),d=o(533125),c=o(886628),u=o(724405),m=o(959194),p=o(569651),g=o(743590),h=o(772141),f=o(421202),x=o(76233),v=o(709291),S=o(137810),b=o(554564),y=o(547307),C=o(761045),j=o(137231),w=o(898104),k=o(210228),M=o(174136),L=o(526388),I=o(164369),R=o(942402),B=o(167706),D=o(365085),T=o(212740),Z=o(965187),F=o(311368),A=o(304708),V=o(165598),K=o(816402),P=o(60217),E=o(989574),z=o(825464),U=o(61766),N=o(319385),_=o(896049),W=o(206258),H=o(617707),O=o(95306);const $=8,G=10,X=8,q=24,Y=6,J=1.5,Q=(q-J)/2,ee=q+Y,te=`calc(100% + ${X+($-Y)-ee}px)`,oe=q+8;function ie(e){return"margin_comments"===e?12:"comment_unfurl"===e?14:16}var ne=o(155408),se=o(182994),re=(o(757658),o(815145)),ae=o(541432),le=o(37652),de=o(213148),ce=o(356666),ue=o(727714),me=o(725651),pe=o(740350),ge=o(418101),he=o(745238),fe=o(785893);const xe=(0,he.IU)("resolve",{viewBox:"0 0 16 16",svg:(0,fe.jsx)(fe.Fragment,{children:(0,fe.jsx)("path",{d:"M6.6123 14.2646C7.07715 14.2646 7.43945 14.0869 7.68555 13.7109L14.0566 3.96973C14.2344 3.69629 14.3096 3.44336 14.3096 3.2041C14.3096 2.56152 13.8311 2.09668 13.1748 2.09668C12.7236 2.09668 12.4434 2.26074 12.1699 2.69141L6.57812 11.5098L3.74121 7.98926C3.48828 7.68848 3.21484 7.55176 2.83203 7.55176C2.16895 7.55176 1.69043 8.02344 1.69043 8.66602C1.69043 8.95312 1.7793 9.20605 2.02539 9.48633L5.55273 13.7588C5.84668 14.1074 6.1748 14.2646 6.6123 14.2646Z"})})});var ve=o(698519),Se=o(937612),be=o(519889),ye=o(653965),Ce=o(401898),je=o(800893),we=o(552275),ke=o(231945),Me=o(573063),Le=o(478140),Ie=o(632163),Re=o(672495),Be=o(483182),De=o(95477),Te=o(843250),Ze=o(460709),Fe=o(798165),Ae=o(918514),Ve=o(80444),Ke=o(601600),Pe=o(973935),Ee=o(870279),ze=o(933709),Ue=o(531701),Ne=o(627153),_e=o(623063),We=o(164921),He=o(711059),Oe=o(938530),$e=o(521899),Ge=o(828992),Xe=o(66957),qe=o(370345),Ye=o(370775);function Je(e){let{reactionStores:t,initialIndex:o}=e;const[i,s]=n.useState(o),r=(0,v.useIntl)(),a=(0,c.VK)((()=>t.map((e=>e.getIcon()))),[t]),l=(0,c.VK)((()=>t[i].getActorStores().map((e=>({id:e.id,store:e,name:e.getDisplayName(r)}))).filter(Ce.$K)),[t,i,r]);return(0,fe.jsxs)(Le.Z,{menuType:Ze.og.ActionSheet,children:[(0,fe.jsx)(Xe.Z,{tabStyle:{flex:1,justifyContent:"center",display:"flex",minWidth:60},tabs:a,selectedIndex:i,onChange:e=>s(e)}),l.map((e=>(0,fe.jsx)(Ge.Z,{title:e.name,dontShrinkIcon:!0,icon:(0,fe.jsx)(Ye.S,{authorStore:e.store,avatarSize:20,avatarStyle:{width:20,height:20},placeholderStyle:{width:20,height:20}})},e.id)))]})}function Qe(e){const t=(0,r.Fy)(),o=(0,c.VK)((()=>W.bh.getUserVisibleReactions(e.store)),[e.store]),i=(0,n.useRef)(null),s=(0,qe.Z)({onLongPress:()=>{var e;return null===(e=i.current)||void 0===e?void 0:e.setOpen(!0)}});if(!t.isMobile)return(0,fe.jsx)(fe.Fragment,{children:e.children});const a=o.findIndex((t=>!e.reactionStore||t===e.reactionStore))??0;return(0,fe.jsx)(ke.ZP,{ref:i,renderOrigin:()=>(0,fe.jsx)("div",{...s,children:e.children}),popupType:t.isTablet?ke.Z4.Popup:ke.Z4.SlideUp,render:()=>(0,fe.jsx)(Je,{initialIndex:a,reactionStores:o})},e.store.id)}function et(){const{isMobile:e}=(0,r.Fy)();return(0,u.yK)((t=>({reaction:{display:"flex",margin:"1px",padding:"1px 6px 1px 6px",justifyContent:"center",gap:"4px",border:`1px solid ${t.regularDividerColor}`,borderRadius:"100px",fontSize:14,lineHeight:"20px",fontVariantNumeric:"tabular-nums",background:t.whiteButtonBackground},count:{color:t.mediumTextColor,fontSize:e?S.Z.fontSize.UISmall.mobile:S.Z.fontSize.UISmall.desktop,lineHeight:"20px"},countReacted:{color:t.blueColor},reacted:{background:Ue.ZP.blueWithAlpha(.08),border:`1px solid ${t.filterPillBorder}`,fontWeight:500},reactedHover:{background:Ue.ZP.blueWithAlpha(.18)},emojiStyle:{color:"black",display:"inline-block"},reactionIcon:{width:15,height:20,marginTop:.5,marginLeft:.5,fill:t.mediumIconColor},dropShadow:{boxShadow:t.marginDiscussionSelectedShadow}})),[e])}function tt(e){let{store:t,disabled:o,onClick:i,dropShadow:n}=e;const s=(0,c.VK)((()=>t.getActors()),[t]),a=(0,c.VK)((()=>t.getIcon()),[t]),l=et(),{currentUser:d}=(0,r.O7)();if(!s||!a)return null;if(0===s.length)return null;const u=s.some((e=>e.id===d.id)),m={...l.reaction,...u&&l.reacted,...n&&l.dropShadow},p={...l.count,...u&&l.countReacted};return(0,fe.jsx)(L.Z,{textWrap:!0,style:{maxWidth:350,width:"max-content"},placement:z.u.Bottom,delayThreshold:300,renderTooltip:()=>(0,fe.jsx)(ot,{store:t,icon:a}),render:e=>(0,fe.jsxs)(We.Z,{disabled:o,style:m,hoveredStyle:u?l.reactedHover:void 0,onClick:i,...e,children:[(0,fe.jsx)("span",{style:l.emojiStyle,children:(0,fe.jsx)(He.Z,{size:14,char:a})}),(0,fe.jsx)("span",{style:p,children:s.length})]})})}function ot(e){let{store:t,icon:o}=e;const i=(0,u.yK)((e=>({text:{color:e.mediumInvertedTextColor}})),[]),n=(0,v.useIntl)(),s=(0,c.VK)((()=>t.getActorStores()),[t]),r=(0,c.VK)((()=>s.map((e=>e.getDisplayName(n))).filter(Ce.$K)),[s,n]);return r.length>5?(0,fe.jsx)(v.FormattedMessage,{defaultMessage:"{additionalNames, plural, one {{names} and {additionalNames} other <medium>reacted with</medium> {icon}} other {{names} and {additionalNames} others <medium>reacted with</medium> {icon}}}",id:"ReactionBar.hoverTooltip.textAbbreviated",values:{additionalNames:r.length-5,names:r.slice(0,5).join(", "),medium:e=>(0,fe.jsx)("span",{style:i.text,children:e}),icon:(0,fe.jsx)(He.Z,{size:14,char:o})}}):(0,fe.jsx)(v.FormattedMessage,{defaultMessage:"{numberOfNames, plural, one {{nameOrNames} <medium>reacted with</medium> {icon}} other {{nameOrNames} <medium>reacted with</medium> {icon}}}",id:"ReactionBar.hoverTooltip.text",values:{numberOfNames:r.length,nameOrNames:r.join(", "),medium:e=>(0,fe.jsx)("span",{style:i.text,children:e}),icon:(0,fe.jsx)(He.Z,{size:14,char:o})}})}function it(e){const{store:t,discussionLocation:o,onEmojiSelection:i,style:s}=e,a=(0,r.O7)(),l=(0,n.useRef)(null),d=(0,r.Fy)(),c=(0,u.yK)((e=>({container:{padding:2,display:"flex",boxShadow:e.lightBoxShadow,backgroundColor:e.buttonGroupBackground,borderRadius:d.isMobile?3:4,...s},addIcon:{width:15,fill:e.mediumIconColor},iconButton:{height:22,width:22,flex:"0 0 auto"}})),[d.isMobile,s]),m=(0,v.useIntl)();return(0,fe.jsx)("div",{style:c.container,children:(0,fe.jsx)(Me.Z,{hasBackground:!0,ariaLabel:m.formatMessage({defaultMessage:"Add reaction",id:"ReactionBar.newReaction.ariaLabel"}),showShadow:!1,icon:()=>(0,pe.V)(c.addIcon),style:c.iconButton,ref:l,onClick:()=>st(a,m,t,null==l?void 0:l.current,o,i)})})}function nt(e){let{store:t,discussionLocation:o,onEmojiSelection:i}=e;const s=(0,r.O7)(),a=(0,n.useRef)(null),l=et(),d=(0,v.useIntl)();return(0,fe.jsx)(We.Z,{style:{...l.reaction,minWidth:"2em"},ref:a,onClick:()=>st(s,d,t,null==a?void 0:a.current,o,i),children:(0,pe.V)(l.reactionIcon)})}function st(e,t,o,i,n,s){const r=Pe.findDOMNode(i);if(!r)return;if(!(r instanceof Element))return;const a=r.getBoundingClientRect();Ne.$(e,{originGap:4,originRect:a,popupWidth:Oe.FZ,popupHeight:Oe.kX,isSmallWidth:!1,title:t.formatMessage({defaultMessage:"Reaction",id:"ReactionBar.emojiModalMenu.title"}),currentTab:"emoji",tabs:[{type:"emoji",title:(0,fe.jsx)(v.FormattedMessage,{defaultMessage:"Emojis",id:"recordIcon.emojiTab.title"}),hideRandomButton:!0,onChange:(t,i)=>{s&&s(),k.createAndCommit({environment:e,userAction:"Comment.toggleReactionFromMenu",perform:s=>{$e.toggleReaction({environment:e,transaction:s,store:o,icon:t,discussionLocation:n}),i&&i.keepVisible||Ne.Z()}})}}]})}function rt(e){const{parentStore:t,discussionLocation:o,onReact:i}=e,s=et(),a=e=>{k.createAndCommit({userAction:"Discussion.handleResolve",environment:m,perform:e=>{H.DX({environment:m,discussionStore:t,transaction:e,discussionLocation:o})}}),b.Xv(),null==e||e.stopPropagation()},l=(0,c.VK)((()=>t.canComment()),[t]),d=(0,c.VK)((()=>t.canEdit()),[t]),m=(0,r.O7)(),p=(0,n.useRef)(null),g=(0,n.useRef)(null),h=(0,v.useIntl)(),[f,x]=(0,n.useState)(!1),S=f||e.focused,y=(0,c.VK)((()=>W.bh.getUserVisibleReactions(t)),[t]),C=e=>()=>{e.isDefined()&&(null==i||i(),k.createAndCommit({environment:m,userAction:"Comment.toggleReaction",perform:i=>{const n=1===y.length&&1===e.getActors().length&&e.getActors()[0].id===m.currentUser.id;$e.toggleReaction({environment:m,transaction:i,store:t,icon:e.getIcon(),discussionLocation:o}),n&&H.DX({environment:m,discussionStore:t,transaction:i,discussionLocation:o})}}))},j=()=>{st(m,h,t,null==p?void 0:p.current,o,i)},w=(0,u.yK)((e=>({actionButtonStyle:{minWidth:"1.8em",height:"1.5em",borderRadius:".75em",justifyContent:"center",alignItems:"center",display:"flex"}})),[]);return(0,fe.jsx)("div",{onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),style:{gap:"4px",marginTop:"12px",transform:"scale(1.2)",transformOrigin:"left",display:"flex",flexWrap:"wrap"},children:y.map(((o,i)=>(0,fe.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:2},children:[(0,fe.jsx)(Qe,{reactionStore:o,store:t,children:(0,fe.jsx)(tt,{dropShadow:e.focused,disabled:!l,store:o,onClick:C(o)})}),i===y.length-1&&(0,fe.jsx)(_e.Z,{isVisible:!0,animationStyle:{opacity:S?1:0,marginLeft:2},render:()=>(0,fe.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[l&&(0,fe.jsx)(Qe,{store:t,children:(0,fe.jsx)(We.Z,{style:w.actionButtonStyle,ref:p,onClick:j,children:(0,pe.V)(s.reactionIcon)})}),d&&(0,fe.jsx)(We.Z,{style:w.actionButtonStyle,ref:g,onClick:a,children:xe(s.reactionIcon)})]})})]},o.id)))})}const at=function(e){const{parentStore:t,discussionLocation:o,onReactionToggle:i,newReactionStyle:n}=e,s=(0,c.VK)((()=>t.canComment()),[t]),a=(0,c.VK)((()=>W.bh.getUserVisibleReactions(t)),[t]),l=(0,r.O7)(),d=(0,c.VK)((()=>N.default.checkGate({gateName:"prevent_edits_trash"})),[]),u=(0,c.VK)((()=>{if(t.table===Ee.x_){const e=t.getParentBlockStore();return Boolean(e&&e.pathIsDead())}if(t.table===ze.qF){const e=t.getParentStore();return Boolean(e&&e.pathIsDead())}return!1}),[t]),m=s&&!(d&&u)&&a.length>0,p=s&&!(d&&u)&&0===a.length;return(0,fe.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"4px"},children:[a.map((e=>(0,fe.jsx)(Qe,{reactionStore:e,store:t,children:(0,fe.jsx)(tt,{disabled:!s||d&&u,store:e,onClick:()=>{if(e.isDefined()){const n=k.createAndCommit({environment:l,userAction:"Comment.toggleReaction",perform:i=>$e.toggleReaction({environment:l,transaction:i,store:t,icon:e.getIcon(),discussionLocation:o})});void 0!==n.performResult&&i&&i(n.performResult)}}})},e.id))),m&&(0,fe.jsx)(Qe,{store:t,children:(0,fe.jsx)(nt,{store:t,discussionLocation:o,onEmojiSelection:void 0!==i?()=>i("Added"):void 0})}),p&&(0,fe.jsx)(it,{store:t,discussionLocation:o,onEmojiSelection:void 0!==i?()=>i("Added"):void 0,style:n})]})},lt=xe,dt=de.U,ct=(0,v.defineMessages)({addReaction:{id:"comment.actions.addReaction.label",defaultMessage:"Add reaction"},acceptButton:{id:"comment.actions.acceptButton.label",defaultMessage:"Accept"},rejectButton:{id:"comment.actions.rejectButton.label",defaultMessage:"Reject"},moreActions:{id:"comment.actions.moreActions.label",defaultMessage:"More actions"},reopenButton:{id:"comment.actions.reopenButton.label",defaultMessage:"Re-open"},resolveButton:{id:"comment.actions.resolveButton.label",defaultMessage:"Resolve"}});function ut(e){const{discussionLocation:t}=e,o=(0,v.useIntl)(),i=(0,r.O7)(),s=i.device,a=(0,n.useRef)(null),d=(0,l.l)(),u=(0,c.VK)((()=>Boolean(e.discussionStore.getResolved())),[e.discussionStore]),m=(0,c.VK)((()=>e.store.isDefined()),[e.store]),p=(0,c.VK)((()=>{var e;return null===(e=Ve.default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),g=(0,c.VK)((()=>{const t=e.store.getCreatedById();return e.store.getCreatedByTable()===be.KJ&&p===t}),[p,e.store]),f=(0,c.VK)((()=>{var e;const t=null===(e=Ve.default.state.currentSpaceStore)||void 0===e?void 0:e.getRole();return t&&h.zz(t)}),[]),x=(0,c.VK)((()=>e.blockStore.getRole()),[e.blockStore]),S=(0,c.VK)((()=>{var e;return null==d||null===(e=d.publicEditModeStore.state)||void 0===e?void 0:e.permission}),[null==d?void 0:d.publicEditModeStore]),{isFirstCommentOfSuggestionDiscussion:y,disableAccept:C}=(0,c.VK)((()=>{var t;const o="suggestion"===e.discussionStore.getType()&&e.discussionStore.getCommentPointers()[0].id===e.store.id,i=(null===(t=e.blockStore.getNavigableBlockStore({skipCurrent:!0}))||void 0===t?void 0:t.canEdit())??!1;return{isFirstCommentOfSuggestionDiscussion:o,disableAccept:o&&!i}}),[e.discussionStore,e.blockStore,e.store]),j=(0,c.VK)((()=>e.blockStore.pathIsDead()),[e.blockStore]),w=(0,c.VK)((()=>N.default.checkGate({gateName:"prevent_edits_trash"})),[]),M="comment_only"===x||"comment"===S;if(!m||!p)return null;const L=()=>{k.createAndCommit({userAction:"Comment.handleReopen",environment:i,perform:t=>{H.bh({environment:i,commentStore:e.store,discussionStore:e.discussionStore,transaction:t,discussionLocation:e.discussionLocation})}})},I=t=>{k.createAndCommit({userAction:"Comment.handleResolve",environment:i,perform:t=>{H.DX({environment:i,commentStore:e.store,discussionStore:e.discussionStore,transaction:t,discussionLocation:e.discussionLocation})}}),b.Xv(),null==t||t.stopPropagation()},R=()=>{k.createAndCommit({userAction:"Suggestion.handleAccept",environment:i,perform:t=>{Ke.Yo({action:"accept",environment:i,commentStore:e.store,discussionStore:e.discussionStore,transaction:t,discussionLocation:e.discussionLocation,currentPageStore:Fe.fM(e.discussionStore)})}}),b.Xv()},B=()=>{k.createAndCommit({userAction:"Suggestion.handleReject",environment:i,perform:t=>{Ke.Yo({action:"reject",environment:i,commentStore:e.store,discussionStore:e.discussionStore,transaction:t,discussionLocation:e.discussionLocation,currentPageStore:Fe.fM(e.discussionStore)})}}),b.Xv()},D=()=>{var t,o;const n=e.store.getParentStore();if(!n||null==n||!n.isDefined())return null;let s=n.getParentStore();if(null===(t=s)||void 0===t||!t.isDefined())return null;var r;s.getType()===ae.Ti.tableRow&&(s=null===(r=s)||void 0===r?void 0:r.getParentBlockStore());if(null===(o=s)||void 0===o||!o.isDefined())return null;const a=s.getModel().getRenderUrl({baseUrl:De.default.domainBaseUrl,getRecordModel:e.store.getRecordModel,discussionId:n.id,pageVisitSource:re.tY.CopyLink});je.RD({environment:i,stringValue:a,copiedMessage:je.tq.copiedLinkToClipboard})};if(!i.currentUser.isLoggedIn())return null;const T=x&&h.rz(x)||w&&j;if(T)return null;const Z=e.isFirstComment&&"comment_unfurl"!==t&&!s.isMobile&&!M&&!T,F=[];!s.isMobile||M||T||(u?F.push("reopen"):F.push("resolve")),!y&&g&&F.push("edit"),e.isFirstComment&&F.push("copyLink"),y||!g&&!f||F.push("delete");const A=F.length>0;return A||Z||e.canShowReactions?(0,fe.jsx)(ke.ZP,{ref:a,popupType:s.isMobile?ke.Z4.SlideUp:ke.Z4.Popup,buttonPopupStore:e.buttonPopupStore,placementToOrigin:ke.pO.Right,stopClickPropagation:!0,renderOrigin:n=>(0,fe.jsx)(gt,{buttonConfig:{resolve:{visible:Z&&!y,resolved:u,onResolve:I,onReopen:L},react:{visible:e.canShowReactions,onReact:()=>{var n;st(i,o,e.store,(null===(n=a.current)||void 0===n?void 0:n.getAnchor())??null,t,e.handleReaction)}},accept:{visible:y&&!C&&!u,onAccept:R},reject:{visible:y&&!u,onReject:B},moreActions:{visible:A}},visible:e.visible,buttonPopupEvents:n,discussionLocation:e.discussionLocation,store:e.store}),render:t=>{let o;o=s.isMobile?{menuType:Ze.og.ActionSheet}:{menuType:Ze.og.Popup};const i=F.map((t=>"reopen"===t?{key:"reopen",render:e=>(0,fe.jsx)(we.Z,{...e,icon:(0,le.V)({height:16,width:16}),title:(0,fe.jsx)(v.FormattedMessage,{id:"comment.reopenDiscussion.button",defaultMessage:"Re-open discussion"})}),action:L}:"resolve"===t?{key:"resolve",render:e=>(0,fe.jsx)(we.Z,{...e,icon:(0,ve.k)({height:16,width:16}),title:(0,fe.jsx)(v.FormattedMessage,{id:"comment.resolveDiscussion.button",defaultMessage:"Resolve comments"})}),action:()=>I()}:"edit"===t?{key:"edit",render:e=>(0,fe.jsx)(we.Z,{...e,icon:(0,me.R)({height:16,width:16}),title:(0,fe.jsx)(v.FormattedMessage,{id:"comment.editComment.button",defaultMessage:"Edit comment"})}),action:e.handleEditComment}:"delete"===t?{key:"delete",render:e=>(0,fe.jsx)(we.Z,{...e,icon:(0,Se.y)({height:16,width:16}),title:(0,fe.jsx)(v.FormattedMessage,{id:"comment.deleteComment.button",defaultMessage:"Delete comment"})}),action:e.handleDeleteComment}:"copyLink"===t?{key:"copyLink",render:e=>(0,fe.jsx)(we.Z,{...e,icon:(0,ue.N)({height:16,width:16}),title:(0,fe.jsx)(v.FormattedMessage,{id:"comment.copyLinkToDiscussion.button",defaultMessage:"Copy link to discussion"})}),action:D}:void(0,Ce.t1)(t)));return(0,fe.jsx)("div",{className:Te.G6g,children:(0,fe.jsxs)(Le.Z,{...o,children:[(0,fe.jsx)(Ie.Z,{type:Ie.i.Vertical,initialFocus:void 0,onAccept:t.close,sections:ye.oA([i.length&&{key:0,render:e=>(0,fe.jsx)(Re.Z,{...e}),items:i}])}),!s.isMobile&&(0,fe.jsx)(Re.Z,{topBorder:!0,disableDesktopPadding:!1,children:(0,fe.jsx)(Be.Z,{title:(0,fe.jsx)(v.FormattedMessage,{defaultMessage:"Learn about comments",id:"comments.learn"}),href:(0,Ae.UY)("guides.comments"),analyticsFrom:"comments"})})]})})}}):null}function mt(e){return"accept"in e}function pt(e){return"resolve"in e}function gt(e){const{buttonPopupEvents:t,discussionLocation:o,buttonConfig:i}=e,n=(0,r.O7)().device,s=(0,v.useIntl)(),a=(0,u.yK)((t=>({addIcon:{width:15,fill:t.mediumIconColor},container:{display:"flex",boxShadow:t.lightBoxShadow,position:"absolute",flexShrink:0,padding:"2px",backgroundColor:t.buttonGroupBackground,...n.isMobile?{borderRadius:4,marginTop:4}:{marginRight:"margin_comments"===o?0:8,marginTop:"updates_sidebar"===e.discussionLocation?6:0,opacity:e.visible?1:0,gap:1,borderRadius:4,transition:"opacity 100ms ease-out",zIndex:1},top:0,right:0}})),[n.isMobile,o,e.discussionLocation,e.visible]);return(0,fe.jsxs)("div",{style:a.container,children:[mt(i)&&i.accept.visible&&(0,fe.jsx)(L.Z,{renderTooltip:()=>(0,fe.jsx)(v.FormattedMessage,{...ct.acceptButton}),render:e=>(0,fe.jsx)(Me.Z,{hasBackground:!1,showShadow:!1,icon:lt,onClick:i.accept.onAccept,style:{height:22,width:22,flex:"0 0 auto"},ariaLabel:s.formatMessage(ct.acceptButton),...e})}),mt(i)&&i.reject.visible&&(0,fe.jsx)(L.Z,{renderTooltip:()=>(0,fe.jsx)(v.FormattedMessage,{...ct.rejectButton}),render:e=>(0,fe.jsx)(Me.Z,{hasBackground:!1,showShadow:!1,icon:dt,onClick:i.reject.onReject,style:{height:22,width:22,flex:"0 0 auto"},ariaLabel:s.formatMessage(ct.rejectButton),...e})}),i.react.visible&&(0,fe.jsx)(L.Z,{renderTooltip:()=>(0,fe.jsx)(v.FormattedMessage,{...ct.addReaction}),render:e=>(0,fe.jsx)(Me.Z,{ariaLabel:s.formatMessage(ct.addReaction),hasBackground:!1,showShadow:!1,icon:()=>(0,pe.V)(a.addIcon),onClick:i.react.onReact,style:{height:22,width:22,flex:"0 0 auto"},...e})}),pt(i)&&i.resolve.visible&&(0,fe.jsx)(L.Z,{renderTooltip:()=>(0,fe.jsx)(v.FormattedMessage,{...i.resolve.resolved?ct.reopenButton:ct.resolveButton}),render:e=>(0,fe.jsx)(Me.Z,{hasBackground:!1,showShadow:!1,icon:i.resolve.resolved?ge.b:xe,onClick:i.resolve.resolved?i.resolve.onReopen:i.resolve.onResolve,style:{height:22,width:22,flex:"0 0 auto"},...e,ariaLabel:s.formatMessage(i.resolve.resolved?ct.reopenButton:ct.resolveButton)})}),i.moreActions.visible&&(0,fe.jsx)(L.Z,{renderTooltip:()=>(0,fe.jsx)(v.FormattedMessage,{...ct.moreActions}),render:e=>(0,fe.jsx)(Me.Z,{...t,...e,hasBackground:!1,showShadow:!1,icon:ce.o,style:{height:22,width:22,flex:"0 0 auto"},ariaLabel:s.formatMessage(ct.moreActions)})})]})}var ht=o(895538),ft=o(631781),xt=o(427016),vt=o(27411),St=o(369721),bt=o(31505),yt=o(239301),Ct=o(953336),jt=o(973744),wt=o(434859),kt=o(745589);const Mt=.8,Lt=(0,v.defineMessages)({scrollLeftButtonAriaLabel:{defaultMessage:"Scroll left",id:"FilmStrip.scrollLeftButtonAriaLabel"},scrollRightButtonAriaLabel:{defaultMessage:"Scroll right",id:"FilmStrip.scrollRightButtonAriaLabel"}});function It(e){let{children:t,shouldShowGrayFog:o}=e;const i=(0,v.useIntl)(),s=(0,n.useRef)(null),r=(0,c.qz)(void 0,kt.Z),{scrollLeft:a,scrollWidth:l,clientWidth:d}=(0,c.VK)((()=>{const{scrollLeft:e,scrollWidth:t,clientWidth:o}=r.state;return{scrollLeft:e,scrollWidth:t,clientWidth:o}}),[r]),m=(0,n.useCallback)((()=>{var e;null===(e=s.current)||void 0===e||e.getClientRect()}),[]);(0,n.useEffect)((()=>(jt.lj(window,"resize",m),()=>{jt.ZV(window,"resize",m)})),[m]),(0,n.useEffect)((()=>{m()}),[m]);const p=(0,n.useMemo)((()=>Math.floor(a)>0),[a]),g=(0,n.useMemo)((()=>Math.ceil(a+d)<l),[a,l,d]),h=(0,n.useCallback)((e=>{var t;e.stopPropagation(),null===(t=s.current)||void 0===t||t.scrollByOffset(0,-Mt*d,{animate:!0})}),[d]),f=(0,n.useCallback)((e=>{var t;e.stopPropagation(),null===(t=s.current)||void 0===t||t.scrollByOffset(0,Mt*d,{animate:!0})}),[d]),x=(0,u.yK)((e=>({scrollerWrapper:{display:"flex",position:"relative"},scroller:{overflow:"auto",display:"flex",gap:4,paddingTop:6,marginTop:-6,paddingRight:4},commonArrowStyles:{position:"absolute",borderRadius:12,width:24,height:24,background:e.tint.regular,top:12,boxShadow:"none"},iconHoveredStyle:{background:e.tint.regular},leftArrowStyle:{left:0},rightArrowStyle:{right:4},arrowIconStyle:{height:12,fill:e.icon.secondary},leftArrowContainer:{position:"absolute",height:"100%",width:30,background:`linear-gradient(to right, ${o?e.hoveredMarginDiscussionBackground:e.selectedMarginDiscussionBackground} 0px, ${e.contentBackgroundTransparent} 30px`},rightArrowContainer:{position:"absolute",height:"100%",width:30,right:0,background:`linear-gradient(to left, ${o?e.hoveredMarginDiscussionBackground:e.selectedMarginDiscussionBackground} 0px, ${e.contentBackgroundTransparent} 30px`}})),[o]);return(0,fe.jsxs)("div",{style:x.scrollerWrapper,children:[(0,fe.jsx)(Ct.Z,{ref:s,type:wt.Z.X,store:r,onScroll:m,style:x.scroller,zIndex:0,children:t}),p&&(0,fe.jsx)("div",{style:x.leftArrowContainer,children:(0,fe.jsx)(Me.Z,{icon:bt.Y,hovered:!1,showShadow:!0,onClick:h,ariaLabel:i.formatMessage(Lt.scrollLeftButtonAriaLabel),style:{...x.commonArrowStyles,...x.leftArrowStyle},iconStyle:x.arrowIconStyle,hoveredStyle:x.iconHoveredStyle})}),g&&(0,fe.jsx)("div",{style:x.rightArrowContainer,children:(0,fe.jsx)(Me.Z,{icon:yt.n,hovered:!1,showShadow:!0,onClick:f,ariaLabel:i.formatMessage(Lt.scrollRightButtonAriaLabel),style:{...x.commonArrowStyles,...x.rightArrowStyle},iconStyle:x.arrowIconStyle,hoveredStyle:x.iconHoveredStyle})})]})}const Rt=3;function Bt(e){let{stores:t,collapsed:o,shouldShowGrayFogInScroller:i}=e;return 0===t.length?null:t.length<=Rt?(0,fe.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:4},children:t.map((e=>(0,fe.jsx)(St.Z,{store:e,disabled:!1,commentProps:{shouldHideBlockActionMenu:o}},e.id)))}):(0,fe.jsx)(It,{shouldShowGrayFog:i,children:t.map((e=>(0,fe.jsx)(St.Z,{store:e,disabled:!1,commentProps:{shouldHideBlockActionMenu:o}},e.id)))})}var Dt=o(742858);const Tt=3,Zt=4;function Ft(e){let{stores:t,embedBlockLocation:o,onRemoveContent:i}=e;if(0===t.length)return null;if(t.length<=Tt)return(0,fe.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:4},children:t.map((e=>(0,fe.jsx)(At,{store:e,embedBlockLocation:o,onRemoveContent:i,isLarge:!0},e.id)))});if(t.length<=Zt)return(0,fe.jsx)("div",{style:{display:"flex",gap:4},children:t.map((e=>(0,fe.jsx)(At,{store:e,embedBlockLocation:o,onRemoveContent:i,isLarge:!1},e.id)))});const n=t.slice(0,Zt-1),s=t[Zt-1],r=t.length-Zt+1,a=t.slice(Zt);return(0,fe.jsxs)("div",{style:{display:"flex",gap:4},children:[n.map((e=>(0,fe.jsx)(At,{store:e,embedBlockLocation:o,onRemoveContent:i,isLarge:!1},e.id))),(0,fe.jsxs)("div",{children:[(0,fe.jsx)(We.Z,{style:{position:"absolute",zIndex:1,width:48,height:48,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0, 0, 0, 0.4)",borderRadius:8,color:"white",fontWeight:S.Z.fontWeight.bold},hoveredStyle:{background:"rgba(0, 0, 0, 0.4)"},pressedStyle:{background:"rgba(0, 0, 0, 0.4)"},onClick:()=>{Dt.dK({blocks:[s]})},children:`+${r}`}),(0,fe.jsx)(At,{store:s,embedBlockLocation:o,onRemoveContent:i,isLarge:!1},s.id)]}),(0,fe.jsx)("div",{style:{display:"none"},children:a.map((e=>(0,fe.jsx)(At,{store:e,embedBlockLocation:o,onRemoveContent:i,isLarge:!1},e.id)))})]})}function At(e){let{store:t,isLarge:o,embedBlockLocation:i,onRemoveContent:n}=e;const s=(0,u.yK)((e=>({imageShared:{border:`1px solid ${e.stroke.deemphasized}`,borderRadius:8,cursor:"zoom-in"}})),[]);return(0,fe.jsx)(xt.ZP,{store:t,blockLocation:i,disabled:!1,disableDrag:!0,disableResizers:!0,preserveScale:!0,inlineContentStyle:{...s.imageShared,...o?Vt:Kt},disableActions:!o,onRemoveBlockFromComment:o?n:void 0},t.id)}const Vt={objectFit:"contain",width:"auto",height:"auto",maxWidth:240,maxHeight:240,minWidth:48,minHeight:48},Kt={width:48,height:48,minWidth:48,minHeight:48};var Pt=o(568785),Et=o(532854);function zt(e){let{store:t}=e;const o=(0,c.VK)((()=>vt.default.getKeyState(vt.default.getBlockKey(t.id))),[t.id]),i=(0,v.useIntl)(),n=(0,u.yK)((e=>({wrapper:{height:48,width:214,display:"flex",alignItems:"center",background:"white",border:`1px solid ${e.regularDividerColor}`,borderRadius:12,padding:"8px 10px 8px 8px",gap:8},icon:{background:e.tint.regular,borderRadius:6,width:32,minWidth:32,height:32,display:"flex",alignItems:"center",justifyContent:"center"},fileDetails:{display:"flex",flexDirection:"column"},fileName:{fontSize:14,fontWeight:S.Z.fontWeight.medium,lineHeight:"18px",color:e.text.primary,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},fileSizeText:{color:e.text.secondary},progressText:{color:e.text.tertiary},sizeAndProgressContainer:{display:"flex",alignItems:"center",gap:4,fontSize:12,lineHeight:"15px"}})),[]);if(!o)return(0,fe.jsxs)("div",{style:n.wrapper,children:[(0,fe.jsx)("div",{style:n.icon,children:(0,fe.jsx)(Pt.Z,{})}),(0,fe.jsx)("div",{style:n.fileDetails,children:(0,fe.jsx)("div",{style:n.fileName,children:i.formatMessage({id:"commentFilePlaceholder.loading",defaultMessage:"Loading..."})})})]});const{name:s,size:r,progressPercent:a}=o;return(0,fe.jsxs)("div",{style:n.wrapper,children:[(0,fe.jsx)("div",{style:n.icon,children:(0,fe.jsx)(Pt.Z,{})}),(0,fe.jsx)("div",{style:{overflow:"hidden"},children:(0,fe.jsxs)("div",{style:n.fileDetails,children:[(0,fe.jsx)("div",{style:n.fileName,children:s}),(0,fe.jsxs)("div",{style:n.sizeAndProgressContainer,children:[(0,fe.jsx)("span",{style:n.fileSizeText,children:(0,ne.formatFileSize)(r)}),(0,fe.jsx)("span",{style:n.progressText,children:"—"}),(0,fe.jsx)(Pt.Z,{}),(0,fe.jsx)(Et.Z,{percentage:a,style:n.progressText})]})]})})]})}function Ut(e){let{stores:t}=e;return 0===t.length?null:(0,fe.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:4},children:t.map((e=>(0,fe.jsx)(zt,{store:e},e.id)))})}function Nt(e){const t=e.discussionFormat===ne.DiscussionFormat.Sidebar?ft.vW.SidebarComment:ft.vW.PageComment,{uploading:o,images:i,embeds:n,files:s}=(0,c.VK)((()=>{const[t,o]=ye.uK(e.contentStores,(e=>{const t=Boolean(vt.default.getKeyState(vt.default.getBlockKey(e.id))),o=xt.ZP.getEmbedSourceFromBlockStore(e);return t||!o})),[i,n]=ye.uK(o,(e=>function(e){if("image"!==e.getType())return!1;const t=x.QaF(e.getPropertyValue("source"));return void 0!==t&&!(0,ht.y_)(t,".jfif")&&!(0,ht.y_)(t,".webp")}(e))),[s,r]=ye.uK(n,(e=>"video"===e.getType()));return{uploading:t,images:i,embeds:s,files:r}}),[e.contentStores]);return 0===o.length&&0===i.length&&0===n.length&&0===s.length?null:(0,fe.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:4,marginTop:8},children:[(0,fe.jsx)(Ut,{stores:o}),(0,fe.jsx)(Ft,{stores:i,embedBlockLocation:t,onRemoveContent:e.onRemoveContent}),n.length>0&&(0,fe.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:4},children:n.map((o=>(0,fe.jsx)(xt.ZP,{store:o,blockLocation:t,disabled:!1,disableDrag:!0,disableResizers:!0,preserveScale:!0,inlineContentStyle:{},onRemoveBlockFromComment:e.onRemoveContent},o.id)))}),(0,fe.jsx)(Bt,{stores:s,collapsed:e.collapsed,shouldShowGrayFogInScroller:e.discussionHovered&&(e.discussionFormat===ne.DiscussionFormat.Margin||e.discussionFormat===ne.DiscussionFormat.Sidebar)})]})}function _t(){const e=(0,u.yK)((e=>({newBarLine:{height:"0px",borderBottom:`1px solid ${e.darkDividerColor}`,width:"100%",marginLeft:0},newBarWrapper:{color:e.mediumTextColor,textTransform:"uppercase",fontSize:10.5,letterSpacing:.5,fontWeight:S.Z.fontWeight.semibold,display:"flex",alignItems:"center",margin:0,paddingTop:10,paddingBottom:10,paddingLeft:oe},newBarText:{padding:"0 10px",whiteSpace:"nowrap"},threadLine:{position:"absolute",backgroundColor:e.stroke.deemphasized,width:J,height:"100%",borderRadius:2,left:Q,top:-6}})),[]);return(0,fe.jsxs)("div",{style:{position:"relative"},children:[(0,fe.jsx)("div",{style:e.threadLine}),(0,fe.jsxs)("div",{style:e.newBarWrapper,children:[(0,fe.jsx)("div",{style:e.newBarLine}),(0,fe.jsx)("div",{style:e.newBarText,children:(0,fe.jsx)(v.FormattedMessage,{id:"comment.newIndicator.label",defaultMessage:"New comments"})}),(0,fe.jsx)("div",{style:e.newBarLine})]})]})}var Wt=o(915157),Ht=o(585344),Ot=o(567060),$t=o(353471),Gt=o(437601),Xt=o(203386),qt=o(45653),Yt=o(279954),Jt=o(628020),Qt=o(249394),eo=o(433929),to=o(268056),oo=o(990827),io=o(924666);var no=o(91315),so=o(964275),ro=o(322962),ao=o(83065),lo=o(661519),co=o(499768),uo=o(98742);const mo=function(e){const t=(0,r.O7)(),{icon:o,onClick:i,tooltip:n}=e;return(0,fe.jsx)(co.Z,{capture:!0,render:e=>(0,fe.jsx)(L.Z,{renderTooltip:()=>n,render:s=>(0,fe.jsx)(Me.Z,{ariaLabel:n,icon:o,iconStyle:{width:t.device.isMobile?20:16,height:t.device.isMobile?20:16},style:{marginLeft:t.device.isMobile?16:0},onClick:i,...s,...e})})})};const po=function(e){const t=(0,v.useIntl)(),o=(0,r.O7)(),{device:i}=o,n=(0,u.yK)((e=>({cancelIcon:{background:e.mediumIconColor,borderRadius:"50%",pointerEvents:"auto",height:20,width:20,marginLeft:o.device.isMobile?4:0},cancelIconHovered:{background:e.lightIconColor}})),[o.device.isMobile]),{canSend:s,visible:a,onSend:l,onCancel:d,isEditing:c,animated:p,onMention:g,onAttach:h,sendTooltip:f}=e,x={opacity:a?1:0};return(0,fe.jsx)(_e.Z,{isVisible:!0,animationStyle:x,render:()=>(0,fe.jsx)("div",{style:{display:"flex",flexDirection:"column-reverse",alignItems:"end",pointerEvents:a?void 0:"none",width:"min-content",...p&&x},children:(0,fe.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:6},children:[(0,fe.jsx)(mo,{icon:m.s,onClick:h,tooltip:t.formatMessage({id:"discussionInput.uploadFile.button.tooltip",defaultMessage:"Attach file"})}),!i.isMobileBrowser&&(0,fe.jsx)(mo,{icon:ro.O,onClick:g,tooltip:t.formatMessage({id:"discussionInput.insertMention.button.tooltip",defaultMessage:"Mention a person, page, or date"})}),c&&(0,fe.jsx)("div",{style:{height:14,marginRight:6},children:(0,fe.jsx)(lo.Z,{vertical:!0,size:1})}),c?(0,fe.jsx)(co.Z,{capture:!0,render:e=>(0,fe.jsx)(Me.Z,{ariaLabel:t.formatMessage({id:"discussionInput.cancelButton.ariaLabel",defaultMessage:"Cancel editing comment"}),icon:so.D,isDarkIconColor:!0,onClick:d,iconStyle:{fill:"white",height:o.device.isMobile?18:16,width:o.device.isMobile?18:16},style:n.cancelIcon,hoveredStyle:n.cancelIconHovered,...e})}):null,c?(0,fe.jsx)(co.Z,{capture:!0,render:e=>(0,fe.jsx)(Me.Z,{ariaLabel:t.formatMessage({id:"discussionInput.updateButton.ariaLabel",defaultMessage:"Update comment"}),icon:no.r,onClick:l,isBlue:s,disabled:!s,iconStyle:{height:o.device.isMobile?23:21,width:o.device.isMobile?23:21},style:{pointerEvents:"auto",marginLeft:o.device.isMobile?16:2,height:24,width:24},...e})}):(0,fe.jsx)(L.Z,{disableTooltip:!(0,Ce.$K)(f),renderTooltip:()=>(0,fe.jsx)(fe.Fragment,{children:f}),render:e=>(0,fe.jsx)(co.Z,{capture:!0,render:i=>(0,fe.jsx)(Me.Z,{ariaLabel:t.formatMessage({id:"discussionInput.sendButton.ariaLabel",defaultMessage:"Send comment"}),icon:ao._,onClick:l,isBlue:s,disabled:!s,iconStyle:{height:o.device.isMobile?26:24,width:o.device.isMobile?26:24},style:{pointerEvents:"auto",marginLeft:o.device.isMobile?16:0,height:24,width:24},...(0,uo.Z)(i,e)})})})]})})})},go=(0,v.defineMessages)({defaultPlaceholder:{defaultMessage:"Add a comment…",id:"discussionInput.defaultPlaceholder.addComment"},pasteFileIntoCommentNotAllowed:{id:"clipboardActions.pasteFileIntoCommentError.message",defaultMessage:"Sorry, you cannot paste files into a comment."},replyInputPlaceholder:{defaultMessage:"Reply...",id:"updateSidebar.placeholder.addComment"}});var ho=o(954604),fo=o(634406),xo=o(81865);function vo(e){const{url:t,imageNaturalHeight:o,imageNaturalWidth:i}=e,s=(0,n.useMemo)((()=>({display:"block",width:`min(${i}px, 100%)`,height:`min(${o}px, 100%)`,pointerEvents:"auto",objectFit:"cover"})),[i,o]);return(0,fe.jsx)("div",{style:So,children:(0,fe.jsx)(fo.Z,{src:t,style:s,placeholderLoadedStyle:{display:"flex",justifyContent:"center",alignItems:"center"}})})}const So={alignSelf:"center",margin:"0 auto",position:"relative",height:"100%",width:"100%",overflow:"hidden"};const bo=function(e){let{file:t,isLarge:o}=e;const i=(0,n.useRef)(null),s=(0,r.O7)(),a=(0,u.yK)((e=>({imageThumbnail:{...{border:`1px solid ${e.stroke.deemphasized}`,borderRadius:8,cursor:"zoom-in"},...o?{objectFit:"contain",width:"auto",height:"auto",maxWidth:240,maxHeight:240,minWidth:48,minHeight:48}:{width:48,height:48}}})),[o]),l=(0,n.useCallback)((()=>{var e;const o=null===(e=i.current)||void 0===e?void 0:e.getImageDimensions();if(!o)return;const{naturalHeight:n,naturalWidth:s}=o;return"local"===t.type?(0,fe.jsx)(vo,{url:t.dataURL,imageNaturalHeight:n,imageNaturalWidth:s}):(0,fe.jsx)(xo.Z,{url:t.source,render:(e,t)=>(0,fe.jsx)(vo,{url:t,error:e,imageNaturalHeight:n,imageNaturalWidth:s}),isAuthenticated:!0,permissionRecord:t.store.pointer})}),[t]),d=(0,n.useCallback)((e=>{var t;e.stopPropagation();const o=null===(t=i.current)||void 0===t?void 0:t.getImageDimensions();o&&ho.ui({environment:s,renderFullScreenNode:l,fullScreenNodeRect:o.clientRect,contentAspectRatio:o.naturalWidth/o.naturalHeight})}),[l,s]);return"local"===t.type?(0,fe.jsx)(fo.Z,{src:t.dataURL,style:a.imageThumbnail,placeholderStyle:a.imageThumbnail,onClick:d,ref:i}):(0,fe.jsx)(xo.Z,{url:t.source,isAuthenticated:!0,permissionRecord:t.store.pointer,render:(e,t)=>(0,fe.jsx)(fo.Z,{src:t,style:a.imageThumbnail,placeholderStyle:a.imageThumbnail,onClick:d,ref:i})})};var yo=o(13966);function Co(e){let{title:t,source:o,size:i,file:s,store:r,onClick:a,showBlockActionMenuButton:l}=e;(0,n.useEffect)((()=>()=>{"local"===(null==s?void 0:s.type)&&null!=s&&s.dataURL&&URL.revokeObjectURL(s.dataURL)}),[s]);const d=(0,u.yK)((e=>({wrapper:{height:48,width:214,background:"white",border:`1px solid ${e.regularDividerColor}`,borderRadius:12,padding:"7px 10px 8px 8px",cursor:a?"pointer":"default"},wrapperHoveredStyle:{background:e.surface.wash},iconContainer:{height:32,width:32,minWidth:32,background:e.tint.regular,borderRadius:6,display:"flex",justifyContent:"center",alignItems:"center"},icon:{height:24,width:24,fill:e.regularIconColor},fileName:{fontSize:14,fontWeight:S.Z.fontWeight.medium,lineHeight:"18px",color:e.text.primary,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},fileSizeText:{fontSize:12,lineHeight:"15px",color:e.text.secondary},actionMenuHoveredStyle:{background:e.tint.regular}})),[a]),c=(0,ne.getIcon)(o);return(0,fe.jsx)(We.Z,{style:d.wrapper,hoveredStyle:r?d.wrapperHoveredStyle:{background:"white"},pressedStyle:r?d.wrapperHoveredStyle:{background:"white"},onClick:a,children:(0,fe.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,fe.jsx)("div",{style:d.iconContainer,children:c(d.icon)}),(0,fe.jsx)("div",{style:{overflow:"hidden",flexGrow:1},children:(0,fe.jsx)(L.Z,{renderTooltip:()=>(0,fe.jsx)("div",{children:t}),render:e=>(0,fe.jsxs)("div",{style:{display:"flex",flexDirection:"column"},...e,children:[(0,fe.jsx)("div",{style:d.fileName,children:t}),i&&(0,fe.jsx)("span",{style:d.fileSizeText,children:(0,ne.formatFileSize)(i)})]})})}),r&&l&&(0,fe.jsx)(yo.Z,{store:r,fadeIn:!1,actionSectionGroupKey:"comment_media",hideFilterActionsInput:!0,style:{borderRadius:50},hoveredStyle:d.actionMenuHoveredStyle,iconStyle:{width:12,height:12}})]})})}function jo(e){let{children:t,handleRemoveFileClicked:o}=e;const[i,s]=(0,n.useState)(!1),a=(0,r.O7)(),l=(0,v.useIntl)(),d=i||a.device.isMobile;return(0,fe.jsxs)(We.Z,{onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),style:ko,hoveredStyle:Mo,pressedStyle:Mo,children:[t,d&&(0,fe.jsx)(Me.Z,{icon:so.D,style:wo,hasBackground:!0,isDarkIconColor:!0,hovered:!1,showShadow:!0,onClick:o,ariaLabel:l.formatMessage({id:"discussionInputAttachment.removeFileButton.label",defaultMessage:"Remove file"})})]})}const wo={position:"absolute",top:-4,right:-3,height:18,width:18,borderRadius:18},ko={position:"relative",cursor:"pointer",width:"min-content",height:"min-content",background:"transparent"},Mo={background:"transparent"},Lo=3,Io=3;function Ro(e){let{files:t,onRemoveFile:o}=e;const{images:i,nonImages:n}=(0,c.VK)((()=>{const[e,o]=ye.uK(t,(e=>function(e){if("local"===e.type){const t=e.file.type,[o]=t.split("/");if("image"===o)return!0}const t=(0,ht.Dz)({url:"local"===e.type?e.file.name:e.source,baseUrl:De.default.domainBaseUrl,publicDomainName:De.default.publicDomainName});return"image"===t}(e)));return{images:e,nonImages:o}}),[t]);return(0,fe.jsxs)("div",{style:{width:"100%",display:"flex",flexDirection:"column",gap:4,marginTop:4},children:[(0,fe.jsx)(Bo,{files:i,onRemoveFile:o}),(0,fe.jsx)(Do,{files:n,onRemoveFile:o})]})}function Bo(e){let{files:t,onRemoveFile:o}=e;return 0===t.length?null:t.length<=Lo?(0,fe.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:4},children:t.map((e=>(0,fe.jsx)(jo,{handleRemoveFileClicked:()=>o(e),children:(0,fe.jsx)(bo,{file:e,isLarge:!0})},e.id)))}):(0,fe.jsx)(It,{children:t.map((e=>(0,fe.jsx)(jo,{handleRemoveFileClicked:()=>o(e),children:(0,fe.jsx)(bo,{file:e,isLarge:!1})},e.id)))})}function Do(e){let{files:t,onRemoveFile:o}=e;if(0===t.length)return null;const i=t.map((e=>{const t=e.name??"",i="remote"===e.type?e.source:t,n=e.size??"";return(0,fe.jsx)(jo,{handleRemoveFileClicked:()=>o(e),children:(0,fe.jsx)(Co,{title:t,source:i,size:n,showBlockActionMenuButton:!1})},e.id)}));return t.length<=Io?(0,fe.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:4},children:i}):(0,fe.jsx)(It,{children:i})}const To=n.forwardRef((function(e,t){var o;const i=(0,r.O7)(),{device:l,currentUser:d}=i,[m,p,g]=(0,c.AF)(e.discussionInputStore),{textStore:h,files:f}=m,x=(0,c.VK)((()=>h.getValue()),[h]),[S,b]=(0,n.useState)(!1),C=(0,n.useRef)(null),{commentStore:M}=e,L=e.discussionFormat!==ne.DiscussionFormat.Page;(0,n.useImperativeHandle)(t,(()=>({uploadFiles:E})));const I=(0,c.VK)((()=>(0,Jt.B7)(i)),[i]),R=(0,n.useRef)(null===(o=e.blockStore)||void 0===o?void 0:o.clone()),B=(0,c.VK)((()=>{const e=io.default.state;return"editing"===e.mode&&(0,to.qS)(e.multiSelection)&&e.multiSelection.start.store===h}),[h]),D=(0,c.VK)((()=>({isEmpty:(0,ne.inputIsEmpty)(g),hasChanged:(0,ne.hasCommentChanged)(g,M),hasNewLineCharacter:g.hasNewLineCharacter()})),[g,M]),T=(0,c.VK)((()=>B||!D.isEmpty),[D.isEmpty,B]),F=(0,n.useCallback)((async()=>{const e=io.default.state;"editing"===e.mode&&(0,to.qS)(e.multiSelection)&&e.multiSelection.start.store===h||(w.NX({store:h}),await s.default.afterNextFlush())}),[h]),A=(0,c.VK)((()=>Boolean(e.blockStore&&(0,oo.Eo)(e.blockStore))),[e.blockStore]),K=e=>{const t=g.state;g.setState({...t,files:t.files.filter((t=>t.id!==e.id))})},P=async e=>{await E(e.files),Ht.Zq(i,{type:"paste"})},E=(0,n.useCallback)((async t=>{var o;if(await F(),f.length+t.length>10)return void y.showErrorMessage((0,fe.jsx)(v.FormattedMessage,{id:"discussionInput.uploadFile.tooManyFilesErrorMessage",defaultMessage:"You cannot upload more than {maxFiles} files per comment.",values:{maxFiles:10}}));const i=t.map($t.Xo);p({...m,files:[...f,...i]}),null===(o=e.onFileUploaded)||void 0===o||o.call(e)}),[F,f,p,m,e]),z=e.discussionFormat===ne.DiscussionFormat.Margin,U=e.discussionFormat===ne.DiscussionFormat.Sidebar;(0,n.useEffect)((()=>{e.commentStore&&function(e,t){const o=V.le(t),i=$t.nQ(o);e.setState({...e.state,files:i})}(g,e.commentStore)}),[g,e.commentStore]);const N=(0,n.useRef)(!1),_=(0,n.useCallback)((t=>{t?Wt.Z.set({userId:d.id,key:Ko(e.parentStore.id,e.inReplyToDiscussionId),value:t??null}):Wt.Z.remove({userId:d.id,key:Ko(e.parentStore.id,e.inReplyToDiscussionId)})}),[d.id,e.inReplyToDiscussionId,e.parentStore.id]);(0,n.useEffect)((()=>{e.shouldSaveUnsentComments&&N.current&&_(x),N.current=!0}),[e.shouldSaveUnsentComments,_,x]);const W=(0,n.useRef)(h);(0,n.useEffect)((()=>{if(e.shouldSaveUnsentComments){const t=Wt.Z.get({userId:d.id,key:Ko(e.parentStore.id,e.inReplyToDiscussionId)});t&&k.createAndCommit({userAction:"DiscussionInput.willMount",environment:i,perform:e=>{j.sO({environment:i,store:W.current,value:t,transaction:e})}})}}),[i,d.id,e.inReplyToDiscussionId,e.parentStore.id,e.shouldSaveUnsentComments]);const H=(0,n.useRef)(f);(0,n.useEffect)((()=>{H.current=f}),[f]),(0,n.useEffect)((()=>()=>{H.current&&H.current.forEach((e=>{"local"===e.type&&e.dataURL&&URL.revokeObjectURL(e.dataURL)}))}),[]);const O=()=>{var e;return null===(e=C.current)||void 0===e?void 0:e.focus()},$=f&&f.length>0,G=!(e.discussionFormat===ne.DiscussionFormat.Menu&&e.inReplyToDiscussionId)&&(U||z&&!e.isNewComment),X=void 0!==e.showCtaButtons?e.showCtaButtons:e.isEditingExistingComment||T||S,Y=!e.isMobileSlideUpMenu,J=(z||U)&&!e.isNewComment,Q=(0,u.yK)((e=>({inputWrapper:{display:"flex",width:"100%",fontSize:14,borderRadius:4,transition:"background 300ms ease",cursor:X?"text":"pointer",alignSelf:"center",position:"relative",flexWrap:"wrap",justifyContent:"flex-end",background:"transparent",alignItems:"center",rowGap:4,columnGap:6,padding:"3.5px 4px 3px 4px",margin:"-3.5px -4px 0 -4px"}})),[X]),ee={fontSize:14,maxHeight:l.isMobileNative?"50vh":"70vh",WebkitOverflowScrolling:"touch",userSelect:"auto",WebkitUserSelect:"auto",lineHeight:"20px",overflow:"auto"},te=(0,c.VK)((()=>0===(h.getValue()||[]).length),[h]),oe=function(e){const{isEditing:t,onEditPreviousComment:o,textRef:i}=e;if(!t)return{};const n=e=>{"key"in e&&(e.metaKey||e.ctrlKey)&&i.current&&w.N_({store:i.current.props.store})},s=e=>{"key"in e&&(e.metaKey||e.ctrlKey)&&i.current&&w.NX({store:i.current.props.store})};return{onUp:o??n,onDown:s}}({isEditing:B,shouldTrapCursorInInput:L,onEditPreviousComment:te?e.onEditPreviousComment:void 0,textRef:C}),ie=()=>{_(void 0),e.onSubmit()},se=()=>{if(!l.isMobile)return void ie();const e="editing"===io.default.state.mode&&io.default.state.multiSelection;e&&k.createAndCommit({userAction:"DiscussionInput.handleEnter",environment:i,perform:t=>{j.hJ({environment:i,editorMode:"default",string:"\n",multiSelection:e,disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:t})}})},re=(0,fe.jsx)(po,{visible:X,onAttach:async()=>{const{device:e}=i;e.isIOS&&e.isMobileNative&&!e.isTablet&&(w.ZH({debug:{userAction:"DiscussionInput.handleOpenFilePickerAndUpload"},environment:i}),await s.default.afterNextFlush());const t=await $t.y({multiple:!0});await E(t),Ht.Zq(i,{type:"file_picker"})},onMention:async()=>{await F(),Ot.lZ({environment:i,mentionTypes:{page:!0,heading:!0,createPage:!1,user:!0,inviteUserToWorkspace:!0,inviteUserToPage:!0,bot:!0,date:!0,reminder:!1,templateVariable:!1,group:!0}})},canSend:!D.isEmpty&&!A,onSend:ie,onCancel:e.onCancel,isEditing:e.isEditingExistingComment||!1,animated:z,inline:!0,sendTooltip:A?(0,fe.jsx)(v.FormattedMessage,{id:"discussionInput.cannotSubmitBecauseOfAIEdits",defaultMessage:"Resolve pending edits before commenting"}):void 0});return(0,fe.jsx)(Xt.Z,{debugName:"DiscussionInput",capture:B,onCommandEnter:ye.yR,children:(0,fe.jsx)(Vo,{enabled:!!R.current&&!!e.canDrop,store:R.current,onNativeDrop:async e=>{let{files:t}=e;await E(t),Ht.Zq(i,{type:"drop"})},children:(0,fe.jsx)("div",{className:e.isEditingExistingComment?Te.hzx:Te.wFE,style:{...Zo,...e.containerStyle||{}},onFocus:e=>{const t=e.target;t instanceof HTMLElement&&(0,a.E)(t)&&b(!0)},onBlur:()=>b(!1),children:(0,fe.jsxs)("div",{style:Fo,children:[e.showAvatar&&(0,fe.jsx)(qt.Z,{userStore:I,size:q,avatarShouldShowShadow:!1,style:{...Ao,marginTop:0,marginRight:8}}),(0,fe.jsx)(_e.Z,{isVisible:!0,render:()=>(0,fe.jsxs)("div",{className:G?Te.Wh_:"",onClick:O,style:Q.inputWrapper,tabIndex:-1,children:[(0,fe.jsx)("div",{style:{flexGrow:1,display:"flex",minHeight:24,paddingTop:2,width:D.hasNewLineCharacter?"100%":""},children:(0,fe.jsx)(Z.Z,{style:ee,store:h,parentStore:e.parentStore,disabled:!1,onEnter:se,onCommandEnter:ie,onPasteFiles:P,onEsc:e.onCancel,...oe,placeholder:eo.default.formatMessage(J?go.replyInputPlaceholder:go.defaultPlaceholder),ref:C,isDiscussionInput:!0,disableSlashCommands:!0,disableInsertText:!0,disableSelectAllBlocks:!0,disableSelectionDrag:!0,disableEmbedMenu:!0,disabledMentionTypes:{reminder:!0},disableMobileActionBar:!0,disableStyleAnnotations:l.isMobileBrowser,disableInsertedDeletedAnnotations:l.isMobileBrowser,pasteBehavior:"inline",inPageFind:Qt.B3.none,className:"discussion-input-text-block"})}),$&&(0,fe.jsx)(Ro,{files:f,onRemoveFile:K}),re]})}),Y&&(0,fe.jsx)(Gt.Z,{show:B,onDismiss:()=>w.ZH({debug:{userAction:"DiscussionInput.DiscussionInput"},environment:i})})]})})})})})),Zo={display:"flex",flexDirection:"column",width:"100%",cursor:"pointer"},Fo={display:"flex",alignItems:"center",flexGrow:1},Ao={flexShrink:0,flexGrow:0,marginRight:6,alignSelf:"flex-start",marginTop:6};function Vo(e){const{enabled:t,children:o,store:i,onNativeDrop:n}=e;return t&&i?(0,fe.jsx)(Yt.Z,{store:i,analyticsName:"discussion_input",canNativeDropOnto:!0,onNativeDrop:n,keepTextSelectionOnDrop:!0,shouldShowDropZone:!0,children:o}):(0,fe.jsx)(fe.Fragment,{children:o})}function Ko(e,t){return t?`UnsentDiscussion-${e}-${t}`:`UnsentDiscussion-${e}`}const Po=To;const Eo=function(e){const{store:t,discussionContext:o,maxLines:i,discussionLocation:Y,shouldShowThreadLine:re}=e,ae=(0,r.O7)(),le=(0,v.useIntl)(),[de,ce]=(0,n.useState)(!1),[ue,me]=(0,n.useState)(!1),[pe,ge]=(0,n.useState)(!1),he=(0,c.VK)((()=>e.store.isDefined()?new se.Z(ae,e.store.getSpaceId()):void 0),[ae,e.store]),xe=(0,c.VK)((()=>V.le(e.store).filter((e=>(0,W.Vh)(e,{table:f.iU,id:e.id},"alive").getValue()))),[e.store]),ve=(0,c.VK)((()=>e.discussionStore.getResolved()),[e.discussionStore]),Se=(0,c.VK)((()=>null==he?void 0:he.state.files),[he]),be=(0,c.VK)((()=>null==he?void 0:he.state.textStore),[he]),ye=(0,n.useCallback)((e=>{const t=e.target;t instanceof HTMLElement&&(0,a.E)(t)&&me(!0)}),[]),Ce=(0,n.useCallback)((()=>{me(!1)}),[]),je=(0,n.useCallback)((()=>{_.Z.state||ge(!0)}),[]),we=(0,n.useCallback)((()=>{ge(!1)}),[]),ke=(0,l.l)(),Me=(0,c.qz)(void 0,U.Z),Le=(0,c.VK)((()=>Me.state.open),[Me]),Ie=(0,P.L2)(e.blockStore),Re=(0,c.VK)((()=>{const t=e.discussionStore.getComments();return Boolean(t&&t[0]===e.store.id)}),[e.discussionStore,e.store.id]),Be=(0,c.VK)((()=>{var t;const o=e.blockStore.getRole(),i=Re&&"comment_unfurl"!==Y,n=N.default.checkGate({gateName:"prevent_edits_trash"}),s=e.blockStore.pathIsDead(),r=o&&h.rz(o)||n&&s,{device:a}=ae,l="comment_only"===o||ke&&"comment"===(null===(t=ke.publicEditModeStore.state)||void 0===t?void 0:t.permission),d=i&&!a.isMobile&&!l&&!r;return pe||ue||e.hoveringDiscussion&&i||Le||a.isMobile||e.showResolveButtonByDefaultIfPossible&&d}),[e.blockStore,e.hoveringDiscussion,e.showResolveButtonByDefaultIfPossible,Re,Y,ae,ke,pe,ue,Le]),De=(0,n.useContext)(F.Ue),Te=(0,c.VK)((()=>{const e=t.getCreatedByPointer();return e?{createdByPointer:e,lastEditedTime:t.getLastEditedTime(),createdTime:t.getCreatedTime(),text:t.getText(),reactions:W.bh.getUserVisibleReactions(t)}:null}),[t]),Ze=(0,c.VK)((()=>{if(!Te)return null;const e=W.t1.createChildStore(t,Te.createdByPointer);return{displayName:e.getDisplayName(le),store:e}}),[Te,le,t]),Fe=(0,c.VK)((()=>(0,A.En)()),[]),Ae=(0,n.useCallback)((()=>{k.createAndCommit({userAction:"Comment.deleteComment",environment:ae,perform:t=>{H.YF({environment:ae,commentStore:e.store,transaction:t,discussionLocation:Y})},skipUpdatingEditedMetadata:!0})}),[ae,e.store,Y]),Ve=(0,n.useCallback)((async()=>{await y.confirmUserAction({message:(0,fe.jsx)(v.FormattedMessage,{defaultMessage:"Would you like to delete this comment?",id:"comment.confirmDialog.deleteComment.prompt"}),acceptLabel:(0,fe.jsx)(v.FormattedMessage,{defaultMessage:"Delete",id:"comment.confirmDialog.deleteComment.deleteButton.label"})})&&(Ae(),b.Xv(),O.Cd(ae))}),[Ae,ae]),Ke=(0,n.useCallback)((async t=>{const o=V.zP(e.store).getValue(),i=V.le(e.store).filter((e=>e.id!==t.id)),n=o&&o.length>0,s=0===i.length;!n&&s?(await Ve(),ce(!1)):k.createAndCommit({userAction:"Comment.handleRemoveFileFromActions",environment:ae,perform:o=>{H.Zo({commentStore:e.store,fileBlocks:[t],transaction:o})}})}),[ae,Ve,e.store]),Pe=(0,n.useCallback)((()=>{_e.current&&C.bx({element:_e.current,scrollers:{verticalScroller:null==De?void 0:De.verticalScroller},vertical:{reveal:"closest"},horizontal:void 0,animate:!0})}),[De]),Ee=(0,n.useCallback)((async()=>{if(!he)return;const t=V.zP(e.store).getValue()||[],o=he.state.textStore;k.createAndCommit({userAction:"Comment.handleEditComment",environment:ae,perform:e=>{j.sO({environment:ae,store:o,value:t,transaction:e})}}),ce(!0),await s.default.afterNextFlush(),await s.default.afterNextFlush(),w.NX({store:o})}),[he,ae,e.store]),ze=(0,n.useCallback)((async()=>{if(!he)return!1;if(!(0,ne.hasCommentChanged)(he,e.store))return ce(!1),!0;if(await y.confirmUserAction({message:(0,fe.jsx)(v.FormattedMessage,{defaultMessage:"Do you want to discard this edit?",id:"comment.confirmDialog.discardEdit.prompt"}),acceptLabel:(0,fe.jsx)(v.FormattedMessage,{defaultMessage:"Discard",id:"comment.confirmDialog.discardEdit.discardButton.label"})}))return ce(!1),!0;return!1}),[he,e.store]),Ue=(0,n.useCallback)((async()=>{const t=null==be?void 0:be.getValue();t&&t.length>0||Se&&Se.length>0?k.createAndCommit({userAction:"Comment.handleSubmitEdit",environment:ae,perform:o=>{H.DF({environment:ae,store:e.store,text:t||[],transaction:o,discussionLocation:Y,files:Se||[]})}}):await Ve(),ce(!1)}),[Se,be,Y,ae,Ve,e.store]),Ne=(0,n.useRef)(null),_e=(0,n.useRef)(null);(0,d.c)(E.Z,(()=>({edit:Ee,handleCancelEdit:ze,getNode:()=>Ne.current,isEditing:()=>de,discussionLocation:Y,commentId:e.store.id})),[Ee,ze,de,Y,e.store.id]);const We=q,He=null==Te?void 0:Te.text,Oe=void 0!==He&&He.length>0&&x.VrM(He)>0,$e=Oe&&(0,ne.isCommentAllEmojis)(He),Ge=function(e){let{discussionLocation:t,isAllEmojis:o,avatarSize:i}=e;return(0,u.yK)((e=>({container:{flexGrow:"comment_unfurl"===t?1:void 0,paddingTop:"comment_unfurl"===t?G:$,paddingRight:"margin_comments"===t?12:16,paddingBottom:X,paddingLeft:ie(t)},comment:{position:"relative",fontSize:14},commentElementsBelowUserRow:{paddingLeft:oe},avatar:{marginTop:0,marginRight:8,userSelect:"none",WebkitUserSelect:"none"},avatarSuggestionBadge:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:100,background:"light"===e.mode?"#fff":"#000",border:`1px solid ${e.accentColors.uiBlue[200]}`,fill:e.accentColors.uiBlue[600]},avatarSuggestionBadgeBacking:{position:"absolute",width:"100%",height:"100%",borderRadius:100,background:e.accentColors.uiBlue[100]},threadLine:{position:"absolute",backgroundColor:e.stroke.deemphasized,borderRadius:2,width:J,height:te,left:Q,top:ee},userRow:{display:"flex",flexDirection:"row",alignItems:"center",userSelect:"none",WebkitUserSelect:"none"},placeholder:{height:8,width:81,borderRadius:4,background:e.lightDividerColor},unfurlMoreWrapper:{color:e.lightTextColor,fontWeight:"comment_unfurl"===t?S.Z.fontWeight.medium:void 0,display:"block",marginBottom:-1.5,pointerEvents:"auto"},attachIcon:{width:18,height:18,fill:e.mediumIconColor},text:{cursor:"comment_unfurl"!==t?"text":void 0,...o?{fontSize:32}:{},lineHeight:"20px",paddingTop:4},attachmentContainer:{display:"flex",alignItems:"center"},timestamp:{margin:"0 6px",flexBasis:"comment_unfurl"!==t?140:void 0,whiteSpace:"normal",flexGrow:"updates_sidebar"===t||"comment_unfurl"===t?void 0:1,display:"inline",color:e.text.tertiary},commentAttachment:{},commentAuthorPlaceholder:{marginRight:8,marginTop:"comment_unfurl"===t?14:2,height:i,width:i,borderRadius:20,flexShrink:0}})),[t,o,i])}({discussionLocation:Y,isAllEmojis:$e,avatarSize:We}),Xe=(0,n.useMemo)((()=>({type:"comment_match",commentId:e.store.id})),[e.store.id]);if(!he)return null;if(!Te||!Ze)return null;const qe="comment_unfurl"!==Y;let Je,Qe;Te.lastEditedTime&&Te.lastEditedTime>Te.createdTime+100?(Je=(0,fe.jsx)(v.FormattedMessage,{defaultMessage:"{lastEditedTime} (edited)",id:"comment.editedAtTime.label",values:{lastEditedTime:(0,K.IS)(Te.lastEditedTime,{useUltraCompactFormat:!0})}}),Qe=(0,K.uy)(Te.lastEditedTime)):(Je=(0,K.IS)(Te.createdTime,{useUltraCompactFormat:!0}),Qe=(0,K.uy)(Te.createdTime));const et=xe.length>0&&(0,fe.jsx)("div",{style:Ge.commentAttachment,children:(0,fe.jsx)(Nt,{contentStores:xe,onRemoveContent:Ke,discussionFormat:(0,ne.discussionLocationToDiscussionFormat)(Y),collapsed:e.collapsed,discussionHovered:e.hoveringDiscussion})});return(0,fe.jsxs)("div",{ref:Ne,onClick:e=>de&&e.stopPropagation(),style:Ge.container,children:[e.showNewBar&&(0,fe.jsx)(_t,{}),(0,fe.jsxs)("div",{style:Ge.comment,onFocus:ye,onBlur:Ce,onMouseMove:je,onMouseLeave:we,children:[(0,fe.jsxs)("div",{style:Ge.userRow,children:[e.isSuggestionComment?(0,fe.jsxs)("div",{style:{position:"relative"},children:[(0,fe.jsx)(Ye.S,{authorStore:null==Ze?void 0:Ze.store,avatarSize:We,avatarStyle:Ge.avatar,placeholderStyle:Ge.commentAuthorPlaceholder}),(0,fe.jsx)("div",{style:{position:"absolute",right:4,bottom:-4},children:(0,fe.jsxs)("div",{style:Ge.avatarSuggestionBadge,children:[(0,g.I)({width:11,height:11,margin:"3px 3px 2.5px 3px"}),(0,fe.jsx)("div",{style:Ge.avatarSuggestionBadgeBacking})]})})]}):(0,fe.jsx)(Ye.S,{authorStore:null==Ze?void 0:Ze.store,avatarSize:We,avatarStyle:Ge.avatar,placeholderStyle:Ge.commentAuthorPlaceholder}),(0,fe.jsxs)("div",{style:{overflow:"hidden"},children:[(0,fe.jsx)("span",{style:{fontWeight:S.Z.fontWeight.medium,whiteSpace:"normal"},children:Fe?(0,fe.jsx)(L.Z,{renderTooltip:()=>Ze&&Ze.store instanceof W.U6?(0,fe.jsx)(T.Z,{targetUserStore:Ze.store}):null,placement:z.u.Top,alignment:z.v.End,render:e=>(0,fe.jsx)("span",{...e,children:Ze.displayName}),delayThreshold:600,allowHover:!0,closeDelay:1500,isLightBackground:!0}):Ze.displayName||(0,fe.jsx)("span",{style:Ge.placeholder})}),(0,fe.jsx)(I.Z,{isSmall:!0,isSecondaryColor:!0,isMultiline:!0,style:Ge.timestamp,children:(0,fe.jsx)(B.Z,{text:Je,tooltipText:Qe,icon:p.C})}),"comment_unfurl"===Y&&ve&&(0,fe.jsx)("div",{style:{display:"inline-flex"},children:(0,fe.jsx)(M.Z,{children:(0,fe.jsx)(v.FormattedMessage,{id:"comment.unfurl.resolvedStatus",defaultMessage:"Resolved"})})})]})]}),re&&(0,fe.jsx)("div",{style:Ge.threadLine}),(0,fe.jsxs)("div",{style:Ge.commentElementsBelowUserRow,children:[Boolean(o)&&o,de&&(0,fe.jsx)("div",{style:{marginTop:4},children:(0,fe.jsx)(Po,{containerStyle:{width:"calc(100% + 8px)"},showAvatar:!1,parentStore:e.store,blockStore:e.blockStore,onCancel:ze,onSubmit:Ue,discussionInputStore:he,isEditingExistingComment:!0,isMobileSlideUpMenu:!0,shouldSaveUnsentComments:!1,commentStore:e.store,discussionFormat:(0,ne.discussionLocationToDiscussionFormat)(Y),canDrop:!0})}),Oe&&!de&&(0,fe.jsx)(D.Z,{onMore:"comment_unfurl"===Y?void 0:()=>{},moreElement:(0,fe.jsxs)(R.Z,{disableUnderline:!0,style:Ge.unfurlMoreWrapper,hoverColor:"blue",children:["…"," ",(0,fe.jsx)("span",{children:(0,fe.jsx)(v.FormattedMessage,{id:"text.truncated.showMoreLabel",defaultMessage:"more"})})]}),maxLines:e.collapsed?i:void 0,children:(0,fe.jsx)(Z.Z,{style:Ge.text,store:V.zP(e.store),disabled:!0,disabledMentionTypes:{date:!0},disableEquationInteraction:!0,inPageFind:Xe})}),de||"comment_unfurl"===Y?!Oe&&(0,fe.jsxs)("div",{style:Ge.attachmentContainer,children:[(0,fe.jsx)("div",{style:{marginRight:5},children:(0,m.s)(Ge.attachIcon)}),(0,fe.jsx)(v.FormattedMessage,{defaultMessage:"{numberOfAttachments, plural, one {{numberOfAttachments} attachment} other {{numberOfAttachments} attachments}}",values:{numberOfAttachments:xe.length},id:"comment.unfurl.attachments.title"})]}):et,(0,fe.jsx)("div",{ref:_e,children:qe&&Te.reactions.length>0&&(0,fe.jsx)("div",{style:{marginTop:8},children:(0,fe.jsx)(at,{parentStore:e.store,discussionLocation:Y})})})]}),"comment_unfurl"!==Y&&!de&&!Ie&&(0,fe.jsx)(ut,{store:e.store,discussionStore:e.discussionStore,blockStore:e.blockStore,discussionLocation:Y,visible:Be,isFirstComment:Re,buttonPopupStore:Me,canShowReactions:qe,handleEditComment:Ee,handleDeleteComment:Ve,handleReaction:Pe})]})]})};var zo=o(709410),Uo=o(182798),No=o(293963),_o=o(450627),Wo=o(246351),Ho=o(95802),Oo=o(621853),$o=o(156681);function Go(e){var t;let{discussionStore:o,commentStore:i}=e;if(!i.isDefined())return!1;const n=null===(t=Ve.default.state.currentUserStore)||void 0===t?void 0:t.id;const s=$o.Z.state.lastInteractionTimes[o.id];if(i.getCreatedById()===n)return!1;const r=function(){if(!o.isDefined()||!n)return 0;const{pageVisitStore:e}=Ve.default.state,{lastViewTime:t,lastExitTime:i}=e.state;return i||t}();if(void 0===r)return!1;const a=(0,ne.getAndSortCommentStoresByTime)(o).filter((e=>e.getCreatedById()===n)).reverse()[0],l=i.getCreatedTime();return!l||!(a&&l<a.getCreatedTime())&&(!(s&&l<s)&&l>r)}var Xo=o(313991),qo=o(399036),Yo=o(180951),Jo=o(883212),Qo=o(959753),ei=o(398530),ti=o(297820);const oi=new Set([ae.Ti.toggle,ae.Ti.bulletedList,ae.Ti.numberedList,ae.Ti.quote,ae.Ti.toDo,ae.Ti.code,ae.Ti.callout,ae.Ti.header,ae.Ti.subHeader,ae.Ti.subSubHeader,ae.Ti.tableRow]);function ii(e){const t=(0,u.Fg)(),o=(0,v.useIntl)(),i=(0,c.VK)((()=>{var t;return e.store.isDefined()?null===(t=e.store.getParentStore())||void 0===t?void 0:t.getValue():null}),[e.store]),n=(0,c.VK)((()=>e.blockStore.getSpaceId()),[e.blockStore]),s=(0,c.VK)((()=>{if(!e.store.isDefined())return;const t=e.store.getContext(),i=t?(0,zo.Bb)({discussionContextData:t,discussionType:e.store.getType(),discussionId:e.store.id,intl:o}):void 0;if(!i)return;return x.VP_(i,(t=>!x.xw5(t)||x.h19(t)===e.store.id))}),[e.store,o]),r=(0,c.VK)((()=>{var t;const o=null===(t=e.store)||void 0===t||null===(t=t.getParentStore())||void 0===t?void 0:t.getParentStore();if(!o||"collection"!==o.table)return;const i=o.getSchema(),n=e.store.getPropertyId();return void 0!==n?(0,Yo.Qm)({schema:i,property:n}):void 0}),[e.store]),a=o=>{let{textValue:i,propertySchema:s,discussionParentValue:r}=o;const a=(0,fe.jsx)("div",{style:{overflow:"hidden",lineHeight:"18px",maxHeight:72},children:(0,fe.jsx)(ei.KX,{value:{value:i,spaceId:n},propertySchema:s,labeled:!1,rootStore:e.blockStore,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableDateStyleAnnotations:!0})});if(!r)return a;const l=r.type;return l===ae.Ti.code?(0,fe.jsx)(Jo.Z,{title:(0,ei.SP)(r),theme:t,style:{marginTop:0,marginBottom:0},children:(0,fe.jsx)("span",{style:{fontFamily:S.Z.getCompositeFontFamily(Xo.SP).mono,fontSize:12,tabSize:2},children:a})}):(0,ei.pH)(l)?(0,fe.jsx)(Jo.Z,{title:(0,ei.pH)(l),theme:t,style:{marginTop:0,marginBottom:0},children:a}):a},l={display:"flex",width:"100%",marginTop:6,marginBottom:6,fontSize:13,color:t.text.secondary};function d(e){if(!s)return null;const t=qo.Kc(eo.default.getIntl()).title;return t?(0,fe.jsx)("div",{style:l,children:(0,fe.jsxs)("div",{style:{display:"flex",width:"100%"},children:[(0,fe.jsx)(ni,{}),r&&(0,fe.jsxs)("div",{style:{display:"inline-flex"},children:[(0,fe.jsx)(ti.Z,{propertySchema:r,showIcon:!0,style:{fontSize:13,fill:"dark"},iconSize:12}),(0,fe.jsx)("span",{style:{marginLeft:1,marginRight:4},children:":"})]}),a({textValue:s,discussionParentValue:e,propertySchema:t})]})}):null}if("updates_sidebar"===e.discussionLocation){if(!i)return null;if("text"!==i.type&&void 0===r)return(0,fe.jsx)("div",{onClick:e.onClick,style:{display:"flex",cursor:Qo.kk.fromBlock(i).isType(ae.Zi)?"text":void 0},children:s&&oi.has(i.type)?d(i):(0,fe.jsxs)("div",{style:l,children:[(0,fe.jsx)(ni,{}),(0,fe.jsx)(ei.ZP,{blockValue:i,rootStore:e.blockStore,blockPreviewLocation:"comments_sidebar"})]})})}return(0,fe.jsx)("div",{onClick:e.onClick,style:{cursor:"text"},children:d()})}function ni(){const e=(0,u.yK)((e=>({bar:{width:2,marginLeft:1,borderRadius:4,marginRight:8,background:(0,Ue.DB)(e.mode),flexShrink:0}})),[]);return(0,fe.jsx)("div",{style:e.bar})}var si=o(107189),ri=o(99340);const ai={block_menu:"8px 16px 0px",page_discussion:"8px 0px 0px",updates_sidebar:"4px 16px 12px",margin_comments:"8px 12px 6px",comment_unfurl:"0",updates_menu_mentions_comments:"4px 16px 12px",updates_menu_all_updates:"4px 16px 12px",updates_menu_archive:"4px 16px 12px",reply_menu_mentions_comments:"8px 16px 0px",reply_menu_all_updates:"8px 16px 0px",reply_menu_archive:"8px 16px 0px",reply_menu_updates_sidebar:"8px 16px 0px",ai_reject_all_suggestions:"0"},li=n.forwardRef((function(e,t){const o=(0,r.O7)(),{format:i,role:n,showMoreCommentsButton:s,onMoreCommentsClick:a,inputVisible:l,blockStore:d}=e,m=(0,ri.cR)(d),p=(0,c.VK)((()=>N.default.checkGate({gateName:"prevent_edits_trash"})),[]),g=n&&h.rz(n)||p&&m,f=o.currentUser.isLoggedIn(),x=(0,u.Fg)(),S=(0,u.yK)((e=>({container:{position:"relative",padding:0,...i===ne.DiscussionFormat.Page?{marginLeft:16,marginRight:16}:{}},moreCommentsWrapper:{position:"absolute",display:"flex",justifyContent:"center",alignItems:"flex-start",zIndex:1,left:0,right:0,height:30,background:`linear-gradient(to bottom, ${e.contentBackgroundTransparent} 0px, ${e.selectedMarginDiscussionBackground} 30px`,marginTop:-28},tooltip:{...(0,L.J)(e,!1),cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",marginTop:-4,borderRadius:6,padding:"4px 10px 4px 8px"}})),[i]);return(0,fe.jsx)(fe.Fragment,{children:f&&!g&&(s||l)&&(0,fe.jsxs)("div",{style:S.container,children:[s&&(0,fe.jsx)("div",{style:S.moreCommentsWrapper,children:(0,fe.jsxs)("div",{style:S.tooltip,onClick:a,children:[(0,fe.jsx)("div",{style:{marginRight:5},children:(0,si.K)({fill:x.regularInvertedTextColor,height:12,width:12})}),(0,fe.jsx)(v.FormattedMessage,{defaultMessage:"See more",id:"discussion.moreMessageTooltip"})]})}),l&&(0,fe.jsx)(Po,{showAvatar:!0,containerStyle:{padding:ai[e.discussionLocation]},parentStore:e.store,onCancel:e.onCancel,onSubmit:e.onSubmit,discussionInputStore:e.discussionInputStore,isMobileSlideUpMenu:!1,shouldSaveUnsentComments:!0,onEditPreviousComment:e.onEditPreviousComment,inReplyToDiscussionId:e.store.id,discussionFormat:e.format,showCtaButtons:e.showCtaButtons,ref:t,onFileUploaded:e.onFileUploaded})]})})}));var di=o(462385);function ci(e){const t=(0,u.yK)((t=>{const o=ie(e.discussionLocation)+q;return{newBarLine:{height:"0px",borderBottom:`1px solid ${t.darkDividerColor}`,marginLeft:0,flex:1},moreCommentsWrapper:{color:t.lightTextColor,fontSize:14,flexGrow:1,display:"flex",alignItems:"center",paddingLeft:8},button:{borderRadius:4,fontSize:14,color:t.mediumTextColor,justifyContent:"space-between",padding:"14px 0",margin:`0 0 0 ${o}px`,width:`calc(100% - ${o}px - 16px)`},buttonHovered:{background:t.focusDiscussionInputBackground},threadLine:{position:"absolute",backgroundColor:t.stroke.deemphasized,width:J,height:"100%",top:$-Y,left:ie(e.discussionLocation)+Q,borderRadius:2}}}),[e.discussionLocation]);return e.count<=0?null:(0,fe.jsxs)("div",{style:{position:"relative"},children:[(0,fe.jsx)("div",{style:t.threadLine}),(0,fe.jsx)(di.Z,{style:t.button,onClick:e.onClick,hoveredStyle:t.buttonHovered,children:(0,fe.jsx)("div",{style:t.moreCommentsWrapper,children:(0,fe.jsx)(v.FormattedMessage,{defaultMessage:"Show {moreCommentsNumber, plural, one {{moreCommentsNumber} reply} other {{moreCommentsNumber} replies}}",id:"discussion.showMoreCommentsSidebarButton.label",values:{moreCommentsNumber:e.count}})})},"show")]})}function ui(e){const{discussionStore:t}=e,o=(0,v.useIntl)(),i=(0,c.VK)((()=>t.isSuggestionDiscussion()),[t]),n=(0,c.VK)((()=>{const t=e.discussionStore.getContext();return(t?(0,zo.GW)({discussionContextData:t,discussionId:e.discussionStore.id,discussionType:(0,Uo.TO)(e.discussionStore.getType()),intl:o}):[])??[]}),[e.discussionStore,o]),s=(0,u.yK)((e=>({container:{marginTop:2},label:{color:e.text.uiBlueSecondary,fontSize:14,lineHeight:"18px"},labelDeleteColor:{color:e.text.tertiary},text:{color:e.text.uiBluePrimary,fontSize:14,lineHeight:"18px"},textDeleteColor:{color:e.text.secondary},suggestionContextItem:{display:"block",marginBottom:4}})),[]),r=qo.Kc(o).title;return i&&r&&0!==n.length?(0,fe.jsx)("div",{style:s.container,children:(0,fe.jsx)(D.Z,{maxLines:e.collapsed?1:void 0,children:n.map(((e,t)=>{let{label:o,value:i,shouldUseDeleteColor:n,removeQuotationMarks:r}=e;return(0,fe.jsxs)("div",{style:s.suggestionContextItem,children:[(0,fe.jsxs)("span",{style:{...s.label,...n&&s.labelDeleteColor},children:[o,": "]}),(0,fe.jsxs)("span",{style:{...s.text,...n&&s.textDeleteColor},children:[r?null:"“",(0,fe.jsx)("span",{children:(0,x.QaF)(i)}),r?null:"”"]})]},t)}))})}):null}const mi=2,pi=5;function gi(e){const t=(0,n.useRef)(null),o=(0,v.useIntl)(),i=(0,r.O7)(),a=(0,c.VK)((()=>"suggestion"===e.store.getType()),[e.store]),l=(0,c.VK)((()=>V.D4(e.store)),[e.store]),m=(0,c.VK)((()=>l.filter((e=>e.isDefined()))),[l]),p=(0,n.useRef)(e.discussionInputStore||new se.Z(i,e.store.pointer.spaceId)).current,g=(0,c.VK)((()=>(0,ne.inputIsEmpty)(p)),[p]),h=(0,c.VK)((()=>(0,_o.Wt)(e.blockStore)),[e.blockStore]),f=(0,c.VK)((()=>e.store.getResolved()),[e.store]),[S,b]=(0,n.useState)(!1),[j,M]=(0,n.useState)(void 0!==e.collapsed&&!e.collapsed),[L,I]=(0,n.useState)(!0),R=(0,c.qz)(void 0,kt.Z),B=(0,c.VK)((()=>R.state.clientRect),[R]),D=e.format===ne.DiscussionFormat.Sidebar,T=e.format===ne.DiscussionFormat.Margin,Z=(0,n.useRef)(null);(0,d.c)(Wo.Z,(()=>({isSidebarFormat:()=>D,isMarginFormat:()=>T,getStore:()=>e.store,getInputStore:()=>p,getNode:()=>Z.current,getMarginDiscussionScrollContainer:()=>t.current})),[D,T,e.store,p]);const F=(0,c.VK)((()=>{if(!D)return;return(0,ne.getAndSortCommentStoresByTime)(e.store).find((t=>Go({discussionStore:e.store,commentStore:t})))}),[D,e.store]),A=(0,n.useRef)(F),K=void 0===A.current?F:A.current,P=(0,c.VK)((()=>{const{showAllRepliesAfterTimestamp:t}=e,o=(()=>{var o;if(j||m.length<=pi||"block_menu"===e.discussionLocation||"page_discussion"===e.discussionLocation)return m;const i=[t,null===(o=A.current)||void 0===o?void 0:o.getCreatedTime(),null==F?void 0:F.getCreatedTime()].filter(Ce.$K),n=i.length>0?Math.min(...i):void 0;if(n){const e=m.filter((e=>(e.getCreatedTime()||0)>n)),t=m.filter((e=>(e.getCreatedTime()||0)<=n));return t.length<=pi?m:[...ye.pm(t,mi),...e]}return ye.pm(m,mi)})(),i=new Set(o.map((e=>e.id))),n=m.filter((e=>!i.has(e.id)));return{commentStores:m,commentsToShow:o,commentsToCollapse:n,reactionsToShow:W.bh.getUserVisibleReactions(e.store)}}),[m,F,e,j],{useDeepEqual:!0}),z=(0,n.useCallback)((()=>{if(!e.store.isDefined())return;const t=e.store.getContext();if(!t)return;const i=(0,zo.Bb)({discussionContextData:t,discussionType:(0,Uo.TO)(e.store.getType()),discussionId:e.store.id,intl:o});return x.VP_(i,(t=>!x.xw5(t)||x.h19(t)===e.store.id))}),[e.store,o]),U=(0,c.VK)((()=>{if(!D)return;return(0,ne.getAndSortCommentStoresByTime)(e.store).find((t=>Go({discussionStore:e.store,commentStore:t})))}),[D,e.store]),N=n.createRef(),O=(0,n.useRef)(e.blockStore.clone()).current,$=(0,u.yK)((t=>({discussionWrapper:{...e.format===ne.DiscussionFormat.Page&&{margin:"0px -14px 16px"},...e.format===ne.DiscussionFormat.Menu&&{padding:"6px 0 12px",marginLeft:-2,boxShadow:e.isFirst?"none":`0 -1px 0 ${t.regularDividerColor}`,marginTop:e.isFirst?0:1},...e.format===ne.DiscussionFormat.Margin&&{padding:"4px 0",borderRadius:8}}})),[e.format,e.isFirst]);(0,n.useEffect)((()=>{i.KatexStore.loadIfNeeded(z)}),[i.KatexStore,z]);const G=t=>{const{device:o}=i;if(!o.isMobile)return;if(!e.store.isDefined())return;t.stopPropagation(),t.preventDefault(),Oo.Z.setState({open:!1});const n=ye.oA(Ho.C.findSelectablesFromIds([e.store.getParentId()])),s=null==n?void 0:n[0];s&&C.XW({handle:s,vertical:{reveal:"bottom"},horizontal:{reveal:"closest"},animate:!0})},X=()=>{const o=(0,ne.lineClampForCommentCount)(l.length);if(!e.collapsed)return(0,fe.jsx)(Ct.Z,{style:{display:"flex",flexDirection:"column",maxHeight:500,overflowY:"scroll"},ref:t,type:wt.Z.Y,store:R,children:l.map(((t,i)=>{const n=a&&0===i;return(0,fe.jsx)(Eo,{store:t,discussionStore:e.store,blockStore:e.blockStore,hoveringDiscussion:S,discussionLocation:e.discussionLocation,showResolveButtonByDefaultIfPossible:e.showResolveButtonByDefaultIfPossible,maxLines:o,shouldShowThreadLine:i!==l.length-1,discussionContext:n?(0,fe.jsx)(ui,{discussionStore:e.store,collapsed:Boolean(e.collapsed)}):void 0,isSuggestionComment:n},t.id)}))});const i=l[0]&&(0,fe.jsx)(Eo,{store:l[0],discussionStore:e.store,blockStore:e.blockStore,hoveringDiscussion:S,discussionLocation:e.discussionLocation,showResolveButtonByDefaultIfPossible:e.showResolveButtonByDefaultIfPossible,maxLines:o,collapsed:e.collapsed,shouldShowThreadLine:1!==l.length,discussionContext:a?(0,fe.jsx)(ui,{discussionStore:e.store,collapsed:Boolean(e.collapsed)}):void 0,isSuggestionComment:a},l[0].id),n=l.length>1&&l[l.length-1]&&(0,fe.jsx)(Eo,{store:l[l.length-1],discussionStore:e.store,blockStore:e.blockStore,hoveringDiscussion:S,discussionLocation:e.discussionLocation,showResolveButtonByDefaultIfPossible:e.showResolveButtonByDefaultIfPossible,maxLines:o,collapsed:e.collapsed,shouldShowThreadLine:!1},l[l.length-1].id),s=l.length-2;return(0,fe.jsxs)(fe.Fragment,{children:[i,(0,fe.jsx)(ci,{insetButton:!T,count:s,onClick:oe,discussionLocation:e.discussionLocation}),n]})};const q=(0,c.VK)((()=>e.blockStore.getRole()),[e.blockStore]),Y=t.current,J=(0,c.VK)((()=>(null==Y?void 0:Y.atScrollEnd())??!0),[Y]),Q=L&&!e.collapsed&&T&&B&&t.current&&!J,ee=()=>{s.default.afterNextFlush((()=>{t.current&&t.current.scrollToBottom({animate:!0})}))},te=ye.Ds((()=>{setTimeout((()=>I(!0)),50)}),50),oe=e=>{T||(e.stopPropagation(),M(!0))},ie=()=>{p.reset()},re=()=>{_.Z.state||b(!0)},ae=()=>{b(!1)};return 0===P.commentsToShow.length&&P.reactionsToShow.length>0?(0,fe.jsx)("div",{ref:Z,style:{...$.discussionWrapper,paddingLeft:16},onMouseMove:re,onMouseLeave:ae,children:(0,fe.jsx)(rt,{focused:!1,parentStore:e.store,discussionLocation:e.discussionLocation})}):(0,fe.jsx)(Yt.Z,{store:O,analyticsName:"discussion",canNativeDropOnto:!0,onNativeDrop:async e=>{let{files:t}=e;N.current&&await N.current.uploadFiles(t)},keepTextSelectionOnDrop:!0,shouldShowDropZone:!0,children:(0,fe.jsxs)("div",{ref:Z,style:$.discussionWrapper,onMouseMove:re,onMouseLeave:ae,children:[function(){if(T)return X();const{commentStores:t,commentsToShow:o,commentsToCollapse:i}=P,n=i.length>0,s=o.map(((t,i)=>{const s=a&&0===i,r=s?(0,fe.jsx)(ui,{discussionStore:e.store,collapsed:Boolean(e.collapsed)}):0===i&&!n&&(e.format===ne.DiscussionFormat.Menu||e.format===ne.DiscussionFormat.Sidebar)&&(0,fe.jsx)(ii,{format:e.format,discussionLocation:e.discussionLocation,store:e.store,blockStore:e.blockStore,onClick:G});return(0,fe.jsx)(Eo,{store:t,discussionStore:e.store,blockStore:e.blockStore,hoveringDiscussion:S,discussionLocation:e.discussionLocation,showResolveButtonByDefaultIfPossible:e.showResolveButtonByDefaultIfPossible,discussionContext:r,isSuggestionComment:s,showNewBar:t.id===(null==K?void 0:K.id)&&0!==i,shouldShowThreadLine:i!==o.length-1},t.id)})),r=a,l=r?(0,fe.jsx)(ui,{discussionStore:e.store,collapsed:Boolean(e.collapsed)}):(e.format===ne.DiscussionFormat.Menu||e.format===ne.DiscussionFormat.Sidebar)&&(0,fe.jsx)(ii,{format:e.format,discussionLocation:e.discussionLocation,store:e.store,blockStore:e.blockStore,onClick:G});return(0,fe.jsxs)("div",{style:{position:"relative"},children:[D&&U&&(0,fe.jsx)(No.z,{style:hi}),n&&(0,fe.jsx)(Eo,{store:t[0],discussionStore:e.store,blockStore:e.blockStore,hoveringDiscussion:S,discussionLocation:e.discussionLocation,showResolveButtonByDefaultIfPossible:e.showResolveButtonByDefaultIfPossible,discussionContext:l,shouldShowThreadLine:1!==t.length,isSuggestionComment:r},t[0].id),(0,fe.jsx)(ci,{insetButton:!T,count:i.length-1,onClick:oe,discussionLocation:e.discussionLocation}),s]})}(),f?(0,fe.jsx)("div",{style:{height:8}}):(0,fe.jsx)(li,{ref:N,showMoreCommentsButton:!!Q,onMoreCommentsClick:ee,inputVisible:!(h||e.collapsed&&g),store:e.store,blockStore:O,format:e.format,discussionInputStore:p,discussionLocation:e.discussionLocation,onCancel:async()=>{if((0,ne.hasCommentChanged)(p)){await y.confirmUserAction({message:(0,fe.jsx)(v.FormattedMessage,{defaultMessage:"Do you want to discard this reply?",id:"discussion.confirmDialog.discardReply.prompt"}),acceptLabel:(0,fe.jsx)(v.FormattedMessage,{defaultMessage:"Discard",id:"discussion.confirmDialog.discardReplyButton.label"})})?(ie(),e.onDismiss&&e.onDismiss()):(await s.default.afterNextFlush(),w.NX({store:p.state.textStore}))}else ie(),e.onDismiss&&e.onDismiss()},onSubmit:async()=>{I(!1);const{device:t}=i,{store:o,discussionLocation:n}=e;k.createAndCommit({userAction:"Discussion.handleSubmitReply",environment:i,perform:e=>{H.Xi({environment:i,discussionStore:o,textValue:p.state.textStore.getValue()||[],transaction:e,discussionLocation:n,files:p.state.files})}}),ie(),w.ZH({debug:{userAction:"Discussion.handleSubmitReply"},environment:i}),ee(),te(),t.isMobile||(await s.default.afterNextFlush(),w.N_({store:p.state.textStore}))},onEditPreviousComment:()=>{const t=i.currentUser.id;if(!t)return;const o=V.D4(e.store).filter((e=>e.getCreatedById()===t)),n=ye.Z$(o);if(!n)return;if(a&&1===o.length)return;const s=E.Z.find((t=>t.commentId===n.id&&t.discussionLocation===e.discussionLocation));s&&(w.ZH({debug:{userAction:"Discussion.handleEditPreviousComment"},environment:i}),s.edit())},showCtaButtons:!!T||void 0,onFileUploaded:()=>{const e=Ho.C.findSelectableFromStore(O);e&&C.XW({handle:e,vertical:{reveal:"bottom"},horizontal:{reveal:"closest"},animate:!0})},role:q})]})})}const hi={marginRight:4,position:"absolute",right:16,top:14};var fi=o(133866),xi=o(110906),vi=o(282136),Si=o(492650),bi=o(14577),yi=o(744805),Ci=o(380503),ji=o(151454),wi=o(639500),ki=o(849427),Mi=o(436391),Li=o(524229),Ii=o(650628),Ri=o(992120),Bi=o(948514),Di=o(237240);function Ti(e){let{discussionData:{groupedDiscussionsData:t,id:o},onClick:i}=e;const[s,r]=(0,n.useState)(!1),a=(0,n.useCallback)((()=>{r(!0)}),[]),l=(0,n.useCallback)((()=>{r(!1)}),[]),d=(0,n.useCallback)((async e=>{const o=t[0].discussionStore;await i(e,o)}),[i,t]),{commentStores:m,reactionStores:g}=(0,c.VK)((()=>({commentStores:t.flatMap((e=>(0,V.D4)(e.discussionStore))),reactionStores:t.flatMap((e=>W.bh.getUserVisibleReactions(e.discussionStore)))})),[t]),h=(0,c.VK)((()=>{const e=t[0].parentBlockStore,o=m.map((e=>e.getCreatedById())).filter(Ce.$K),i=g.map((e=>e.getActorPointers().map((e=>e.id)))).flat().filter(Ce.$K);return Array.from(new Set([...o,...i])).map((t=>W.U6.createChildStore(e,{table:be.KJ,id:t}))).slice(0,5)}),[t,m,g]),f=(0,c.VK)((()=>{const e=m.map((e=>e.getLastEditedTime())),t=g.map((e=>e.getCreatedTime()));return Math.max(...e,...t)}),[m,g]),x=(0,u.yK)((e=>({discussion:{background:s?e.hoveredMarginDiscussionBackground:e.contentBackground,width:Si.Z,display:"flex",cursor:"pointer",border:`1px solid ${e.stroke.deemphasized}`,borderRadius:8,padding:"12px",alignItems:"center",gap:6},userAvatarsContainer:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"row-reverse",marginRight:8},hiddenUsers:{fontSize:14,color:e.mediumTextColor,marginRight:6},lastEditedTime:{margin:"1px 0px 0px 0px",whiteSpace:"normal",display:"flex",justifyContent:"center",alignItems:"center",color:e.text.tertiary,fontSize:12,lineHeight:"15px"},commentAuthorAvatarStyle:{borderRadius:20,position:"relative",userSelect:"none",WebkitUserSelect:"none",width:24,height:24,boxShadow:e.avatarBoxShadow,marginRight:-6},commentAuthorPlaceholderStyle:{width:20,height:20,borderRadius:20,marginRight:-3,position:"relative"},secondaryLabel:{fontSize:S.Z.fontSize.UISmall.desktop,whiteSpace:"normal",display:"flex",justifyContent:"center",alignItems:"center",lineHeight:"21px",marginLeft:0,marginTop:0,color:e.text.tertiary},expandIcon:{width:S.Z.fontSize.UISmall.desktop,height:S.Z.fontSize.UISmall.desktop,fill:e.lightTextColor,marginTop:1}})),[s]);return(0,fe.jsx)("div",{style:x.discussion,onMouseEnter:a,onMouseLeave:l,onClick:d,className:Te.S9A,children:(0,fe.jsxs)(fe.Fragment,{children:[(0,fe.jsx)("div",{style:x.userAvatarsContainer,children:h.map((e=>(0,fe.jsx)(Ye.S,{authorStore:e,avatarSize:24,avatarStyle:x.commentAuthorAvatarStyle,placeholderStyle:x.commentAuthorPlaceholderStyle},e.id)))}),(0,fe.jsx)(Zi,{reactionCount:g.length,commentCount:m.length}),s?(0,fe.jsxs)(fe.Fragment,{children:[(0,fe.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginLeft:0},children:(0,Di.s)(x.expandIcon)}),(0,fe.jsx)("div",{style:x.secondaryLabel,children:(0,fe.jsx)(v.FormattedMessage,{defaultMessage:"Expand",id:"marginComments.collapsed.expand.label"})})]}):f&&(0,fe.jsx)(I.Z,{isSmall:!0,isSecondaryColor:!0,isMultiline:!0,style:x.lastEditedTime,children:(0,fe.jsx)(B.Z,{text:(0,K.IS)(f,{useUltraCompactFormat:!0}),tooltipText:(0,K.uy)(f),icon:p.C})})]})})}function Zi(e){const t=(0,u.yK)((e=>({commentCount:{fontSize:14,whiteSpace:"normal",marginLeft:0,color:e.text.primary,fontWeight:S.Z.fontWeight.medium,lineHeight:"18px"},textPlaceholder:{background:e.lightDividerColor,height:14,width:81,borderRadius:4,marginLeft:4}})),[]);return e.commentCount>0?(0,fe.jsx)("div",{style:t.commentCount,children:(0,fe.jsx)(v.FormattedMessage,{defaultMessage:"{numComments, plural, one {{numComments} comment} other {{numComments} comments}}",id:"marginComments.collapsed.numComments.count",values:{numComments:e.commentCount}})}):e.reactionCount>0?(0,fe.jsx)("div",{style:t.commentCount,children:(0,fe.jsx)(v.FormattedMessage,{defaultMessage:"{numReactions, plural, one {{numReactions} reaction} other {{numReactions} reactions}}",id:"marginComments.collapsed.numReactions.count",values:{numReactions:e.reactionCount}})}):(0,fe.jsx)("div",{style:t.textPlaceholder})}var Fi=o(174725),Ai=o(18821);function Vi(e){let{discussionData:{parentBlockStore:t,discussionInputStore:o},isVisible:i}=e;const s=(0,n.useRef)(null),a=(0,r.O7)(),l=(0,n.useCallback)((()=>{Ai.Dc(a)}),[a]),d=(0,n.useCallback)((()=>{Ai.uK({discussionInputStore:o,environment:a,discussionHelpers:ne})}),[a,o]),c=(0,n.useMemo)((()=>[`.${Te.mJW}`]),[]);(0,Fi.O)({active:i,closeHandler:d,ref:s,excludedSelectors:c,ignoreKeydown:!0});const m=(0,u.yK)((e=>({discussion:{borderRadius:6,boxShadow:e.marginDiscussionSelectedShadow,width:Si.Z,background:e.selectedMarginDiscussionBackground},discussionInputContainer:{borderRadius:6,padding:"8px 0px 4px 12px"}})),[]);return(0,fe.jsx)("div",{style:m.discussion,ref:s,className:Te.S9A,children:(0,fe.jsx)(Po,{parentStore:t,discussionInputStore:o,shouldSaveUnsentComments:!1,isMobileSlideUpMenu:!1,discussionFormat:ne.DiscussionFormat.Margin,onSubmit:l,onCancel:d,isNewComment:!0,blockStore:t,canDrop:!0,showAvatar:!1,containerStyle:m.discussionInputContainer,showCtaButtons:!0})})}var Ki=o(222491),Pi=o(305971);function Ei(e){let{discussionData:{discussionStore:t,parentBlockStore:o},timeMounted:i,onClick:s,isVisible:a,isDiscussionSelected:l,isDiscussionHovered:d}=e;const m=(0,n.useRef)(null),p=(0,r.O7)(),[g,h]=(0,n.useState)((()=>new se.Z(p,t.pointer.spaceId))),f=(0,Pi.E)("block_reactions"),x=t.id,v=(0,c.VK)((()=>t.getCommentStores().length>0),[t]),S=(0,c.VK)((()=>t.getReactionStores().length>0),[t]),y=(0,n.useMemo)((()=>[`.${(0,Ki.dk)({discussionId:x})}`,`.${Te.mJW}`,`.${Te.S9A}`]),[x]),C=(0,n.useCallback)((async()=>{const e=E.Z.find((e=>e.isEditing()));if(e){if(!(await e.handleCancelEdit()))return}b.LZ()}),[]);(0,Fi.O)({active:a&&l,closeHandler:C,ref:m,excludedSelectors:y,ignoreKeydown:!0});const j=(0,u.yK)((e=>({discussion:{border:l?void 0:`1px solid ${e.lightDividerColor}`,borderRadius:6,padding:l?"1px":void 0,background:l?e.selectedMarginDiscussionBackground:d?e.hoveredMarginDiscussionBackground:e.contentBackground,boxShadow:l?e.marginDiscussionSelectedShadow:void 0,width:Si.Z,cursor:l?void 0:"pointer"},wrapper:{willChange:"transform",transition:"transform 200ms ease",transform:l?"translateX(-20px)":d?"translateX(-5px)":void 0}})),[d,l]),w=(0,n.useCallback)((async e=>{var o;l||(Ht.Uw(p,{discussion_id:t.id,discussion_type:t.getType(),from:"margin_comments",parent_block_id:t.getParentId(),parent_collection_id:null===(o=t.getParentStore())||void 0===o?void 0:o.getParentCollectionIdUpToTwoLevels()}),await s(e,t))}),[s,t,l,p]);return(0,fe.jsxs)("div",{className:Te.S9A,ref:m,style:j.wrapper,onClick:w,children:[S&&f&&(0,fe.jsx)("div",{style:{width:Si.Z},children:(0,fe.jsx)(rt,{focused:l,parentStore:t,discussionLocation:"margin_comments"})}),v&&(0,fe.jsx)("div",{style:j.discussion,children:(0,fe.jsx)(gi,{store:t,blockStore:o,format:ne.DiscussionFormat.Margin,isFirst:!1,isOnly:!1,showResolveButtonByDefaultIfPossible:!1,discussionLocation:"margin_comments",showAllRepliesAfterTimestamp:i,discussionInputStore:g,collapsed:!l})})]})}const zi=n.memo(Ei);function Ui(e){const{discussionData:t,isLastItem:o,isDiscussionSelected:i,discussionItemElementMap:s}=e,a=(0,u.yK)((()=>({discussionContainer:{transition:"background 300ms ease\n\t\t\t\t"+(t.hide?"":", top 200ms ease-in-out"),top:t.offsetTop,position:"absolute",paddingBottom:o?Si.Vs:Si.wo,zIndex:i?1:void 0,opacity:t.hide?0:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",pointerEvents:"auto"}})),[t.hide,t.offsetTop,i,o]);let l;const d=t.type,m=(0,r.O7)();(0,c.VK)((()=>(0,Si.az)(m,t.parentBlockStore)),[m,t.parentBlockStore])?"existing"===d?l=(0,fe.jsx)(zi,{...e,discussionData:t}):"new"===d?l=(0,fe.jsx)(Vi,{...e,discussionData:t}):"grouped"===d?l=(0,fe.jsx)(Ti,{...e,discussionData:t}):(0,Ce.t1)(d):l=null;const p=(0,n.useCallback)((()=>{Ri.Z.setState({source:"margin_comments",discussionIds:[t.id]})}),[t.id]),g=(0,n.useCallback)((()=>{Ri.Z.setState({discussionIds:[]})}),[]),h=(0,n.useCallback)((e=>{s.set(t.id,e)}),[t.id,s]);return(0,fe.jsx)("div",{style:a.discussionContainer,onMouseEnter:p,onMouseLeave:g,ref:h,children:l})}const Ni=n.memo(Ui),_i=`.${yi.zd}, .${yi.FB}`;function Wi(e){let{pageBlockStore:t,timeMounted:o,isVisible:i,animating:s,pageViewBlockAccessor:a,width:l}=e;const d=(0,r.O7)(),m=(0,n.useRef)(null),p=(0,n.useRef)(new Map),g=(0,n.useRef)(new Map),h=(0,c.VK)((()=>Ri.Z.getFirstSelectedDiscussionId()),[]),f=(0,n.useCallback)((async(e,o)=>{(0,wi.X9)()||e.target instanceof Element&&e.target.closest(_i)||await H.Ri({discussionStore:o,currentBlockStore:t,environment:d,analyticsFrom:"margin_comments",currentEl:m.current})}),[t,d]),[x,v]=(0,n.useState)({data:[],hasNewDiscussion:!1,selectedDiscussion:void 0}),[S,b]=(0,n.useState)(!1),{WindowSizeStore:y}=d,C=Ci.R6(d.device.isElectronMac);(0,n.useEffect)((()=>{if(!i)return;const e=new bi.Z((()=>({selectableRectMap:Ii.Z.state.selectableRectMap,pageContentStores:t.getContentStores(),sidebarIsAnimating:Mi.ZP.state.isAnimating,windowHeight:y.state.height})),{debugName:"effectDataStore"}),o=new bi.Z((()=>Si.EM.state),{debugName:"discussionStoresStore"}),n=new bi.Z((()=>{const e=Bi.Z.state;if(e.open&&e.rect&&"comment"===e.content&&ki.Z.isBlockInFrame(e.blockStore))return{blockStore:e.blockStore,discussionInputStore:e.discussionInputStore}}),{debugName:"newMarginDiscussionArgsStore"}),r=new bi.Z((()=>Li.Z.getFramePageFirstSelectedDiscussionId()),{debugName:"selectedDiscussionIdStore"});let l=!1;const d=(0,ye.Ds)((()=>{const{selectableRectMap:i,pageContentStores:d,sidebarIsAnimating:c,windowHeight:u}=e.state,h=o.state,f=n.state,y=r.state;if(s||c)return;const j=a();if(!(j&&m.current&&i&&i.size))return;(0,Si.H0)({discussionStores:h,pageContentStores:d,marginDiscussionItemRefs:p.current,selectedDiscussionId:y,newMarginDiscussionArgs:f,marginContainerElement:m.current,pageViewBlockElement:j,onComputeComplete:(e,t)=>{l||(g.current=t,S||b(!0),v(e))},computedOnce:S,topbarHeight:C,windowHeight:u,isFullWidth:t.isFullWidth(),prevSelectedDiscussionId:x.selectedDiscussion,previousDiscussionElements:g.current})}),5);return e.addListener(d),o.addListener(d),r.addListener(d),n.addListener(d),()=>{l=!0,e.removeListener(d),o.removeListener(d),r.removeListener(d),n.removeListener(d)}}),[i,s,a,S,t,x.selectedDiscussion,y,C]);const j=(0,u.yK)((()=>({marginCommentsContainer:{display:"flex",flexDirection:"column",paddingTop:8,paddingBottom:8,paddingLeft:Si.fS,paddingRight:Si.fS,width:l-2*Si.fS,flexShrink:0,height:"100%",position:"relative",pointerEvents:"none",zIndex:ji.p8}})),[l]);return(0,fe.jsx)("div",{style:j.marginCommentsContainer,ref:m,children:x.data.map(((e,t)=>(0,fe.jsx)(Ni,{discussionData:e,timeMounted:o,onClick:f,isVisible:i,discussionItemElementMap:p.current,isDiscussionSelected:e.selected||"new"===e.type,isDiscussionHovered:e.id===h,isLastItem:t===x.data.length-1},`margin-discussion-${e.id}`)))})}const Hi=n.memo(Wi);function Oi(e){let{pageBlockStore:t,isVisible:o,pageViewBlockAccessor:i,context:s,isCollapsedAnchor:a}=e;const[l,d]=(0,n.useState)(!1),m=(0,r.O7)(),p=(0,n.useMemo)((()=>(new Date).getTime()),[]),g=(0,c.VK)((()=>t.isFullWidth()||s===vi.S.CollectionPageView),[s,t]),h=(0,c.VK)((()=>"floating_right"===N.default.getEligibleGroup({experimentId:"floating_table_of_contents_variants",defaultGroup:"control"})),[]),f=(0,c.VK)((()=>a?{paddingLeft:g?96:h?16:42,height:0}:g?void 0:{position:"absolute",right:(0,Si.oS)(m,(0,xi.en)(t),(0,xi.Ks)(t))}),[a,g,m,t,h]),x=(0,n.useCallback)((()=>{d(!0)}),[]),v=(0,n.useCallback)((()=>{d(!1)}),[]),S=(0,u.yK)((()=>({marginCommentsSection:{display:o||l?"flex":"none",flexShrink:0,pointerEvents:"none",width:o?Si.QB:0,...f}})),[o,l,f]);return(0,fe.jsx)(_e.Z,{isVisible:!0,animationStyle:{opacity:o?1:0},onAnimationStart:x,onAnimationEnd:v,render:()=>(0,fe.jsx)("div",{style:S.marginCommentsSection,children:(0,fe.jsx)(Hi,{pageBlockStore:t,timeMounted:p,isVisible:o,animating:l,pageViewBlockAccessor:i,width:Si.QB})})})}var $i=o(436488),Gi=o(256940),Xi=o(953437),qi=o(903553),Yi=o(883355),Ji=o(972402),Qi=o(749085);class en extends Qi.default{getInitialState(){return{}}}const tn=en;class on extends Yi.Z{constructor(){super(...arguments),this.storeTypes={store:tn},this.rootNode=void 0,this.observer=void 0,this.handleMutation=()=>{this.rootNode&&this.stores.store.setState({node:this.rootNode})}}get registries(){return[Ji.Z]}didMount(){this.props.capture&&this.startListeners()}UNSAFE_willUpdate(e){e.capture&&!this.props.capture?this.startListeners():!e.capture&&this.props.capture&&this.stopListeners()}willUnmount(){this.stopListeners()}startListeners(){const e=Pe.findDOMNode(this);e&&(this.rootNode=e,this.observer=new MutationObserver(this.handleMutation),this.observer.observe(this.rootNode,{attributes:!0,subtree:!0}))}stopListeners(){this.observer&&(this.observer.disconnect(),this.rootNode=void 0,this.observer=void 0)}renderComponent(){return n.Children.only(this.props.children)}}on.displayName="SlideUpInputArea";const nn=on;var sn=o(223196);const rn=function(){const e=(0,r.O7)(),{device:t,WindowSizeStore:o}=e,i=(0,c.VK)((()=>Bi.Z.state.rect),[]),n=(0,c.VK)((()=>{if(Bi.Z.state.open&&"comment"===Bi.Z.state.content){const{blockStore:t,discussionInputStore:o}=Bi.Z.state;return{blockStore:t,discussionInputStore:o,canMarginCommentsRender:(0,Si.az)(e,t)}}return null}),[e]),s=(0,c.VK)((()=>({paddingLeft:t.isMobileNative?o.getSafePaddingLeftCSS(12):12,paddingRight:t.isMobileNative?o.getSafePaddingRightCSS(8):8})),[o,t.isMobileNative]),a=(0,u.yK)((()=>({inputWrapper:{width:t.isMobileNative?"100%":470,maxWidth:t.isMobileBrowser?"90vw":"100%",paddingTop:9,paddingBottom:t.isAndroid?12:8,paddingLeft:s.paddingLeft,paddingRight:s.paddingRight}})),[t,s]),l=()=>{Ai.Dc(e)},d=()=>{n&&Ai.uK({discussionInputStore:n.discussionInputStore,environment:e,discussionHelpers:ne})};return(0,fe.jsx)(Xi.ZP,{popupType:t.isMobileNative?sn.k.SlideUp:sn.k.Popup,keepFocus:!0,open:null!==n&&!n.canMarginCommentsRender,originRect:i,placementToOrigin:Xi.ZP.Placement.Bottom,alignmentToOrigin:Xi.ZP.Alignment.Center,originGap:4,onDismiss:d,render:()=>{if(n){const{blockStore:e,discussionInputStore:t}=n;return(0,fe.jsx)(Gi.Z,{capture:!0,ignoreBlockSelection:!0,restoreSelection:!0,render:()=>(0,fe.jsx)(nn,{capture:!0,children:(0,fe.jsx)($i.Z,{capture:!0,allowOpenLinkMenu:!0,render:()=>(0,fe.jsx)(qi.Z,{store:e,droppable:!0,render:()=>(0,fe.jsx)("div",{style:a.inputWrapper,children:(0,fe.jsx)(Po,{showAvatar:!0,parentStore:e,onCancel:d,onSubmit:l,discussionInputStore:t,isMobileSlideUpMenu:!0,shouldSaveUnsentComments:!1,discussionFormat:ne.DiscussionFormat.Page,blockStore:e,canDrop:!0})})},e.id)})})})}}})};var an=o(645010),ln=o(209080);const dn=function(){const e=(0,r.O7)(),{device:t}=e,{open:o,rect:i}=(0,c.VK)((()=>{const{open:e,rect:t}=ln.Z.state;return{open:e,rect:t}}),[]);return(0,fe.jsx)(Xi.ZP,{popupType:t.isMobile?sn.k.SlideUp:sn.k.Popup,open:o,originRect:i,placementToOrigin:Xi.ZP.Placement.Bottom,alignmentToOrigin:Xi.ZP.Alignment.Center,originGap:4,onDismiss:()=>O.UZ(e),render:()=>(0,fe.jsx)(cn,{})})};function cn(){const e=(0,r.O7)(),{device:t}=e,o=(0,c.VK)((()=>ln.Z.state),[]),i=(0,c.VK)((()=>ln.Z.state.open?ln.Z.state.discussionInputStore.state.textStore.getValue():null),[]);if((0,n.useEffect)((()=>{var e;null===(e=an.Z.MenuScroller)||void 0===e||e.scrollToBottom()}),[i,o]),o.open){const{discussionStore:i,discussionInputStore:n,blockStore:s,discussionLocation:r}=o;let a;return a=t.isMobile?{menuType:Ze.og.Modal,title:(0,fe.jsx)(v.FormattedMessage,{defaultMessage:"Comments",id:"discussion.mobileReplyMenu.title"}),right:(0,fe.jsx)(v.FormattedMessage,{defaultMessage:"Close",id:"discussion.mobileReplyMenu.closeButton.label"}),onClickRight:()=>O.UZ(e),whiteBackground:!0}:{menuType:Ze.og.Popup,width:420,minHeight:"100px",maxHeight:"50vh",maxWidth:"100%"},(0,fe.jsx)(Le.Z,{className:Te.LoZ,...a,children:(0,fe.jsx)($i.Z,{capture:!0,allowMobileAutoScroll:!0,render:()=>(0,fe.jsx)(gi,{store:i,discussionInputStore:n,onDismiss:()=>O.UZ(e),format:ne.DiscussionFormat.Menu,isFirst:!0,isOnly:!0,discussionLocation:r,showResolveButtonByDefaultIfPossible:!0,blockStore:s,collapsed:!1})})})}return null}},370775:(e,t,o)=>{o.d(t,{S:()=>p});o(667294);var i=o(886628),n=o(724405),s=o(554368),r=o(177420),a=o(519889),l=o(401898),d=o(670301),c=o(45653),u=o(983420),m=o(785893);function p(e){let{authorStore:t,avatarSize:o,avatarStyle:p}=e;const g=(0,i.VK)((()=>(0,u.TL)(t)),[t]),h=(0,n.yK)((e=>({placeholder:{width:o,height:o,background:e.lightDividerColor,borderRadius:o/2,flexShrink:0,...p}})),[o,p]);return g.asActor?g.table===a.KJ?(0,m.jsx)(c.Z,{hasTooltip:!0,userValue:g.asActor,style:p,size:o,avatarShouldShowShadow:!1}):g.table===r.cZ?(0,m.jsx)(d.Z,{botValue:g,size:o,style:p}):g.table===s.y0?(0,m.jsx)("div",{style:h.placeholder}):void(0,l.t1)(g):(0,m.jsx)("div",{style:h.placeholder})}},167706:(e,t,o)=>{o.d(t,{Z:()=>l});o(667294);var i=o(724405),n=o(137810),s=o(953437),r=o(526388),a=o(785893);function l(e){let{text:t,tooltipText:o,icon:l}=e;const d=(0,i.yK)((e=>({icon:{height:"1em",width:"1em",marginRight:"0.25em",fill:e.mediumIconColor,marginBottom:"0.1em"},tooltip:{background:e.contentBackground,boxShadow:e.lightBoxShadow},container:{display:"flex",alignItems:"center",fontWeight:n.Z.fontWeight.regular,color:e.mediumTextColor,fontSize:n.Z.fontSize.UISmall.desktop,textAlign:"center"},text:{display:"inline"}})),[]);return(0,a.jsx)(r.Z,{style:d.tooltip,render:e=>(0,a.jsx)("div",{style:d.text,...e,children:t}),renderTooltip:()=>(0,a.jsxs)("div",{style:d.container,children:[l(d.icon),(0,a.jsx)("div",{children:o})]}),alignment:s.ZP.Alignment.Start,placement:s.ZP.Placement.Bottom})}},212740:(e,t,o)=>{o.d(t,{Z:()=>P});o(757658);var i=o(667294),n=o(800480),s=o(886628),r=o(724405),a=o(406695),l=o(295519),d=o(509999),c=o(569651),u=o(421202),m=o(519889),p=o(709291),g=o(653965),h=o(307032),f=o(137810),x=(o(95477),o(566890)),v=o(80444),S=o(925489),b=o(788632),y=o(319385),C=o(619671),j=o(206258),w=o(176117),k=o(88893),M=o(288280),L=o(4827),I=o(278030),R=o(45653),B=o(629551),D=o(399036),T=(o(551365),o(433929)),Z=(o(61766),o(985526),o(813023),o(824118)),F=(o(753876),o(912867),o(785893));Z.Ae;function A(e){return(0,s.VK)((()=>{if(!e)return{collectionStore:void 0,schema:void 0,format:void 0};const t=e.getAssociatedCollectionStore();let o,i;return o=t?t.getSchema():D.Kc(T.default.getIntl()),t&&(i=(0,l.i)(t.getFormat(),o,void 0,a.j5.Collection)),{collectionStore:t,schema:o,format:i}}),[e])}const V=["Title","Pronoun","Teams (via Teams DB)","Office","Manager","Languages (Fluency)","Tenure"],K={"Teams (via Teams DB)":"Teams","Languages (Fluency)":"Languages"};function P(e){let{targetUserStore:t}=e;const o=(0,r.yK)((e=>({wrapper:{minWidth:100,maxWidth:300},profile:{padding:"10px 12px 12px 10px"},content:{padding:"8px 10px 10px"},breadcrumb:{color:e.text.secondary},profileTitle:{paddingLeft:20,fontSize:18,lineHeight:1.25,fontWeight:f.Z.fontWeight.semibold,color:e.text.primary},profileSubtitle:{paddingLeft:20,paddingTop:2,fontSize:f.Z.fontSize.UISmall.desktop,color:e.icon.primary,paddingBottom:1},profileMeetingContainer:{display:"flex",alignItems:"center",paddingLeft:20,paddingTop:2,cursor:"pointer"},profileMeetingLeftIcon:{},profileMeetingText:{paddingLeft:4,paddingRight:4,fontSize:f.Z.fontSize.UISmall.desktop,lineHeight:1.25,color:e.text.primary},profileMeetingRightIcon:{},profileKeyRow:{minWidth:80},profileKeyText:{textTransform:"capitalize",fontWeight:500},description:{padding:"6px 8px 12px 20px",fontSize:f.Z.fontSize.UISmall.desktop,color:e.icon.primary,borderTop:`1px solid ${e.regularDividerColor}`}})),[]),d=(0,s.VK)((()=>v.default.state.currentSpaceStore),[]),c=(0,s.VK)((()=>v.default.state.currentUserStore),[]),m=(0,s.VK)((()=>!!t&&t.isDefined()),[t]),p=(0,s.VK)((()=>{if(!t)return;const e=t.getEmail();if(!e)return;const o=y.default.getConfigKey("notion_people_block_id","data")[e];if(!o)return;return j.G.createChildStore(t,{table:u.iU,id:(0,h.Mt)(o)})}),[t]),{collectionStore:g,schema:b,format:w}=A(p),k=function(e){let{collectionStore:t,format:o,schema:i,userPeopleCollectionPageStore:n}=e;return(0,s.VK)((()=>{var e;if(!(t&&o&&i&&n))return;const s=(0,l.i)(o,i,void 0,a.j5.Collection),r=null==s||null===(e=s.collection_page_properties)||void 0===e?void 0:e.filter((e=>{var t;const o=null===(t=i[e.property])||void 0===t?void 0:t.name;return void 0!==o&&V.includes(o)}));if(!r)return;const d={};return r.forEach((e=>{var o;d[(null===(o=i[e.property])||void 0===o?void 0:o.name)||""]=(0,F.jsx)(L.Z,{store:n,property:e.property,locked:!0,disabled:!0,format:I.C.Page,onTab:()=>{},onUntab:()=>{},tableWrap:!1,blockPropertyValueOverlayStore:C.Z,collectionStore:t})})),d}),[t,i,o,n])}({collectionStore:g,format:w,schema:b,userPeopleCollectionPageStore:p}),M=(0,n.O7)(),R=(0,i.useMemo)((()=>new S.Z(M)),[M]);(0,i.useEffect)((()=>{g&&R.setContext({type:"collectionPage",collectionStore:g})}),[R,g]);const D=(0,s.VK)((()=>!!(t&&c&&m)&&t.id===c.id),[t,c,m]);return t&&m&&d?p&&R&&k?(0,F.jsx)("div",{style:o.wrapper,children:(0,F.jsx)(x.L1,{value:R,children:(0,F.jsxs)(B.Ht,{children:[(0,F.jsx)(B.gq,{gap:3,alignItems:"center",style:o.profile,children:(0,F.jsx)(E,{userStore:t,styles:o})}),(0,F.jsxs)("div",{style:o.description,children:[(0,F.jsx)(z,{userProfile:k,styles:o}),D?(0,F.jsx)(B.gq,{gap:1,alignItems:"center",children:(0,F.jsx)(U,{spaceStore:d,limit:5,styles:o})}):void 0]})]})})}):(0,F.jsx)("div",{style:o.wrapper,children:(0,F.jsxs)(B.Ht,{children:[(0,F.jsx)(B.gq,{gap:3,alignItems:"center",style:o.profile,children:(0,F.jsx)(E,{userStore:t,styles:o})}),D?(0,F.jsx)("div",{style:o.description,children:(0,F.jsx)(B.gq,{gap:1,alignItems:"center",children:(0,F.jsx)(U,{spaceStore:d,limit:5,styles:o})})}):void 0]})}):null}function E(e){let{userStore:t,styles:o}=e;const i=(0,p.useIntl)(),{name:n,email:r,firstName:a}=(0,s.VK)((()=>{var e;return{name:t.getFullName(i),email:t.getEmail(),firstName:null===(e=t.getFullName(i))||void 0===e?void 0:e.split(" ")[0]}}),[t,i]);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(R.Z,{userStore:t,size:70,borderStyle:"none"}),(0,F.jsxs)(B.Ht,{gap:1,children:[(0,F.jsx)("div",{style:o.profileTitle,children:n}),(0,F.jsx)("div",{style:o.profileSubtitle,children:r}),a?(0,F.jsxs)("div",{style:o.profileMeetingContainer,onClick:()=>{window.open(`https://calendar.notion.so/meet-with/${r}`,"_blank")},children:[(0,F.jsx)("div",{style:o.profileMeetingLeftIcon,children:(0,c.C)({width:12,height:12})}),(0,F.jsx)("div",{style:o.profileMeetingText,children:(0,F.jsx)(p.FormattedMessage,{id:"people.profile.setMeeting",defaultMessage:"Meet with {name}",values:{name:a}})}),(0,F.jsx)("div",{style:o.profileMeetingRightIcon,children:(0,d.J)({width:12,height:12})})]}):void 0]})]})}function z(e){let{userProfile:t,styles:o}=e;return t?(0,F.jsx)(F.Fragment,{children:V.filter((e=>t[e])).map((e=>(0,F.jsxs)(B.gq,{gap:1,alignItems:"center",children:[(0,F.jsx)(B.Ht,{children:(0,F.jsx)(B.gq,{style:o.profileKeyRow,children:(0,F.jsx)("div",{style:o.profileKeyText,children:K[e]?K[e]:e})})}),(0,F.jsx)(B.Ht,{style:{transform:"scale(0.9)",transformOrigin:"center left"},children:t[e]})]},e)))}):null}function U(e){let{spaceStore:t,limit:o,styles:i}=e;const{userSimilarityList:n}=(0,s.VK)((()=>{const e=M.subscriptionDataStoreInstance.state,i=e?k.CM(e):[],n=w.O.state||{},s=i.map((e=>{const t=n[e.userId];return{id:e.userId,similarity:t||0}})).sort(((e,t)=>t.similarity-e.similarity)).slice(0,o),r=[],a=g.yW(s.map((e=>{const o=j.U6.createChildStore(t,{table:m.KJ,id:e.id});return r.push({id:e.id,similarity:e.similarity,userStore:o}),o.isReady()})));return{isOnline:b.Z.state.online,subscriptionDataStoreData:e,userSimilarityData:w.O.state||{},visibleUsersLoaded:a,visibleUsers:i,userSimilarityList:r}}),[t,o]);return t&&n&&0!==n.length?(0,F.jsxs)(B.gq,{gap:1,alignItems:"center",style:{paddingTop:4},children:[(0,F.jsx)(B.Ht,{children:(0,F.jsx)(B.gq,{style:i.profileKeyRow,children:(0,F.jsx)("div",{style:i.profileKeyText,children:"Coworkers"})})}),(0,F.jsx)(B.Ht,{children:(0,F.jsx)(B.gq,{gap:5,children:(0,F.jsx)("div",{children:(0,F.jsx)("div",{style:{display:"flex",position:"relative",float:"right"},children:n.map((e=>(0,F.jsx)("div",{style:{marginLeft:1.5},children:(0,F.jsx)(R.Z,{userStore:e.userStore,size:18})},e.id)))})})})})]}):null}},293963:(e,t,o)=>{o.d(t,{z:()=>a});o(667294);var i=o(724405),n=o(709291),s=o(785893);const r=8;function a(e){let{color:t,size:o,style:a}=e;const l=(0,n.useIntl)(),d=(0,i.yK)((e=>({dot:{height:o||r,width:o||r,background:t||e.blueColor,flexShrink:0,borderRadius:"100%",pointerEvents:"none",...a}})),[o,t,a]);return(0,s.jsx)("div",{role:"img","aria-label":l.formatMessage({id:"statusDot.ariaLabel",defaultMessage:"New"}),style:d.dot})}},66957:(e,t,o)=>{o.d(t,{Z:()=>u});var i=o(667294),n=o(800480),s=o(886628),r=o(724405),a=o(460709),l=o(489728),d=o(785893);function c(e){let{tabs:t,selectedIndex:o,onChange:c,separatorIndexes:u,right:m,style:p,rightStyle:g,tabStyle:h,tabTitleStyle:f,tabBorderStyle:x,selectedTabStyle:v,readOnly:S,hideTabBorder:b}=e;const y=(0,i.useContext)(a.Xp),{device:C,WindowSizeStore:j}=(0,n.O7)(),{safePaddingLeft:w,safePaddingRight:k}=(0,s.VK)((()=>({safePaddingLeft:j.getSafePaddingLeftCSS(16),safePaddingRight:j.getSafePaddingRightCSS(16)})),[j]),M=(0,r.yK)((e=>{const t={paddingTop:6,paddingBottom:6,whiteSpace:"nowrap",minWidth:0,flexShrink:0,color:e.mediumTextColor,...h},o=`inset 0 -1px 0 ${e.regularDividerColor}`,i=y.menuType===a.og.Popup,n={fontSize:16,paddingTop:2,paddingLeft:i?16:w,paddingRight:i?16:k,zIndex:2,height:44,background:e.popoverBackground};return{container:{overflowY:"visible",overflowX:"auto",display:"flex",width:"100%",position:"relative",boxShadow:b?void 0:o,...C.isMobile?n:{fontSize:14,paddingLeft:8,paddingRight:8,zIndex:1},...p},separator:{display:"inline-flex",alignItems:"center",margin:"0 4px",paddingBottom:4,whiteSpace:"nowrap",minWidth:0,flexShrink:0,color:e.regularDividerColor},mobile:{},tab:t,selectedTab:{...t,position:"relative",color:e.regularTextColor,...v},border:{borderBottom:`2px solid ${e.regularTextColor}`,position:"absolute",bottom:0,left:8,right:8,...x},rightContainer:{flexGrow:1,display:"flex",alignItems:"center",justifyContent:"flex-end",color:e.mediumTextColor,...g}}}),[y.menuType,C.isMobile,g,w,k,v,p,x,h,b]);return(0,d.jsxs)("div",{className:"hide-scrollbar",style:M.container,children:[t.map(((e,t)=>{const n=t===o;return(0,d.jsxs)(i.Fragment,{children:[(0,d.jsxs)("div",{style:n?M.selectedTab:M.tab,children:[(0,d.jsx)(l.Z,{style:f,onClick:()=>c(t),disabled:S,mobileFeedback:C.isMobile,children:e}),n&&(0,d.jsx)("div",{style:M.border})]},`tabButton-${t}`),u&&u.includes(t)&&(0,d.jsx)("div",{style:M.separator,className:"notranslate",children:"|"},`${t}-separator`)]},t)})),m&&(0,d.jsx)("div",{style:M.rightContainer,children:m})]})}const u=i.memo(c)},972402:(e,t,o)=>{o.d(t,{Z:()=>s});var i=o(535431);class n extends i.Z{}const s=new n},983420:(e,t,o)=>{o.d(t,{TL:()=>u,nc:()=>c,ue:()=>d});var i=o(266897),n=o(554368),s=o(177420),r=o(519889),a=o(401898),l=o(206258);function d(e){const{parentStore:t,pointer:o}=e,n=(0,l.Kv)(t,o).getValue();if(n)return(0,i.LU)({table:o.table,value:n})}function c(e){const{parentStore:t,pointer:o}=e;return o.table===s.cZ?l.Qx.createChildStore(t,o):o.table===r.KJ?l.U6.createChildStore(t,o):o.table===n.y0?l.fg.createChildStore(t,o):void(0,a.t1)(o)}function u(e){return e.table===s.cZ?(0,i.ON)(e.getValue()):e.table===r.KJ?(0,i.m3)(e.getValue()):e.table===n.y0?(0,i.I4)(e.getValue()):void(0,a.t1)(e)}},370345:(e,t,o)=>{o.d(t,{Z:()=>s});var i=o(667294),n=o(800480);function s(e){const t=(0,n.O7)(),{onLongPress:o,hapticsEnabled:s=!0,timeout:r=300}=e,a=(0,i.useCallback)((()=>{var e,i,n;s&&(null!==(e=t.mobileNative)&&void 0!==e&&e.buzz?t.mobileNative.buzz():null===(i=(n=window.navigator).vibrate)||void 0===i||i.call(n,20));o()}),[t.mobileNative,s,o]),l=(0,i.useRef)(),d=(0,i.useRef)(0),c=(0,i.useRef)(0),u=(0,i.useCallback)((()=>clearTimeout(l.current)),[]);(0,i.useEffect)((()=>u),[u]);return{onTouchStart:(0,i.useCallback)((()=>{clearTimeout(l.current),l.current=setTimeout(a,r)}),[r,a]),onTouchMove:(0,i.useCallback)((e=>{const t=e.touches[0].clientX,o=e.touches[0].clientY;(Math.abs(t-d.current)>50||Math.abs(o-c.current)>50)&&clearTimeout(l.current)}),[]),onTouchEnd:u,onTouchCancel:u}}},863334:(e,t,o)=>{o.d(t,{Z:()=>s});var i=o(749085);class n extends i.default{getInitialState(){return{}}}const s=n},107189:(e,t,o)=>{o.d(t,{K:()=>s});o(667294);var i=o(745238),n=o(785893);const s=(0,i.IU)("arrowDownSmall",{viewBox:"0 0 12 12",svg:(0,n.jsx)("path",{d:"M5.99756 0.850098C5.53564 0.850098 5.21875 1.17236 5.21875 1.65576V7.61768L5.27246 8.7832L4.19287 7.53711L2.98438 6.33398C2.84473 6.18896 2.66211 6.09229 2.42578 6.09229C2.00684 6.09229 1.68994 6.40381 1.68994 6.84424C1.68994 7.04834 1.77051 7.23633 1.93164 7.40283L5.42285 10.8994C5.56787 11.0498 5.78809 11.1357 5.99756 11.1357C6.2124 11.1357 6.42725 11.0498 6.57227 10.8994L10.0688 7.40283C10.23 7.23633 10.3105 7.04834 10.3105 6.84424C10.3105 6.40381 9.99365 6.09229 9.57471 6.09229C9.34375 6.09229 9.16113 6.18896 9.01611 6.33398L7.80762 7.53711L6.72803 8.7832L6.77637 7.61768V1.65576C6.77637 1.17236 6.46484 0.850098 5.99756 0.850098Z"})})},37652:(e,t,o)=>{o.d(t,{V:()=>s});o(667294);var i=o(745238),n=o(785893);const s=(0,i.IU)("arrowLeft",{viewBox:"0 0 30 30",svg:(0,n.jsx)("polygon",{points:"29 14 4.813 14 13.406 5.406 12 4 1 15 12 26 13.406 24.594 4.813 16 29 16"})})},91315:(e,t,o)=>{o.d(t,{r:()=>s});o(667294);var i=o(745238),n=o(785893);const s=(0,i.IU)("circleCheckFilled",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M8 16c4.377 0 8-3.631 8-8 0-4.376-3.631-8-8.008-8C3.624 0 0 3.624 0 8c0 4.369 3.631 8 8 8zm-.886-4.165c-.267 0-.487-.11-.69-.384l-1.97-2.416a.852.852 0 01-.187-.51c0-.352.274-.643.627-.643.228 0 .4.07.596.33l1.592 2.055 3.35-5.38c.148-.236.352-.362.556-.362.345 0 .667.236.667.604 0 .173-.102.353-.196.518l-3.686 5.804c-.165.259-.393.384-.66.384z"})})},31505:(e,t,o)=>{o.d(t,{Y:()=>s});o(667294);var i=o(745238),n=o(785893);const s=(0,i.IU)("collectionTimelineArrowLeft",{viewBox:"0 0 9 7",svg:(0,n.jsx)("path",{d:"M0 3.5021C0 3.70786 0.0939831 3.93041 0.237195 4.06479L3.11934 6.76065C3.28493 6.91602 3.48633 7 3.67877 7C4.17106 7 4.48881 6.68506 4.48881 6.27774C4.48881 6.03839 4.37245 5.86203 4.22029 5.72345L3.19095 4.77025L2.56887 4.22855L3.47737 4.27055L8.13625 4.27055C8.6554 4.27055 9 3.96401 9 3.5021C9 3.04019 8.6554 2.73365 8.13625 2.73365L3.47737 2.73365L2.56887 2.77564L3.19095 2.23395L4.22029 1.27654C4.37245 1.13377 4.48881 0.961608 4.48881 0.722255C4.48881 0.314937 4.17106 0 3.67877 0C3.48633 0 3.28493 0.0839832 3.11487 0.239352L0.237195 2.93941C0.0939831 3.07378 0 3.29634 0 3.5021Z"})})},239301:(e,t,o)=>{o.d(t,{n:()=>s});o(667294);var i=o(745238),n=o(785893);const s=(0,i.IU)("collectionTimelineArrowRight",{viewBox:"0 0 9 7",svg:(0,n.jsx)("path",{d:"M9 3.4979C9 3.29214 8.90602 3.06959 8.7628 2.93521L5.88066 0.239352C5.71507 0.0839835 5.51368 3.13148e-07 5.32123 2.96324e-07C4.82894 2.53287e-07 4.51119 0.314937 4.51119 0.722256C4.51119 0.961608 4.62755 1.13797 4.77971 1.27654L5.80905 2.22975L6.43113 2.77145L5.52263 2.72945L0.863749 2.72945C0.344604 2.72945 -6.62078e-07 3.03599 -7.02459e-07 3.4979C-7.4284e-07 3.95981 0.344604 4.26635 0.863749 4.26635L5.52263 4.26635L6.43113 4.22436L5.80905 4.76605L4.77971 5.72346C4.62755 5.86623 4.51119 6.03839 4.51119 6.27774C4.51119 6.68506 4.82894 7 5.32123 7C5.51367 7 5.71507 6.91602 5.88513 6.76065L8.7628 4.06059C8.90602 3.92622 9 3.70366 9 3.4979Z"})})},340304:(e,t,o)=>{o.d(t,{w:()=>s});o(667294);var i=o(745238),n=o(785893);const s=(0,i.IU)("document",{viewBox:"0 0 23.5 23.5",svg:(0,n.jsx)("path",{d:"M9.14 8.156a.494.494 0 01-.5-.5c0-.14.047-.258.141-.351a.487.487 0 01.36-.14h5.718a.477.477 0 01.492.492.494.494 0 01-.14.35.464.464 0 01-.352.15H9.141zm0 2.664a.487.487 0 01-.359-.14.504.504 0 01-.14-.36c0-.135.046-.25.14-.343a.487.487 0 01.36-.141h5.718a.477.477 0 01.493.484c0 .14-.047.26-.141.36a.477.477 0 01-.352.14H9.141zm0 2.672a.487.487 0 01-.359-.14.468.468 0 01-.14-.344c0-.14.046-.258.14-.352a.473.473 0 01.36-.148h2.765c.146 0 .266.05.36.148a.48.48 0 01.14.352c0 .135-.047.25-.14.344a.487.487 0 01-.36.14H9.141zm-3.843 4.266V5.968c0-.838.213-1.473.64-1.905.428-.438 1.06-.657 1.899-.657h8.32c.839 0 1.472.219 1.899.656.427.433.64 1.068.64 1.907v11.789c0 .844-.213 1.482-.64 1.914-.427.432-1.06.648-1.899.648h-8.32c-.839 0-1.471-.216-1.899-.648-.427-.432-.64-1.07-.64-1.914zm1.539-.094c0 .36.094.635.281.828.188.193.472.29.852.29h8.062c.38 0 .664-.097.852-.29.187-.193.281-.469.281-.828V6.07c0-.364-.094-.643-.281-.836-.188-.198-.471-.296-.852-.296H7.97c-.38 0-.664.098-.852.296-.187.193-.281.472-.281.836v11.594z"})})},322962:(e,t,o)=>{o.d(t,{O:()=>s});o(667294);var i=o(745238),n=o(785893);const s=(0,i.IU)("mention",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M1 9.86523C1 15.2939 4.72705 18.6807 9.98975 18.6807C11.3511 18.6807 12.4634 18.5312 13.1606 18.2905C13.6919 18.1079 13.8828 17.8174 13.8828 17.4521C13.8828 17.0537 13.6089 16.7715 13.1523 16.7715C13.0195 16.7715 12.8784 16.7881 12.6958 16.8213C11.9238 16.9873 11.2266 17.1118 10.2637 17.1118C5.74805 17.1118 2.74316 14.4058 2.74316 9.91504C2.74316 5.56543 5.61523 2.56055 9.88184 2.56055C13.7417 2.56055 16.7383 4.97607 16.7383 9.11816C16.7383 11.3511 15.9995 12.8452 14.8125 12.8452C14.0239 12.8452 13.5757 12.3472 13.5757 11.4839V6.44531C13.5757 5.84766 13.252 5.49072 12.6709 5.49072C12.0981 5.49072 11.7578 5.84766 11.7578 6.44531V7.10107H11.6333C11.21 6.09668 10.2305 5.49072 9.01855 5.49072C6.90186 5.49072 5.43262 7.28369 5.43262 9.89844C5.43262 12.5547 6.91846 14.3892 9.11816 14.3892C10.3799 14.3892 11.3013 13.7417 11.7578 12.6045H11.8823C12.1147 13.7168 13.0942 14.3809 14.4307 14.3809C16.8877 14.3809 18.3984 12.1895 18.3984 8.96045C18.3984 4.1626 14.8706 1 9.89014 1C4.66064 1 1 4.56104 1 9.86523ZM9.5415 12.7207C8.26318 12.7207 7.46631 11.6499 7.46631 9.92334C7.46631 8.21338 8.27148 7.14258 9.5498 7.14258C10.8364 7.14258 11.6582 8.20508 11.6582 9.89844C11.6582 11.625 10.8281 12.7207 9.5415 12.7207Z"})})},740350:(e,t,o)=>{o.d(t,{V:()=>s});o(667294);var i=o(745238),n=o(785893);const s=(0,i.IU)("reactionAdd",{viewBox:"0 0 16 16",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M8.7207 12.0259C8.7207 12.4243 9.04492 12.7446 9.43945 12.7446H11.4199V14.7251C11.4199 15.1235 11.7441 15.4438 12.1426 15.4438C12.5371 15.4438 12.8613 15.1235 12.8613 14.7251V12.7446H14.8418C15.2363 12.7446 15.5605 12.4243 15.5605 12.0259C15.5605 11.6274 15.2363 11.3032 14.8418 11.3032H12.8613V9.32666C12.8613 8.92822 12.5371 8.604 12.1426 8.604C11.7441 8.604 11.4199 8.92822 11.4199 9.32666V11.3032H9.43945C9.04492 11.3032 8.7207 11.6274 8.7207 12.0259Z"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.02947 13.6952C8.43019 13.8731 7.79681 13.9688 7.14258 13.9688C3.46729 13.9688 0.439453 10.9409 0.439453 7.25928C0.439453 3.58398 3.46094 0.556152 7.14258 0.556152C10.8179 0.556152 13.8457 3.58398 13.8457 7.25928C13.8457 7.72257 13.7979 8.1755 13.7069 8.61336C13.439 8.02567 12.8508 7.61289 12.1648 7.60415C12.1724 7.49021 12.1763 7.37521 12.1763 7.25928C12.1763 4.47266 9.9292 2.22559 7.14258 2.22559C4.34961 2.22559 2.11523 4.47266 2.11523 7.25928C2.11523 10.0522 4.35596 12.2993 7.14258 12.2993C7.34385 12.2993 7.54226 12.2876 7.73717 12.2649C7.83478 12.9674 8.35636 13.53 9.02947 13.6952ZM6.02539 5.83105C6.02539 6.31982 5.67627 6.67529 5.28271 6.67529C4.88916 6.67529 4.55908 6.31982 4.55908 5.83105C4.55908 5.33594 4.88916 4.98047 5.28271 4.98047C5.67627 4.98047 6.02539 5.33594 6.02539 5.83105ZM9.73242 5.83105C9.73242 6.31982 9.3833 6.67529 8.99609 6.67529C8.60254 6.67529 8.26611 6.31982 8.26611 5.83105C8.26611 5.33594 8.59619 4.98047 8.99609 4.98047C9.38965 4.98047 9.73242 5.33594 9.73242 5.83105ZM9.37695 8.9668C9.37695 9.39844 8.48193 10.2808 7.14258 10.2808C5.79688 10.2808 4.90186 9.39844 4.90186 8.9668C4.90186 8.80811 5.06055 8.72559 5.21289 8.80176L5.22971 8.81029C5.68936 9.04333 6.22701 9.31592 7.14258 9.31592C8.01512 9.31592 8.53968 9.05921 8.99207 8.83782C9.01689 8.82568 9.04149 8.81364 9.06592 8.80176C9.21826 8.73193 9.37695 8.80811 9.37695 8.9668Z"})]})})},418101:(e,t,o)=>{o.d(t,{b:()=>s});o(667294);var i=o(745238),n=o(785893);const s=(0,i.IU)("reopen",{viewBox:"0 0 14 14",svg:(0,n.jsx)("path",{d:"M1.64844 7.88477C1.64844 10.791 3.98047 13.1289 6.88086 13.1289C9.78125 13.1289 12.1133 10.791 12.1133 7.88477C12.1133 7.53906 11.873 7.29297 11.5273 7.29297C11.1934 7.29297 10.9707 7.53906 10.9707 7.88477C10.9707 10.1582 9.14844 11.9805 6.88086 11.9805C4.61328 11.9805 2.79688 10.1582 2.79688 7.88477C2.79688 5.59961 4.60156 3.78906 6.86328 3.78906C7.25 3.78906 7.60742 3.81836 7.90625 3.88281L6.3125 5.46484C6.20703 5.57617 6.1543 5.69922 6.1543 5.85156C6.1543 6.17383 6.39453 6.41992 6.71094 6.41992C6.875 6.41992 7.00977 6.36719 7.10938 6.26172L9.51758 3.83594C9.64062 3.71289 9.69922 3.57227 9.69922 3.41406C9.69922 3.26172 9.63477 3.10938 9.51758 2.99219L7.10938 0.548828C7.00977 0.4375 6.875 0.378906 6.71094 0.378906C6.39453 0.378906 6.1543 0.636719 6.1543 0.953125C6.1543 1.10547 6.20703 1.24023 6.30664 1.3457L7.72461 2.74609C7.4668 2.69336 7.16797 2.66406 6.86328 2.66406C3.96875 2.66406 1.64844 4.98438 1.64844 7.88477Z"})})},83065:(e,t,o)=>{o.d(t,{_:()=>s});o(667294);var i=o(745238),n=o(785893);const s=(0,i.IU)("sendArrow",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M9.79883 18.5894C14.6216 18.5894 18.5894 14.6216 18.5894 9.79883C18.5894 4.96777 14.6216 1 9.79053 1C4.95947 1 1 4.96777 1 9.79883C1 14.6216 4.96777 18.5894 9.79883 18.5894ZM9.79883 14.3062C9.20947 14.3062 8.76953 13.9077 8.76953 13.3433V9.69922L8.86914 8.00586L8.25488 8.84424L7.3916 9.81543C7.23389 10.0063 6.98486 10.1143 6.72754 10.1143C6.21289 10.1143 5.84766 9.75732 5.84766 9.25928C5.84766 8.99365 5.92236 8.79443 6.12158 8.58691L8.96045 5.61523C9.19287 5.35791 9.4585 5.2417 9.79883 5.2417C10.1309 5.2417 10.4048 5.36621 10.6372 5.61523L13.4761 8.58691C13.667 8.79443 13.75 8.99365 13.75 9.25928C13.75 9.75732 13.3848 10.1143 12.8618 10.1143C12.6128 10.1143 12.3638 10.0063 12.2061 9.81543L11.3428 8.86914L10.7202 7.99756L10.8281 9.69922V13.3433C10.8281 13.9077 10.3799 14.3062 9.79883 14.3062Z"})})},743590:(e,t,o)=>{o.d(t,{I:()=>s});o(667294);var i=o(745238),n=o(785893);const s=(0,i.IU)("suggestion",{viewBox:"0 0 16 16",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M8.651 8.465l-1.397.54c-.088.035-.17.018-.244-.053-.07-.07-.086-.15-.046-.237l.567-1.378 5.945-5.939 1.127 1.12-5.952 5.947zm6.447-6.427L13.97.91l.567-.567a.702.702 0 01.474-.217.615.615 0 01.468.165l.198.184c.136.14.2.306.191.495a.718.718 0 01-.217.494l-.554.574z"}),(0,n.jsx)("path",{d:"M14.084 5.065V9.65c0 .611-.152 1.072-.455 1.384-.299.308-.76.462-1.384.462h-4.1a1.37 1.37 0 00-.488.072 1.147 1.147 0 00-.389.277l-2.09 2.07v-1.879c0-.197-.043-.336-.131-.415-.084-.083-.218-.125-.402-.125H3.74c-.62 0-1.08-.154-1.384-.462-.299-.312-.448-.773-.448-1.384V4.62c0-.606.15-1.063.448-1.37.303-.313.765-.469 1.384-.469h6.36l1.3-1.298H3.71c-.664 0-1.227.123-1.688.369-.457.246-.806.6-1.048 1.061C.73 3.37.61 3.926.61 4.581v5.115c0 .655.121 1.213.363 1.675.246.457.595.808 1.048 1.054.457.246 1.004.37 1.641.37h.356v1.621c0 .294.073.527.218.699.15.171.356.257.62.257.184 0 .358-.049.52-.145a3.65 3.65 0 00.58-.435l2.255-1.998h4.073c.66 0 1.22-.123 1.681-.369a2.492 2.492 0 001.055-1.054c.242-.462.363-1.02.363-1.675V4.581c0-.267-.02-.518-.06-.752l-.208.215-1.031 1.021z"})]})})}}]);