(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[99380],{81346:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>I});s(757658);var n=s(667294),a=s(701302),o=s(800480),i=s(886628),r=s(76233),c=s(709291),l=s(203303),d=s(218265),u=s(247839),p=s(898104),m=s(95477),g=s(460709),h=s(268056),f=s(389224),b=s(223196),y=s(200758),k=s(845214),v=s(924666),M=s(693405),x=s(552275),N=s(301743),j=s(478140),_=s(632163),A=s(953437),T=s(672495),R=s(785893);const I=function(){(0,n.useEffect)((()=>{var e;return null===(e=u.electronApi)||void 0===e||null===(e=e.contextMenu)||void 0===e||e.addListener(S),()=>{var e;null===(e=u.electronApi)||void 0===e||null===(e=e.contextMenu)||void 0===e||e.removeListener(S)}}),[]);const e=(0,o.O7)(),t=(0,n.useRef)(document.activeElement),s=(0,n.useRef)(f.get());let r=null,p=null;(t.current instanceof HTMLInputElement||t.current instanceof HTMLTextAreaElement)&&(r=t.current.selectionStart,p=t.current.selectionEnd);const{menuInfo:h,open:v}=(0,i.VK)((()=>k.Z.state),[]),I=(0,i.VK)((()=>{if(!h)return[];const n=function(e,t){const s=[],n=function(e,t){const s="SpellCheckStore"in t&&t.SpellCheckStore,n=[];if(q(e)&&s&&s.isEnabled()){const t=s.getCorrections(e);for(const e of t)n.push({key:e,action:()=>{u.electronApi&&u.electronApi.replaceMisspelling&&u.electronApi.replaceMisspelling(e)},render:t=>(0,R.jsx)(x.Z,{...t,title:e})})}return n}(e,t);if(n.length>0){const e=s.length>0;s.push({key:"spellingCorrectionItems",items:n,render:t=>(0,R.jsx)(T.Z,{...t,topBorder:e})})}const a=function(e,t){const s="SpellCheckStore"in t&&t.SpellCheckStore,n=[];q(e)&&s&&s.isEnabled()&&!(0,y.x)(s)&&n.push({key:"learn-spelling",action:()=>{s.addToDictionary(e.misspelledWord)},render:e=>(0,R.jsx)(x.Z,{...e,title:(0,R.jsx)(c.FormattedMessage,{defaultMessage:"Add to dictionary",id:"desktop.spellcheckMenuItem.addToDictionary.title"})})});q(e)&&s&&s.isEnabled()&&n.push({key:"disable",action:()=>{s.setEnabled(!1)},render:e=>(0,R.jsx)(x.Z,{...e,title:(0,R.jsx)(c.FormattedMessage,{defaultMessage:"Disable spell check",id:"desktop.spellcheckMenuItem.disableSpellcheck.title"})})});return n}(e,t);if(a.length>0){const e=s.length>0;s.push({key:"disableSpellCheckItems",items:a,render:t=>(0,R.jsx)(T.Z,{...t,topBorder:e})})}const o=function(e){const t=[];e.selectionText&&e.selectionText.length>0&&t.push({key:"google",action:()=>{if(u.electronApi){const t=`https://www.google.com/search?q=${encodeURIComponent(e.selectionText.trim())}`;u.electronApi.openExternalUrl(t)}},render:e=>(0,R.jsx)(x.Z,{...e,title:(0,R.jsx)(c.FormattedMessage,{defaultMessage:"Search with Google",id:"desktop.searchMenuItem.searchWithGoogle.title"})})});return t}(e);if(o.length>0){const e=s.length>0;s.push({key:"searchItems",items:o,render:t=>(0,R.jsx)(T.Z,{...t,topBorder:e})})}const i=function(e){const t=[];if(!e.linkURL||0===e.linkURL.length)return t;const s=l.b({url:e.linkURL,domainBaseUrl:m.default.domainBaseUrl,protocol:m.default.protocol});e.linkURL.startsWith("mailto:")?t.push({key:"copy-email",action:()=>{var t;null!==(t=u.electronApi)&&void 0!==t&&t.copyText&&u.electronApi.copyText(e.linkText)},render:e=>(0,R.jsx)(x.Z,{...e,title:(0,R.jsx)(c.FormattedMessage,{defaultMessage:"Copy email address",id:"desktop.rightClickMenu.copyEmailAddress"})})}):t.push({key:"copy-link",action:()=>{var e;null!==(e=u.electronApi)&&void 0!==e&&e.copyText&&u.electronApi.copyText(s)},render:e=>(0,R.jsx)(x.Z,{...e,title:(0,R.jsx)(c.FormattedMessage,{defaultMessage:"Copy link",id:"desktop.rightClickMenu.copyLink"})})});t.push({key:"open-link",action:()=>{u.openExternalUrl(s)},render:e=>(0,R.jsx)(x.Z,{...e,title:(0,R.jsx)(c.FormattedMessage,{defaultMessage:"Open link in browser",id:"desktop.rightClickMenu.openLinkInBrowser"})})});const n=(a=s,(0,d.SV)(a)===m.default.domainBaseUrl);var a;n&&t.push({key:"open-link-new-tab",action:()=>{u.openInNewTab({url:s,position:"after-children"})},render:e=>(0,R.jsx)(x.Z,{...e,title:(0,R.jsx)(c.FormattedMessage,{defaultMessage:"Open link in new tab",id:"desktop.rightClickMenu.openLinkInNewTab"})})});n&&t.push({key:"open-link-new-window",action:()=>{u.openInNewWindow(s)},render:e=>(0,R.jsx)(x.Z,{...e,title:(0,R.jsx)(c.FormattedMessage,{defaultMessage:"Open link in new window",id:"desktop.rightClickMenu.openLinkInNewWindow"})})});return t}(e);if(i.length>0){const e=s.length>0;s.push({key:"linkMenuItems",items:i,render:t=>(0,R.jsx)(T.Z,{...t,topBorder:e})})}const r=function(e){const t=[];e.hasImageContents&&e.srcURL&&e.srcURL.length>0&&(t.push({key:"copy-image",action:()=>{u.electronApi&&u.electronApi.copyImage&&u.electronApi.copyImage(e.srcURL)},render:e=>(0,R.jsx)(x.Z,{...e,title:(0,R.jsx)(c.FormattedMessage,{defaultMessage:"Copy image",id:"desktop.rightClickMenu.copyImage"})})}),t.push({key:"copy-image-address",action:()=>{u.electronApi&&u.electronApi.copyText&&u.electronApi.copyText(l.b({url:e.srcURL,domainBaseUrl:m.default.domainBaseUrl,protocol:m.default.protocol}))},render:e=>(0,R.jsx)(x.Z,{...e,title:(0,R.jsx)(c.FormattedMessage,{defaultMessage:"Copy image address",id:"desktop.rightClickMenu.copyImageAddress"})})}));return t}(e);if(r.length>0){const e=s.length>0;s.push({key:"imageMenuItems",items:r,render:t=>(0,R.jsx)(T.Z,{...t,topBorder:e})})}const p=function(e){const t=[];if(!E(e))return t;e.editFlags.canCut&&t.push({key:"cut",action:()=>{u.electronApi&&u.electronApi.cut&&u.electronApi.cut()},render:e=>(0,R.jsx)(M.Z,{...e,title:(0,R.jsx)(c.FormattedMessage,{defaultMessage:"Cut",id:"desktop.textEditingMenuItem.cutAction.title"}),shortcut:"cut"})});e.editFlags.canCopy&&t.push({key:"copy",action:()=>{u.electronApi&&u.electronApi.copy&&u.electronApi.copy()},render:e=>(0,R.jsx)(M.Z,{...e,title:(0,R.jsx)(c.FormattedMessage,{defaultMessage:"Copy",id:"desktop.textEditingMenuItem.copyAction.title"}),shortcut:"copy"})});e.editFlags.canPaste&&t.push({key:"paste",action:()=>{u.electronApi&&u.electronApi.paste&&u.electronApi.paste()},render:e=>(0,R.jsx)(M.Z,{...e,title:(0,R.jsx)(c.FormattedMessage,{defaultMessage:"Paste",id:"desktop.textEditingMenuItem.pasteAction.title"}),shortcut:"paste"})});return t}(e);if(p.length>0){const e=s.length>0;s.push({key:"textEditingItems",items:p,render:t=>(0,R.jsx)(T.Z,{...t,topBorder:e})})}const g=function(e,t){const s="SpellCheckStore"in t&&t.SpellCheckStore,n=[];E(e)&&s&&!s.isEnabled()&&n.push({key:"enable",action:()=>{s.setEnabled(!0)},render:e=>(0,R.jsx)(x.Z,{...e,title:(0,R.jsx)(c.FormattedMessage,{defaultMessage:"Enable spell check",id:"desktop.spellcheckMenuItem.enableSpellcheck.title"})})});return n}(e,t);if(g.length>0){const e=s.length>0;s.push({key:"enableSpellCheckItems",items:g,render:t=>(0,R.jsx)(T.Z,{...t,topBorder:e})})}return s}(h,e);for(const o of n)for(const n of o.items){const o=n.action;n.action=n=>{t.current.focus(),t.current instanceof HTMLInputElement||t.current instanceof HTMLTextAreaElement?(t.current.selectionStart=r,t.current.selectionEnd=p):s.current&&s.current.startOffset!==s.current.endOffset&&f.set(s.current,e.device),a.default.afterNextFlush((()=>{o(n)}))}}return n}),[t,e,h,p,r]),{x:C,y:J}=function(e){const t=u.getCurrentZoom();return{x:e?e.x/t:0,y:e?e.y/t:0}}(h),w=new DOMRect(C,J,0,0);return(0,R.jsx)(A.ZP,{open:v&&I.length>0,popupType:b.k.Popup,originRect:w,render:()=>(0,R.jsx)(N.Z,{debugName:"ElectronContextMenu",capture:!0,allowEsc:!0,children:(0,R.jsx)(j.Z,{menuType:g.og.Popup,children:(0,R.jsx)(_.Z,{type:_.i.Vertical,sections:I,initialFocus:void 0,onAccept:Z})})}),onDismiss:Z})};function E(e){return e.isEditable||e.inputFieldType&&"none"!==e.inputFieldType}function q(e){return E(e)&&e.misspelledWord&&e.misspelledWord.length>0}function S(e,t){if(e.preventDefault(),t.misspelledWord){const e=v.default.state,s="editing"===e.mode&&(0,h.QY)(e.multiSelection);if(s&&s.selection.startIndex===s.selection.endIndex){const e=r.Oqk({textValue:s.store.getValue()||[],substring:t.misspelledWord,ignoreCase:!1}),n=s.selection.startIndex,a=r.PEL(e,n);a&&p.Z5({store:s.store,selection:a})}}k.Z.setState({open:!0,menuInfo:t})}function Z(){k.Z.setState({...k.Z.state,open:!1})}},200758:(e,t,s)=>{"use strict";s.d(t,{P:()=>d,x:()=>l});var n=s(927117),a=s.n(n),o=s(554153),i=s(653965),r=s(247839);const c="spellcheckEnabled";function l(e){return e instanceof d}class d{constructor(e){this.langCache=new(a())(100),this.enabled=void 0,this.currentInputElement=void 0,this.handleSelectionChange=()=>{if(this.enabled){const e=this.getInputElement();e&&e!==this.currentInputElement?(this.currentInputElement=e,this.handleDetectLanguageChange(e)):e&&this.handleDetectLanguageChangeThrottled(e)}},this.handleDetectLanguageChange=e=>{const t=e.textContent;if(t){let e=this.detectLanguages(t);void 0!==e&&(e=e.map((e=>navigator.language.startsWith(e)?navigator.language:e))),this.setLanguages(e)}},this.handleDetectLanguageChangeThrottled=i.P2(this.handleDetectLanguageChange,500),this.currentLanguages=void 0;const t=o.Z.get(c);this.setEnabled(void 0===t||t);const{isMac:s}=e.device;!s&&r.electronApi&&r.electronApi.loadSpellcheck&&(r.electronApi.loadSpellcheck(),document.addEventListener("selectionchange",this.handleSelectionChange))}setEnabled(e){this.enabled=e,o.Z.set(c,e),r.electronApi&&r.electronApi.setSpellCheckerLanguages&&(e?r.electronApi.setSpellCheckerLanguages(this.getLanguages()):r.electronApi.setSpellCheckerLanguages([]))}isEnabled(){return this.enabled}detectLanguages(e){let t;return this.langCache.cache[e]?(t=this.langCache.get(e),t):(r.electronApi&&r.electronApi.cld&&r.electronApi.cld.detect(e,((e,s)=>{s&&s.reliable&&s.languages&&(t=s.languages.map((e=>e.code)))})),this.langCache.set(e,t),t)}getCorrections(e){return e.dictionarySuggestions}setLanguages(e){i.Xy(this.currentLanguages,e)||(this.currentLanguages=e,r.electronApi&&r.electronApi.setSpellCheckerLanguages&&r.electronApi.setSpellCheckerLanguages(e||[]))}getInputElement(){const e=document.activeElement;if(e instanceof HTMLElement&&("input"===e.tagName||"true"===e.contentEditable))return e}getLanguages(){return navigator.languages.filter((e=>e.includes("-")))}}},845214:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=s(749085);class a extends n.default{getInitialState(){return{open:!1}}}const o=new a},60951:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Notification:()=>M});var n=s(653965),a=s(401898),o=s(218265),i=s(340902),r=s(266897),c=s(163171),l=s(399036),d=s(709410),u=s(238297),p=s(959753),m=s(755061),g=s(882883),h=s(458129),f=s(213493),b=s(870279),y=s(933709),k=s(519889),v=s(76233);function M(e){const{activity:t,getRecordValue:s,baseURL:M,userTimeZone:N,pageVisitSource:j,intl:_,useSimplifiedEmailSubjectForGrouping:A,isMobilePush:T,isMobilePushNotificationReplyActionEnabled:R}=e,I=p.om.fromGetRecordValueFn(s),E=(0,m.P6)({...e}),q=(0,m.XW)(E,_),S=(0,m.Qs)(E),Z=(0,m.xS)(E),C=(0,m.oP)({...e,intl:_}),J=(0,m.sn)({...e,intl:_}),w=(0,m.iR)({...e,intl:_}),L=(0,m.rn)({...e,intl:_}),V=(0,m.tA)({...e,intl:_});switch(t.type){case"top-level-block-created":return{subject:_.formatMessage(m.qJ.topLevelBlockCreated,{userName:q,targetName:C,spaceName:L})};case"top-level-block-deleted":return{subject:_.formatMessage(m.qJ.topLevelBlockDeleted,{userName:q,targetName:C,spaceName:L})};case"collection-row-created":return{subject:_.formatMessage(m.qJ.collectionRowCreated,{userName:q,targetName:C,collectionName:w})};case"collection-row-deleted":return{subject:_.formatMessage(m.qJ.collectionRowDeleted,{userName:q,targetName:C,collectionName:w})};case"block-edited":{let a;const o=t.getEdits();if(o.length){const t=o[0];if("block-changed"===t.type){const o=t.block_data.after.block_value,r=(0,u.ky)({block:o,getRecordValue:s});if("page"===o.type&&r){const o=t.block_schema||l.Kc(_),r=c.OS({before:t.block_data.before.block_value,after:t.block_data.after.block_value,schema:o}).filter((e=>{const t=o[e];return t&&"formula"!==t.type})).map((n=>{const a=o[n],i=a?a.name:void 0,r=(0,m.v4)({intl:_,property:n,schema:o,block:t.block_data.after.block_value,getRecordValue:s,userTimeZone:e.userTimeZone,baseURL:e.baseURL})||_.formatMessage(m.qJ.emptyBlockEditedProperty);return _.formatMessage(m.qJ.propertyNameAndValueEdited,{propertyName:i,propertyValue:r})})),d=i.B9({before:t.block_data.before.block_value,after:t.block_data.after.block_value}),u=n.oA(d.map((e=>{const n=(0,m._u)({formatProperty:e,intl:_}),a=(0,m.W9)({formatProperty:e,intl:_,block:t.block_data.after.block_value,getRecordValue:s});if(n&&a)return _.formatMessage(m.qJ.propertyNameAndValueEdited,{propertyName:n,propertyValue:a})})));a=_.formatList(r.concat(u),{type:"conjunction",style:"narrow"})}else a=(0,m._2)({intl:_,blockValue:o,getRecordValue:s,baseURL:M,userTimeZone:N})}else if("block-created"===t.type){const e=t.block_data.block_value;a=(0,m._2)({intl:_,blockValue:e,getRecordValue:s,baseURL:M,userTimeZone:N})}else if("block-deleted"===t.type){const e=t.block_data.block_value,n=(0,m._2)({intl:_,blockValue:e,getRecordValue:s,baseURL:M,userTimeZone:N});a=_.formatMessage(m.qJ.blockDeletedEditBody,{renderedBlock:n})}}return{subject:A?x(C,_):_.formatMessage(m.qJ.blockEditedNotification,{userName:q,blockName:C}),body:a}}case"block-property-edited":const D={subject:A?x(C,_):_.formatMessage(m.qJ.blockPropertyEditedNotification,{userName:q,blockName:C}),body:void 0},F=t.getEdits();if(F.length){const t=F[0],n=Object.entries(t.property_updates).filter((e=>{let[s,n]=e;const a=t.filtered_block_schema[s];return a&&!["formula","created_by","created_time"].includes(a.type)})).map((n=>{var a;let[o,i]=n;const r=t.filtered_block_schema[o],c=r?r.name:void 0,l=(0,m.Wy)({intl:_,propertySchema:r,textValue:(null===(a=i.after)||void 0===a?void 0:a.value)??[],getRecordValue:s,userTimeZone:e.userTimeZone,baseURL:e.baseURL})||_.formatMessage(m.qJ.emptyBlockEditedProperty);return _.formatMessage(m.qJ.propertyNameAndValueEdited,{propertyName:c,propertyValue:l})}));D.body=_.formatList(n,{type:"conjunction",style:"narrow"})}return T?{subject:_.formatMessage(m.qJ.mobileBlockPropertyEditedNotification,{userName:q}),subtitle:C,body:D.body,senderUserId:S,senderProfilePhoto:Z,conversationIdentifier:J}:D;case"permissions-edited":return{subject:_.formatMessage(m.qJ.userEditedPermissionsFor,{userName:q,targetName:C}),body:(0,m.gt)({intl:_,activity:t,getRecordValue:s,pageVisitSource:j,userTimeZone:e.userTimeZone})};case"user-mentioned":{const n=(0,m.kU)({intl:_,getRecordValue:s,baseURL:M,userTimeZone:e.userTimeZone,blockId:t.mentioned_block_id,property:t.mentioned_property});return T?{subject:_.formatMessage(m.qJ.mobileUserMentionedIn,{userName:q}),subtitle:C,body:n,senderUserId:S,senderProfilePhoto:Z,conversationIdentifier:J}:{subject:A?x(C,_):_.formatMessage(m.qJ.userMentionedIn,{userName:q,targetName:C}),body:n}}case"commented":{var U;let n,a,o;const i=null===(U=t.getEdits())||void 0===U?void 0:U[0];if(i)if(a=i.comment_id,o=i.discussion_id,"comment-created"===i.type){const t=s({table:b.x_,id:i.comment_id,spaceId:i.space_id}),a=i.comment_data||t;a&&(n=(0,g.X)({intl:_,textValue:a.text,getRecordModel:I,userTimeZone:e.userTimeZone}))}else if("comment-changed"===i.type)n=(0,g.X)({intl:_,textValue:i.comment_data.after.text,getRecordModel:I,userTimeZone:e.userTimeZone});else if("suggestion-created"===i.type){const t=I({table:y.qF,id:i.discussion_id,spaceId:i.space_id});var P;if(t&&"suggestion"===t.getType())n=(0,g.X)({intl:_,textValue:(0,d.Bb)({discussionContextData:(null===(P=t.getSuggestionRawContext())||void 0===P||null===(P=P.snapshot)||void 0===P?void 0:P.data)??[],discussionType:"suggestion",discussionId:t.id,intl:_}),getRecordModel:I,userTimeZone:e.userTimeZone})}else{const t=s({table:b.x_,id:i.comment_id,spaceId:i.space_id}),a=i.comment_data||t;if(a){const t=(0,g.X)({intl:_,textValue:a.text,getRecordModel:I,userTimeZone:e.userTimeZone});n=_.formatMessage(m.qJ.userDeletedComment,{commentText:t})}}return T?{subject:"suggestion-created"===(null==i?void 0:i.type)?_.formatMessage(m.qJ.mobileUserSuggestedSubject,{userName:q}):_.formatMessage(m.qJ.mobileUserCommentedSubject,{userName:q}),subtitle:C,body:n,senderUserId:S,senderProfilePhoto:Z,conversationIdentifier:J,categoryIdentifier:R?"comment_notification_category":void 0,commentId:a,discussionId:o}:{subject:A?x(C,_):"suggestion-created"===(null==i?void 0:i.type)?_.formatMessage(m.qJ.userSuggestedSubject,{userName:q,targetName:C}):_.formatMessage(m.qJ.userCommentedSubject,{userName:q,targetName:C}),body:n}}case"user-invited":const B=(0,o.pE)(C),O=B.length>0?B:_.formatMessage(m.qJ.defaultPageName);if(t.permission_group_id)return{subject:_.formatMessage(m.qJ.userAddedToSpace,{userName:q,workspaceName:O})};return{subject:0===E.filter(r.uC).length?_.formatMessage(m.qJ.userInvitedToSpaceByBot,{workspaceName:O}):_.formatMessage(m.qJ.userInvitedToSpace,{userName:q,workspaceName:O})};case"collection-edited":{let e,s=_.formatMessage(m.qJ.userEditedCollectionSubject,{userName:q,collectionName:C});const n=t.getEdits();if(n.length){const t=n[0];if("collection-changed"===t.type&&t.collection_data){const n=t.collection_data.after?t.collection_data.after.description:void 0,a=t.collection_data.before?t.collection_data.before.description:void 0;a&&!n?s=_.formatMessage(m.qJ.collectionDescriptionDeleted,{userName:q,collectionName:C}):!a&&n?(s=_.formatMessage(m.qJ.collectionDescriptionCreated,{userName:q,collectionName:C}),e=v.Jcv(n)):a&&n&&v.Dne(a,n)&&(e=v.Jcv(n))}else if("collection-created"===t.type&&t.collection_data){const n=t.collection_data.description;n&&(s=_.formatMessage(m.qJ.userCreatedCollectionSubject,{userName:q,collectionName:C}),e=v.Jcv(n))}}return{subject:s,body:e}}case"collection-view-edited":const W=e.getRecordValue({table:f.np,id:t.collection_view_id,spaceId:t.space_id}),G=W&&W.name||_.formatMessage(m.qJ.untitledCollectionView);return{subject:_.formatMessage(m.qJ.collectionViewEditedSubject,{userName:q,collectionViewName:G,collectionName:C})};case"collection-property-edited":const z=t.getEdits(),K=z.length&&z[0],X=K&&("collection-property-changed"===K.type?K.collection_property_data.after.name:K.collection_property_data.name)||_.formatMessage(m.qJ.collectionPropertyEditedUnknown);return t.collection_property_id,{subject:_.formatMessage(m.qJ.collectionPropertyEditedSubject,{userName:q,propertyType:X,collectionName:C})};case"reminder":return{subject:_.formatMessage(m.qJ.reminderSubject,{pageName:C}),body:(0,m.kU)({getRecordValue:s,baseURL:M,userTimeZone:e.userTimeZone,blockId:t.reminder_block_id,property:t.reminder_property,intl:_})};case"permission-group-edited":return{subject:(0,m.pF)({activity:t,intl:_,userName:q,targetName:C})};case"page-locked":case"page-unlocked":return{subject:"page-locked"===t.type?_.formatMessage(m.qJ.pageLockedActivity,{userName:q,pageName:C}):_.formatMessage(m.qJ.pageUnlockedActivity,{userName:q,pageName:C})};case"email-edited":return{subject:_.formatMessage(m.qJ.emailEditedActivity,{userName:q})};case"access-requested":{const e=I({id:t.getAccessRequestId(),table:h.J8,spaceId:t.getSpaceId()});if(!e||e.isPageAccessRequest()||e.isTeamMembershipRequest())return null!=e&&e.isEditPageAccessRequest()?{subject:_.formatMessage(m.qJ.editAccessRequestedSubject,{userName:q,pageName:C})}:{subject:_.formatMessage(m.qJ.accessRequestedSubject,{userName:q,pageName:C})};if(e.isGuestInviteRequest())return{subject:_.formatMessage(m.qJ.guestInviteRequestedSubject,{userName:q,workspaceName:C})};if(e.isSpaceMembershipRequest())return{subject:_.formatMessage(m.qJ.membershipRequestedSubject,{userName:q,workspaceName:C})};(0,a.t1)(e);break}case"access-request-resolved":{const e=I({id:t.getAccessRequestId(),table:h.J8,spaceId:t.getSpaceId()}),s=t.getEdits()[0].requested_for,n=s?I(s):void 0,a=null!=n&&n.isUser()?n.getEmail():_.formatMessage({defaultMessage:"a guest",id:"pushNotification.accessRequestResolved.invalidGuest"});return{subject:_.formatMessage("approved"===(null==e?void 0:e.status)?m.qJ.accessRequestResolvedApprovedSubject:m.qJ.accessRequestResolvedRejectedSubject,{guestEmail:a,pageName:C})}}case"page-deleted":return{subject:_.formatMessage(m.qJ.pageDeletedActivity,{userName:q})};case"page-restored":return{subject:_.formatMessage(m.qJ.pageRestoredActivity,{userName:q})};case"page-permanently-deleted":return{subject:_.formatMessage(m.qJ.pagePermanentlyDeletedActivity,{userName:q})};case"team-membership-edited":return{subject:_.formatMessage(m.qJ.userInvitedToTeam,{userName:q,teamName:C})};case"private-content-transferred":const Q=t.getEdits(),H=Q.length&&Q[0].from_user_id;if(!H)return{subject:_.formatMessage({defaultMessage:"{author} transferred private content to you: {pageName}",id:"pushNotification.privateContentTransferred.noFromUserName"},{author:q,pageName:C})};const Y=s({table:k.KJ,id:H});return{subject:_.formatMessage(m.qJ.privateContentTransferred,{author:q,pageName:C,fromUserName:Y&&p.kk.fromValue(k.KJ,Y).getFullName(_)})};case"permission-group-mentioned":const $=(0,m.Bg)({spaceId:t.space_id,permissionGroupId:t.mentioned_group_id,getRecordValue:e.getRecordValue}),ee=(0,m.jQ)(_,$);return{subject:A?x(C,_):_.formatMessage(m.qJ.permissionGroupMentionedIn,{userName:q,targetName:C,groupName:ee}),body:(0,m.kU)({intl:_,getRecordValue:s,baseURL:M,userTimeZone:e.userTimeZone,blockId:t.navigable_block_id,property:t.mentioned_property})};case"verification-expired":return{subject:_.formatMessage(m.qJ.verificationExpired,{pageName:C})};case"import-completed":const te=t.getEdits()[0],se="failed"===te.import_status?m.qJ.importFailed:m.qJ.importSuccessful;return{subject:_.formatMessage(se,{importSource:te.import_source})};case"export-completed":return{subject:_.formatMessage(m.qJ.exportCompleted)};case"in-app-notification-automation-action-triggered":const ne=t.getEdits()[0];return{subject:_.formatMessage(m.qJ.inAppNotificationAutomationActionTriggered,{automationName:V}),body:(0,g.X)({intl:_,textValue:ne.message.value,getRecordModel:I,userTimeZone:e.userTimeZone})}}}function x(e,t){return t.formatMessage({defaultMessage:"New activity in {pageTitle}",id:"emailActivity.pageActivity.simplifiedSubjectLine"},{pageTitle:e})}},970693:(e,t,s)=>{"use strict";s.d(t,{mb:()=>r,nK:()=>c,pe:()=>l});var n=s(640506),a=s(407057),o=s(253877),i=s(842875);function r(e){const{dateTime:t,intl:s,shortenDateAndRange:n}=e,i=o.OQ.toPersistedDate(t.valueOf());return a.ZV({value:i,allowRelativeDates:!0,intl:s,shortenDateAndRange:n,displayInUserTimezone:!0})}function c(e){const{dateTime:t,intl:s,userTimeZone:n,displayInUserTimezone:i,alwaysIncludeTimezone:r}=e,c=o.OQ.toPersistedDateTime(t.valueOf(),t.zoneName);return a.ZV({value:c,allowRelativeDates:!0,intl:s,userTimeZone:n,displayInUserTimezone:i,alwaysIncludeTimezone:r})}function l(e){const{luxonRange:t,intl:s}=e,r=o.OQ.toPersistedDateRange(t),c=a.ZV({value:r,allowRelativeDates:!1,shortenDateAndRange:!0,intl:s,displayInUserTimezone:!0}),l=t.end.setZone((0,i.r)()),d=a.mr({start_time:l.toFormat(n.jK),humanReadable:!1,intl:s});return s.formatMessage({id:"verification.timeRange",defaultMessage:"{formattedDateRange} at {formattedEndTime}"},{formattedDateRange:c,formattedEndTime:d})}},927117:(e,t,s)=>{var n=s(717187),a=s(35717);function o(e){if(!(this instanceof o))return new o(e);"number"==typeof e&&(e={max:e}),e||(e={}),n.EventEmitter.call(this),this.cache={},this.head=this.tail=null,this.length=0,this.max=e.max||1e3,this.maxAge=e.maxAge||0}e.exports=o,a(o,n.EventEmitter),Object.defineProperty(o.prototype,"keys",{get:function(){return Object.keys(this.cache)}}),o.prototype.clear=function(){this.cache={},this.head=this.tail=null,this.length=0},o.prototype.remove=function(e){if("string"!=typeof e&&(e=""+e),this.cache.hasOwnProperty(e)){var t=this.cache[e];return delete this.cache[e],this._unlink(e,t.prev,t.next),t.value}},o.prototype._unlink=function(e,t,s){this.length--,0===this.length?this.head=this.tail=null:this.head===e?(this.head=t,this.cache[this.head].next=null):this.tail===e?(this.tail=s,this.cache[this.tail].prev=null):(this.cache[t].next=s,this.cache[s].prev=t)},o.prototype.peek=function(e){if(this.cache.hasOwnProperty(e)){var t=this.cache[e];if(this._checkAge(e,t))return t.value}},o.prototype.set=function(e,t){var s;if("string"!=typeof e&&(e=""+e),this.cache.hasOwnProperty(e)){if((s=this.cache[e]).value=t,this.maxAge&&(s.modified=Date.now()),e===this.head)return t;this._unlink(e,s.prev,s.next)}else s={value:t,modified:0,next:null,prev:null},this.maxAge&&(s.modified=Date.now()),this.cache[e]=s,this.length===this.max&&this.evict();return this.length++,s.next=null,s.prev=this.head,this.head&&(this.cache[this.head].next=e),this.head=e,this.tail||(this.tail=e),t},o.prototype._checkAge=function(e,t){return!(this.maxAge&&Date.now()-t.modified>this.maxAge)||(this.remove(e),this.emit("evict",{key:e,value:t.value}),!1)},o.prototype.get=function(e){if("string"!=typeof e&&(e=""+e),this.cache.hasOwnProperty(e)){var t=this.cache[e];if(this._checkAge(e,t))return this.head!==e&&(e===this.tail?(this.tail=t.next,this.cache[this.tail].prev=null):this.cache[t.prev].next=t.next,this.cache[t.next].prev=t.prev,this.cache[this.head].next=e,t.prev=this.head,t.next=null,this.head=e),t.value}},o.prototype.evict=function(){if(this.tail){var e=this.tail,t=this.remove(this.tail);this.emit("evict",{key:e,value:t})}}}}]);