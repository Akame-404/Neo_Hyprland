"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[50801],{456305:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});a(667294);var r=a(886628),i=a(709291),n=a(843250),o=a(212982),s=a(322230),l=a(879500),d=a(169500),u=a(598167),c=a(785893);function g(e){const{onClose:t,onSuccess:a}=e,g=(0,r.qz)(void 0,s.Z);return(0,c.jsx)(u.Z,{className:n.Zp2,title:(0,c.jsx)(i.FormattedMessage,{id:"developerIntegrationsCreateInternal.title.label",defaultMessage:"Create a new integration"}),subtitle:(0,c.jsx)(i.FormattedMessage,{id:"developerIntegrationsCreateInternal.subtitle.label",defaultMessage:"We’ll walk you through how to set up a new integration"}),onNavigateBack:t,sideContent:(0,c.jsx)(l.T,{supportedPages:(0,o.H)("create-bot")}),children:(0,c.jsx)(d.Z,{onCreateNew:a,integrationFormStore:g,currentPage:"basic"})})}},169500:(e,t,a)=>{a.d(t,{Z:()=>$});var r=a(667294),i=a(800480),n=a(886628),o=a(421202),s=a(709291),l=a(653965),d=a(401898),u=a(376067),c=a(547307),g=a(212982),f=a(918514),m=a(80444),p=a(206258),b=a(433929),h=a(689614),x=a(785893);const v={key:"basic",title:b.default.formatMessage(g.sY.basicSectionTitle),fields:["type","space","name","icon"]},y=[v],M={type:{label:b.default.formatMessage(g.sY.integrationTypeLabel),subtitle:b.default.formatMessage(g.sY.integrationTypeSubtitle)},name:{label:b.default.formatMessage(g.sY.nameLabel),subtitle:b.default.formatMessage(g.sY.nameSubtitle)},icon:{label:b.default.formatMessage(g.sY.iconLabel),subtitle:b.default.formatMessage(g.sY.iconSubtitle)},space:{label:b.default.formatMessage(g.sY.spaceLabel),subtitle:b.default.formatMessage(g.sY.spaceSubtitle)}};var j=a(942402);const S=[{key:"capabilities",title:b.default.formatMessage(g.sY.capabilitiesSectionTitle),fields:["capabilities"]}],C={capabilities:{label:b.default.formatMessage(g.sY.capabilitiesLabel),caption:(0,x.jsx)(s.FormattedMessage,{id:"developerIntegrationForm.capabilities.caption",defaultMessage:"These requested capabilities will be displayed to users when they authorize your integration. See <inlinetextlink>developer docs</inlinetextlink> for more help.",values:{inlinetextlink:e=>(0,x.jsx)(j.Z,{href:"https://developers.notion.com/docs/authorization",children:e})}})}};const w={key:"external_oauth",title:b.default.formatMessage(g.sY.externalOauthSectionTitle),subtitle:(0,x.jsx)(s.FormattedMessage,{id:"developerIntegrationFormUnfurlingView.sectionSubtitle.external_oauth",defaultMessage:"See <textlink>Notion documentation</textlink> for information on <authlink>OAuth 2.0.</authlink>",values:{textlink:e=>(0,x.jsx)(j.Z,{href:"https://developers.notion.com/docs/build-a-link-preview-integration",external:!0,children:e}),authlink:e=>(0,x.jsx)(j.Z,{href:"https://datatracker.ietf.org/doc/html/rfc6749",external:!0,children:e})}}),fields:["icon","external_oauth_authorize_url","external_oauth_token_url","external_client_id","external_client_secret","external_oauth_scopes","external_deletion_url"]},k={icon:{label:b.default.formatMessage(g.sY.iconLabel),subtitle:b.default.formatMessage(g.sY.iconSubtitle)},external_oauth_authorize_url:{label:b.default.formatMessage(g.sY.externalOauthAuthorizeUrlLabel),caption:b.default.formatMessage(g.sY.externalOauthAuthorizeUrlCaption)},external_oauth_token_url:{label:b.default.formatMessage(g.sY.externalOauthTokenUrlLabel),caption:b.default.formatMessage(g.sY.externalOauthTokenUrlCaption)},external_client_id:{label:b.default.formatMessage(g.sY.externalClientIdLabel)},external_client_secret:{label:b.default.formatMessage(g.sY.externalClientSecretLabel)},external_deletion_url:{label:b.default.formatMessage(g.sY.externalDeletionUrlLabel),caption:b.default.formatMessage(g.sY.externalDeletionUrlCaption)}};var _=a(970764),T=a(724405),Z=a(824006);function I(e){const{label:t,subtitle:a,onClick:r,isDisabled:i,isActive:n}=e,o=(0,T.yK)((e=>({label:{fontSize:15,color:e.lightTextColor,display:"flex",justifyContent:"space-between"},subtitle:{fontSize:15,color:e.lightTextColor,paddingTop:15}})),[]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{style:o.label,children:[t,(0,x.jsx)(Z.Z,{onClick:r,on:n,disabled:i})]}),(0,x.jsx)("div",{style:o.subtitle,children:a})]})}const F=[{key:"organization",title:b.default.formatMessage(g.sY.organizationSectionTitle),fields:["developer_name","website_url","tagline","privacy_policy_url","terms_of_use_url","email"]},{key:"oauth",title:b.default.formatMessage(g.sY.oauthSectionTitle),fields:["redirect_uris","template_url"]}];function L(e){return{redirect_uris:{label:b.default.formatMessage(g.sY.redirectUrisLabel),subtitle:b.default.formatMessage(g.sY.redirectUrisSubtitle)},website_url:{label:b.default.formatMessage(g.sY.websiteUrlLabel),subtitle:b.default.formatMessage(g.sY.websiteUrlSubtitle)},tagline:{label:b.default.formatMessage(g.sY.taglineLabel),subtitle:b.default.formatMessage(g.sY.taglineSubtitle)},privacy_policy_url:{label:b.default.formatMessage(g.sY.privacyPolicyUrlLabel),subtitle:b.default.formatMessage(g.sY.privacyPolicyUrlSubtitle)},terms_of_use_url:{label:b.default.formatMessage(g.sY.termOfUseLabel),subtitle:b.default.formatMessage(g.sY.termOfUseSubtitle)},template_url:{label:b.default.formatMessage(g.sY.templateLabel),subtitle:b.default.formatMessage(g.sY.templateSubtitle)},email:{label:b.default.formatMessage(g.sY.emailLabel),subtitle:b.default.formatMessage(g.sY.emailSubtitle)},developer_name:{label:b.default.formatMessage(g.sY.developerNameLabel),subtitle:b.default.formatMessage(g.sY.developerNameSubtitle)}}}var P=a(733907),U=a(89101),B=a(531701),Y=a(138381),A=a(897122);const D=(0,s.defineMessages)({confirmTitle:{id:"developerIntegrationFormHandler.createIntegration.confirmationModal.title",defaultMessage:"Switch to Public integration?"},confirmContinue:{id:"developerIntegrationFormHandler.createIntegration.confirmationModal.confirm",defaultMessage:"Continue"},confirmCapability:{id:"developerIntegrationFormHandler.updateIntegration.capabilities.confirmationModal.title",defaultMessage:"Change requested capabilities?"},confirmCapabilityMessage:{id:"developerIntegrationFormHandler.updateIntegration.capabilities.confirmationModal.message",defaultMessage:"Any existing users of your integration will be required to re-authenticate."},confirmCapabilitySubmit:{id:"developerIntegrationFormHandler.updateIntegration.capabilities.confirmationModal.confirm",defaultMessage:"Change"},submitButtonCreate:{id:"formHandler.submitButton.create.label",defaultMessage:"Submit"},submitButtonUpdate:{id:"formHandler.submitButton.create.update",defaultMessage:"Save changes"},submitButtonContinue:{id:"formHandler.submitButton.continue.label",defaultMessage:"Continue"},submitButtonSaved:{id:"formHandler.submitButton.saved.label",defaultMessage:"Saved"}});function R(e){const{onSubmit:t,children:a,submitType:r,currentPage:i,capabilitiesHaveChanged:n,formSaved:o}=e,l=(0,g.hs)(i,r),d=("update-guest-integration"===r||"update-third-party-external-integration"===r)&&n,u=O({});return(0,x.jsxs)("form",{id:"developer-integration-form",style:u.formContainerStyle,onSubmit:e=>{e.preventDefault(),"create-guest-integration"===r?Y.Z.setState({open:!0,isDestructive:!1,isWarning:!1,title:b.default.formatMessage(D.confirmTitle),message:(0,x.jsx)(s.FormattedMessage,{id:"developerIntegrationFormHandler.createIntegration.confirmationModal.message",defaultMessage:"You‘ll get an OAuth secret and will need to implement OAuth for authorization. See <oauthdocumentationlink>developer docs</oauthdocumentationlink> for more information.",values:{oauthdocumentationlink:e=>(0,x.jsx)(j.Z,{href:U._j.developerOAuthDocs,children:e})}}),confirmationMessage:b.default.formatMessage(D.confirmContinue),onConfirm:()=>{t()}}):d?Y.Z.setState({open:!0,isDestructive:!1,isWarning:!0,title:b.default.formatMessage(D.confirmCapability),message:b.default.formatMessage(D.confirmCapabilityMessage),confirmationMessage:b.default.formatMessage(D.confirmCapabilitySubmit),onConfirm:()=>{t()}}):t()},children:[a,l&&(0,x.jsx)(V,{submitType:r,formSaved:o})]})}function V(e){const{submitType:t,formSaved:a}=e,r=(0,g.oX)(t),i=(0,g.w8)(t),n=!r&&a,o=O({isCreate:r});return(0,x.jsxs)("div",{style:o.buttonContainerStyle,children:[r&&(0,x.jsx)("span",{style:o.buttonLabelStyle,children:(0,x.jsx)(s.FormattedMessage,{id:"developerIntegrationFormHandler.create.developerTermsOnSubmit",defaultMessage:"By {action}, you agree to Notion's <developertermslink>Developer Terms</developertermslink>.",values:{developertermslink:e=>(0,x.jsx)(j.Z,{href:U._j.developerTerms,children:e}),action:i?"continuing":"submitting"}})}),(0,x.jsx)(N,{submitType:t,showSavedButton:n})]})}function N(e){const{submitType:t,showSavedButton:a}=e,r=(0,g.oX)(t),i=(0,g.w8)(t),n=O({showSavedButton:a}),o=i?"submitButtonContinue":"submitButtonCreate",s=a?"submitButtonSaved":"submitButtonUpdate",l=r?b.default.formatMessage(D[o]):b.default.formatMessage(D[s]);return(0,x.jsxs)(A.h,{styles:n.buttonBackground,onClick:()=>{const e=document.querySelector("form#developer-integration-form");if(e){const t=e.ownerDocument.createElement("input");t.style.display="none",t.type="submit",e.appendChild(t).click(),e.removeChild(t)}},children:[l,r&&(0,P.n)(n.rightArrow)]})}function O(e){const{showSavedButton:t,isCreate:a}=e;return(0,T.yK)((()=>({buttonContainerStyle:{display:"flex",marginTop:24,flexDirection:a?"row":"row-reverse",alignItems:"center"},buttonLabelStyle:{fontSize:15,color:B.ZP.frontTextLight,marginRight:42},formContainerStyle:{minWidth:200,maxWidth:440,marginLeft:24,display:"flex",flexDirection:"column"},buttonBackground:{...t&&{background:B.ZP.frontBlackButtonBackgroundPressed}},rightArrow:{width:14,height:14,marginLeft:4}})),[t,a])}const z=[{key:"secrets",title:b.default.formatMessage(g.sY.secretSectionTitle),fields:["token","client_id","client_secret","authorization_url"]}],K={token:{label:b.default.formatMessage(g.sY.tokenLabel)},client_id:{label:b.default.formatMessage(g.sY.clientIdLabel)},client_secret:{label:b.default.formatMessage(g.sY.clientSecretLabel)},authorization_url:{label:b.default.formatMessage(g.sY.authorizationUrlLabel)}};var E=a(509844);const H={key:"external_oauth",title:b.default.formatMessage(g.sY.externalOauthSectionTitle),subtitle:(0,x.jsx)(s.FormattedMessage,{id:"developerIntegrationFormUnfurlingView.sectionSubtitle.external_oauth",defaultMessage:"See <textlink>Notion documentation</textlink> for information on <authlink>OAuth 2.0.</authlink>",values:{textlink:e=>(0,x.jsx)(j.Z,{href:"https://developers.notion.com/docs/build-a-link-preview-integration",external:!0,children:e}),authlink:e=>(0,x.jsx)(j.Z,{href:"https://datatracker.ietf.org/doc/html/rfc6749",external:!0,children:e})}}),fields:["icon","external_oauth_authorize_url","external_oauth_token_url","external_client_id","external_client_secret","external_oauth_scopes","external_deletion_url"]};const W={icon:{label:b.default.formatMessage(g.sY.iconLabel),subtitle:b.default.formatMessage(g.sY.iconSubtitle)},unfurl_url:{label:b.default.formatMessage(g.sY.unfurlUrlLabel),caption:b.default.formatMessage(g.sY.unfurlUrlCaption)},domain:{label:b.default.formatMessage(g.sY.domainLabel),caption:(0,x.jsx)(s.FormattedMessage,{id:"developerIntegrationForm.domainVerification.caption",defaultMessage:"Development and verified domains for URLs to unfurl with this integration. Domains must be verified before publishing to users. See the <textlink>Notion documentation</textlink> for more verification process.",values:{textlink:e=>(0,x.jsx)(j.Z,{href:"https://developers.notion.com/docs/building-a-link-preview#domain-verification",external:!0,children:e})}})},url_matching_and_placeholder:{label:b.default.formatMessage(g.sY.urlMatchingAndPlaceholderLabel),caption:b.default.formatMessage(g.sY.urlMatchingAndPlaceholderCaption)},external_oauth_authorize_url:{label:b.default.formatMessage(g.sY.externalOauthAuthorizeUrlLabel),caption:b.default.formatMessage(g.sY.externalOauthAuthorizeUrlCaption)},external_oauth_token_url:{label:b.default.formatMessage(g.sY.externalOauthTokenUrlLabel),caption:b.default.formatMessage(g.sY.externalOauthTokenUrlCaption)},external_oauth_scopes:{label:b.default.formatMessage(g.sY.externalOauthScopesLabel),caption:b.default.formatMessage(g.sY.externalOauthScopesCaption)},external_client_id:{label:b.default.formatMessage(g.sY.externalClientIdLabel)},external_client_secret:{label:b.default.formatMessage(g.sY.externalClientSecretLabel)},external_deletion_url:{label:b.default.formatMessage(g.sY.externalDeletionUrlLabel),caption:b.default.formatMessage(g.sY.externalDeletionUrlCaption)}};function $(e){var t;const{integrationFormStore:a,onCreateNew:b,currentPage:h,setSelectedPage:v,spaceName:y}=e,M=(0,i.O7)(),[j,S]=r.useState(!1),C=(0,n.VK)((()=>m.default.state.currentUserRootStore),[]),w=(0,n.VK)((()=>a.getState()),[a]),{type:k}=w,[_,T]=r.useReducer(g.x6,g.yb);(0,r.useEffect)((()=>{if(!C)return;(async()=>{const e=await(0,g.hl)({formStoreState:w,userRootStore:C,environment:M});for(const t of(0,d.Yd)(e))T({field:t,value:e[t]})})()}),[w,C,M,h]),(0,r.useEffect)((()=>{const e=()=>{S(!1)};return window.addEventListener("keydown",e),window.addEventListener("click",e),()=>{window.removeEventListener("keydown",e),window.removeEventListener("click",e)}}));const Z=l.Ds((async()=>{S(!0);const e=(0,g.m0)({formData:_,setFormData:T,formStateType:k,currentFieldNames:q(h)});let t;if(_.template_url.value){const e=(0,f.K2)(_.template_url.value);C&&e&&(t=p.G.createChildStore(C,{table:o.iU,id:e}),await t.load())}const a=(0,g.Z6)({formData:_,setFormData:T,formStateType:k,templateStore:t,currentFieldNames:q(h)});if(e.length>0||a.length>0||(0,g.tm)({formData:_,formStateType:k,currentFieldNames:q(h)})||!C)return void S(!1);const r=u.JJ({environment:M,formState:w,formData:(0,g.Xr)(_)});if(!r)return c.showErrorMessage((0,x.jsx)(s.FormattedMessage,{id:"developerIntegrationsForm.error.submission",defaultMessage:"There was an error submitting your integration. Please try again or contact support if the issue persists."})),void S(!1);b&&b(r),(0,g.w8)(k)||(0,g.oX)(k)&&v&&v("secrets")}),300),I=function(e,t){if(!t||!e)return!1;return(0,d.qP)(t).some((t=>{let[a,r]=t;return Boolean(e[a])!==r}))}(null===(t=w.startingRecord)||void 0===t?void 0:t.value.capabilities,_.capabilities.value),F=J[h];return(0,x.jsx)(R,{submitType:k,onSubmit:Z,capabilitiesHaveChanged:I,currentPage:h,formSaved:j,children:(0,x.jsx)(F,{integrationFormStore:a,formData:_,setFormData:T,spaceName:y})})}const J={distribution:function(e){const{integrationFormStore:t}=e,a=(0,n.VK)((()=>t.getState().type),[t]),i=(0,n.VK)((()=>(0,_.QS)()),[]),o=["update-guest-integration","update-third-party-external-integration","update-first-party-external-integration","create-third-party-external-integration","update-compliance-integration"].includes(a),l="update-bot"!==a,[d,u]=(0,r.useState)(l);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(I,{onClick:()=>{const e=d?"internal":"public";u(!d),t.updateRecordTypeOnSwitch(e)},label:b.default.formatMessage(g.sY.distributionSwitcherLabel),subtitle:(0,x.jsx)(s.FormattedMessage,{id:"developerIntegrationFormDistributionView.switcher.subtitle",defaultMessage:"A public integration is available to any Notion user. <br>After submission, only the creator will be able to manage this integration. To transfer ownership of this integration to another user, please contact Notion support.</br> <br>If you’ve built a public integration, you may be eligible to become a technology partner and get Notion’s support in promoting and distributing your integration. Learn more about the Notion Technology Partner Program <partnerProgramLink>here</partnerProgramLink>.</br>",values:{partnerProgramLink:e=>(0,x.jsx)(j.Z,{href:"https://www.notion.so/technology-partner-program",external:!0,children:e}),br:e=>(0,x.jsx)("div",{style:{marginTop:15},children:e})}}),isActive:d,isDisabled:o}),d&&(0,x.jsx)(h.ZP,{...e,pageSections:F,fieldDetails:L(i)})]})},linkPreview:function(e){const{integrationFormStore:t}=e,a=(0,n.VK)((()=>t.getState().type),[t]),i=(0,n.VK)((()=>{var e;return null===(e=t.getState().startingRecord)||void 0===e?void 0:e.value.id}),[t]),o="update-third-party-external-integration"===a||"update-first-party-external-integration"===a,l="create-third-party-external-integration"===a||"update-third-party-external-integration"===a||"update-first-party-external-integration"===a,[d,c]=(0,r.useState)(l),f="create-third-party-external-integration"===a?[H]:[H,(m=i,{key:"unfurling",title:b.default.formatMessage(g.sY.unfurlingSectionTitle),subtitle:(0,x.jsx)(s.FormattedMessage,{id:"developerIntegrationForm.sectionCaption.unfurling",defaultMessage:"Visit the <previewlab>Link Preview Lab</previewlab> to plan out unfurling previews and responses.",values:{previewlab:e=>{if(!m)return"";const t=u.Pk({table:E.K2,id:m});return(0,x.jsx)(j.Z,{href:t,external:!0,children:e})}}}),fields:["unfurl_url","domain","url_matching_and_placeholder"]})];var m;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(I,{onClick:()=>{const e=d?"public":"unfurling";c(!d),t.updateRecordTypeOnSwitch(e)},label:b.default.formatMessage(g.sY.unfurlingSwitcherLabel),subtitle:(0,x.jsx)(s.FormattedMessage,{id:"developerIntegrationFormUnfurlingView.switcher.subtitle",defaultMessage:"Unfurl external data inside Notion. Requires additional fields to configure the matching URL pattern and interface. <br> To be publicly distributed, <formLink>fill out this form</formLink> to submit your integration for security review. </br>",values:{br:e=>(0,x.jsx)("div",{style:{marginTop:15},children:e}),formLink:e=>(0,x.jsx)(j.Z,{href:"https://docs.google.com/forms/d/e/1FAIpQLSd94UcRziV-1yFv6udO0qZwohLyXxhYYadUqEJyyEd03RAj1w/viewform",external:!0,children:e})}}),isActive:d,isDisabled:o}),d&&(0,x.jsx)(h.ZP,{...e,pageSections:f,fieldDetails:W})]})},secrets:function(e){return(0,x.jsx)(h.ZP,{...e,pageSections:z,fieldDetails:K})},capabilities:function(e){return(0,x.jsx)(h.ZP,{...e,pageSections:S,fieldDetails:C})},basic:function(e){const{integrationFormStore:t,formData:a,setFormData:r,spaceName:i}=e,n=i?(0,x.jsx)(s.FormattedMessage,{id:"developerIntegrationView.subtitle.internalIntegrationLabel",defaultMessage:"Workspace owners for <bold>{spaceName}</bold> can manage this integration",values:{spaceName:i,bold:e=>(0,x.jsx)("b",{children:e})}}):void 0;return(0,x.jsx)(h.ZP,{integrationFormStore:t,formData:a,setFormData:r,pageSections:[{...v,subtitle:n}],fieldDetails:M})},compliance:function(e){return(0,x.jsx)(h.ZP,{...e,pageSections:[w],fieldDetails:k})}};function q(e){switch(e){case"basic":return(0,g.Qo)(y);case"secrets":return(0,g.Qo)(z);case"capabilities":return(0,g.Qo)(S);case"distribution":return(0,g.Qo)(F);case"linkPreview":return["icon","external_oauth_authorize_url","external_oauth_token_url","external_client_id","external_client_secret","external_oauth_scopes","external_deletion_url","unfurl_url","domain","url_matching_and_placeholder"];default:return[]}}},90704:(e,t,a)=>{a.r(t),a.d(t,{LinkPreviewLab:()=>ae,default:()=>te});var r=a(667294),i=a(800480),n=a(886628),o=a(724405),s=a(363123),l=a(542853),d=a(500091),u=a(474181),c=a(689602),g=a(76233),f=a(544876),m=a(709291),p=a(401898),b=a(137810),h=a(63811),x=a(376067),v=a(843250),y=a(491996),M=a(465270),j=a(460709),S=a(80444),C=a(61766),w=a(530874),k=a(3403),_=a(164921),T=a(552275),Z=a(231945),I=a(374194),F=a(478140),L=a(632163),P=a(863296),U=a(672495),B=a(229823),Y=a(598167),A=a(14562),D=a(50116),R=a(817970),V=a(734958),N=a(14577),O=a(520475),z=(a(875553),a(269578),a(719233),a(277744)),K=a(531701),E=(a(653965),a(800893),a(296994),a(277907),a(825464)),H=(a(434859),a(573063),a(489728),a(953336),a(526388)),W=a(164369),$=(a(629551),a(605210),a(785893));(0,m.defineMessages)({copyColor:{defaultMessage:"Copied '{stringValue}'",id:"uidoc.colors.copied"}});function J(e){const[t,a]=(0,r.useState)(!1);return(0,$.jsx)("div",{onMouseEnter:()=>{a(!0)},onMouseLeave:()=>{a(!1)},children:(0,$.jsx)(q,{marginTopBottom:e.marginTopBottom,isInverted:e.isInverted,children:(0,$.jsx)(G,{showSize:e.showSize??t,showInsets:e.showInsets??t,insetSize:24,children:(0,$.jsx)(X,{isInverted:e.isInverted,children:e.children})})})})}function q(e){const{marginTopBottom:t}=e,a=(0,o.Fg)(),i=Q(),n=e.isInverted?i:a,s=(0,r.useMemo)((()=>({borderRadius:4,overflow:"hidden",border:`1px solid ${n.regularDividerColor}`,backgroundColor:n.contentBackground,marginTop:t??12,marginBottom:t??12,color:n.regularTextColor})),[n,t]);return(0,$.jsx)("div",{style:s,children:e.children})}function G(e){const{showInsets:t,showSize:a,insetSize:i,children:n}=e,s=(0,r.useRef)(null),l=(0,o.yK)((e=>{const a=t?"rgba(255, 105, 180, 1)":"rgba(255, 105, 180, 0)",r=`1px dashed ${a}`,n=`${i}px`,o="all 0.1s ease-in-out",s={t:{borderBottom:r,transition:o},l:{borderRight:r,transition:o},r:{borderLeft:r,transition:o},b:{borderTop:r,transition:o,position:"relative"}};return{grid:{display:"grid",gridTemplateColumns:`${n} auto ${n}`,gridTemplateRows:`${n} auto ${n}`,...s.t,...s.l,...s.r,...s.b},...s,tl:{...s.t,...s.l},tr:{...s.t,...s.r},bl:{...s.b,...s.l},br:{...s.b,...s.r},c:{position:"relative"},insetText:{color:a,fontSize:10,paddingLeft:(i-10)/2,fontFamily:b.Z.baseFontFamily.githubMono,lineHeight:n,maxHeight:i,transition:o,position:"absolute"}}}),[t,i]);return(0,$.jsxs)("div",{style:l.grid,children:[(0,$.jsx)("div",{style:l.tl}),(0,$.jsx)("div",{style:l.t}),(0,$.jsx)("div",{style:l.tr}),(0,$.jsx)("div",{style:l.l}),(0,$.jsx)("div",{style:l.c,ref:s,children:n}),(0,$.jsx)(H.Z,{forceVisibleState:a??t,renderTooltip:()=>{var e;return`${null===(e=s.current)||void 0===e?void 0:e.getBoundingClientRect().height}px`},placement:E.u.Right,render:()=>(0,$.jsx)("div",{style:l.r})}),(0,$.jsx)("div",{style:l.bl}),(0,$.jsx)(H.Z,{placement:E.u.Bottom,forceVisibleState:a??t,renderTooltip:()=>{var e;return`${null===(e=s.current)||void 0===e?void 0:e.getBoundingClientRect().width}px`},render:()=>(0,$.jsx)("div",{style:l.b,children:(0,$.jsx)(W.Z,{style:l.insetText,children:`${i}px inset`})})}),(0,$.jsx)("div",{style:l.br})]})}function Q(){const{mode:e}=(0,o.Fg)();return(0,K.gh)({theme:"light"===e?"dark":"light"})}function X(e){let{children:t,isInverted:a}=e;const{mode:n}=Q(),o=function(e){const t=(0,i.O7)();return(0,r.useMemo)((()=>{const a=new O.Z;return a.setState({mode:e}),{...t,ThemeStore:a,ThemeModeStore:new N.Z((()=>a.state.mode),{debugName:"UIDocComponents.ThemeModeStore"})}}),[t,e])}(n);return a?(0,$.jsx)(V.B9,{value:o,children:t}):(0,z.jD)(t)}const ee=(0,r.createContext)(!1);function te(e){const t=(0,i.O7)(),{integrationPointer:a}=e,r=(0,n.VK)((()=>S.default.state.currentUserStore),[]),o=(0,n.VK)((()=>{if(r)return r.getRecordValue(a)}),[r,a]),l=(0,s.V)({value:o,waitTimeInMs:5e3});return"pending"===l.status?(0,$.jsx)(k.Z,{}):"rejected"!==l.status&&(0,u.VM)(l.value)?(0,$.jsx)(Y.Z,{className:v.hEP,title:(0,$.jsx)(m.FormattedMessage,{id:"developerIntegrationLab.title.label",defaultMessage:"Link Preview Lab"}),subtitle:(0,$.jsx)(m.FormattedMessage,{id:"developerIntegrationLab.subtitle.label",defaultMessage:"Plan out preview URL regex patterns and API responses."}),onNavigateBack:()=>x.V2(t,a),navigateBackMessage:(0,$.jsx)(m.FormattedMessage,{id:"developerIntegrationLab.navigateBack.label",defaultMessage:"Back to integration"}),innerContainerStyles:{width:1200,margin:"auto",marginBottom:200},children:(0,$.jsx)(ae,{starterIntegration:l.value})}):(0,$.jsx)(B.Z,{})}function ae(e){let{starterIntegration:t}=e;const[a,i]=r.useState(""),[n,o]=r.useState(M.Az),[s,l]=r.useState(M.SV),[d,u]=r.useState(M.VR()),[c,g]=r.useState(M.nZ),[m,p]=r.useState(M.e_),[b,h]=r.useState(M.P4),[x,v]=r.useState(t);return r.useEffect((()=>{const{original_url_domains:e,development_url_domains:a,original_url_patterns:r}=t.info,i=(null==e?void 0:e[0])||(null==a?void 0:a[0]);if(i&&g(i),null!=r&&r[0]){const{regex:e,attributes:t,sample_urls:a}=null==r?void 0:r[0];p(e);const i=t.map(f.Ah);h(i);const n=null==a?void 0:a[0];n&&o(n)}}),[t]),r.useEffect((()=>{v((e=>M.Hx({domain:c,regex:m,attributes:b,currentIntegration:e})))}),[c,m,b]),r.useEffect((()=>{w.Z.setState({loaded:!0,loading:!1,userId:void 0,spaceId:M.C,integrations:[x],externalAuthentications:[],bots:[],completeSlackAuthentications:[]})}),[x]),(0,$.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,$.jsx)(re,{style:{flex:1,marginRight:12},setErrorMessage:i,rootUrl:n,setRootUrl:o,relatedUrisToAttributes:d,setRelatedUrisToAttributes:u,domain:c,setDomain:g,regexPattern:m,setRegexPattern:p,regexAttributes:b,setRegexAttributes:h,rootAttributes:s,setRootAttributes:l}),(0,$.jsx)(oe,{style:{flex:1},rootUrl:n,rootAttributes:s,relatedUrisToAttributes:d,integration:x,errorMessage:a})]})}function re(e){const{style:t,rootUrl:a,setRootUrl:r,domain:i,setDomain:o,regexPattern:s,setRegexPattern:l,regexAttributes:d,setRegexAttributes:u,rootAttributes:g,setRootAttributes:f,relatedUrisToAttributes:p,setRelatedUrisToAttributes:h,setErrorMessage:x}=e,v=(0,n.VK)((()=>M.TG(g)),[g]);return(0,$.jsxs)("div",{style:t,children:[(0,$.jsxs)("label",{children:[(0,$.jsx)("div",{style:{fontSize:15,fontWeight:b.Z.fontWeight.medium},children:(0,$.jsx)(m.FormattedMessage,{id:"developerIntegrationLab.rootUrl.label",defaultMessage:"Pasted URL to Preview"})}),(0,$.jsx)(I.Z,{value:a,onChange:e=>r(e.target.value)})]}),(0,$.jsxs)(se,{title:(0,$.jsx)(m.FormattedMessage,{id:"developerIntegrationLab.regexConfiguration.label",defaultMessage:"Manage Regex Configuration"}),style:{marginTop:12},children:[(0,$.jsxs)("label",{style:{marginTop:12},children:[(0,$.jsx)("div",{style:{fontSize:15,fontWeight:b.Z.fontWeight.medium},children:(0,$.jsx)(m.FormattedMessage,{id:"developerIntegrationLab.domain.label",defaultMessage:"Domain"})}),(0,$.jsx)(I.Z,{value:i,onChange:e=>o(e.target.value)})]}),(0,$.jsx)(de,{regexPattern:s,setRegexPattern:l,setErrorMessage:x}),(0,$.jsxs)("label",{style:{marginTop:12},children:[(0,$.jsx)("div",{style:{fontSize:15,fontWeight:b.Z.fontWeight.medium},children:(0,$.jsx)(m.FormattedMessage,{id:"developerIntegrationLab.regexAttributes.label",defaultMessage:"Regex Attributes"})}),(0,$.jsx)(le,{value:d,onChange:u,validationType:c.$1,setErrorMessage:x})]})]}),(0,$.jsx)(se,{title:(0,$.jsx)(m.FormattedMessage,{id:"developerIntegrationLab.rootAttributes.label",defaultMessage:"Unfurl response payload"}),style:{marginTop:12},children:(0,$.jsx)(le,{value:g,onChange:f,validationType:c.$1,setErrorMessage:x})}),(0,$.jsx)(se,{title:(0,$.jsx)(m.FormattedMessage,{id:"developerIntegrationLab.relatedAttributes.label",defaultMessage:"Related unfurl response payloads"}),style:{marginTop:12},children:v.map((e=>{const t=p[e];return(0,$.jsx)(se,{title:e,style:{marginTop:12,marginLeft:12},children:t?(0,$.jsx)(le,{value:t,onChange:t=>{h({...p,[e]:t})},validationType:c.$1,setErrorMessage:x}):(0,$.jsx)(m.FormattedMessage,{id:"developerIntegrationLab.relatedAttributes.empty",defaultMessage:"No related attributes found."})},e)}))})]})}ee.displayName="UIDocExpandAllCode";const ie=["preview","mention","hover"],ne=["authenticate","error","update","loaded"];function oe(e){const{style:t,rootUrl:a,rootAttributes:i,relatedUrisToAttributes:n,integration:o,errorMessage:s}=e,[l,d]=r.useState("preview"),[u,c]=r.useState("loaded");return(0,$.jsxs)("div",{style:t,children:[(0,$.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,$.jsx)("div",{style:{marginRight:12},children:"Preview type:"}),(0,$.jsx)(ue,{title:l,options:ie,onSelectOption:e=>d(e)}),(0,$.jsx)("div",{style:{marginLeft:12,marginRight:12},children:"Preview state:"}),(0,$.jsx)(ue,{title:u,options:ne,onSelectOption:e=>c(e)})]}),(0,$.jsx)("div",{style:{marginTop:12,maxWidth:600},children:(0,$.jsx)(ce,{previewType:l,previewState:u,rootUrl:a,rootAttributes:i,relatedUrisToAttributes:n,integration:o,errorMessage:s})})]})}function se(e){const[t,a]=r.useState(!1);return(0,$.jsxs)("div",{style:e.style,children:[(0,$.jsxs)(_.Z,{onClick:()=>a(!t),style:{display:"flex",alignItems:"center"},children:[(0,d.L)({width:"0.6875em",height:"0.6875em",transition:"transform 200ms ease-out",transform:`rotateZ(${t?180:90}deg)`,marginRight:4}),e.title]}),t&&e.children]})}function le(e){const{value:t,onChange:a,validationType:i,setErrorMessage:n}=e,[o,s]=r.useState(JSON.stringify(t,null,2));return(0,$.jsx)(I.Z,{format:I.B.ExtraLarge,inputStyle:{fontSize:14,lineHeight:"18px",height:500},textarea:!0,value:o,onChange:e=>{const t=e.target.value;s(t);const r=y.Jv(t);if(void 0===r)n("Could not parse JSON object input.");else{const e=(0,h.Gu)(i,r);e?n(e.message):(n(""),a(r))}}})}function de(e){const{regexPattern:t,setRegexPattern:a,setErrorMessage:i}=e,[n,o]=r.useState(t);return(0,$.jsxs)("label",{style:{marginTop:12},children:[(0,$.jsx)("div",{style:{fontSize:15,fontWeight:b.Z.fontWeight.medium},children:"Regex Pattern"}),(0,$.jsx)(I.Z,{value:n,onChange:e=>{const t=e.target.value;o(t);try{new RegExp(t);a(t),i("")}catch(r){i("Invalid Regex.")}}})]})}function ue(e){const{title:t,options:a,onSelectOption:r}=e,[i,o,s]=(0,n.AF)(void 0,C.Z);return(0,$.jsx)(Z.ZP,{popupType:Z.Z4.Popup,buttonPopupStore:s,renderOrigin:()=>(0,$.jsxs)(P.Z,{onClick:()=>o({...i,open:!0}),children:[t,(0,l.i)({width:10,marginTop:4,marginLeft:4})]}),render:()=>(0,$.jsx)(F.Z,{menuType:j.og.Popup,children:(0,$.jsx)(L.Z,{type:L.i.Vertical,sections:[{key:t,items:a.map((e=>({key:e,action:()=>{r(e),o({...i,open:!1})},render:t=>(0,$.jsx)(T.Z,{...t,title:e})}))),render:e=>(0,$.jsx)(U.Z,{...e})}],initialFocus:void 0})})})}function ce(e){const{previewType:t,previewState:a,rootUrl:n,rootAttributes:s,relatedUrisToAttributes:l,integration:d,errorMessage:u}=e,[c,g]=r.useState(""),f=(0,i.O7)(),[m,p]=r.useState();r.useEffect((()=>{const e=M.rn({environment:f,rootUrl:n,rootAttributes:s,relatedUrisToAttributes:l,integration:d});"error"in e?g(e.error):(g(""),p(e))}),[f,n,s,l,d]),r.useEffect((()=>{g(u)}),[u]);const b=(0,o.yK)((e=>({error:{marginTop:12,marginBottom:12,padding:"12px 24px",marginRight:"auto",backgroundColor:e.accentColors.red[100]}})),[]);return(0,$.jsxs)($.Fragment,{children:[c&&(0,$.jsxs)("div",{style:b.error,children:[c," "]}),m&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(J,{isInverted:!1,showInsets:!1,showSize:!1,children:(0,$.jsx)(fe,{previewType:t,previewState:a,previewStores:m})}),(0,$.jsx)(J,{isInverted:!0,showInsets:!1,showSize:!1,children:(0,$.jsx)(fe,{previewType:t,previewState:a,previewStores:m})})]})]})}function ge(e){const{previewStores:t}=e,a=(0,o.yK)((e=>({container:{borderRadius:4,boxShadow:e.lightBoxShadow}})),[]),r=(0,n.VK)((()=>{const e=t.previewBlockStore.id;if(!e)return;return{annotation:(0,g.x36)(e),store:t.inlineBlockStore,token:void 0}}),[t.previewBlockStore,t.inlineBlockStore]);return r?(0,$.jsx)("div",{style:a.container,children:(0,$.jsx)(D.D5,{isHoveredTokenEditable:!0,state:r})}):null}function fe(e){const{previewType:t,previewState:a,previewStores:r}=e;return"preview"===t?(0,$.jsx)(A.Z,{store:"authenticate"===a?r.emptyInstanceBlockStore:r.previewBlockStore,disabled:!1,forceActionForUIDoc:"loaded"===a?void 0:a}):"mention"===t?(0,$.jsx)(R.Z,{store:"authenticate"===a?r.emptyInlineBlockStore:r.inlineBlockStore,disabled:!1}):"hover"===t?(0,$.jsx)(ge,{...e}):void(0,p.t1)(t)}},612265:(e,t,a)=>{a.r(t),a.d(t,{default:()=>j});a(667294);var r=a(800480),i=a(339248),n=a(177420),o=a(509844),s=a(709291),l=a(296902),d=a(376067),u=a(772770),c=a(843250),g=a(873020),f=a(3403),m=a(791754),p=a(731278),b=a(879500),h=a(169500),x=a(229823),v=a(598167),y=a(942402),M=a(785893);function j(e){const{botOrIntegrationPointer:t}=e,a=(0,r.O7)(),{loadedFormState:j,selectedPage:S,integrationFormStore:C,setSelectedPage:w,showPublishedIntegrationWarning:k,supportedPages:_,spaceName:T}=(0,g.b)(e);if("rejected"===j.status||!t)return(0,M.jsx)(x.Z,{});if("pending"===j.status)return(0,M.jsx)(f.Z,{});const Z=j.value,I=a.currentUser.id;if(Z.table===o.K2&&Z.value.parent_id!==I)return(0,M.jsx)(x.Z,{});const F=Z.value.name,L=Z.table===n.cZ?Z.value.icon:Z.value.info.icon,P={id:Z.value.id,table:Z.table},U=L?{pointer:P,icon:L}:void 0;return(0,M.jsxs)(v.Z,{className:c.TFu,title:F,subtitle:(0,M.jsx)(s.FormattedMessage,{id:"developerIntegrationView.subtitle.genericLabel",defaultMessage:"Review and edit integration information."}),onNavigateBack:()=>d.A1(a),icon:(0,M.jsx)(p.Z,{disabled:!0,icon:U,title:F,isEmptyPage:!1,size:98,isLarge:!0,style:{boxShadow:l.Z.frontDeepShadow},useInvertedColors:!0}),sideContent:(0,M.jsx)(b.T,{supportedPages:_,selectedPage:S,setSelectedPage:w,integrationFormStore:C}),children:[k&&(0,M.jsx)(m.Z,{styleKey:u.v.Red,isMobile:!1,style:{marginBottom:20},children:(0,M.jsx)(s.FormattedMessage,{id:"developerIntegrationView.publishedIntegrationWarning.label",defaultMessage:"Saving changes to your integration will immediately update its listing on Notion's <integrationgallerylink>Integration Gallery.</integrationgallerylink> ",values:{integrationgallerylink:e=>(0,M.jsx)(y.Z,{disableHover:!0,href:(0,i.E)(Z.value.id,Z.value.name||""),children:e})}})}),(0,M.jsx)(h.Z,{integrationFormStore:C,currentPage:S,setSelectedPage:w,spaceName:T})]})}},667229:(e,t,a)=>{a.r(t),a.d(t,{default:()=>J});var r=a(667294),i=a(800480),n=a(886628),o=a(363123),s=a(841892),l=a(559054),d=a(747453),u=a(177420),c=a(509844),g=a(709291),f=a(531701),m=a(401898),p=a(137810),b=a(619584),h=a(757549),x=a(454642),v=a(296994),y=a(843250),M=a(971776),j=a(80444),S=a(897122),C=a(489728),w=a(519889),k=a(307928),_=a(296902),T=a(376067),Z=a(206258),I=a(164921),F=a(731278),L=a(356666),P=a(460709),U=a(223196),B=a(138381),Y=a(552275),A=a(478140),D=a(632163),R=a(953437),V=a(672495),N=a(785893);function O(e){const{integrationOrBot:t}=e,a=(0,n.VK)((()=>t.name||""),[t]),o=(0,i.O7)(),s=(0,n.VK)((()=>j.default.state.currentUserStore),[]),[l,d]=r.useState(!1),[u,c]=(0,n.AF)(B.Z);if(!s)return null;const m=(0,Z.Kv)(s,{id:t.id,table:t.table});return(0,N.jsx)(R.ZP,{popupType:U.k.Popup,open:l,placementToOrigin:R.ZP.Placement.Bottom,alignmentToOrigin:R.ZP.Alignment.End,onDismiss:()=>d(!1),origin:(0,N.jsx)(I.Z,{onClick:()=>{d(!0),h.iI(o,{table:m.table})},style:{padding:"3px 6px",borderRadius:3},children:(0,L.o)({width:18,height:18})}),render:()=>(0,N.jsx)(A.Z,{menuType:P.og.Popup,children:(0,N.jsx)(D.Z,{type:D.i.Vertical,initialFocus:0,sections:[{key:"integration-card-dropdown",items:[{key:"delete-integration",action:()=>{h.DW(o,{table:m.table}),c({open:!0,title:(0,N.jsx)(g.FormattedMessage,{id:"developerIntegrationCardDropdown.delete.confirmationTitle",defaultMessage:"Delete {integrationName}?",values:{integrationName:a}}),message:(0,N.jsx)(g.FormattedMessage,{id:"developerIntegrationCardDropdown.delete.confirmationMessage",defaultMessage:"This public integration will be deactivated and removed from all workspaces it has been added to. To confirm, type in the name of this integration."}),confirmationMessage:(0,N.jsx)(g.FormattedMessage,{id:"developerIntegration.confirmationModal.deleteLabel",defaultMessage:"Delete"}),onConfirm:async()=>{await T.uU({environment:o,recordStore:m})},isDestructive:!0,deleteMatchText:a,deleteMatchError:(0,N.jsx)(g.FormattedMessage,{id:"developerIntegrationCardDropdown.delete.confirmationError",defaultMessage:"Input did not match integration name."})})},render:e=>(0,N.jsx)(Y.Z,{...e,title:(0,N.jsx)(g.FormattedMessage,{id:"developerIntegrationCard.dropdown.delete",defaultMessage:"Delete this integration"}),style:{color:f.ZP.frontRed}})}],render:e=>(0,N.jsx)(V.Z,{...e})}]})})})}function z(e){const{integrationOrBot:t}=e,a=(0,i.O7)(),o=(0,g.useIntl)(),s=(0,n.VK)((()=>t.table===c.K2?t.getInfo().tagline||(0,N.jsx)(g.FormattedMessage,{id:"developerIntegrationCard.integrationTagline.placeholder",defaultMessage:"Public integration."}):(0,N.jsx)(g.FormattedMessage,{id:"developerIntegrationCard.botTagline.placeholder",defaultMessage:"Internal integration."})),[t]),l=(0,n.VK)((()=>t.table===c.K2?t.getInfo().icon:t.icon),[t]),d=(0,n.VK)((()=>({id:t.id,table:t.table})),[t]),u=(0,n.VK)((()=>j.default.state.currentUserStore),[]),f=(0,n.VK)((()=>{if(!u)return;if(t.created_by_id===u.id)return(0,N.jsx)(g.FormattedMessage,{id:"developerIntegrationCard.createdByTagline.creatorIsUser",defaultMessage:"Created by you"});const e=Z.U6.createChildStore(u,{table:w.KJ,id:t.created_by_id}),a=e.getModel();return e.isReady()&&a?(0,N.jsx)(g.FormattedMessage,{id:"developerIntegrationCard.createdByTagline.placeholder",defaultMessage:"Created by {userFullDisplayName}",values:{userFullDisplayName:(0,k.Nz)(o,a)}}):void 0}),[t,o,u]),m=(0,r.useCallback)((()=>{T.V2(a,d)}),[a,d]),p=(0,n.VK)((()=>t.name),[t]);return(0,N.jsxs)(I.Z,{style:W.containerCard,onClick:m,children:[(0,N.jsxs)("div",{style:W.innerDetailsContainer,children:[(0,N.jsx)(F.Z,{disabled:!0,icon:l?{pointer:d,icon:l}:void 0,title:p,isEmptyPage:!1,size:48,isLarge:!0,useInvertedColors:!0}),(0,N.jsx)("div",{style:W.name,children:p}),(0,N.jsx)("div",{style:W.creatorTagline,children:f}),(0,N.jsx)("div",{style:W.typeTagline,children:s})]}),(0,N.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,N.jsx)(C.Z,{onClick:m,style:{...W.blueButton,padding:8,marginLeft:-8,fontSize:15},children:(0,N.jsx)(g.FormattedMessage,{id:"developerIntegrationsList.viewIntegration.buttonText",defaultMessage:"View integration"})}),(0,N.jsx)(O,{integrationOrBot:t})]})]})}function K(e){const{onClick:t}=e;return(0,N.jsxs)(I.Z,{onClick:t,style:{...W.containerCard,...W.addNewCard},children:[(0,d.R)({width:24,height:24,color:f.ZP.mediumIconColor}),(0,N.jsx)("div",{style:{height:12}}),(0,N.jsx)(g.FormattedMessage,{id:"developerIntegrationCard.placeholderCard.label",defaultMessage:"Create new integration"})]})}function E(){return(0,N.jsx)(I.Z,{style:{...W.containerCard,boxShadow:"none",background:"rgba(0,0,0,0.02)",border:"none"},children:(0,N.jsxs)("div",{style:W.innerDetailsContainer,children:[(0,N.jsx)("div",{style:{...W.placeholderGradient,opacity:.7,width:48,height:48,borderRadius:4}}),(0,N.jsx)("div",{style:{...W.name,...W.placeholderGradient,opacity:.7,width:"50%",height:24}})]})})}const H=240,W={containerCard:{boxShadow:_.Z.frontCardShadow,border:`1px solid ${f.ZP.blackWithAlpha(.1)}`,background:f.ZP.white,height:H,width:320,borderRadius:5,padding:24,paddingTop:28,display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between"},addNewCard:{background:"transparent",boxShadow:void 0,alignItems:"center",justifyContent:"center",color:f.ZP.frontTextLight,fill:f.ZP.frontTextLight},innerDetailsContainer:{width:"100%"},name:{fontWeight:p.Z.fontWeight.semibold,fontSize:18,marginTop:12,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},creatorTagline:{lineHeight:"24px",fontSize:14,color:f.ZP.frontTextLight,maxHeight:72,overflow:"hidden"},typeTagline:{lineHeight:"24px",fontSize:14,color:f.ZP.frontTextLight,maxHeight:72,overflow:"hidden",marginTop:10},blueButton:{padding:0,background:void 0,color:f.ZP.blue,fill:f.ZP.blue},placeholderGradient:{backgroundColor:"rgba(0,0,0,0.05)"}};var $=a(598167);function J(){const e=(0,i.O7)(),[t,a]=r.useState(!1),[o,s]=r.useState([]),[f,p]=r.useState([]),w=(0,n.VK)((()=>j.default.state.currentUserStore),[]),k=(0,n.VK)((()=>j.default.state.currentUserRootStore),[]),_=(0,n.VK)((()=>k?k.getAdminSpaceStores():[]),[k]),[T,Z]=r.useState("all");(0,r.useEffect)((()=>{s([]),p([])}),[e.currentUser.id]);const I=(0,r.useCallback)((e=>{const{id:t,table:a}=e;a===u.cZ?p((e=>e.includes(t)?e:e.concat(t))):a===c.K2?s((e=>e.includes(t)?e:e.concat(t))):(0,m.t1)(a)}),[]),F=(0,r.useCallback)((()=>{a(!0),h.Ng(e)}),[e]);(0,r.useEffect)((()=>{h.BI(e)}),[e]);const[{status:L,error:P,value:U}]=(0,l.r5)((async()=>{const t=_.map((e=>e.id)),a=await x.getDeveloperBotsAndIntegrations(e,{ownedSpaceIds:t});if("success"===a.type)return a.data;if("failed"===a.type)throw a.error;return(0,m.t1)(a)}),[e,_]),B=null==U?void 0:U.integrationIds;(0,r.useEffect)((()=>{B&&s((e=>(0,b.jj)([...e,...B])))}),[B]);const Y=null==U?void 0:U.botIds;(0,r.useEffect)((()=>{Y&&p((e=>(0,b.jj)([...e,...Y])))}),[Y]);const A=(0,n.VK)((()=>{if(w){return(0,M.GU)({ids:o,table:c.K2,userStore:w}).filter((e=>e.alive))}return[]}),[w,o]),D=(0,n.VK)((()=>{if(w){return(0,M.GU)({ids:f,table:u.cZ,userStore:w}).filter((e=>e.alive))}return[]}),[w,f]),R=(0,n.VK)((()=>(0,M.cr)([...A,...D])),[A,D]),V=(0,n.VK)((()=>({all:R,internal:D,public:A}[T])),[T,R,D,A]);return t?(0,N.jsx)(v.kC,{onClose:()=>a(!1),onSuccess:I}):(0,N.jsx)($.Z,{className:y.pg$,title:(0,N.jsx)(g.FormattedMessage,{id:"developerIntegrationsList.title",defaultMessage:"My integrations"}),subtitle:(0,N.jsx)(g.FormattedMessage,{id:"developerIntegrationsList.subtitle",defaultMessage:"Create, review, and edit development info and credentials."}),icon:(0,N.jsx)(G,{}),sideContent:(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(S.h,{onClick:F,styles:{marginBottom:12,width:"100%"},children:[(0,d.R)({width:16,height:16,fill:"white"}),(0,N.jsx)("div",{style:{marginLeft:8},children:(0,N.jsx)(g.FormattedMessage,{id:"developerIntegrationsList.addNewButton.label",defaultMessage:"New integration"})})]}),(0,N.jsx)("div",{style:{marginTop:8},children:M.$Z.map((t=>(0,N.jsx)("div",{children:(0,N.jsx)(C.Z,{onClick:()=>{Z(t),h.EJ(e,{type:t})},isSmall:!0,style:{...X.filterButton,...t===T&&X.selectedFilterButton},children:q[t]})},t)))})]}),children:(0,N.jsx)(Q,{isLoading:!w||"pending"===L||"idle"===L,error:P,integrationOrBotRecords:V,onCreateNewClick:F})})}const q={all:(0,N.jsx)(g.FormattedMessage,{id:"developerIntegrationsList.allFilter.label",defaultMessage:"View all"}),internal:(0,N.jsx)(g.FormattedMessage,{id:"developerIntegrationsList.internalFilter.label",defaultMessage:"Internal"}),public:(0,N.jsx)(g.FormattedMessage,{id:"developerIntegrationsList.publicFilter.label",defaultMessage:"Public"})};function G(){return(0,N.jsx)("img",{alt:"Funky build icon",src:s.Z.images.integrations.funkyManagementIconPng,style:{height:130,width:130}})}function Q(e){const{isLoading:t,error:a,integrationOrBotRecords:r,onCreateNewClick:i}=e,{status:n}=(0,o.V)({value:r,validateLoaded:e=>e.length>0});return a?(0,N.jsx)("div",{style:X.error,children:a.message}):(0,N.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gridAutoRows:"auto",gap:28,minHeight:2*H+28},children:"pending"===n||t?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(E,{}),(0,N.jsx)(E,{}),(0,N.jsx)(E,{})]}):(0,N.jsxs)(N.Fragment,{children:[r.map((e=>(0,N.jsx)(z,{integrationOrBot:e},e.id))),(0,N.jsx)(K,{onClick:i})]})})}const X={filterButton:{fontSize:15,height:28,marginTop:4,color:f.ZP.frontTextLight,width:"100%"},selectedFilterButton:{color:f.ZP.frontText,fontWeight:p.Z.fontWeight.medium},error:{color:f.ZP.frontRed}}},983420:(e,t,a)=>{a.d(t,{TL:()=>c,nc:()=>u,ue:()=>d});var r=a(266897),i=a(554368),n=a(177420),o=a(519889),s=a(401898),l=a(206258);function d(e){const{parentStore:t,pointer:a}=e,i=(0,l.Kv)(t,a).getValue();if(i)return(0,r.LU)({table:a.table,value:i})}function u(e){const{parentStore:t,pointer:a}=e;return a.table===n.cZ?l.Qx.createChildStore(t,a):a.table===o.KJ?l.U6.createChildStore(t,a):a.table===i.y0?l.fg.createChildStore(t,a):void(0,s.t1)(a)}function c(e){return e.table===n.cZ?(0,r.ON)(e.getValue()):e.table===o.KJ?(0,r.m3)(e.getValue()):e.table===i.y0?(0,r.I4)(e.getValue()):void(0,s.t1)(e)}},40462:(e,t,a)=>{a.d(t,{o:()=>n});a(667294);var r=a(745238),i=a(785893);const n=(0,r.IU)("globe2",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M8 15.126C11.8623 15.126 15.0615 11.9336 15.0615 8.06445C15.0615 4.20215 11.8623 1.00293 7.99316 1.00293C4.13086 1.00293 0.938477 4.20215 0.938477 8.06445C0.938477 11.9336 4.1377 15.126 8 15.126ZM3.88477 3.76465C4.56836 3.11523 5.39551 2.61621 6.31836 2.34277C5.83301 2.82812 5.42285 3.51172 5.11523 4.3457C4.63672 4.19531 4.22656 3.99707 3.88477 3.76465ZM9.68848 2.34961C10.6045 2.62305 11.4316 3.11523 12.1084 3.76465C11.7734 4.00391 11.3633 4.19531 10.8848 4.35254C10.5771 3.51172 10.167 2.82812 9.68848 2.34961ZM8.47852 2.56836C9.0459 2.8418 9.56543 3.58008 9.93457 4.58496C9.4834 4.66699 8.99805 4.71484 8.47852 4.73535V2.56836ZM6.06543 4.58496C6.44141 3.58008 6.9541 2.8418 7.52148 2.56836V4.73535C7.00195 4.71484 6.5166 4.66699 6.06543 4.58496ZM2.05273 7.58594C2.14844 6.42383 2.58594 5.35059 3.25586 4.46875C3.67285 4.77637 4.21289 5.04297 4.8418 5.24121C4.66406 5.95215 4.54785 6.74512 4.51367 7.58594H2.05273ZM11.4863 7.58594C11.4521 6.74512 11.3359 5.95215 11.1582 5.24121C11.7871 5.04297 12.3271 4.7832 12.7373 4.46875C13.4141 5.35059 13.8516 6.42383 13.9473 7.58594H11.4863ZM5.49121 7.58594C5.52539 6.84082 5.62793 6.12988 5.78516 5.4873C6.33203 5.59668 6.91309 5.66504 7.52148 5.69238V7.58594H5.49121ZM8.47852 7.58594V5.69238C9.08691 5.66504 9.66797 5.59668 10.2148 5.4873C10.3721 6.12988 10.4746 6.84082 10.5088 7.58594H8.47852ZM2.05273 8.54297H4.51367C4.54785 9.39746 4.66406 10.1973 4.8418 10.915C4.21973 11.1133 3.68652 11.373 3.27637 11.6807C2.59277 10.792 2.14844 9.71191 2.05273 8.54297ZM5.49121 8.54297H7.52148V10.4707C6.91992 10.498 6.33203 10.5664 5.79199 10.6689C5.62793 10.0195 5.51855 9.29492 5.49121 8.54297ZM8.47852 10.4707V8.54297H10.5088C10.4814 9.29492 10.3721 10.0195 10.208 10.6689C9.66797 10.5664 9.08691 10.498 8.47852 10.4707ZM11.1582 10.915C11.3428 10.1973 11.4521 9.39746 11.4863 8.54297H13.9473C13.8516 9.71191 13.4072 10.792 12.7236 11.6807C12.3135 11.373 11.7803 11.1133 11.1582 10.915ZM8.47852 11.4277C8.99121 11.4482 9.47656 11.4961 9.9209 11.5781C9.55176 12.5625 9.03906 13.2939 8.47852 13.5605V11.4277ZM6.0791 11.5781C6.52344 11.4961 7.00879 11.4482 7.52148 11.4277V13.5605C6.96094 13.2939 6.44824 12.5625 6.0791 11.5781ZM3.90527 12.3848C4.24023 12.1523 4.65039 11.9609 5.12207 11.8105C5.42969 12.6309 5.83301 13.3008 6.30469 13.7793C5.40234 13.5059 4.58203 13.0205 3.90527 12.3848ZM10.8779 11.8105C11.3496 11.9609 11.7598 12.1523 12.0947 12.3848C11.418 13.0205 10.5977 13.5059 9.69531 13.7793C10.167 13.3008 10.5703 12.6309 10.8779 11.8105Z"})})}}]);