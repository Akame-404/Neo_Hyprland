"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[51909,27994],{45257:(e,t,i)=>{i.d(t,{Z:()=>l});i(667294);var n=i(800480),o=i(724405),s=i(542853),a=i(164921),r=i(785893);function l(e){const{icon:t,title:i,on:l,hasDiff:c,wrapStyle:u,innerStyle:p,hideChevron:h}=e,g=(0,o.Fg)(),m=(0,n.O7)();return(0,r.jsxs)("div",{style:{borderRadius:14,marginRight:6,display:"inline-flex",...c&&{position:"relative"},...u},children:[(0,r.jsxs)(a.Z,{disabled:e.disabled,style:d(Boolean(l),g,p,m.device.isMobile),hoveredStyle:l?{background:g.outlineBlueButtonHoveredBackground}:void 0,pressedStyle:l?{background:g.outlineBlueButtonPressedBackground}:void 0,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onClick:e.onClick,onDoubleClick:e.onDoubleClick,children:[t,i,!h&&(0,s.i)({width:10,marginLeft:4,marginTop:1,fill:l?g.blueColor:g.lightIconColor})]}),c&&(0,r.jsx)("div",{style:{position:"absolute",top:-2,right:-2,background:"dark"===g.mode?g.accentColors.orange[500]:g.accentColors.orange[300],border:`1px solid ${g.contentBackground}`,width:9,height:9,borderRadius:9}})]})}function d(e,t,i,n){return{fontSize:14,display:"inline-flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",borderRadius:32,height:n?28:24,lineHeight:n?"28px":"24px",padding:"0 8px",border:`1px solid ${t.outlineButtonBorder}`,color:t.mediumTextColor,...e&&{color:t.blueColor,border:`1px solid ${t.filterPillBorder}`,background:t.filterPillBackground},...i}}},39849:(e,t,i)=>{i.d(t,{N:()=>l,Z:()=>c});i(667294);var n=i(724405),o=i(531701),s=i(137810),a=i(785893);const r={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:16,height:16,fontSize:10,textAlign:"center",fontWeight:s.Z.fontWeight.semibold,borderRadius:4,color:o.ZP.white,position:"static",marginLeft:6,WebkitFontSmoothing:"auto"};let l=function(e){return e[e.Red=0]="Red",e[e.Gray=1]="Gray",e}({});function d(e){return!!e&&e>0}const c=function(e){let{count:t,color:i,style:o,numberStyle:s,fadeIn:c}=e;const p=i===l.Red,h=(0,n.yK)((e=>({badge:{...r,...o,...(t??0)>99&&{width:void 0,padding:2},background:p?e.redBadgeBackground:e.lightIconColor,...c&&{transition:"opacity 0.1s",opacity:d(t)?1:0}}})),[t,c,p,o]);return c||d(t)?(0,a.jsx)("div",{style:h.badge,children:(0,a.jsx)(u,{count:t,numberStyle:s})}):null};function u(e){let{count:t,numberStyle:i}=e;return t?1===t?(0,a.jsx)("span",{style:{marginLeft:-.5,...i},children:"1"}):t>99?(0,a.jsx)("span",{style:{letterSpacing:-.5,...i},children:"99+"}):t>9?(0,a.jsx)("span",{style:{letterSpacing:-.5,marginLeft:-.5,...i},children:t}):(0,a.jsx)("span",{style:{...i},children:t}):null}},500255:(e,t,i)=>{i.d(t,{Z:()=>r});i(667294);var n=i(800480),o=i(853465),s=i(573063),a=i(785893);const r=function(e){const t=(0,n.O7)(),i={removeFilterButton:{height:void 0,width:void 0},removeFilterButtonMobile:{marginRight:-12,marginTop:-12,marginBottom:-12,paddingRight:12,paddingTop:12,paddingBottom:12}},{onClick:r,disabled:l}=e,{device:d}=t,c=d.isMobile?{...i.removeFilterButton,...i.removeFilterButtonMobile}:i.removeFilterButton;return(0,a.jsx)(s.Z,{icon:o.X,onClick:r,disabled:l,disableBackground:!0,style:c})}},456258:(e,t,i)=>{i.d(t,{Z:()=>N,o:()=>L});i(757658),i(430541);var n=i(667294),o=i(883355),s=i(800480),a=i(886628),r=i(724405),l=i(749085),d=i(144615),c=i(865311),u=i(709291),p=i(653965),h=i(619584),g=i(454642),m=i(717659),f=i(210228),x=i(296994),y=i(823586),b=i(165598),v=i(851811),S=i(702688),C=i(45428),j=i(770564),M=i(150770),w=i(905162),k=i(80444),T=i(788632),Z=i(206258),I=i(304761),B=i(543145),F=i(670268),R=i(785893);const O={mentions:!0,archive:!1};function L(e){const t=(0,s.O7)();return(0,n.useEffect)((()=>{void 0!==e.requestId&&j.L(e.requestId,t)}),[e.requestId,t]),(0,R.jsx)(R.Fragment,{children:e.children})}class P extends o.Z{constructor(){super(...arguments),this.storeTypes={sizeStore:l.default.createClass(20,{name:"sizeStore"}),checkpointStore:l.default.createClass(Math.random(),{name:"checkpointStore"})},this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleActivityEmit=(e,t)=>function(e,t,i){if(String(t).includes("unreadCount"))return;i.setState(Math.random())}(0,t,this.stores.checkpointStore),this.handleActivityEmitThrottled=p.P2(this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleActivityEmit,1e3),this.handleNotificationEmit=h.YX(this.handleActivityEmitThrottled),this.notificationListenerReference=void 0}UNSAFE_willMount(){this.startMessageListeners()}willUnmount(){this.stopMessageListeners()}renderComponent(){return T.Z.state.online?(0,R.jsx)(z,{type:this.props.type,source:this.props.source,tab:this.props.tab,empty:this.props.empty,sizeStore:this.stores.sizeStore,checkpointStore:this.stores.checkpointStore}):(0,R.jsx)(U,{type:this.props.type})}startMessageListeners(){const{currentUserStore:e}=k.default.state;if(e){const t=(0,d.Lp)(e.id);this.notificationListenerReference=S.ZP.addListener(t,this.handleNotificationEmit,void 0,this.environment)}}stopMessageListeners(){this.notificationListenerReference&&(S.ZP.removeListener(this.notificationListenerReference,this.environment),this.notificationListenerReference=void 0)}}P.displayName="NotificationUpdates";const N=P;function _(e,t){const{device:i}=t;return{minHeight:i.isMobile||"mentions"===e?void 0:"75vh"}}function A(e,t,i){const{device:n}=t;return{..._(e,t),paddingTop:n.isMobile?64:void 0,minHeight:n.isMobile?void 0:220,display:"flex",textAlign:"center",alignItems:"center",justifyContent:"center",fontSize:14,color:i.regularTextColor,overflow:"hidden"}}function U(e){let{type:t}=e;const i=(0,r.Fg)(),n=(0,s.O7)();return(0,R.jsx)("div",{style:A(t,n,i),children:(0,R.jsx)("div",{children:(0,R.jsx)(u.FormattedMessage,{defaultMessage:"Please go online to view updates.",id:"notificationUpdates.offline.message"})})})}function V(e){let{request:t,error:i,result:o,ready:l,type:d,source:h,tab:g,empty:y,sizeStore:S}=e;const C=(0,r.Fg)(),j=(0,s.O7)(),T=(0,a.VK)((()=>k.default.state.currentSpaceStore),[]),L=(0,a.VK)((()=>I.ZP.state),[]),P=(0,a.VK)((()=>(0,M.H7)(j)),[j]),N=(0,w.Y)("supportsNativeHome");let U=N?o??v.Tj(t):o;N&&o&&v.yW(t,o),"mentions"===L.currentTab&&L.showOnlyUnreadNotifications&&(U=L.unreadNotificationIds);const V=(0,a.VK)((()=>{const e=T&&U?U.map((e=>Z.t1.createChildStore(T,{table:c.uX,id:e}))):[],t=[],i=p.oA(e.map((e=>{const i=e.getValue();if(!i)return null;if(i.invalid)return null;if(!P&&(i.visited&&O[d]||!i.visited&&"archive"===d))return null;const n=b.sl(e);if(!n||!n.isReady())return null;const o=n.getModel();return o?o.invalid?(t.push(i),null):{activity:o,notification:i}:(t.push(i),null)})));return T&&function(e,t,i){const n=e.filter((e=>!e.read));0!==n.length&&f.createAndCommit({userAction:"NotificationUpdates.unreadNotificationNotRendered",environment:i,perform:e=>{for(const i of n)m.$h({notification:i,rootStore:t,transaction:e,read:!0})}})}(t,T,j),i}),[j,P,T,U,d]),D=(0,a.VK)((()=>S.state),[S]),z=0===V.length;if((0,n.useEffect)((()=>{const e=V.some((e=>{let{notification:t}=e;return!t.read})),t=e&&V.some((e=>{let{notification:t}=e;return t.read}));"mentions"===L.currentTab?I.ZP.setState({...L,isCurrentTabEmpty:z,containsBothReadAndUnreadNotifications:t,containsUnreadNotifications:e}):I.ZP.setState({...L,isCurrentTabEmpty:z})}),[L,z,V]),!T||i)return(0,R.jsx)("div",{style:A(d,j,C),children:(0,R.jsx)(u.FormattedMessage,{defaultMessage:"Something went wrong.",id:"notificationUpdates.unknownErrorMessage"})});if(!U)return(0,R.jsx)("div",{style:_(d,j),children:(0,R.jsx)(F.B,{areaHeight:window.innerHeight})});const K=V.map(((e,t,i)=>{let{activity:n,notification:o}=e;const s=0===t,a=i.length-1===t,r={source:h,tab:g,notification:o};return(0,R.jsx)(x.GS,{activity:n,rootStore:T,isFirst:s,isLast:a,tabArgs:r,useInboxRedesign:!1},n.id)}));return(0,R.jsxs)("div",{style:z?A(d,j,C):_(d,j),children:[z&&y,(0,R.jsx)("section",{role:"feed",className:"notranslate",children:K}),(0,R.jsx)(B.Z,{onChange:e=>{e<200&&U&&U.length>=D&&S.setState(U.length+20)},children:!U&&(0,R.jsx)(F.B,{areaHeight:window.innerHeight})})]})}function D(e){let{request:t,error:i,result:n,ready:o,requestId:s,type:a,source:r,tab:l,empty:d,sizeStore:c}=e;const u=(0,R.jsx)(V,{type:a,source:r,tab:l,empty:d,sizeStore:c,request:t,error:i,result:n,ready:o});return C.setState({request:t,result:n}),(0,R.jsx)(L,{requestId:s,children:u})}function z(e){let{type:t,source:i,tab:o,empty:r,sizeStore:l,checkpointStore:d}=e;const c=(0,s.O7)(),{currentUserStore:u,currentSpaceStore:p}=(0,a.VK)((()=>{const{currentUserStore:e,currentSpaceStore:t}=k.default.state;return{currentUserStore:e,currentSpaceStore:t}}),[]),h=(0,a.VK)((()=>l.state),[l]),f=(0,a.VK)((()=>d.state),[d]),x=null==p?void 0:p.id,b=null==u?void 0:u.id,v=(0,n.useCallback)(((e,n,s)=>x&&b?(0,R.jsx)(D,{type:t,source:i,tab:o,empty:r,sizeStore:l,request:{spaceId:x,userId:b,type:t},error:e,result:null==n?void 0:n.notificationIds,ready:s,requestId:null==n?void 0:n.requestId}):null),[r,l,i,o,t,x,b]);return b&&x?(0,R.jsx)(y.Z,{throttle:1e3,request:{spaceId:x,size:h,type:t,checkpoint:f},performRequest:async e=>{let{spaceId:t,size:i,type:n}=e;const o=I.ZP.startLoading();j.B(o,{size:i,type:n});const s=await g.getNotificationLog(c,{spaceId:t,size:i,type:n});if(I.ZP.endLoading(o),"failed"===s.type)throw s.error;if("mentions"===I.ZP.state.currentTab&&I.ZP.state.showOnlyUnreadNotifications){const e=await m.Qy({environment:c}),t=[...I.ZP.state.unreadNotificationIds];for(const i of e)t.includes(i)||t.unshift(i);I.ZP.setState({...I.ZP.state,unreadNotificationIds:t})}return{notificationIds:s.data.notificationIds,requestId:o}},render:v}):null}},427386:(e,t,i)=>{i.d(t,{Um:()=>p,ZP:()=>h,kN:()=>u});i(667294);var n=i(800480),o=i(724405),s=i(772770),a=i(434859),r=i(791754),l=i(661519),d=i(953336),c=i(785893);function u(e){return e?18:60}function p(){return(0,c.jsx)(l.Z,{size:37})}const h=function(e){let{children:t,controlRow:i,bannerText:l,controlRowPaddingTopBottom:p,removeBoxShadow:h,contentPaddingLeftRight:g,controlRowPaddingLeftRight:m,getPaddingTopBottom:f,disableScroller:x,maxWidth:y}=e;const b=(0,n.O7)(),{device:v}=b,S=f?f():v.isMobile?18:36,C=(0,o.yK)((e=>({containerWithScroller:{display:"flex",flexDirection:"column",width:"100%",height:"100%",maxWidth:y??void 0,backgroundColor:e.cardContentBackground},scroller:{flexGrow:1,WebkitOverflowScrolling:"touch",transform:"translateZ(0)",paddingLeft:g??u(v.isMobile),paddingRight:g??u(v.isMobile),paddingTop:l?15:S,paddingBottom:l?22:S},controlRowWithScroller:{flexGrow:0,flexShrink:0,paddingLeft:m??u(v.isMobile),paddingRight:m??u(v.isMobile),paddingTop:p,paddingBottom:p,boxShadow:h?void 0:`0 -1px 0 ${e.regularDividerColor}`},containerWithoutScroller:{paddingLeft:u(v.isMobile),paddingRight:u(v.isMobile)},childrenWithoutScroller:{paddingTop:S,paddingBottom:S},controlRowWithoutScroller:{paddingTop:p,paddingBottom:p,boxShadow:`0 -1px 0 ${e.regularDividerColor}`}})),[y,g,v.isMobile,l,S,m,p,h]);return x?(0,c.jsxs)("div",{style:C.containerWithoutScroller,children:[(0,c.jsx)("div",{style:C.childrenWithoutScroller,children:t}),i&&(0,c.jsx)("div",{style:C.controlRowWithoutScroller,children:i})]}):(0,c.jsxs)("div",{style:C.containerWithScroller,children:[l&&(0,c.jsx)(r.Z,{styleKey:s.v.Blue,isMobile:!1,children:l}),(0,c.jsx)(d.Z,{type:a.Z.All,style:C.scroller,children:t}),i&&(0,c.jsx)("div",{style:C.controlRowWithScroller,children:i})]})}},555422:(e,t,i)=>{i.d(t,{L:()=>P,Z:()=>O});i(757658);var n=i(667294),o=i(800480),s=i(886628),a=i(724405),r=i(536591),l=i(542853),d=i(16184),c=i(709291),u=i(401898),p=i(761045),h=i(311368),g=i(460709),m=i(123570),f=i(825464),x=i(44041),y=i(891694),b=i(552275),v=i(231945),S=i(478140),C=i(828992),j=i(632163),M=i(863296),w=i(489728),k=i(672495),T=i(824006),Z=i(526388),I=i(164369),B=i(427386),F=i(723189),R=i(785893);function O(e){const{title:t,caption:i,captionStyle:r,isMobile:l,upsellOptions:d,type:c,shouldHighlight:u}=e,g=(0,o.O7)(),{paddingLeftCSS:b,paddingRightCSS:v}=(0,s.VK)((()=>{const{paddingLeftCSS:e,paddingRightCSS:t}=g.WindowSizeStore.state;return{paddingLeftCSS:e,paddingRightCSS:t}}),[g]),[S,C]=(0,n.useState)(!1),j=(0,n.useCallback)((()=>C(!0)),[C]),M=(0,n.useCallback)((()=>C(!1)),[C]),w=(0,n.useContext)(h.Ue),k=(0,n.useRef)(null);(0,n.useEffect)((()=>{u&&k.current&&p.bx({element:k.current,scrollers:{verticalScroller:null==w?void 0:w.verticalScroller},vertical:{reveal:"closest"},horizontal:void 0,animate:!0})}),[u,k,null==w?void 0:w.verticalScroller]);const T=(0,n.useMemo)((()=>{if(l){if("dropdown"===c)return{display:"flex",flexDirection:"column"};if("toggleToButton"===e.type&&e.isOn||"custom"===e.type&&!0===e.useFlexboxStyle)return{}}return{display:"flex",alignItems:"center",justifyContent:"space-between"}}),[l,c,e]),O=(0,a.yK)((t=>({container:{...T,paddingLeft:l?b:void 0,paddingRight:l?v:void 0,cursor:S&&!e.disabled?"pointer":e.disabled?"not-allowed":"default",...u?{backgroundColor:t.buttonHoveredBackground,marginLeft:-1*(0,B.kN)(l),marginRight:-1*(0,B.kN)(l),paddingLeft:(0,B.kN)(l),paddingRight:(0,B.kN)(l),marginTop:-1*(0,m.f)(l)/2,marginBottom:-1*(0,m.f)(l)/2,paddingTop:(0,m.f)(l)/2,paddingBottom:(0,m.f)(l)/2}:{}},description:{display:"flex",flexDirection:"column",marginRight:"10%",width:"60%"},captionStyle:{...r},title:{display:"flex",flexDirection:"row"}})),[l,b,v,u,S,r,e.disabled,T]),P="toggle"===e.type||"toggleToButton"===e.type||"custom"===e.type&&!e.disableSettingsItemClick,N=(0,R.jsxs)("div",{ref:k,style:O.container,onClick:()=>{if(!(e.disabled||"custom"===e.type&&e.disableSettingsItemClick))return d&&d.shouldUpsell?x.y(g,{from:d.analyticsName,for:d.subscriptionTier}):void("toggle"===e.type?e.onToggle():"toggleToButton"===e.type?e.onClick():"custom"===e.type&&e.customButton&&n.isValidElement(e.customButton)&&e.customButton.props.onClick&&"function"==typeof e.customButton.props.onClick&&e.customButton.props.onClick())},onMouseEnter:P?j:void 0,onMouseLeave:P?M:void 0,children:[(0,R.jsxs)("div",{style:O.description,children:[(0,R.jsxs)(F.Z,{smallMarginBottom:!0,disabled:e.disabled,isCritical:e.isCritical,children:[(0,R.jsxs)("div",{style:O.title,children:[t,e.badge]}),d&&d.shouldUpsell&&(0,R.jsx)(y.Z,{subscriptionTier:d.subscriptionTier,analyticsName:d.analyticsName,onClick:()=>x.y(g,{from:d.analyticsName,for:d.subscriptionTier}),desktopStyle:{display:"inline-block",marginLeft:8,marginTop:-3}})]}),(0,R.jsx)(I.Z,{style:O.captionStyle,isSmall:!0,isMultiline:!0,children:i})]}),(0,R.jsx)(L,{...e})]});return e.tooltipLabel?(0,R.jsx)(Z.Z,{placement:f.u.Bottom,alignment:f.v.Center,disableTooltip:e.disableTooltip,renderTooltip:()=>e.tooltipLabel,render:e=>(0,R.jsx)("div",{...e,children:N})}):N}function L(e){return"toggle"===e.type?(0,R.jsx)(T.Z,{on:e.isOn,disabled:e.disabled,isLocked:e.isLocked,lockedTooltip:e.lockedTooltip}):"dropdown"===e.type?(0,R.jsx)(P,{...e}):"custom"===e.type?(0,R.jsx)(R.Fragment,{children:e.customButton}):"toggleToButton"===e.type?e.isOn?(0,R.jsx)("div",{style:{marginTop:12},children:(0,R.jsx)(M.Z,{isLarge:!0,onClick:e.onClick,style:e.buttonStyle,disabled:e.disabled,children:e.buttonLabel})}):(0,R.jsx)(T.Z,{on:!1,onClick:e.onClick,disabled:e.disabled}):void(0,u.t1)(e)}function P(e){var t;const{isMobile:i,title:n,upsellOptions:o,currentOption:s,options:u,info:p,onSelectOption:h,menuStyle:m,buttonStyle:x,isLocked:y,lockedTooltip:M}=e,T=null===(t=u.find((e=>{let{key:t}=e;return t===s})))||void 0===t?void 0:t.label,I=(0,a.yK)((e=>({button:{marginTop:12,marginBottom:4,marginRight:i?"auto":void 0,paddingLeft:i?12:8,paddingRight:i?12:8,height:i?44:28,border:i?`1px solid ${e.outlineButtonBorder}`:void 0,...x},icon:{width:10,marginLeft:4,fill:e.lightIconColor},lockedContainer:{display:"flex",alignItems:"center",justifyContent:"center"},lockedIcon:{marginTop:12,marginBottom:4,height:16,width:16,color:e.grayButtonBackground}})),[i,x]),B=Boolean(o&&o.shouldUpsell)||e.disabled||y,F=(0,R.jsx)(v.ZP,{popupType:i?v.Z4.SlideUp:v.Z4.Popup,placementToOrigin:v.pO.Right,renderOrigin:e=>(0,R.jsxs)(w.Z,{...e,isLarge:!0,style:{...I.button,opacity:B?.4:1},disabled:B,children:[T,(0,l.i)(I.icon)]}),render:e=>{let t;t=i?{menuType:g.og.Modal,title:n,right:(0,R.jsx)(c.FormattedMessage,{defaultMessage:"Done",id:"settingItem.buttonPopup.done.label"}),onClickRight:e.close}:{menuType:g.og.Popup,width:250,...m};const o=[{key:"settings-item-section",render:e=>(0,R.jsx)(k.Z,{...e}),items:u.map((t=>{let{key:n,label:o,caption:s}=t;return{key:n,action:()=>{h(n),e.close()},render:e=>(0,R.jsx)(b.Z,{...e,title:o,caption:s,shouldWrapCaption:!0,right:T===o?(0,R.jsx)("div",{style:{width:i?16:14},children:(0,r.e)()}):void 0})}}))}];if(p){const e=p.map((e=>{let{key:t,label:i}=e;return{key:t,action:()=>{},render:e=>(0,R.jsx)(C.Z,{...e,shouldWrapCaption:!0,caption:i})}}));o.push({key:"info-item-section",render:e=>(0,R.jsx)(k.Z,{...e,topBorder:!0}),items:e})}return(0,R.jsx)(S.Z,{...t,children:(0,R.jsx)(j.Z,{type:j.i.Vertical,sections:o,initialFocus:void 0})})}});return y?(0,R.jsx)(Z.Z,{placement:f.u.Left,alignment:f.v.Start,disableTooltip:!M,renderTooltip:()=>M,render:e=>(0,R.jsxs)("div",{style:I.lockedContainer,...e,children:[(0,d.Q)(I.lockedIcon),F]})}):F}},66957:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(667294),o=i(800480),s=i(886628),a=i(724405),r=i(460709),l=i(489728),d=i(785893);function c(e){let{tabs:t,selectedIndex:i,onChange:c,separatorIndexes:u,right:p,style:h,rightStyle:g,tabStyle:m,tabTitleStyle:f,tabBorderStyle:x,selectedTabStyle:y,readOnly:b,hideTabBorder:v}=e;const S=(0,n.useContext)(r.Xp),{device:C,WindowSizeStore:j}=(0,o.O7)(),{safePaddingLeft:M,safePaddingRight:w}=(0,s.VK)((()=>({safePaddingLeft:j.getSafePaddingLeftCSS(16),safePaddingRight:j.getSafePaddingRightCSS(16)})),[j]),k=(0,a.yK)((e=>{const t={paddingTop:6,paddingBottom:6,whiteSpace:"nowrap",minWidth:0,flexShrink:0,color:e.mediumTextColor,...m},i=`inset 0 -1px 0 ${e.regularDividerColor}`,n=S.menuType===r.og.Popup,o={fontSize:16,paddingTop:2,paddingLeft:n?16:M,paddingRight:n?16:w,zIndex:2,height:44,background:e.popoverBackground};return{container:{overflowY:"visible",overflowX:"auto",display:"flex",width:"100%",position:"relative",boxShadow:v?void 0:i,...C.isMobile?o:{fontSize:14,paddingLeft:8,paddingRight:8,zIndex:1},...h},separator:{display:"inline-flex",alignItems:"center",margin:"0 4px",paddingBottom:4,whiteSpace:"nowrap",minWidth:0,flexShrink:0,color:e.regularDividerColor},mobile:{},tab:t,selectedTab:{...t,position:"relative",color:e.regularTextColor,...y},border:{borderBottom:`2px solid ${e.regularTextColor}`,position:"absolute",bottom:0,left:8,right:8,...x},rightContainer:{flexGrow:1,display:"flex",alignItems:"center",justifyContent:"flex-end",color:e.mediumTextColor,...g}}}),[S.menuType,C.isMobile,g,M,w,y,h,x,m,v]);return(0,d.jsxs)("div",{className:"hide-scrollbar",style:k.container,children:[t.map(((e,t)=>{const o=t===i;return(0,d.jsxs)(n.Fragment,{children:[(0,d.jsxs)("div",{style:o?k.selectedTab:k.tab,children:[(0,d.jsx)(l.Z,{style:f,onClick:()=>c(t),disabled:b,mobileFeedback:C.isMobile,children:e}),o&&(0,d.jsx)("div",{style:k.border})]},`tabButton-${t}`),u&&u.includes(t)&&(0,d.jsx)("div",{style:k.separator,className:"notranslate",children:"|"},`${t}-separator`)]},t)})),p&&(0,d.jsx)("div",{style:k.rightContainer,children:p})]})}const u=n.memo(c)},147082:(e,t,i)=>{i.d(t,{UR:()=>S,ZP:()=>j,go:()=>v});var n=i(667294),o=i(883355),s=i(800480),a=i(724405),r=i(853465),l=i(653965),d=i(460709),c=i(98742),u=i(434859),p=i(964113),h=i(164921),g=i(437601),m=i(374194),f=i(203386),x=i(953336),y=i(164369),b=i(785893);const v="20px";let S=function(e){return e[e.Select=0]="Select",e[e.Person=1]="Person",e[e.Relation=2]="Relation",e[e.FilterValue=3]="FilterValue",e[e.Share=4]="Share",e[e.Group=5]="Group",e}({});class C extends o.Z{constructor(){super(...arguments),this.inputRef=n.createRef(),this.storeTypes={store:p.Z},this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleFocused=()=>{this.stores.store.setState({focused:!0})},this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleBlurred=()=>{this.stores.store.setState({focused:!1})},this.handleContainerClick=()=>{var e,t,i;this.props.disabled||(null===(e=this.inputRef.current)||void 0===e||e.focusInput(),null===(t=(i=this.props).onClick)||void 0===t||t.call(i))}}UNSAFE_willMount(){(this.props.focus||this.props.focusInitial)&&this.stores.store.setState({focused:!0})}UNSAFE_willUpdate(){void 0!==this.props.focus&&this.stores.store.setState({focused:this.props.focus})}renderComponent(){const{disabled:e}=this.props;return(0,b.jsx)(f.Z,{debugName:"TokenInputMenuItem",capture:!e,onLeft:l.yR,onRight:l.yR,onSelectAll:l.yR,onRedo:l.yR,onUndo:l.yR,onToggleBold:l.yR,onToggleItalics:l.yR,onToggleCode:l.yR,onCut:l.yR,onCopy:l.yR,onPaste:l.yR,onKeypress:l.yR,children:(0,b.jsx)(f.Z,{debugName:"TokenInputMenuItem",capture:!e&&this.props.value.length>0,onDelete:l.yR,onBackspace:l.yR,children:(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"stretch",flex:1,minWidth:0,gap:this.props.message?4:void 0},children:[this.renderTokenInput(),this.props.message&&(0,b.jsx)(y.Z,{isSmall:!0,children:this.props.message})]})})})}renderTokenInput(){const{right:e,showClearButton:t}=this.props;return e||t?(0,b.jsxs)(x.Z,{type:u.Z.All,style:{...I(this.environment,this.theme,this.props.format,this.props.focus,this.props.dontShowBorderBottom,this.props.disabled,this.props.showBorder,this.context.menu),flexWrap:"nowrap",...this.props.style},onClick:this.handleContainerClick,children:[(0,b.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",flexGrow:1,minWidth:0,...this.props.inputAndTokenWrapRightStyle},children:[this.props.tokens,!this.props.hideInput&&this.renderInput()]}),(0,b.jsx)("div",{style:{flexShrink:0},children:(0,b.jsx)(Z,{showClearButton:this.props.showClearButton,right:this.props.right,onClearButtonClick:this.props.onClearButtonClick,tokens:this.props.tokens,value:this.props.value})})]}):this.environment.device.isMobile?(0,b.jsxs)("div",{style:{...I(this.environment,this.theme,this.props.format,this.props.focus,this.props.dontShowBorderBottom,this.props.disabled,this.props.showBorder,this.context.menu),flexWrap:"nowrap",...this.props.style},onClick:this.handleContainerClick,children:[(0,b.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",flexGrow:1,minWidth:0,overflow:"hidden",marginRight:M(this.props.format)?6:0},children:[this.props.tokens,!this.props.hideInput&&this.renderInput()]}),(0,b.jsx)(g.Z,{show:this.stores.store.state.focused})]}):(0,b.jsxs)(x.Z,{type:u.Z.All,style:{...I(this.environment,this.theme,this.props.format,this.props.focus,this.props.dontShowBorderBottom,this.props.disabled,this.props.showBorder,this.context.menu),...this.props.style},onClick:this.handleContainerClick,children:[this.props.tokens,!this.props.hideInput&&this.renderInput()]})}renderInput(){const e=0===this.props.tokens.length;return(0,b.jsx)(m.Z,{disabled:this.props.disabled,format:m.B.Transparent,...(0,c.Z)({onKeyDown:e=>function(e,t,i,n){"Backspace"===e.key&&0===t.length&&i();n&&n(e)}(e,this.props.value,this.props.onRemoveLastToken,this.props.onKeyDown)},{onChange:this.props.onChange}),value:this.props.value,focus:this.props.focus,focusInitial:this.props.focusInitial,focusAfterAnimation:this.props.focusAfterAnimation,style:(t=this.props.format,i=this.environment,n=this.theme,o=this.props.inputFullWidth,s=this.props.inputDivStyle,{flexGrow:1,flexShrink:1,flexBasis:o?"100%":60,minWidth:60,width:"auto",lineHeight:v,...i.device.isMobile?{margin:"0 8px 8px 0"}:T(n)[t].inputDivDesktopStyle,...s}),inputStyle:this.props.inputStyle||{height:this.environment.device.isMobile?24:M(this.props.format)?20:18},size:1,ref:this.inputRef,type:this.props.type,placeholder:e?this.props.placeholder:"",onSubmit:e=>function(e,t,i,n){0===t.length&&i&&i();n&&n(e)}(e,this.props.value,this.props.onEmptySubmit,this.props.onSubmit),onFocus:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleFocused,onBlur:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleBlurred,textarea:this.props.textarea,autoComplete:this.props.autoComplete});var t,i,n,o,s}}C.displayName="TokenInputMenuItem",C.contextTypes={...d.mw,...o.w};const j=C;function M(e){return e===S.Group}function w(e,t){return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",background:t?"none":e.tokenInputMenuItemBackground,cursor:"text",overflow:"hidden"}}function k(e){return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",flexShrink:0,minHeight:44,borderBottom:`1px solid ${e.regularDividerColor}`,fontSize:16,background:e.popoverBackground}}function T(e){const t={desktopWrapStyle:{padding:"8px 9px 1px",width:"100%",minHeight:34,fontSize:14},inputDivDesktopStyle:{margin:"0 6px 6px 0",borderTopLeftRadius:4,borderTopRightRadius:4},inputDivDesktopFocusStyle:{}};return{[S.Select]:t,[S.Person]:t,[S.Relation]:t,[S.Group]:t,[S.FilterValue]:{desktopWrapStyle:{padding:"6px 6px 1px",boxShadow:e.inputBoxShadow,background:e.inputBackground,margin:"6px 8px 2px 8px",minHeight:30,fontSize:12,borderRadius:4},inputDivDesktopStyle:{margin:"0 6px 4px 0"},inputDivDesktopFocusStyle:{boxShadow:"rgba(35, 131, 226, 0.57) 0px 0px 0px 1px inset, rgba(35, 131, 226, 0.35) 0px 0px 0px 2px"}},[S.Share]:{desktopWrapStyle:{padding:"8px 9px 1px",width:"100%",minHeight:34,fontSize:14},inputDivDesktopStyle:{margin:"0 0 0 2px",borderTopLeftRadius:4,borderTopRightRadius:4},inputDivDesktopFocusStyle:{}}}}function Z(e){let{showClearButton:t,right:i,onClearButtonClick:n,tokens:o,value:l}=e;const d=(0,a.Fg)(),c=(0,s.O7)(),{isMobile:u}=c.device;return i?(0,b.jsx)(b.Fragment,{children:i}):t&&(o.length>0||l.length>0)?(0,b.jsx)(h.Z,{onClick:n,style:{flexShrink:0,flexGrow:0,borderRadius:u?24:20,marginTop:2},children:(0,r.X)({width:u?16:14,height:u?16:14,fill:d.lightIconColor})}):null}function I(e,t,i,n,o,s,a,r){const{WindowSizeStore:l}=e;return{...e.device.isMobile?{...k(t),paddingTop:14,paddingBottom:8,paddingLeft:(null==r?void 0:r.menuType)!==d.og.Popup?l.getSafePaddingLeftCSS(16):16,paddingRight:(null==r?void 0:r.menuType)!==d.og.Popup?l.getSafePaddingRightCSS(16):16,...o&&{borderBottom:"none"}}:{...w(t,s),...T(t)[i].desktopWrapStyle},...a&&{boxShadow:"rgba(15, 15, 15, 0.1) 0px 0px 0px 1px inset"},...a&&n&&{boxShadow:"rgba(35, 131, 226, 0.57) 0px 0px 0px 1px inset, rgba(35, 131, 226, 0.35) 0px 0px 0px 2px"},...!e.device.isMobile&&n&&T(t)[i].inputDivDesktopFocusStyle}}},760442:(e,t,i)=>{i.d(t,{Z:()=>a});i(667294);var n=i(137810),o=i(847853),s=i(785893);const a=function(e){let{imageURL:t,imageWidth:i,imageHeight:n,caption:a,title:l}=e;if(t){const e=(0,o.D)(t);return(0,s.jsxs)("div",{style:{width:i||200,marginTop:4,marginBottom:4},children:[(0,s.jsx)("div",{style:{width:"100%",height:n||100,borderRadius:4,backgroundImage:`url(${e})`,backgroundSize:"cover",marginBottom:6}}),(0,s.jsx)(r,{caption:a,title:l})]})}return(0,s.jsx)(r,{caption:a,title:l,style:{width:i}})};function r(e){let{style:t,caption:i,title:o}=e;return(0,s.jsxs)("div",{style:{whiteSpace:"normal",lineHeight:1.4,...t},children:[o&&(0,s.jsx)("header",{style:{fontWeight:n.Z.fontWeight.bold,marginBottom:4},children:o}),i]})}},670268:(e,t,i)=>{i.d(t,{B:()=>a});i(667294);var n=i(724405),o=i(636596),s=i(785893);function a(e){let t=Math.floor(e.areaHeight/124);0===t&&(t=1);const i=(0,n.yK)((e=>({skeletonRect:{height:8,borderRadius:4,margin:10,backgroundColor:e.lightDividerColor},skeletonCircle:{display:"flex",width:28,height:28,marginRight:8,backgroundColor:e.lightDividerColor,borderRadius:20},skeletonSection:{display:"flex",width:"100%",margin:20,flexDirection:"row"}})),[8,10,20]),a=[...Array(t)].map(((e,t)=>(0,s.jsxs)("div",{style:i.skeletonSection,children:[(0,s.jsx)(o.Z,{style:i.skeletonCircle}),(0,s.jsxs)("div",{style:{width:"80%"},children:[(0,s.jsx)(o.Z,{style:{width:"80%",...i.skeletonRect,marginTop:0}}),(0,s.jsx)(o.Z,{style:{width:"50%",...i.skeletonRect}}),(0,s.jsx)(o.Z,{style:{width:"60%",...i.skeletonRect}}),(0,s.jsx)(o.Z,{style:{width:"50%",...i.skeletonRect}})]})]},t)));return(0,s.jsx)("div",{children:a})}},923154:(e,t,i)=>{i.r(t),i.d(t,{default:()=>A});var n=i(667294),o=i(883355),s=i(800480),a=i(886628),r=i(749085),l=i(101464),d=i(698519),c=i(709291),u=i(653965),p=i(937850),h=i(401898),g=i(519719),m=i(717659),f=i(612457),x=i(843250),y=i(460709),b=i(851811),v=i(448451),S=i(905162),C=i(80444),j=i(304761),M=i(884708),w=i(623063),k=i(436488),T=i(568785),Z=i(478140),I=i(489728),B=i(543145),F=i(430506),R=i(483785),O=i(582598),L=i(456258),P=i(785893);const N=[{tab:"mentions"},{tab:"archive"},{tab:"allPages",showSeparatorBefore:!0}];class _ extends o.Z{constructor(){super(...arguments),this.storeTypes={refreshCountStore:r.default.createClass(0,{name:"refreshCountStore"})},this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleRefreshAll=()=>{var e;(e=this.stores.refreshCountStore).setState(e.state+1)},this.handleRefreshAllThrottled=u.Ds(this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleRefreshAll,1e3,{leading:!0})}willUnmount(){var e;e=this.environment,g.nI(e),m.G7({environment:e,newTab:"mentions",shouldTrack:!1})}renderComponent(){const{device:e}=this.environment;let t;const i=(0,P.jsx)(v.QU,{onClickRefreshAllTab:this.handleRefreshAllThrottled,orderedTabConfigs:N});if(e.isMobile){const n="mobileTopBar";t={menuType:y.og.Modal,title:(0,P.jsx)(c.FormattedMessage,{defaultMessage:"Updates",id:"updatesModal.mobileMenu.title"}),width:this.props.format===b.EX.RenderAsPage?"100vw":void 0,renderAsPage:this.props.format===b.EX.RenderAsPage,right:[(0,P.jsx)(v.co,{onClick:this.handleRefreshAllThrottled,location:n},"InboxRefreshAllTabButton"),(0,P.jsx)(v.VO,{location:n},"InboxFilterForUnreadButton"),(0,P.jsx)("span",{style:{width:8}},"paddingSpan"),(0,P.jsx)(v.$q,{location:n},"InboxNotificationSettingsButton")],left:[V(),e.isPhone&&(0,S.Y)("supportsNativeHome")&&this.props.format===b.EX.RenderAsPage&&!(0,S.Y)("supportsNativeInbox")?void 0:(0,l.k)({fill:this.theme.regularTextColor,width:26,height:26})],onClickLeft:this.props.onClose,header:i,whiteBackground:!0,footer:(0,S.Y)("supportsHorizon1Navigation")&&e.isAndroid?(0,P.jsx)("div",{style:{paddingBottom:78}}):void 0}}else t={menuType:y.og.Popup,header:i,height:"auto"};return(0,P.jsx)(F.Z,{onSwipeLeft:()=>function(e){const t=N.findIndex((e=>e.tab===j.ZP.state.currentTab));if(-1===t)return;const i=N[t+1].tab;void 0!==i&&m.G7({environment:e,newTab:i,shouldTrack:!0})}(this.environment),onSwipeRight:()=>function(e){const t=N.findIndex((e=>e.tab===j.ZP.state.currentTab));if(-1===t)return;const i=N[t-1].tab;void 0!==i&&m.G7({environment:e,newTab:i,shouldTrack:!0})}(this.environment),render:e=>(0,P.jsxs)(Z.Z,{...t,...e,className:x.C18,children:[(0,P.jsx)(B.Z,{onChange:(e,t)=>{let{offsetFromTop:i}=t;j.n_.setState(i<=0)}}),(0,P.jsx)(k.Z,{capture:!0,allowUndo:!0,allowEsc:!0,allowMobileAutoScroll:!0,render:()=>this.props.format===b.EX.RenderAsPage?(0,P.jsx)(z,{refreshCountStore:this.stores.refreshCountStore}):(0,P.jsx)(D,{refreshCountStore:this.stores.refreshCountStore})})]})})}}_.displayName="UpdatesPopup";const A=_;function U(){return(0,P.jsx)(O.Z,{icon:d.k,title:(0,P.jsx)(c.FormattedMessage,{defaultMessage:"You've read everything",id:"updatesModal.spaceUpdatesTab.emptyUnreadMentionsTabTitle"}),message:(0,P.jsxs)("div",{children:[(0,P.jsx)(c.FormattedMessage,{defaultMessage:"You have more notifications in your inbox.",id:"updatesModal.spaceUpdatesTab.emptyUnreadMentionsTabMessage"}),(0,P.jsx)("div",{style:{height:12}}),(0,P.jsx)(I.Z,{isBlue:!0,onClick:()=>{"mentions"===j.ZP.state.currentTab&&j.ZP.setState({...j.ZP.state,showOnlyUnreadNotifications:!1,unreadNotificationIds:[]})},children:(0,P.jsx)(c.FormattedMessage,{defaultMessage:"See all",id:"updatesModal.spaceUpdatesTab.emptyUnreadMentionsTabButton"})})]})})}function V(){if((0,S.Y)("supportsNativeHome"))return(0,P.jsx)(f.Z,{show:void 0!==j.ZP.state.loadingId,showDelay:400,showHold:0,render:e=>e?(0,P.jsx)(T.Z,{style:{width:14}}):(0,P.jsx)("div",{style:{width:14}})})}function D(e){let{refreshCountStore:t}=e;const i=(0,a.VK)((()=>j.ZP.state),[]),{currentSpaceStore:n,mainEditorCurrentBlockStore:o}=(0,a.VK)((()=>{const{currentSpaceStore:e,mainEditorCurrentBlockStore:t}=C.default.state;return{currentSpaceStore:e,mainEditorCurrentBlockStore:t}}),[]),s=(0,a.VK)((()=>t.state),[t]),r=i.currentTab;if("allPages"===r)return n&&o?(0,P.jsx)(M.Z,{spaceId:n.id,empty:()=>(0,P.jsx)(O.Z,{message:(0,P.jsx)(c.FormattedMessage,{defaultMessage:"Updates on pages in your workspace will appear here.",id:"updatesModal.allPagesTab.emptyPrompt"}),title:(0,P.jsx)(c.FormattedMessage,{defaultMessage:"No new updates",id:"updatesModal.allPagesTab.emptyPromptTitle"})}),source:"notifications_tab"},`all-pages-${s}`):null;if("mentions"===r){const e=i.showOnlyUnreadNotifications;return(0,P.jsx)(L.Z,{type:"mentions",empty:e?(0,P.jsx)(U,{}):(0,P.jsx)(O.Z,{message:(0,P.jsx)(c.FormattedMessage,{defaultMessage:"You'll be notified here for @mentions, page activity, requests, and page invites.",id:"updatesModal.spaceUpdatesTab.allArchivedRequests"}),title:(0,P.jsx)(c.FormattedMessage,{defaultMessage:"You're all caught up",id:"updatesModal.spaceUpdatesTab.allArchivedTitle"})}),source:"notifications_tab",tab:"inbox"},"mentions")}if("archive"===r)return(0,P.jsx)(L.Z,{type:"archive",empty:(0,P.jsx)(O.Z,{message:(0,P.jsx)(c.FormattedMessage,{defaultMessage:"Any Inbox updates you archived will show up here.",id:"updatesModal.archiveTab.emptyPrompt"}),title:(0,P.jsx)(c.FormattedMessage,{defaultMessage:"No archived updates",id:"updatesModal.archiveTab.emptyPromptTitle"})}),source:"notifications_tab",tab:"archive"},"archive");(0,h.t1)(r)}function z(e){let{refreshCountStore:t}=e;const i=(0,s.O7)();return(0,P.jsx)(R.Z,{fetch:async()=>{await p.Vs(0),await C.default.waitUntil((()=>void 0!==C.default.state.currentSpaceStore))},loading:()=>(0,P.jsx)(n.Fragment,{}),willRender:()=>{var e;null===(e=i.mobileNative)||void 0===e||e.markTransitionReady({type:"updates"})},render:()=>(0,P.jsx)(w.Z,{isVisible:!0,enterAnimationStyle:{opacity:0},animationStyle:{opacity:1},blockRenderQueueOnEnter:!0,render:()=>(0,P.jsx)(D,{refreshCountStore:t})})})}},197680:(e,t,i)=>{i.d(t,{Z:()=>x});var n=i(667294),o=i(800480),s=i(886628),a=i(266897),r=i(709291),l=i(401898),d=i(98742),c=i(825464),u=i(552275),p=i(526388),h=i(670301),g=i(45653),m=i(785893);const f=n.forwardRef(((e,t)=>{const{actor:i,userTitle:n,useEmailAsTooltip:f,tooltip:x,tooltipPlacement:y}=e,b=(0,o.O7)(),v=(0,r.useIntl)(),S=(0,s.VK)((()=>i.asActor&&i.isUser()?i.email:void 0),[i]),C=f&&S?S:x,j=b.device.isMobile?24:20;let M;return(0,a.YU)(i)?M=(0,m.jsx)(h.Z,{botValue:null==i?void 0:i.asActor,size:j}):(0,a.$S)(i)?M=(0,m.jsx)(g.Z,{userValue:null==i?void 0:i.asActor,size:j}):(0,a.Iq)(i)?M=(0,m.jsx)(g.Z,{userValue:void 0,size:j}):(0,l.t1)(i),(0,m.jsx)(p.Z,{ref:t,placement:y??c.u.Bottom,alignment:c.v.Start,textWrap:!0,render:t=>(0,m.jsx)(u.Z,{...(0,d.Z)(t,e),icon:M,title:n??(0,a.$4)(v,i),className:"notranslate",right:e.right}),disableTooltip:!C,renderTooltip:()=>C})}));f.displayName="UserMenuItem";const x=f},193481:(e,t,i)=>{i.d(t,{Z:()=>k});var n=i(667294),o=i(800480),s=i(184747),a=i(886628),r=i(724405),l=i(569651),d=i(709291),c=i(401898),u=i(45257),p=i(897638),h=i(223196),g=i(41558),m=i(552275),f=i(203386),x=i(489728),y=i(953437),b=i(158297),v=i(83264),S=i(500255),C=i(975689),j=i(991642),M=i(608319),w=i(785893);const k=function(e){let{onChange:t,onMenuDismiss:i,showButtons:n,title:r,value:l,disabled:d,dateFormat:c,icon:u,mode:p,focused:h}=e;const m=(0,o.O7)(),f=(0,a.qz)(void 0,g.Z);(0,s.Z)((()=>{L({value:l},f)}));const{device:x}=m;return x.isMobile?(0,w.jsx)(z,{onChange:t,onMenuDismiss:i,showButtons:n,title:r,value:l,disabled:d,dateFormat:c,icon:u,mode:p,store:f}):(0,w.jsx)(D,{onChange:t,onMenuDismiss:i,showButtons:n,title:r,value:l,disabled:d,dateFormat:c,focused:h,icon:u,mode:p,store:f})};function T(e){const{device:t}=e;return t.isMobile?h.k.SlideUp:h.k.Popup}function Z(e){return{buttonMenuItem:{color:e.mediumTextColor},activeMenuItem:{color:e.regularTextColor}}}function I(e){e.preventDefault&&e.preventDefault()}function B(e){e({starting:void 0,ending:void 0})}function F(e){return{menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},icon:{height:14,width:14,fill:"currentColor"},iconActiveDesktop:{height:14,width:14,fill:"currentColor",alignSelf:"flex-start",marginTop:2,marginRight:2},iconActiveDesktopWrapper:{marginTop:0},iconActiveMobile:{height:14,width:14,fill:"currentColor",marginTop:1,marginRight:6},popup:{paddingTop:12,paddingBottom:8},menuItemTitleDesktop:{width:"100%"},sectionMenuItem:{display:"flex"},summary:{display:"inline-flex"}}}function R(e,t){t||e.setState({...e.state,isOpen:!0,focus:"starting"})}function O(e,t,i,n,o){const{temporaryDateRange:s}=i.state;p.zD(e)||(o||t(s),i.setState({...i.state,isOpen:!1,temporaryDateRange:{starting:void 0,ending:void 0}}),n&&n())}function L(e,t){if(!e.error)return t.setState({...t.state,temporaryDateRange:{...t.state.temporaryDateRange,...e.value}})}function P(e){let{disabled:t,icon:i,title:s,store:a}=e;const r=(0,o.O7)(),l=(0,n.useCallback)((()=>R(a,t)),[a,t]),d=F(r);return(0,w.jsx)(m.Z,{disabled:t,focused:!1,icon:i(d.icon),title:s,onClick:l})}function N(e){let{disabled:t,title:i,value:s,dateFormat:a,onChange:r,store:c}=e;const u=(0,d.useIntl)(),h=(0,o.O7)(),g=(0,n.useCallback)((()=>R(c,t)),[c,t]),m=F(h),f=(0,w.jsxs)("div",{style:m.summary,children:[(0,l.C)(m.iconActiveMobile),p._Q(s,u,a)]});return(0,w.jsx)(C.Z,{disabled:t,onClick:g,onClickClear:()=>B(r),label:i,title:f})}function _(e){let{disabled:t,value:i,dateFormat:s,focused:a,onChange:c,store:u}=e;const h=(0,d.useIntl)(),g=(0,r.Fg)(),f=(0,o.O7)(),x=(0,n.useCallback)((()=>R(u,t)),[u,t]),y=F(f),b=Z(g),v={...y.menuItem,...b.activeMenuItem},C=p._Q(i,h,s),j=(0,w.jsx)(S.Z,{onClick:()=>B(c),disabled:t});return(0,w.jsx)(m.Z,{focused:a,disabled:t,icon:(0,l.C)(y.iconActiveDesktop),title:C,right:j,isTokenTitle:!0,alignIconTop:!0,onClick:x,desktopTitleStyle:y.menuItemTitleDesktop,desktopIconStyle:y.iconActiveDesktopWrapper,style:v})}function A(e){let{disabled:t,title:i,icon:s,focused:a,mode:l,store:d}=e;const c=(0,r.Fg)(),u=(0,o.O7)(),p=(0,n.useCallback)((()=>R(d,t)),[d,t]),h=F(u),g=Z(c),f={...h.menuItem,...g.buttonMenuItem,...l===M.z.Pill?{width:"fit-content",border:"solid 1px",paddingLeft:0,paddingRight:0,borderRadius:20,fontSize:12}:{}};return(0,w.jsx)(m.Z,{focused:a,disabled:t,icon:s(h.icon),title:i,onClick:p,style:f})}function U(e){let{disabled:t,value:i,title:o,store:s}=e;const a=(0,n.useCallback)((()=>R(s,t)),[s,t]);return(0,w.jsx)(u.Z,{on:Boolean(i.starting||i.ending),icon:(0,l.C)({width:16,marginRight:6,fill:"currentColor"}),title:(0,w.jsx)("span",{children:o}),onClick:a})}function V(e){let{onChange:t,onMenuDismiss:i,showButtons:o,title:s,value:r,store:l}=e;const c=(0,n.useCallback)((e=>O(e,t,l,i,o)),[t,l,i,o]),u=(0,n.useCallback)((e=>L(e,l)),[l]),p=(0,a.VK)((()=>function(e,t){const{temporaryDateRange:i}=t.state;return{...e,...i}}(r,l)),[l,r]);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(v.Z,{title:s,value:p,onUpdate:u,store:l,onDismiss:c}),o&&(0,w.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",padding:"0px 10px"},children:[(0,w.jsx)(x.Z,{isGray:!0,style:{marginLeft:"auto",marginRight:8},onClick:c,children:(0,w.jsx)(d.FormattedMessage,{defaultMessage:"Cancel",id:"searchDateFilter.cancelButton.label"})}),(0,w.jsx)(b.Z,{onClick:()=>t(l.state.temporaryDateRange),children:(0,w.jsx)(d.FormattedMessage,{defaultMessage:"Accept",id:"searchDateFilter.acceptButton.label"})})]})]})}function D(e){let{mode:t,onChange:i,onMenuDismiss:s,showButtons:r,title:l,value:d,disabled:u,dateFormat:p,focused:h,icon:g,store:m}=e;const x=(0,o.O7)(),b=(0,n.useCallback)((e=>O(e,i,m,s,r)),[i,m,s,r]),v=(0,n.useCallback)((()=>(0,w.jsx)(V,{onChange:i,onMenuDismiss:s,showButtons:r,title:l,value:d,store:m})),[i,s,r,l,d,m]),S=F(x),C=t===M.z.Section,k=C?l:void 0,Z=t===M.z.Section?(0,w.jsx)(_,{disabled:u,value:d,dateFormat:p,focused:h,onChange:i,store:m}):t===M.z.Button?(0,w.jsx)(A,{disabled:u,title:l,icon:g,focused:h,mode:t,store:m}):t===M.z.Pill?(0,w.jsx)(U,{disabled:u,value:d,title:l,store:m}):void(0,c.t1)(t),B=(0,a.VK)((()=>m.state.isOpen),[m]);return(0,w.jsx)(j.Z,{title:k,marginAfter:C,children:(0,w.jsx)(f.Z,{debugName:"SearchDateFilter",capture:B,onUp:I,onDown:I,onEnter:I,children:(0,w.jsx)(y.ZP,{popupType:T(x),open:B,origin:Z,render:v,onDismiss:b,placementToOrigin:y.ZP.Placement.Bottom,alignmentToOrigin:y.ZP.Alignment.Start,keepFocus:!0,style:S.popup})})})}function z(e){let{mode:t,onChange:i,onMenuDismiss:o,showButtons:s,title:r,value:l,disabled:d,dateFormat:c,icon:u,store:p}=e;const g=(0,a.VK)((()=>p.state.isOpen),[p]),m=(0,n.useCallback)((e=>O(e,i,p,o,s)),[i,p,o,s]),f=(0,n.useCallback)((()=>(0,w.jsx)(V,{onChange:i,onMenuDismiss:o,showButtons:s,title:r,value:l,store:p})),[i,o,s,r,l,p]),x=t===M.z.Section?(0,w.jsx)(N,{disabled:d,title:r,value:l,dateFormat:c,onChange:i,store:p}):(0,w.jsx)(P,{disabled:d,icon:u,title:r,store:p});return(0,w.jsx)(y.ZP,{popupType:h.k.SlideUp,open:g,origin:x,render:f,onDismiss:m,preventScaleTransition:!0})}},608319:(e,t,i)=>{i.d(t,{z:()=>z,Z:()=>E});var n=i(667294),o=i(883355),s=i(800480),a=i(886628),r=i(747453),l=i(709291),d=i(653965),c=i(401898),u=i(45257),p=i(475024),h=i(223196),g=i(749085);class m extends g.default{getInitialState(){return{isMenuOpen:!1,inputTemporaryValue:"",indexToReplace:void 0,popupOriginRect:void 0}}}const f=m;var x=i(552275),y=i(489728),b=i(953437),v=i(158297),S=i(672495),C=i(975689),j=i(991642),M=i(568626),w=i(552629),k=i(823586),T=i(460709),Z=i(229798),I=i(672087),B=i(478140),F=i(632163),R=i(743765),O=i(840721),L=i(147082),P=i(785893);const N={input:{marginTop:8,marginLeft:8,marginRight:8,boxSizing:"border-box",width:"auto"},menu:{width:250,maxHeight:"40vh"},inputMenu:{maxHeight:"20vh"}};const _=function(e){let{labelText:t,value:i,renderResultMenuItem:o,onConfirm:r,items:l,performRequest:d,onDismiss:c,onChange:u,renderToken:p,onRemove:h,onClear:g,disabled:m}=e;const f=(0,s.O7)(),x=(0,a.qz)(void 0,Z.Z),y=(0,a.qz)(void 0,I.Z),b=(0,n.useCallback)(((e,n,s)=>(0,P.jsx)(D,{error:e,data:n,ready:s,labelText:t,value:i,renderResultMenuItem:o,onConfirm:r,menuListStore:x})),[t,i,o,r,x]),v={query:i,current:l};return(0,P.jsx)(B.Z,{...V(f,c,t,i,l,u,p,h,g,m),children:(0,P.jsx)(k.Z,{debounce:100,requestStore:y,request:v,performRequest:d,render:b})})};function A(e){const{device:t}=e;return t.isMobile}function U(e){let{labelText:t,value:i,items:n,disabled:o,onChange:a,renderToken:r,onRemove:l,onClear:c}=e;const u=(0,s.O7)(),p=n.map((e=>r(e,{onRemove:()=>l(e)})));return(0,P.jsx)(L.ZP,{focus:!A(u)||void 0,focusAfterAnimation:!0,format:L.UR.FilterValue,tokens:p,placeholder:t.tokenInputPlaceholder,onRemoveLastToken:()=>function(e,t){const i=d.Z$(e);i&&t(i)}(n,l),onClearButtonClick:c,value:i,onChange:a,showClearButton:!0,disabled:Boolean(o),style:N.inputMenu})}function V(e,t,i,n,o,s,a,r,l,d){if(A(e)){return{menuType:T.og.Modal,title:i.title,right:(0,P.jsx)(O.DoneMenuText,{}),onClickRight:t,header:(0,P.jsx)(U,{labelText:i,value:n,items:o,disabled:d,onChange:s,renderToken:a,onRemove:r,onClear:l})}}return{menuType:T.og.Popup,onClickOutside:t,header:(0,P.jsx)(U,{labelText:i,value:n,items:o,disabled:d,onChange:s,renderToken:a,onRemove:r,onClear:l}),...N.menu}}function D(e){let{error:t,data:i,ready:o,labelText:s,value:r,renderResultMenuItem:d,onConfirm:c,menuListStore:u}=e;const p=(0,a.qz)(u,Z.Z),h=(0,n.useCallback)((e=>(0,P.jsx)(S.Z,{...e,title:s.resultSectionTitle,loading:!o})),[s,o]);if(t)return M.log({level:"error",from:s.componentDebugName,type:"requestFailed",error:(0,w.Ui)(t),data:{miscDataToConvertToString:{query:r}}}),(0,P.jsx)(h,{children:(0,P.jsx)(R.Z,{title:(0,P.jsx)(l.FormattedMessage,{defaultMessage:"Something went wrong.",id:"search.inputMenu.errorMessage"})})});if(!i)return(0,P.jsx)(h,{children:(0,P.jsx)(R.Z,{title:(0,P.jsx)(l.FormattedMessage,{defaultMessage:"Loading…",id:"search.inputMenu.loading.message"})})});if(i&&0===i.length)return(0,P.jsx)(h,{children:(0,P.jsx)(R.Z,{title:(0,P.jsx)(l.FormattedMessage,{defaultMessage:"No results found.",id:"search.inputMenu.noResults.message"})})});const g={key:"results",items:i.map((e=>function(e,t,i){return{key:e,action:()=>i(e),render:i=>t(e,i)}}(e,d,c))),render:h};return(0,P.jsx)(F.Z,{type:F.i.Vertical,store:p,initialFocus:0,sections:[g]})}let z=function(e){return e.Button="Button",e.Section="Section",e.Pill="Pill",e}({});class K extends o.Z{constructor(){super(...arguments),this.animationFrameRef={current:void 0},this.originRef=n.createRef(),this.storeTypes={componentStore:f},this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleMenuClose=e=>J(this.stores.componentStore,this.props.onMenuDismiss,e),this.scheduleMeasurement=(e,t)=>{this.animationFrameRef.current=requestAnimationFrame(function(e,t,i){return n=>{if(!i)return;if(!i.current)return;const o=e?e(t.state):t.state;t.setState({...o,popupOriginRect:i.current.getBoundingClientRect()})}}(t,this.stores.componentStore,this.originRef))}}didMount(){window.addEventListener("resize",this.scheduleMeasurement)}willUnmount(){window.removeEventListener("resize",this.scheduleMeasurement),this.animationFrameRef.current&&(cancelAnimationFrame(this.animationFrameRef.current),this.animationFrameRef.current=void 0)}didUpdate(e){(e.items.length!==this.props.items.length||e.mode!==this.props.mode)&&this.scheduleMeasurement()}renderComponent(){const{device:e}=this.environment,{mode:t}=this.props;return e.isMobile?(0,P.jsx)(oe,{searchTokenFilterProps:this.props,componentStore:this.stores.componentStore}):this.renderDesktop(t)}renderDesktop(e){const{title:t,disabled:i}=this.props,{componentStore:{state:n}}=this.stores,o=i||n.isMenuOpen;let s;const a=(()=>e===z.Section?(s=t,this.renderSectionOrigin()):e===z.Button?this.renderButtonOrigin():e===z.Pill?this.renderPillOrigin():void(0,c.t1)(e))();return(0,P.jsxs)(j.Z,{title:s,marginAfter:e===z.Section,style:$(this.environment,this.props.mode).sectionMenuItem,children:[e!==z.Pill&&this.renderFilters({disableFilters:o,showLabel:!1}),a,(0,P.jsx)(b.ZP,{popupType:h.k.Popup,placementToOrigin:b.ZP.Placement.Bottom,alignmentToOrigin:b.ZP.Alignment.Start,open:X(this.stores.componentStore),originRect:n.popupOriginRect,render:()=>(0,P.jsx)(ne,{searchTokenFilterProps:this.props,componentStore:this.stores.componentStore}),onDismiss:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleMenuClose,keepFocus:!0,preventScaleTransition:!0})]})}renderButtonOrigin(){const{icon:e,title:t,disabled:i,focused:n}=this.props,o=$(this.environment,this.props.mode),s=q(this.theme),a={...o.menuItem,...s.buttonMenuItem};return(0,P.jsx)("div",{ref:this.originRef,style:o.menuItemWrapper,children:(0,P.jsx)(x.Z,{disabled:i||X(this.stores.componentStore),icon:e(o.icon),title:t,focused:n,onClick:e=>se(this.scheduleMeasurement,void 0,this.props.onMenuOpen),style:a})})}renderPillOrigin(){const{icon:e,title:t,disabled:i,iconStyles:n}=this.props,o=$(this.environment,this.props.mode),s=this.props.mode===z.Pill&&this.props.hasItemsSelected;return(0,P.jsx)("div",{ref:this.originRef,style:o.menuItemWrapper,children:(0,P.jsx)(u.Z,{on:s,icon:e({...o.icon,...n}),title:(0,P.jsx)("span",{children:t}),onClick:e=>se(this.scheduleMeasurement,void 0,this.props.onMenuOpen),wrapStyle:{opacity:i?.4:1}})})}renderSectionOrigin(){const{addItemLabel:e,disabled:t}=this.props,i=$(this.environment,this.props.mode),o=q(this.theme);return(0,P.jsxs)(n.Fragment,{children:[(0,P.jsx)("div",{ref:this.originRef,style:i.menuItemWrapper}),(0,P.jsx)(x.Z,{disabled:t||X(this.stores.componentStore),icon:(0,r.R)(i.iconSmall),title:e,focused:!1,onClick:e=>se(this.scheduleMeasurement,void 0,this.props.onMenuOpen),style:{...i.appendListItemButton,...o.appendListItemButton}})]})}renderFilters(e){const{items:t,renderFilter:i}=this.props,{device:n}=this.environment,o=t.map(((t,o)=>(0,P.jsx)("li",{children:i(t,{disabled:e.disableFilters,onRemove:()=>G(t,this.props.items,this.props.onChange),onClick:()=>n.isMobile?Y(this.stores.componentStore):se(this.scheduleMeasurement,o,this.props.onMenuOpen)})},`${t}_${o}`)));return(0,P.jsx)("ul",{style:p.mK,children:o})}}K.displayName="SearchTokenFilter";const E=K;function H(e,t,i){i(t.filter((t=>t!==e)))}function W(e){e([])}function q(e){return{buttonMenuItem:{color:e.mediumTextColor},appendListItemButton:{color:e.lightTextColor}}}function G(e,t,i){H(e,t,i)}function $(e,t){return{menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},menuItemWrapper:{display:"flex"},sectionMenuItem:{display:"flex"},appendListItemButton:{minHeight:void 0,paddingTop:4,paddingBottom:4,fontSize:p.yv(e,"UIRegular")},icon:{height:16,width:16,marginRight:"Pill"===t?6:-2,fill:"currentColor"},iconSmall:{height:12,width:12},summary:{display:"inline"},summaryItem:{display:"inline"}}}function Y(e){e.setState({...e.state,isMenuOpen:!0})}function X(e){return e.state.isMenuOpen}function Q(e){e.setState({...e.state,inputTemporaryValue:"",indexToReplace:void 0})}function J(e,t,i){Q(e),e.setState({...e.state,isMenuOpen:!1,indexToReplace:void 0}),t&&t(i)}function ee(e,t,i,n,o){const{indexToReplace:s}=o.state;"number"==typeof s&&s<t.length?function(e,t,i,n){n(i.slice(0,e).concat(t,i.slice(e+1)))}(s,e,t,i):t.includes(e)&&z.Pill?H(e,t,i):function(e,t,i){const n=t.concat(e);i(d.jj(n))}(e,t,i),n||Q(o)}function te(e){let{disableFilters:t,icon:i,title:n,mode:o,componentStore:a}=e;const r=$((0,s.O7)(),o);return(0,P.jsx)(x.Z,{disabled:t,focused:!1,icon:i({...r.icon}),title:n,onClick:e=>Y(a)})}function ie(e){let{disableFilters:t,title:i,items:o,renderItemForSummary:a,mode:r,onChange:l,componentStore:d}=e;const c=(0,s.O7)(),u=(0,n.useCallback)((()=>Y(d)),[d]),h=$(c,r),g={...p.mK,...h.summary},m=o.length-1,f=(0,P.jsx)("ul",{style:g,children:o.map(((e,t)=>(0,P.jsx)("li",{style:h.summaryItem,children:(0,P.jsxs)(n.Fragment,{children:[a(e),t!==m&&","," "]})},e)))});return(0,P.jsx)(C.Z,{disabled:t,onClick:u,onClickClear:()=>W(l),label:i,title:f})}function ne(e){let{searchTokenFilterProps:t,componentStore:i}=e;const{items:o,onChange:s,keepInputOnItemConfirm:r,onMenuDismiss:d,renderToken:c,renderFooter:u,allowApplyBatchSelection:p}=t,h=(0,n.useCallback)((e=>ee(e,o,s,r,i)),[o,s,r,i]),g=(0,n.useCallback)((e=>J(i,d,e)),[i,d]),m=(0,n.useCallback)((e=>function(e,t){const{target:i}=e;t.setState({...t.state,inputTemporaryValue:String(i.value)})}(e,i)),[i]),f=(0,a.VK)((()=>i.state),[i]);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(_,{...t,value:f.inputTemporaryValue,onChange:m,onDismiss:g,onConfirm:h,onClear:()=>{!function(e){e.setState({...e.state,inputTemporaryValue:""})}(i),W(s)},onRemove:e=>G(e,o,s),renderToken:c}),u&&(0,P.jsxs)(S.Z,{topBorder:!0,style:{padding:6,justifyContent:"space-between",display:"flex"},children:[(0,P.jsx)(y.Z,{onClick:()=>{W(s)},children:(0,P.jsx)(l.FormattedMessage,{id:"searchTokenFilter.clearButton",defaultMessage:"Clear"})}),p&&(0,P.jsx)(v.Z,{onClick:()=>{J(i,d,"applyButton")},children:(0,P.jsx)(l.FormattedMessage,{id:"searchTokenFilter.applyButton",defaultMessage:"Apply"})})]})]})}function oe(e){let{searchTokenFilterProps:t,componentStore:i}=e;const{mode:o,onMenuDismiss:s,disabled:r,title:l,items:d,renderItemForSummary:c,onChange:u,icon:p}=t,g=(0,n.useCallback)((e=>J(i,s,e)),[i,s]),m=(0,n.useCallback)((()=>(0,P.jsx)(ne,{searchTokenFilterProps:t,componentStore:i})),[t,i]),f=(0,a.VK)((()=>X(i)),[i]),x=r||f,y=o===z.Section?(0,P.jsx)(ie,{title:l,items:d,renderItemForSummary:c,mode:o,onChange:u,componentStore:i,disableFilters:x}):(0,P.jsx)(te,{icon:p,title:l,mode:o,componentStore:i,disableFilters:x});return(0,P.jsx)(b.ZP,{popupType:h.k.SlideUp,open:f,origin:y,render:m,onDismiss:g,keepFocus:!0})}function se(e,t,i){i&&i(),e(void 0,(e=>({...e,isMenuOpen:!0,indexToReplace:t})))}},975689:(e,t,i)=>{i.d(t,{Z:()=>c});i(667294);var n=i(800480),o=i(724405),s=i(137810),a=i(552275),r=i(824006),l=i(500255),d=i(785893);const c=function(e){const{disabled:t,label:i,title:s,onClick:r,isToggle:l,isToggleActive:c,onClickClear:h,...g}=e,m=(0,o.Fg)(),f=(0,n.O7)(),x=function(e){return{menuItemLabel:{color:e.lightTextColor}}}(m),y=u(f),b=(0,d.jsx)("span",{style:x.menuItemLabel,children:i});return(0,d.jsx)(a.Z,{focused:!1,...g,inline:l,disabled:t,icon:b,title:s,right:(0,d.jsx)(p,{disabled:!!t,isToggle:!!l,isToggleActive:!!c,onClick:r,onClickClear:h}),onClick:r,dontShrinkIcon:!0,dontShrinkRight:!0,shouldWrapTitle:!0,style:y.menuItem,desktopIconStyle:y.menuItemLabel})};function u(e){return{menuItem:{background:void 0,minHeight:void 0,fontSize:e.device.isMobile?s.Z.fontSize.UISmall.mobile:s.Z.fontSize.UIRegular.desktop,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginTop:0},rightWrapper:{display:"flex",alignItems:"center",marginTop:"-50%",marginBottom:"-50%",height:44}}}function p(e){let{disabled:t,isToggle:i,isToggleActive:o,onClick:s,onClickClear:a=(()=>{})}=e;const c=u((0,n.O7)()).rightWrapper;return i?(0,d.jsx)("div",{style:c,children:(0,d.jsx)(r.Z,{on:!!o,onClick:s})}):(0,d.jsx)(l.Z,{disabled:t,onClick:a})}},991642:(e,t,i)=>{i.d(t,{Z:()=>s});i(667294);var n=i(672495),o=i(785893);const s=function(e){const t={desktopTitleStyle:{marginBottom:4},marginAfter:{marginBottom:16}},{title:i,marginAfter:s,desktopStyle:a,desktopTitleStyle:r,...l}=e,d=(s||a)&&{...s&&t.marginAfter,...a},c=r?{...t.desktopTitleStyle,...r}:t.desktopTitleStyle;return(0,o.jsx)(n.Z,{isTitleUppercase:!0,disableDesktopPadding:!0,enableActionSheetTitle:!0,desktopStyle:d,desktopTitleStyle:c,shouldShowBottomDivider:!1,title:i,...l})}},167579:(e,t,i)=>{i.d(t,{f:()=>y});var n=i(667294),o=i(724405),s=i(569651),a=i(573123),r=i(45257),l=i(433929),d=i(460709),c=i(223196),u=i(552275),p=i(478140),h=i(632163),g=i(953437),m=i(672495),f=i(991642),x=i(785893);function y(e){const t=(0,o.yK)((e=>({popup:{width:125,marginLeft:5},pillStyle:{display:"flex",alignItems:"center"}})),[]),{currentFilter:i,hideAllTime:y}=e,[b,v]=(0,n.useState)(!1),S=a.Hz.filter((e=>!y||"all_time"!==e)).map((t=>{const i=()=>{e.onChangeFilter(t),v(!1)};return{key:t,action:()=>{},render:()=>(0,x.jsx)(u.Z,{focused:!1,onClick:i,title:l.default.formatMessage(a.Rh[t])})}})),C=(0,x.jsx)(r.Z,{on:Boolean(i),wrapStyle:t.pillStyle,icon:(0,s.C)({width:16,marginRight:6,fill:"currentColor"}),title:l.default.formatMessage(a.Rh[i]),onClick:()=>{v(!0)}}),j=[{key:"filters",items:S,render:e=>(0,x.jsx)(m.Z,{...e,title:null,loading:!1})}],M=(0,x.jsx)(p.Z,{menuType:d.og.Popup,header:null,children:(0,x.jsx)(h.Z,{type:h.i.Vertical,initialFocus:0,sections:j})});return(0,x.jsx)(f.Z,{marginAfter:!1,children:(0,x.jsx)(g.ZP,{popupType:c.k.Popup,placementToOrigin:g.ZP.Placement.Bottom,alignmentToOrigin:g.ZP.Alignment.Start,open:b,render:()=>M,onDismiss:()=>v(!1),keepFocus:!0,origin:C,preventScaleTransition:!0,style:t.popup})})}},248603:(e,t,i)=>{i.r(t),i.d(t,{PageAnalyticsPageOptOut:()=>y,TopbarPageAnalyticsOptOutMenu:()=>x,TopbarPageAnalyticsOptOutMenuStore:()=>f});i(667294);var n=i(800480),o=i(886628),s=i(749085),a=i(709291),r=i(310259),l=i(918514),d=i(223196),c=i(80444),u=i(973420),p=i(953437),h=i(942402),g=i(555422),m=i(785893);const f=s.default.createValue({isOpen:!1,rect:void 0},{name:"TopbarPageAnalyticsOptOutMenuStore"});function x(){const e=(0,n.O7)(),t=(0,o.VK)((()=>f.state.isOpen),[]),i=(0,o.VK)((()=>f.state.rect),[]),s=(0,o.VK)((()=>c.default.state.mainEditorCurrentBlockStore),[]);return s?(0,m.jsx)(p.ZP,{popupType:e.device.isMobile?d.k.SlideUp:d.k.Popup,alignmentToOrigin:p.ZP.Alignment.Center,open:t,render:()=>(0,m.jsx)("div",{style:{minWidth:360,padding:16},children:(0,m.jsxs)(u.sg,{gap:16,children:[(0,m.jsx)("div",{style:{fontSize:16,fontWeight:500},children:(0,m.jsx)(a.FormattedMessage,{id:"TopbarPageAnalyticsOptOutMenu.heading",defaultMessage:"Privacy settings"})}),(0,m.jsx)(y,{store:s})]})}),originRect:i,onDismiss:()=>f.setState({isOpen:!1,rect:void 0})}):null}function y(e){const t=(0,n.O7)(),i=(0,o.VK)((()=>{const e=c.default.state.currentSpaceViewStore;return null==e?void 0:e.getSettings()}),[]),s=(0,o.VK)((()=>{const t=null==i?void 0:i.page_analytics_opt_out_list;return null==t?void 0:t.includes(e.store.id)}),[i,e.store.id]);return(0,m.jsx)(g.Z,{type:"dropdown",currentOption:s?"do_not_record":"record",options:[{key:"record",label:(0,m.jsx)(a.FormattedMessage,{id:"page_analytics.opt_out.record",defaultMessage:"Record"})},{key:"do_not_record",label:(0,m.jsx)(a.FormattedMessage,{id:"page_analytics.opt_out.do_not_record",defaultMessage:"Don't record"})}],onSelectOption:i=>{"do_not_record"===i?r.kY(t,e.store.id):r.pu(t,e.store.id)},isMobile:t.device.isMobile,title:(0,m.jsx)(a.FormattedMessage,{id:"page_analytics.opt_out.title",defaultMessage:"My view history"}),caption:(0,m.jsx)(a.FormattedMessage,{id:"page_analytics.opt_out.caption",defaultMessage:"Page editors can see my view history for this page. <inlinelink>Learn more</inlinelink>.",values:{inlinelink:e=>(0,m.jsx)(h.Z,{external:!0,href:(0,l.UY)("guides.pageAnalytics"),children:e})}}),captionStyle:{maxWidth:270}})}},983420:(e,t,i)=>{i.d(t,{TL:()=>u,nc:()=>c,ue:()=>d});var n=i(266897),o=i(554368),s=i(177420),a=i(519889),r=i(401898),l=i(206258);function d(e){const{parentStore:t,pointer:i}=e,o=(0,l.Kv)(t,i).getValue();if(o)return(0,n.LU)({table:i.table,value:o})}function c(e){const{parentStore:t,pointer:i}=e;return i.table===s.cZ?l.Qx.createChildStore(t,i):i.table===a.KJ?l.U6.createChildStore(t,i):i.table===o.y0?l.fg.createChildStore(t,i):void(0,r.t1)(i)}function u(e){return e.table===s.cZ?(0,n.ON)(e.getValue()):e.table===a.KJ?(0,n.m3)(e.getValue()):e.table===o.y0?(0,n.I4)(e.getValue()):void(0,r.t1)(e)}},123570:(e,t,i)=>{function n(e){return e?32:18}i.d(t,{f:()=>n})},548572:(e,t,i)=>{i.d(t,{Z:()=>l});i(667294);var n=i(886628),o=i(401898),s=i(39849),a=i(819034),r=i(785893);function l(e){const{type:t,...i}=e,l=(0,n.VK)((()=>{switch(t){case"currentSpace":return a.Z.getUnreadCountForCurrentSpace().mentions;case"otherSpaces":return a.Z.getUnreadMentionsCountForOtherSpaces();case"allSpaces":return a.Z.getTotalUnreadMentionsCount();default:(0,o.t1)(t)}}),[t]);return(0,r.jsx)(s.Z,{count:l,...i})}},978624:(e,t,i)=>{i.d(t,{t:()=>C});var n=i(667294),o=i(800480),s=i(886628),a=i(724405),r=i(745238),l=i(785893);const d=(0,r.IU)("newSidebarInbox",{viewBox:"0 0 24 24",svg:(0,l.jsx)("g",{children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M7.57 7.294a1.15 1.15 0 01.908-.444h7.044c.355 0 .69.164.908.444l2.478 3.186c.041.054.078.11.11.17h-4.066c-.702 0-1.213.515-1.361 1.075-.079.295-.225.668-.477.954-.227.258-.557.47-1.114.47s-.887-.212-1.114-.47c-.252-.286-.399-.659-.477-.954-.148-.56-.66-1.075-1.362-1.075H4.983a.967.967 0 01.11-.17L7.57 7.294zM4.85 12.35V16c0 .635.515 1.15 1.15 1.15h12A1.15 1.15 0 0019.15 16v-3.65h-3.97c-.129.414-.363.967-.79 1.452-.52.59-1.3 1.048-2.39 1.048s-1.871-.457-2.39-1.048c-.427-.485-.661-1.038-.79-1.452H4.85zm3.628-7.2c-.88 0-1.71.406-2.25 1.1L3.75 9.436a2.85 2.85 0 00-.6 1.75V16A2.85 2.85 0 006 18.85h12A2.85 2.85 0 0020.85 16v-4.814a2.85 2.85 0 00-.6-1.75L17.77 6.25a2.85 2.85 0 00-2.25-1.1H8.479z",clipRule:"evenodd"})})});var c=i(709291),u=i(137810),p=i(58261),h=i(584076),g=i(526388),m=i(39849),f=i(314694),x=i(823376),y=i(116746),b=i(224646),v=i(825464),S=i(548572);function C(e){const t=(0,o.O7)(),i=(0,s.VK)((()=>"inbox"===y.Z.state.contentType&&y.Z.isOpen()),[]),r=(0,s.VK)((()=>y.Z.state.mode),[]),C=i&&"panel"===r,j=(0,n.useCallback)((()=>{x.AP({environment:t,contentType:"inbox"})}),[t]),M=(0,a.yK)((e=>({sidebarItem:{...C&&{fontWeight:u.Z.fontWeight.semibold,background:e.sidebarItemSelectedBackground}},badge:{width:void 0,minWidth:16,paddingLeft:3,paddingRight:3},number:{fontWeight:u.Z.fontWeight.semibold,letterSpacing:.12,fontSize:10,fontVariantNumeric:"lining-nums tabular-nums",fontFeatureSettings:"lnum",MozFontFeatureSettings:"lnum",WebkitFontFeatureSettings:"lnum"},shortcutLabel:{color:e.mediumInvertedTextColor}})),[C]),w=(0,b.hr)();return(0,l.jsx)(g.Z,{renderTooltip:()=>(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{children:(0,l.jsx)(c.FormattedMessage,{defaultMessage:"View recent updates and notifications",id:"sidebar.inbox.tooltip"})}),(0,l.jsx)(p.Z,{style:M.shortcutLabel,name:"toggleAllUpdates"})]}),originGap:6,placement:v.u.Right,render:t=>(0,l.jsx)(h.Z,{style:{...w.baseSidebarItem,...M.sidebarItem,...C&&w.currentSelectedSidebarItem},onClick:j,hoveredStyle:e.styles.buttonHoveredStyle,...t,children:(0,l.jsx)(f.Z,{left:d(w.topButtonIcon),right:(0,l.jsx)(S.Z,{type:"currentSpace",color:m.N.Red,style:M.badge,numberStyle:M.number,fadeIn:!0}),children:(0,l.jsx)(c.FormattedMessage,{id:"sidebar.inbox.button",defaultMessage:"Inbox"})})})})}},157538:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(57883),o=i(401898);function s(e){switch(e){case"all":return{following:!0,followSettings:(0,n.yI)({explicitly_set_by_user:!0})};case"important":return{following:!0,followSettings:(0,n.GC)({explicitly_set_by_user:!0})};case"comments":return{following:!0,followSettings:(0,n.r$)({explicitly_set_by_user:!0})};case"none":return{following:!1,followSettings:(0,n.vU)({explicitly_set_by_user:!0})};default:(0,o.t1)(e)}}},45428:(e,t,i)=>{i.r(t),i.d(t,{getNotificationValues:()=>d,getState:()=>l,setState:()=>r});var n=i(570921),o=i(865311),s=i(80444);let a={};function r(e){a={...a,...e}}function l(){return a}function d(){const e=a.result;if(!e)return null;const t=s.default.state.currentSpaceStore;return t?e.map((e=>{const i={table:o.uX,id:e,spaceId:t.getSpaceId()},s=t.getRecordValue(i),a=null==s?void 0:s.activity_id;if(a&&s){const e={table:n.TY,id:a,spaceId:t.getSpaceId()};s.activity=t.getRecordValue(e)}return s})):null}},770564:(e,t,i)=>{i.d(t,{B:()=>s,L:()=>a});var n=i(318245);const o={};function s(e,t){e in o||(o[e]={measured:!1,startTime:performance.now(),size:t.size,type:t.type})}function a(e,t){if(!(e in o))return;const i=o[e];if(i.measured)return;i.measured=!0;const{startTime:s,size:a,type:r}=i;n.default.measure({metricName:"notification_render",startTime:s},{environment:t,data:{size:a,type:r}})}},448451:(e,t,i)=>{i.d(t,{$H:()=>r,$q:()=>p,LV:()=>l,QU:()=>u,VO:()=>c,Xm:()=>s,co:()=>h,hR:()=>m,k2:()=>g,lD:()=>d,tY:()=>a});var n=i(296994),o=i(277907);const s=(0,o.kF)(n.FF.notifications,(e=>e.GetNotifiedFor)),a=(0,o.kF)(n.FF.notifications,(e=>e.TopbarUpdatesMenu)),r=(0,o.kF)(n.FF.notifications,(e=>e.UpdateSidebar)),l=(0,o.kF)(n.FF.notifications,(e=>e.MobileInboxPopup)),d=(0,o.kF)(n.FF.notifications,(e=>e.InboxActionsMenu)),c=(0,o.kF)(n.FF.notifications,(e=>e.InboxFilterForUnreadButton)),u=((0,o.kF)(n.FF.notifications,(e=>e.InboxMentionsActionButtons)),(0,o.kF)(n.FF.notifications,(e=>e.InboxModalHeader))),p=(0,o.kF)(n.FF.notifications,(e=>e.InboxNotificationSettingsButton)),h=(0,o.kF)(n.FF.notifications,(e=>e.InboxRefreshAllTabButton)),g=((0,o.kF)(n.FF.notifications,(e=>e.NotificationGroupActionsMenu)),(0,o.kF)(n.FF.notifications,(e=>e.UnreadMentionsBadge))),m=(0,o.kF)(n.FF.notifications,(e=>e.NotificationInboxPanelContent))},859712:(e,t,i)=>{i.r(t),i.d(t,{GetNotifiedFor:()=>M,InboxActionsMenu:()=>oi.ZP,InboxFilterForUnreadButton:()=>ri,InboxMentionsActionButtons:()=>pi,InboxModalHeader:()=>vi,InboxNotificationSettingsButton:()=>It,InboxRefreshAllTabButton:()=>yi,MobileInboxPopup:()=>ei,NotificationGroupActionsMenu:()=>Ni,NotificationInboxPanelContent:()=>Bi,SidebarInboxButton:()=>Si.t,TopbarUpdatesMenu:()=>P,UnreadMentionsBadge:()=>mi.Z,UpdateSidebar:()=>ot});var n=i(667294),o=i(886628),s=i(724405),a=i(709291),r=i(137810),l=i(800480),d=i(590792),c=i(542853),u=i(62967),p=i(519719),h=i(748019),g=i(231945),m=i(478140),f=i(489728),x=i(672495),y=i(460709),b=i(98742),v=i(424764),S=i(157538),C=i(785893);function j(e){var t;const{blockStore:i,from:a,buttonPopupStore:j}=e,M=e.moreProminentStyling??!1,w=(0,l.O7)(),k=(0,o.VK)((()=>i.isPageBlock()),[i]),T=(0,o.VK)((()=>i.getFollowSettingsKey()),[i]),Z=(0,n.useCallback)((()=>{p.Z8({environment:w,pageId:i.pointer.id,isCurrentlyFollowing:(0,S.Z)(T).following,from:a})}),[i.pointer.id,w,T,a]),I=(0,o.VK)((()=>v.Z({followSettingsKey:T,environment:w,blockStore:i,from:a})),[T,w,i,a]),B=(0,s.yK)((e=>({buttonContainer:{display:"flex",alignItems:"center",color:e.mediumTextColor,padding:M?"4px 10px":4,borderRadius:4,marginRight:M?0:4,fontSize:r.Z.fontSize.UIRegular.desktop},bellIcon:{width:14,height:14,marginRight:4},chevronIcon:{marginLeft:4,width:10,height:10},spacer:{flexGrow:1},footerLabel:{padding:12,backgroundColor:e.sidebarSecondaryBackground,boxShadow:`0 -1px 0 ${e.regularDividerColor}`,marginTop:1}})),[M]),F=null===(t=I.find((e=>v.t({key:e.action.analyticsName,userSelectedKey:T}))))||void 0===t?void 0:t.title;return k?(0,C.jsx)(g.ZP,{popupType:g.Z4.Popup,alignmentToOrigin:g.vR.End,placementToOrigin:g.pO.Bottom,sameWidthAsOrigin:M,buttonPopupStore:j,render:e=>(0,C.jsx)(m.Z,{menuType:y.og.Popup,minWidth:290,maxHeight:"50vh",children:(0,C.jsx)(h.Z,{context:{blocks:[],environment:w,publicEditMode:void 0},sections:[(0,u.$J)({key:"in-app-notifications-section",render:e=>(0,C.jsx)(x.Z,{...e}),actions:I.map((e=>e.action))})],initialFocus:void 0,onAccept:()=>e.close()})}),renderOrigin:e=>(0,C.jsxs)(f.Z,{...(0,b.Z)(e,{onClick:Z}),style:B.buttonContainer,children:[(0,d.t)(B.bellIcon),F,M&&(0,C.jsx)("div",{style:B.spacer}),(0,c.i)(B.chevronIcon)]})}):null}function M(e){const{navigableBlockStore:t,from:i,buttonPopupStore:n}=e,l=(0,o.VK)((()=>t.isPageBlock()),[t]),d=(0,s.yK)((e=>({label:{fontSize:r.Z.fontSize.UIRegular.desktop,color:e.regularTextColor,fontWeight:r.Z.fontWeight.medium},border:{border:`1px solid ${e.outlineButtonBorder}`,borderRadius:4,marginTop:8}})),[]);return l?(0,C.jsxs)("div",{children:[(0,C.jsx)("div",{style:d.label,children:(0,C.jsx)(a.FormattedMessage,{id:"UpdateSidebarTabUpdatesHeader.pageNotificationSettings.label",defaultMessage:"Page notification settings"})}),(0,C.jsx)("div",{style:d.border,children:(0,C.jsx)(j,{blockStore:t,moreProminentStyling:!0,from:i,buttonPopupStore:n})})]}):null}var w=i(884708),k=i(380503),T=i(843250),Z=i(448451),I=i(436391),B=i(781258);const F=new(i(61766).Z);var R=i(66957);function O(){return(0,C.jsx)(a.FormattedMessage,{id:"updateSidebar.header.updatesLabel",defaultMessage:"Updates"})}function L(e){const t=(0,l.O7)(),{enablePageAnalytics:i,popOutMode:n,navigableBlockStore:d,inPeekView:c}=e,u=(0,s.yK)((e=>({updatesHeaderStyle:{position:"relative",pointerEvents:"auto",marginTop:n?0:k.R6(t.device.isElectronMac),paddingTop:4,width:n&&!c?"calc(100% - 2px)":"100%",background:c?e.popoverBackground:e.contentBackground,padding:"12px 12px 12px 16px",borderBottom:`1px solid ${e.regularDividerColor}`},getNotifiedFor:{...i?{padding:8}:{paddingBottom:14}},label:{fontSize:14,color:e.regularTextColor,fontWeight:r.Z.fontWeight.medium}})),[n,t,c,i]),p=(0,o.VK)((()=>I.ZP.state.currentSubTab),[]),h=c?F:B.Z;return(0,C.jsxs)("div",{style:{...u.updatesHeaderStyle,...i?{padding:"0 6px"}:{}},className:T.cFM,children:[(0,C.jsx)("div",{style:u.getNotifiedFor,children:(0,C.jsx)(Z.Xm,{navigableBlockStore:d,from:"page_updates",buttonPopupStore:h})}),i?(0,C.jsx)(R.Z,{tabs:[(0,C.jsx)(O,{},"updates"),(0,C.jsx)(a.FormattedMessage,{id:"updateSidebar.header.analyticsLabel",defaultMessage:"Analytics"},"analytics")],selectedIndex:p,onChange:e.onTabChange,style:{...u.label,padding:0,boxShadow:"none"},tabStyle:{padding:"12px 0"}}):(0,C.jsx)("div",{style:u.label,children:(0,C.jsx)(O,{})})]})}function P(e){const{blockStore:t,spaceStore:i}=e,n=function(e){const{spaceStore:t,blockStore:i}=e,n=(0,o.VK)((()=>{var e,t;return(null==i||null===(e=i.getModel())||void 0===e?void 0:e.isCollectionView())?null===(t=i.getCollectionPointer())||void 0===t?void 0:t.id:void 0}),[i]);if(!t)return;const s=i.id,a=t.id;return{navigableBlockId:s,collectionId:n,spaceId:a}}({blockStore:t,spaceStore:i});return n?(0,C.jsx)(m.Z,{menuType:y.og.Popup,className:T.KLh,header:(0,C.jsx)(L,{navigableBlockStore:t,enablePageAnalytics:!1,popOutMode:!0,inPeekView:!0}),children:(0,C.jsx)(w.Z,{empty:()=>(0,C.jsx)(N,{}),source:"updates_sidebar",navigableBlockStore:t,...n},t.id)}):null}function N(){const e=(0,s.yK)((e=>({container:{marginTop:64,textAlign:"center",paddingLeft:18,paddingRight:18,marginBottom:64},content:{fontSize:14,color:e.mediumTextColor,marginTop:4}})),[]);return(0,C.jsx)("div",{style:e.container,children:(0,C.jsx)("div",{style:e.content,children:(0,C.jsx)("span",{children:(0,C.jsx)(a.FormattedMessage,{defaultMessage:"No edits in this page yet.",id:"topbar.updatesButton.emptyState"})})})})}var _=i(174725),A=i(151454),U=i(401898),V=i(838745),D=i(623063),z=i(903553),K=i(555064),E=i(670268),H=i(553194),W=(i(21703),i(730120)),q=i(645010),G=i(224646),$=i(434859),Y=i(80444),X=i(953336),Q=i(330251),J=i(313991),ee=i(407057),te=i(253877),ie=i(883176),ne=i(882855),oe=i(516880),se=i(584169),ae=i(418442),re=i(423512),le=i(554368),de=i(177420),ce=i(519889),ue=i(653965),pe=i(926249),he=i(216287),ge=i(454642),me=i(325320),fe=i(296994),xe=i(983420),ye=i(220095),be=i(165598),ve=i(918514),Se=i(135314),Ce=i(944904),je=i(206258),Me=i(88893),we=i(973420),ke=i(568785),Te=i(863296),Ze=i(670301),Ie=i(164369),Be=i(45653),Fe=i(167579),Re=i(248603);const Oe=Date.now();function Le(e){let{store:t,spaceId:i,isDisabledForWorkspace:r}=e;const[d,c]=(0,n.useState)("last_28_days"),[u,p]=(0,n.useState)({state:r?"disabled-for-workspace":"loading"}),h=(0,l.O7)(),f=(0,s.Fg)(),x=(0,o.VK)((()=>{const{currentSpaceStore:e}=Y.default.state;return null==e?void 0:e.getName()}),[]),b=(0,o.VK)((()=>{switch(d){case"last_7_days":return 7;case"last_28_days":return 28;case"last_90_days":return 90;case"all_time":return}}),[d]);(0,n.useEffect)((()=>{r||async function(){const e=await ge.getPageAnalytics(h,{pageId:t.id,spaceId:i,days:b});if("failed"===e.type)return void p({state:"empty"});const n=e.data.map((e=>{let{ds:t,total_views:i,unique_views:n}=e;return{ds:t,values:{total_views:i,unique_views:n}}}));n.filter((e=>{let{ds:t}=e;return te.OQ.isoToUnixMs(t,"UTC")??Oe<=Oe})).every((e=>{let{values:t}=e;return 0===t.total_views}))?p({state:"empty"}):p({state:"loaded",data:n})}()}),[h,t.id,r,i,b]);const v=(0,s.yK)((e=>({fullHeight:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},spinner:{width:32,height:32}})),[]);return"loading"===u.state?(0,C.jsx)("div",{style:v.fullHeight,children:(0,C.jsx)(ke.Z,{style:v.spinner})}):"empty"===u.state?(0,C.jsx)("div",{style:v.fullHeight,children:(0,C.jsx)(We,{heading:(0,C.jsx)(a.FormattedMessage,{id:"page_analytics.empty.heading",defaultMessage:"No page analytics yet"}),description:(0,C.jsx)(a.FormattedMessage,{id:"page_analytics.empty.description",defaultMessage:"It may take some time for page view information to appear."})})}):"disabled-for-workspace"===u.state?(0,C.jsx)("div",{style:v.fullHeight,children:(0,C.jsx)(We,{heading:(0,C.jsx)(a.FormattedMessage,{id:"page_analytics.disabled.heading",defaultMessage:"Page viewership tracking is disabled"}),description:(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:16},children:[x?(0,C.jsx)(a.FormattedMessage,{id:"page_analytics.disabled.description",defaultMessage:"Page viewership and analytics is turned off for all pages in {name}",values:{name:x}}):(0,C.jsx)(a.FormattedMessage,{id:"page_analytics.disabled.description.unnamed",defaultMessage:"Page viewership and analytics is turned off for all pages in your space"}),(0,C.jsxs)("a",{href:(0,ve.UY)("guides.pageAnalytics"),target:"_blank",style:{display:"flex",gap:4,color:f.regularTextColor,alignItems:"center",textDecoration:"none",cursor:"pointer"},children:[(0,se.m)({width:14,height:14}),(0,C.jsx)(Ie.Z,{isSmall:!0,children:(0,C.jsx)(a.FormattedMessage,{id:"page_analytics.disabled.learnMore",defaultMessage:"Learn more"})})]})]})})}):(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%"},children:[(0,C.jsxs)(we.sg,{grow:1,gap:16,children:[(0,C.jsx)(_e,{store:t,data:u.data,currentFilter:d,onChangeFilter:c}),(0,C.jsx)(Ue,{store:t}),(0,C.jsx)(He,{spaceId:i,store:t})]}),(0,C.jsxs)("div",{style:{borderTop:`1px solid ${f.regularDividerColor}`,padding:"12px 16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,C.jsx)(g.ZP,{renderOrigin:e=>{let{onClick:t}=e;return(0,C.jsx)(Te.Z,{onClick:t,icon:ae.H,children:(0,C.jsx)(a.FormattedMessage,{id:"page_analytics.timeseries.settings",defaultMessage:"Settings"})})},popupType:h.device.isMobile?g.Z4.SlideUp:g.Z4.Popup,render:()=>(0,C.jsx)(m.Z,{menuType:y.og.Popup,width:460,children:(0,C.jsx)("div",{style:Ne,children:(0,C.jsx)(Re.PageAnalyticsPageOptOut,{store:t})})})}),(0,C.jsxs)("a",{href:(0,ve.UY)("guides.pageAnalytics"),target:"_blank",style:{display:"flex",gap:4,color:f.regularTextColor,alignItems:"center",textDecoration:"none",cursor:"pointer"},children:[(0,se.m)({width:14,height:14}),(0,C.jsx)(Ie.Z,{isSmall:!0,children:(0,C.jsx)(a.FormattedMessage,{id:"page_analytics.timeseries.learnMore",defaultMessage:"Learn more"})})]})]})]})}const Pe=175,Ne={margin:"8px 16px",pointerEvents:"auto",cursor:"default"};function _e(e){const[t,i]=(0,Se.e)(),{blueLayer:o,yellowLayer:s}=(0,Q.useTimeSeriesPalette)(),r=(0,n.useMemo)((()=>{if(0===e.data.length)return Oe;const t=te.OQ.isoToUnixMs(e.data[0].ds,"UTC")??Oe;return Math.min(t,Oe)}),[e.data]);return(0,C.jsxs)("div",{children:[(0,C.jsx)(Ae,{store:e.store,data:e.data,currentFilter:e.currentFilter,onChangeFilter:e.onChangeFilter}),(0,C.jsx)("div",{ref:t,style:{...Ne,marginBottom:0},children:(0,C.jsx)(fe.J3,{startDate:(0,ee.$6)(r,!0),endDate:(0,ee.$6)(Oe,!0),width:i,height:Pe,data:e.data,layers:[{key:"total_views",...o,renderLabel:e=>(0,C.jsx)(a.FormattedMessage,{id:"page_analytics.timeseries.total_views",defaultMessage:"{views, plural, one {1 total view} other {{views} total views}}",values:{views:e}})},{key:"unique_views",...s,renderLabel:e=>(0,C.jsx)(a.FormattedMessage,{id:"page_analytics.timeseries.unique_views",defaultMessage:"{uniqueViews, plural, one {1 unique view} other {{uniqueViews} unique views}}",values:{uniqueViews:e}})}]})})]})}function Ae(e){const t=(0,a.useIntl)(),i=(0,n.useMemo)((()=>e.data.reduce(((e,t)=>{let{values:i}=t;return e+i.total_views}),0)),[e.data]);return(0,C.jsx)("div",{style:{margin:"14px 16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,C.jsxs)(we.X2,{justifyContent:"space-between",alignItems:"center",grow:1,children:[(0,C.jsxs)(we.X2,{gap:4,children:[(0,C.jsx)(Ie.Z,{style:{fontWeight:500},children:(0,C.jsx)(a.FormattedMessage,{id:"page_analytics.timeseries.title",defaultMessage:"Views"})}),(0,C.jsx)(Ie.Z,{isSecondaryColor:!0,children:(0,C.jsx)(a.FormattedMessage,{id:"page_analytics.timeseries.totalViews",defaultMessage:"({totalViews} total)",values:{totalViews:(0,re.uf)(i,"number_with_commas",t)}})})]}),(0,C.jsx)(Fe.f,{currentFilter:e.currentFilter,onChangeFilter:e.onChangeFilter})]})})}function Ue(e){const{store:t}=e,{pageVisitStore:i,presenceStore:s}=(0,o.Kw)(Y.default),r=(0,l.O7)();(0,n.useEffect)((()=>{me.Ri(r,{blockStore:t,pageVisitStore:i,incremental:!1,limit:me.s4})}),[r,t,i]);const d=(0,o.VK)((()=>(0,ye.AQ)(i,s)),[i,s]);if(0===d.length)return null;const c=d.map((e=>{let{userId:i,activityTimestampNearestMinuteMs:n}=e;return{actorStore:je.U6.createChildStore(t,{id:i,table:ce.KJ}),timestamp:n}}));return(0,C.jsxs)("div",{style:{...Ne,display:"flex",flexDirection:"column",gap:12},children:[(0,C.jsx)(Ie.Z,{style:{fontWeight:500},children:(0,C.jsx)(a.FormattedMessage,{id:"page_analytics.viewers.title",defaultMessage:"Viewers"})}),(0,C.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:10},children:(0,C.jsx)(De,{store:t,actorStores:c,collapsedLabel:(0,C.jsx)(a.FormattedMessage,{id:"page_analytics.viewers.expand",defaultMessage:"Show more viewers"}),expandedLabel:(0,C.jsx)(a.FormattedMessage,{id:"page_analytics.viewers.collapse",defaultMessage:"Show less viewers"})})})]})}const Ve=5;function De(e){const{store:t,actorStores:i,collapsedLabel:o,expandedLabel:s}=e,[a,r]=(0,n.useState)(!0),l=a?i.slice(0,Ve):i;return(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:10},children:[l.map((e=>{let{actorStore:i,timestamp:n}=e;return(0,C.jsx)(ze,{store:t,actorStore:i,timestamp:n},i.id)})),i.length>Ve&&(0,C.jsx)("button",{onClick:e=>{e.preventDefault(),r(!a)},style:{background:"none",border:"none",textAlign:"left",padding:0,marginTop:4},children:(0,C.jsxs)(Ie.Z,{isSecondaryColor:!0,isSmall:!0,style:{display:"flex",gap:3,alignItems:"center"},children:[a?o:s,a?(0,ne.E)({width:12}):(0,oe.R)({width:12})]})},"toggle")]})}function ze(e){const{actorStore:t,timestamp:i}=e,s=(0,a.useIntl)(),r=(0,n.useMemo)((()=>{const e=Date.now();return(0,ee.tv)(Math.min(i??e,e),J.SP)}),[i]),l=(0,o.VK)((()=>t.getDisplayName(s)),[t,s]);return(0,C.jsxs)(we.X2,{alignItems:"center",justifyContent:"space-between",children:[(0,C.jsxs)(we.X2,{gap:4,children:[(0,C.jsx)(Ke,{actorStore:t}),(0,C.jsx)(Ie.Z,{style:{fontWeight:500},children:l})]}),(0,C.jsx)(Ie.Z,{isSecondaryColor:!0,children:i?(0,C.jsx)("span",{title:(0,ee.Yx)(i,"medium_with_time",J.SP),children:r}):r})]})}function Ke(e){const{actorStore:t}=e;return t.table===de.cZ?(0,C.jsx)(Ze.Z,{botStore:t,size:18}):t.table===ce.KJ?(0,C.jsx)(Be.Z,{userStore:t,size:18}):t.table===le.y0?(0,C.jsx)(Be.Z,{userStore:void 0,size:18}):void(0,U.t1)(t)}function Ee(e){const{environment:t,store:i,spaceId:s,hasAccessToEditors:a}=e,[,,r]=(0,o.AF)(void 0,Ce.o),[l,d]=(0,n.useState)([]);(0,n.useEffect)((()=>{a&&he.h(t,{store:r,activityIds:l,spaceId:s,filterActivityTypes:[],filterDateRange:{starting:void 0,ending:void 0},navigableBlockId:i.id})}),[l,r,s,i.id,t,a]);return(0,o.VK)((()=>{if(!a)return[];const e=r.state.activityIds;(0,pe.Z)(l,e)||d(e);const{currentSpaceStore:t}=Y.default.state;if(!t)return[];const n=l.map((e=>(0,be.No)(t,e,t.id))).flatMap((e=>{const t=e.getValue();return t?"top-level-block-created"!==t.type&&"top-level-block-deleted"!==t.type&&"block-edited"!==t.type?[]:function(e,t){var i;return ue.oA(null===(i=e.edits)||void 0===i?void 0:i.flatMap((e=>{var i;return null===(i=e.authors)||void 0===i?void 0:i.map((i=>({actorStore:(0,xe.nc)({parentStore:t,pointer:i}),timestamp:e.timestamp})))})))}(t,i):[]})),o=ue.MR(n,"timestamp").reverse();return ue.mN(o,"userId")}),[l,r,a,i])}function He(e){const{spaceId:t,store:i}=e,n=(0,l.O7)(),s=(0,o.VK)((()=>(0,Me.qb)(n,"business")||(0,Me.qb)(n,"enterprise")),[n]),r=Ee({environment:n,hasAccessToEditors:s,spaceId:t,store:i}),d=(0,o.VK)((()=>{const e=i.getCreatedByPointer(),t=i.getCreatedTime();if(e&&t)return{actorStore:(0,xe.nc)({parentStore:i,pointer:e}),createdTime:t}}),[i]);return(0,C.jsxs)("div",{style:{...Ne,display:"flex",flexDirection:"column",gap:12},children:[(0,C.jsx)(Ie.Z,{style:{fontWeight:500},children:(0,C.jsx)(a.FormattedMessage,{id:"page_analytics.editors.title",defaultMessage:"Editors"})}),d&&(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:10,marginBottom:6},children:[(0,C.jsx)(Ie.Z,{isSmall:!0,isSecondaryColor:!0,style:{fontWeight:500},children:(0,C.jsx)(a.FormattedMessage,{id:"page_analytics.editors.createdBy",defaultMessage:"Created by"})}),(0,C.jsx)(ze,{store:i,actorStore:d.actorStore,timestamp:d.createdTime})]}),s&&r.length>0&&(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:10},children:[(0,C.jsx)(Ie.Z,{isSmall:!0,isSecondaryColor:!0,style:{fontWeight:500},children:(0,C.jsx)(a.FormattedMessage,{id:"page_analytics.editors.editedBy",defaultMessage:"Recently edited by"})}),(0,C.jsx)(De,{actorStores:r,store:i,collapsedLabel:(0,C.jsx)(a.FormattedMessage,{id:"page_analytics.editors.expand",defaultMessage:"Show more editors"}),expandedLabel:(0,C.jsx)(a.FormattedMessage,{id:"page_analytics.editors.collapse",defaultMessage:"Show less editors"})})]})]})}function We(e){const t=(0,s.yK)((e=>({column:{display:"flex",flexDirection:"column"},row:{display:"flex"},centered:{textAlign:"center",alignItems:"center",width:250},analyticsIcon:{position:"relative",top:-8,left:-4},secondaryIcon:{fill:e.mediumTextColor},settingsButton:{padding:"7.5px 10px",alignSelf:"center"},link:{cursor:"pointer",justifyContent:"center",alignItems:"center",padding:8,alignSelf:"center"}})),[]);return(0,C.jsx)("div",{style:{...t.column,gap:24},children:(0,C.jsxs)("div",{style:{...t.column,...t.centered,gap:4},children:[(0,ie.z)({...t.secondaryIcon,...t.analyticsIcon,width:62,height:62}),(0,C.jsx)(Ie.Z,{isSecondaryColor:!0,style:{fontSize:16,fontWeight:500},children:e.heading}),(0,C.jsx)(Ie.Z,{isSecondaryColor:!0,style:{whiteSpace:"normal",overflow:"visible"},children:e.description})]})})}function qe(e){let{enablePageAnalytics:t}=e;const i=(0,o.VK)((()=>Y.default.state.mainEditorCurrentBlockStore),[]),n=(0,o.VK)((()=>{const e=W.ou.now().minus({years:1}).valueOf();return!!i&&i.getCreatedTime()<e}),[i]),r=(0,o.VK)((()=>Y.default.state.currentSpaceStore),[]),d=(0,o.VK)((()=>!(null!=i&&i.canRead())),[i]),c=(0,l.O7)(),u=(0,o.VK)((()=>(0,G._c)(c)),[c]),p=(0,o.VK)((()=>{var e;const t=null==i?void 0:i.getModel();return i&&null!=t&&t.isCollectionView()?null===(e=i.getCollectionPointer())||void 0===e?void 0:e.id:void 0}),[i]),h=(0,o.VK)((()=>Boolean(null==r?void 0:r.getSettings().disable_page_analytics)),[r]),g=(0,s.yK)((e=>({updatesEmptyStyle:{flex:1,display:"flex",justifyContent:"center",flexDirection:"column",textAlign:"center",color:e.mediumTextColor,fontSize:14,background:e.contentBackground,marginRight:u?2:0,pointerEvents:"auto",height:"100%"},updatesNotEmptyStyle:{display:"flex",flexDirection:"column",flex:"1 1 0%",background:e.contentBackground,marginRight:u?2:0,pointerEvents:"auto",marginTop:1,height:"100%"}})),[u]),m=(0,o.VK)((()=>I.ZP.state.currentSubTab),[]);if(d)return(0,C.jsx)(X.Z,{type:$.Z.Y,style:g.updatesEmptyStyle,children:(0,C.jsx)("div",{style:{width:200,alignSelf:"center"},children:(0,C.jsx)(a.FormattedMessage,{id:"updateSidebar.commentContainer.restricted",defaultMessage:"You don't have permission to view the updates of this restricted page."})})});if(r&&i)return(0,C.jsxs)(X.Z,{type:$.Z.Y,ref:e=>{q.Z.UpdateSidebarScroller=e},style:g.updatesNotEmptyStyle,children:[t&&(0,C.jsx)("div",{style:{display:m===I.uF.Analytics?"block":"none",height:"100%"},children:(0,C.jsx)(Le,{spaceId:r.id,store:i,isDisabledForWorkspace:h})}),(0,C.jsx)("div",{style:{display:m===I.uF.Updates?"block":"none"},children:(0,C.jsx)(w.Z,{collectionId:p,navigableBlockStore:i,spaceId:r.id,source:"updates_sidebar",empty:e=>(0,C.jsx)(X.Z,{type:$.Z.Y,style:g.updatesEmptyStyle,ref:e=>{q.Z.UpdateSidebarScroller=e},children:(0,C.jsx)("div",{style:{width:200,alignSelf:"center"},children:e.hasFiltersOn?(0,C.jsx)(a.FormattedMessage,{id:"updateSidebar.updatesContainer.emptyAfterSearch",defaultMessage:"No updates match the requested filters."}):n?(0,C.jsx)(a.FormattedMessage,{id:"updateSidebar.updatesContainer.emptyMaybePurged",defaultMessage:"There are no recent updates on this page. Page updates are retained for one year."}):(0,C.jsx)(a.FormattedMessage,{id:"updateSidebar.updatesContainer.empty",defaultMessage:"No updates on this page yet."})})})},i.id)})]});throw new Error("Loaded sidebar without AppStore initialized.")}var Ge=i(548779),$e=i(966324),Ye=i(33784),Xe=i(138302),Qe=i(282136),Je=i(188923);function et(e){const{currentTab:t}=e,i=(0,o.VK)((()=>Y.default.state.mainEditorCurrentBlockStore),[]),s=(0,o.VK)((()=>Y.default.state.currentSpaceStore),[]),a=(0,o.VK)((()=>Y.default.state.renderPhase),[]),[r,l]=(0,n.useState)(!1),d=(0,n.useMemo)((()=>Date.now()),[]),c=(0,o.VK)((()=>I.ZP.state.timeOpenedComments),[]),u=void 0!==c?Math.max(d,c):d;if((0,n.useEffect)((()=>{r||"rendered"!==a||l(!0)}),[null==i?void 0:i.id,r,a]),!i||!s||!r)return(0,C.jsx)(E.B,{areaHeight:window.innerHeight});switch(t){case I.gY.Comments:return(0,C.jsx)(H.J,{timeViewed:u,location:"sidebar"});case I.gY.Updates:return(0,C.jsx)(qe,{enablePageAnalytics:e.enablePageAnalytics});case I.gY.Info:return(0,C.jsx)(fe.Jc,{store:i,context:Qe.S.Frame,disabled:!1,shownAs:"sidebar"});default:(0,U.t1)(t)}}function tt(e){const t=(0,o.VK)((()=>({width:I.ZP.state.width,isAnimating:I.ZP.state.isAnimating})),[]),i=(0,l.O7)(),{shouldLoadSidebarComponents:a,isExpanded:r,popOutMode:d,closeSidebar:c}=e,u=(0,o.VK)((()=>r&&d&&!Xe.Z.state.isOpen&&!Ye.Z.state.open),[r,d]),p=(0,n.useRef)(null),h=(0,n.useMemo)((()=>[`.${T.zar}`,`.${T.hzx}`,`.${T.G6g}`,`.${T.K3y}`,`.${T.p0b}`,`.${T.mJW}`]),[]);(0,_.O)({active:u,closeHandler:c,ref:p,excludedSelectors:h});const g=k.R6(i.device.isElectronMac),m=(0,s.yK)((e=>({container:{flexGrow:0,flexShrink:0,zIndex:A.XB,borderLeft:(d?"unset":!r&&"1px solid rgba(0,0,0,0)")||`1px solid ${e.regularDividerColor}`,alignSelf:"flex-end",position:"absolute",right:0,top:0,height:"100vh",pointerEvents:"none"},popOutContainer:{boxShadow:e.mediumBoxShadow,background:e.popoverBackground,borderRadius:4,border:r?`1px solid ${e.regularDividerColor}`:void 0,height:`calc(100% - 20px - ${g}px)`,marginTop:g+10,marginRight:r?10:0},wrap:{height:"100%"},content:{position:"absolute",top:0,bottom:0,display:r?"flex":"none",flexDirection:"column",overflow:"visible",zIndex:A.XB,width:t.width}})),[t.width,g,d,r]);return a?(0,C.jsx)("aside",{"aria-hidden":!r||void 0,ref:p,style:{...m.container,...d?m.popOutContainer:{}},onMouseMove:()=>{t.isAnimating||I.ZP.setState({...I.ZP.state,mouseEntered:!0})},onMouseLeave:()=>{t.isAnimating||I.ZP.setState({...I.ZP.state,mouseEntered:!1})},children:(0,C.jsx)("div",{style:m.wrap,children:(0,C.jsx)("div",{style:m.content,children:(0,C.jsx)(nt,{...e})})})}):null}function it(e){let{enablePageAnalytics:t,navigableBlockStore:i,onTabChange:n}=e;const a=(0,l.O7)(),{popOutMode:r}=(0,o.VK)((()=>({popOutMode:(0,G._c)(a)})),[a]),d=(0,o.VK)((()=>I.ZP.state.currentTab),[]),c=(0,s.yK)((()=>({commentsHeaderStyle:{position:"relative",pointerEvents:"auto",marginTop:r?0:k.R6(a.device.isElectronMac)}})),[a,r]);switch(d){case I.gY.Comments:return(0,C.jsx)("div",{style:c.commentsHeaderStyle});case I.gY.Updates:return(0,C.jsx)(L,{popOutMode:r,navigableBlockStore:i,enablePageAnalytics:t,onTabChange:n});case I.gY.Info:return(0,C.jsx)("div",{style:c.commentsHeaderStyle});default:(0,U.t1)(d)}}function nt(e){const{isResizerHovered:t,isResizing:i,currentTab:a,expanded:r}=(0,o.VK)((()=>{const{isResizerHovered:e,isResizing:t,currentTab:i,expanded:n}=I.ZP.state;return{isResizerHovered:e,isResizing:t,currentTab:i,expanded:n}}),[]),{currentBlockStore:d}=e,c=(0,l.O7)(),{currentTabToRender:u,popOutMode:p}=(0,o.VK)((()=>({currentTabToRender:d.isCollectionView()&&!d.isCollectionViewPageWithContent()?I.gY.Updates:a,popOutMode:(0,G._c)(c)})),[d,a,c]),h=(0,o.VK)((()=>{const{currentSpaceStore:e}=Y.default.state;return!(0,Ge.Cx)(e)}),[]),g=n.useCallback((e=>{V.Zm(c,{tab:e===I.uF.Updates?"updates":"analytics",origin:Je.default.state.open?"peek_view":"page"}),I.ZP.setState({...I.ZP.state,currentSubTab:e})}),[c]),m=(0,s.yK)((e=>({pane:{display:"flex",flexDirection:"column",height:"100%",position:"relative",pointerEvents:"none",maxHeight:"100%",backgroundColor:a===I.gY.Comments?void 0:"inherit"},resizerStyle:{position:"absolute",top:0,left:-3,bottom:0,right:0,height:"100vh",width:3,zIndex:-1,display:"block",transition:"box-shadow 300ms ease-in",...(t||i)&&r?{boxShadow:e.sidebarResizerBoxShadow}:{}},controlsHeaderStyle:{position:"relative",pointerEvents:"auto",marginTop:p?0:k.R6(c.device.isElectronMac),paddingTop:4,width:p?"calc(100% - 2px)":"100%",background:e.contentBackground,borderRadius:4,paddingBottom:1}})),[a,t,i,c,r,p]);return(0,C.jsxs)("div",{style:m.pane,className:T.zar,children:[(0,C.jsx)("div",{style:m.resizerStyle}),(0,C.jsx)(it,{enablePageAnalytics:h,navigableBlockStore:d,onTabChange:g}),(0,C.jsx)(et,{currentTab:u,enablePageAnalytics:h}),r&&(0,C.jsx)(K.Z,{type:"update"})]})}function ot(e){const{isElectronMac:t,currentBlockStore:i}=e,s=(0,o.VK)((()=>({width:I.ZP.state.width,isAnimating:I.ZP.state.isAnimating,canRender:I.ZP.state.canRender})),[]),a=(0,o.VK)((()=>Y.default.state.currentSpaceStore),[]),r=(0,n.useMemo)((()=>null==a?void 0:a.clone()),[a]),d=(0,l.O7)(),c=(0,o.VK)((()=>d.currentUser.isLoggedIn()&&(0,G.Sx)(d)),[d]),{isExpanded:u,popOutMode:p,closeSidebar:h}=(0,o.VK)((()=>({isExpanded:(0,G.Sx)(d),popOutMode:(0,G._c)(d),closeSidebar:()=>$e.setUpdateExpand({environment:d,isExpanded:!1,from:"close_for_space"})})),[d]),[g,m]=(0,n.useState)(!1),[f,x]=(0,n.useState)(void 0);return(0,n.useEffect)((()=>{(void 0===f||f===i.id)&&u&&(m(!0),x(i.id))}),[f,i,u]),s.canRender&&r?(0,C.jsx)(D.Z,{isVisible:!0,useCompositeLayer:!0,animationStyle:{width:c?s.width:0},render:()=>(0,C.jsx)(z.Z,{store:r,droppable:!0,render:()=>(0,C.jsx)(tt,{isElectronMac:t,isFullyExpanded:!s.isAnimating,currentBlockStore:i,isExpanded:u,popOutMode:p,closeSidebar:h,shouldLoadSidebarComponents:g})},r.id),onAnimationStart:()=>{I.ZP.setState({...I.ZP.state,isAnimating:!0})},onAnimationEnd:()=>{I.ZP.setState({...I.ZP.state,isAnimating:!1})}}):null}var st=i(883355),at=i(749085),rt=i(101464),lt=i(937850),dt=i(717659),ct=i(436488),ut=i(543145),pt=i(483785),ht=i(612457),gt=i(851811),mt=i(905162),ft=i(304761),xt=i(641549),yt=i(97889),bt=i(582598);function vt(){const e=(0,o.VK)((()=>(0,xt.Fz)()),[]);switch(e){case"unread_and_read":case"unread_only":return(0,C.jsx)(bt.Z,{message:(0,C.jsx)(a.FormattedMessage,{defaultMessage:"You'll be notified here for @mentions, page activity, and page invites",id:"inbox.filterEmptyState.nonArchivedMessage"}),title:(0,C.jsx)(a.FormattedMessage,{defaultMessage:"You're all caught up",id:"inbox.filterEmptyState.nonArchivedTitle"})});case"archived_only":return(0,C.jsx)(bt.Z,{message:(0,C.jsx)(a.FormattedMessage,{defaultMessage:"Any Inbox updates you archived will show up here.",id:"inbox.filterEmptyState.archivedMessage"}),title:(0,C.jsx)(a.FormattedMessage,{defaultMessage:"No archived updates",id:"inbox.filterEmptyState.archivedTitle"})});case"all_updates":return(0,C.jsx)(bt.Z,{message:(0,C.jsx)(a.FormattedMessage,{defaultMessage:"Any activity in the workspace will show up here.",id:"inbox.filterEmptyState.allPagesMessage"}),title:(0,C.jsx)(a.FormattedMessage,{defaultMessage:"No activity in the workspace",id:"inbox.filterEmptyState.allPagesTitle"})});default:(0,U.t1)(e)}}var St=i(881150),Ct=i(910601),jt=i(573063),Mt=i(526388),wt=i(397799),kt=i(992083),Tt=i(562820);function Zt(e){let{location:t}=e;const i=(0,a.useIntl)(),o=(0,l.O7)(),r=(0,n.useCallback)((()=>{const{device:e}=o;p.FR(o),e.isMobile?wt.Z.setState({open:!0,source:wt.Y.Updates}):(Tt.Z.setState({...Tt.Z.state,open:!1}),kt.Z.setState({...kt.Z.state,currentTab:"notifications",defaultSubtab:void 0}),kt.Z.setState({...kt.Z.state,open:!0}))}),[o]),d=(0,s.yK)((e=>({mobileTopBarIcon:{height:18,width:18,fill:e.regularTextColor},webUpdatesModalIcon:{width:16,height:16}})),[]);let c;switch(t){case"mobileTopBar":c=d.mobileTopBarIcon;break;case"webUpdatesModal":c=d.webUpdatesModalIcon;break;default:(0,U.t1)(t)}return(0,C.jsx)(Mt.Z,{renderTooltip:()=>(0,C.jsx)(a.FormattedMessage,{defaultMessage:"Open notifications settings",id:"updatesModal.openNotifications.tooltip"}),render:e=>(0,C.jsx)(jt.Z,{icon:ae.H,iconStyle:c,onClick:r,ariaLabel:i.formatMessage({id:"updatesModal.openNotifications.tooltipAriaLabel",defaultMessage:"Open notifications settings button"}),...e})})}const It=n.memo(Zt);i(757658);var Bt=i(568626),Ft=i(144615),Rt=i(865311),Ot=i(210228),Lt=i(456258),Pt=i(823586),Nt=i(277907),_t=i(702688),At=i(788632),Ut=i(45428),Vt=i(770564),Dt=i(150770),zt=i(319385);function Kt(e){const{groupName:t}=e;switch(t){case"today":return(0,C.jsx)(a.FormattedMessage,{id:"InboxTimeGroupHeader.today",defaultMessage:"Today"});case"this_week":return(0,C.jsx)(a.FormattedMessage,{id:"InboxTimeGroupHeader.thisWeek",defaultMessage:"This week"});case"last_week":return(0,C.jsx)(a.FormattedMessage,{id:"InboxTimeGroupHeader.lastWeek",defaultMessage:"Last week"});case"older":return(0,C.jsx)(a.FormattedMessage,{id:"InboxTimeGroupHeader.older",defaultMessage:"Older"});default:(0,U.t1)(t)}}function Et(e){const t=(0,o.VK)((()=>zt.default.checkGate({gateName:"sticky_inbox_date_buckets"})),[]),{groupName:i}=e,n=(0,s.yK)((e=>({container:{paddingTop:3,paddingBottom:3,paddingLeft:16,paddingRight:16,color:e.text.secondary,fontWeight:r.Z.fontWeight.medium,fontSize:"12px",...t&&{position:"sticky",top:0,backgroundColor:e.contentBackground,zIndex:2}}})),[t]);return(0,C.jsx)("div",{style:n.container,children:(0,C.jsx)(Kt,{groupName:i})})}class Ht extends st.Z{constructor(){super(...arguments),this.storeTypes={sizeStore:at.default.createClass(20,{name:"sizeStore"}),checkpointStore:at.default.createClass(Math.random(),{name:"checkpointStore"})},this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleActivityEmit=(e,t)=>function(e,t,i){if(String(t).includes("unreadCount"))return;i.setState(Math.random())}(0,t,this.stores.checkpointStore),this.handleActivityEmitThrottled=ue.P2(this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleActivityEmit,1e3),this.notificationListenerReference=void 0}UNSAFE_willMount(){this.startMessageListeners()}willUnmount(){this.stopMessageListeners()}renderComponent(){return At.Z.state.online?(0,C.jsx)(Jt,{type:this.props.type,empty:this.props.empty,source:this.props.source,tab:this.props.tab,sizeStore:this.stores.sizeStore,checkpointStore:this.stores.checkpointStore}):(0,C.jsx)(Yt,{type:this.props.type})}startMessageListeners(){const{currentUserStore:e}=Y.default.state;if(e){const t=(0,Ft.Lp)(e.id);this.notificationListenerReference=_t.ZP.addListener(t,this.handleActivityEmitThrottled,void 0,this.environment)}}stopMessageListeners(){this.notificationListenerReference&&(_t.ZP.removeListener(this.notificationListenerReference,this.environment),this.notificationListenerReference=void 0)}}Ht.displayName="NotificationInbox";const Wt=Ht;function qt(e,t){switch(e){case"mentions":return t?"unread_only":"unread_and_read";case"archive":return"archived";default:(0,U.t1)(e)}}function Gt(e,t){const{device:i}=t;return{minHeight:i.isMobile||"mentions"===e?void 0:"75vh"}}function $t(e,t,i){const{device:n}=t;return{...Gt(e,t),paddingTop:n.isMobile?64:void 0,minHeight:n.isMobile?void 0:220,display:"flex",textAlign:"center",alignItems:"center",justifyContent:"center",fontSize:14,color:i.regularTextColor,overflow:"hidden"}}function Yt(e){let{type:t}=e;const i=(0,s.Fg)(),n=(0,l.O7)();return(0,C.jsx)("div",{style:$t(t,n,i),children:(0,C.jsx)("div",{children:(0,C.jsx)(a.FormattedMessage,{defaultMessage:"Please go online to view your inbox.",id:"notificationInbox.offline.message"})})})}function Xt(e){let{request:t,error:i,result:r,ready:d,type:c,empty:u,source:p,tab:h,sizeStore:g}=e;const m=(0,s.Fg)(),f=(0,l.O7)(),x=(0,l.Fy)(),y=(0,o.VK)((()=>Y.default.state.currentSpaceStore),[]),b=(0,mt.Y)("supportsNativeHome"),v=b?r??gt.Tj(t):r;b&&r&&gt.yW(t,r);const S=(0,o.VK)((()=>ft.ZP.state),[]),j=(0,o.VK)((()=>(0,Dt.B7)(f)),[f]),[M,w]=(0,o.VK)((()=>{const e=y&&v?v.map((e=>je.t1.createChildStore(y,{table:Rt.uX,id:e}))):[],i=[];return[ue.oA(e.map((e=>{const n=e.getValue();if(!n)return null;if(n.invalid)return null;if("mentions"===t.type&&n.visited)return null;if("archive"===t.type&&!n.visited)return null;const o=be.sl(e);if(!o||!o.isReady())return null;const s=o.getModel();if(!s||s.invalid)return i.push(n),null;const a=e.getDiscussionStore();return null!=a&&a.isReady()&&"none"===(null==a?void 0:a.getRole())?(i.push(n),null):{activity:s,notification:n}}))),i]}),[v,y,t.type]),k=(0,o.VK)((()=>g.state),[g]),T=(0,o.VK)((()=>xt.Fz()),[]),Z=0===(0,o.VK)((()=>xt.$x(M,t.type)),[M,t.type]).size,I=(0,n.useCallback)((()=>{if(!y||i)return null;if(!v)return null;const e=[];let t=[];if("time_grouping"===j){const i=xt.mx();let o;M.forEach(((s,a,r)=>{let{activity:l,notification:d}=s;const c={source:p,tab:h,notification:d},u=Number(d.end_time),g=i.findIndex((e=>{const{cutoffTime:t}=e;return void 0===t||t<=u}));if(g!==o){const s=i[g].name;e.push((0,C.jsx)("div",{children:t})),t=[(0,C.jsxs)(n.Fragment,{children:[1!==e.length&&(0,C.jsx)("div",{style:{height:8}}),(0,C.jsx)(Et,{groupName:s})]},`${s}-inbox-group-section`)],o=g}t.push((0,C.jsx)(fe.GS,{activity:l,rootStore:y,isFirst:!1,isLast:!1,tabArgs:c,useInboxRedesign:!0},l.id))})),e.push((0,C.jsx)("div",{children:t}))}else"none"===j?M.forEach((t=>{let{activity:i,notification:n}=t;const o={source:p,tab:h,notification:n};e.push((0,C.jsx)(fe.GS,{activity:i,rootStore:y,isFirst:!1,isLast:!1,tabArgs:o,useInboxRedesign:!1},i.id))})):(0,U.t1)(j);return e}),[y,i,v,j,M,p,h]),B=(0,Nt.XJ)(fe.FF.ActivityNotification);return(0,n.useEffect)((()=>{if(!y)return;!function(e,t,i){const n=e.filter((e=>!e.read));0!==n.length&&(Bt.log({level:"warning",from:"NotificationInbox",type:"invalidNotificationData",data:{ids:n.map((e=>e.id))}}),Ot.createAndCommit({userAction:"NotificationUpdates.unreadNotificationNotRendered",environment:i,perform:e=>{for(const i of n)dt.$h({notification:i,rootStore:t,transaction:e,read:!0})}}))}(w,y,f);const e=M.some((e=>{let{notification:t}=e;return!t.read&&!t.visited})),t=e&&M.some((e=>{let{notification:t}=e;return t.read&&!t.visited}));switch(T){case"unread_and_read":case"unread_only":ft.ZP.setState({...S,currentTab:"mentions",isCurrentTabEmpty:Z,containsBothReadAndUnreadNotifications:t,containsUnreadNotifications:e,showOnlyUnreadNotifications:"unread_only"===T,unreadNotificationIds:[]});break;case"archived_only":ft.ZP.setState({...S,isCurrentTabEmpty:Z,currentTab:"archive"});break;case"all_updates":break;default:(0,U.t1)(T)}}),[T,S,Z,M,y,f,w]),!y||i?(0,C.jsx)("div",{style:$t(c,f,m),children:(0,C.jsx)(a.FormattedMessage,{defaultMessage:"Something went wrong.",id:"notificationUpdates.unknownErrorMessage"})}):v&&"resolved"===B.status?(0,C.jsxs)("div",{style:Z?$t(c,f,m):Gt(c,f),children:[Z&&u,(0,C.jsx)("section",{role:"feed",className:"notranslate",children:I()}),(0,C.jsx)(ut.Z,{onChange:e=>{if(!x.isMobile&&"closed"===xt.T6())return null;e<200&&v.length>=k&&g.setState(v.length+20)}})]}):(0,C.jsx)("div",{style:Gt(c,f),children:(0,C.jsx)(E.B,{areaHeight:window.innerHeight})})}function Qt(e){let{request:t,error:i,result:n,ready:o,requestId:s,type:a,empty:r,source:l,tab:d,sizeStore:c}=e;const u=(0,C.jsx)(Xt,{type:a,empty:r,source:l,tab:d,sizeStore:c,request:t,error:i,result:n,ready:o});return Ut.setState({request:t,result:n}),(0,C.jsx)(Lt.o,{requestId:s,children:u})}function Jt(e){let{type:t,empty:i,source:n,tab:s,sizeStore:a,checkpointStore:r}=e;const d=(0,l.O7)(),{currentUserStore:c,currentSpaceStore:u}=(0,o.VK)((()=>{const{currentUserStore:e,currentSpaceStore:t}=Y.default.state;return{currentUserStore:e,currentSpaceStore:t}}),[]),p=(0,o.VK)((()=>a.state),[a]),h=(0,o.VK)((()=>r.state),[r]),g=(0,o.VK)((()=>"unread_only"===xt.Fz()),[]);if(!c||!u)return null;const m=u.id,f=c.id;return(0,C.jsx)(Pt.Z,{throttle:1e3,request:{spaceId:m,userId:f,size:p,type:t,showOnlyUnreadNotifications:g,checkpoint:h},performRequest:async e=>{let{spaceId:t,size:i,type:n,showOnlyUnreadNotifications:o}=e;const s=ft.ZP.startLoading();Vt.B(s,{size:i,type:n});const a=await ge.getNotificationLogV2(d,{spaceId:t,size:i,type:qt(n,o),variant:"no_grouping"});if(ft.ZP.endLoading(s),"failed"===a.type)throw a.error;return{notificationIds:a.data.notificationIds,requestId:s}},render:(e,o,r)=>(0,C.jsx)(Qt,{type:t,empty:i,source:n,tab:s,sizeStore:a,request:{spaceId:m,userId:f,type:t},error:e,result:null==o?void 0:o.notificationIds,ready:r,requestId:null==o?void 0:o.requestId})})}class ei extends st.Z{constructor(){super(...arguments),this.storeTypes={refreshCountStore:at.default.createClass(0,{name:"refreshCountStore"})},this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleRefreshAll=()=>{var e;(e=this.stores.refreshCountStore).setState(e.state+1)},this.handleRefreshAllThrottled=ue.Ds(this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleRefreshAll,1e3,{leading:!0})}willUnmount(){var e;e=this.environment,p.nI(e),dt.G7({environment:e,newTab:"mentions",shouldTrack:!1})}renderComponent(){const{device:e}=this.environment;let t;if(e.isMobile){const i="mobileTopBar";t={menuType:y.og.Modal,title:(0,C.jsx)(Ct.Q,{}),width:this.props.format===gt.EX.RenderAsPage?"100vw":void 0,renderAsPage:this.props.format===gt.EX.RenderAsPage,right:[(0,C.jsx)(It,{location:i},"InboxNotificationSettingsButton"),(0,C.jsx)("span",{style:{width:6}},"paddingSpan2"),(0,C.jsx)(St.$,{},"InboxFilterButton"),(0,C.jsx)("span",{style:{width:6}},"paddingSpan1"),(0,C.jsx)(yt.p,{},"InboxEllipsisButton")],left:[ni(),e.isPhone&&(0,mt.Y)("supportsNativeHome")&&this.props.format===gt.EX.RenderAsPage&&!(0,mt.Y)("supportsNativeInbox")?void 0:(0,rt.k)({fill:this.theme.regularTextColor,width:26,height:26})],onClickLeft:this.props.onClose,whiteBackground:!0,disableHeaderShadow:!0}}else t={menuType:y.og.Popup,height:"auto"};return(0,C.jsxs)(m.Z,{...t,className:T.C18,children:[(0,C.jsx)(ut.Z,{onChange:(e,t)=>{let{offsetFromTop:i}=t;ft.n_.setState(i<=0)}}),(0,C.jsx)(ct.Z,{capture:!0,allowUndo:!0,allowEsc:!0,allowMobileAutoScroll:!0,render:()=>this.props.format===gt.EX.RenderAsPage?(0,C.jsx)(ii,{}):(0,C.jsx)(ti,{})})]})}}function ti(){const e=(0,o.VK)((()=>{var e;return null===(e=Y.default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),t=(0,o.VK)((()=>xt.Fz()),[]),i={emptyState:{marginTop:100,cursor:"auto"}};return(0,C.jsx)(C.Fragment,{children:"all_updates"!==t?(0,C.jsx)(Wt,{type:"archived_only"===t?"archive":"mentions",source:"notifications_tab",tab:"inbox",empty:(0,C.jsx)("div",{style:i.emptyState,children:(0,C.jsx)(vt,{})})},t):e&&(0,C.jsx)(w.Z,{spaceId:e,source:"notifications_tab",empty:()=>(0,C.jsx)("div",{style:i.emptyState,children:(0,C.jsx)(vt,{})})},t)})}function ii(){const e=(0,l.O7)();return(0,C.jsx)(pt.Z,{fetch:async()=>{await lt.Vs(0),await Y.default.waitUntil((()=>void 0!==Y.default.state.currentSpaceStore))},loading:()=>(0,C.jsx)(n.Fragment,{}),willRender:()=>{var t;null===(t=e.mobileNative)||void 0===t||t.markTransitionReady({type:"updates"})},render:()=>(0,C.jsx)(D.Z,{isVisible:!0,enterAnimationStyle:{opacity:0},animationStyle:{opacity:1},blockRenderQueueOnEnter:!0,render:()=>(0,C.jsx)(ti,{})})})}function ni(){if((0,mt.Y)("supportsNativeHome"))return(0,C.jsx)(ht.Z,{show:void 0!==ft.ZP.state.loadingId,showDelay:400,showHold:0,render:e=>e?(0,C.jsx)(ke.Z,{style:{width:14}}):(0,C.jsx)("div",{style:{width:14}})})}ei.displayName="MobileInboxPopup";var oi=i(895285),si=i(206637);function ai(e){let{location:t}=e;const i=(0,a.useIntl)(),r=(0,l.O7)(),{currentTab:d,showOnlyUnreadNotifications:c,isCurrentTabEmpty:u}=(0,o.VK)((()=>{const{currentTab:e,isCurrentTabEmpty:t}=ft.ZP.state;return{currentTab:e,showOnlyUnreadNotifications:"mentions"===e&&ft.ZP.state.showOnlyUnreadNotifications,isCurrentTabEmpty:t}}),[]),h=(0,n.useCallback)((async()=>{if(c)ft.ZP.update((e=>({...e,showOnlyUnreadNotifications:!1,unreadNotificationIds:[]}))),p.U0(r,{toggled_to:"off"});else{const e=await dt.Qy({environment:r});ft.ZP.update((t=>({...t,showOnlyUnreadNotifications:!0,unreadNotificationIds:e}))),p.U0(r,{toggled_to:"on"})}}),[r,c]),g=(0,s.yK)((e=>({mobileTopBarIcon:{height:18,width:18,fill:c?void 0:e.regularTextColor},webUpdatesModalIcon:{height:17,width:17},desktopInboxPanelIcon:{height:18,width:18,...!c&&{fill:e.regularTextColor}}})),[c]);if("mentions"!==d)return null;const m=!c&&u,f=c?(0,C.jsx)(a.FormattedMessage,{defaultMessage:"Show all notifications",id:"updatesModal.unreadNotificationsFilterButton.allTooltip"}):(0,C.jsx)(a.FormattedMessage,{defaultMessage:"Show unread notifications only",id:"updatesModal.unreadNotificationsFilterButton.unreadTooltip"}),x=c?i.formatMessage({defaultMessage:"Show all notifications",id:"updatesModal.unreadNotificationsFilterButton.allTooltipAriaLabel"}):i.formatMessage({defaultMessage:"Show unread notifications only",id:"updatesModal.unreadNotificationsFilterButton.unreadTooltipAriaLabel"});let y,b;switch(t){case"mobileTopBar":y=void 0,b=g.mobileTopBarIcon;break;case"webUpdatesModal":y=!!c||void 0,g.webUpdatesModalIcon;break;case"desktopInboxPanel":y=!!c||void 0,b=g.desktopInboxPanelIcon;break;default:(0,U.t1)(t)}return(0,C.jsx)(Mt.Z,{disableTooltip:m,renderTooltip:()=>f,render:e=>(0,C.jsx)(jt.Z,{icon:si.I,isBlue:c,hovered:y,iconStyle:b,disabled:m,onClick:h,ariaLabel:x,...e})})}const ri=n.memo(ai);var li=i(552867);const di=(0,i(745238).IU)("mailOpen",{viewBox:"0 0 16 16",svg:(0,C.jsx)("path",{d:"M2.88965 15.9277C2.17415 15.9277 1.63639 15.75 1.27637 15.3945C0.920898 15.0436 0.743164 14.515 0.743164 13.8086V7.00684C0.743164 6.76074 0.756836 6.54427 0.78418 6.35742C0.816081 6.17057 0.863932 6.00423 0.927734 5.8584C0.996094 5.71257 1.08496 5.57812 1.19434 5.45508C1.30371 5.32747 1.43815 5.19987 1.59766 5.07227L6.88184 0.916016C7.12793 0.715495 7.36035 0.558268 7.5791 0.444336C7.80241 0.325846 8.03939 0.266602 8.29004 0.266602C8.54069 0.266602 8.77539 0.325846 8.99414 0.444336C9.21745 0.558268 9.45215 0.715495 9.69824 0.916016L14.9824 5.07227C15.1419 5.19987 15.2764 5.32747 15.3857 5.45508C15.4951 5.57812 15.5817 5.71257 15.6455 5.8584C15.7139 6.00423 15.7617 6.17057 15.7891 6.35742C15.821 6.54427 15.8369 6.76074 15.8369 7.00684V13.8086C15.8369 14.515 15.6569 15.0436 15.2969 15.3945C14.9414 15.75 14.4059 15.9277 13.6904 15.9277H2.88965ZM2.84863 14.8818H13.7314C14.0687 14.8818 14.3285 14.7907 14.5107 14.6084C14.6976 14.4307 14.791 14.1641 14.791 13.8086V6.82227C14.791 6.6582 14.7751 6.51921 14.7432 6.40527C14.7113 6.29134 14.6611 6.19108 14.5928 6.10449C14.529 6.01335 14.4424 5.92448 14.333 5.83789L9.11035 1.76367C8.94173 1.63607 8.80046 1.53809 8.68652 1.46973C8.57259 1.39681 8.44043 1.36035 8.29004 1.36035C8.13965 1.36035 8.00749 1.39681 7.89355 1.46973C7.77962 1.53809 7.63835 1.63607 7.46973 1.76367L2.24707 5.83789C2.1377 5.92448 2.04883 6.01335 1.98047 6.10449C1.91667 6.19108 1.86882 6.29134 1.83691 6.40527C1.80501 6.51921 1.78906 6.6582 1.78906 6.82227V13.8086C1.78906 14.1641 1.88021 14.4307 2.0625 14.6084C2.24479 14.7907 2.50684 14.8818 2.84863 14.8818ZM1.51562 14.6357L6.88184 9.37207C7.11882 9.13509 7.35352 8.96419 7.58594 8.85938C7.82292 8.75456 8.06217 8.70215 8.30371 8.70215C8.54525 8.70215 8.78223 8.75456 9.01465 8.85938C9.24707 8.96419 9.48405 9.13509 9.72559 9.37207L15.085 14.6357L14.374 15.3467L9.13086 10.1787C8.98047 10.0283 8.83691 9.92122 8.7002 9.85742C8.56803 9.78906 8.43587 9.75488 8.30371 9.75488C8.16699 9.75488 8.03027 9.78906 7.89355 9.85742C7.76139 9.92122 7.6224 10.0283 7.47656 10.1787L2.2334 15.3467L1.51562 14.6357ZM5.81543 10.6094L1.5498 6.3916L2.26074 5.68066L6.5332 9.90527L5.81543 10.6094ZM10.0742 9.90527L14.3398 5.68066L15.0508 6.3916L10.7852 10.6094L10.0742 9.90527Z"})});var ci=i(819034);function ui(e){let{}=e;const t=(0,l.Fy)(),i=(0,l.O7)(),r=(0,o.VK)((()=>(0,Dt.H7)(i)),[i]),d=(0,o.VK)((()=>ft.n_.state),[]),c=(0,o.VK)((()=>{const{currentTab:e,isCurrentTabEmpty:t}=ft.ZP.state;if("mentions"!==e||t)return;const{containsBothReadAndUnreadNotifications:i,containsUnreadNotifications:n,showOnlyUnreadNotifications:o}=ft.ZP.state;return{containsBothReadAndUnreadNotifications:i,containsUnreadNotificationsAccordingToUpdatesStore:n,showOnlyUnreadNotifications:o}}),[]),u=(0,o.VK)((()=>ci.Z.getUnreadCountForCurrentSpace().mentions>0),[]),h=(0,n.useCallback)((()=>{p.Xf(i),dt.go(i)}),[i]),g=(0,n.useCallback)((()=>{if(!c)return;const{containsBothReadAndUnreadNotifications:e,showOnlyUnreadNotifications:t}=c;let n="none";t?n="unread":e&&(n="read"),p.zD(i,{readFilter:n}),dt.rG(i,"mentions",n)}),[i,c]),m=(0,s.yK)((e=>{const i={opacity:1,flex:1,height:t.isMobile?32:27,...r&&{fontSize:14}};return{headerWithBottomBorder:{borderBottom:d?void 0:`1px solid ${e.regularDividerColor}`},container:{display:"flex",marginTop:r&&!t.isMobile?0:12,marginLeft:16,marginRight:16,paddingBottom:12,gap:8},buttons:i,buttonsWithLoweredOpacity:{...i,opacity:.7}}}),[t.isMobile,d,r]);if(!c)return null;const{containsBothReadAndUnreadNotifications:f,containsUnreadNotificationsAccordingToUpdatesStore:x,showOnlyUnreadNotifications:y}=c,b=x||u;return(0,C.jsx)("div",{style:m.headerWithBottomBorder,children:(0,C.jsxs)("div",{style:m.container,children:[(0,C.jsx)(Mt.Z,{disableTooltip:b,renderTooltip:e=>(0,C.jsx)("div",{...e,children:(0,C.jsx)(a.FormattedMessage,{defaultMessage:"All notifications have been marked as read.",id:"updatesModal.spaceUpdatesTab.markAllReadButton.disabledTooltip"})}),render:e=>(0,C.jsx)(Te.Z,{onClick:h,style:b?m.buttons:m.buttonsWithLoweredOpacity,isSmall:!t.isMobile,disabled:!b,icon:r?di:void 0,...e,children:(0,C.jsx)(a.FormattedMessage,{defaultMessage:"Mark all as read",id:"updatesModal.spaceUpdates.mentionsTab.markAllReadButtonTitle"})})}),(0,C.jsx)(Te.Z,{onClick:g,style:m.buttons,isSmall:!t.isMobile,icon:r?li.H:void 0,children:y?(0,C.jsx)(a.FormattedMessage,{defaultMessage:"Archive unread",id:"updatesModal.spaceUpdates.mentionsTab.archiveUnreadButtonTitle"}):f?(0,C.jsx)(a.FormattedMessage,{defaultMessage:"Archive read",id:"updatesModal.spaceUpdates.mentionsTab.archiveReadButtonTitle"}):(0,C.jsx)(a.FormattedMessage,{defaultMessage:"Archive all",id:"updatesModal.spaceUpdates.mentionsTab.archiveAllButtonTitle"})})]})})}const pi=n.memo(ui);var hi=i(474523),gi=i(39849),mi=i(548572),fi=i(479198);function xi(e){let{location:t,onClick:i}=e;const n=(0,a.useIntl)(),r=(0,o.VK)((()=>ft.ZP.state.currentTab),[]),l=(0,s.yK)((e=>({mobileTopBarIcon:{height:18,width:18,fill:e.regularTextColor},webUpdatesModalIcon:{height:17,width:17}})),[]);if("allPages"!==r)return null;let d;switch(t){case"mobileTopBar":d=l.mobileTopBarIcon;break;case"webUpdatesModal":d=l.webUpdatesModalIcon;break;default:(0,U.t1)(t)}return(0,C.jsx)(Mt.Z,{renderTooltip:()=>(0,C.jsx)(a.FormattedMessage,{defaultMessage:"Refresh",id:"updatesModal.allUpdatesRefreshButton.refreshButtonDescription"}),render:e=>(0,C.jsx)(jt.Z,{icon:fi.n,iconStyle:d,onClick:i,ariaLabel:n.formatMessage({defaultMessage:"Refresh",id:"updatesModal.allUpdatesRefreshButton.refreshButtonDescriptionAriaLabel"}),...e})})}const yi=n.memo(xi);function bi(e){let{orderedTabConfigs:t,onClickRefreshAllTab:i}=e;const d=(0,l.Fy)(),c=(0,l.O7)(),{currentTab:u,currentTabIndex:p}=(0,o.VK)((()=>{const{currentTab:e}=ft.ZP.state,i=t.findIndex((t=>t.tab===e));return{currentTab:e,currentTabIndex:i}}),[t]),h=(0,n.useMemo)((()=>t.map(((e,t)=>{if(e.showSeparatorBefore)return t-1})).filter(U.$K)),[t]),g=(0,o.VK)((()=>ci.Z.getUnreadCountForCurrentSpace().mentions>0),[]),m=(0,n.useCallback)((e=>{const i=t[e],n=null==i?void 0:i.tab;n&&u!==n&&dt.G7({environment:c,newTab:n,shouldTrack:!0})}),[u,c,t]),f=(0,s.yK)((()=>({mentionsContainer:{display:"flex",alignItems:"center",justifyContent:"center",fontWeight:g?r.Z.fontWeight.medium:void 0},tabBarRightStyle:{justifyContent:"space-between"},helpButton:{marginLeft:0,...d.isMobile&&{marginTop:-1}},unreadMentionsBadge:{marginLeft:6},actionButtons:{display:"flex",justifyContent:"center",gap:6}})),[d.isMobile,g]),x=gi.N.Red,y={mentions:(0,C.jsxs)("div",{style:f.mentionsContainer,className:T.I2F,children:[(0,C.jsx)("div",{children:(0,C.jsx)(a.FormattedMessage,{defaultMessage:"Inbox",id:"updatesModal.mentionsTab.title"})}),(0,C.jsx)(mi.Z,{type:"currentSpace",color:x,style:f.unreadMentionsBadge})]}),allPages:(0,C.jsx)("div",{className:T.gjL,children:(0,C.jsx)(a.FormattedMessage,{defaultMessage:"All",id:"updatesModal.allUpdatesTab.title"})}),archive:(0,C.jsx)("div",{className:T.HKr,children:(0,C.jsx)(a.FormattedMessage,{defaultMessage:"Archived",id:"updatesModal.archiveTab.title"})})},b=t.map((e=>y[e.tab])),v="webUpdatesModal",S=!d.isMobile&&(0,C.jsxs)("div",{style:f.actionButtons,children:[(0,C.jsx)(yi,{location:v,onClick:i}),(0,C.jsx)(ri,{location:v}),(0,C.jsx)(It,{location:v})]}),j=(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Mt.Z,{render:e=>(0,C.jsx)(hi.Z,{href:(0,ve.UY)("guides.notifications"),analyticsFrom:"inbox_tabs_link",style:f.helpButton,...e}),renderTooltip:()=>(0,C.jsx)(a.FormattedMessage,{id:"updatesButton.learnMoreAboutInboxLink",defaultMessage:"Learn more about notifications"})}),S]});return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(R.Z,{tabs:b,selectedIndex:p,onChange:m,separatorIndexes:h,right:j,rightStyle:f.tabBarRightStyle}),"mentions"===u&&(0,C.jsx)(pi,{})]})}const vi=n.memo(bi);var Si=i(978624),Ci=i(725651),ji=i(411066),Mi=i(437712),wi=i(48276),ki=i(930737),Ti=i(116746),Zi=i(745589);function Ii(){const e=(0,s.yK)((e=>({button:{display:"flex",justifyContent:"center",alignItems:"center",gap:6,height:36,width:174,position:"absolute",left:"50%",marginLeft:-87,bottom:12,zIndex:20,borderRadius:18,background:e.blueColor,color:e.white,boxShadow:e.buttonBoxShadow,fontSize:14},hovered:{background:e.blueButtonHoveredBackground},pressed:{background:e.blueButtonPressedBackground},icon:{width:16,height:16}})),[]);return(0,C.jsxs)(ji.Z,{style:e.button,hoveredStyle:e.hovered,pressedStyle:e.pressed,href:"https://dev.notion.so/notion/346c06d81dbf4cf188bf44fcef6a6a62?v=fa0376c6fb2a40f0b77d68b683f73e5b&pvs=4",external:!0,children:[(0,Ci.R)(e.icon),(0,C.jsx)("div",{children:"Provide Feedback"})]})}function Bi(){const e=(0,l.Fy)(),t=(0,o.VK)((()=>{const{currentSpaceStore:e}=Y.default.state;if(e)return e.id}),[]),i=(0,o.VK)((()=>!1),[]),n=(0,o.VK)((()=>wi.l_()),[]),a=(0,o.VK)((()=>Ti.Z.state.mode),[]),r=(0,o.VK)((()=>xt.Fz()),[]),d=(0,s.yK)((e=>({container:{flexDirection:"column",width:"100%",display:"flex"},scroller:{position:"relative",minHeight:0,display:"flex",flexDirection:"column",marginRight:0,pointerEvents:"auto",width:"100%",..."peek"===a?{}:{minWidth:n}},emptyState:{marginTop:100,cursor:"auto"}})),[n,a]),c=(0,o.qz)(void 0,Zi.Z);return e.isMobile?null:(0,C.jsxs)("div",{style:d.container,children:[(0,C.jsx)(ki.A,{type:"inbox"}),(0,C.jsx)(Mi.A,{scrollerStore:c}),(0,C.jsxs)(X.Z,{type:$.Z.Y,style:d.scroller,store:c,children:[(0,C.jsx)(ut.Z,{onChange:(e,t)=>{let{offsetFromTop:i}=t;ft.n_.setState(i<=0)}}),"all_updates"!==r?(0,C.jsx)(Wt,{type:"archived_only"===r?"archive":"mentions",source:"notifications_tab",tab:"inbox",empty:(0,C.jsx)("div",{style:d.emptyState,children:(0,C.jsx)(vt,{})})},r):t&&(0,C.jsx)(w.Z,{spaceId:t,source:"notifications_tab",empty:()=>(0,C.jsx)("div",{style:d.emptyState,children:(0,C.jsx)(vt,{})})},r)]}),i&&(0,C.jsx)(Ii,{})]})}var Fi=i(670753),Ri=i(261248),Oi=i(212534);function Li(e){const{notificationActivityPairs:t}=e,i=t.map((e=>{let{notification:t}=e;return t})),d=(0,l.O7)(),c=(0,l.Fy)(),u=(0,a.useIntl)(),h=i?i[0]:void 0,g=(0,o.VK)((()=>i.every((e=>e.read))),[i]),m=(0,o.VK)((()=>xt.Fz()),[]),[f,x]=(0,n.useState)(!1),y=(0,n.useCallback)((e=>{i&&h&&(0,Oi.ZP)({event:e,context:Oi.Af.NotificationClick,callback:()=>{x(!0);const e=i.map((e=>{let{id:t}=e;return t}));(async()=>{try{await ge.setNotificationsStatus(d,{spaceId:h.space_id,notificationIds:e,archived:!0})}finally{x(!1)}})();const n=i.filter((e=>!e.read));dt.Jl("mentions",h.space_id,(e=>Math.max(e-n.length,0))),p.Ee(d,{target:"archive",affectedNotificationIds:e,notificationActivityPairs:t})}})}),[d,i,h,t]),b=(0,n.useCallback)((e=>{i&&h&&(0,Oi.ZP)({event:e,context:Oi.Af.NotificationClick,callback:()=>{let e;if(x(!0),g){const n=i.map((e=>{let{id:t}=e;return t}));e=async()=>{try{await ge.setNotificationsStatus(d,{spaceId:h.space_id,notificationIds:n,read:!1})}finally{x(!1)}},dt.Jl("mentions",h.space_id,(e=>e+n.length)),p.Ee(d,{target:"mark_as_unread",affectedNotificationIds:n,notificationActivityPairs:t})}else{const n=i.filter((e=>!e.read)).map((e=>{let{id:t}=e;return t}));e=async()=>{try{await ge.setNotificationsStatus(d,{spaceId:h.space_id,notificationIds:n,read:!0})}finally{x(!1)}},dt.Jl("mentions",h.space_id,(e=>Math.max(e-n.length,0))),p.Ee(d,{target:"mark_as_read",affectedNotificationIds:n,notificationActivityPairs:t})}e()}})}),[d,i,h,g,t]),v=(0,s.yK)((e=>({container:{display:"flex",height:"min-content",padding:c.isMobile?0:2,borderWidth:c.isMobile?0:1,borderStyle:"solid",borderColor:c.isMobile?"transparent":e.stroke.regular,background:c.isMobile?"transparent":e.surface.elevated,borderRadius:6},button:{height:c.isMobile?30:26,width:c.isMobile?30:26},inboxIconBase:{fill:e.icon.secondary,stroke:e.icon.secondary,strokeOpacity:1,strokeWidth:.25},iconStyle:{fill:e.mediumIconColor,padding:2},readIcon:{width:c.isMobile?21:19,height:c.isMobile?22:20},archiveIcon:{width:c.isMobile?24:23,height:c.isMobile?24:23},ellipsisIcon:{width:c.isMobile?24:23,height:c.isMobile?24:23},headerLabel:{paddingLeft:16,paddingRight:16,paddingTop:10,fontWeight:r.Z.fontWeight.semibold}})),[c]);return h?"archived_only"===m?null:(0,C.jsxs)("div",{style:v.container,children:[(0,C.jsx)(Mt.Z,{renderTooltip:()=>(0,C.jsx)(a.FormattedMessage,{...Pi.archiveNotificationGroup}),render:e=>(0,C.jsx)(jt.Z,{ariaLabel:u.formatMessage(Pi.archiveNotificationGroup),style:v.button,icon:li.H,iconStyle:{...v.iconStyle,...v.archiveIcon,height:18,width:18,...v.inboxIconBase},onClick:y,disabled:f,...e})}),(0,C.jsx)(Mt.Z,{renderTooltip:()=>g?(0,C.jsx)(a.FormattedMessage,{...Pi.markNotificationGroupAsUnread}):(0,C.jsx)(a.FormattedMessage,{...Pi.markNotificationGroupAsRead}),render:e=>(0,C.jsx)(jt.Z,{ariaLabel:g?u.formatMessage(Pi.markNotificationGroupAsUnread):u.formatMessage(Pi.markNotificationGroupAsRead),style:v.button,icon:g?Ri.F:Fi.F,iconStyle:{...v.iconStyle,...v.readIcon,...g?{height:17,width:17}:{height:16,width:16},...v.inboxIconBase},onClick:b,disabled:f,...e})})]}):null}const Pi=(0,a.defineMessages)({markNotificationGroupAsRead:{defaultMessage:"Mark notifications in this page as read",id:"NotificationGroupActionsMenu.markNotificationAsRead.tooltipMessage"},markNotificationGroupAsUnread:{defaultMessage:"Mark notifications in this page as unread",id:"NotificationGroupActionsMenu.markNotificationAsUnread.tooltipMessage"},archiveNotificationGroup:{defaultMessage:"Archive notifications in this page",id:"NotificationGroupActionsMenu.handleArchive.tooltipMessage"},changePageNotificationSettings:{defaultMessage:"Change page notification settings",id:"NotificationGroupActionsMenu.notificationSettings.tooltipMessage"}}),Ni=n.memo(Li)},167940:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(749085),o=i(471924);class s extends n.default{getInitialState(){return{flowId:void 0}}getOrCreateFlowId(){const e=this.state.flowId||o.Il();return this.state.flowId&&this.setState({flowId:e}),e}}const a=new s},891694:(e,t,i)=>{i.d(t,{Z:()=>f});i(667294);var n=i(800480),o=i(886628),s=i(724405),a=i(647425),r=i(709291),l=i(531701),d=i(401898),c=i(137810),u=i(174136),p=i(526388),h=i(825464),g=i(44041),m=i(785893);const f=function(e){let{subscriptionTier:t,mobileStyle:i,desktopStyle:f,analyticsName:x,onClick:y}=e;const b=(0,s.Fg)(),v=(0,n.O7)(),{device:S}=v,C=S.isIOS&&S.isNative,j=(0,o.VK)((()=>function(e,t){switch(e){case"plus":case"business":case"enterprise":return{color:t.blueColor,background:"light"===t.mode?l.ZP.diffBackground:"rgba(35, 131, 226, 0.2)",fontWeight:c.Z.fontWeight.medium};default:return{}}}(t,b)),[t,b]);if(C)return null;let M;return"personal"===t?M=(0,m.jsx)(r.FormattedMessage,{defaultMessage:"Personal Pro",id:"upgradeButton.personal.text"}):(0,a.eR)(t)?M=(0,m.jsx)(r.FormattedMessage,{defaultMessage:"Plus ↗",id:"upgradeButton.plus.textWithArrow"}):(0,a.NG)(t)?M=(0,m.jsx)(r.FormattedMessage,{defaultMessage:"Business ↗",id:"upgradeButton.business.textWithArrow"}):(0,a.wP)(t)?M=(0,m.jsx)(r.FormattedMessage,{defaultMessage:"Enterprise ↗",id:"upgradeButton.enterprise.textWithArrow"}):(0,d.t1)(t),S.isMobile?(0,m.jsx)(u.Z,{mobileStyle:i,children:M}):(0,m.jsx)(p.Z,{delayThreshold:120,placement:h.u.Bottom,renderTooltip:()=>(0,m.jsxs)("div",{style:{maxWidth:500},children:[(0,m.jsx)(r.FormattedMessage,{defaultMessage:"Upgrade to use this feature.",id:"upgradeButton.upgrade.tooltip"}),(0,m.jsx)("br",{}),(0,m.jsx)(r.FormattedMessage,{defaultMessage:"Click to learn more.",id:"upgradeButton.learnMore.tooltip"})]}),originGap:6,render:e=>(0,m.jsx)(u.Z,{desktopStyle:f,innerStyle:j,onClick:e=>function(e,t,i,n,o){g.y(n,{from:t,for:i}),o&&o(e)}(e,x,t,v,y),...e,children:M})})}},47054:(e,t,i)=>{i.d(t,{AD:()=>d});i(757658);var n=i(730120),o=i(619584),s=i(159730);const a=7;function r(e){if(void 0===e)return n.ou.utc();const t={zone:"utc"};return"number"==typeof e?n.ou.fromMillis(e,t):n.ou.fromISO(e,t)}function l(e,t){const i=t?r(t):n.ou.utc(),o=r(e??function(e){const{days:t,endDate:i,startDate:o}=e;if(t<=0)throw new s.p8("Days must be greater than 0");const a=i?r(i):n.ou.utc();if(!a.isValid)throw new s.p8(`endDate ${i} is in an invalid format`);const l=o?r(o).toMillis():0,d=a.minus({days:t-1}).toMillis();return Math.max(d,l)}({days:a,endDate:t}));if(!o.isValid)throw new s.p8(`startDate ${e} is in an invalid format`);if(!i.isValid)throw new s.p8(`endDate ${t} is in an invalid format`);if(o>i)throw new s.p8(`startDate ${e} => ${o.toISO()} is after endDate ${t} => ${i.toISO()}`);return{startTimestamp:o.toMillis(),endTimestamp:i.toMillis()}}function d(e,t){const{startTimestamp:i,endTimestamp:n}=l(e,t),s=[];let a=i;for(;a<=n;)s.push(r(a).toISODate()),a+=o.A0;return s}},883176:(e,t,i)=>{i.d(t,{z:()=>s});i(667294);var n=i(745238),o=i(785893);const s=(0,n.IU)("analyticsSearch",{viewBox:"0 0 51 52",svg:(0,o.jsx)("path",{d:"M.414 21.297c0 2.86.533 5.543 1.6 8.049a21.156 21.156 0 004.468 6.576 20.797 20.797 0 006.577 4.443c2.505 1.067 5.18 1.6 8.023 1.6 2.116 0 4.13-.305 6.043-.914a21.55 21.55 0 005.332-2.565l11.654 11.655a3.44 3.44 0 001.245.812c.473.186.964.28 1.472.28.728 0 1.371-.17 1.93-.508a3.48 3.48 0 001.32-1.346 3.887 3.887 0 00.482-1.93 3.8 3.8 0 00-.279-1.447 3.126 3.126 0 00-.787-1.193l-11.578-11.63a20.414 20.414 0 002.818-5.51c.694-2.013 1.041-4.138 1.041-6.372 0-2.844-.541-5.51-1.625-7.998a20.718 20.718 0 00-4.443-6.602 20.515 20.515 0 00-6.602-4.468c-2.488-1.067-5.162-1.6-8.023-1.6-2.844 0-5.518.533-8.023 1.6a20.592 20.592 0 00-6.577 4.468A21.072 21.072 0 002.014 13.3c-1.067 2.488-1.6 5.154-1.6 7.998zm5.408 0c0-2.1.39-4.071 1.168-5.916a15.517 15.517 0 013.301-4.875 15.168 15.168 0 014.875-3.276c1.845-.795 3.817-1.193 5.916-1.193 2.116 0 4.096.398 5.941 1.193a14.877 14.877 0 014.85 3.276 15.515 15.515 0 013.3 4.875c.796 1.845 1.194 3.817 1.194 5.916 0 2.116-.398 4.096-1.193 5.941a15.517 15.517 0 01-3.301 4.875 15.426 15.426 0 01-4.85 3.276c-1.845.795-3.825 1.193-5.941 1.193-2.099 0-4.07-.398-5.916-1.193a15.737 15.737 0 01-4.875-3.276 15.52 15.52 0 01-3.3-4.875c-.78-1.845-1.169-3.825-1.169-5.941zm15.31 10.36c.458 0 .746-.263.864-.788.237-1.32.474-2.437.711-3.351.254-.931.559-1.693.914-2.286a4.554 4.554 0 011.397-1.498c.575-.389 1.311-.694 2.209-.914.914-.237 2.056-.448 3.427-.634.542-.085.813-.381.813-.89 0-.507-.271-.812-.813-.913-1.354-.17-2.496-.373-3.427-.61-.915-.253-1.668-.567-2.26-.939a4.814 4.814 0 01-1.422-1.498c-.373-.61-.677-1.363-.914-2.26a42.337 42.337 0 01-.635-3.326c-.084-.542-.372-.813-.863-.813s-.796.263-.914.788a53.724 53.724 0 01-.737 3.377c-.22.914-.507 1.675-.863 2.285a4.64 4.64 0 01-1.396 1.472c-.576.373-1.32.677-2.235.914-.914.22-2.048.424-3.402.61-.559.101-.838.406-.838.914 0 .49.28.787.838.889 1.693.186 3.055.44 4.088.761 1.032.305 1.828.762 2.387 1.371.575.61 1.015 1.44 1.32 2.489.305 1.05.584 2.395.838 4.037a1 1 0 00.279.584c.17.152.38.228.635.228z"})})},240745:(e,t,i)=>{i.d(t,{M:()=>s});i(667294);var n=i(745238),o=i(785893);const s=(0,n.IU)("arrowDown",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M8 1.57715C7.5625 1.57715 7.25488 1.88477 7.25488 2.33594V10.8262L7.30957 12.3027L5.50488 10.2861L3.95312 8.75488C3.82324 8.625 3.63184 8.53613 3.42676 8.53613C3.0166 8.53613 2.70898 8.85059 2.70898 9.26758C2.70898 9.46582 2.78418 9.64355 2.94141 9.80762L7.44629 14.3193C7.59668 14.4697 7.79492 14.5586 8 14.5586C8.20508 14.5586 8.40332 14.4697 8.55371 14.3193L13.0586 9.80762C13.2158 9.64355 13.291 9.46582 13.291 9.26758C13.291 8.85059 12.9902 8.53613 12.5801 8.53613C12.3682 8.53613 12.1836 8.625 12.0469 8.75488L10.4951 10.2861L8.69043 12.2959L8.74512 10.8262V2.33594C8.74512 1.88477 8.44434 1.57715 8 1.57715Z"})})},908597:(e,t,i)=>{i.d(t,{Z:()=>s});i(667294);var n=i(745238),o=i(785893);const s=(0,n.IU)("arrowUp",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M8 14.5586C8.44434 14.5586 8.74512 14.251 8.74512 13.7998V5.30957L8.69043 3.83984L10.4951 5.84961L12.0469 7.38086C12.1836 7.51074 12.3682 7.59961 12.5801 7.59961C12.9902 7.59961 13.291 7.28516 13.291 6.86816C13.291 6.66992 13.2158 6.49219 13.0586 6.32812L8.55371 1.81641C8.40332 1.66602 8.20508 1.57715 8 1.57715C7.79492 1.57715 7.59668 1.66602 7.44629 1.81641L2.94141 6.32812C2.78418 6.49219 2.70898 6.66992 2.70898 6.86816C2.70898 7.28516 3.0166 7.59961 3.42676 7.59961C3.63184 7.59961 3.82324 7.51074 3.95312 7.38086L5.50488 5.84961L7.30957 3.83301L7.25488 5.30957V13.7998C7.25488 14.251 7.5625 14.5586 8 14.5586Z"})})},222109:(e,t,i)=>{i.d(t,{T:()=>s});i(667294);var n=i(745238),o=i(785893);const s=(0,n.IU)("arrowsUpDown",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M4.11 2.385a.61.61 0 01.48-.211c.191 0 .353.07.486.21L8.03 5.409a.66.66 0 01.2.475c0 .191-.061.347-.182.469a.627.627 0 01-.463.181.59.59 0 01-.451-.187L5.926 5.098l-.72-.844.04 1.219v7.242a.624.624 0 01-.187.469.624.624 0 01-.47.187.636.636 0 01-.468-.187.635.635 0 01-.182-.47V5.474l.041-1.22-.726.845-1.201 1.248a.61.61 0 01-.457.187.627.627 0 01-.463-.181.634.634 0 01-.182-.47.66.66 0 01.2-.474l2.958-3.023zm7.786 10.781a.636.636 0 01-.486.205.665.665 0 01-.486-.205l-2.947-3.035a.64.64 0 01-.206-.475c0-.191.061-.345.182-.463a.634.634 0 01.469-.181c.18 0 .33.06.451.181l1.201 1.248.727.85-.041-1.219V2.824c0-.187.06-.342.181-.463a.636.636 0 01.47-.187.627.627 0 01.65.65v7.248l-.041 1.219.726-.85 1.207-1.248a.6.6 0 01.451-.181c.188 0 .342.06.463.181a.615.615 0 01.182.463.648.648 0 01-.2.475l-2.953 3.035z"})})},882855:(e,t,i)=>{i.d(t,{E:()=>s});i(667294);var n=i(745238),o=i(785893);const s=(0,n.IU)("chevronDownRounded",{viewBox:"0 0 15 9",svg:(0,o.jsx)("path",{d:"M7.92188 8.65625C8.19531 8.64844 8.44531 8.54688 8.64844 8.32812L14.5859 2.25C14.7578 2.07812 14.8516 1.85938 14.8516 1.60156C14.8516 1.08594 14.4453 0.671875 13.9297 0.671875C13.6797 0.671875 13.4375 0.773438 13.2578 0.953125L7.92969 6.42969L2.58594 0.953125C2.40625 0.78125 2.17188 0.671875 1.91406 0.671875C1.39844 0.671875 0.992188 1.08594 0.992188 1.60156C0.992188 1.85938 1.08594 2.07812 1.25781 2.25L7.20312 8.32812C7.41406 8.54688 7.64844 8.65625 7.92188 8.65625Z"})})},101464:(e,t,i)=>{i.d(t,{k:()=>s});i(667294);var n=i(745238),o=i(785893);const s=(0,n.IU)("chevronLeftRounded",{viewBox:"0 0 24 24",svg:(0,o.jsx)("path",{d:"M7.1875 11.8594C7.1875 12.0547 7.25781 12.2266 7.40625 12.375L13.6016 18.4297C13.7344 18.5703 13.9062 18.6406 14.1094 18.6406C14.5156 18.6406 14.8281 18.3359 14.8281 17.9297C14.8281 17.7266 14.7422 17.5547 14.6172 17.4219L8.92969 11.8594L14.6172 6.29688C14.7422 6.16406 14.8281 5.98438 14.8281 5.78906C14.8281 5.38281 14.5156 5.07812 14.1094 5.07812C13.9062 5.07812 13.7344 5.14844 13.6016 5.28125L7.40625 11.3438C7.25781 11.4844 7.1875 11.6641 7.1875 11.8594Z"})})},516880:(e,t,i)=>{i.d(t,{R:()=>s});i(667294);var n=i(745238),o=i(785893);const s=(0,n.IU)("chevronUpRounded",{viewBox:"0 0 15 9",svg:(0,o.jsx)("path",{d:"M1.258 6.5L7.203.422a.946.946 0 01.719-.32.99.99 0 01.726.32L14.586 6.5a.89.89 0 01.266.648c0 .524-.407.93-.922.93a.921.921 0 01-.672-.281L7.93 2.32 2.586 7.797a.926.926 0 01-.672.281.915.915 0 01-.922-.93c0-.25.094-.476.266-.648z"})})},964275:(e,t,i)=>{i.d(t,{D:()=>s});i(667294);var n=i(745238),o=i(785893);const s=(0,n.IU)("closeSmall",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M3.732 11.052c-.303.308-.32.877.011 1.202.33.33.894.32 1.203.011L8 9.21l3.05 3.05c.32.325.872.32 1.197-.011a.857.857 0 00.01-1.197L9.21 8.002l3.05-3.056a.857.857 0 00-.01-1.197.857.857 0 00-1.198-.01L8 6.788 4.946 3.732c-.31-.303-.878-.32-1.203.01-.325.331-.314.895-.01 1.203l3.055 3.056-3.056 3.05z"})})},248780:(e,t,i)=>{i.d(t,{l:()=>s});i(667294);var n=i(745238),o=i(785893);const s=(0,n.IU)("createPage",{viewBox:"0 0 24 24",svg:(0,o.jsx)("g",{children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M9.944 14.721c.104.094.216.12.336.079l1.703-.688 6.844-6.844-1.406-1.398-6.836 6.836-.711 1.68c-.052.13-.029.242.07.335zm8.102-9.484l1.414 1.406.515-.523a.917.917 0 00.282-.633.76.76 0 00-.258-.61l-.25-.25a.702.702 0 00-.578-.187.975.975 0 00-.617.297l-.508.5zm-9.453.127a3.85 3.85 0 00-3.85 3.85v6.5a3.85 3.85 0 003.85 3.85h6.5a3.85 3.85 0 003.85-3.85V12.95a.85.85 0 10-1.7 0v2.764a2.15 2.15 0 01-2.15 2.15h-6.5a2.15 2.15 0 01-2.15-2.15v-6.5a2.15 2.15 0 012.15-2.15h3.395a.85.85 0 000-1.7H8.593z",clipRule:"evenodd"})})})},340304:(e,t,i)=>{i.d(t,{w:()=>s});i(667294);var n=i(745238),o=i(785893);const s=(0,n.IU)("document",{viewBox:"0 0 23.5 23.5",svg:(0,o.jsx)("path",{d:"M9.14 8.156a.494.494 0 01-.5-.5c0-.14.047-.258.141-.351a.487.487 0 01.36-.14h5.718a.477.477 0 01.492.492.494.494 0 01-.14.35.464.464 0 01-.352.15H9.141zm0 2.664a.487.487 0 01-.359-.14.504.504 0 01-.14-.36c0-.135.046-.25.14-.343a.487.487 0 01.36-.141h5.718a.477.477 0 01.493.484c0 .14-.047.26-.141.36a.477.477 0 01-.352.14H9.141zm0 2.672a.487.487 0 01-.359-.14.468.468 0 01-.14-.344c0-.14.046-.258.14-.352a.473.473 0 01.36-.148h2.765c.146 0 .266.05.36.148a.48.48 0 01.14.352c0 .135-.047.25-.14.344a.487.487 0 01-.36.14H9.141zm-3.843 4.266V5.968c0-.838.213-1.473.64-1.905.428-.438 1.06-.657 1.899-.657h8.32c.839 0 1.472.219 1.899.656.427.433.64 1.068.64 1.907v11.789c0 .844-.213 1.482-.64 1.914-.427.432-1.06.648-1.899.648h-8.32c-.839 0-1.471-.216-1.899-.648-.427-.432-.64-1.07-.64-1.914zm1.539-.094c0 .36.094.635.281.828.188.193.472.29.852.29h8.062c.38 0 .664-.097.852-.29.187-.193.281-.469.281-.828V6.07c0-.364-.094-.643-.281-.836-.188-.198-.471-.296-.852-.296H7.97c-.38 0-.664.098-.852.296-.187.193-.281.472-.281.836v11.594z"})})},97439:(e,t,i)=>{i.d(t,{D:()=>s});i(667294);var n=i(745238),o=i(785893);const s=(0,n.IU)("doubleChevronLeft",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M7.07031 13.8887C7.2207 14.0391 7.40527 14.1211 7.62402 14.1211C8.06836 14.1211 8.41699 13.7725 8.41699 13.3281C8.41699 13.1094 8.32812 12.9043 8.17773 12.7539L3.37207 8.05762L8.17773 3.375C8.32812 3.21777 8.41699 3.0127 8.41699 2.80078C8.41699 2.35645 8.06836 2.00781 7.62402 2.00781C7.40527 2.00781 7.2207 2.08984 7.07031 2.24023L1.73828 7.44922C1.56055 7.62012 1.46484 7.8252 1.46484 8.06445C1.46484 8.29688 1.55371 8.49512 1.73828 8.67969L7.07031 13.8887ZM13.1748 13.8887C13.3252 14.0391 13.5098 14.1211 13.7354 14.1211C14.1797 14.1211 14.5283 13.7725 14.5283 13.3281C14.5283 13.1094 14.4395 12.9043 14.2891 12.7539L9.4834 8.05762L14.2891 3.375C14.4395 3.21777 14.5283 3.0127 14.5283 2.80078C14.5283 2.35645 14.1797 2.00781 13.7354 2.00781C13.5098 2.00781 13.3252 2.08984 13.1748 2.24023L7.84961 7.44922C7.66504 7.62012 7.57617 7.8252 7.56934 8.06445C7.56934 8.29688 7.66504 8.49512 7.84961 8.67969L13.1748 13.8887Z"})})},207525:(e,t,i)=>{i.d(t,{t:()=>s});i(667294);var n=i(745238),o=i(785893);const s=(0,n.IU)("doubleChevronRight",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M2.25781 14.1211C2.47656 14.1211 2.66797 14.0391 2.81836 13.8887L8.14355 8.67969C8.32812 8.49512 8.41699 8.29688 8.41699 8.06445C8.41699 7.8252 8.32812 7.62012 8.14355 7.44922L2.81836 2.24023C2.66797 2.08984 2.4834 2.00781 2.25781 2.00781C1.81348 2.00781 1.46484 2.35645 1.46484 2.80078C1.46484 3.0127 1.55371 3.21777 1.7041 3.375L6.50977 8.05762L1.7041 12.7539C1.55371 12.9043 1.46484 13.1094 1.46484 13.3281C1.46484 13.7725 1.81348 14.1211 2.25781 14.1211ZM8.36914 14.1211C8.58789 14.1211 8.77246 14.0391 8.92285 13.8887L14.2549 8.67969C14.4395 8.49512 14.5283 8.29688 14.5283 8.06445C14.5283 7.8252 14.4326 7.62012 14.2549 7.44922L8.92285 2.24023C8.77246 2.08984 8.58789 2.00781 8.36914 2.00781C7.9248 2.00781 7.56934 2.35645 7.56934 2.80078C7.56934 3.0127 7.66504 3.21777 7.81543 3.375L12.6211 8.05762L7.81543 12.7539C7.66504 12.9043 7.56934 13.1094 7.56934 13.3281C7.56934 13.7725 7.9248 14.1211 8.36914 14.1211Z"})})},206637:(e,t,i)=>{i.d(t,{I:()=>s});i(667294);var n=i(745238),o=i(785893);const s=(0,n.IU)("filterCircled",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M8 15.126C11.8623 15.126 15.0615 11.9336 15.0615 8.06445C15.0615 4.20215 11.8623 1.00293 7.99316 1.00293C4.13086 1.00293 0.938477 4.20215 0.938477 8.06445C0.938477 11.9336 4.1377 15.126 8 15.126ZM8 13.7383C4.85547 13.7383 2.33301 11.209 2.33301 8.06445C2.33301 4.91992 4.84863 2.39746 7.99316 2.39746C11.1377 2.39746 13.667 4.91992 13.6738 8.06445C13.6738 11.209 11.1445 13.7383 8 13.7383ZM4.41797 6.75879H11.5889C11.9307 6.75879 12.1699 6.54688 12.1699 6.22559C12.1699 5.9043 11.9307 5.68555 11.5889 5.68555H4.41797C4.07617 5.68555 3.84375 5.9043 3.84375 6.22559C3.84375 6.54688 4.07617 6.75879 4.41797 6.75879ZM5.36816 9.02148H10.6455C10.9805 9.02148 11.2197 8.80273 11.2197 8.48145C11.2197 8.16016 10.9805 7.94141 10.6455 7.94141H5.36816C5.02637 7.94141 4.78711 8.16016 4.78711 8.48145C4.78711 8.80273 5.02637 9.02148 5.36816 9.02148ZM6.35254 11.2773H9.6543C9.99609 11.2773 10.2354 11.0654 10.2354 10.7441C10.2354 10.4229 9.99609 10.2041 9.6543 10.2041H6.35254C6.01074 10.2041 5.77148 10.4229 5.77148 10.7441C5.77148 11.0654 6.01074 11.2773 6.35254 11.2773Z"})})},222686:(e,t,i)=>{i.d(t,{f:()=>s});i(667294);var n=i(745238),o=i(785893);const s=(0,n.IU)("person",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M7.7832 8.00195C9.27344 8.00195 10.5381 6.67578 10.5381 4.95996C10.5381 3.28516 9.2666 2 7.7832 2C6.29297 2 5.01465 3.30566 5.02148 4.97363C5.02148 6.67578 6.28613 8.00195 7.7832 8.00195ZM3.51758 14.3594H12.0352C13.1631 14.3594 13.5527 14.0176 13.5527 13.3887C13.5527 11.6318 11.3242 9.21191 7.77637 9.21191C4.23535 9.21191 2 11.6318 2 13.3887C2 14.0176 2.38965 14.3594 3.51758 14.3594Z"})})},414734:(e,t,i)=>{i.d(t,{X:()=>s});i(667294);var n=i(745238),o=i(785893);const s=(0,n.IU)("personCrossedOut",{viewBox:"0 0 44 44",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M5.4857 44H0L44 8.56549V13.0061L5.4857 44Z"}),(0,o.jsx)("path",{d:"M39.8048 44H8.66491L25.6448 30.4378C26.9394 30.6489 28.1581 30.9719 29.3009 31.4067C31.5362 32.2374 33.4346 33.326 34.9964 34.6723C36.5725 36.0044 37.7761 37.4367 38.6071 38.9692C39.4525 40.5018 39.8752 41.9555 39.8752 43.3305C39.8752 43.5675 39.8517 43.7906 39.8048 44Z"}),(0,o.jsx)("path",{d:"M30.3971 16.7973C30.3971 16.8668 30.3965 16.9359 30.3952 17.0048L19.3828 25.9192C18.7467 25.7134 18.1339 25.4228 17.5446 25.0473C16.2408 24.2023 15.1876 23.0708 14.3853 21.6528C13.5972 20.2205 13.2032 18.6163 13.2032 16.8403C13.2032 15.0929 13.5972 13.5174 14.3853 12.1137C15.1876 10.7101 16.2408 9.60007 17.5446 8.78366C18.8485 7.96725 20.267 7.55905 21.8001 7.55905C23.3332 7.55905 24.7517 7.96009 26.0556 8.76218C27.3595 9.56426 28.4054 10.6671 29.1935 12.0708C29.9959 13.4601 30.3971 15.0356 30.3971 16.7973Z"})]})})},479198:(e,t,i)=>{i.d(t,{n:()=>s});i(667294);var n=i(745238),o=i(785893);const s=(0,n.IU)("refresh",{viewBox:"0 0 24 20",svg:(0,o.jsx)("path",{d:"M0.19663 9.99023C-0.184229 10.5273-0.00844799 11.0059 0.694677 11.0059L2.04233 11.0059C2.56968 15.9766 6.85679 19.9219 11.9447 19.9219C14.9232 19.9219 17.6185 18.5645 19.4544 16.4551C19.8158 16.0352 19.7669 15.5078 19.3861 15.2344C19.0052 14.9609 18.5365 15.0586 18.224 15.4199C16.7103 17.168 14.4642 18.2617 11.9447 18.2617C7.68686 18.2617 4.22007 15.1074 3.72202 11.0059L5.1771 11.0059C5.87046 11.0059 6.04624 10.5273 5.67515 10L3.48765 6.88477C3.17515 6.43555 2.7064 6.42578 2.38413 6.88477ZM4.44468 3.4668C4.07358 3.88672 4.12241 4.4043 4.51304 4.67773C4.8939 4.95117 5.35288 4.86328 5.67515 4.50195C7.19858 2.76367 9.44468 1.66016 11.9447 1.66016C16.1927 1.66016 19.6595 4.81445 20.1673 8.92578L18.7123 8.92578C18.0189 8.92578 17.8431 9.39453 18.2142 9.93164L20.4017 13.0469C20.7142 13.4961 21.183 13.5059 21.5052 13.0469L23.683 9.94141C24.0736 9.39453 23.888 8.92578 23.1849 8.92578L21.847 8.92578C21.3099 3.95508 17.0326 0 11.9447 0C8.96616 0 6.28061 1.34766 4.44468 3.4668Z"})})},970693:(e,t,i)=>{i.d(t,{mb:()=>r,nK:()=>l,pe:()=>d});var n=i(640506),o=i(407057),s=i(253877),a=i(842875);function r(e){const{dateTime:t,intl:i,shortenDateAndRange:n}=e,a=s.OQ.toPersistedDate(t.valueOf());return o.ZV({value:a,allowRelativeDates:!0,intl:i,shortenDateAndRange:n,displayInUserTimezone:!0})}function l(e){const{dateTime:t,intl:i,userTimeZone:n,displayInUserTimezone:a,alwaysIncludeTimezone:r}=e,l=s.OQ.toPersistedDateTime(t.valueOf(),t.zoneName);return o.ZV({value:l,allowRelativeDates:!0,intl:i,userTimeZone:n,displayInUserTimezone:a,alwaysIncludeTimezone:r})}function d(e){const{luxonRange:t,intl:i}=e,r=s.OQ.toPersistedDateRange(t),l=o.ZV({value:r,allowRelativeDates:!1,shortenDateAndRange:!0,intl:i,displayInUserTimezone:!0}),d=t.end.setZone((0,a.r)()),c=o.mr({start_time:d.toFormat(n.jK),humanReadable:!1,intl:i});return i.formatMessage({id:"verification.timeRange",defaultMessage:"{formattedDateRange} at {formattedEndTime}"},{formattedDateRange:l,formattedEndTime:c})}}}]);