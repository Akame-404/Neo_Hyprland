"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[39765],{244975:(e,t,a)=>{a.d(t,{EK:()=>l,IM:()=>c,QZ:()=>r,YY:()=>n,_g:()=>o,dy:()=>s,x9:()=>d,yb:()=>u});var i=a(730459);function s(e,t){i.K4(e,"download_desktop_app",t)}function n(e,t){i.K4(e,"download_mobile_app",t)}function o(e,t){const{name:a,...s}=t;i.K4(e,"click_link",{...s,click_name:a})}function r(e,t){i.K4(e,"scroll",t)}function c(e,t){i.K4(e,"customer_io_in_app_callout_show",t)}function l(e,t){i.K4(e,"customer_io_in_app_callout_suppress",t)}function d(e,t){i.K4(e,"customer_io_in_app_callout_dismiss",t)}function u(e,t){i.K4(e,"customer_io_in_app_callout_error",t)}},8874:(e,t,a)=>{a.d(t,{S:()=>n});var i=a(886628),s=a(80444);function n(){return(0,i.VK)((()=>{const{currentSpaceStore:e}=s.default.state;return(null==e?void 0:e.getMemberCountFromPublicSpaceData())||null}),[])}},200202:(e,t,a)=>{a.r(t),a.d(t,{InjectThirdPartyScripts:()=>Z,useThirdPartyScripts:()=>M});var i=a(667294),s=a(800480),n=a(886628),o=(a(757658),a(307032)),r=a(674686),c=a(966673),l=a(265454);const d={siteId:"a2a8e2144b2bbbb4074a",orgId:"901895b8-45c7-40c8-ba91-626cfc6739b3"};function u(){var e,t,a;if(!window._cio)for(window._cio=[],e=function(e){return function(){window._cio.push([e].concat(Array.prototype.slice.call(arguments,0)))}},t=["load","identify","sidentify","track","page","on","off","reset"],a=0;a<t.length;a++)window._cio[t[a]]=e(t[a])}var g=a(922121),p=a(249902),f=a(244975),m=a(608055),S=a(95477),y=a(304708),_=a(215010),v=a(994134),w=a(918514),b=a(258455),I=a(600051),k=a(80444),E=a(461893),C=a(574055),K=a(319385),h=a(807339),R=a(381979),A=a(277907);var L=a(8874);function M(){const e=(0,s.O7)(),t=(0,L.S)()||0,a=(0,s.Fy)(),{currentUser:M}=e,Z=(0,n.VK)((()=>{var e;return null===(e=k.default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),D=(0,n.VK)((()=>h.C.state.ready),[]),{siteGoogleAnalyticsId:P,isSitesRoutingEnabled:V}=(0,n.VK)((()=>{const t=(0,w.Sr)(e)&&y.Pr();if(!t)return{siteGoogleAnalyticsId:void 0,isSitesRoutingEnabled:t};const{publicPageData:a}=I.Z.state,{siteGoogleAnalyticsId:i}=a||{};return i&&i.match(/[0-9A-Z]+/)?{siteGoogleAnalyticsId:`G-${i}`,isSitesRoutingEnabled:t}:{siteGoogleAnalyticsId:void 0,isSitesRoutingEnabled:t}}),[e]);!function(e){let{isEnabled:t,cookieService:a,siteGoogleAnalyticsId:s}=e;(0,i.useEffect)((()=>{(async function(){return!(!t||!s||!(await r.ec({service:"google_tag_manager",cookieService:a}))||"dataLayer"in window)})().then((e=>{if(e)return(0,l.ZP)(`https://www.googletagmanager.com/gtag/js?id=${s}`,{id:"notion-site-google-analytics"}).catch((e=>{console.error("GA script failed to load",e)})).then((()=>{if(window.dataLayer){function e(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",s)}}))}))}),[t,a,s])}({isEnabled:D&&Boolean(V),siteGoogleAnalyticsId:P,cookieService:e.cookieService}),function(e){let{isEnabled:t,isLoggedIn:a,userId:s,onMessageOpened:n,onMessageDismissed:g,onMessageError:p,onMessageAction:f,cookieService:m}=e;(0,i.useEffect)((()=>{(async function(){return!!t&&!!(await r.ec({service:"customer_io",cookieService:m}))&&!("cio-tracker"in window)})().then((e=>{if(e)return u(),(0,l.ZP)("https://assets.customer.io/assets/track.js",{id:"cio-tracker",attributes:{"data-site-id":d.siteId,"data-use-array-params":"true","data-in-app-org-id":d.orgId,"data-use-in-app":"true","data-auto-track-page":"false"}}).catch((e=>{console.error("Customer.io failed to load",e)}))}))}),[t,m]);const S=(0,c.D9)(s);(0,i.useEffect)((()=>{S!==s&&(u(),a&&void 0!==s?(window._cio.identify({id:(0,o.cj)(s)}),n&&window._cio.on("in-app:message-opened",n),g&&window._cio.on("in-app:message-dismissed",g),f&&window._cio.on("in-app:message-action",f),window._cio.on("in-app:message-error",p)):window._cio.reset())}),[a,s,S,n,g,p,f])}({isEnabled:(0,n.VK)((()=>M.isLoggedIn()&&D&&K.default.checkGate({gateName:"customerio"})),[M,D]),isLoggedIn:M.isLoggedIn(),userId:M.id,onMessageOpened:t=>{C.Z.state.suppressReason?f.EK(e,{message_id:t.detail.messageId,reason:C.Z.state.suppressReason}):(C.Z.setState({...C.Z.state,isVisible:!0}),f.IM(e,{message_id:t.detail.messageId}))},onMessageDismissed:t=>{C.Z.setState({...C.Z.state,isVisible:!1}),f.x9(e,{message_id:t.detail.messageId})},onMessageError:t=>{f.yb(e,{message_id:t.detail.messageId})},onMessageAction:t=>{if(t.detail.actionValue.startsWith("relative_url=")){const a=t.detail.actionValue.split("relative_url=")[1];m.c4({environment:e,url:a})}t.detail.message.dismiss()},cookieService:e.cookieService}),(0,p.kI)({...(0,n.VK)((()=>{var e;const i=b.default.state.isSprigEnabled&&E.Z.state.permission.performance&&K.default.checkGate({gateName:"sprig"})&&a.isDesktop,{currentUserSettingsStore:s,currentSpaceStore:n,currentUserStore:o}=k.default.state,r=null==o?void 0:o.getEmail(),c=s?(0,_.e2)(s):null,l=Boolean(null==n?void 0:n.canAdmin()),d=null==n||null===(e=n.getModel())||void 0===e?void 0:e.getDaysSinceCreated();return{isEnabled:i,userEmail:r,userDaysSinceSignup:c??0,userDomainType:(0,_.JF)(),daysSinceSpaceCreated:d,isSpaceAdmin:l,spaceMemberCount:t}}),[a,t]),isLoggedIn:M.isLoggedIn(),userId:M.id,spaceId:Z,sprigConfig:S.default.sprig}),function(e){var t;const{userId:a,spaceId:s,...n}=e,o=(0,A.XJ)(R.Z);(0,i.useEffect)((()=>{if(!o.value)return;const{Sentry:e,sentryInitializeFull:t}=o.value;t({Sentry:{...e,isFullSDK:!0},config:S.default,...n})}),[o.value,n]);const r=null===(t=o.value)||void 0===t?void 0:t.Sentry;(0,i.useEffect)((()=>{r&&r.setUser(a?{id:a}:null)}),[r,a]),(0,i.useEffect)((()=>{r&&r.setTag("space.id",s)}),[r,s])}({userId:M.id,spaceId:Z,getErrorsSampleRate:(0,i.useCallback)((()=>K.default.getConfigKey("sentry","errorsSampleRate")),[]),getTracesSampleRate:(0,i.useCallback)((()=>K.default.getConfigKey("sentry","tracesSampleRate-v0")),[]),getReplaysSessionSampleRate:(0,i.useCallback)((()=>K.default.getConfigKey("sentry","replaysSessionSampleRate-v0")),[]),getReplaysOnErrorSampleRate:(0,i.useCallback)((()=>K.default.getConfigKey("sentry","replaysOnErrorSampleRate-v0")),[]),getIsProfilingEnabled:(0,i.useCallback)((()=>"sentry"===(0,v.getProfilingToolForSession)()),[]),getProfilesSampleRate:(0,i.useCallback)((()=>K.default.getConfigKey("sentry","profilesSampleRate")),[])}),(0,g.useConfigurePalette)({userId:M.id,spaceId:Z,pageType:(0,n.VK)((()=>{var e;return null===(e=k.default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.getType()}),[]),device:a})}function Z(){return M(),null}},574055:(e,t,a)=>{a.d(t,{V:()=>s,Z:()=>o});var i=a(749085);let s=function(e){return e.IN_APP_CALLOUT_CONFLICT="in-app callout conflict",e.DARK_MODE="not shown in dark mode",e}({});class n extends i.default{getInitialState(){return{isVisible:!1,suppressReason:void 0}}}const o=new n}}]);